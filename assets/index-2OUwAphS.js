(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(a){const n=Object.create(null);for(const r of a.split(","))n[r]=1;return r=>r in n}const EMPTY_OBJ$1={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn$1=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),isModelListener=a=>a.startsWith("onUpdate:"),extend$2=Object.assign,remove=(a,n)=>{const r=a.indexOf(n);r>-1&&a.splice(r,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$1=(a,n)=>hasOwnProperty$2.call(a,n),isArray$3=Array.isArray,isMap=a=>toTypeString(a)==="[object Map]",isSet=a=>toTypeString(a)==="[object Set]",isFunction$2=a=>typeof a=="function",isString$1=a=>typeof a=="string",isSymbol=a=>typeof a=="symbol",isObject$5=a=>a!==null&&typeof a=="object",isPromise$1=a=>(isObject$5(a)||isFunction$2(a))&&isFunction$2(a.then)&&isFunction$2(a.catch),objectToString=Object.prototype.toString,toTypeString=a=>objectToString.call(a),toRawType=a=>toTypeString(a).slice(8,-1),isPlainObject=a=>toTypeString(a)==="[object Object]",isIntegerKey=a=>isString$1(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=a=>{const n=Object.create(null);return r=>n[r]||(n[r]=a(r))},camelizeRE$1=/-(\w)/g,camelize$1=cacheStringFunction(a=>a.replace(camelizeRE$1,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(a=>a.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(a=>a.charAt(0).toUpperCase()+a.slice(1)),toHandlerKey=cacheStringFunction(a=>a?`on${capitalize(a)}`:""),hasChanged=(a,n)=>!Object.is(a,n),invokeArrayFns=(a,...n)=>{for(let r=0;r<a.length;r++)a[r](...n)},def=(a,n,r,o=!1)=>{Object.defineProperty(a,n,{configurable:!0,enumerable:!1,writable:o,value:r})},looseToNumber=a=>{const n=parseFloat(a);return isNaN(n)?a:n},toNumber=a=>{const n=isString$1(a)?Number(a):NaN;return isNaN(n)?a:n};let _globalThis;const getGlobalThis$1=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle$1(a){if(isArray$3(a)){const n={};for(let r=0;r<a.length;r++){const o=a[r],s=isString$1(o)?parseStringStyle(o):normalizeStyle$1(o);if(s)for(const l in s)n[l]=s[l]}return n}else if(isString$1(a)||isObject$5(a))return a}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(a){const n={};return a.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const o=r.split(propertyDelimiterRE);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function stringifyStyle(a){if(!a)return"";if(isString$1(a))return a;let n="";for(const r in a){const o=a[r];if(isString$1(o)||typeof o=="number"){const s=r.startsWith("--")?r:hyphenate(r);n+=`${s}:${o};`}}return n}function normalizeClass(a){let n="";if(isString$1(a))n=a;else if(isArray$3(a))for(let r=0;r<a.length;r++){const o=normalizeClass(a[r]);o&&(n+=o+" ")}else if(isObject$5(a))for(const r in a)a[r]&&(n+=r+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(a){return!!a||a===""}const isRef$1=a=>!!(a&&a.__v_isRef===!0),toDisplayString=a=>isString$1(a)?a:a==null?"":isArray$3(a)||isObject$5(a)&&(a.toString===objectToString||!isFunction$2(a.toString))?isRef$1(a)?toDisplayString(a.value):JSON.stringify(a,replacer,2):String(a),replacer=(a,n)=>isRef$1(n)?replacer(a,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[o,s],l)=>(r[stringifySymbol(o,l)+" =>"]=s,r),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>stringifySymbol(r))}:isSymbol(n)?stringifySymbol(n):isObject$5(n)&&!isArray$3(n)&&!isPlainObject(n)?String(n):n,stringifySymbol=(a,n="")=>{var r;return isSymbol(a)?`Symbol(${(r=a.description)!=null?r:n})`:a};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){this._active=!1;let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(this.effects.length=0,r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const n=activeSub,r=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=n,shouldTrack=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)removeSub(n);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(a,n=!1){if(a.flags|=8,n){a.next=batchedComputed,batchedComputed=a;return}a.next=batchedSub,batchedSub=a}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let n=batchedComputed;for(batchedComputed=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let a;for(;batchedSub;){let n=batchedSub;for(batchedSub=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(o){a||(a=o)}n=r}}if(a)throw a}function prepareDeps(a){for(let n=a.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function cleanupDeps(a){let n,r=a.depsTail,o=r;for(;o;){const s=o.prevDep;o.version===-1?(o===r&&(r=s),removeSub(o),removeDep(o)):n=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}a.deps=n,a.depsTail=r}function isDirty(a){for(let n=a.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(refreshComputed(n.dep.computed)||n.dep.version!==n.version))return!0;return!!a._dirty}function refreshComputed(a){if(a.flags&4&&!(a.flags&16)||(a.flags&=-17,a.globalVersion===globalVersion))return;a.globalVersion=globalVersion;const n=a.dep;if(a.flags|=2,n.version>0&&!a.isSSR&&a.deps&&!isDirty(a)){a.flags&=-3;return}const r=activeSub,o=shouldTrack;activeSub=a,shouldTrack=!0;try{prepareDeps(a);const s=a.fn(a._value);(n.version===0||hasChanged(s,a._value))&&(a._value=s,n.version++)}catch(s){throw n.version++,s}finally{activeSub=r,shouldTrack=o,cleanupDeps(a),a.flags&=-3}}function removeSub(a,n=!1){const{dep:r,prevSub:o,nextSub:s}=a;if(o&&(o.nextSub=s,a.prevSub=void 0),s&&(s.prevSub=o,a.nextSub=void 0),r.subs===a&&(r.subs=o,!o&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function removeDep(a){const{prevDep:n,nextDep:r}=a;n&&(n.nextDep=r,a.prevDep=void 0),r&&(r.prevDep=n,a.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const a=trackStack.pop();shouldTrack=a===void 0?!0:a}function cleanupEffect(a){const{cleanup:n}=a;if(a.cleanup=void 0,n){const r=activeSub;activeSub=void 0;try{n()}finally{activeSub=r}}}let globalVersion=0;class Link{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==activeSub)r=this.activeLink=new Link(activeSub,this),activeSub.deps?(r.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=r,activeSub.depsTail=r):activeSub.deps=activeSub.depsTail=r,addSub(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const o=r.nextDep;o.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=o),r.prevDep=activeSub.depsTail,r.nextDep=void 0,activeSub.depsTail.nextDep=r,activeSub.depsTail=r,activeSub.deps===r&&(activeSub.deps=o)}return r}trigger(n){this.version++,globalVersion++,this.notify(n)}notify(n){startBatch();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{endBatch()}}}function addSub(a){if(a.dep.sc++,a.sub.flags&4){const n=a.dep.computed;if(n&&!a.dep.subs){n.flags|=20;for(let o=n.deps;o;o=o.nextDep)addSub(o)}const r=a.dep.subs;r!==a&&(a.prevSub=r,r&&(r.nextSub=a)),a.dep.subs=a}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(a,n,r){if(shouldTrack&&activeSub){let o=targetMap.get(a);o||targetMap.set(a,o=new Map);let s=o.get(r);s||(o.set(r,s=new Dep),s.map=o,s.key=r),s.track()}}function trigger$2(a,n,r,o,s,l){const c=targetMap.get(a);if(!c){globalVersion++;return}const u=d=>{d&&d.trigger()};if(startBatch(),n==="clear")c.forEach(u);else{const d=isArray$3(a),f=d&&isIntegerKey(r);if(d&&r==="length"){const v=Number(o);c.forEach((g,y)=>{(y==="length"||y===ARRAY_ITERATE_KEY||!isSymbol(y)&&y>=v)&&u(g)})}else switch((r!==void 0||c.has(void 0))&&u(c.get(r)),f&&u(c.get(ARRAY_ITERATE_KEY)),n){case"add":d?f&&u(c.get("length")):(u(c.get(ITERATE_KEY)),isMap(a)&&u(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":d||(u(c.get(ITERATE_KEY)),isMap(a)&&u(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(a)&&u(c.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(a,n){const r=targetMap.get(a);return r&&r.get(n)}function reactiveReadArray(a){const n=toRaw(a);return n===a?n:(track(n,"iterate",ARRAY_ITERATE_KEY),isShallow(a)?n:n.map(toReactive))}function shallowReadArray(a){return track(a=toRaw(a),"iterate",ARRAY_ITERATE_KEY),a}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,toReactive)},concat(...a){return reactiveReadArray(this).concat(...a.map(n=>isArray$3(n)?reactiveReadArray(n):n))},entries(){return iterator$1(this,"entries",a=>(a[1]=toReactive(a[1]),a))},every(a,n){return apply(this,"every",a,n,void 0,arguments)},filter(a,n){return apply(this,"filter",a,n,r=>r.map(toReactive),arguments)},find(a,n){return apply(this,"find",a,n,toReactive,arguments)},findIndex(a,n){return apply(this,"findIndex",a,n,void 0,arguments)},findLast(a,n){return apply(this,"findLast",a,n,toReactive,arguments)},findLastIndex(a,n){return apply(this,"findLastIndex",a,n,void 0,arguments)},forEach(a,n){return apply(this,"forEach",a,n,void 0,arguments)},includes(...a){return searchProxy(this,"includes",a)},indexOf(...a){return searchProxy(this,"indexOf",a)},join(a){return reactiveReadArray(this).join(a)},lastIndexOf(...a){return searchProxy(this,"lastIndexOf",a)},map(a,n){return apply(this,"map",a,n,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...a){return noTracking(this,"push",a)},reduce(a,...n){return reduce$1(this,"reduce",a,n)},reduceRight(a,...n){return reduce$1(this,"reduceRight",a,n)},shift(){return noTracking(this,"shift")},some(a,n){return apply(this,"some",a,n,void 0,arguments)},splice(...a){return noTracking(this,"splice",a)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(a){return reactiveReadArray(this).toSorted(a)},toSpliced(...a){return reactiveReadArray(this).toSpliced(...a)},unshift(...a){return noTracking(this,"unshift",a)},values(){return iterator$1(this,"values",toReactive)}};function iterator$1(a,n,r){const o=shallowReadArray(a),s=o[n]();return o!==a&&!isShallow(a)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.value&&(l.value=r(l.value)),l}),s}const arrayProto$1=Array.prototype;function apply(a,n,r,o,s,l){const c=shallowReadArray(a),u=c!==a&&!isShallow(a),d=c[n];if(d!==arrayProto$1[n]){const g=d.apply(a,l);return u?toReactive(g):g}let f=r;c!==a&&(u?f=function(g,y){return r.call(this,toReactive(g),y,a)}:r.length>2&&(f=function(g,y){return r.call(this,g,y,a)}));const v=d.call(c,f,o);return u&&s?s(v):v}function reduce$1(a,n,r,o){const s=shallowReadArray(a);let l=r;return s!==a&&(isShallow(a)?r.length>3&&(l=function(c,u,d){return r.call(this,c,u,d,a)}):l=function(c,u,d){return r.call(this,c,toReactive(u),d,a)}),s[n](l,...o)}function searchProxy(a,n,r){const o=toRaw(a);track(o,"iterate",ARRAY_ITERATE_KEY);const s=o[n](...r);return(s===-1||s===!1)&&isProxy(r[0])?(r[0]=toRaw(r[0]),o[n](...r)):s}function noTracking(a,n,r=[]){pauseTracking(),startBatch();const o=toRaw(a)[n].apply(a,r);return endBatch(),resetTracking(),o}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(isSymbol));function hasOwnProperty$1(a){isSymbol(a)||(a=String(a));const n=toRaw(this);return track(n,"has",a),n.hasOwnProperty(a)}class BaseReactiveHandler{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,o){if(r==="__v_skip")return n.__v_skip;const s=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return l;if(r==="__v_raw")return o===(s?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(o)?n:void 0;const c=isArray$3(n);if(!s){let d;if(c&&(d=arrayInstrumentations[r]))return d;if(r==="hasOwnProperty")return hasOwnProperty$1}const u=Reflect.get(n,r,isRef(n)?n:o);return(isSymbol(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(s||track(n,"get",r),l)?u:isRef(u)?c&&isIntegerKey(r)?u:u.value:isObject$5(u)?s?readonly(u):reactive(u):u}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!1,n)}set(n,r,o,s){let l=n[r];if(!this._isShallow){const d=isReadonly(l);if(!isShallow(o)&&!isReadonly(o)&&(l=toRaw(l),o=toRaw(o)),!isArray$3(n)&&isRef(l)&&!isRef(o))return d?!1:(l.value=o,!0)}const c=isArray$3(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn$1(n,r),u=Reflect.set(n,r,o,isRef(n)?n:s);return n===toRaw(s)&&(c?hasChanged(o,l)&&trigger$2(n,"set",r,o):trigger$2(n,"add",r,o)),u}deleteProperty(n,r){const o=hasOwn$1(n,r);n[r];const s=Reflect.deleteProperty(n,r);return s&&o&&trigger$2(n,"delete",r,void 0),s}has(n,r){const o=Reflect.has(n,r);return(!isSymbol(r)||!builtInSymbols.has(r))&&track(n,"has",r),o}ownKeys(n){return track(n,"iterate",isArray$3(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=a=>a,getProto=a=>Reflect.getPrototypeOf(a);function createIterableMethod(a,n,r){return function(...o){const s=this.__v_raw,l=toRaw(s),c=isMap(l),u=a==="entries"||a===Symbol.iterator&&c,d=a==="keys"&&c,f=s[a](...o),v=r?toShallow:n?toReadonly:toReactive;return!n&&track(l,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:y}=f.next();return y?{value:g,done:y}:{value:u?[v(g[0]),v(g[1])]:v(g),done:y}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(a){return function(...n){return a==="delete"?!1:a==="clear"?void 0:this}}function createInstrumentations(a,n){const r={get(s){const l=this.__v_raw,c=toRaw(l),u=toRaw(s);a||(hasChanged(s,u)&&track(c,"get",s),track(c,"get",u));const{has:d}=getProto(c),f=n?toShallow:a?toReadonly:toReactive;if(d.call(c,s))return f(l.get(s));if(d.call(c,u))return f(l.get(u));l!==c&&l.get(s)},get size(){const s=this.__v_raw;return!a&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)},has(s){const l=this.__v_raw,c=toRaw(l),u=toRaw(s);return a||(hasChanged(s,u)&&track(c,"has",s),track(c,"has",u)),s===u?l.has(s):l.has(s)||l.has(u)},forEach(s,l){const c=this,u=c.__v_raw,d=toRaw(u),f=n?toShallow:a?toReadonly:toReactive;return!a&&track(d,"iterate",ITERATE_KEY),u.forEach((v,g)=>s.call(l,f(v),f(g),c))}};return extend$2(r,a?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!n&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this);return getProto(l).has.call(l,s)||(l.add(s),trigger$2(l,"add",s,s)),this},set(s,l){!n&&!isShallow(l)&&!isReadonly(l)&&(l=toRaw(l));const c=toRaw(this),{has:u,get:d}=getProto(c);let f=u.call(c,s);f||(s=toRaw(s),f=u.call(c,s));const v=d.call(c,s);return c.set(s,l),f?hasChanged(l,v)&&trigger$2(c,"set",s,l):trigger$2(c,"add",s,l),this},delete(s){const l=toRaw(this),{has:c,get:u}=getProto(l);let d=c.call(l,s);d||(s=toRaw(s),d=c.call(l,s)),u&&u.call(l,s);const f=l.delete(s);return d&&trigger$2(l,"delete",s,void 0),f},clear(){const s=toRaw(this),l=s.size!==0,c=s.clear();return l&&trigger$2(s,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=createIterableMethod(s,a,n)}),r}function createInstrumentationGetter(a,n){const r=createInstrumentations(a,n);return(o,s,l)=>s==="__v_isReactive"?!a:s==="__v_isReadonly"?a:s==="__v_raw"?o:Reflect.get(hasOwn$1(r,s)&&s in o?r:o,s,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(a){return a.__v_skip||!Object.isExtensible(a)?0:targetTypeMap(toRawType(a))}function reactive(a){return isReadonly(a)?a:createReactiveObject(a,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(a){return createReactiveObject(a,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(a){return createReactiveObject(a,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(a){return createReactiveObject(a,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(a,n,r,o,s){if(!isObject$5(a)||a.__v_raw&&!(n&&a.__v_isReactive))return a;const l=s.get(a);if(l)return l;const c=getTargetType(a);if(c===0)return a;const u=new Proxy(a,c===2?o:r);return s.set(a,u),u}function isReactive(a){return isReadonly(a)?isReactive(a.__v_raw):!!(a&&a.__v_isReactive)}function isReadonly(a){return!!(a&&a.__v_isReadonly)}function isShallow(a){return!!(a&&a.__v_isShallow)}function isProxy(a){return a?!!a.__v_raw:!1}function toRaw(a){const n=a&&a.__v_raw;return n?toRaw(n):a}function markRaw(a){return!hasOwn$1(a,"__v_skip")&&Object.isExtensible(a)&&def(a,"__v_skip",!0),a}const toReactive=a=>isObject$5(a)?reactive(a):a,toReadonly=a=>isObject$5(a)?readonly(a):a;function isRef(a){return a?a.__v_isRef===!0:!1}function ref(a){return createRef(a,!1)}function shallowRef(a){return createRef(a,!0)}function createRef(a,n){return isRef(a)?a:new RefImpl(a,n)}class RefImpl{constructor(n,r){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,o=this.__v_isShallow||isShallow(n)||isReadonly(n);n=o?n:toRaw(n),hasChanged(n,r)&&(this._rawValue=n,this._value=o?n:toReactive(n),this.dep.trigger())}}function unref(a){return isRef(a)?a.value:a}const shallowUnwrapHandlers={get:(a,n,r)=>n==="__v_raw"?a:unref(Reflect.get(a,n,r)),set:(a,n,r,o)=>{const s=a[n];return isRef(s)&&!isRef(r)?(s.value=r,!0):Reflect.set(a,n,r,o)}};function proxyRefs(a){return isReactive(a)?a:new Proxy(a,shallowUnwrapHandlers)}function toRefs(a){const n=isArray$3(a)?new Array(a.length):{};for(const r in a)n[r]=propertyToRef(a,r);return n}class ObjectRefImpl{constructor(n,r,o){this._object=n,this._key=r,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function propertyToRef(a,n,r){const o=a[n];return isRef(o)?o:new ObjectRefImpl(a,n,r)}class ComputedRefImpl{constructor(n,r,o){this.fn=n,this.setter=r,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const n=this.dep.track();return refreshComputed(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function computed$1(a,n,r=!1){let o,s;return isFunction$2(a)?o=a:(o=a.get,s=a.set),new ComputedRefImpl(o,s,r)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(a,n=!1,r=activeWatcher){if(r){let o=cleanupMap.get(r);o||cleanupMap.set(r,o=[]),o.push(a)}}function watch$1(a,n,r=EMPTY_OBJ$1){const{immediate:o,deep:s,once:l,scheduler:c,augmentJob:u,call:d}=r,f=D=>s?D:isShallow(D)||s===!1||s===0?traverse(D,1):traverse(D);let v,g,y,_,S=!1,x=!1;if(isRef(a)?(g=()=>a.value,S=isShallow(a)):isReactive(a)?(g=()=>f(a),S=!0):isArray$3(a)?(x=!0,S=a.some(D=>isReactive(D)||isShallow(D)),g=()=>a.map(D=>{if(isRef(D))return D.value;if(isReactive(D))return f(D);if(isFunction$2(D))return d?d(D,2):D()})):isFunction$2(a)?n?g=d?()=>d(a,2):a:g=()=>{if(y){pauseTracking();try{y()}finally{resetTracking()}}const D=activeWatcher;activeWatcher=v;try{return d?d(a,3,[_]):a(_)}finally{activeWatcher=D}}:g=NOOP,n&&s){const D=g,L=s===!0?1/0:s;g=()=>traverse(D(),L)}const T=getCurrentScope(),w=()=>{v.stop(),T&&T.active&&remove(T.effects,v)};if(l&&n){const D=n;n=(...L)=>{D(...L),w()}}let E=x?new Array(a.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=D=>{if(!(!(v.flags&1)||!v.dirty&&!D))if(n){const L=v.run();if(s||S||(x?L.some(($,O)=>hasChanged($,E[O])):hasChanged(L,E))){y&&y();const $=activeWatcher;activeWatcher=v;try{const O=[L,E===INITIAL_WATCHER_VALUE?void 0:x&&E[0]===INITIAL_WATCHER_VALUE?[]:E,_];d?d(n,3,O):n(...O),E=L}finally{activeWatcher=$}}}else v.run()};return u&&u(P),v=new ReactiveEffect(g),v.scheduler=c?()=>c(P,!1):P,_=D=>onWatcherCleanup(D,!1,v),y=v.onStop=()=>{const D=cleanupMap.get(v);if(D){if(d)d(D,4);else for(const L of D)L();cleanupMap.delete(v)}},n?o?P(!0):E=v.run():c?c(P.bind(null,!0),!0):v.run(),w.pause=v.pause.bind(v),w.resume=v.resume.bind(v),w.stop=w,w}function traverse(a,n=1/0,r){if(n<=0||!isObject$5(a)||a.__v_skip||(r=r||new Set,r.has(a)))return a;if(r.add(a),n--,isRef(a))traverse(a.value,n,r);else if(isArray$3(a))for(let o=0;o<a.length;o++)traverse(a[o],n,r);else if(isSet(a)||isMap(a))a.forEach(o=>{traverse(o,n,r)});else if(isPlainObject(a)){for(const o in a)traverse(a[o],n,r);for(const o of Object.getOwnPropertySymbols(a))Object.prototype.propertyIsEnumerable.call(a,o)&&traverse(a[o],n,r)}return a}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(a,...n){if(isWarning)return;isWarning=!0,pauseTracking();const r=stack.length?stack[stack.length-1].component:null,o=r&&r.appContext.config.warnHandler,s=getComponentTrace();if(o)callWithErrorHandling(o,r,11,[a+n.map(l=>{var c,u;return(u=(c=l.toString)==null?void 0:c.call(l))!=null?u:JSON.stringify(l)}).join(""),r&&r.proxy,s.map(({vnode:l})=>`at <${formatComponentName(r,l.type)}>`).join(`
`),s]);else{const l=[`[Vue warn]: ${a}`,...n];s.length&&l.push(`
`,...formatTrace(s)),console.warn(...l)}resetTracking(),isWarning=!1}function getComponentTrace(){let a=stack[stack.length-1];if(!a)return[];const n=[];for(;a;){const r=n[0];r&&r.vnode===a?r.recurseCount++:n.push({vnode:a,recurseCount:0});const o=a.component&&a.component.parent;a=o&&o.vnode}return n}function formatTrace(a){const n=[];return a.forEach((r,o)=>{n.push(...o===0?[]:[`
`],...formatTraceEntry(r))}),n}function formatTraceEntry({vnode:a,recurseCount:n}){const r=n>0?`... (${n} recursive calls)`:"",o=a.component?a.component.parent==null:!1,s=` at <${formatComponentName(a.component,a.type,o)}`,l=">"+r;return a.props?[s,...formatProps(a.props),l]:[s+l]}function formatProps(a){const n=[],r=Object.keys(a);return r.slice(0,3).forEach(o=>{n.push(...formatProp(o,a[o]))}),r.length>3&&n.push(" ..."),n}function formatProp(a,n,r){return isString$1(n)?(n=JSON.stringify(n),r?n:[`${a}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?r?n:[`${a}=${n}`]:isRef(n)?(n=formatProp(a,toRaw(n.value),!0),r?n:[`${a}=Ref<`,n,">"]):isFunction$2(n)?[`${a}=fn${n.name?`<${n.name}>`:""}`]:(n=toRaw(n),r?n:[`${a}=`,n])}function callWithErrorHandling(a,n,r,o){try{return o?a(...o):a()}catch(s){handleError(s,n,r)}}function callWithAsyncErrorHandling(a,n,r,o){if(isFunction$2(a)){const s=callWithErrorHandling(a,n,r,o);return s&&isPromise$1(s)&&s.catch(l=>{handleError(l,n,r)}),s}if(isArray$3(a)){const s=[];for(let l=0;l<a.length;l++)s.push(callWithAsyncErrorHandling(a[l],n,r,o));return s}}function handleError(a,n,r,o=!0){const s=n?n.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=n&&n.appContext.config||EMPTY_OBJ$1;if(n){let u=n.parent;const d=n.proxy,f=`https://vuejs.org/error-reference/#runtime-${r}`;for(;u;){const v=u.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](a,d,f)===!1)return}u=u.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[a,d,f]),resetTracking();return}}logError$1(a,r,s,o,c)}function logError$1(a,n,r,o=!0,s=!1){if(s)throw a;console.error(a)}const queue$1=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(a){const n=currentFlushPromise||resolvedPromise;return a?n.then(this?a.bind(this):a):n}function findInsertionIndex$1(a){let n=flushIndex+1,r=queue$1.length;for(;n<r;){const o=n+r>>>1,s=queue$1[o],l=getId$1(s);l<a||l===a&&s.flags&2?n=o+1:r=o}return n}function queueJob(a){if(!(a.flags&1)){const n=getId$1(a),r=queue$1[queue$1.length-1];!r||!(a.flags&2)&&n>=getId$1(r)?queue$1.push(a):queue$1.splice(findInsertionIndex$1(n),0,a),a.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(a){isArray$3(a)?pendingPostFlushCbs.push(...a):activePostFlushCbs&&a.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,a):a.flags&1||(pendingPostFlushCbs.push(a),a.flags|=1),queueFlush()}function flushPreFlushCbs(a,n,r=flushIndex+1){for(;r<queue$1.length;r++){const o=queue$1[r];if(o&&o.flags&2){if(a&&o.id!==a.uid)continue;queue$1.splice(r,1),r--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function flushPostFlushCbs(a){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)].sort((r,o)=>getId$1(r)-getId$1(o));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const r=activePostFlushCbs[postFlushIndex];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId$1=a=>a.id==null?a.flags&2?-1:1/0:a.id;function flushJobs(a){try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const n=queue$1[flushIndex];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;flushIndex<queue$1.length;flushIndex++){const n=queue$1[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue$1.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(a){const n=currentRenderingInstance;return currentRenderingInstance=a,currentScopeId=a&&a.type.__scopeId||null,n}function withCtx(a,n=currentRenderingInstance,r){if(!n||a._n)return a;const o=(...s)=>{o._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(n);let c;try{c=a(...s)}finally{setCurrentRenderingInstance(l),o._d&&setBlockTracking(1)}return c};return o._n=!0,o._c=!0,o._d=!0,o}function withDirectives(a,n){if(currentRenderingInstance===null)return a;const r=getComponentPublicInstance(currentRenderingInstance),o=a.dirs||(a.dirs=[]);for(let s=0;s<n.length;s++){let[l,c,u,d=EMPTY_OBJ$1]=n[s];l&&(isFunction$2(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(c),o.push({dir:l,instance:r,value:c,oldValue:void 0,arg:u,modifiers:d}))}return a}function invokeDirectiveHook(a,n,r,o){const s=a.dirs,l=n&&n.dirs;for(let c=0;c<s.length;c++){const u=s[c];l&&(u.oldValue=l[c].value);let d=u.dir[o];d&&(pauseTracking(),callWithAsyncErrorHandling(d,r,8,[a.el,u,a,n]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=a=>a.__isTeleport,isTeleportDisabled=a=>a&&(a.disabled||a.disabled===""),isTeleportDeferred=a=>a&&(a.defer||a.defer===""),isTargetSVG=a=>typeof SVGElement<"u"&&a instanceof SVGElement,isTargetMathML=a=>typeof MathMLElement=="function"&&a instanceof MathMLElement,resolveTarget=(a,n)=>{const r=a&&a.to;return isString$1(r)?n?n(r):null:r},TeleportImpl={name:"Teleport",__isTeleport:!0,process(a,n,r,o,s,l,c,u,d,f){const{mc:v,pc:g,pbc:y,o:{insert:_,querySelector:S,createText:x,createComment:T}}=f,w=isTeleportDisabled(n.props);let{shapeFlag:E,children:P,dynamicChildren:D}=n;if(a==null){const L=n.el=x(""),$=n.anchor=x("");_(L,r,o),_($,r,o);const O=(V,F)=>{E&16&&(s&&s.isCE&&(s.ce._teleportTarget=V),v(P,V,F,s,l,c,u,d))},B=()=>{const V=n.target=resolveTarget(n.props,S),F=prepareAnchor(V,n,x,_);V&&(c!=="svg"&&isTargetSVG(V)?c="svg":c!=="mathml"&&isTargetMathML(V)&&(c="mathml"),w||(O(V,F),updateCssVars(n,!1)))};w&&(O(r,$),updateCssVars(n,!0)),isTeleportDeferred(n.props)?queuePostRenderEffect(()=>{B(),n.el.__isMounted=!0},l):B()}else{if(isTeleportDeferred(n.props)&&!a.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(a,n,r,o,s,l,c,u,d,f),delete a.el.__isMounted},l);return}n.el=a.el,n.targetStart=a.targetStart;const L=n.anchor=a.anchor,$=n.target=a.target,O=n.targetAnchor=a.targetAnchor,B=isTeleportDisabled(a.props),V=B?r:$,F=B?L:O;if(c==="svg"||isTargetSVG($)?c="svg":(c==="mathml"||isTargetMathML($))&&(c="mathml"),D?(y(a.dynamicChildren,D,V,s,l,c,u),traverseStaticChildren(a,n,!0)):d||g(a,n,V,F,s,l,c,u,!1),w)B?n.props&&a.props&&n.props.to!==a.props.to&&(n.props.to=a.props.to):moveTeleport(n,r,L,f,1);else if((n.props&&n.props.to)!==(a.props&&a.props.to)){const U=n.target=resolveTarget(n.props,S);U&&moveTeleport(n,U,null,f,0)}else B&&moveTeleport(n,$,O,f,1);updateCssVars(n,w)}},remove(a,n,r,{um:o,o:{remove:s}},l){const{shapeFlag:c,children:u,anchor:d,targetStart:f,targetAnchor:v,target:g,props:y}=a;if(g&&(s(f),s(v)),l&&s(d),c&16){const _=l||!isTeleportDisabled(y);for(let S=0;S<u.length;S++){const x=u[S];o(x,n,r,_,!!x.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(a,n,r,{o:{insert:o},m:s},l=2){l===0&&o(a.targetAnchor,n,r);const{el:c,anchor:u,shapeFlag:d,children:f,props:v}=a,g=l===2;if(g&&o(c,n,r),(!g||isTeleportDisabled(v))&&d&16)for(let y=0;y<f.length;y++)s(f[y],n,r,2);g&&o(u,n,r)}function hydrateTeleport(a,n,r,o,s,l,{o:{nextSibling:c,parentNode:u,querySelector:d,insert:f,createText:v}},g){const y=n.target=resolveTarget(n.props,d);if(y){const _=isTeleportDisabled(n.props),S=y._lpa||y.firstChild;if(n.shapeFlag&16)if(_)n.anchor=g(c(a),n,u(a),r,o,s,l),n.targetStart=S,n.targetAnchor=S&&c(S);else{n.anchor=c(a);let x=S;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")n.targetStart=x;else if(x.data==="teleport anchor"){n.targetAnchor=x,y._lpa=n.targetAnchor&&c(n.targetAnchor);break}}x=c(x)}n.targetAnchor||prepareAnchor(y,n,v,f),g(S&&c(S),n,y,r,o,s,l)}updateCssVars(n,_)}return n.anchor&&c(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(a,n){const r=a.ctx;if(r&&r.ut){let o,s;for(n?(o=a.el,s=a.anchor):(o=a.targetStart,s=a.targetAnchor);o&&o!==s;)o.nodeType===1&&o.setAttribute("data-v-owner",r.uid),o=o.nextSibling;r.ut()}}function prepareAnchor(a,n,r,o){const s=n.targetStart=r(""),l=n.targetAnchor=r("");return s[TeleportEndKey]=l,a&&(o(s,a),o(l,a)),l}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const a={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{a.isMounted=!0}),onBeforeUnmount(()=>{a.isUnmounting=!0}),a}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=a=>{const n=a.subTree;return n.component?recursiveGetSubtree(n.component):n},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(a,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();return()=>{const s=n.default&&getTransitionRawChildren(n.default(),!0);if(!s||!s.length)return;const l=findNonCommentChild(s),c=toRaw(a),{mode:u}=c;if(o.isLeaving)return emptyPlaceholder(l);const d=getInnerChild$1(l);if(!d)return emptyPlaceholder(l);let f=resolveTransitionHooks(d,c,o,r,g=>f=g);d.type!==Comment&&setTransitionHooks(d,f);let v=r.subTree&&getInnerChild$1(r.subTree);if(v&&v.type!==Comment&&!isSameVNodeType(d,v)&&recursiveGetSubtree(r).type!==Comment){let g=resolveTransitionHooks(v,c,o,r);if(setTransitionHooks(v,g),u==="out-in"&&d.type!==Comment)return o.isLeaving=!0,g.afterLeave=()=>{o.isLeaving=!1,r.job.flags&8||r.update(),delete g.afterLeave,v=void 0},emptyPlaceholder(l);u==="in-out"&&d.type!==Comment?g.delayLeave=(y,_,S)=>{const x=getLeavingNodesForType(o,v);x[String(v.key)]=v,y[leaveCbKey]=()=>{_(),y[leaveCbKey]=void 0,delete f.delayedLeave,v=void 0},f.delayedLeave=()=>{S(),delete f.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return l}}};function findNonCommentChild(a){let n=a[0];if(a.length>1){for(const r of a)if(r.type!==Comment){n=r;break}}return n}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(a,n){const{leavingVNodes:r}=a;let o=r.get(n.type);return o||(o=Object.create(null),r.set(n.type,o)),o}function resolveTransitionHooks(a,n,r,o,s){const{appear:l,mode:c,persisted:u=!1,onBeforeEnter:d,onEnter:f,onAfterEnter:v,onEnterCancelled:g,onBeforeLeave:y,onLeave:_,onAfterLeave:S,onLeaveCancelled:x,onBeforeAppear:T,onAppear:w,onAfterAppear:E,onAppearCancelled:P}=n,D=String(a.key),L=getLeavingNodesForType(r,a),$=(V,F)=>{V&&callWithAsyncErrorHandling(V,o,9,F)},O=(V,F)=>{const U=F[1];$(V,F),isArray$3(V)?V.every(G=>G.length<=1)&&U():V.length<=1&&U()},B={mode:c,persisted:u,beforeEnter(V){let F=d;if(!r.isMounted)if(l)F=T||d;else return;V[leaveCbKey]&&V[leaveCbKey](!0);const U=L[D];U&&isSameVNodeType(a,U)&&U.el[leaveCbKey]&&U.el[leaveCbKey](),$(F,[V])},enter(V){let F=f,U=v,G=g;if(!r.isMounted)if(l)F=w||f,U=E||v,G=P||g;else return;let W=!1;const j=V[enterCbKey]=K=>{W||(W=!0,K?$(G,[V]):$(U,[V]),B.delayedLeave&&B.delayedLeave(),V[enterCbKey]=void 0)};F?O(F,[V,j]):j()},leave(V,F){const U=String(a.key);if(V[enterCbKey]&&V[enterCbKey](!0),r.isUnmounting)return F();$(y,[V]);let G=!1;const W=V[leaveCbKey]=j=>{G||(G=!0,F(),j?$(x,[V]):$(S,[V]),V[leaveCbKey]=void 0,L[U]===a&&delete L[U])};L[U]=a,_?O(_,[V,W]):W()},clone(V){const F=resolveTransitionHooks(V,n,r,o,s);return s&&s(F),F}};return B}function emptyPlaceholder(a){if(isKeepAlive(a))return a=cloneVNode(a),a.children=null,a}function getInnerChild$1(a){if(!isKeepAlive(a))return isTeleport(a.type)&&a.children?findNonCommentChild(a.children):a;const{shapeFlag:n,children:r}=a;if(r){if(n&16)return r[0];if(n&32&&isFunction$2(r.default))return r.default()}}function setTransitionHooks(a,n){a.shapeFlag&6&&a.component?(a.transition=n,setTransitionHooks(a.component.subTree,n)):a.shapeFlag&128?(a.ssContent.transition=n.clone(a.ssContent),a.ssFallback.transition=n.clone(a.ssFallback)):a.transition=n}function getTransitionRawChildren(a,n=!1,r){let o=[],s=0;for(let l=0;l<a.length;l++){let c=a[l];const u=r==null?c.key:String(r)+String(c.key!=null?c.key:l);c.type===Fragment?(c.patchFlag&128&&s++,o=o.concat(getTransitionRawChildren(c.children,n,u))):(n||c.type!==Comment)&&o.push(u!=null?cloneVNode(c,{key:u}):c)}if(s>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(a,n){return isFunction$2(a)?extend$2({name:a.name},n,{setup:a}):a}function markAsyncBoundary(a){a.ids=[a.ids[0]+a.ids[2]+++"-",0,0]}function setRef(a,n,r,o,s=!1){if(isArray$3(a)){a.forEach((S,x)=>setRef(S,n&&(isArray$3(n)?n[x]:n),r,o,s));return}if(isAsyncWrapper(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&setRef(a,n,r,o.component.subTree);return}const l=o.shapeFlag&4?getComponentPublicInstance(o.component):o.el,c=s?null:l,{i:u,r:d}=a,f=n&&n.r,v=u.refs===EMPTY_OBJ$1?u.refs={}:u.refs,g=u.setupState,y=toRaw(g),_=g===EMPTY_OBJ$1?()=>!1:S=>hasOwn$1(y,S);if(f!=null&&f!==d&&(isString$1(f)?(v[f]=null,_(f)&&(g[f]=null)):isRef(f)&&(f.value=null)),isFunction$2(d))callWithErrorHandling(d,u,12,[c,v]);else{const S=isString$1(d),x=isRef(d);if(S||x){const T=()=>{if(a.f){const w=S?_(d)?g[d]:v[d]:d.value;s?isArray$3(w)&&remove(w,l):isArray$3(w)?w.includes(l)||w.push(l):S?(v[d]=[l],_(d)&&(g[d]=v[d])):(d.value=[l],a.k&&(v[a.k]=d.value))}else S?(v[d]=c,_(d)&&(g[d]=c)):x&&(d.value=c,a.k&&(v[a.k]=c))};c?(T.id=-1,queuePostRenderEffect(T,r)):T()}}}getGlobalThis$1().requestIdleCallback;getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=a=>!!a.type.__asyncLoader,isKeepAlive=a=>a.type.__isKeepAlive;function onActivated(a,n){registerKeepAliveHook(a,"a",n)}function onDeactivated(a,n){registerKeepAliveHook(a,"da",n)}function registerKeepAliveHook(a,n,r=currentInstance){const o=a.__wdc||(a.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return a()});if(injectHook(n,o,r),r){let s=r.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(o,n,r,s),s=s.parent}}function injectToKeepAliveRoot(a,n,r,o){const s=injectHook(n,a,o,!0);onUnmounted(()=>{remove(o[n],s)},r)}function injectHook(a,n,r=currentInstance,o=!1){if(r){const s=r[a]||(r[a]=[]),l=n.__weh||(n.__weh=(...c)=>{pauseTracking();const u=setCurrentInstance(r),d=callWithAsyncErrorHandling(n,r,a,c);return u(),resetTracking(),d});return o?s.unshift(l):s.push(l),l}}const createHook=a=>(n,r=currentInstance)=>{(!isInSSRComponentSetup||a==="sp")&&injectHook(a,(...o)=>n(...o),r)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(a,n=currentInstance){injectHook("ec",a,n)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(a,n){return resolveAsset(COMPONENTS,a,!0,n)||a}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(a){return isString$1(a)?resolveAsset(COMPONENTS,a,!1)||a:a||NULL_DYNAMIC_COMPONENT}function resolveDirective(a){return resolveAsset(DIRECTIVES,a)}function resolveAsset(a,n,r=!0,o=!1){const s=currentRenderingInstance||currentInstance;if(s){const l=s.type;if(a===COMPONENTS){const u=getComponentName(l,!1);if(u&&(u===n||u===camelize$1(n)||u===capitalize(camelize$1(n))))return l}const c=resolve(s[a]||l[a],n)||resolve(s.appContext[a],n);return!c&&o?l:c}}function resolve(a,n){return a&&(a[n]||a[camelize$1(n)]||a[capitalize(camelize$1(n))])}function renderList(a,n,r,o){let s;const l=r,c=isArray$3(a);if(c||isString$1(a)){const u=c&&isReactive(a);let d=!1;u&&(d=!isShallow(a),a=shallowReadArray(a)),s=new Array(a.length);for(let f=0,v=a.length;f<v;f++)s[f]=n(d?toReactive(a[f]):a[f],f,void 0,l)}else if(typeof a=="number"){s=new Array(a);for(let u=0;u<a;u++)s[u]=n(u+1,u,void 0,l)}else if(isObject$5(a))if(a[Symbol.iterator])s=Array.from(a,(u,d)=>n(u,d,void 0,l));else{const u=Object.keys(a);s=new Array(u.length);for(let d=0,f=u.length;d<f;d++){const v=u[d];s[d]=n(a[v],v,d,l)}}else s=[];return s}const getPublicInstance=a=>a?isStatefulComponent(a)?getComponentPublicInstance(a):getPublicInstance(a.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>getPublicInstance(a.parent),$root:a=>getPublicInstance(a.root),$host:a=>a.ce,$emit:a=>a.emit,$options:a=>resolveMergedOptions(a),$forceUpdate:a=>a.f||(a.f=()=>{queueJob(a.update)}),$nextTick:a=>a.n||(a.n=nextTick.bind(a.proxy)),$watch:a=>instanceWatch.bind(a)}),hasSetupBinding=(a,n)=>a!==EMPTY_OBJ$1&&!a.__isScriptSetup&&hasOwn$1(a,n),PublicInstanceProxyHandlers={get({_:a},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:o,data:s,props:l,accessCache:c,type:u,appContext:d}=a;let f;if(n[0]!=="$"){const _=c[n];if(_!==void 0)switch(_){case 1:return o[n];case 2:return s[n];case 4:return r[n];case 3:return l[n]}else{if(hasSetupBinding(o,n))return c[n]=1,o[n];if(s!==EMPTY_OBJ$1&&hasOwn$1(s,n))return c[n]=2,s[n];if((f=a.propsOptions[0])&&hasOwn$1(f,n))return c[n]=3,l[n];if(r!==EMPTY_OBJ$1&&hasOwn$1(r,n))return c[n]=4,r[n];shouldCacheAccess&&(c[n]=0)}}const v=publicPropertiesMap[n];let g,y;if(v)return n==="$attrs"&&track(a.attrs,"get",""),v(a);if((g=u.__cssModules)&&(g=g[n]))return g;if(r!==EMPTY_OBJ$1&&hasOwn$1(r,n))return c[n]=4,r[n];if(y=d.config.globalProperties,hasOwn$1(y,n))return y[n]},set({_:a},n,r){const{data:o,setupState:s,ctx:l}=a;return hasSetupBinding(s,n)?(s[n]=r,!0):o!==EMPTY_OBJ$1&&hasOwn$1(o,n)?(o[n]=r,!0):hasOwn$1(a.props,n)||n[0]==="$"&&n.slice(1)in a?!1:(l[n]=r,!0)},has({_:{data:a,setupState:n,accessCache:r,ctx:o,appContext:s,propsOptions:l}},c){let u;return!!r[c]||a!==EMPTY_OBJ$1&&hasOwn$1(a,c)||hasSetupBinding(n,c)||(u=l[0])&&hasOwn$1(u,c)||hasOwn$1(o,c)||hasOwn$1(publicPropertiesMap,c)||hasOwn$1(s.config.globalProperties,c)},defineProperty(a,n,r){return r.get!=null?a._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(a,n,r.value,null),Reflect.defineProperty(a,n,r)}};function normalizePropsOrEmits(a){return isArray$3(a)?a.reduce((n,r)=>(n[r]=null,n),{}):a}let shouldCacheAccess=!0;function applyOptions(a){const n=resolveMergedOptions(a),r=a.proxy,o=a.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,a,"bc");const{data:s,computed:l,methods:c,watch:u,provide:d,inject:f,created:v,beforeMount:g,mounted:y,beforeUpdate:_,updated:S,activated:x,deactivated:T,beforeDestroy:w,beforeUnmount:E,destroyed:P,unmounted:D,render:L,renderTracked:$,renderTriggered:O,errorCaptured:B,serverPrefetch:V,expose:F,inheritAttrs:U,components:G,directives:W,filters:j}=n;if(f&&resolveInjections(f,o,null),c)for(const ie in c){const ee=c[ie];isFunction$2(ee)&&(o[ie]=ee.bind(r))}if(s){const ie=s.call(r,r);isObject$5(ie)&&(a.data=reactive(ie))}if(shouldCacheAccess=!0,l)for(const ie in l){const ee=l[ie],he=isFunction$2(ee)?ee.bind(r,r):isFunction$2(ee.get)?ee.get.bind(r,r):NOOP,pe=!isFunction$2(ee)&&isFunction$2(ee.set)?ee.set.bind(r):NOOP,ce=computed({get:he,set:pe});Object.defineProperty(o,ie,{enumerable:!0,configurable:!0,get:()=>ce.value,set:ye=>ce.value=ye})}if(u)for(const ie in u)createWatcher(u[ie],o,r,ie);if(d){const ie=isFunction$2(d)?d.call(r):d;Reflect.ownKeys(ie).forEach(ee=>{provide(ee,ie[ee])})}v&&callHook$1(v,a,"c");function q(ie,ee){isArray$3(ee)?ee.forEach(he=>ie(he.bind(r))):ee&&ie(ee.bind(r))}if(q(onBeforeMount,g),q(onMounted,y),q(onBeforeUpdate,_),q(onUpdated,S),q(onActivated,x),q(onDeactivated,T),q(onErrorCaptured,B),q(onRenderTracked,$),q(onRenderTriggered,O),q(onBeforeUnmount,E),q(onUnmounted,D),q(onServerPrefetch,V),isArray$3(F))if(F.length){const ie=a.exposed||(a.exposed={});F.forEach(ee=>{Object.defineProperty(ie,ee,{get:()=>r[ee],set:he=>r[ee]=he})})}else a.exposed||(a.exposed={});L&&a.render===NOOP&&(a.render=L),U!=null&&(a.inheritAttrs=U),G&&(a.components=G),W&&(a.directives=W),V&&markAsyncBoundary(a)}function resolveInjections(a,n,r=NOOP){isArray$3(a)&&(a=normalizeInject(a));for(const o in a){const s=a[o];let l;isObject$5(s)?"default"in s?l=inject(s.from||o,s.default,!0):l=inject(s.from||o):l=inject(s),isRef(l)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):n[o]=l}}function callHook$1(a,n,r){callWithAsyncErrorHandling(isArray$3(a)?a.map(o=>o.bind(n.proxy)):a.bind(n.proxy),n,r)}function createWatcher(a,n,r,o){let s=o.includes(".")?createPathGetter(r,o):()=>r[o];if(isString$1(a)){const l=n[a];isFunction$2(l)&&watch(s,l)}else if(isFunction$2(a))watch(s,a.bind(r));else if(isObject$5(a))if(isArray$3(a))a.forEach(l=>createWatcher(l,n,r,o));else{const l=isFunction$2(a.handler)?a.handler.bind(r):n[a.handler];isFunction$2(l)&&watch(s,l,a)}}function resolveMergedOptions(a){const n=a.type,{mixins:r,extends:o}=n,{mixins:s,optionsCache:l,config:{optionMergeStrategies:c}}=a.appContext,u=l.get(n);let d;return u?d=u:!s.length&&!r&&!o?d=n:(d={},s.length&&s.forEach(f=>mergeOptions$1(d,f,c,!0)),mergeOptions$1(d,n,c)),isObject$5(n)&&l.set(n,d),d}function mergeOptions$1(a,n,r,o=!1){const{mixins:s,extends:l}=n;l&&mergeOptions$1(a,l,r,!0),s&&s.forEach(c=>mergeOptions$1(a,c,r,!0));for(const c in n)if(!(o&&c==="expose")){const u=internalOptionMergeStrats[c]||r&&r[c];a[c]=u?u(a[c],n[c]):n[c]}return a}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(a,n){return n?a?function(){return extend$2(isFunction$2(a)?a.call(this,this):a,isFunction$2(n)?n.call(this,this):n)}:n:a}function mergeInject(a,n){return mergeObjectOptions(normalizeInject(a),normalizeInject(n))}function normalizeInject(a){if(isArray$3(a)){const n={};for(let r=0;r<a.length;r++)n[a[r]]=a[r];return n}return a}function mergeAsArray(a,n){return a?[...new Set([].concat(a,n))]:n}function mergeObjectOptions(a,n){return a?extend$2(Object.create(null),a,n):n}function mergeEmitsOrPropsOptions(a,n){return a?isArray$3(a)&&isArray$3(n)?[...new Set([...a,...n])]:extend$2(Object.create(null),normalizePropsOrEmits(a),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(a,n){if(!a)return n;if(!n)return a;const r=extend$2(Object.create(null),a);for(const o in n)r[o]=mergeAsArray(a[o],n[o]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(a,n){return function(o,s=null){isFunction$2(o)||(o=extend$2({},o)),s!=null&&!isObject$5(s)&&(s=null);const l=createAppContext(),c=new WeakSet,u=[];let d=!1;const f=l.app={_uid:uid$1++,_component:o,_props:s,_container:null,_context:l,_instance:null,version:version$1,get config(){return l.config},set config(v){},use(v,...g){return c.has(v)||(v&&isFunction$2(v.install)?(c.add(v),v.install(f,...g)):isFunction$2(v)&&(c.add(v),v(f,...g))),f},mixin(v){return l.mixins.includes(v)||l.mixins.push(v),f},component(v,g){return g?(l.components[v]=g,f):l.components[v]},directive(v,g){return g?(l.directives[v]=g,f):l.directives[v]},mount(v,g,y){if(!d){const _=f._ceVNode||createVNode$1(o,s);return _.appContext=l,y===!0?y="svg":y===!1&&(y=void 0),g&&n?n(_,v):a(_,v,y),d=!0,f._container=v,v.__vue_app__=f,getComponentPublicInstance(_.component)}},onUnmount(v){u.push(v)},unmount(){d&&(callWithAsyncErrorHandling(u,f._instance,16),a(null,f._container),delete f._container.__vue_app__)},provide(v,g){return l.provides[v]=g,f},runWithContext(v){const g=currentApp;currentApp=f;try{return v()}finally{currentApp=g}}};return f}}let currentApp=null;function provide(a,n){if(currentInstance){let r=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===r&&(r=currentInstance.provides=Object.create(o)),r[a]=n}}function inject(a,n,r=!1){const o=currentInstance||currentRenderingInstance;if(o||currentApp){const s=currentApp?currentApp._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&a in s)return s[a];if(arguments.length>1)return r&&isFunction$2(n)?n.call(o&&o.proxy):n}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=a=>Object.getPrototypeOf(a)===internalObjectProto;function initProps$1(a,n,r,o=!1){const s={},l=createInternalObject();a.propsDefaults=Object.create(null),setFullProps(a,n,s,l);for(const c in a.propsOptions[0])c in s||(s[c]=void 0);r?a.props=o?s:shallowReactive(s):a.type.props?a.props=s:a.props=l,a.attrs=l}function updateProps$2(a,n,r,o){const{props:s,attrs:l,vnode:{patchFlag:c}}=a,u=toRaw(s),[d]=a.propsOptions;let f=!1;if((o||c>0)&&!(c&16)){if(c&8){const v=a.vnode.dynamicProps;for(let g=0;g<v.length;g++){let y=v[g];if(isEmitListener(a.emitsOptions,y))continue;const _=n[y];if(d)if(hasOwn$1(l,y))_!==l[y]&&(l[y]=_,f=!0);else{const S=camelize$1(y);s[S]=resolvePropValue(d,u,S,_,a,!1)}else _!==l[y]&&(l[y]=_,f=!0)}}}else{setFullProps(a,n,s,l)&&(f=!0);let v;for(const g in u)(!n||!hasOwn$1(n,g)&&((v=hyphenate(g))===g||!hasOwn$1(n,v)))&&(d?r&&(r[g]!==void 0||r[v]!==void 0)&&(s[g]=resolvePropValue(d,u,g,void 0,a,!0)):delete s[g]);if(l!==u)for(const g in l)(!n||!hasOwn$1(n,g))&&(delete l[g],f=!0)}f&&trigger$2(a.attrs,"set","")}function setFullProps(a,n,r,o){const[s,l]=a.propsOptions;let c=!1,u;if(n)for(let d in n){if(isReservedProp(d))continue;const f=n[d];let v;s&&hasOwn$1(s,v=camelize$1(d))?!l||!l.includes(v)?r[v]=f:(u||(u={}))[v]=f:isEmitListener(a.emitsOptions,d)||(!(d in o)||f!==o[d])&&(o[d]=f,c=!0)}if(l){const d=toRaw(r),f=u||EMPTY_OBJ$1;for(let v=0;v<l.length;v++){const g=l[v];r[g]=resolvePropValue(s,d,g,f[g],a,!hasOwn$1(f,g))}}return c}function resolvePropValue(a,n,r,o,s,l){const c=a[r];if(c!=null){const u=hasOwn$1(c,"default");if(u&&o===void 0){const d=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction$2(d)){const{propsDefaults:f}=s;if(r in f)o=f[r];else{const v=setCurrentInstance(s);o=f[r]=d.call(null,n),v()}}else o=d;s.ce&&s.ce._setProp(r,o)}c[0]&&(l&&!u?o=!1:c[1]&&(o===""||o===hyphenate(r))&&(o=!0))}return o}const mixinPropsCache=new WeakMap;function normalizePropsOptions(a,n,r=!1){const o=r?mixinPropsCache:n.propsCache,s=o.get(a);if(s)return s;const l=a.props,c={},u=[];let d=!1;if(!isFunction$2(a)){const v=g=>{d=!0;const[y,_]=normalizePropsOptions(g,n,!0);extend$2(c,y),_&&u.push(..._)};!r&&n.mixins.length&&n.mixins.forEach(v),a.extends&&v(a.extends),a.mixins&&a.mixins.forEach(v)}if(!l&&!d)return isObject$5(a)&&o.set(a,EMPTY_ARR),EMPTY_ARR;if(isArray$3(l))for(let v=0;v<l.length;v++){const g=camelize$1(l[v]);validatePropName(g)&&(c[g]=EMPTY_OBJ$1)}else if(l)for(const v in l){const g=camelize$1(v);if(validatePropName(g)){const y=l[v],_=c[g]=isArray$3(y)||isFunction$2(y)?{type:y}:extend$2({},y),S=_.type;let x=!1,T=!0;if(isArray$3(S))for(let w=0;w<S.length;++w){const E=S[w],P=isFunction$2(E)&&E.name;if(P==="Boolean"){x=!0;break}else P==="String"&&(T=!1)}else x=isFunction$2(S)&&S.name==="Boolean";_[0]=x,_[1]=T,(x||hasOwn$1(_,"default"))&&u.push(g)}}const f=[c,u];return isObject$5(a)&&o.set(a,f),f}function validatePropName(a){return a[0]!=="$"&&!isReservedProp(a)}const isInternalKey=a=>a[0]==="_"||a==="$stable",normalizeSlotValue=a=>isArray$3(a)?a.map(normalizeVNode):[normalizeVNode(a)],normalizeSlot$1=(a,n,r)=>{if(n._n)return n;const o=withCtx((...s)=>normalizeSlotValue(n(...s)),r);return o._c=!1,o},normalizeObjectSlots=(a,n,r)=>{const o=a._ctx;for(const s in a){if(isInternalKey(s))continue;const l=a[s];if(isFunction$2(l))n[s]=normalizeSlot$1(s,l,o);else if(l!=null){const c=normalizeSlotValue(l);n[s]=()=>c}}},normalizeVNodeSlots=(a,n)=>{const r=normalizeSlotValue(n);a.slots.default=()=>r},assignSlots=(a,n,r)=>{for(const o in n)(r||o!=="_")&&(a[o]=n[o])},initSlots=(a,n,r)=>{const o=a.slots=createInternalObject();if(a.vnode.shapeFlag&32){const s=n._;s?(assignSlots(o,n,r),r&&def(o,"_",s,!0)):normalizeObjectSlots(n,o)}else n&&normalizeVNodeSlots(a,n)},updateSlots=(a,n,r)=>{const{vnode:o,slots:s}=a;let l=!0,c=EMPTY_OBJ$1;if(o.shapeFlag&32){const u=n._;u?r&&u===1?l=!1:assignSlots(s,n,r):(l=!n.$stable,normalizeObjectSlots(n,s)),c=n}else n&&(normalizeVNodeSlots(a,n),c={default:1});if(l)for(const u in s)!isInternalKey(u)&&c[u]==null&&delete s[u]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(a){return baseCreateRenderer(a)}function baseCreateRenderer(a,n){const r=getGlobalThis$1();r.__VUE__=!0;const{insert:o,remove:s,patchProp:l,createElement:c,createText:u,createComment:d,setText:f,setElementText:v,parentNode:g,nextSibling:y,setScopeId:_=NOOP,insertStaticContent:S}=a,x=(se,J,xe,De=null,Ae=null,Ie=null,ze=void 0,Fe=null,ae=!!J.dynamicChildren)=>{if(se===J)return;se&&!isSameVNodeType(se,J)&&(De=oe(se),ye(se,Ae,Ie,!0),se=null),J.patchFlag===-2&&(ae=!1,J.dynamicChildren=null);const{type:Q,ref:be,shapeFlag:Ee}=J;switch(Q){case Text:T(se,J,xe,De);break;case Comment:w(se,J,xe,De);break;case Static:se==null&&E(J,xe,De,ze);break;case Fragment:G(se,J,xe,De,Ae,Ie,ze,Fe,ae);break;default:Ee&1?L(se,J,xe,De,Ae,Ie,ze,Fe,ae):Ee&6?W(se,J,xe,De,Ae,Ie,ze,Fe,ae):(Ee&64||Ee&128)&&Q.process(se,J,xe,De,Ae,Ie,ze,Fe,ae,Te)}be!=null&&Ae&&setRef(be,se&&se.ref,Ie,J||se,!J)},T=(se,J,xe,De)=>{if(se==null)o(J.el=u(J.children),xe,De);else{const Ae=J.el=se.el;J.children!==se.children&&f(Ae,J.children)}},w=(se,J,xe,De)=>{se==null?o(J.el=d(J.children||""),xe,De):J.el=se.el},E=(se,J,xe,De)=>{[se.el,se.anchor]=S(se.children,J,xe,De,se.el,se.anchor)},P=({el:se,anchor:J},xe,De)=>{let Ae;for(;se&&se!==J;)Ae=y(se),o(se,xe,De),se=Ae;o(J,xe,De)},D=({el:se,anchor:J})=>{let xe;for(;se&&se!==J;)xe=y(se),s(se),se=xe;s(J)},L=(se,J,xe,De,Ae,Ie,ze,Fe,ae)=>{J.type==="svg"?ze="svg":J.type==="math"&&(ze="mathml"),se==null?$(J,xe,De,Ae,Ie,ze,Fe,ae):V(se,J,Ae,Ie,ze,Fe,ae)},$=(se,J,xe,De,Ae,Ie,ze,Fe)=>{let ae,Q;const{props:be,shapeFlag:Ee,transition:ke,dirs:Ne}=se;if(ae=se.el=c(se.type,Ie,be&&be.is,be),Ee&8?v(ae,se.children):Ee&16&&B(se.children,ae,null,De,Ae,resolveChildrenNamespace(se,Ie),ze,Fe),Ne&&invokeDirectiveHook(se,null,De,"created"),O(ae,se,se.scopeId,ze,De),be){for(const qe in be)qe!=="value"&&!isReservedProp(qe)&&l(ae,qe,null,be[qe],Ie,De);"value"in be&&l(ae,"value",null,be.value,Ie),(Q=be.onVnodeBeforeMount)&&invokeVNodeHook(Q,De,se)}Ne&&invokeDirectiveHook(se,null,De,"beforeMount");const Je=needTransition(Ae,ke);Je&&ke.beforeEnter(ae),o(ae,J,xe),((Q=be&&be.onVnodeMounted)||Je||Ne)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,De,se),Je&&ke.enter(ae),Ne&&invokeDirectiveHook(se,null,De,"mounted")},Ae)},O=(se,J,xe,De,Ae)=>{if(xe&&_(se,xe),De)for(let Ie=0;Ie<De.length;Ie++)_(se,De[Ie]);if(Ae){let Ie=Ae.subTree;if(J===Ie||isSuspense(Ie.type)&&(Ie.ssContent===J||Ie.ssFallback===J)){const ze=Ae.vnode;O(se,ze,ze.scopeId,ze.slotScopeIds,Ae.parent)}}},B=(se,J,xe,De,Ae,Ie,ze,Fe,ae=0)=>{for(let Q=ae;Q<se.length;Q++){const be=se[Q]=Fe?cloneIfMounted(se[Q]):normalizeVNode(se[Q]);x(null,be,J,xe,De,Ae,Ie,ze,Fe)}},V=(se,J,xe,De,Ae,Ie,ze)=>{const Fe=J.el=se.el;let{patchFlag:ae,dynamicChildren:Q,dirs:be}=J;ae|=se.patchFlag&16;const Ee=se.props||EMPTY_OBJ$1,ke=J.props||EMPTY_OBJ$1;let Ne;if(xe&&toggleRecurse(xe,!1),(Ne=ke.onVnodeBeforeUpdate)&&invokeVNodeHook(Ne,xe,J,se),be&&invokeDirectiveHook(J,se,xe,"beforeUpdate"),xe&&toggleRecurse(xe,!0),(Ee.innerHTML&&ke.innerHTML==null||Ee.textContent&&ke.textContent==null)&&v(Fe,""),Q?F(se.dynamicChildren,Q,Fe,xe,De,resolveChildrenNamespace(J,Ae),Ie):ze||ee(se,J,Fe,null,xe,De,resolveChildrenNamespace(J,Ae),Ie,!1),ae>0){if(ae&16)U(Fe,Ee,ke,xe,Ae);else if(ae&2&&Ee.class!==ke.class&&l(Fe,"class",null,ke.class,Ae),ae&4&&l(Fe,"style",Ee.style,ke.style,Ae),ae&8){const Je=J.dynamicProps;for(let qe=0;qe<Je.length;qe++){const Ze=Je[qe],Pt=Ee[Ze],je=ke[Ze];(je!==Pt||Ze==="value")&&l(Fe,Ze,Pt,je,Ae,xe)}}ae&1&&se.children!==J.children&&v(Fe,J.children)}else!ze&&Q==null&&U(Fe,Ee,ke,xe,Ae);((Ne=ke.onVnodeUpdated)||be)&&queuePostRenderEffect(()=>{Ne&&invokeVNodeHook(Ne,xe,J,se),be&&invokeDirectiveHook(J,se,xe,"updated")},De)},F=(se,J,xe,De,Ae,Ie,ze)=>{for(let Fe=0;Fe<J.length;Fe++){const ae=se[Fe],Q=J[Fe],be=ae.el&&(ae.type===Fragment||!isSameVNodeType(ae,Q)||ae.shapeFlag&70)?g(ae.el):xe;x(ae,Q,be,null,De,Ae,Ie,ze,!0)}},U=(se,J,xe,De,Ae)=>{if(J!==xe){if(J!==EMPTY_OBJ$1)for(const Ie in J)!isReservedProp(Ie)&&!(Ie in xe)&&l(se,Ie,J[Ie],null,Ae,De);for(const Ie in xe){if(isReservedProp(Ie))continue;const ze=xe[Ie],Fe=J[Ie];ze!==Fe&&Ie!=="value"&&l(se,Ie,Fe,ze,Ae,De)}"value"in xe&&l(se,"value",J.value,xe.value,Ae)}},G=(se,J,xe,De,Ae,Ie,ze,Fe,ae)=>{const Q=J.el=se?se.el:u(""),be=J.anchor=se?se.anchor:u("");let{patchFlag:Ee,dynamicChildren:ke,slotScopeIds:Ne}=J;Ne&&(Fe=Fe?Fe.concat(Ne):Ne),se==null?(o(Q,xe,De),o(be,xe,De),B(J.children||[],xe,be,Ae,Ie,ze,Fe,ae)):Ee>0&&Ee&64&&ke&&se.dynamicChildren?(F(se.dynamicChildren,ke,xe,Ae,Ie,ze,Fe),(J.key!=null||Ae&&J===Ae.subTree)&&traverseStaticChildren(se,J,!0)):ee(se,J,xe,be,Ae,Ie,ze,Fe,ae)},W=(se,J,xe,De,Ae,Ie,ze,Fe,ae)=>{J.slotScopeIds=Fe,se==null?J.shapeFlag&512?Ae.ctx.activate(J,xe,De,ze,ae):j(J,xe,De,Ae,Ie,ze,ae):K(se,J,ae)},j=(se,J,xe,De,Ae,Ie,ze)=>{const Fe=se.component=createComponentInstance(se,De,Ae);if(isKeepAlive(se)&&(Fe.ctx.renderer=Te),setupComponent(Fe,!1,ze),Fe.asyncDep){if(Ae&&Ae.registerDep(Fe,q,ze),!se.el){const ae=Fe.subTree=createVNode$1(Comment);w(null,ae,J,xe)}}else q(Fe,se,J,xe,Ae,Ie,ze)},K=(se,J,xe)=>{const De=J.component=se.component;if(shouldUpdateComponent(se,J,xe))if(De.asyncDep&&!De.asyncResolved){ie(De,J,xe);return}else De.next=J,De.update();else J.el=se.el,De.vnode=J},q=(se,J,xe,De,Ae,Ie,ze)=>{const Fe=()=>{if(se.isMounted){let{next:Ee,bu:ke,u:Ne,parent:Je,vnode:qe}=se;{const gt=locateNonHydratedAsyncRoot(se);if(gt){Ee&&(Ee.el=qe.el,ie(se,Ee,ze)),gt.asyncDep.then(()=>{se.isUnmounted||Fe()});return}}let Ze=Ee,Pt;toggleRecurse(se,!1),Ee?(Ee.el=qe.el,ie(se,Ee,ze)):Ee=qe,ke&&invokeArrayFns(ke),(Pt=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Pt,Je,Ee,qe),toggleRecurse(se,!0);const je=renderComponentRoot(se),ct=se.subTree;se.subTree=je,x(ct,je,g(ct.el),oe(ct),se,Ae,Ie),Ee.el=je.el,Ze===null&&updateHOCHostEl(se,je.el),Ne&&queuePostRenderEffect(Ne,Ae),(Pt=Ee.props&&Ee.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Pt,Je,Ee,qe),Ae)}else{let Ee;const{el:ke,props:Ne}=J,{bm:Je,m:qe,parent:Ze,root:Pt,type:je}=se,ct=isAsyncWrapper(J);if(toggleRecurse(se,!1),Je&&invokeArrayFns(Je),!ct&&(Ee=Ne&&Ne.onVnodeBeforeMount)&&invokeVNodeHook(Ee,Ze,J),toggleRecurse(se,!0),ke&&Ge){const gt=()=>{se.subTree=renderComponentRoot(se),Ge(ke,se.subTree,se,Ae,null)};ct&&je.__asyncHydrate?je.__asyncHydrate(ke,se,gt):gt()}else{Pt.ce&&Pt.ce._injectChildStyle(je);const gt=se.subTree=renderComponentRoot(se);x(null,gt,xe,De,se,Ae,Ie),J.el=gt.el}if(qe&&queuePostRenderEffect(qe,Ae),!ct&&(Ee=Ne&&Ne.onVnodeMounted)){const gt=J;queuePostRenderEffect(()=>invokeVNodeHook(Ee,Ze,gt),Ae)}(J.shapeFlag&256||Ze&&isAsyncWrapper(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&se.a&&queuePostRenderEffect(se.a,Ae),se.isMounted=!0,J=xe=De=null}};se.scope.on();const ae=se.effect=new ReactiveEffect(Fe);se.scope.off();const Q=se.update=ae.run.bind(ae),be=se.job=ae.runIfDirty.bind(ae);be.i=se,be.id=se.uid,ae.scheduler=()=>queueJob(be),toggleRecurse(se,!0),Q()},ie=(se,J,xe)=>{J.component=se;const De=se.vnode.props;se.vnode=J,se.next=null,updateProps$2(se,J.props,De,xe),updateSlots(se,J.children,xe),pauseTracking(),flushPreFlushCbs(se),resetTracking()},ee=(se,J,xe,De,Ae,Ie,ze,Fe,ae=!1)=>{const Q=se&&se.children,be=se?se.shapeFlag:0,Ee=J.children,{patchFlag:ke,shapeFlag:Ne}=J;if(ke>0){if(ke&128){pe(Q,Ee,xe,De,Ae,Ie,ze,Fe,ae);return}else if(ke&256){he(Q,Ee,xe,De,Ae,Ie,ze,Fe,ae);return}}Ne&8?(be&16&&$e(Q,Ae,Ie),Ee!==Q&&v(xe,Ee)):be&16?Ne&16?pe(Q,Ee,xe,De,Ae,Ie,ze,Fe,ae):$e(Q,Ae,Ie,!0):(be&8&&v(xe,""),Ne&16&&B(Ee,xe,De,Ae,Ie,ze,Fe,ae))},he=(se,J,xe,De,Ae,Ie,ze,Fe,ae)=>{se=se||EMPTY_ARR,J=J||EMPTY_ARR;const Q=se.length,be=J.length,Ee=Math.min(Q,be);let ke;for(ke=0;ke<Ee;ke++){const Ne=J[ke]=ae?cloneIfMounted(J[ke]):normalizeVNode(J[ke]);x(se[ke],Ne,xe,null,Ae,Ie,ze,Fe,ae)}Q>be?$e(se,Ae,Ie,!0,!1,Ee):B(J,xe,De,Ae,Ie,ze,Fe,ae,Ee)},pe=(se,J,xe,De,Ae,Ie,ze,Fe,ae)=>{let Q=0;const be=J.length;let Ee=se.length-1,ke=be-1;for(;Q<=Ee&&Q<=ke;){const Ne=se[Q],Je=J[Q]=ae?cloneIfMounted(J[Q]):normalizeVNode(J[Q]);if(isSameVNodeType(Ne,Je))x(Ne,Je,xe,null,Ae,Ie,ze,Fe,ae);else break;Q++}for(;Q<=Ee&&Q<=ke;){const Ne=se[Ee],Je=J[ke]=ae?cloneIfMounted(J[ke]):normalizeVNode(J[ke]);if(isSameVNodeType(Ne,Je))x(Ne,Je,xe,null,Ae,Ie,ze,Fe,ae);else break;Ee--,ke--}if(Q>Ee){if(Q<=ke){const Ne=ke+1,Je=Ne<be?J[Ne].el:De;for(;Q<=ke;)x(null,J[Q]=ae?cloneIfMounted(J[Q]):normalizeVNode(J[Q]),xe,Je,Ae,Ie,ze,Fe,ae),Q++}}else if(Q>ke)for(;Q<=Ee;)ye(se[Q],Ae,Ie,!0),Q++;else{const Ne=Q,Je=Q,qe=new Map;for(Q=Je;Q<=ke;Q++){const Ct=J[Q]=ae?cloneIfMounted(J[Q]):normalizeVNode(J[Q]);Ct.key!=null&&qe.set(Ct.key,Q)}let Ze,Pt=0;const je=ke-Je+1;let ct=!1,gt=0;const St=new Array(je);for(Q=0;Q<je;Q++)St[Q]=0;for(Q=Ne;Q<=Ee;Q++){const Ct=se[Q];if(Pt>=je){ye(Ct,Ae,Ie,!0);continue}let bt;if(Ct.key!=null)bt=qe.get(Ct.key);else for(Ze=Je;Ze<=ke;Ze++)if(St[Ze-Je]===0&&isSameVNodeType(Ct,J[Ze])){bt=Ze;break}bt===void 0?ye(Ct,Ae,Ie,!0):(St[bt-Je]=Q+1,bt>=gt?gt=bt:ct=!0,x(Ct,J[bt],xe,null,Ae,Ie,ze,Fe,ae),Pt++)}const at=ct?getSequence(St):EMPTY_ARR;for(Ze=at.length-1,Q=je-1;Q>=0;Q--){const Ct=Je+Q,bt=J[Ct],Bt=Ct+1<be?J[Ct+1].el:De;St[Q]===0?x(null,bt,xe,Bt,Ae,Ie,ze,Fe,ae):ct&&(Ze<0||Q!==at[Ze]?ce(bt,xe,Bt,2):Ze--)}}},ce=(se,J,xe,De,Ae=null)=>{const{el:Ie,type:ze,transition:Fe,children:ae,shapeFlag:Q}=se;if(Q&6){ce(se.component.subTree,J,xe,De);return}if(Q&128){se.suspense.move(J,xe,De);return}if(Q&64){ze.move(se,J,xe,Te);return}if(ze===Fragment){o(Ie,J,xe);for(let Ee=0;Ee<ae.length;Ee++)ce(ae[Ee],J,xe,De);o(se.anchor,J,xe);return}if(ze===Static){P(se,J,xe);return}if(De!==2&&Q&1&&Fe)if(De===0)Fe.beforeEnter(Ie),o(Ie,J,xe),queuePostRenderEffect(()=>Fe.enter(Ie),Ae);else{const{leave:Ee,delayLeave:ke,afterLeave:Ne}=Fe,Je=()=>o(Ie,J,xe),qe=()=>{Ee(Ie,()=>{Je(),Ne&&Ne()})};ke?ke(Ie,Je,qe):qe()}else o(Ie,J,xe)},ye=(se,J,xe,De=!1,Ae=!1)=>{const{type:Ie,props:ze,ref:Fe,children:ae,dynamicChildren:Q,shapeFlag:be,patchFlag:Ee,dirs:ke,cacheIndex:Ne}=se;if(Ee===-2&&(Ae=!1),Fe!=null&&setRef(Fe,null,xe,se,!0),Ne!=null&&(J.renderCache[Ne]=void 0),be&256){J.ctx.deactivate(se);return}const Je=be&1&&ke,qe=!isAsyncWrapper(se);let Ze;if(qe&&(Ze=ze&&ze.onVnodeBeforeUnmount)&&invokeVNodeHook(Ze,J,se),be&6)Se(se.component,xe,De);else{if(be&128){se.suspense.unmount(xe,De);return}Je&&invokeDirectiveHook(se,null,J,"beforeUnmount"),be&64?se.type.remove(se,J,xe,Te,De):Q&&!Q.hasOnce&&(Ie!==Fragment||Ee>0&&Ee&64)?$e(Q,J,xe,!1,!0):(Ie===Fragment&&Ee&384||!Ae&&be&16)&&$e(ae,J,xe),De&&we(se)}(qe&&(Ze=ze&&ze.onVnodeUnmounted)||Je)&&queuePostRenderEffect(()=>{Ze&&invokeVNodeHook(Ze,J,se),Je&&invokeDirectiveHook(se,null,J,"unmounted")},xe)},we=se=>{const{type:J,el:xe,anchor:De,transition:Ae}=se;if(J===Fragment){ge(xe,De);return}if(J===Static){D(se);return}const Ie=()=>{s(xe),Ae&&!Ae.persisted&&Ae.afterLeave&&Ae.afterLeave()};if(se.shapeFlag&1&&Ae&&!Ae.persisted){const{leave:ze,delayLeave:Fe}=Ae,ae=()=>ze(xe,Ie);Fe?Fe(se.el,Ie,ae):ae()}else Ie()},ge=(se,J)=>{let xe;for(;se!==J;)xe=y(se),s(se),se=xe;s(J)},Se=(se,J,xe)=>{const{bum:De,scope:Ae,job:Ie,subTree:ze,um:Fe,m:ae,a:Q}=se;invalidateMount(ae),invalidateMount(Q),De&&invokeArrayFns(De),Ae.stop(),Ie&&(Ie.flags|=8,ye(ze,se,J,xe)),Fe&&queuePostRenderEffect(Fe,J),queuePostRenderEffect(()=>{se.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&se.asyncDep&&!se.asyncResolved&&se.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},$e=(se,J,xe,De=!1,Ae=!1,Ie=0)=>{for(let ze=Ie;ze<se.length;ze++)ye(se[ze],J,xe,De,Ae)},oe=se=>{if(se.shapeFlag&6)return oe(se.component.subTree);if(se.shapeFlag&128)return se.suspense.next();const J=y(se.anchor||se.el),xe=J&&J[TeleportEndKey];return xe?y(xe):J};let me=!1;const _e=(se,J,xe)=>{se==null?J._vnode&&ye(J._vnode,null,null,!0):x(J._vnode||null,se,J,null,null,null,xe),J._vnode=se,me||(me=!0,flushPreFlushCbs(),flushPostFlushCbs(),me=!1)},Te={p:x,um:ye,m:ce,r:we,mt:j,mc:B,pc:ee,pbc:F,n:oe,o:a};let Le,Ge;return{render:_e,hydrate:Le,createApp:createAppAPI(_e,Le)}}function resolveChildrenNamespace({type:a,props:n},r){return r==="svg"&&a==="foreignObject"||r==="mathml"&&a==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function toggleRecurse({effect:a,job:n},r){r?(a.flags|=32,n.flags|=4):(a.flags&=-33,n.flags&=-5)}function needTransition(a,n){return(!a||a&&!a.pendingBranch)&&n&&!n.persisted}function traverseStaticChildren(a,n,r=!1){const o=a.children,s=n.children;if(isArray$3(o)&&isArray$3(s))for(let l=0;l<o.length;l++){const c=o[l];let u=s[l];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=s[l]=cloneIfMounted(s[l]),u.el=c.el),!r&&u.patchFlag!==-2&&traverseStaticChildren(c,u)),u.type===Text&&(u.el=c.el)}}function getSequence(a){const n=a.slice(),r=[0];let o,s,l,c,u;const d=a.length;for(o=0;o<d;o++){const f=a[o];if(f!==0){if(s=r[r.length-1],a[s]<f){n[o]=s,r.push(o);continue}for(l=0,c=r.length-1;l<c;)u=l+c>>1,a[r[u]]<f?l=u+1:c=u;f<a[r[l]]&&(l>0&&(n[o]=r[l-1]),r[l]=o)}}for(l=r.length,c=r[l-1];l-- >0;)r[l]=c,c=n[c];return r}function locateNonHydratedAsyncRoot(a){const n=a.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:locateNonHydratedAsyncRoot(n)}function invalidateMount(a){if(a)for(let n=0;n<a.length;n++)a[n].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(a,n){return doWatch(a,null,n)}function watch(a,n,r){return doWatch(a,n,r)}function doWatch(a,n,r=EMPTY_OBJ$1){const{immediate:o,deep:s,flush:l,once:c}=r,u=extend$2({},r),d=n&&o||!n&&l!=="post";let f;if(isInSSRComponentSetup){if(l==="sync"){const _=useSSRContext();f=_.__watcherHandles||(_.__watcherHandles=[])}else if(!d){const _=()=>{};return _.stop=NOOP,_.resume=NOOP,_.pause=NOOP,_}}const v=currentInstance;u.call=(_,S,x)=>callWithAsyncErrorHandling(_,v,S,x);let g=!1;l==="post"?u.scheduler=_=>{queuePostRenderEffect(_,v&&v.suspense)}:l!=="sync"&&(g=!0,u.scheduler=(_,S)=>{S?_():queueJob(_)}),u.augmentJob=_=>{n&&(_.flags|=4),g&&(_.flags|=2,v&&(_.id=v.uid,_.i=v))};const y=watch$1(a,n,u);return isInSSRComponentSetup&&(f?f.push(y):d&&y()),y}function instanceWatch(a,n,r){const o=this.proxy,s=isString$1(a)?a.includes(".")?createPathGetter(o,a):()=>o[a]:a.bind(o,o);let l;isFunction$2(n)?l=n:(l=n.handler,r=n);const c=setCurrentInstance(this),u=doWatch(s,l.bind(o),r);return c(),u}function createPathGetter(a,n){const r=n.split(".");return()=>{let o=a;for(let s=0;s<r.length&&o;s++)o=o[r[s]];return o}}const getModelModifiers=(a,n)=>n==="modelValue"||n==="model-value"?a.modelModifiers:a[`${n}Modifiers`]||a[`${camelize$1(n)}Modifiers`]||a[`${hyphenate(n)}Modifiers`];function emit(a,n,...r){if(a.isUnmounted)return;const o=a.vnode.props||EMPTY_OBJ$1;let s=r;const l=n.startsWith("update:"),c=l&&getModelModifiers(o,n.slice(7));c&&(c.trim&&(s=r.map(v=>isString$1(v)?v.trim():v)),c.number&&(s=r.map(looseToNumber)));let u,d=o[u=toHandlerKey(n)]||o[u=toHandlerKey(camelize$1(n))];!d&&l&&(d=o[u=toHandlerKey(hyphenate(n))]),d&&callWithAsyncErrorHandling(d,a,6,s);const f=o[u+"Once"];if(f){if(!a.emitted)a.emitted={};else if(a.emitted[u])return;a.emitted[u]=!0,callWithAsyncErrorHandling(f,a,6,s)}}function normalizeEmitsOptions(a,n,r=!1){const o=n.emitsCache,s=o.get(a);if(s!==void 0)return s;const l=a.emits;let c={},u=!1;if(!isFunction$2(a)){const d=f=>{const v=normalizeEmitsOptions(f,n,!0);v&&(u=!0,extend$2(c,v))};!r&&n.mixins.length&&n.mixins.forEach(d),a.extends&&d(a.extends),a.mixins&&a.mixins.forEach(d)}return!l&&!u?(isObject$5(a)&&o.set(a,null),null):(isArray$3(l)?l.forEach(d=>c[d]=null):extend$2(c,l),isObject$5(a)&&o.set(a,c),c)}function isEmitListener(a,n){return!a||!isOn$1(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(a,n[0].toLowerCase()+n.slice(1))||hasOwn$1(a,hyphenate(n))||hasOwn$1(a,n))}function markAttrsAccessed(){}function renderComponentRoot(a){const{type:n,vnode:r,proxy:o,withProxy:s,propsOptions:[l],slots:c,attrs:u,emit:d,render:f,renderCache:v,props:g,data:y,setupState:_,ctx:S,inheritAttrs:x}=a,T=setCurrentRenderingInstance(a);let w,E;try{if(r.shapeFlag&4){const D=s||o,L=D;w=normalizeVNode(f.call(L,D,v,g,_,y,S)),E=u}else{const D=n;w=normalizeVNode(D.length>1?D(g,{attrs:u,slots:c,emit:d}):D(g,null)),E=n.props?u:getFunctionalFallthrough(u)}}catch(D){blockStack.length=0,handleError(D,a,1),w=createVNode$1(Comment)}let P=w;if(E&&x!==!1){const D=Object.keys(E),{shapeFlag:L}=P;D.length&&L&7&&(l&&D.some(isModelListener)&&(E=filterModelListeners(E,l)),P=cloneVNode(P,E,!1,!0))}return r.dirs&&(P=cloneVNode(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(r.dirs):r.dirs),r.transition&&setTransitionHooks(P,r.transition),w=P,setCurrentRenderingInstance(T),w}const getFunctionalFallthrough=a=>{let n;for(const r in a)(r==="class"||r==="style"||isOn$1(r))&&((n||(n={}))[r]=a[r]);return n},filterModelListeners=(a,n)=>{const r={};for(const o in a)(!isModelListener(o)||!(o.slice(9)in n))&&(r[o]=a[o]);return r};function shouldUpdateComponent(a,n,r){const{props:o,children:s,component:l}=a,{props:c,children:u,patchFlag:d}=n,f=l.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&d>=0){if(d&1024)return!0;if(d&16)return o?hasPropsChanged(o,c,f):!!c;if(d&8){const v=n.dynamicProps;for(let g=0;g<v.length;g++){const y=v[g];if(c[y]!==o[y]&&!isEmitListener(f,y))return!0}}}else return(s||u)&&(!u||!u.$stable)?!0:o===c?!1:o?c?hasPropsChanged(o,c,f):!0:!!c;return!1}function hasPropsChanged(a,n,r){const o=Object.keys(n);if(o.length!==Object.keys(a).length)return!0;for(let s=0;s<o.length;s++){const l=o[s];if(n[l]!==a[l]&&!isEmitListener(r,l))return!0}return!1}function updateHOCHostEl({vnode:a,parent:n},r){for(;n;){const o=n.subTree;if(o.suspense&&o.suspense.activeBranch===a&&(o.el=a.el),o===a)(a=n.vnode).el=r,n=n.parent;else break}}const isSuspense=a=>a.__isSuspense;function queueEffectWithSuspense(a,n){n&&n.pendingBranch?isArray$3(a)?n.effects.push(...a):n.effects.push(a):queuePostFlushCb(a)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(a=!1){blockStack.push(currentBlock=a?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(a,n=!1){isBlockTreeEnabled+=a,a<0&&currentBlock&&n&&(currentBlock.hasOnce=!0)}function setupBlock(a){return a.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(a),a}function createElementBlock(a,n,r,o,s,l){return setupBlock(createBaseVNode(a,n,r,o,s,l,!0))}function createBlock(a,n,r,o,s){return setupBlock(createVNode$1(a,n,r,o,s,!0))}function isVNode(a){return a?a.__v_isVNode===!0:!1}function isSameVNodeType(a,n){return a.type===n.type&&a.key===n.key}const normalizeKey=({key:a})=>a??null,normalizeRef=({ref:a,ref_key:n,ref_for:r})=>(typeof a=="number"&&(a=""+a),a!=null?isString$1(a)||isRef(a)||isFunction$2(a)?{i:currentRenderingInstance,r:a,k:n,f:!!r}:a:null);function createBaseVNode(a,n=null,r=null,o=0,s=null,l=a===Fragment?0:1,c=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:a,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(d,r),l&128&&a.normalize(d)):r&&(d.shapeFlag|=isString$1(r)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(d.patchFlag>0||l&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode$1=_createVNode;function _createVNode(a,n=null,r=null,o=0,s=null,l=!1){if((!a||a===NULL_DYNAMIC_COMPONENT)&&(a=Comment),isVNode(a)){const u=cloneVNode(a,n,!0);return r&&normalizeChildren(u,r),isBlockTreeEnabled>0&&!l&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(a)]=u:currentBlock.push(u)),u.patchFlag=-2,u}if(isClassComponent(a)&&(a=a.__vccOpts),n){n=guardReactiveProps(n);let{class:u,style:d}=n;u&&!isString$1(u)&&(n.class=normalizeClass(u)),isObject$5(d)&&(isProxy(d)&&!isArray$3(d)&&(d=extend$2({},d)),n.style=normalizeStyle$1(d))}const c=isString$1(a)?1:isSuspense(a)?128:isTeleport(a)?64:isObject$5(a)?4:isFunction$2(a)?2:0;return createBaseVNode(a,n,r,o,s,c,l,!0)}function guardReactiveProps(a){return a?isProxy(a)||isInternalObject(a)?extend$2({},a):a:null}function cloneVNode(a,n,r=!1,o=!1){const{props:s,ref:l,patchFlag:c,children:u,transition:d}=a,f=n?mergeProps(s||{},n):s,v={__v_isVNode:!0,__v_skip:!0,type:a.type,props:f,key:f&&normalizeKey(f),ref:n&&n.ref?r&&l?isArray$3(l)?l.concat(normalizeRef(n)):[l,normalizeRef(n)]:normalizeRef(n):l,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:u,target:a.target,targetStart:a.targetStart,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:n&&a.type!==Fragment?c===-1?16:c|16:c,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:d,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&cloneVNode(a.ssContent),ssFallback:a.ssFallback&&cloneVNode(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce};return d&&o&&setTransitionHooks(v,d.clone(v)),v}function createTextVNode(a=" ",n=0){return createVNode$1(Text,null,a,n)}function createStaticVNode(a,n){const r=createVNode$1(Static,null,a);return r.staticCount=n,r}function createCommentVNode(a="",n=!1){return n?(openBlock(),createBlock(Comment,null,a)):createVNode$1(Comment,null,a)}function normalizeVNode(a){return a==null||typeof a=="boolean"?createVNode$1(Comment):isArray$3(a)?createVNode$1(Fragment,null,a.slice()):isVNode(a)?cloneIfMounted(a):createVNode$1(Text,null,String(a))}function cloneIfMounted(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:cloneVNode(a)}function normalizeChildren(a,n){let r=0;const{shapeFlag:o}=a;if(n==null)n=null;else if(isArray$3(n))r=16;else if(typeof n=="object")if(o&65){const s=n.default;s&&(s._c&&(s._d=!1),normalizeChildren(a,s()),s._c&&(s._d=!0));return}else{r=32;const s=n._;!s&&!isInternalObject(n)?n._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,a.patchFlag|=1024))}else isFunction$2(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),o&64?(r=16,n=[createTextVNode(n)]):r=8);a.children=n,a.shapeFlag|=r}function mergeProps(...a){const n={};for(let r=0;r<a.length;r++){const o=a[r];for(const s in o)if(s==="class")n.class!==o.class&&(n.class=normalizeClass([n.class,o.class]));else if(s==="style")n.style=normalizeStyle$1([n.style,o.style]);else if(isOn$1(s)){const l=n[s],c=o[s];c&&l!==c&&!(isArray$3(l)&&l.includes(c))&&(n[s]=l?[].concat(l,c):c)}else s!==""&&(n[s]=o[s])}return n}function invokeVNodeHook(a,n,r,o=null){callWithAsyncErrorHandling(a,n,7,[r,o])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(a,n,r){const o=a.type,s=(n?n.appContext:a.appContext)||emptyAppContext,l={uid:uid$2++,vnode:a,type:o,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,s),emitsOptions:normalizeEmitsOptions(o,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ$1,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ$1,data:EMPTY_OBJ$1,props:EMPTY_OBJ$1,attrs:EMPTY_OBJ$1,slots:EMPTY_OBJ$1,refs:EMPTY_OBJ$1,setupState:EMPTY_OBJ$1,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=n?n.root:l,l.emit=emit.bind(null,l),a.ce&&a.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const a=getGlobalThis$1(),n=(r,o)=>{let s;return(s=a[r])||(s=a[r]=[]),s.push(o),l=>{s.length>1?s.forEach(c=>c(l)):s[0](l)}};internalSetCurrentInstance=n("__VUE_INSTANCE_SETTERS__",r=>currentInstance=r),setInSSRSetupState=n("__VUE_SSR_SETTERS__",r=>isInSSRComponentSetup=r)}const setCurrentInstance=a=>{const n=currentInstance;return internalSetCurrentInstance(a),a.scope.on(),()=>{a.scope.off(),internalSetCurrentInstance(n)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(a){return a.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(a,n=!1,r=!1){n&&setInSSRSetupState(n);const{props:o,children:s}=a.vnode,l=isStatefulComponent(a);initProps$1(a,o,l,n),initSlots(a,s,r);const c=l?setupStatefulComponent(a,n):void 0;return n&&setInSSRSetupState(!1),c}function setupStatefulComponent(a,n){const r=a.type;a.accessCache=Object.create(null),a.proxy=new Proxy(a.ctx,PublicInstanceProxyHandlers);const{setup:o}=r;if(o){pauseTracking();const s=a.setupContext=o.length>1?createSetupContext(a):null,l=setCurrentInstance(a),c=callWithErrorHandling(o,a,0,[a.props,s]),u=isPromise$1(c);if(resetTracking(),l(),(u||a.sp)&&!isAsyncWrapper(a)&&markAsyncBoundary(a),u){if(c.then(unsetCurrentInstance,unsetCurrentInstance),n)return c.then(d=>{handleSetupResult(a,d,n)}).catch(d=>{handleError(d,a,0)});a.asyncDep=c}else handleSetupResult(a,c,n)}else finishComponentSetup(a,n)}function handleSetupResult(a,n,r){isFunction$2(n)?a.type.__ssrInlineRender?a.ssrRender=n:a.render=n:isObject$5(n)&&(a.setupState=proxyRefs(n)),finishComponentSetup(a,r)}let compile;function finishComponentSetup(a,n,r){const o=a.type;if(!a.render){if(!n&&compile&&!o.render){const s=o.template||resolveMergedOptions(a).template;if(s){const{isCustomElement:l,compilerOptions:c}=a.appContext.config,{delimiters:u,compilerOptions:d}=o,f=extend$2(extend$2({isCustomElement:l,delimiters:u},c),d);o.render=compile(s,f)}}a.render=o.render||NOOP}{const s=setCurrentInstance(a);pauseTracking();try{applyOptions(a)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(a,n){return track(a,"get",""),a[n]}};function createSetupContext(a){const n=r=>{a.exposed=r||{}};return{attrs:new Proxy(a.attrs,attrsProxyHandlers),slots:a.slots,emit:a.emit,expose:n}}function getComponentPublicInstance(a){return a.exposed?a.exposeProxy||(a.exposeProxy=new Proxy(proxyRefs(markRaw(a.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](a)},has(n,r){return r in n||r in publicPropertiesMap}})):a.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=a=>a.replace(classifyRE,n=>n.toUpperCase()).replace(/[-_]/g,"");function getComponentName(a,n=!0){return isFunction$2(a)?a.displayName||a.name:a.name||n&&a.__name}function formatComponentName(a,n,r=!1){let o=getComponentName(n);if(!o&&n.__file){const s=n.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&a&&a.parent){const s=l=>{for(const c in l)if(l[c]===n)return c};o=s(a.components||a.parent.type.components)||s(a.appContext.components)}return o?classify(o):r?"App":"Anonymous"}function isClassComponent(a){return isFunction$2(a)&&"__vccOpts"in a}const computed=(a,n)=>computed$1(a,n,isInSSRComponentSetup);function h(a,n,r){const o=arguments.length;return o===2?isObject$5(n)&&!isArray$3(n)?isVNode(n)?createVNode$1(a,null,[n]):createVNode$1(a,n):createVNode$1(a,null,n):(o>3?r=Array.prototype.slice.call(arguments,2):o===3&&isVNode(r)&&(r=[r]),createVNode$1(a,n,r))}const version$1="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:a=>a})}catch{}const unsafeToTrustedHTML=policy?a=>policy.createHTML(a):a=>a,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(a,n,r)=>{n.insertBefore(a,r||null)},remove:a=>{const n=a.parentNode;n&&n.removeChild(a)},createElement:(a,n,r,o)=>{const s=n==="svg"?doc.createElementNS(svgNS,a):n==="mathml"?doc.createElementNS(mathmlNS,a):r?doc.createElement(a,{is:r}):doc.createElement(a);return a==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:a=>doc.createTextNode(a),createComment:a=>doc.createComment(a),setText:(a,n)=>{a.nodeValue=n},setElementText:(a,n)=>{a.textContent=n},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>doc.querySelector(a),setScopeId(a,n){a.setAttribute(n,"")},insertStaticContent(a,n,r,o,s,l){const c=r?r.previousSibling:n.lastChild;if(s&&(s===l||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),r),!(s===l||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(o==="svg"?`<svg>${a}</svg>`:o==="mathml"?`<math>${a}</math>`:a);const u=templateContainer.content;if(o==="svg"||o==="mathml"){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}n.insertBefore(u,r)}return[c?c.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=a=>(a.displayName="Transition",a.props=TransitionPropsValidators,a),Transition=decorate$1((a,{slots:n})=>h(BaseTransition,resolveTransitionProps(a),n)),callHook=(a,n=[])=>{isArray$3(a)?a.forEach(r=>r(...n)):a&&a(...n)},hasExplicitCallback=a=>a?isArray$3(a)?a.some(n=>n.length>1):a.length>1:!1;function resolveTransitionProps(a){const n={};for(const G in a)G in DOMTransitionPropsValidators||(n[G]=a[G]);if(a.css===!1)return n;const{name:r="v",type:o,duration:s,enterFromClass:l=`${r}-enter-from`,enterActiveClass:c=`${r}-enter-active`,enterToClass:u=`${r}-enter-to`,appearFromClass:d=l,appearActiveClass:f=c,appearToClass:v=u,leaveFromClass:g=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:_=`${r}-leave-to`}=a,S=normalizeDuration(s),x=S&&S[0],T=S&&S[1],{onBeforeEnter:w,onEnter:E,onEnterCancelled:P,onLeave:D,onLeaveCancelled:L,onBeforeAppear:$=w,onAppear:O=E,onAppearCancelled:B=P}=n,V=(G,W,j,K)=>{G._enterCancelled=K,removeTransitionClass(G,W?v:u),removeTransitionClass(G,W?f:c),j&&j()},F=(G,W)=>{G._isLeaving=!1,removeTransitionClass(G,g),removeTransitionClass(G,_),removeTransitionClass(G,y),W&&W()},U=G=>(W,j)=>{const K=G?O:E,q=()=>V(W,G,j);callHook(K,[W,q]),nextFrame(()=>{removeTransitionClass(W,G?d:l),addTransitionClass(W,G?v:u),hasExplicitCallback(K)||whenTransitionEnds(W,o,x,q)})};return extend$2(n,{onBeforeEnter(G){callHook(w,[G]),addTransitionClass(G,l),addTransitionClass(G,c)},onBeforeAppear(G){callHook($,[G]),addTransitionClass(G,d),addTransitionClass(G,f)},onEnter:U(!1),onAppear:U(!0),onLeave(G,W){G._isLeaving=!0;const j=()=>F(G,W);addTransitionClass(G,g),G._enterCancelled?(addTransitionClass(G,y),forceReflow()):(forceReflow(),addTransitionClass(G,y)),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,g),addTransitionClass(G,_),hasExplicitCallback(D)||whenTransitionEnds(G,o,T,j))}),callHook(D,[G,j])},onEnterCancelled(G){V(G,!1,void 0,!0),callHook(P,[G])},onAppearCancelled(G){V(G,!0,void 0,!0),callHook(B,[G])},onLeaveCancelled(G){F(G),callHook(L,[G])}})}function normalizeDuration(a){if(a==null)return null;if(isObject$5(a))return[NumberOf(a.enter),NumberOf(a.leave)];{const n=NumberOf(a);return[n,n]}}function NumberOf(a){return toNumber(a)}function addTransitionClass(a,n){n.split(/\s+/).forEach(r=>r&&a.classList.add(r)),(a[vtcKey]||(a[vtcKey]=new Set)).add(n)}function removeTransitionClass(a,n){n.split(/\s+/).forEach(o=>o&&a.classList.remove(o));const r=a[vtcKey];r&&(r.delete(n),r.size||(a[vtcKey]=void 0))}function nextFrame(a){requestAnimationFrame(()=>{requestAnimationFrame(a)})}let endId=0;function whenTransitionEnds(a,n,r,o){const s=a._endId=++endId,l=()=>{s===a._endId&&o()};if(r!=null)return setTimeout(l,r);const{type:c,timeout:u,propCount:d}=getTransitionInfo(a,n);if(!c)return o();const f=c+"end";let v=0;const g=()=>{a.removeEventListener(f,y),l()},y=_=>{_.target===a&&++v>=d&&g()};setTimeout(()=>{v<d&&g()},u+1),a.addEventListener(f,y)}function getTransitionInfo(a,n){const r=window.getComputedStyle(a),o=S=>(r[S]||"").split(", "),s=o(`${TRANSITION}Delay`),l=o(`${TRANSITION}Duration`),c=getTimeout(s,l),u=o(`${ANIMATION}Delay`),d=o(`${ANIMATION}Duration`),f=getTimeout(u,d);let v=null,g=0,y=0;n===TRANSITION?c>0&&(v=TRANSITION,g=c,y=l.length):n===ANIMATION?f>0&&(v=ANIMATION,g=f,y=d.length):(g=Math.max(c,f),v=g>0?c>f?TRANSITION:ANIMATION:null,y=v?v===TRANSITION?l.length:d.length:0);const _=v===TRANSITION&&/\b(transform|all)(,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:v,timeout:g,propCount:y,hasTransform:_}}function getTimeout(a,n){for(;a.length<n.length;)a=a.concat(a);return Math.max(...n.map((r,o)=>toMs(r)+toMs(a[o])))}function toMs(a){return a==="auto"?0:Number(a.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(a,n,r){const o=a[vtcKey];o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?a.removeAttribute("class"):r?a.setAttribute("class",n):a.className=n}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(a,{value:n},{transition:r}){a[vShowOriginalDisplay]=a.style.display==="none"?"":a.style.display,r&&n?r.beforeEnter(a):setDisplay(a,n)},mounted(a,{value:n},{transition:r}){r&&n&&r.enter(a)},updated(a,{value:n,oldValue:r},{transition:o}){!n!=!r&&(o?n?(o.beforeEnter(a),setDisplay(a,!0),o.enter(a)):o.leave(a,()=>{setDisplay(a,!1)}):setDisplay(a,n))},beforeUnmount(a,{value:n}){setDisplay(a,n)}};function setDisplay(a,n){a.style.display=n?a[vShowOriginalDisplay]:"none",a[vShowHidden]=!n}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(a,n,r){const o=a.style,s=isString$1(r);let l=!1;if(r&&!s){if(n)if(isString$1(n))for(const c of n.split(";")){const u=c.slice(0,c.indexOf(":")).trim();r[u]==null&&setStyle(o,u,"")}else for(const c in n)r[c]==null&&setStyle(o,c,"");for(const c in r)c==="display"&&(l=!0),setStyle(o,c,r[c])}else if(s){if(n!==r){const c=o[CSS_VAR_TEXT];c&&(r+=";"+c),o.cssText=r,l=displayRE.test(r)}}else n&&a.removeAttribute("style");vShowOriginalDisplay in a&&(a[vShowOriginalDisplay]=l?o.display:"",a[vShowHidden]&&(o.display="none"))}const importantRE=/\s*!important$/;function setStyle(a,n,r){if(isArray$3(r))r.forEach(o=>setStyle(a,n,o));else if(r==null&&(r=""),n.startsWith("--"))a.setProperty(n,r);else{const o=autoPrefix(a,n);importantRE.test(r)?a.setProperty(hyphenate(o),r.replace(importantRE,""),"important"):a[o]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(a,n){const r=prefixCache[n];if(r)return r;let o=camelize$1(n);if(o!=="filter"&&o in a)return prefixCache[n]=o;o=capitalize(o);for(let s=0;s<prefixes.length;s++){const l=prefixes[s]+o;if(l in a)return prefixCache[n]=l}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(a,n,r,o,s,l=isSpecialBooleanAttr(n)){o&&n.startsWith("xlink:")?r==null?a.removeAttributeNS(xlinkNS,n.slice(6,n.length)):a.setAttributeNS(xlinkNS,n,r):r==null||l&&!includeBooleanAttr(r)?a.removeAttribute(n):a.setAttribute(n,l?"":isSymbol(r)?String(r):r)}function patchDOMProp(a,n,r,o,s){if(n==="innerHTML"||n==="textContent"){r!=null&&(a[n]=n==="innerHTML"?unsafeToTrustedHTML(r):r);return}const l=a.tagName;if(n==="value"&&l!=="PROGRESS"&&!l.includes("-")){const u=l==="OPTION"?a.getAttribute("value")||"":a.value,d=r==null?a.type==="checkbox"?"on":"":String(r);(u!==d||!("_value"in a))&&(a.value=d),r==null&&a.removeAttribute(n),a._value=r;return}let c=!1;if(r===""||r==null){const u=typeof a[n];u==="boolean"?r=includeBooleanAttr(r):r==null&&u==="string"?(r="",c=!0):u==="number"&&(r=0,c=!0)}try{a[n]=r}catch{}c&&a.removeAttribute(s||n)}function addEventListener$1(a,n,r,o){a.addEventListener(n,r,o)}function removeEventListener$1(a,n,r,o){a.removeEventListener(n,r,o)}const veiKey=Symbol("_vei");function patchEvent(a,n,r,o,s=null){const l=a[veiKey]||(a[veiKey]={}),c=l[n];if(o&&c)c.value=o;else{const[u,d]=parseName(n);if(o){const f=l[n]=createInvoker(o,s);addEventListener$1(a,u,f,d)}else c&&(removeEventListener$1(a,u,c,d),l[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(a){let n;if(optionsModifierRE.test(a)){n={};let o;for(;o=a.match(optionsModifierRE);)a=a.slice(0,a.length-o[0].length),n[o[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):hyphenate(a.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(a,n){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,r.value),n,5,[o])};return r.value=a,r.attached=getNow(),r}function patchStopImmediatePropagation(a,n){if(isArray$3(n)){const r=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{r.call(a),a._stopped=!0},n.map(o=>s=>!s._stopped&&o&&o(s))}else return n}const isNativeOn=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,patchProp=(a,n,r,o,s,l)=>{const c=s==="svg";n==="class"?patchClass(a,o,c):n==="style"?patchStyle(a,r,o):isOn$1(n)?isModelListener(n)||patchEvent(a,n,r,o,l):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(a,n,o,c))?(patchDOMProp(a,n,o),!a.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&patchAttr(a,n,o,c,l,n!=="value")):a._isVueCE&&(/[A-Z]/.test(n)||!isString$1(o))?patchDOMProp(a,camelize$1(n),o,l,n):(n==="true-value"?a._trueValue=o:n==="false-value"&&(a._falseValue=o),patchAttr(a,n,o,c))};function shouldSetAsProp(a,n,r,o){if(o)return!!(n==="innerHTML"||n==="textContent"||n in a&&isNativeOn(n)&&isFunction$2(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&a.tagName==="INPUT"||n==="type"&&a.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=a.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(n)&&isString$1(r)?!1:n in a}const keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(a,n)=>{const r=a._withKeys||(a._withKeys={}),o=n.join(".");return r[o]||(r[o]=s=>{if(!("key"in s))return;const l=hyphenate(s.key);if(n.some(c=>c===l||keyNames[c]===l))return a(s)})},rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...a)=>{const n=ensureRenderer().createApp(...a),{mount:r}=n;return n.mount=o=>{const s=normalizeContainer(o);if(!s)return;const l=n._component;!isFunction$2(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=r(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},n};function resolveRootNamespace(a){if(a instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&a instanceof MathMLElement)return"mathml"}function normalizeContainer(a){return isString$1(a)?document.querySelector(a):a}const _export_sfc=(a,n)=>{const r=a.__vccOpts||a;for(const[o,s]of n)r[o]=s;return r},_sfc_main$j={},_hoisted_1$j={id:"app"};function _sfc_render(a,n){const r=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$j,[createVNode$1(r)])}const App=_export_sfc(_sfc_main$j,[["render",_sfc_render]]);function noop$2(){}const extend$1=Object.assign,inBrowser$1=typeof window<"u",isObject$4=a=>a!==null&&typeof a=="object",isDef$1=a=>a!=null,isFunction$1=a=>typeof a=="function",isPromise=a=>isObject$4(a)&&isFunction$1(a.then)&&isFunction$1(a.catch),isDate=a=>Object.prototype.toString.call(a)==="[object Date]"&&!Number.isNaN(a.getTime());function isMobile(a){return a=a.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(a)||/^0[0-9-]{10,13}$/.test(a)}const isNumeric$1=a=>typeof a=="number"||/^\d+(\.\d+)?$/.test(a),isIOS$1=()=>inBrowser$1?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function get$1(a,n){const r=n.split(".");let o=a;return r.forEach(s=>{var l;o=isObject$4(o)&&(l=o[s])!=null?l:""}),o}function pick(a,n,r){return n.reduce((o,s)=>((!r||a[s]!==void 0)&&(o[s]=a[s]),o),{})}const isSameValue=(a,n)=>JSON.stringify(a)===JSON.stringify(n),toArray=a=>Array.isArray(a)?a:[a],flat=a=>a.reduce((n,r)=>n.concat(r),[]),unknownProp=null,numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeRequiredProp=a=>({type:a,required:!0}),makeArrayProp=()=>({type:Array,default:()=>[]}),makeNumberProp=a=>({type:Number,default:a}),makeNumericProp=a=>({type:numericProp,default:a}),makeStringProp=a=>({type:String,default:a});var inBrowser=typeof window<"u";function raf(a){return inBrowser?requestAnimationFrame(a):-1}function cancelRaf(a){inBrowser&&cancelAnimationFrame(a)}function doubleRaf(a){raf(()=>raf(a))}var isWindow=a=>a===window,makeDOMRect=(a,n)=>({top:0,left:0,right:a,bottom:n,width:a,height:n}),useRect=a=>{const n=unref(a);if(isWindow(n)){const r=n.innerWidth,o=n.innerHeight;return makeDOMRect(r,o)}return n!=null&&n.getBoundingClientRect?n.getBoundingClientRect():makeDOMRect(0,0)};function useToggle(a=!1){const n=ref(a);return[n,(o=!n.value)=>{n.value=o}]}function useParent(a){const n=inject(a,null);if(n){const r=getCurrentInstance(),{link:o,unlink:s,internalChildren:l}=n;o(r),onUnmounted(()=>s(r));const c=computed(()=>l.indexOf(r));return{parent:n,index:c}}return{parent:null,index:ref(-1)}}function flattenVNodes(a){const n=[],r=o=>{Array.isArray(o)&&o.forEach(s=>{var l;isVNode(s)&&(n.push(s),(l=s.component)!=null&&l.subTree&&(n.push(s.component.subTree),r(s.component.subTree.children)),s.children&&r(s.children))})};return r(a),n}var findVNodeIndex=(a,n)=>{const r=a.indexOf(n);return r===-1?a.findIndex(o=>n.key!==void 0&&n.key!==null&&o.type===n.type&&o.key===n.key):r};function sortChildren(a,n,r){const o=flattenVNodes(a.subTree.children);r.sort((l,c)=>findVNodeIndex(o,l.vnode)-findVNodeIndex(o,c.vnode));const s=r.map(l=>l.proxy);n.sort((l,c)=>{const u=s.indexOf(l),d=s.indexOf(c);return u-d})}function useChildren(a){const n=reactive([]),r=reactive([]),o=getCurrentInstance();return{children:n,linkChildren:l=>{provide(a,Object.assign({link:d=>{d.proxy&&(r.push(d),n.push(d.proxy),sortChildren(o,n,r))},unlink:d=>{const f=r.indexOf(d);n.splice(f,1),r.splice(f,1)},children:n,internalChildren:r},l))}}}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR;function parseTime(a){const n=Math.floor(a/DAY),r=Math.floor(a%DAY/HOUR),o=Math.floor(a%HOUR/MINUTE),s=Math.floor(a%MINUTE/SECOND),l=Math.floor(a%SECOND);return{total:a,days:n,hours:r,minutes:o,seconds:s,milliseconds:l}}function isSameSecond(a,n){return Math.floor(a/1e3)===Math.floor(n/1e3)}function useCountDown(a){let n,r,o,s;const l=ref(a.time),c=computed(()=>parseTime(l.value)),u=()=>{o=!1,cancelRaf(n)},d=()=>Math.max(r-Date.now(),0),f=x=>{var T,w;l.value=x,(T=a.onChange)==null||T.call(a,c.value),x===0&&(u(),(w=a.onFinish)==null||w.call(a))},v=()=>{n=raf(()=>{o&&(f(d()),l.value>0&&v())})},g=()=>{n=raf(()=>{if(o){const x=d();(!isSameSecond(x,l.value)||x===0)&&f(x),l.value>0&&g()}})},y=()=>{inBrowser&&(a.millisecond?v():g())},_=()=>{o||(r=Date.now()+l.value,o=!0,y())},S=(x=a.time)=>{u(),l.value=x};return onBeforeUnmount(u),onActivated(()=>{s&&(o=!0,s=!1,y())}),onDeactivated(()=>{o&&(u(),s=!0)}),{start:_,pause:u,reset:S,current:c}}function onMountedOrActivated(a){let n;onMounted(()=>{a(),nextTick(()=>{n=!0})}),onActivated(()=>{n&&a()})}function useEventListener(a,n,r={}){if(!inBrowser)return;const{target:o=window,passive:s=!1,capture:l=!1}=r;let c=!1,u;const d=g=>{if(c)return;const y=unref(g);y&&!u&&(y.addEventListener(a,n,{capture:l,passive:s}),u=!0)},f=g=>{if(c)return;const y=unref(g);y&&u&&(y.removeEventListener(a,n,l),u=!1)};onUnmounted(()=>f(o)),onDeactivated(()=>f(o)),onMountedOrActivated(()=>d(o));let v;return isRef(o)&&(v=watch(o,(g,y)=>{f(y),d(g)})),()=>{v==null||v(),f(o),c=!0}}function useClickAway(a,n,r={}){if(!inBrowser)return;const{eventName:o="click"}=r;useEventListener(o,l=>{(Array.isArray(a)?a:[a]).every(d=>{const f=unref(d);return f&&!f.contains(l.target)})&&n(l)},{target:document})}var width,height;function useWindowSize(){if(!width&&(width=ref(0),height=ref(0),inBrowser)){const a=()=>{width.value=window.innerWidth,height.value=window.innerHeight};a(),window.addEventListener("resize",a,{passive:!0}),window.addEventListener("orientationchange",a,{passive:!0})}return{width,height}}var overflowScrollReg=/scroll|auto|overlay/i,defaultRoot=inBrowser?window:void 0;function isElement$1(a){return a.tagName!=="HTML"&&a.tagName!=="BODY"&&a.nodeType===1}function getScrollParent$1(a,n=defaultRoot){let r=a;for(;r&&r!==n&&isElement$1(r);){const{overflowY:o}=window.getComputedStyle(r);if(overflowScrollReg.test(o))return r;r=r.parentNode}return n}function useScrollParent(a,n=defaultRoot){const r=ref();return onMounted(()=>{a.value&&(r.value=getScrollParent$1(a.value,n))}),r}var visibility;function usePageVisibility(){if(!visibility&&(visibility=ref("visible"),inBrowser)){const a=()=>{visibility.value=document.hidden?"hidden":"visible"};a(),window.addEventListener("visibilitychange",a)}return visibility}var CUSTOM_FIELD_INJECTION_KEY=Symbol("van-field");function useCustomFieldValue(a){const n=inject(CUSTOM_FIELD_INJECTION_KEY,null);n&&!n.customValue.value&&(n.customValue.value=a,watch(a,()=>{n.resetValidation(),n.validateWithTrigger("onChange")}))}function getScrollTop(a){const n="scrollTop"in a?a.scrollTop:a.pageYOffset;return Math.max(n,0)}function setScrollTop(a,n){"scrollTop"in a?a.scrollTop=n:a.scrollTo(a.scrollX,n)}function getRootScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function setRootScrollTop(a){setScrollTop(window,a),setScrollTop(document.body,a)}function getElementTop(a,n){if(a===window)return 0;const r=n?getScrollTop(n):getRootScrollTop();return useRect(a).top+r}const isIOS=isIOS$1();function resetScroll(){isIOS&&setRootScrollTop(getRootScrollTop())}const stopPropagation=a=>a.stopPropagation();function preventDefault$1(a,n){(typeof a.cancelable!="boolean"||a.cancelable)&&a.preventDefault(),n&&stopPropagation(a)}function isHidden(a){const n=unref(a);if(!n)return!1;const r=window.getComputedStyle(n),o=r.display==="none",s=n.offsetParent===null&&r.position!=="fixed";return o||s}const{width:windowWidth,height:windowHeight}=useWindowSize();function isContainingBlock(a){const n=window.getComputedStyle(a);return n.transform!=="none"||n.perspective!=="none"||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))}function getContainingBlock$1(a){let n=a.parentElement;for(;n;){if(n&&n.tagName!=="HTML"&&n.tagName!=="BODY"&&isContainingBlock(n))return n;n=n.parentElement}return null}function addUnit(a){if(isDef$1(a))return isNumeric$1(a)?`${a}px`:String(a)}function getSizeStyle(a){if(isDef$1(a)){if(Array.isArray(a))return{width:addUnit(a[0]),height:addUnit(a[1])};const n=addUnit(a);return{width:n,height:n}}}function getZIndexStyle(a){const n={};return a!==void 0&&(n.zIndex=+a),n}let rootFontSize;function getRootFontSize(){if(!rootFontSize){const a=document.documentElement,n=a.style.fontSize||window.getComputedStyle(a).fontSize;rootFontSize=parseFloat(n)}return rootFontSize}function convertRem(a){return a=a.replace(/rem/g,""),+a*getRootFontSize()}function convertVw(a){return a=a.replace(/vw/g,""),+a*windowWidth.value/100}function convertVh(a){return a=a.replace(/vh/g,""),+a*windowHeight.value/100}function unitToPx(a){if(typeof a=="number")return a;if(inBrowser$1){if(a.includes("rem"))return convertRem(a);if(a.includes("vw"))return convertVw(a);if(a.includes("vh"))return convertVh(a)}return parseFloat(a)}const camelizeRE=/-(\w)/g,camelize=a=>a.replace(camelizeRE,(n,r)=>r.toUpperCase()),kebabCase=a=>a.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function padZero(a,n=2){let r=a+"";for(;r.length<n;)r="0"+r;return r}const clamp$2=(a,n,r)=>Math.min(Math.max(a,n),r);function trimExtraChar(a,n,r){const o=a.indexOf(n);return o===-1?a:n==="-"&&o!==0?a.slice(0,o):a.slice(0,o+1)+a.slice(o).replace(r,"")}function formatNumber(a,n=!0,r=!0){n?a=trimExtraChar(a,".",/\./g):a=a.split(".")[0],r?a=trimExtraChar(a,"-",/-/g):a=a.replace(/-/,"");const o=n?/[^-0-9.]/g:/[^-0-9]/g;return a.replace(o,"")}function addNumber(a,n){return Math.round((a+n)*1e10)/1e10}const{hasOwnProperty}=Object.prototype;function assignKey(a,n,r){const o=n[r];isDef$1(o)&&(!hasOwnProperty.call(a,r)||!isObject$4(o)?a[r]=o:a[r]=deepAssign(Object(a[r]),o))}function deepAssign(a,n){return Object.keys(n).forEach(r=>{assignKey(a,n,r)}),a}var stdin_default$1T={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(a,n)=>`${a}年${n}月`,rangePrompt:a=>`最多选择 ${a} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:a=>`${a}折`,condition:a=>`满${a}元可用`},vanCouponCell:{title:"优惠券",count:a=>`${a}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const lang=ref("zh-CN"),messages=reactive({"zh-CN":stdin_default$1T}),Locale={messages(){return messages[lang.value]},use(a,n){lang.value=a,this.add({[a]:n})},add(a={}){deepAssign(messages,a)}};var stdin_default$1S=Locale;function createTranslate(a){const n=camelize(a)+".";return(r,...o)=>{const s=stdin_default$1S.messages(),l=get$1(s,n+r)||get$1(s,r);return isFunction$1(l)?l(...o):l}}function genBem(a,n){return n?typeof n=="string"?` ${a}--${n}`:Array.isArray(n)?n.reduce((r,o)=>r+genBem(a,o),""):Object.keys(n).reduce((r,o)=>r+(n[o]?genBem(a,o):""),""):""}function createBEM(a){return(n,r)=>(n&&typeof n!="string"&&(r=n,n=""),n=n?`${a}__${n}`:a,`${n}${genBem(n,r)}`)}function createNamespace(a){const n=`van-${a}`;return[n,createBEM(n),createTranslate(n)]}const BORDER="van-hairline",BORDER_TOP=`${BORDER}--top`,BORDER_LEFT=`${BORDER}--left`,BORDER_RIGHT=`${BORDER}--right`,BORDER_BOTTOM=`${BORDER}--bottom`,BORDER_SURROUND=`${BORDER}--surround`,BORDER_TOP_BOTTOM=`${BORDER}--top-bottom`,BORDER_UNSET_TOP_BOTTOM=`${BORDER}-unset--top-bottom`,HAPTICS_FEEDBACK="van-haptics-feedback",FORM_KEY=Symbol("van-form"),LONG_PRESS_START_TIME=500,TAP_OFFSET=5;function callInterceptor(a,{args:n=[],done:r,canceled:o,error:s}){if(a){const l=a.apply(null,n);isPromise(l)?l.then(c=>{c?r():o&&o()}).catch(s||noop$2):l?r():o&&o()}else r()}function withInstall(a){return a.install=n=>{const{name:r}=a;r&&(n.component(r,a),n.component(camelize(`-${r}`),a))},a}function closest(a,n){return a.reduce((r,o)=>Math.abs(r-n)<Math.abs(o-n)?r:o)}const POPUP_TOGGLE_KEY=Symbol();function onPopupReopen(a){const n=inject(POPUP_TOGGLE_KEY,null);n&&watch(n,r=>{r&&a()})}const useHeight=(a,n)=>{const r=ref(),o=()=>{r.value=useRect(a).height};return onMounted(()=>{if(nextTick(o),n)for(let s=1;s<=3;s++)setTimeout(o,100*s)}),onPopupReopen(()=>nextTick(o)),watch([windowWidth,windowHeight],o),r};function usePlaceholder(a,n){const r=useHeight(a,!0);return o=>createVNode$1("div",{class:n("placeholder"),style:{height:r.value?`${r.value}px`:void 0}},[o()])}const[name$1K,bem$1F]=createNamespace("action-bar"),ACTION_BAR_KEY=Symbol(name$1K),actionBarProps={placeholder:Boolean,safeAreaInsetBottom:truthProp};var stdin_default$1R=defineComponent({name:name$1K,props:actionBarProps,setup(a,{slots:n}){const r=ref(),o=usePlaceholder(r,bem$1F),{linkChildren:s}=useChildren(ACTION_BAR_KEY);s();const l=()=>{var c;return createVNode$1("div",{ref:r,class:[bem$1F(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(c=n.default)==null?void 0:c.call(n)])};return()=>a.placeholder?o(l):l()}});const ActionBar=withInstall(stdin_default$1R);function useExpose(a){const n=getCurrentInstance();n&&extend$1(n.proxy,a)}const routeProps={to:[String,Object],url:String,replace:Boolean};function route({to:a,url:n,replace:r,$router:o}){a&&o?o[r?"replace":"push"](a):n&&(r?location.replace(n):location.href=n)}function useRoute$1(){const a=getCurrentInstance().proxy;return()=>route(a)}const[name$1J,bem$1E]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$1Q=defineComponent({name:name$1J,props:badgeProps,setup(a,{slots:n}){const r=()=>{if(n.content)return!0;const{content:u,showZero:d}=a;return isDef$1(u)&&u!==""&&(d||u!==0&&u!=="0")},o=()=>{const{dot:u,max:d,content:f}=a;if(!u&&r())return n.content?n.content():isDef$1(d)&&isNumeric$1(f)&&+f>+d?`${d}+`:f},s=u=>u.startsWith("-")?u.replace("-",""):`-${u}`,l=computed(()=>{const u={background:a.color};if(a.offset){const[d,f]=a.offset,{position:v}=a,[g,y]=v.split("-");n.default?(typeof f=="number"?u[g]=addUnit(g==="top"?f:-f):u[g]=g==="top"?addUnit(f):s(f),typeof d=="number"?u[y]=addUnit(y==="left"?d:-d):u[y]=y==="left"?addUnit(d):s(d)):(u.marginTop=addUnit(f),u.marginLeft=addUnit(d))}return u}),c=()=>{if(r()||a.dot)return createVNode$1("div",{class:bem$1E([a.position,{dot:a.dot,fixed:!!n.default}]),style:l.value},[o()])};return()=>{if(n.default){const{tag:u}=a;return createVNode$1(u,{class:bem$1E("wrapper")},{default:()=>[n.default(),c()]})}return c()}}});const Badge=withInstall(stdin_default$1Q);let globalZIndex=2e3;const useGlobalZIndex=()=>++globalZIndex,setGlobalZIndex=a=>{globalZIndex=a},[name$1I,bem$1D]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$1I),configProviderProps={tag:makeStringProp("div"),theme:makeStringProp("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:makeStringProp("local"),iconPrefix:String};function insertDash(a){return a.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function mapThemeVarsToCSSVars(a){const n={};return Object.keys(a).forEach(r=>{const o=insertDash(kebabCase(r));n[`--van-${o}`]=a[r]}),n}function syncThemeVarsOnRoot(a={},n={}){Object.keys(a).forEach(r=>{a[r]!==n[r]&&document.documentElement.style.setProperty(r,a[r])}),Object.keys(n).forEach(r=>{a[r]||document.documentElement.style.removeProperty(r)})}var stdin_default$1P=defineComponent({name:name$1I,props:configProviderProps,setup(a,{slots:n}){const r=computed(()=>mapThemeVarsToCSSVars(extend$1({},a.themeVars,a.theme==="dark"?a.themeVarsDark:a.themeVarsLight)));if(inBrowser$1){const o=()=>{document.documentElement.classList.add(`van-theme-${a.theme}`)},s=(l=a.theme)=>{document.documentElement.classList.remove(`van-theme-${l}`)};watch(()=>a.theme,(l,c)=>{c&&s(c),o()},{immediate:!0}),onActivated(o),onDeactivated(s),onBeforeUnmount(s),watch(r,(l,c)=>{a.themeVarsScope==="global"&&syncThemeVarsOnRoot(l,c)}),watch(()=>a.themeVarsScope,(l,c)=>{c==="global"&&syncThemeVarsOnRoot({},r.value),l==="global"&&syncThemeVarsOnRoot(r.value,{})}),a.themeVarsScope==="global"&&syncThemeVarsOnRoot(r.value,{})}return provide(CONFIG_PROVIDER_KEY,a),watchEffect(()=>{a.zIndex!==void 0&&setGlobalZIndex(a.zIndex)}),()=>createVNode$1(a.tag,{class:bem$1D(),style:a.themeVarsScope==="local"?r.value:void 0},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}})}});const[name$1H,bem$1C]=createNamespace("icon"),isImage$1=a=>a==null?void 0:a.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$1O=defineComponent({name:name$1H,props:iconProps,setup(a,{slots:n}){const r=inject(CONFIG_PROVIDER_KEY,null),o=computed(()=>a.classPrefix||(r==null?void 0:r.iconPrefix)||bem$1C());return()=>{const{tag:s,dot:l,name:c,size:u,badge:d,color:f}=a,v=isImage$1(c);return createVNode$1(Badge,mergeProps({dot:l,tag:s,class:[o.value,v?"":`${o.value}-${c}`],style:{color:f,fontSize:addUnit(u)},content:d},a.badgeProps),{default:()=>{var g;return[(g=n.default)==null?void 0:g.call(n),v&&createVNode$1("img",{class:bem$1C("image"),src:c},null)]}})}}});const Icon=withInstall(stdin_default$1O);var stdin_default$1N=Icon;const[name$1G,bem$1B]=createNamespace("loading"),SpinIcon=Array(12).fill(null).map((a,n)=>createVNode$1("i",{class:bem$1B("line",String(n+1))},null)),CircularIcon=createVNode$1("svg",{class:bem$1B("circular"),viewBox:"25 25 50 50"},[createVNode$1("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),loadingProps$1={size:numericProp,type:makeStringProp("circular"),color:String,vertical:Boolean,textSize:numericProp,textColor:String};var stdin_default$1M=defineComponent({name:name$1G,props:loadingProps$1,setup(a,{slots:n}){const r=computed(()=>extend$1({color:a.color},getSizeStyle(a.size))),o=()=>{const l=a.type==="spinner"?SpinIcon:CircularIcon;return createVNode$1("span",{class:bem$1B("spinner",a.type),style:r.value},[n.icon?n.icon():l])},s=()=>{var l;if(n.default)return createVNode$1("span",{class:bem$1B("text"),style:{fontSize:addUnit(a.textSize),color:(l=a.textColor)!=null?l:a.color}},[n.default()])};return()=>{const{type:l,vertical:c}=a;return createVNode$1("div",{class:bem$1B([l,{vertical:c}]),"aria-live":"polite","aria-busy":!0},[o(),s()])}}});const Loading=withInstall(stdin_default$1M),[name$1F,bem$1A]=createNamespace("button"),buttonProps=extend$1({},routeProps,{tag:makeStringProp("button"),text:String,icon:String,type:makeStringProp("default"),size:makeStringProp("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:makeStringProp("button"),loadingSize:numericProp,loadingText:String,loadingType:String,iconPosition:makeStringProp("left")});var stdin_default$1L=defineComponent({name:name$1F,props:buttonProps,emits:["click"],setup(a,{emit:n,slots:r}){const o=useRoute$1(),s=()=>r.loading?r.loading():createVNode$1(Loading,{size:a.loadingSize,type:a.loadingType,class:bem$1A("loading")},null),l=()=>{if(a.loading)return s();if(r.icon)return createVNode$1("div",{class:bem$1A("icon")},[r.icon()]);if(a.icon)return createVNode$1(Icon,{name:a.icon,class:bem$1A("icon"),classPrefix:a.iconPrefix},null)},c=()=>{let f;if(a.loading?f=a.loadingText:f=r.default?r.default():a.text,f)return createVNode$1("span",{class:bem$1A("text")},[f])},u=()=>{const{color:f,plain:v}=a;if(f){const g={color:v?f:"white"};return v||(g.background=f),f.includes("gradient")?g.border=0:g.borderColor=f,g}},d=f=>{a.loading?preventDefault$1(f):a.disabled||(n("click",f),o())};return()=>{const{tag:f,type:v,size:g,block:y,round:_,plain:S,square:x,loading:T,disabled:w,hairline:E,nativeType:P,iconPosition:D}=a,L=[bem$1A([v,g,{plain:S,block:y,round:_,square:x,loading:T,disabled:w,hairline:E}]),{[BORDER_SURROUND]:E}];return createVNode$1(f,{type:P,class:L,style:u(),disabled:w,onClick:d},{default:()=>[createVNode$1("div",{class:bem$1A("content")},[D==="left"&&l(),c(),D==="right"&&l()])]})}}});const Button=withInstall(stdin_default$1L),[name$1E,bem$1z]=createNamespace("action-bar-button"),actionBarButtonProps=extend$1({},routeProps,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var stdin_default$1K=defineComponent({name:name$1E,props:actionBarButtonProps,setup(a,{slots:n}){const r=useRoute$1(),{parent:o,index:s}=useParent(ACTION_BAR_KEY),l=computed(()=>{if(o){const u=o.children[s.value-1];return!(u&&"isButton"in u)}}),c=computed(()=>{if(o){const u=o.children[s.value+1];return!(u&&"isButton"in u)}});return useExpose({isButton:!0}),()=>{const{type:u,icon:d,text:f,color:v,loading:g,disabled:y}=a;return createVNode$1(Button,{class:bem$1z([u,{last:c.value,first:l.value}]),size:"large",type:u,icon:d,color:v,loading:g,disabled:y,onClick:r},{default:()=>[n.default?n.default():f]})}}});const ActionBarButton=withInstall(stdin_default$1K),[name$1D,bem$1y]=createNamespace("action-bar-icon"),actionBarIconProps=extend$1({},routeProps,{dot:Boolean,text:String,icon:String,color:String,badge:numericProp,iconClass:unknownProp,badgeProps:Object,iconPrefix:String});var stdin_default$1J=defineComponent({name:name$1D,props:actionBarIconProps,setup(a,{slots:n}){const r=useRoute$1();useParent(ACTION_BAR_KEY);const o=()=>{const{dot:s,badge:l,icon:c,color:u,iconClass:d,badgeProps:f,iconPrefix:v}=a;return n.icon?createVNode$1(Badge,mergeProps({dot:s,class:bem$1y("icon"),content:l},f),{default:n.icon}):createVNode$1(Icon,{tag:"div",dot:s,name:c,badge:l,color:u,class:[bem$1y("icon"),d],badgeProps:f,classPrefix:v},null)};return()=>createVNode$1("div",{role:"button",class:bem$1y(),tabindex:0,onClick:r},[o(),n.default?n.default():a.text])}});const ActionBarIcon=withInstall(stdin_default$1J),popupSharedProps={show:Boolean,zIndex:numericProp,overlay:truthProp,duration:numericProp,teleport:[String,Object],lockScroll:truthProp,lazyRender:truthProp,beforeClose:Function,overlayStyle:Object,overlayClass:unknownProp,transitionAppear:Boolean,closeOnClickOverlay:truthProp},popupSharedPropKeys=Object.keys(popupSharedProps);function getDirection(a,n){return a>n?"horizontal":n>a?"vertical":""}function useTouch(){const a=ref(0),n=ref(0),r=ref(0),o=ref(0),s=ref(0),l=ref(0),c=ref(""),u=ref(!0),d=()=>c.value==="vertical",f=()=>c.value==="horizontal",v=()=>{r.value=0,o.value=0,s.value=0,l.value=0,c.value="",u.value=!0};return{move:_=>{const S=_.touches[0];r.value=(S.clientX<0?0:S.clientX)-a.value,o.value=S.clientY-n.value,s.value=Math.abs(r.value),l.value=Math.abs(o.value);const x=10;(!c.value||s.value<x&&l.value<x)&&(c.value=getDirection(s.value,l.value)),u.value&&(s.value>TAP_OFFSET||l.value>TAP_OFFSET)&&(u.value=!1)},start:_=>{v(),a.value=_.touches[0].clientX,n.value=_.touches[0].clientY},reset:v,startX:a,startY:n,deltaX:r,deltaY:o,offsetX:s,offsetY:l,direction:c,isVertical:d,isHorizontal:f,isTap:u}}let totalLockCount=0;const BODY_LOCK_CLASS="van-overflow-hidden";function useLockScroll(a,n){const r=useTouch(),o="01",s="10",l=v=>{r.move(v);const g=r.deltaY.value>0?s:o,y=getScrollParent$1(v.target,a.value),{scrollHeight:_,offsetHeight:S,scrollTop:x}=y;let T="11";x===0?T=S>=_?"00":"01":x+S>=_&&(T="10"),T!=="11"&&r.isVertical()&&!(parseInt(T,2)&parseInt(g,2))&&preventDefault$1(v,!0)},c=()=>{document.addEventListener("touchstart",r.start),document.addEventListener("touchmove",l,{passive:!1}),totalLockCount||document.body.classList.add(BODY_LOCK_CLASS),totalLockCount++},u=()=>{totalLockCount&&(document.removeEventListener("touchstart",r.start),document.removeEventListener("touchmove",l),totalLockCount--,totalLockCount||document.body.classList.remove(BODY_LOCK_CLASS))},d=()=>n()&&c(),f=()=>n()&&u();onMountedOrActivated(d),onDeactivated(f),onBeforeUnmount(f),watch(n,v=>{v?c():u()})}function useLazyRender(a){const n=ref(!1);return watch(a,r=>{r&&(n.value=r)},{immediate:!0}),r=>()=>n.value?r():null}const useScopeId=()=>{var a;const{scopeId:n}=((a=getCurrentInstance())==null?void 0:a.vnode)||{};return n?{[n]:""}:null},[name$1C,bem$1x]=createNamespace("overlay"),overlayProps={show:Boolean,zIndex:numericProp,duration:numericProp,className:unknownProp,lockScroll:truthProp,lazyRender:truthProp,customStyle:Object,teleport:[String,Object]};var stdin_default$1I=defineComponent({name:name$1C,props:overlayProps,setup(a,{slots:n}){const r=ref(),o=useLazyRender(()=>a.show||!a.lazyRender),s=c=>{a.lockScroll&&preventDefault$1(c,!0)},l=o(()=>{var c;const u=extend$1(getZIndexStyle(a.zIndex),a.customStyle);return isDef$1(a.duration)&&(u.animationDuration=`${a.duration}s`),withDirectives(createVNode$1("div",{ref:r,style:u,class:[bem$1x(),a.className]},[(c=n.default)==null?void 0:c.call(n)]),[[vShow,a.show]])});return useEventListener("touchmove",s,{target:r}),()=>{const c=createVNode$1(Transition,{name:"van-fade",appear:!0},{default:l});return a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[c]}):c}}});const Overlay=withInstall(stdin_default$1I),popupProps$2=extend$1({},popupSharedProps,{round:Boolean,position:makeStringProp("center"),closeIcon:makeStringProp("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:makeStringProp("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[name$1B,bem$1w]=createNamespace("popup");var stdin_default$1H=defineComponent({name:name$1B,inheritAttrs:!1,props:popupProps$2,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(a,{emit:n,attrs:r,slots:o}){let s,l;const c=ref(),u=ref(),d=useLazyRender(()=>a.show||!a.lazyRender),f=computed(()=>{const $={zIndex:c.value};if(isDef$1(a.duration)){const O=a.position==="center"?"animationDuration":"transitionDuration";$[O]=`${a.duration}s`}return $}),v=()=>{s||(s=!0,c.value=a.zIndex!==void 0?+a.zIndex:useGlobalZIndex(),n("open"))},g=()=>{s&&callInterceptor(a.beforeClose,{done(){s=!1,n("close"),n("update:show",!1)}})},y=$=>{n("clickOverlay",$),a.closeOnClickOverlay&&g()},_=()=>{if(a.overlay)return createVNode$1(Overlay,mergeProps({show:a.show,class:a.overlayClass,zIndex:c.value,duration:a.duration,customStyle:a.overlayStyle,role:a.closeOnClickOverlay?"button":void 0,tabindex:a.closeOnClickOverlay?0:void 0},useScopeId(),{onClick:y}),{default:o["overlay-content"]})},S=$=>{n("clickCloseIcon",$),g()},x=()=>{if(a.closeable)return createVNode$1(Icon,{role:"button",tabindex:0,name:a.closeIcon,class:[bem$1w("close-icon",a.closeIconPosition),HAPTICS_FEEDBACK],classPrefix:a.iconPrefix,onClick:S},null)};let T;const w=()=>{T&&clearTimeout(T),T=setTimeout(()=>{n("opened")})},E=()=>n("closed"),P=$=>n("keydown",$),D=d(()=>{var $;const{destroyOnClose:O,round:B,position:V,safeAreaInsetTop:F,safeAreaInsetBottom:U,show:G}=a;if(!(!G&&O))return withDirectives(createVNode$1("div",mergeProps({ref:u,style:f.value,role:"dialog",tabindex:0,class:[bem$1w({round:B,[V]:V}),{"van-safe-area-top":F,"van-safe-area-bottom":U}],onKeydown:P},r,useScopeId()),[($=o.default)==null?void 0:$.call(o),x()]),[[vShow,G]])}),L=()=>{const{position:$,transition:O,transitionAppear:B}=a,V=$==="center"?"van-fade":`van-popup-slide-${$}`;return createVNode$1(Transition,{name:O||V,appear:B,onAfterEnter:w,onAfterLeave:E},{default:D})};return watch(()=>a.show,$=>{$&&!s&&(v(),r.tabindex===0&&nextTick(()=>{var O;(O=u.value)==null||O.focus()})),!$&&s&&(s=!1,n("close"))}),useExpose({popupRef:u}),useLockScroll(u,()=>a.show&&a.lockScroll),useEventListener("popstate",()=>{a.closeOnPopstate&&(g(),l=!1)}),onMounted(()=>{a.show&&v()}),onActivated(()=>{l&&(n("update:show",!0),l=!1)}),onDeactivated(()=>{a.show&&a.teleport&&(g(),l=!0)}),provide(POPUP_TOGGLE_KEY,()=>a.show),()=>a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[_(),L()]}):createVNode$1(Fragment,null,[_(),L()])}});const Popup=withInstall(stdin_default$1H),[name$1A,bem$1v]=createNamespace("action-sheet"),actionSheetProps=extend$1({},popupSharedProps,{title:String,round:truthProp,actions:makeArrayProp(),closeIcon:makeStringProp("cross"),closeable:truthProp,cancelText:String,description:String,closeOnPopstate:truthProp,closeOnClickAction:Boolean,safeAreaInsetBottom:truthProp}),popupInheritKeys$2=[...popupSharedPropKeys,"round","closeOnPopstate","safeAreaInsetBottom"];var stdin_default$1G=defineComponent({name:name$1A,props:actionSheetProps,emits:["select","cancel","update:show"],setup(a,{slots:n,emit:r}){const o=g=>r("update:show",g),s=()=>{o(!1),r("cancel")},l=()=>{if(a.title)return createVNode$1("div",{class:bem$1v("header")},[a.title,a.closeable&&createVNode$1(Icon,{name:a.closeIcon,class:[bem$1v("close"),HAPTICS_FEEDBACK],onClick:s},null)])},c=()=>{if(n.cancel||a.cancelText)return[createVNode$1("div",{class:bem$1v("gap")},null),createVNode$1("button",{type:"button",class:bem$1v("cancel"),onClick:s},[n.cancel?n.cancel():a.cancelText])]},u=g=>{if(g.icon)return createVNode$1(Icon,{class:bem$1v("item-icon"),name:g.icon},null)},d=(g,y)=>g.loading?createVNode$1(Loading,{class:bem$1v("loading-icon")},null):n.action?n.action({action:g,index:y}):[createVNode$1("span",{class:bem$1v("name")},[g.name]),g.subname&&createVNode$1("div",{class:bem$1v("subname")},[g.subname])],f=(g,y)=>{const{color:_,loading:S,callback:x,disabled:T,className:w}=g,E=()=>{T||S||(x&&x(g),a.closeOnClickAction&&o(!1),nextTick(()=>r("select",g,y)))};return createVNode$1("button",{type:"button",style:{color:_},class:[bem$1v("item",{loading:S,disabled:T}),w],onClick:E},[u(g),d(g,y)])},v=()=>{if(a.description||n.description){const g=n.description?n.description():a.description;return createVNode$1("div",{class:bem$1v("description")},[g])}};return()=>createVNode$1(Popup,mergeProps({class:bem$1v(),position:"bottom","onUpdate:show":o},pick(a,popupInheritKeys$2)),{default:()=>{var g;return[l(),v(),createVNode$1("div",{class:bem$1v("content")},[a.actions.map(f),(g=n.default)==null?void 0:g.call(n)]),c()]}})}});const ActionSheet=withInstall(stdin_default$1G),[name$1z,bem$1u,t$k]=createNamespace("picker"),getFirstEnabledOption=a=>a.find(n=>!n.disabled)||a[0];function getColumnsType(a,n){const r=a[0];if(r){if(Array.isArray(r))return"multiple";if(n.children in r)return"cascade"}return"default"}function findIndexOfEnabledOption(a,n){n=clamp$2(n,0,a.length);for(let r=n;r<a.length;r++)if(!a[r].disabled)return r;for(let r=n-1;r>=0;r--)if(!a[r].disabled)return r;return 0}const isOptionExist=(a,n,r)=>n!==void 0&&!!a.find(o=>o[r.value]===n);function findOptionByValue(a,n,r){const o=a.findIndex(l=>l[r.value]===n),s=findIndexOfEnabledOption(a,o);return a[s]}function formatCascadeColumns(a,n,r){const o=[];let s={[n.children]:a},l=0;for(;s&&s[n.children];){const c=s[n.children],u=r.value[l];if(s=isDef$1(u)?findOptionByValue(c,u,n):void 0,!s&&c.length){const d=getFirstEnabledOption(c)[n.value];s=findOptionByValue(c,d,n)}l++,o.push(c)}return o}function getElementTranslateY(a){const{transform:n}=window.getComputedStyle(a),r=n.slice(7,n.length-1).split(", ")[5];return Number(r)}function assignDefaultFields(a){return extend$1({text:"text",value:"value",children:"children"},a)}const DEFAULT_DURATION=200,MOMENTUM_TIME=300,MOMENTUM_DISTANCE=15,[name$1y,bem$1t]=createNamespace("picker-column"),PICKER_KEY=Symbol(name$1y);var stdin_default$1F=defineComponent({name:name$1y,props:{value:numericProp,fields:makeRequiredProp(Object),options:makeArrayProp(),readonly:Boolean,allowHtml:Boolean,optionHeight:makeRequiredProp(Number),swipeDuration:makeRequiredProp(numericProp),visibleOptionNum:makeRequiredProp(numericProp)},emits:["change","clickOption","scrollInto"],setup(a,{emit:n,slots:r}){let o,s,l,c,u;const d=ref(),f=ref(),v=ref(0),g=ref(0),y=useTouch(),_=()=>a.options.length,S=()=>a.optionHeight*(+a.visibleOptionNum-1)/2,x=F=>{let U=findIndexOfEnabledOption(a.options,F);const G=-U*a.optionHeight,W=()=>{U>_()-1&&(U=findIndexOfEnabledOption(a.options,F));const j=a.options[U][a.fields.value];j!==a.value&&n("change",j)};o&&G!==v.value?u=W:W(),v.value=G},T=()=>a.readonly||!a.options.length,w=F=>{o||T()||(u=null,g.value=DEFAULT_DURATION,x(F),n("clickOption",a.options[F]))},E=F=>clamp$2(Math.round(-F/a.optionHeight),0,_()-1),P=computed(()=>E(v.value)),D=(F,U)=>{const G=Math.abs(F/U);F=v.value+G/.003*(F<0?-1:1);const W=E(F);g.value=+a.swipeDuration,x(W)},L=()=>{o=!1,g.value=0,u&&(u(),u=null)},$=F=>{if(!T()){if(y.start(F),o){const U=getElementTranslateY(f.value);v.value=Math.min(0,U-S())}g.value=0,s=v.value,l=Date.now(),c=s,u=null}},O=F=>{if(T())return;y.move(F),y.isVertical()&&(o=!0,preventDefault$1(F,!0));const U=clamp$2(s+y.deltaY.value,-(_()*a.optionHeight),a.optionHeight),G=E(U);G!==P.value&&n("scrollInto",a.options[G]),v.value=U;const W=Date.now();W-l>MOMENTUM_TIME&&(l=W,c=U)},B=()=>{if(T())return;const F=v.value-c,U=Date.now()-l;if(U<MOMENTUM_TIME&&Math.abs(F)>MOMENTUM_DISTANCE){D(F,U);return}const W=E(v.value);g.value=DEFAULT_DURATION,x(W),setTimeout(()=>{o=!1},0)},V=()=>{const F={height:`${a.optionHeight}px`};return a.options.map((U,G)=>{const W=U[a.fields.text],{disabled:j}=U,K=U[a.fields.value],q={role:"button",style:F,tabindex:j?-1:0,class:[bem$1t("item",{disabled:j,selected:K===a.value}),U.className],onClick:()=>w(G)},ie={class:"van-ellipsis",[a.allowHtml?"innerHTML":"textContent"]:W};return createVNode$1("li",q,[r.option?r.option(U,G):createVNode$1("div",ie,null)])})};return useParent(PICKER_KEY),useExpose({stopMomentum:L}),watchEffect(()=>{const F=o?Math.floor(-v.value/a.optionHeight):a.options.findIndex(W=>W[a.fields.value]===a.value),U=findIndexOfEnabledOption(a.options,F),G=-U*a.optionHeight;o&&U<F&&L(),v.value=G}),useEventListener("touchmove",O,{target:d}),()=>createVNode$1("div",{ref:d,class:bem$1t(),onTouchstartPassive:$,onTouchend:B,onTouchcancel:B},[createVNode$1("ul",{ref:f,style:{transform:`translate3d(0, ${v.value+S()}px, 0)`,transitionDuration:`${g.value}ms`,transitionProperty:g.value?"all":"none"},class:bem$1t("wrapper"),onTransitionend:L},[V()])])}});const[name$1x]=createNamespace("picker-toolbar"),pickerToolbarProps={title:String,cancelButtonText:String,confirmButtonText:String},pickerToolbarSlots=["cancel","confirm","title","toolbar"],pickerToolbarPropKeys=Object.keys(pickerToolbarProps);var stdin_default$1E=defineComponent({name:name$1x,props:pickerToolbarProps,emits:["confirm","cancel"],setup(a,{emit:n,slots:r}){const o=()=>{if(r.title)return r.title();if(a.title)return createVNode$1("div",{class:[bem$1u("title"),"van-ellipsis"]},[a.title])},s=()=>n("cancel"),l=()=>n("confirm"),c=()=>{var d;const f=(d=a.cancelButtonText)!=null?d:t$k("cancel");if(!(!r.cancel&&!f))return createVNode$1("button",{type:"button",class:[bem$1u("cancel"),HAPTICS_FEEDBACK],onClick:s},[r.cancel?r.cancel():f])},u=()=>{var d;const f=(d=a.confirmButtonText)!=null?d:t$k("confirm");if(!(!r.confirm&&!f))return createVNode$1("button",{type:"button",class:[bem$1u("confirm"),HAPTICS_FEEDBACK],onClick:l},[r.confirm?r.confirm():f])};return()=>createVNode$1("div",{class:bem$1u("toolbar")},[r.toolbar?r.toolbar():[c(),o(),u()]])}});const useSyncPropRef=(a,n)=>{const r=ref(a());return watch(a,o=>{o!==r.value&&(r.value=o)}),watch(r,o=>{o!==a()&&n(o)}),r};function scrollLeftTo(a,n,r){let o,s=0;const l=a.scrollLeft,c=r===0?1:Math.round(r*1e3/16);let u=l;function d(){cancelRaf(o)}function f(){u+=(n-l)/c,a.scrollLeft=u,++s<c&&(o=raf(f))}return f(),d}function scrollTopTo(a,n,r,o){let s,l=getScrollTop(a);const c=l<n,u=r===0?1:Math.round(r*1e3/16),d=(n-l)/u;function f(){cancelRaf(s)}function v(){l+=d,(c&&l>n||!c&&l<n)&&(l=n),setScrollTop(a,l),c&&l<n||!c&&l>n?s=raf(v):o&&(s=raf(o))}return v(),f}let current=0;function useId(){const a=getCurrentInstance(),{name:n="unknown"}=(a==null?void 0:a.type)||{};return`${n}-${++current}`}function useRefs(){const a=ref([]),n=[];return onBeforeUpdate(()=>{a.value=[]}),[a,o=>(n[o]||(n[o]=s=>{a.value[o]=s}),n[o])]}function useVisibilityChange(a,n){if(!inBrowser$1||!window.IntersectionObserver)return;const r=new IntersectionObserver(l=>{n(l[0].intersectionRatio>0)},{root:document.body}),o=()=>{a.value&&r.observe(a.value)},s=()=>{a.value&&r.unobserve(a.value)};onDeactivated(s),onBeforeUnmount(s),onMountedOrActivated(o)}const[name$1w,bem$1s]=createNamespace("sticky"),stickyProps={zIndex:numericProp,position:makeStringProp("top"),container:Object,offsetTop:makeNumericProp(0),offsetBottom:makeNumericProp(0)};var stdin_default$1D=defineComponent({name:name$1w,props:stickyProps,emits:["scroll","change"],setup(a,{emit:n,slots:r}){const o=ref(),s=useScrollParent(o),l=reactive({fixed:!1,width:0,height:0,transform:0}),c=ref(!1),u=computed(()=>unitToPx(a.position==="top"?a.offsetTop:a.offsetBottom)),d=computed(()=>{if(c.value)return;const{fixed:y,height:_,width:S}=l;if(y)return{width:`${S}px`,height:`${_}px`}}),f=computed(()=>{if(!l.fixed||c.value)return;const y=extend$1(getZIndexStyle(a.zIndex),{width:`${l.width}px`,height:`${l.height}px`,[a.position]:`${u.value}px`});return l.transform&&(y.transform=`translate3d(0, ${l.transform}px, 0)`),y}),v=y=>n("scroll",{scrollTop:y,isFixed:l.fixed}),g=()=>{if(!o.value||isHidden(o))return;const{container:y,position:_}=a,S=useRect(o),x=getScrollTop(window);if(l.width=S.width,l.height=S.height,_==="top")if(y){const T=useRect(y),w=T.bottom-u.value-l.height;l.fixed=u.value>S.top&&T.bottom>0,l.transform=w<0?w:0}else l.fixed=u.value>S.top;else{const{clientHeight:T}=document.documentElement;if(y){const w=useRect(y),E=T-w.top-u.value-l.height;l.fixed=T-u.value<S.bottom&&T>w.top,l.transform=E<0?-E:0}else l.fixed=T-u.value<S.bottom}v(x)};return watch(()=>l.fixed,y=>n("change",y)),useEventListener("scroll",g,{target:s,passive:!0}),useVisibilityChange(o,g),watch([windowWidth,windowHeight],()=>{!o.value||isHidden(o)||!l.fixed||(c.value=!0,nextTick(()=>{const y=useRect(o);l.width=y.width,l.height=y.height,c.value=!1}))}),()=>{var y;return createVNode$1("div",{ref:o,style:d.value},[createVNode$1("div",{class:bem$1s({fixed:l.fixed&&!c.value}),style:f.value},[(y=r.default)==null?void 0:y.call(r)])])}}});const Sticky=withInstall(stdin_default$1D),[name$1v,bem$1r]=createNamespace("swipe"),swipeProps={loop:truthProp,width:numericProp,height:numericProp,vertical:Boolean,autoplay:makeNumericProp(0),duration:makeNumericProp(500),touchable:truthProp,lazyRender:Boolean,initialSwipe:makeNumericProp(0),indicatorColor:String,showIndicators:truthProp,stopPropagation:truthProp},SWIPE_KEY=Symbol(name$1v);var stdin_default$1C=defineComponent({name:name$1v,props:swipeProps,emits:["change","dragStart","dragEnd"],setup(a,{emit:n,slots:r}){const o=ref(),s=ref(),l=reactive({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let c=!1;const u=useTouch(),{children:d,linkChildren:f}=useChildren(SWIPE_KEY),v=computed(()=>d.length),g=computed(()=>l[a.vertical?"height":"width"]),y=computed(()=>a.vertical?u.deltaY.value:u.deltaX.value),_=computed(()=>l.rect?(a.vertical?l.rect.height:l.rect.width)-g.value*v.value:0),S=computed(()=>g.value?Math.ceil(Math.abs(_.value)/g.value):v.value),x=computed(()=>v.value*g.value),T=computed(()=>(l.active+v.value)%v.value),w=computed(()=>{const ce=a.vertical?"vertical":"horizontal";return u.direction.value===ce}),E=computed(()=>{const ce={transitionDuration:`${l.swiping?0:a.duration}ms`,transform:`translate${a.vertical?"Y":"X"}(${+l.offset.toFixed(2)}px)`};if(g.value){const ye=a.vertical?"height":"width",we=a.vertical?"width":"height";ce[ye]=`${x.value}px`,ce[we]=a[we]?`${a[we]}px`:""}return ce}),P=ce=>{const{active:ye}=l;return ce?a.loop?clamp$2(ye+ce,-1,v.value):clamp$2(ye+ce,0,S.value):ye},D=(ce,ye=0)=>{let we=ce*g.value;a.loop||(we=Math.min(we,-_.value));let ge=ye-we;return a.loop||(ge=clamp$2(ge,_.value,0)),ge},L=({pace:ce=0,offset:ye=0,emitChange:we})=>{if(v.value<=1)return;const{active:ge}=l,Se=P(ce),$e=D(Se,ye);if(a.loop){if(d[0]&&$e!==_.value){const oe=$e<_.value;d[0].setOffset(oe?x.value:0)}if(d[v.value-1]&&$e!==0){const oe=$e>0;d[v.value-1].setOffset(oe?-x.value:0)}}l.active=Se,l.offset=$e,we&&Se!==ge&&n("change",T.value)},$=()=>{l.swiping=!0,l.active<=-1?L({pace:v.value}):l.active>=v.value&&L({pace:-v.value})},O=()=>{$(),u.reset(),doubleRaf(()=>{l.swiping=!1,L({pace:-1,emitChange:!0})})},B=()=>{$(),u.reset(),doubleRaf(()=>{l.swiping=!1,L({pace:1,emitChange:!0})})};let V;const F=()=>clearTimeout(V),U=()=>{F(),+a.autoplay>0&&v.value>1&&(V=setTimeout(()=>{B(),U()},+a.autoplay))},G=(ce=+a.initialSwipe)=>{if(!o.value)return;const ye=()=>{var we,ge;if(!isHidden(o)){const Se={width:o.value.offsetWidth,height:o.value.offsetHeight};l.rect=Se,l.width=+((we=a.width)!=null?we:Se.width),l.height=+((ge=a.height)!=null?ge:Se.height)}v.value&&(ce=Math.min(v.value-1,ce),ce===-1&&(ce=v.value-1)),l.active=ce,l.swiping=!0,l.offset=D(ce),d.forEach(Se=>{Se.setOffset(0)}),U()};isHidden(o)?nextTick().then(ye):ye()},W=()=>G(l.active);let j;const K=ce=>{!a.touchable||ce.touches.length>1||(u.start(ce),c=!1,j=Date.now(),F(),$())},q=ce=>{a.touchable&&l.swiping&&(u.move(ce),w.value&&(!a.loop&&(l.active===0&&y.value>0||l.active===v.value-1&&y.value<0)||(preventDefault$1(ce,a.stopPropagation),L({offset:y.value}),c||(n("dragStart",{index:T.value}),c=!0))))},ie=()=>{if(!a.touchable||!l.swiping)return;const ce=Date.now()-j,ye=y.value/ce;if((Math.abs(ye)>.25||Math.abs(y.value)>g.value/2)&&w.value){const ge=a.vertical?u.offsetY.value:u.offsetX.value;let Se=0;a.loop?Se=ge>0?y.value>0?-1:1:0:Se=-Math[y.value>0?"ceil":"floor"](y.value/g.value),L({pace:Se,emitChange:!0})}else y.value&&L({pace:0});c=!1,l.swiping=!1,n("dragEnd",{index:T.value}),U()},ee=(ce,ye={})=>{$(),u.reset(),doubleRaf(()=>{let we;a.loop&&ce===v.value?we=l.active===0?0:ce:we=ce%v.value,ye.immediate?doubleRaf(()=>{l.swiping=!1}):l.swiping=!1,L({pace:we-l.active,emitChange:!0})})},he=(ce,ye)=>{const we=ye===T.value,ge=we?{backgroundColor:a.indicatorColor}:void 0;return createVNode$1("i",{style:ge,class:bem$1r("indicator",{active:we})},null)},pe=()=>{if(r.indicator)return r.indicator({active:T.value,total:v.value});if(a.showIndicators&&v.value>1)return createVNode$1("div",{class:bem$1r("indicators",{vertical:a.vertical})},[Array(v.value).fill("").map(he)])};return useExpose({prev:O,next:B,state:l,resize:W,swipeTo:ee}),f({size:g,props:a,count:v,activeIndicator:T}),watch(()=>a.initialSwipe,ce=>G(+ce)),watch(v,()=>G(l.active)),watch(()=>a.autoplay,U),watch([windowWidth,windowHeight,()=>a.width,()=>a.height],W),watch(usePageVisibility(),ce=>{ce==="visible"?U():F()}),onMounted(G),onActivated(()=>G(l.active)),onPopupReopen(()=>G(l.active)),onDeactivated(F),onBeforeUnmount(F),useEventListener("touchmove",q,{target:s}),()=>{var ce;return createVNode$1("div",{ref:o,class:bem$1r()},[createVNode$1("div",{ref:s,style:E.value,class:bem$1r("track",{vertical:a.vertical}),onTouchstartPassive:K,onTouchend:ie,onTouchcancel:ie},[(ce=r.default)==null?void 0:ce.call(r)]),pe()])}}});const Swipe=withInstall(stdin_default$1C),[name$1u,bem$1q]=createNamespace("tabs");var stdin_default$1B=defineComponent({name:name$1u,props:{count:makeRequiredProp(Number),inited:Boolean,animated:Boolean,duration:makeRequiredProp(numericProp),swipeable:Boolean,lazyRender:Boolean,currentIndex:makeRequiredProp(Number)},emits:["change"],setup(a,{emit:n,slots:r}){const o=ref(),s=u=>n("change",u),l=()=>{var u;const d=(u=r.default)==null?void 0:u.call(r);return a.animated||a.swipeable?createVNode$1(Swipe,{ref:o,loop:!1,class:bem$1q("track"),duration:+a.duration*1e3,touchable:a.swipeable,lazyRender:a.lazyRender,showIndicators:!1,onChange:s},{default:()=>[d]}):d},c=u=>{const d=o.value;d&&d.state.active!==u&&d.swipeTo(u,{immediate:!a.inited})};return watch(()=>a.currentIndex,c),onMounted(()=>{c(a.currentIndex)}),useExpose({swipeRef:o}),()=>createVNode$1("div",{class:bem$1q("content",{animated:a.animated||a.swipeable})},[l()])}});const[name$1t,bem$1p]=createNamespace("tabs"),tabsProps={type:makeStringProp("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:makeNumericProp(0),duration:makeNumericProp(.3),animated:Boolean,ellipsis:truthProp,swipeable:Boolean,scrollspy:Boolean,offsetTop:makeNumericProp(0),background:String,lazyRender:truthProp,showHeader:truthProp,lineWidth:numericProp,lineHeight:numericProp,beforeChange:Function,swipeThreshold:makeNumericProp(5),titleActiveColor:String,titleInactiveColor:String},TABS_KEY=Symbol(name$1t);var stdin_default$1A=defineComponent({name:name$1t,props:tabsProps,emits:["change","scroll","rendered","clickTab","update:active"],setup(a,{emit:n,slots:r}){let o,s,l,c,u;const d=ref(),f=ref(),v=ref(),g=ref(),y=useId(),_=useScrollParent(d),[S,x]=useRefs(),{children:T,linkChildren:w}=useChildren(TABS_KEY),E=reactive({inited:!1,position:"",lineStyle:{},currentIndex:-1}),P=computed(()=>T.length>+a.swipeThreshold||!a.ellipsis||a.shrink),D=computed(()=>({borderColor:a.color,background:a.background})),L=(Se,$e)=>{var oe;return(oe=Se.name)!=null?oe:$e},$=computed(()=>{const Se=T[E.currentIndex];if(Se)return L(Se,E.currentIndex)}),O=computed(()=>unitToPx(a.offsetTop)),B=computed(()=>a.sticky?O.value+o:0),V=Se=>{const $e=f.value,oe=S.value;if(!P.value||!$e||!oe||!oe[E.currentIndex])return;const me=oe[E.currentIndex].$el,_e=me.offsetLeft-($e.offsetWidth-me.offsetWidth)/2;c&&c(),c=scrollLeftTo($e,_e,Se?0:+a.duration)},F=()=>{const Se=E.inited;nextTick(()=>{const $e=S.value;if(!$e||!$e[E.currentIndex]||a.type!=="line"||isHidden(d.value))return;const oe=$e[E.currentIndex].$el,{lineWidth:me,lineHeight:_e}=a,Te=oe.offsetLeft+oe.offsetWidth/2,Le={width:addUnit(me),backgroundColor:a.color,transform:`translateX(${Te}px) translateX(-50%)`};if(Se&&(Le.transitionDuration=`${a.duration}s`),isDef$1(_e)){const Ge=addUnit(_e);Le.height=Ge,Le.borderRadius=Ge}E.lineStyle=Le})},U=Se=>{const $e=Se<E.currentIndex?-1:1;for(;Se>=0&&Se<T.length;){if(!T[Se].disabled)return Se;Se+=$e}},G=(Se,$e)=>{const oe=U(Se);if(!isDef$1(oe))return;const me=T[oe],_e=L(me,oe),Te=E.currentIndex!==null;E.currentIndex!==oe&&(E.currentIndex=oe,$e||V(),F()),_e!==a.active&&(n("update:active",_e),Te&&n("change",_e,me.title)),l&&!a.scrollspy&&setRootScrollTop(Math.ceil(getElementTop(d.value)-O.value))},W=(Se,$e)=>{const oe=T.find((_e,Te)=>L(_e,Te)===Se),me=oe?T.indexOf(oe):0;G(me,$e)},j=(Se=!1)=>{if(a.scrollspy){const $e=T[E.currentIndex].$el;if($e&&_.value){const oe=getElementTop($e,_.value)-B.value;s=!0,u&&u(),u=scrollTopTo(_.value,oe,Se?0:+a.duration,()=>{s=!1})}}},K=(Se,$e,oe)=>{const{title:me,disabled:_e}=T[$e],Te=L(T[$e],$e);_e||(callInterceptor(a.beforeChange,{args:[Te],done:()=>{G($e),j()}}),route(Se)),n("clickTab",{name:Te,title:me,event:oe,disabled:_e})},q=Se=>{l=Se.isFixed,n("scroll",Se)},ie=Se=>{nextTick(()=>{W(Se),j(!0)})},ee=()=>{for(let Se=0;Se<T.length;Se++){const{top:$e}=useRect(T[Se].$el);if($e>B.value)return Se===0?0:Se-1}return T.length-1},he=()=>{if(a.scrollspy&&!s){const Se=ee();G(Se)}},pe=()=>{if(a.type==="line"&&T.length)return createVNode$1("div",{class:bem$1p("line"),style:E.lineStyle},null)},ce=()=>{var Se,$e,oe;const{type:me,border:_e,sticky:Te}=a,Le=[createVNode$1("div",{ref:Te?void 0:v,class:[bem$1p("wrap"),{[BORDER_TOP_BOTTOM]:me==="line"&&_e}]},[createVNode$1("div",{ref:f,role:"tablist",class:bem$1p("nav",[me,{shrink:a.shrink,complete:P.value}]),style:D.value,"aria-orientation":"horizontal"},[(Se=r["nav-left"])==null?void 0:Se.call(r),T.map(Ge=>Ge.renderTitle(K)),pe(),($e=r["nav-right"])==null?void 0:$e.call(r)])]),(oe=r["nav-bottom"])==null?void 0:oe.call(r)];return Te?createVNode$1("div",{ref:v},[Le]):Le},ye=()=>{F(),nextTick(()=>{var Se,$e;V(!0),($e=(Se=g.value)==null?void 0:Se.swipeRef.value)==null||$e.resize()})};watch(()=>[a.color,a.duration,a.lineWidth,a.lineHeight],F),watch(windowWidth,ye),watch(()=>a.active,Se=>{Se!==$.value&&W(Se)}),watch(()=>T.length,()=>{E.inited&&(W(a.active),F(),nextTick(()=>{V(!0)}))});const we=()=>{W(a.active,!0),nextTick(()=>{E.inited=!0,v.value&&(o=useRect(v.value).height),V(!0)})},ge=(Se,$e)=>n("rendered",Se,$e);return useExpose({resize:ye,scrollTo:ie}),onActivated(F),onPopupReopen(F),onMountedOrActivated(we),useVisibilityChange(d,F),useEventListener("scroll",he,{target:_,passive:!0}),w({id:y,props:a,setLine:F,scrollable:P,onRendered:ge,currentName:$,setTitleRefs:x,scrollIntoView:V}),()=>createVNode$1("div",{ref:d,class:bem$1p([a.type])},[a.showHeader?a.sticky?createVNode$1(Sticky,{container:d.value,offsetTop:O.value,onScroll:q},{default:()=>[ce()]}):ce():null,createVNode$1(stdin_default$1B,{ref:g,count:T.length,inited:E.inited,animated:a.animated,duration:a.duration,swipeable:a.swipeable,lazyRender:a.lazyRender,currentIndex:E.currentIndex,onChange:G},{default:()=>{var Se;return[(Se=r.default)==null?void 0:Se.call(r)]}})])}});const TAB_STATUS_KEY=Symbol(),useTabStatus=()=>inject(TAB_STATUS_KEY,null),[name$1s,bem$1o]=createNamespace("tab"),TabTitle=defineComponent({name:name$1s,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:numericProp,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:truthProp},setup(a,{slots:n}){const r=computed(()=>{const s={},{type:l,color:c,disabled:u,isActive:d,activeColor:f,inactiveColor:v}=a;c&&l==="card"&&(s.borderColor=c,u||(d?s.backgroundColor=c:s.color=c));const y=d?f:v;return y&&(s.color=y),s}),o=()=>{const s=createVNode$1("span",{class:bem$1o("text",{ellipsis:!a.scrollable})},[n.title?n.title():a.title]);return a.dot||isDef$1(a.badge)&&a.badge!==""?createVNode$1(Badge,{dot:a.dot,content:a.badge,showZero:a.showZeroBadge},{default:()=>[s]}):s};return()=>createVNode$1("div",{id:a.id,role:"tab",class:[bem$1o([a.type,{grow:a.scrollable&&!a.shrink,shrink:a.shrink,active:a.isActive,disabled:a.disabled}])],style:r.value,tabindex:a.disabled?void 0:a.isActive?0:-1,"aria-selected":a.isActive,"aria-disabled":a.disabled||void 0,"aria-controls":a.controls,"data-allow-mismatch":"attribute"},[o()])}}),[name$1r,bem$1n]=createNamespace("swipe-item");var stdin_default$1z=defineComponent({name:name$1r,setup(a,{slots:n}){let r;const o=reactive({offset:0,inited:!1,mounted:!1}),{parent:s,index:l}=useParent(SWIPE_KEY);if(!s)return;const c=computed(()=>{const f={},{vertical:v}=s.props;return s.size.value&&(f[v?"height":"width"]=`${s.size.value}px`),o.offset&&(f.transform=`translate${v?"Y":"X"}(${o.offset}px)`),f}),u=computed(()=>{const{loop:f,lazyRender:v}=s.props;if(!v||r)return!0;if(!o.mounted)return!1;const g=s.activeIndicator.value,y=s.count.value-1,_=g===0&&f?y:g-1,S=g===y&&f?0:g+1;return r=l.value===g||l.value===_||l.value===S,r}),d=f=>{o.offset=f};return onMounted(()=>{nextTick(()=>{o.mounted=!0})}),useExpose({setOffset:d}),()=>{var f;return createVNode$1("div",{class:bem$1n(),style:c.value},[u.value?(f=n.default)==null?void 0:f.call(n):null])}}});const SwipeItem=withInstall(stdin_default$1z),[name$1q,bem$1m]=createNamespace("tab"),tabProps=extend$1({},routeProps,{dot:Boolean,name:numericProp,badge:numericProp,title:String,disabled:Boolean,titleClass:unknownProp,titleStyle:[String,Object],showZeroBadge:truthProp});var stdin_default$1y=defineComponent({name:name$1q,props:tabProps,setup(a,{slots:n}){const r=useId(),o=ref(!1),s=getCurrentInstance(),{parent:l,index:c}=useParent(TABS_KEY);if(!l)return;const u=()=>{var S;return(S=a.name)!=null?S:c.value},d=()=>{o.value=!0,l.props.lazyRender&&nextTick(()=>{l.onRendered(u(),a.title)})},f=computed(()=>{const S=u()===l.currentName.value;return S&&!o.value&&d(),S}),v=ref(""),g=ref("");watchEffect(()=>{const{titleClass:S,titleStyle:x}=a;v.value=S?normalizeClass(S):"",g.value=x&&typeof x!="string"?stringifyStyle(normalizeStyle$1(x)):x});const y=S=>createVNode$1(TabTitle,mergeProps({key:r,id:`${l.id}-${c.value}`,ref:l.setTitleRefs(c.value),style:g.value,class:v.value,isActive:f.value,controls:r,scrollable:l.scrollable.value,activeColor:l.props.titleActiveColor,inactiveColor:l.props.titleInactiveColor,onClick:x=>S(s.proxy,c.value,x)},pick(l.props,["type","color","shrink"]),pick(a,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),_=ref(!f.value);return watch(f,S=>{S?_.value=!1:doubleRaf(()=>{_.value=!0})}),watch(()=>a.title,()=>{l.setLine(),l.scrollIntoView()}),provide(TAB_STATUS_KEY,f),useExpose({id:r,renderTitle:y}),()=>{var S;const x=`${l.id}-${c.value}`,{animated:T,swipeable:w,scrollspy:E,lazyRender:P}=l.props;if(!n.default&&!T)return;const D=E||f.value;if(T||w)return createVNode$1(SwipeItem,{id:r,role:"tabpanel",class:bem$1m("panel-wrapper",{inactive:_.value}),tabindex:f.value?0:-1,"aria-hidden":!f.value,"aria-labelledby":x,"data-allow-mismatch":"attribute"},{default:()=>{var O;return[createVNode$1("div",{class:bem$1m("panel")},[(O=n.default)==null?void 0:O.call(n)])]}});const $=o.value||E||!P?(S=n.default)==null?void 0:S.call(n):null;return withDirectives(createVNode$1("div",{id:r,role:"tabpanel",class:bem$1m("panel"),tabindex:D?0:-1,"aria-labelledby":x,"data-allow-mismatch":"attribute"},[$]),[[vShow,D]])}}});const Tab=withInstall(stdin_default$1y),Tabs=withInstall(stdin_default$1A),[name$1p,bem$1l]=createNamespace("picker-group"),PICKER_GROUP_KEY=Symbol(name$1p),pickerGroupProps=extend$1({tabs:makeArrayProp(),activeTab:makeNumericProp(0),nextStepText:String,showToolbar:truthProp},pickerToolbarProps);var stdin_default$1x=defineComponent({name:name$1p,props:pickerGroupProps,emits:["confirm","cancel","update:activeTab"],setup(a,{emit:n,slots:r}){const o=useSyncPropRef(()=>a.activeTab,f=>n("update:activeTab",f)),{children:s,linkChildren:l}=useChildren(PICKER_GROUP_KEY);l();const c=()=>+o.value<a.tabs.length-1&&a.nextStepText,u=()=>{c()?o.value=+o.value+1:n("confirm",s.map(f=>f.confirm()))},d=()=>n("cancel");return()=>{var f,v;let g=(v=(f=r.default)==null?void 0:f.call(r))==null?void 0:v.filter(_=>_.type!==Comment).map(_=>_.type===Fragment?_.children:_);g&&(g=flat(g));const y=c()?a.nextStepText:a.confirmButtonText;return createVNode$1("div",{class:bem$1l()},[a.showToolbar?createVNode$1(stdin_default$1E,{title:a.title,cancelButtonText:a.cancelButtonText,confirmButtonText:y,onConfirm:u,onCancel:d},pick(r,pickerToolbarSlots)):null,createVNode$1(Tabs,{active:o.value,"onUpdate:active":_=>o.value=_,class:bem$1l("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[a.tabs.map((_,S)=>createVNode$1(Tab,{title:_,titleClass:bem$1l("tab-title")},{default:()=>[g==null?void 0:g[S]]}))]})])}}});const pickerSharedProps=extend$1({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:makeNumericProp(44),showToolbar:truthProp,swipeDuration:makeNumericProp(1e3),visibleOptionNum:makeNumericProp(6)},pickerToolbarProps),pickerProps=extend$1({},pickerSharedProps,{columns:makeArrayProp(),modelValue:makeArrayProp(),toolbarPosition:makeStringProp("top"),columnsFieldNames:Object});var stdin_default$1w=defineComponent({name:name$1z,props:pickerProps,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(),s=ref(a.modelValue.slice(0)),{parent:l}=useParent(PICKER_GROUP_KEY),{children:c,linkChildren:u}=useChildren(PICKER_KEY);u();const d=computed(()=>assignDefaultFields(a.columnsFieldNames)),f=computed(()=>unitToPx(a.optionHeight)),v=computed(()=>getColumnsType(a.columns,d.value)),g=computed(()=>{const{columns:U}=a;switch(v.value){case"multiple":return U;case"cascade":return formatCascadeColumns(U,d.value,s);default:return[U]}}),y=computed(()=>g.value.some(U=>U.length)),_=computed(()=>g.value.map((U,G)=>findOptionByValue(U,s.value[G],d.value))),S=computed(()=>g.value.map((U,G)=>U.findIndex(W=>W[d.value.value]===s.value[G]))),x=(U,G)=>{if(s.value[U]!==G){const W=s.value.slice(0);W[U]=G,s.value=W}},T=()=>({selectedValues:s.value.slice(0),selectedOptions:_.value,selectedIndexes:S.value}),w=(U,G)=>{x(G,U),v.value==="cascade"&&s.value.forEach((W,j)=>{const K=g.value[j];isOptionExist(K,W,d.value)||x(j,K.length?K[0][d.value.value]:void 0)}),nextTick(()=>{n("change",extend$1({columnIndex:G},T()))})},E=(U,G)=>{const W={columnIndex:G,currentOption:U};n("clickOption",extend$1(T(),W)),n("scrollInto",W)},P=()=>{c.forEach(G=>G.stopMomentum());const U=T();return nextTick(()=>{n("confirm",U)}),U},D=()=>n("cancel",T()),L=()=>g.value.map((U,G)=>createVNode$1(stdin_default$1F,{value:s.value[G],fields:d.value,options:U,readonly:a.readonly,allowHtml:a.allowHtml,optionHeight:f.value,swipeDuration:a.swipeDuration,visibleOptionNum:a.visibleOptionNum,onChange:W=>w(W,G),onClickOption:W=>E(W,G),onScrollInto:W=>{n("scrollInto",{currentOption:W,columnIndex:G})}},{option:r.option})),$=U=>{if(y.value){const G={height:`${f.value}px`},W={backgroundSize:`100% ${(U-f.value)/2}px`};return[createVNode$1("div",{class:bem$1u("mask"),style:W},null),createVNode$1("div",{class:[BORDER_UNSET_TOP_BOTTOM,bem$1u("frame")],style:G},null)]}},O=()=>{const U=f.value*+a.visibleOptionNum,G={height:`${U}px`};return!a.loading&&!y.value&&r.empty?r.empty():createVNode$1("div",{ref:o,class:bem$1u("columns"),style:G},[L(),$(U)])},B=()=>{if(a.showToolbar&&!l)return createVNode$1(stdin_default$1E,mergeProps(pick(a,pickerToolbarPropKeys),{onConfirm:P,onCancel:D}),pick(r,pickerToolbarSlots))};watch(g,U=>{U.forEach((G,W)=>{G.length&&!isOptionExist(G,s.value[W],d.value)&&x(W,getFirstEnabledOption(G)[d.value.value])})},{immediate:!0});let V;return watch(()=>a.modelValue,U=>{!isSameValue(U,s.value)&&!isSameValue(U,V)&&(s.value=U.slice(0),V=U.slice(0))},{deep:!0}),watch(s,U=>{isSameValue(U,a.modelValue)||(V=U.slice(0),n("update:modelValue",V))},{immediate:!0}),useEventListener("touchmove",preventDefault$1,{target:o}),useExpose({confirm:P,getSelectedOptions:()=>_.value}),()=>{var U,G;return createVNode$1("div",{class:bem$1u()},[a.toolbarPosition==="top"?B():null,a.loading?createVNode$1(Loading,{class:bem$1u("loading")},null):null,(U=r["columns-top"])==null?void 0:U.call(r),O(),(G=r["columns-bottom"])==null?void 0:G.call(r),a.toolbarPosition==="bottom"?B():null])}}});const AREA_EMPTY_CODE="000000",INHERIT_SLOTS=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],INHERIT_PROPS=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],makeOption=(a="",n=AREA_EMPTY_CODE,r=void 0)=>({text:a,value:n,children:r});function formatDataForCascade({areaList:a,columnsNum:n,columnsPlaceholder:r}){const{city_list:o={},county_list:s={},province_list:l={}}=a,c=+n>1,u=+n>2,d=()=>{if(c)return r.length>1?[makeOption(r[1],AREA_EMPTY_CODE,u?[]:void 0)]:[]},f=new Map;Object.keys(l).forEach(y=>{f.set(y.slice(0,2),makeOption(l[y],y,d()))});const v=new Map;if(c){const y=()=>{if(u)return r.length>2?[makeOption(r[2])]:[]};Object.keys(o).forEach(_=>{const S=makeOption(o[_],_,y());v.set(_.slice(0,4),S);const x=f.get(_.slice(0,2));x&&x.children.push(S)})}u&&Object.keys(s).forEach(y=>{const _=v.get(y.slice(0,4));_&&_.children.push(makeOption(s[y],y))});const g=Array.from(f.values());if(r.length){const y=u?[makeOption(r[2])]:void 0,_=c?[makeOption(r[1],AREA_EMPTY_CODE,y)]:void 0;g.unshift(makeOption(r[0],AREA_EMPTY_CODE,_))}return g}const Picker=withInstall(stdin_default$1w),[name$1o,bem$1k]=createNamespace("area"),areaProps=extend$1({},pick(pickerSharedProps,INHERIT_PROPS),{modelValue:String,columnsNum:makeNumericProp(3),columnsPlaceholder:makeArrayProp(),areaList:{type:Object,default:()=>({})}});var stdin_default$1v=defineComponent({name:name$1o,props:areaProps,emits:["change","confirm","cancel","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref([]),s=ref(),l=computed(()=>formatDataForCascade(a)),c=(...f)=>n("change",...f),u=(...f)=>n("cancel",...f),d=(...f)=>n("confirm",...f);return watch(o,f=>{const v=f.length?f[f.length-1]:"";v&&v!==a.modelValue&&n("update:modelValue",v)},{deep:!0}),watch(()=>a.modelValue,f=>{if(f){const v=o.value.length?o.value[o.value.length-1]:"";f!==v&&(o.value=[`${f.slice(0,2)}0000`,`${f.slice(0,4)}00`,f].slice(0,+a.columnsNum))}else o.value=[]},{immediate:!0}),useExpose({confirm:()=>{var f;return(f=s.value)==null?void 0:f.confirm()},getSelectedOptions:()=>{var f;return((f=s.value)==null?void 0:f.getSelectedOptions())||[]}}),()=>createVNode$1(Picker,mergeProps({ref:s,modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,class:bem$1k(),columns:l.value,onChange:c,onCancel:u,onConfirm:d},pick(a,INHERIT_PROPS)),pick(r,INHERIT_SLOTS))}});const Area=withInstall(stdin_default$1v),[name$1n,bem$1j]=createNamespace("cell"),cellSharedProps={tag:makeStringProp("div"),icon:String,size:String,title:numericProp,value:numericProp,label:numericProp,center:Boolean,isLink:Boolean,border:truthProp,iconPrefix:String,valueClass:unknownProp,labelClass:unknownProp,titleClass:unknownProp,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},cellProps=extend$1({},cellSharedProps,routeProps);var stdin_default$1u=defineComponent({name:name$1n,props:cellProps,setup(a,{slots:n}){const r=useRoute$1(),o=()=>{if(n.label||isDef$1(a.label))return createVNode$1("div",{class:[bem$1j("label"),a.labelClass]},[n.label?n.label():a.label])},s=()=>{var d;if(n.title||isDef$1(a.title)){const f=(d=n.title)==null?void 0:d.call(n);return Array.isArray(f)&&f.length===0?void 0:createVNode$1("div",{class:[bem$1j("title"),a.titleClass],style:a.titleStyle},[f||createVNode$1("span",null,[a.title]),o()])}},l=()=>{const d=n.value||n.default;if(d||isDef$1(a.value))return createVNode$1("div",{class:[bem$1j("value"),a.valueClass]},[d?d():createVNode$1("span",null,[a.value])])},c=()=>{if(n.icon)return n.icon();if(a.icon)return createVNode$1(Icon,{name:a.icon,class:bem$1j("left-icon"),classPrefix:a.iconPrefix},null)},u=()=>{if(n["right-icon"])return n["right-icon"]();if(a.isLink){const d=a.arrowDirection&&a.arrowDirection!=="right"?`arrow-${a.arrowDirection}`:"arrow";return createVNode$1(Icon,{name:d,class:bem$1j("right-icon")},null)}};return()=>{var d;const{tag:f,size:v,center:g,border:y,isLink:_,required:S}=a,x=(d=a.clickable)!=null?d:_,T={center:g,required:!!S,clickable:x,borderless:!y};return v&&(T[v]=!!v),createVNode$1(f,{class:bem$1j(T),role:x?"button":void 0,tabindex:x?0:void 0,onClick:r},{default:()=>{var w;return[c(),s(),l(),u(),(w=n.extra)==null?void 0:w.call(n)]}})}}});const Cell=withInstall(stdin_default$1u),[name$1m,bem$1i]=createNamespace("form"),formProps={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:numericProp,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:truthProp,showErrorMessage:truthProp,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var stdin_default$1t=defineComponent({name:name$1m,props:formProps,emits:["submit","failed"],setup(a,{emit:n,slots:r}){const{children:o,linkChildren:s}=useChildren(FORM_KEY),l=T=>T?o.filter(w=>T.includes(w.name)):o,c=T=>new Promise((w,E)=>{const P=[];l(T).reduce((L,$)=>L.then(()=>{if(!P.length)return $.validate().then(O=>{O&&P.push(O)})}),Promise.resolve()).then(()=>{P.length?E(P):w()})}),u=T=>new Promise((w,E)=>{const P=l(T);Promise.all(P.map(D=>D.validate())).then(D=>{D=D.filter(Boolean),D.length?E(D):w()})}),d=T=>{const w=o.find(E=>E.name===T);return w?new Promise((E,P)=>{w.validate().then(D=>{D?P(D):E()})}):Promise.reject()},f=T=>typeof T=="string"?d(T):a.validateFirst?c(T):u(T),v=T=>{typeof T=="string"&&(T=[T]),l(T).forEach(E=>{E.resetValidation()})},g=()=>o.reduce((T,w)=>(T[w.name]=w.getValidationStatus(),T),{}),y=(T,w)=>{o.some(E=>E.name===T?(E.$el.scrollIntoView(w),!0):!1)},_=()=>o.reduce((T,w)=>(w.name!==void 0&&(T[w.name]=w.formValue.value),T),{}),S=()=>{const T=_();f().then(()=>n("submit",T)).catch(w=>{n("failed",{values:T,errors:w});const{scrollToError:E,scrollToErrorPosition:P}=a;E&&w[0].name&&y(w[0].name,P?{block:P}:void 0)})},x=T=>{preventDefault$1(T),S()};return s({props:a}),useExpose({submit:S,validate:f,getValues:_,scrollToField:y,resetValidation:v,getValidationStatus:g}),()=>{var T;return createVNode$1("form",{class:bem$1i(),onSubmit:x},[(T=r.default)==null?void 0:T.call(r)])}}});const Form=withInstall(stdin_default$1t);function isEmptyValue$1(a){return Array.isArray(a)?!a.length:a===0?!1:!a}function runSyncRule(a,n){if(isEmptyValue$1(a)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(a)))}function runRuleValidator(a,n){return new Promise(r=>{const o=n.validator(a,n);if(isPromise(o)){o.then(r);return}r(o)})}function getRuleMessage(a,n){const{message:r}=n;return isFunction$1(r)?r(a,n):r||""}function startComposing({target:a}){a.composing=!0}function endComposing({target:a}){a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}function resizeTextarea(a,n){const r=getRootScrollTop();a.style.height="auto";let o=a.scrollHeight;if(isObject$4(n)){const{maxHeight:s,minHeight:l}=n;s!==void 0&&(o=Math.min(o,s)),l!==void 0&&(o=Math.max(o,l))}o&&(a.style.height=`${o}px`,setRootScrollTop(r))}function mapInputType(a,n){return a==="number"&&(a="text",n??(n="decimal")),a==="digit"&&(a="tel",n??(n="numeric")),{type:a,inputmode:n}}function getStringLength(a){return[...a].length}function cutString(a,n){return[...a].slice(0,n).join("")}const[name$1l,bem$1h]=createNamespace("field"),fieldSharedProps={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:numericProp,max:Number,min:Number,formatter:Function,clearIcon:makeStringProp("clear"),modelValue:makeNumericProp(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:makeStringProp("focus"),formatTrigger:makeStringProp("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},fieldProps=extend$1({},cellSharedProps,fieldSharedProps,{rows:numericProp,type:makeStringProp("text"),rules:Array,autosize:[Boolean,Object],labelWidth:numericProp,labelClass:unknownProp,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var stdin_default$1s=defineComponent({name:name$1l,props:fieldProps,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(a,{emit:n,slots:r}){const o=useId(),s=reactive({status:"unvalidated",focused:!1,validateMessage:""}),l=ref(),c=ref(),u=ref(),{parent:d}=useParent(FORM_KEY),f=()=>{var oe;return String((oe=a.modelValue)!=null?oe:"")},v=oe=>{if(isDef$1(a[oe]))return a[oe];if(d&&isDef$1(d.props[oe]))return d.props[oe]},g=computed(()=>{const oe=v("readonly");if(a.clearable&&!oe){const me=f()!=="",_e=a.clearTrigger==="always"||a.clearTrigger==="focus"&&s.focused;return me&&_e}return!1}),y=computed(()=>u.value&&r.input?u.value():a.modelValue),_=computed(()=>{var oe;const me=v("required");return me==="auto"?(oe=a.rules)==null?void 0:oe.some(_e=>_e.required):me}),S=oe=>oe.reduce((me,_e)=>me.then(()=>{if(s.status==="failed")return;let{value:Te}=y;if(_e.formatter&&(Te=_e.formatter(Te,_e)),!runSyncRule(Te,_e)){s.status="failed",s.validateMessage=getRuleMessage(Te,_e);return}if(_e.validator)return isEmptyValue$1(Te)&&_e.validateEmpty===!1?void 0:runRuleValidator(Te,_e).then(Le=>{Le&&typeof Le=="string"?(s.status="failed",s.validateMessage=Le):Le===!1&&(s.status="failed",s.validateMessage=getRuleMessage(Te,_e))})}),Promise.resolve()),x=()=>{s.status="unvalidated",s.validateMessage=""},T=()=>n("endValidate",{status:s.status,message:s.validateMessage}),w=(oe=a.rules)=>new Promise(me=>{x(),oe?(n("startValidate"),S(oe).then(()=>{s.status==="failed"?(me({name:a.name,message:s.validateMessage}),T()):(s.status="passed",me(),T())})):me()}),E=oe=>{if(d&&a.rules){const{validateTrigger:me}=d.props,_e=toArray(me).includes(oe),Te=a.rules.filter(Le=>Le.trigger?toArray(Le.trigger).includes(oe):_e);Te.length&&w(Te)}},P=oe=>{var me;const{maxlength:_e}=a;if(isDef$1(_e)&&getStringLength(oe)>+_e){const Te=f();if(Te&&getStringLength(Te)===+_e)return Te;const Le=(me=l.value)==null?void 0:me.selectionEnd;if(s.focused&&Le){const Ge=[...oe],se=Ge.length-+_e;return Ge.splice(Le-se,se),Ge.join("")}return cutString(oe,+_e)}return oe},D=(oe,me="onChange")=>{var _e,Te;const Le=oe;oe=P(oe);const Ge=getStringLength(Le)-getStringLength(oe);if(a.type==="number"||a.type==="digit"){const J=a.type==="number";oe=formatNumber(oe,J,J),me==="onBlur"&&oe!==""&&(a.min!==void 0||a.max!==void 0)&&(oe=clamp$2(+oe,(_e=a.min)!=null?_e:-1/0,(Te=a.max)!=null?Te:1/0).toString())}let se=0;if(a.formatter&&me===a.formatTrigger){const{formatter:J,maxlength:xe}=a;if(oe=J(oe),isDef$1(xe)&&getStringLength(oe)>+xe&&(oe=cutString(oe,+xe)),l.value&&s.focused){const{selectionEnd:De}=l.value,Ae=cutString(Le,De);se=getStringLength(J(Ae))-getStringLength(Ae)}}if(l.value&&l.value.value!==oe)if(s.focused){let{selectionStart:J,selectionEnd:xe}=l.value;if(l.value.value=oe,isDef$1(J)&&isDef$1(xe)){const De=getStringLength(oe);Ge?(J-=Ge,xe-=Ge):se&&(J+=se,xe+=se),l.value.setSelectionRange(Math.min(J,De),Math.min(xe,De))}}else l.value.value=oe;oe!==a.modelValue&&n("update:modelValue",oe)},L=oe=>{oe.target.composing||D(oe.target.value)},$=()=>{var oe;return(oe=l.value)==null?void 0:oe.blur()},O=()=>{var oe;return(oe=l.value)==null?void 0:oe.focus()},B=()=>{const oe=l.value;a.type==="textarea"&&a.autosize&&oe&&resizeTextarea(oe,a.autosize)},V=oe=>{s.focused=!0,n("focus",oe),nextTick(B),v("readonly")&&$()},F=oe=>{s.focused=!1,D(f(),"onBlur"),n("blur",oe),!v("readonly")&&(E("onBlur"),nextTick(B),resetScroll())},U=oe=>n("clickInput",oe),G=oe=>n("clickLeftIcon",oe),W=oe=>n("clickRightIcon",oe),j=oe=>{preventDefault$1(oe),n("update:modelValue",""),n("clear",oe)},K=computed(()=>{if(typeof a.error=="boolean")return a.error;if(d&&d.props.showError&&s.status==="failed")return!0}),q=computed(()=>{const oe=v("labelWidth"),me=v("labelAlign");if(oe&&me!=="top")return{width:addUnit(oe)}}),ie=oe=>{oe.keyCode===13&&(!(d&&d.props.submitOnEnter)&&a.type!=="textarea"&&preventDefault$1(oe),a.type==="search"&&$()),n("keypress",oe)},ee=()=>a.id||`${o}-input`,he=()=>s.status,pe=()=>{const oe=bem$1h("control",[v("inputAlign"),{error:K.value,custom:!!r.input,"min-height":a.type==="textarea"&&!a.autosize}]);if(r.input)return createVNode$1("div",{class:oe,onClick:U},[r.input()]);const me={id:ee(),ref:l,name:a.name,rows:a.rows!==void 0?+a.rows:void 0,class:oe,disabled:v("disabled"),readonly:v("readonly"),autofocus:a.autofocus,placeholder:a.placeholder,autocomplete:a.autocomplete,autocapitalize:a.autocapitalize,autocorrect:a.autocorrect,enterkeyhint:a.enterkeyhint,spellcheck:a.spellcheck,"aria-labelledby":a.label?`${o}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:F,onFocus:V,onInput:L,onClick:U,onChange:endComposing,onKeypress:ie,onCompositionend:endComposing,onCompositionstart:startComposing};return a.type==="textarea"?createVNode$1("textarea",mergeProps(me,{inputmode:a.inputmode}),null):createVNode$1("input",mergeProps(mapInputType(a.type,a.inputmode),me),null)},ce=()=>{const oe=r["left-icon"];if(a.leftIcon||oe)return createVNode$1("div",{class:bem$1h("left-icon"),onClick:G},[oe?oe():createVNode$1(Icon,{name:a.leftIcon,classPrefix:a.iconPrefix},null)])},ye=()=>{const oe=r["right-icon"];if(a.rightIcon||oe)return createVNode$1("div",{class:bem$1h("right-icon"),onClick:W},[oe?oe():createVNode$1(Icon,{name:a.rightIcon,classPrefix:a.iconPrefix},null)])},we=()=>{if(a.showWordLimit&&a.maxlength){const oe=getStringLength(f());return createVNode$1("div",{class:bem$1h("word-limit")},[createVNode$1("span",{class:bem$1h("word-num")},[oe]),createTextVNode("/"),a.maxlength])}},ge=()=>{if(d&&d.props.showErrorMessage===!1)return;const oe=a.errorMessage||s.validateMessage;if(oe){const me=r["error-message"],_e=v("errorMessageAlign");return createVNode$1("div",{class:bem$1h("error-message",_e)},[me?me({message:oe}):oe])}},Se=()=>{const oe=v("labelWidth"),me=v("labelAlign"),_e=v("colon")?":":"";if(r.label)return[r.label(),_e];if(a.label)return createVNode$1("label",{id:`${o}-label`,for:r.input?void 0:ee(),"data-allow-mismatch":"attribute",onClick:Te=>{preventDefault$1(Te),O()},style:me==="top"&&oe?{width:addUnit(oe)}:void 0},[a.label+_e])},$e=()=>[createVNode$1("div",{class:bem$1h("body")},[pe(),g.value&&createVNode$1(Icon,{ref:c,name:a.clearIcon,class:bem$1h("clear")},null),ye(),r.button&&createVNode$1("div",{class:bem$1h("button")},[r.button()])]),we(),ge()];return useExpose({blur:$,focus:O,validate:w,formValue:y,resetValidation:x,getValidationStatus:he}),provide(CUSTOM_FIELD_INJECTION_KEY,{customValue:u,resetValidation:x,validateWithTrigger:E}),watch(()=>a.modelValue,()=>{D(f()),x(),E("onChange"),nextTick(B)}),onMounted(()=>{D(f(),a.formatTrigger),nextTick(B)}),useEventListener("touchstart",j,{target:computed(()=>{var oe;return(oe=c.value)==null?void 0:oe.$el})}),()=>{const oe=v("disabled"),me=v("labelAlign"),_e=ce(),Te=()=>{const Le=Se();return me==="top"?[_e,Le].filter(Boolean):Le||[]};return createVNode$1(Cell,{size:a.size,class:bem$1h({error:K.value,disabled:oe,[`label-${me}`]:me}),center:a.center,border:a.border,isLink:a.isLink,clickable:a.clickable,titleStyle:q.value,valueClass:bem$1h("value"),titleClass:[bem$1h("label",[me,{required:_.value}]),a.labelClass],arrowDirection:a.arrowDirection},{icon:_e&&me!=="top"?()=>_e:null,title:Te,value:$e,extra:r.extra})}}});const Field=withInstall(stdin_default$1s);let lockCount=0;function lockClick(a){a?(lockCount||document.body.classList.add("van-toast--unclickable"),lockCount++):lockCount&&(lockCount--,lockCount||document.body.classList.remove("van-toast--unclickable"))}const[name$1k,bem$1g]=createNamespace("toast"),popupInheritProps$1=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],toastProps={icon:String,show:Boolean,type:makeStringProp("text"),overlay:Boolean,message:numericProp,iconSize:numericProp,duration:makeNumberProp(2e3),position:makeStringProp("middle"),teleport:[String,Object],wordBreak:String,className:unknownProp,iconPrefix:String,transition:makeStringProp("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:unknownProp,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:numericProp};var stdin_default$1r=defineComponent({name:name$1k,props:toastProps,emits:["update:show"],setup(a,{emit:n,slots:r}){let o,s=!1;const l=()=>{const g=a.show&&a.forbidClick;s!==g&&(s=g,lockClick(s))},c=g=>n("update:show",g),u=()=>{a.closeOnClick&&c(!1)},d=()=>clearTimeout(o),f=()=>{const{icon:g,type:y,iconSize:_,iconPrefix:S,loadingType:x}=a;if(g||y==="success"||y==="fail")return createVNode$1(Icon,{name:g||y,size:_,class:bem$1g("icon"),classPrefix:S},null);if(y==="loading")return createVNode$1(Loading,{class:bem$1g("loading"),size:_,type:x},null)},v=()=>{const{type:g,message:y}=a;if(r.message)return createVNode$1("div",{class:bem$1g("text")},[r.message()]);if(isDef$1(y)&&y!=="")return g==="html"?createVNode$1("div",{key:0,class:bem$1g("text"),innerHTML:String(y)},null):createVNode$1("div",{class:bem$1g("text")},[y])};return watch(()=>[a.show,a.forbidClick],l),watch(()=>[a.show,a.type,a.message,a.duration],()=>{d(),a.show&&a.duration>0&&(o=setTimeout(()=>{c(!1)},a.duration))}),onMounted(l),onUnmounted(l),()=>createVNode$1(Popup,mergeProps({class:[bem$1g([a.position,a.wordBreak==="normal"?"break-normal":a.wordBreak,{[a.type]:!a.icon}]),a.className],lockScroll:!1,onClick:u,onClosed:d,"onUpdate:show":c},pick(a,popupInheritProps$1)),{default:()=>[f(),v()]})}});function usePopupState(){const a=reactive({show:!1}),n=s=>{a.show=s},r=s=>{extend$1(a,s,{transitionAppear:!0}),n(!0)},o=()=>n(!1);return useExpose({open:r,close:o,toggle:n}),{open:r,close:o,state:a,toggle:n}}function mountComponent(a){const n=createApp(a),r=document.createElement("div");return document.body.appendChild(r),{instance:n.mount(r),unmount(){n.unmount(),document.body.removeChild(r)}}}const defaultOptions={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let queue=[],allowMultiple=!1,currentOptions=extend$1({},defaultOptions);const defaultOptionsMap=new Map;function parseOptions(a){return isObject$4(a)?a:{message:a}}function createInstance(){const{instance:a,unmount:n}=mountComponent({setup(){const r=ref(""),{open:o,state:s,close:l,toggle:c}=usePopupState(),u=()=>{},d=()=>createVNode$1(stdin_default$1r,mergeProps(s,{onClosed:u,"onUpdate:show":c}),null);return watch(r,f=>{s.message=f}),getCurrentInstance().render=d,{open:o,close:l,message:r}}});return a}function getInstance(){if(!queue.length||allowMultiple){const a=createInstance();queue.push(a)}return queue[queue.length-1]}function showToast(a={}){if(!inBrowser$1)return{};const n=getInstance(),r=parseOptions(a);return n.open(extend$1({},currentOptions,defaultOptionsMap.get(r.type||currentOptions.type),r)),n}const Toast=withInstall(stdin_default$1r),[name$1j,bem$1f]=createNamespace("switch"),switchProps={size:numericProp,loading:Boolean,disabled:Boolean,modelValue:unknownProp,activeColor:String,inactiveColor:String,activeValue:{type:unknownProp,default:!0},inactiveValue:{type:unknownProp,default:!1}};var stdin_default$1q=defineComponent({name:name$1j,props:switchProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const o=()=>a.modelValue===a.activeValue,s=()=>{if(!a.disabled&&!a.loading){const c=o()?a.inactiveValue:a.activeValue;n("update:modelValue",c),n("change",c)}},l=()=>{if(a.loading){const c=o()?a.activeColor:a.inactiveColor;return createVNode$1(Loading,{class:bem$1f("loading"),color:c},null)}if(r.node)return r.node()};return useCustomFieldValue(()=>a.modelValue),()=>{var c;const{size:u,loading:d,disabled:f,activeColor:v,inactiveColor:g}=a,y=o(),_={fontSize:addUnit(u),backgroundColor:y?v:g};return createVNode$1("div",{role:"switch",class:bem$1f({on:y,loading:d,disabled:f}),style:_,tabindex:f?void 0:0,"aria-checked":y,onClick:s},[createVNode$1("div",{class:bem$1f("node")},[l()]),(c=r.background)==null?void 0:c.call(r)])}}});const Switch=withInstall(stdin_default$1q),[name$1i,bem$1e]=createNamespace("address-edit-detail"),t$j=createNamespace("address-edit")[2];var stdin_default$1p=defineComponent({name:name$1i,props:{show:Boolean,rows:numericProp,value:String,rules:Array,focused:Boolean,maxlength:numericProp,searchResult:Array,showSearchResult:Boolean},emits:["blur","focus","input","selectSearch"],setup(a,{emit:n}){const r=ref(),o=()=>a.focused&&a.searchResult&&a.showSearchResult,s=f=>{n("selectSearch",f),n("input",`${f.address||""} ${f.name||""}`.trim())},l=()=>{if(!o())return;const{searchResult:f}=a;return f.map(v=>createVNode$1(Cell,{clickable:!0,key:(v.name||"")+(v.address||""),icon:"location-o",title:v.name,label:v.address,class:bem$1e("search-item"),border:!1,onClick:()=>s(v)},null))},c=f=>n("blur",f),u=f=>n("focus",f),d=f=>n("input",f);return()=>{if(a.show)return createVNode$1(Fragment,null,[createVNode$1(Field,{autosize:!0,clearable:!0,ref:r,class:bem$1e(),rows:a.rows,type:"textarea",rules:a.rules,label:t$j("addressDetail"),border:!o(),maxlength:a.maxlength,modelValue:a.value,placeholder:t$j("addressDetail"),onBlur:c,onFocus:u,"onUpdate:modelValue":d},null),l()])}}});const[name$1h,bem$1d,t$i]=createNamespace("address-edit"),DEFAULT_DATA={name:"",tel:"",city:"",county:"",country:"",province:"",areaCode:"",isDefault:!1,addressDetail:""},addressEditProps={areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showArea:truthProp,showDetail:truthProp,showDelete:Boolean,disableArea:Boolean,searchResult:Array,telMaxlength:numericProp,showSetDefault:Boolean,saveButtonText:String,areaPlaceholder:String,deleteButtonText:String,showSearchResult:Boolean,detailRows:makeNumericProp(1),detailMaxlength:makeNumericProp(200),areaColumnsPlaceholder:makeArrayProp(),addressInfo:{type:Object,default:()=>extend$1({},DEFAULT_DATA)},telValidator:{type:Function,default:isMobile}};var stdin_default$1o=defineComponent({name:name$1h,props:addressEditProps,emits:["save","focus","change","delete","clickArea","changeArea","changeDetail","selectSearch","changeDefault"],setup(a,{emit:n,slots:r}){const o=ref(),s=reactive({}),l=ref(!1),c=ref(!1),u=computed(()=>isObject$4(a.areaList)&&Object.keys(a.areaList).length),d=computed(()=>{const{province:$,city:O,county:B,areaCode:V}=s;if(V){const F=[$,O,B];return $&&$===O&&F.splice(1,1),F.filter(Boolean).join("/")}return""}),f=computed(()=>{var $;return(($=a.searchResult)==null?void 0:$.length)&&c.value}),v=$=>{c.value=$==="addressDetail",n("focus",$)},g=($,O)=>{n("change",{key:$,value:O})},y=computed(()=>{const{validator:$,telValidator:O}=a,B=(V,F)=>({validator:U=>{if($){const G=$(V,U);if(G)return G}return U?!0:F}});return{name:[B("name",t$i("nameEmpty"))],tel:[B("tel",t$i("telInvalid")),{validator:O,message:t$i("telInvalid")}],areaCode:[B("areaCode",t$i("areaEmpty"))],addressDetail:[B("addressDetail",t$i("addressEmpty"))]}}),_=()=>n("save",s),S=$=>{s.addressDetail=$,n("changeDetail",$)},x=$=>{s.province=$[0].text,s.city=$[1].text,s.county=$[2].text},T=({selectedValues:$,selectedOptions:O})=>{$.some(B=>B===AREA_EMPTY_CODE)?showToast(t$i("areaEmpty")):(l.value=!1,x(O),n("changeArea",O))},w=()=>n("delete",s),E=$=>{s.areaCode=$||""},P=()=>{setTimeout(()=>{c.value=!1})},D=$=>{s.addressDetail=$},L=()=>{if(a.showSetDefault){const $={"right-icon":()=>createVNode$1(Switch,{modelValue:s.isDefault,"onUpdate:modelValue":O=>s.isDefault=O,onChange:O=>n("changeDefault",O)},null)};return withDirectives(createVNode$1(Cell,{center:!0,border:!1,title:t$i("defaultAddress"),class:bem$1d("default")},$),[[vShow,!f.value]])}};return useExpose({setAreaCode:E,setAddressDetail:D}),watch(()=>a.addressInfo,$=>{extend$1(s,DEFAULT_DATA,$),nextTick(()=>{var O;const B=(O=o.value)==null?void 0:O.getSelectedOptions();B&&B.every(V=>V&&V.value!==AREA_EMPTY_CODE)&&x(B)})},{deep:!0,immediate:!0}),()=>{const{disableArea:$}=a;return createVNode$1(Form,{class:bem$1d(),onSubmit:_},{default:()=>{var O;return[createVNode$1("div",{class:bem$1d("fields")},[createVNode$1(Field,{modelValue:s.name,"onUpdate:modelValue":[B=>s.name=B,B=>g("name",B)],clearable:!0,label:t$i("name"),rules:y.value.name,placeholder:t$i("name"),onFocus:()=>v("name")},null),createVNode$1(Field,{modelValue:s.tel,"onUpdate:modelValue":[B=>s.tel=B,B=>g("tel",B)],clearable:!0,type:"tel",label:t$i("tel"),rules:y.value.tel,maxlength:a.telMaxlength,placeholder:t$i("tel"),onFocus:()=>v("tel")},null),withDirectives(createVNode$1(Field,{readonly:!0,label:t$i("area"),"is-link":!$,modelValue:d.value,rules:a.showArea?y.value.areaCode:void 0,placeholder:a.areaPlaceholder||t$i("area"),onFocus:()=>v("areaCode"),onClick:()=>{n("clickArea"),l.value=!$}},null),[[vShow,a.showArea]]),createVNode$1(stdin_default$1p,{show:a.showDetail,rows:a.detailRows,rules:y.value.addressDetail,value:s.addressDetail,focused:c.value,maxlength:a.detailMaxlength,searchResult:a.searchResult,showSearchResult:a.showSearchResult,onBlur:P,onFocus:()=>v("addressDetail"),onInput:S,onSelectSearch:B=>n("selectSearch",B)},null),(O=r.default)==null?void 0:O.call(r)]),L(),withDirectives(createVNode$1("div",{class:bem$1d("buttons")},[createVNode$1(Button,{block:!0,round:!0,type:"primary",text:a.saveButtonText||t$i("save"),class:bem$1d("button"),loading:a.isSaving,nativeType:"submit"},null),a.showDelete&&createVNode$1(Button,{block:!0,round:!0,class:bem$1d("button"),loading:a.isDeleting,text:a.deleteButtonText||t$i("delete"),onClick:w},null)]),[[vShow,!f.value]]),createVNode$1(Popup,{show:l.value,"onUpdate:show":B=>l.value=B,round:!0,teleport:"body",position:"bottom",lazyRender:!1},{default:()=>[createVNode$1(Area,{modelValue:s.areaCode,"onUpdate:modelValue":B=>s.areaCode=B,ref:o,loading:!u.value,areaList:a.areaList,columnsPlaceholder:a.areaColumnsPlaceholder,onConfirm:T,onCancel:()=>{l.value=!1}},null)]})]}})}}});const AddressEdit=withInstall(stdin_default$1o),[name$1g,bem$1c]=createNamespace("radio-group"),radioGroupProps={shape:String,disabled:Boolean,iconSize:numericProp,direction:String,modelValue:unknownProp,checkedColor:String},RADIO_KEY=Symbol(name$1g);var stdin_default$1n=defineComponent({name:name$1g,props:radioGroupProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{linkChildren:o}=useChildren(RADIO_KEY),s=l=>n("update:modelValue",l);return watch(()=>a.modelValue,l=>n("change",l)),o({props:a,updateValue:s}),useCustomFieldValue(()=>a.modelValue),()=>{var l;return createVNode$1("div",{class:bem$1c([a.direction]),role:"radiogroup"},[(l=r.default)==null?void 0:l.call(r)])}}});const RadioGroup=withInstall(stdin_default$1n),[name$1f,bem$1b]=createNamespace("checkbox-group"),checkboxGroupProps={max:numericProp,shape:makeStringProp("round"),disabled:Boolean,iconSize:numericProp,direction:String,modelValue:makeArrayProp(),checkedColor:String},CHECKBOX_GROUP_KEY=Symbol(name$1f);var stdin_default$1m=defineComponent({name:name$1f,props:checkboxGroupProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{children:o,linkChildren:s}=useChildren(CHECKBOX_GROUP_KEY),l=u=>n("update:modelValue",u),c=(u={})=>{typeof u=="boolean"&&(u={checked:u});const{checked:d,skipDisabled:f}=u,g=o.filter(y=>y.props.bindGroup?y.props.disabled&&f?y.checked.value:d??!y.checked.value:!1).map(y=>y.name);l(g)};return watch(()=>a.modelValue,u=>n("change",u)),useExpose({toggleAll:c}),useCustomFieldValue(()=>a.modelValue),s({props:a,updateValue:l}),()=>{var u;return createVNode$1("div",{class:bem$1b([a.direction])},[(u=r.default)==null?void 0:u.call(r)])}}});const CheckboxGroup=withInstall(stdin_default$1m),[name$1e,bem$1a]=createNamespace("tag"),tagProps={size:String,mark:Boolean,show:truthProp,type:makeStringProp("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var stdin_default$1l=defineComponent({name:name$1e,props:tagProps,emits:["close"],setup(a,{slots:n,emit:r}){const o=c=>{c.stopPropagation(),r("close",c)},s=()=>a.plain?{color:a.textColor||a.color,borderColor:a.color}:{color:a.textColor,background:a.color},l=()=>{var c;const{type:u,mark:d,plain:f,round:v,size:g,closeable:y}=a,_={mark:d,plain:f,round:v};g&&(_[g]=g);const S=y&&createVNode$1(Icon,{name:"cross",class:[bem$1a("close"),HAPTICS_FEEDBACK],onClick:o},null);return createVNode$1("span",{style:s(),class:bem$1a([_,u])},[(c=n.default)==null?void 0:c.call(n),S])};return()=>createVNode$1(Transition,{name:a.closeable?"van-fade":void 0},{default:()=>[a.show?l():null]})}});const Tag=withInstall(stdin_default$1l),checkerProps={name:unknownProp,disabled:Boolean,iconSize:numericProp,modelValue:unknownProp,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var stdin_default$1k=defineComponent({props:extend$1({},checkerProps,{bem:makeRequiredProp(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:truthProp,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(a,{emit:n,slots:r}){const o=ref(),s=y=>{if(a.parent&&a.bindGroup)return a.parent.props[y]},l=computed(()=>{if(a.parent&&a.bindGroup){const y=s("disabled")||a.disabled;if(a.role==="checkbox"){const _=s("modelValue").length,S=s("max"),x=S&&_>=+S;return y||x&&!a.checked}return y}return a.disabled}),c=computed(()=>s("direction")),u=computed(()=>{const y=a.checkedColor||s("checkedColor");if(y&&a.checked&&!l.value)return{borderColor:y,backgroundColor:y}}),d=computed(()=>a.shape||s("shape")||"round"),f=y=>{const{target:_}=y,S=o.value,x=S===_||(S==null?void 0:S.contains(_));!l.value&&(x||!a.labelDisabled)&&n("toggle"),n("click",y)},v=()=>{var y,_;const{bem:S,checked:x,indeterminate:T}=a,w=a.iconSize||s("iconSize");return createVNode$1("div",{ref:o,class:S("icon",[d.value,{disabled:l.value,checked:x,indeterminate:T}]),style:d.value!=="dot"?{fontSize:addUnit(w)}:{width:addUnit(w),height:addUnit(w),borderColor:(y=u.value)==null?void 0:y.borderColor}},[r.icon?r.icon({checked:x,disabled:l.value}):d.value!=="dot"?createVNode$1(Icon,{name:T?"minus":"success",style:u.value},null):createVNode$1("div",{class:S("icon--dot__icon"),style:{backgroundColor:(_=u.value)==null?void 0:_.backgroundColor}},null)])},g=()=>{const{checked:y}=a;if(r.default)return createVNode$1("span",{class:a.bem("label",[a.labelPosition,{disabled:l.value}])},[r.default({checked:y,disabled:l.value})])};return()=>{const y=a.labelPosition==="left"?[g(),v()]:[v(),g()];return createVNode$1("div",{role:a.role,class:a.bem([{disabled:l.value,"label-disabled":a.labelDisabled},c.value]),tabindex:l.value?void 0:0,"aria-checked":a.checked,onClick:f},[y])}}});const radioProps=extend$1({},checkerProps,{shape:String}),[name$1d,bem$19]=createNamespace("radio");var stdin_default$1j=defineComponent({name:name$1d,props:radioProps,emits:["update:modelValue"],setup(a,{emit:n,slots:r}){const{parent:o}=useParent(RADIO_KEY),s=()=>(o?o.props.modelValue:a.modelValue)===a.name,l=()=>{o?o.updateValue(a.name):n("update:modelValue",a.name)};return()=>createVNode$1(stdin_default$1k,mergeProps({bem:bem$19,role:"radio",parent:o,checked:s(),onToggle:l},a),pick(r,["default","icon"]))}});const Radio=withInstall(stdin_default$1j),[name$1c,bem$18]=createNamespace("checkbox"),checkboxProps=extend$1({},checkerProps,{shape:String,bindGroup:truthProp,indeterminate:{type:Boolean,default:null}});var stdin_default$1i=defineComponent({name:name$1c,props:checkboxProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{parent:o}=useParent(CHECKBOX_GROUP_KEY),s=u=>{const{name:d}=a,{max:f,modelValue:v}=o.props,g=v.slice();if(u)!(f&&g.length>=+f)&&!g.includes(d)&&(g.push(d),a.bindGroup&&o.updateValue(g));else{const y=g.indexOf(d);y!==-1&&(g.splice(y,1),a.bindGroup&&o.updateValue(g))}},l=computed(()=>o&&a.bindGroup?o.props.modelValue.indexOf(a.name)!==-1:!!a.modelValue),c=(u=!l.value)=>{o&&a.bindGroup?s(u):n("update:modelValue",u),a.indeterminate!==null&&n("change",u)};return watch(()=>a.modelValue,u=>{a.indeterminate===null&&n("change",u)}),useExpose({toggle:c,props:a,checked:l}),useCustomFieldValue(()=>a.modelValue),()=>createVNode$1(stdin_default$1k,mergeProps({bem:bem$18,role:"checkbox",parent:o,checked:l.value,onToggle:c},a),pick(r,["default","icon"]))}});const Checkbox=withInstall(stdin_default$1i),[name$1b,bem$17]=createNamespace("address-item");var stdin_default$1h=defineComponent({name:name$1b,props:{address:makeRequiredProp(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:makeStringProp("edit")},emits:["edit","click","select"],setup(a,{slots:n,emit:r}){const o=u=>{a.switchable&&r("select"),r("click",u)},s=()=>createVNode$1(Icon,{name:a.rightIcon,class:bem$17("edit"),onClick:u=>{u.stopPropagation(),r("edit"),r("click",u)}},null),l=()=>{if(n.tag)return n.tag(a.address);if(a.address.isDefault&&a.defaultTagText)return createVNode$1(Tag,{type:"primary",round:!0,class:bem$17("tag")},{default:()=>[a.defaultTagText]})},c=()=>{const{address:u,disabled:d,switchable:f,singleChoice:v}=a,g=[createVNode$1("div",{class:bem$17("name")},[`${u.name} ${u.tel}`,l()]),createVNode$1("div",{class:bem$17("address")},[u.address])];return f&&!d?v?createVNode$1(Radio,{name:u.id,iconSize:18},{default:()=>[g]}):createVNode$1(Checkbox,{name:u.id,iconSize:18},{default:()=>[g]}):g};return()=>{var u;const{disabled:d}=a;return createVNode$1("div",{class:bem$17({disabled:d}),onClick:o},[createVNode$1(Cell,{border:!1,titleClass:bem$17("title")},{title:c,"right-icon":s}),(u=n.bottom)==null?void 0:u.call(n,extend$1({},a.address,{disabled:d}))])}}});const[name$1a,bem$16,t$h]=createNamespace("address-list"),addressListProps={list:makeArrayProp(),modelValue:[...numericProp,Array],switchable:truthProp,disabledText:String,disabledList:makeArrayProp(),showAddButton:truthProp,addButtonText:String,defaultTagText:String,rightIcon:makeStringProp("edit")};var stdin_default$1g=defineComponent({name:name$1a,props:addressListProps,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(a,{slots:n,emit:r}){const o=computed(()=>!Array.isArray(a.modelValue)),s=(u,d,f)=>{const v=()=>r(f?"editDisabled":"edit",u,d),g=_=>r("clickItem",u,d,{event:_}),y=()=>{if(r(f?"selectDisabled":"select",u,d),!f)if(o.value)r("update:modelValue",u.id);else{const _=a.modelValue;_.includes(u.id)?r("update:modelValue",_.filter(S=>S!==u.id)):r("update:modelValue",[..._,u.id])}};return createVNode$1(stdin_default$1h,{key:u.id,address:u,disabled:f,switchable:a.switchable,singleChoice:o.value,defaultTagText:a.defaultTagText,rightIcon:a.rightIcon,onEdit:v,onClick:g,onSelect:y},{bottom:n["item-bottom"],tag:n.tag})},l=(u,d)=>{if(u)return u.map((f,v)=>s(f,v,d))},c=()=>a.showAddButton?createVNode$1("div",{class:[bem$16("bottom"),"van-safe-area-bottom"]},[createVNode$1(Button,{round:!0,block:!0,type:"primary",text:a.addButtonText||t$h("add"),class:bem$16("add"),onClick:()=>r("add")},null)]):void 0;return()=>{var u,d;const f=l(a.list),v=l(a.disabledList,!0),g=a.disabledText&&createVNode$1("div",{class:bem$16("disabled-text")},[a.disabledText]);return createVNode$1("div",{class:bem$16()},[(u=n.top)==null?void 0:u.call(n),!o.value&&Array.isArray(a.modelValue)?createVNode$1(CheckboxGroup,{modelValue:a.modelValue},{default:()=>[f]}):createVNode$1(RadioGroup,{modelValue:a.modelValue},{default:()=>[f]}),g,v,(d=n.default)==null?void 0:d.call(n),c()])}}});const AddressList=withInstall(stdin_default$1g);function throttle$1(a,n){let r=null,o=0;return function(...s){if(r)return;const l=Date.now()-o,c=()=>{o=Date.now(),r=!1,a.apply(this,s)};l>=n?c():r=setTimeout(c,n)}}const[name$19,bem$15]=createNamespace("back-top"),backTopProps={right:numericProp,bottom:numericProp,zIndex:numericProp,target:[String,Object],offset:makeNumericProp(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var stdin_default$1f=defineComponent({name:name$19,inheritAttrs:!1,props:backTopProps,emits:["click"],setup(a,{emit:n,slots:r,attrs:o}){let s=!1;const l=ref(!1),c=ref(),u=ref(),d=computed(()=>extend$1(getZIndexStyle(a.zIndex),{right:addUnit(a.right),bottom:addUnit(a.bottom)})),f=_=>{var S;n("click",_),(S=u.value)==null||S.scrollTo({top:0,behavior:a.immediate?"auto":"smooth"})},v=()=>{l.value=u.value?getScrollTop(u.value)>=+a.offset:!1},g=()=>{const{target:_}=a;if(typeof _=="string"){const S=document.querySelector(_);if(S)return S}else return _},y=()=>{inBrowser$1&&nextTick(()=>{u.value=a.target?g():getScrollParent$1(c.value),v()})};return useEventListener("scroll",throttle$1(v,100),{target:u}),onMounted(y),onActivated(()=>{s&&(l.value=!0,s=!1)}),onDeactivated(()=>{l.value&&a.teleport&&(l.value=!1,s=!0)}),watch(()=>a.target,y),()=>{const _=createVNode$1("div",mergeProps({ref:a.teleport?void 0:c,class:bem$15({active:l.value}),style:d.value,onClick:f},o),[r.default?r.default():createVNode$1(Icon,{name:"back-top",class:bem$15("icon")},null)]);return a.teleport?[createVNode$1("div",{ref:c,class:bem$15("placeholder")},null),createVNode$1(Teleport,{to:a.teleport},{default:()=>[_]})]:_}}});const BackTop=withInstall(stdin_default$1f);var __async=(a,n,r)=>new Promise((o,s)=>{var l=d=>{try{u(r.next(d))}catch(f){s(f)}},c=d=>{try{u(r.throw(d))}catch(f){s(f)}},u=d=>d.done?o(d.value):Promise.resolve(d.value).then(l,c);u((r=r.apply(a,n)).next())});const barrageProps={top:makeNumericProp(10),rows:makeNumericProp(4),duration:makeNumericProp(4e3),autoPlay:truthProp,delay:makeNumberProp(300),modelValue:makeArrayProp()},[name$18,bem$14]=createNamespace("barrage");var stdin_default$1e=defineComponent({name:name$18,props:barrageProps,emits:["update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(),s=bem$14("item"),l=ref(0),c=[],u=(x,T=a.delay)=>{const w=document.createElement("span");return w.className=s,w.innerText=String(x),w.style.animationDuration=`${a.duration}ms`,w.style.animationDelay=`${T}ms`,w.style.animationName="van-barrage",w.style.animationTimingFunction="linear",w},d=ref(!0),f=ref(a.autoPlay),v=({id:x,text:T},w)=>{var E;const P=u(T,d.value?w*a.delay:void 0);!a.autoPlay&&f.value===!1&&(P.style.animationPlayState="paused"),(E=o.value)==null||E.append(P),l.value++;const D=(l.value-1)%+a.rows*P.offsetHeight+ +a.top;P.style.top=`${D}px`,P.dataset.id=String(x),c.push(P),P.addEventListener("animationend",()=>{n("update:modelValue",[...a.modelValue].filter(L=>String(L.id)!==P.dataset.id))})},g=(x,T)=>{const w=new Map(T.map(E=>[E.id,E]));x.forEach((E,P)=>{w.has(E.id)?w.delete(E.id):v(E,P)}),w.forEach(E=>{const P=c.findIndex(D=>D.dataset.id===String(E.id));P>-1&&(c[P].remove(),c.splice(P,1))}),d.value=!1};watch(()=>a.modelValue.slice(),(x,T)=>g(x??[],T??[]),{deep:!0});const y=ref({});return onMounted(()=>__async(this,null,function*(){var x;y.value["--move-distance"]=`-${(x=o.value)==null?void 0:x.offsetWidth}px`,yield nextTick(),g(a.modelValue,[])})),useExpose({play:()=>{f.value=!0,c.forEach(x=>{x.style.animationPlayState="running"})},pause:()=>{f.value=!1,c.forEach(x=>{x.style.animationPlayState="paused"})}}),()=>{var x;return createVNode$1("div",{class:bem$14(),ref:o,style:y.value},[(x=r.default)==null?void 0:x.call(r)])}}});const Barrage=withInstall(stdin_default$1e),[name$17,bem$13,t$g]=createNamespace("calendar"),formatMonthTitle=a=>t$g("monthTitle",a.getFullYear(),a.getMonth()+1);function compareMonth(a,n){const r=a.getFullYear(),o=n.getFullYear();if(r===o){const s=a.getMonth(),l=n.getMonth();return s===l?0:s>l?1:-1}return r>o?1:-1}function compareDay(a,n){const r=compareMonth(a,n);if(r===0){const o=a.getDate(),s=n.getDate();return o===s?0:o>s?1:-1}return r}const cloneDate=a=>new Date(a),cloneDates=a=>Array.isArray(a)?a.map(cloneDate):cloneDate(a);function getDayByOffset(a,n){const r=cloneDate(a);return r.setDate(r.getDate()+n),r}function getMonthByOffset(a,n){const r=cloneDate(a);return r.setMonth(r.getMonth()+n),r.getDate()!==a.getDate()&&r.setDate(0),r}function getYearByOffset(a,n){const r=cloneDate(a);return r.setFullYear(r.getFullYear()+n),r.getDate()!==a.getDate()&&r.setDate(0),r}const getPrevDay=a=>getDayByOffset(a,-1),getNextDay=a=>getDayByOffset(a,1),getPrevMonth=a=>getMonthByOffset(a,-1),getNextMonth=a=>getMonthByOffset(a,1),getPrevYear=a=>getYearByOffset(a,-1),getNextYear=a=>getYearByOffset(a,1),getToday=()=>{const a=new Date;return a.setHours(0,0,0,0),a};function calcDateNum(a){const n=a[0].getTime();return(a[1].getTime()-n)/(1e3*60*60*24)+1}const sharedProps=extend$1({},pickerSharedProps,{modelValue:makeArrayProp(),filter:Function,formatter:{type:Function,default:(a,n)=>n}}),pickerInheritKeys=Object.keys(pickerSharedProps);function times(a,n){if(a<0)return[];const r=Array(a);let o=-1;for(;++o<a;)r[o]=n(o);return r}const getMonthEndDay=(a,n)=>32-new Date(a,n-1,32).getDate(),genOptions=(a,n,r,o,s,l)=>{const c=times(n-a+1,u=>{const d=padZero(a+u);return o(r,{text:d,value:d})});return s?s(r,c,l):c},formatValueRange=(a,n)=>a.map((r,o)=>{const s=n[o];if(s.length){const l=+s[0].value,c=+s[s.length-1].value;return padZero(clamp$2(+r,l,c))}return r}),[name$16]=createNamespace("calendar-day");var stdin_default$1d=defineComponent({name:name$16,props:{item:makeRequiredProp(Object),color:String,index:Number,offset:makeNumberProp(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(a,{emit:n,slots:r}){const o=computed(()=>{var f;const{item:v,index:g,color:y,offset:_,rowHeight:S}=a,x={height:S};if(v.type==="placeholder")return x.width="100%",x;if(g===0&&(x.marginLeft=`${100*_/7}%`),y)switch(v.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":x.background=y;break;case"middle":x.color=y;break}return _+(((f=v.date)==null?void 0:f.getDate())||1)>28&&(x.marginBottom=0),x}),s=()=>{a.item.type!=="disabled"?n("click",a.item):n("clickDisabledDate",a.item)},l=()=>{const{topInfo:f}=a.item;if(f||r["top-info"])return createVNode$1("div",{class:bem$13("top-info")},[r["top-info"]?r["top-info"](a.item):f])},c=()=>{const{bottomInfo:f}=a.item;if(f||r["bottom-info"])return createVNode$1("div",{class:bem$13("bottom-info")},[r["bottom-info"]?r["bottom-info"](a.item):f])},u=()=>r.text?r.text(a.item):a.item.text,d=()=>{const{item:f,color:v,rowHeight:g}=a,{type:y}=f,_=[l(),u(),c()];return y==="selected"?createVNode$1("div",{class:bem$13("selected-day"),style:{width:g,height:g,background:v}},[_]):_};return()=>{const{type:f,className:v}=a.item;return f==="placeholder"?createVNode$1("div",{class:bem$13("day"),style:o.value},null):createVNode$1("div",{role:"gridcell",style:o.value,class:[bem$13("day",f),v],tabindex:f==="disabled"?void 0:-1,onClick:s},[d()])}}});const[name$15]=createNamespace("calendar-month"),calendarMonthProps={date:makeRequiredProp(Date),type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:numericProp,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var stdin_default$1c=defineComponent({name:name$15,props:calendarMonthProps,emits:["click","clickDisabledDate"],setup(a,{emit:n,slots:r}){const[o,s]=useToggle(),l=ref(),c=ref(),u=useHeight(c),d=computed(()=>formatMonthTitle(a.date)),f=computed(()=>addUnit(a.rowHeight)),v=computed(()=>{const F=a.date.getDate(),G=(a.date.getDay()-F%7+8)%7;return a.firstDayOfWeek?(G+7-a.firstDayOfWeek)%7:G}),g=computed(()=>getMonthEndDay(a.date.getFullYear(),a.date.getMonth()+1)),y=computed(()=>o.value||!a.lazyRender),_=()=>d.value,S=F=>{const U=G=>a.currentDate.some(W=>compareDay(W,G)===0);if(U(F)){const G=getPrevDay(F),W=getNextDay(F),j=U(G),K=U(W);return j&&K?"multiple-middle":j?"end":K?"start":"multiple-selected"}return""},x=F=>{const[U,G]=a.currentDate;if(!U)return"";const W=compareDay(F,U);if(!G)return W===0?"start":"";const j=compareDay(F,G);return a.allowSameDay&&W===0&&j===0?"start-end":W===0?"start":j===0?"end":W>0&&j<0?"middle":""},T=F=>{const{type:U,minDate:G,maxDate:W,currentDate:j}=a;if(G&&compareDay(F,G)<0||W&&compareDay(F,W)>0)return"disabled";if(j===null)return"";if(Array.isArray(j)){if(U==="multiple")return S(F);if(U==="range")return x(F)}else if(U==="single")return compareDay(F,j)===0?"selected":"";return""},w=F=>{if(a.type==="range"){if(F==="start"||F==="end")return t$g(F);if(F==="start-end")return`${t$g("start")}/${t$g("end")}`}},E=()=>{if(a.showMonthTitle)return createVNode$1("div",{class:bem$13("month-title")},[r["month-title"]?r["month-title"]({date:a.date,text:d.value}):d.value])},P=()=>{if(a.showMark&&y.value)return createVNode$1("div",{class:bem$13("month-mark")},[a.date.getMonth()+1])},D=computed(()=>{const F=Math.ceil((g.value+v.value)/7);return Array(F).fill({type:"placeholder"})}),L=computed(()=>{const F=[],U=a.date.getFullYear(),G=a.date.getMonth();for(let W=1;W<=g.value;W++){const j=new Date(U,G,W),K=T(j);let q={date:j,type:K,text:W,bottomInfo:w(K)};a.formatter&&(q=a.formatter(q)),F.push(q)}return F}),$=computed(()=>L.value.filter(F=>F.type==="disabled")),O=(F,U)=>{if(l.value){const G=useRect(l.value),W=D.value.length,K=(Math.ceil((U.getDate()+v.value)/7)-1)*G.height/W;setScrollTop(F,G.top+K+F.scrollTop-useRect(F).top)}},B=(F,U)=>createVNode$1(stdin_default$1d,{item:F,index:U,color:a.color,offset:v.value,rowHeight:f.value,onClick:G=>n("click",G),onClickDisabledDate:G=>n("clickDisabledDate",G)},pick(r,["top-info","bottom-info","text"])),V=()=>createVNode$1("div",{ref:l,role:"grid",class:bem$13("days")},[P(),(y.value?L:D).value.map(B)]);return useExpose({getTitle:_,getHeight:()=>u.value,setVisible:s,scrollToDate:O,disabledDays:$}),()=>createVNode$1("div",{class:bem$13("month"),ref:c},[E(),V()])}});const[name$14]=createNamespace("calendar-header");var stdin_default$1b=defineComponent({name:name$14,props:{date:Date,minDate:Date,maxDate:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number,switchMode:makeStringProp("none")},emits:["clickSubtitle","panelChange"],setup(a,{slots:n,emit:r}){const o=computed(()=>a.date&&a.minDate&&compareMonth(getPrevMonth(a.date),a.minDate)<0),s=computed(()=>a.date&&a.minDate&&compareMonth(getPrevYear(a.date),a.minDate)<0),l=computed(()=>a.date&&a.maxDate&&compareMonth(getNextMonth(a.date),a.maxDate)>0),c=computed(()=>a.date&&a.maxDate&&compareMonth(getNextYear(a.date),a.maxDate)>0),u=()=>{if(a.showTitle){const _=a.title||t$g("title"),S=n.title?n.title():_;return createVNode$1("div",{class:bem$13("header-title")},[S])}},d=_=>r("clickSubtitle",_),f=_=>r("panelChange",_),v=_=>{const S=a.switchMode==="year-month",x=n[_?"next-month":"prev-month"],T=n[_?"next-year":"prev-year"],w=_?l.value:o.value,E=_?c.value:s.value,P=_?"arrow":"arrow-left",D=_?"arrow-double-right":"arrow-double-left",L=()=>f((_?getNextMonth:getPrevMonth)(a.date)),$=()=>f((_?getNextYear:getPrevYear)(a.date)),O=createVNode$1("view",{class:bem$13("header-action",{disabled:w}),onClick:w?void 0:L},[x?x({disabled:w}):createVNode$1(Icon,{class:{[HAPTICS_FEEDBACK]:!w},name:P},null)]),B=S&&createVNode$1("view",{class:bem$13("header-action",{disabled:E}),onClick:E?void 0:$},[T?T({disabled:E}):createVNode$1(Icon,{class:{[HAPTICS_FEEDBACK]:!E},name:D},null)]);return _?[O,B]:[B,O]},g=()=>{if(a.showSubtitle){const _=n.subtitle?n.subtitle({date:a.date,text:a.subtitle}):a.subtitle,S=a.switchMode!=="none";return createVNode$1("div",{class:bem$13("header-subtitle",{"with-switch":S}),onClick:d},[S?[v(),createVNode$1("div",{class:bem$13("header-subtitle-text")},[_]),v(!0)]:_])}},y=()=>{const{firstDayOfWeek:_}=a,S=t$g("weekdays"),x=[...S.slice(_,7),...S.slice(0,_)];return createVNode$1("div",{class:bem$13("weekdays")},[x.map(T=>createVNode$1("span",{class:bem$13("weekday")},[T]))])};return()=>createVNode$1("div",{class:bem$13("header")},[u(),g(),y()])}});const calendarProps={show:Boolean,type:makeStringProp("single"),switchMode:makeStringProp("none"),title:String,color:String,round:truthProp,readonly:Boolean,poppable:truthProp,maxRange:makeNumericProp(null),position:makeStringProp("bottom"),teleport:[String,Object],showMark:truthProp,showTitle:truthProp,formatter:Function,rowHeight:numericProp,confirmText:String,rangePrompt:String,lazyRender:truthProp,showConfirm:truthProp,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:truthProp,closeOnPopstate:truthProp,showRangePrompt:truthProp,confirmDisabledText:String,closeOnClickOverlay:truthProp,safeAreaInsetTop:Boolean,safeAreaInsetBottom:truthProp,minDate:{type:Date,validator:isDate},maxDate:{type:Date,validator:isDate},firstDayOfWeek:{type:numericProp,default:0,validator:a=>a>=0&&a<=6}};var stdin_default$1a=defineComponent({name:name$17,props:calendarProps,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate","panelChange"],setup(a,{emit:n,slots:r}){const o=computed(()=>a.switchMode!=="none"),s=computed(()=>!a.minDate&&!o.value?getToday():a.minDate),l=computed(()=>!a.maxDate&&!o.value?getMonthByOffset(getToday(),6):a.maxDate),c=(ce,ye=s.value,we=l.value)=>ye&&compareDay(ce,ye)===-1?ye:we&&compareDay(ce,we)===1?we:ce,u=(ce=a.defaultDate)=>{const{type:ye,allowSameDay:we}=a;if(ce===null)return ce;const ge=getToday();if(ye==="range"){Array.isArray(ce)||(ce=[]),ce.length===1&&compareDay(ce[0],ge)===1&&(ce=[]);const Se=s.value,$e=l.value,oe=c(ce[0]||ge,Se,$e?we?$e:getPrevDay($e):void 0),me=c(ce[1]||(we?ge:getNextDay(ge)),Se?we?Se:getNextDay(Se):void 0);return[oe,me]}return ye==="multiple"?Array.isArray(ce)?ce.map(Se=>c(Se)):[c(ge)]:((!ce||Array.isArray(ce))&&(ce=ge),c(ce))},d=()=>{const ce=Array.isArray(g.value)?g.value[0]:g.value;return ce||c(getToday())};let f;const v=ref(),g=ref(u()),y=ref(d()),_=ref(),[S,x]=useRefs(),T=computed(()=>a.firstDayOfWeek?+a.firstDayOfWeek%7:0),w=computed(()=>{const ce=[];if(!s.value||!l.value)return ce;const ye=new Date(s.value);ye.setDate(1);do ce.push(new Date(ye)),ye.setMonth(ye.getMonth()+1);while(compareMonth(ye,l.value)!==1);return ce}),E=computed(()=>{if(g.value){if(a.type==="range")return!g.value[0]||!g.value[1];if(a.type==="multiple")return!g.value.length}return!g.value}),P=()=>g.value,D=()=>{const ce=getScrollTop(v.value),ye=ce+f,we=w.value.map((me,_e)=>S.value[_e].getHeight()),ge=we.reduce((me,_e)=>me+_e,0);if(ye>ge&&ce>0)return;let Se=0,$e;const oe=[-1,-1];for(let me=0;me<w.value.length;me++){const _e=S.value[me];Se<=ye&&Se+we[me]>=ce&&(oe[1]=me,$e||($e=_e,oe[0]=me),S.value[me].showed||(S.value[me].showed=!0,n("monthShow",{date:_e.date,title:_e.getTitle()}))),Se+=we[me]}w.value.forEach((me,_e)=>{const Te=_e>=oe[0]-1&&_e<=oe[1]+1;S.value[_e].setVisible(Te)}),$e&&(_.value=$e)},L=ce=>{o.value?y.value=ce:raf(()=>{w.value.some((ye,we)=>compareMonth(ye,ce)===0?(v.value&&S.value[we].scrollToDate(v.value,ce),!0):!1),D()})},$=()=>{if(!(a.poppable&&!a.show))if(g.value){const ce=a.type==="single"?g.value:g.value[0];isDate(ce)&&L(ce)}else o.value||raf(D)},O=()=>{a.poppable&&!a.show||(o.value||raf(()=>{f=Math.floor(useRect(v).height)}),$())},B=(ce=u())=>{g.value=ce,$()},V=ce=>{const{maxRange:ye,rangePrompt:we,showRangePrompt:ge}=a;return ye&&calcDateNum(ce)>+ye?(ge&&showToast(we||t$g("rangePrompt",ye)),n("overRange"),!1):!0},F=ce=>{y.value=ce,n("panelChange",{date:ce})},U=()=>{var ce;return n("confirm",(ce=g.value)!=null?ce:cloneDates(g.value))},G=(ce,ye)=>{const we=ge=>{g.value=ge,n("select",cloneDates(ge))};if(ye&&a.type==="range"&&!V(ce)){we([ce[0],getDayByOffset(ce[0],+a.maxRange-1)]);return}we(ce),ye&&!a.showConfirm&&U()},W=(ce,ye,we)=>{var ge;return(ge=ce.find(Se=>compareDay(ye,Se.date)===-1&&compareDay(Se.date,we)===-1))==null?void 0:ge.date},j=computed(()=>S.value.reduce((ce,ye)=>{var we,ge;return ce.push(...(ge=(we=ye.disabledDays)==null?void 0:we.value)!=null?ge:[]),ce},[])),K=ce=>{if(a.readonly||!ce.date)return;const{date:ye}=ce,{type:we}=a;if(we==="range"){if(!g.value){G([ye]);return}const[ge,Se]=g.value;if(ge&&!Se){const $e=compareDay(ye,ge);if($e===1){const oe=W(j.value,ge,ye);if(oe){const me=getPrevDay(oe);compareDay(ge,me)===-1?G([ge,me]):G([ye])}else G([ge,ye],!0)}else $e===-1?G([ye]):a.allowSameDay&&G([ye,ye],!0)}else G([ye])}else if(we==="multiple"){if(!g.value){G([ye]);return}const ge=g.value,Se=ge.findIndex($e=>compareDay($e,ye)===0);if(Se!==-1){const[$e]=ge.splice(Se,1);n("unselect",cloneDate($e))}else a.maxRange&&ge.length>=+a.maxRange?showToast(a.rangePrompt||t$g("rangePrompt",a.maxRange)):G([...ge,ye])}else G(ye,!0)},q=ce=>n("update:show",ce),ie=(ce,ye)=>{const we=ye!==0||!a.showSubtitle;return createVNode$1(stdin_default$1c,mergeProps({ref:o.value?_:x(ye),date:ce,currentDate:g.value,showMonthTitle:we,firstDayOfWeek:T.value,lazyRender:o.value?!1:a.lazyRender,maxDate:l.value,minDate:s.value},pick(a,["type","color","showMark","formatter","rowHeight","showSubtitle","allowSameDay"]),{onClick:K,onClickDisabledDate:ge=>n("clickDisabledDate",ge)}),pick(r,["top-info","bottom-info","month-title","text"]))},ee=()=>{if(r.footer)return r.footer();if(a.showConfirm){const ce=r["confirm-text"],ye=E.value,we=ye?a.confirmDisabledText:a.confirmText;return createVNode$1(Button,{round:!0,block:!0,type:"primary",color:a.color,class:bem$13("confirm"),disabled:ye,nativeType:"button",onClick:U},{default:()=>[ce?ce({disabled:ye}):we||t$g("confirm")]})}},he=()=>createVNode$1("div",{class:[bem$13("footer"),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[ee()]),pe=()=>{var ce,ye;return createVNode$1("div",{class:bem$13()},[createVNode$1(stdin_default$1b,{date:(ce=_.value)==null?void 0:ce.date,maxDate:l.value,minDate:s.value,title:a.title,subtitle:(ye=_.value)==null?void 0:ye.getTitle(),showTitle:a.showTitle,showSubtitle:a.showSubtitle,switchMode:a.switchMode,firstDayOfWeek:T.value,onClickSubtitle:we=>n("clickSubtitle",we),onPanelChange:F},pick(r,["title","subtitle","prev-month","prev-year","next-month","next-year"])),createVNode$1("div",{ref:v,class:bem$13("body"),onScroll:o.value?void 0:D},[o.value?ie(y.value,0):w.value.map(ie)]),he()])};return watch(()=>a.show,O),watch(()=>[a.type,a.minDate,a.maxDate,a.switchMode],()=>B(u(g.value))),watch(()=>a.defaultDate,ce=>{B(ce)}),useExpose({reset:B,scrollToDate:L,getSelectedDate:P}),onMountedOrActivated(O),()=>a.poppable?createVNode$1(Popup,{show:a.show,class:bem$13("popup"),round:a.round,position:a.position,closeable:a.showTitle||a.showSubtitle,teleport:a.teleport,closeOnPopstate:a.closeOnPopstate,safeAreaInsetTop:a.safeAreaInsetTop,closeOnClickOverlay:a.closeOnClickOverlay,"onUpdate:show":q},{default:pe}):pe()}});const Calendar$1=withInstall(stdin_default$1a),[name$13,bem$12]=createNamespace("image"),imageProps={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:numericProp,height:numericProp,radius:numericProp,lazyLoad:Boolean,iconSize:numericProp,showError:truthProp,errorIcon:makeStringProp("photo-fail"),iconPrefix:String,showLoading:truthProp,loadingIcon:makeStringProp("photo"),crossorigin:String,referrerpolicy:String};var stdin_default$19=defineComponent({name:name$13,props:imageProps,emits:["load","error"],setup(a,{emit:n,slots:r}){const o=ref(!1),s=ref(!0),l=ref(),{$Lazyload:c}=getCurrentInstance().proxy,u=computed(()=>{const T={width:addUnit(a.width),height:addUnit(a.height)};return isDef$1(a.radius)&&(T.overflow="hidden",T.borderRadius=addUnit(a.radius)),T});watch(()=>a.src,()=>{o.value=!1,s.value=!0});const d=T=>{s.value&&(s.value=!1,n("load",T))},f=()=>{const T=new Event("load");Object.defineProperty(T,"target",{value:l.value,enumerable:!0}),d(T)},v=T=>{o.value=!0,s.value=!1,n("error",T)},g=(T,w,E)=>E?E():createVNode$1(Icon,{name:T,size:a.iconSize,class:w,classPrefix:a.iconPrefix},null),y=()=>{if(s.value&&a.showLoading)return createVNode$1("div",{class:bem$12("loading")},[g(a.loadingIcon,bem$12("loading-icon"),r.loading)]);if(o.value&&a.showError)return createVNode$1("div",{class:bem$12("error")},[g(a.errorIcon,bem$12("error-icon"),r.error)])},_=()=>{if(o.value||!a.src)return;const T={alt:a.alt,class:bem$12("img"),style:{objectFit:a.fit,objectPosition:a.position},crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy};return a.lazyLoad?withDirectives(createVNode$1("img",mergeProps({ref:l},T),null),[[resolveDirective("lazy"),a.src]]):createVNode$1("img",mergeProps({ref:l,src:a.src,onLoad:d,onError:v},T),null)},S=({el:T})=>{const w=()=>{T===l.value&&s.value&&f()};l.value?w():nextTick(w)},x=({el:T})=>{T===l.value&&!o.value&&v()};return c&&inBrowser$1&&(c.$on("loaded",S),c.$on("error",x),onBeforeUnmount(()=>{c.$off("loaded",S),c.$off("error",x)})),onMounted(()=>{nextTick(()=>{var T;(T=l.value)!=null&&T.complete&&!a.lazyLoad&&f()})}),()=>{var T;return createVNode$1("div",{class:bem$12({round:a.round,block:a.block}),style:u.value},[_(),y(),(T=r.default)==null?void 0:T.call(r)])}}});const Image$1=withInstall(stdin_default$19),[name$12,bem$11]=createNamespace("card"),cardProps={tag:String,num:numericProp,desc:String,thumb:String,title:String,price:numericProp,centered:Boolean,lazyLoad:Boolean,currency:makeStringProp("¥"),thumbLink:String,originPrice:numericProp};var stdin_default$18=defineComponent({name:name$12,props:cardProps,emits:["clickThumb"],setup(a,{slots:n,emit:r}){const o=()=>{if(n.title)return n.title();if(a.title)return createVNode$1("div",{class:[bem$11("title"),"van-multi-ellipsis--l2"]},[a.title])},s=()=>{if(n.tag||a.tag)return createVNode$1("div",{class:bem$11("tag")},[n.tag?n.tag():createVNode$1(Tag,{mark:!0,type:"primary"},{default:()=>[a.tag]})])},l=()=>n.thumb?n.thumb():createVNode$1(Image$1,{src:a.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:a.lazyLoad},null),c=()=>{if(n.thumb||a.thumb)return createVNode$1("a",{href:a.thumbLink,class:bem$11("thumb"),onClick:f=>r("clickThumb",f)},[l(),s()])},u=()=>{if(n.desc)return n.desc();if(a.desc)return createVNode$1("div",{class:[bem$11("desc"),"van-ellipsis"]},[a.desc])},d=()=>{const f=a.price.toString().split(".");return createVNode$1("div",null,[createVNode$1("span",{class:bem$11("price-currency")},[a.currency]),createVNode$1("span",{class:bem$11("price-integer")},[f[0]]),f.length>1&&createVNode$1(Fragment,null,[createTextVNode("."),createVNode$1("span",{class:bem$11("price-decimal")},[f[1]])])])};return()=>{var f,v,g;const y=n.num||isDef$1(a.num),_=n.price||isDef$1(a.price),S=n["origin-price"]||isDef$1(a.originPrice),x=y||_||S||n.bottom,T=_&&createVNode$1("div",{class:bem$11("price")},[n.price?n.price():d()]),w=S&&createVNode$1("div",{class:bem$11("origin-price")},[n["origin-price"]?n["origin-price"]():`${a.currency} ${a.originPrice}`]),E=y&&createVNode$1("div",{class:bem$11("num")},[n.num?n.num():`x${a.num}`]),P=n.footer&&createVNode$1("div",{class:bem$11("footer")},[n.footer()]),D=x&&createVNode$1("div",{class:bem$11("bottom")},[(f=n["price-top"])==null?void 0:f.call(n),T,w,E,(v=n.bottom)==null?void 0:v.call(n)]);return createVNode$1("div",{class:bem$11()},[createVNode$1("div",{class:bem$11("header")},[c(),createVNode$1("div",{class:bem$11("content",{centered:a.centered})},[createVNode$1("div",null,[o(),u(),(g=n.tags)==null?void 0:g.call(n)]),D])]),P])}}});const Card=withInstall(stdin_default$18),[name$11,bem$10,t$f]=createNamespace("cascader"),cascaderProps={title:String,options:makeArrayProp(),closeable:truthProp,swipeable:truthProp,closeIcon:makeStringProp("cross"),showHeader:truthProp,modelValue:numericProp,fieldNames:Object,placeholder:String,activeColor:String};var stdin_default$17=defineComponent({name:name$11,props:cascaderProps,emits:["close","change","finish","clickTab","update:modelValue"],setup(a,{slots:n,emit:r}){const o=ref([]),s=ref(0),[l,c]=useRefs(),{text:u,value:d,children:f}=extend$1({text:"text",value:"value",children:"children"},a.fieldNames),v=(L,$)=>{for(const O of L){if(O[d]===$)return[O];if(O[f]){const B=v(O[f],$);if(B)return[O,...B]}}},g=()=>{const{options:L,modelValue:$}=a;if($!==void 0){const O=v(L,$);if(O){let B=L;o.value=O.map(V=>{const F={options:B,selected:V},U=B.find(G=>G[d]===V[d]);return U&&(B=U[f]),F}),B&&o.value.push({options:B,selected:null}),nextTick(()=>{s.value=o.value.length-1});return}}o.value=[{options:L,selected:null}]},y=(L,$)=>{if(L.disabled)return;if(o.value[$].selected=L,o.value.length>$+1&&(o.value=o.value.slice(0,$+1)),L[f]){const V={options:L[f],selected:null};o.value[$+1]?o.value[$+1]=V:o.value.push(V),nextTick(()=>{s.value++})}const O=o.value.map(V=>V.selected).filter(Boolean);r("update:modelValue",L[d]);const B={value:L[d],tabIndex:$,selectedOptions:O};r("change",B),L[f]||r("finish",B)},_=()=>r("close"),S=({name:L,title:$})=>r("clickTab",L,$),x=()=>a.showHeader?createVNode$1("div",{class:bem$10("header")},[createVNode$1("h2",{class:bem$10("title")},[n.title?n.title():a.title]),a.closeable?createVNode$1(Icon,{name:a.closeIcon,class:[bem$10("close-icon"),HAPTICS_FEEDBACK],onClick:_},null):null]):null,T=(L,$,O)=>{const{disabled:B}=L,V=!!($&&L[d]===$[d]),F=L.color||(V?a.activeColor:void 0),U=n.option?n.option({option:L,selected:V}):createVNode$1("span",null,[L[u]]);return createVNode$1("li",{ref:V?c(O):void 0,role:"menuitemradio",class:[bem$10("option",{selected:V,disabled:B}),L.className],style:{color:F},tabindex:B?void 0:V?0:-1,"aria-checked":V,"aria-disabled":B||void 0,onClick:()=>y(L,O)},[U,V?createVNode$1(Icon,{name:"success",class:bem$10("selected-icon")},null):null])},w=(L,$,O)=>createVNode$1("ul",{role:"menu",class:bem$10("options")},[L.map(B=>T(B,$,O))]),E=(L,$)=>{const{options:O,selected:B}=L,V=a.placeholder||t$f("select"),F=B?B[u]:V;return createVNode$1(Tab,{title:F,titleClass:bem$10("tab",{unselected:!B})},{default:()=>{var U,G;return[(U=n["options-top"])==null?void 0:U.call(n,{tabIndex:$}),w(O,B,$),(G=n["options-bottom"])==null?void 0:G.call(n,{tabIndex:$})]}})},P=()=>createVNode$1(Tabs,{active:s.value,"onUpdate:active":L=>s.value=L,shrink:!0,animated:!0,class:bem$10("tabs"),color:a.activeColor,swipeable:a.swipeable,onClickTab:S},{default:()=>[o.value.map(E)]}),D=L=>{const $=L.parentElement;$&&($.scrollTop=L.offsetTop-($.offsetHeight-L.offsetHeight)/2)};return g(),watch(s,L=>{const $=l.value[L];$&&D($)}),watch(()=>a.options,g,{deep:!0}),watch(()=>a.modelValue,L=>{L!==void 0&&o.value.map(O=>{var B;return(B=O.selected)==null?void 0:B[d]}).includes(L)||g()}),()=>createVNode$1("div",{class:bem$10()},[x(),P()])}});const Cascader=withInstall(stdin_default$17),[name$10,bem$$]=createNamespace("cell-group"),cellGroupProps={title:String,inset:Boolean,border:truthProp};var stdin_default$16=defineComponent({name:name$10,inheritAttrs:!1,props:cellGroupProps,setup(a,{slots:n,attrs:r}){const o=()=>{var l;return createVNode$1("div",mergeProps({class:[bem$$({inset:a.inset}),{[BORDER_TOP_BOTTOM]:a.border&&!a.inset}]},r,useScopeId()),[(l=n.default)==null?void 0:l.call(n)])},s=()=>createVNode$1("div",{class:bem$$("title",{inset:a.inset})},[n.title?n.title():a.title]);return()=>a.title||n.title?createVNode$1(Fragment,null,[s(),o()]):o()}});const CellGroup=withInstall(stdin_default$16),[name$$,bem$_]=createNamespace("circle");let uid=0;const format$2=a=>Math.min(Math.max(+a,0),100);function getPath(a,n){const r=a?1:0;return`M ${n/2} ${n/2} m 0, -500 a 500, 500 0 1, ${r} 0, 1000 a 500, 500 0 1, ${r} 0, -1000`}const circleProps={text:String,size:numericProp,fill:makeStringProp("none"),rate:makeNumericProp(100),speed:makeNumericProp(0),color:[String,Object],clockwise:truthProp,layerColor:String,currentRate:makeNumberProp(0),strokeWidth:makeNumericProp(40),strokeLinecap:String,startPosition:makeStringProp("top")};var stdin_default$15=defineComponent({name:name$$,props:circleProps,emits:["update:currentRate"],setup(a,{emit:n,slots:r}){const o=`van-circle-${uid++}`,s=computed(()=>+a.strokeWidth+1e3),l=computed(()=>getPath(a.clockwise,s.value)),c=computed(()=>{const y={top:0,right:90,bottom:180,left:270}[a.startPosition];if(y)return{transform:`rotate(${y}deg)`}});watch(()=>a.rate,g=>{let y;const _=Date.now(),S=a.currentRate,x=format$2(g),T=Math.abs((S-x)*1e3/+a.speed),w=()=>{const E=Date.now(),D=Math.min((E-_)/T,1)*(x-S)+S;n("update:currentRate",format$2(parseFloat(D.toFixed(1)))),(x>S?D<x:D>x)&&(y=raf(w))};a.speed?(y&&cancelRaf(y),y=raf(w)):n("update:currentRate",x)},{immediate:!0});const u=()=>{const{strokeWidth:y,currentRate:_,strokeLinecap:S}=a,x=3140*_/100,T=isObject$4(a.color)?`url(#${o})`:a.color,w={stroke:T,strokeWidth:`${+y+1}px`,strokeLinecap:S,strokeDasharray:`${x}px 3140px`};return createVNode$1("path",{d:l.value,style:w,class:bem$_("hover"),stroke:T},null)},d=()=>{const g={fill:a.fill,stroke:a.layerColor,strokeWidth:`${a.strokeWidth}px`};return createVNode$1("path",{class:bem$_("layer"),style:g,d:l.value},null)},f=()=>{const{color:g}=a;if(!isObject$4(g))return;const y=Object.keys(g).sort((_,S)=>parseFloat(_)-parseFloat(S)).map((_,S)=>createVNode$1("stop",{key:S,offset:_,"stop-color":g[_]},null));return createVNode$1("defs",null,[createVNode$1("linearGradient",{id:o,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[y])])},v=()=>{if(r.default)return r.default();if(a.text)return createVNode$1("div",{class:bem$_("text")},[a.text])};return()=>createVNode$1("div",{class:bem$_(),style:getSizeStyle(a.size)},[createVNode$1("svg",{viewBox:`0 0 ${s.value} ${s.value}`,style:c.value},[f(),d(),u()]),v()])}});const Circle$1=withInstall(stdin_default$15),[name$_,bem$Z]=createNamespace("row"),ROW_KEY=Symbol(name$_),rowProps={tag:makeStringProp("div"),wrap:truthProp,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var stdin_default$14=defineComponent({name:name$_,props:rowProps,setup(a,{slots:n}){const{children:r,linkChildren:o}=useChildren(ROW_KEY),s=computed(()=>{const u=[[]];let d=0;return r.forEach((f,v)=>{d+=Number(f.span),d>24?(u.push([v]),d-=24):u[u.length-1].push(v)}),u}),l=computed(()=>{let u=0;Array.isArray(a.gutter)?u=Number(a.gutter[0])||0:u=Number(a.gutter);const d=[];return u&&s.value.forEach(f=>{const v=u*(f.length-1)/f.length;f.forEach((g,y)=>{if(y===0)d.push({right:v});else{const _=u-d[g-1].right,S=v-_;d.push({left:_,right:S})}})}),d}),c=computed(()=>{const{gutter:u}=a,d=[];if(Array.isArray(u)&&u.length>1){const f=Number(u[1])||0;if(f<=0)return d;s.value.forEach((v,g)=>{g!==s.value.length-1&&v.forEach(()=>{d.push({bottom:f})})})}return d});return o({spaces:l,verticalSpaces:c}),()=>{const{tag:u,wrap:d,align:f,justify:v}=a;return createVNode$1(u,{class:bem$Z({[`align-${f}`]:f,[`justify-${v}`]:v,nowrap:!d})},{default:()=>{var g;return[(g=n.default)==null?void 0:g.call(n)]}})}}});const[name$Z,bem$Y]=createNamespace("col"),colProps={tag:makeStringProp("div"),span:makeNumericProp(0),offset:numericProp};var stdin_default$13=defineComponent({name:name$Z,props:colProps,setup(a,{slots:n}){const{parent:r,index:o}=useParent(ROW_KEY),s=computed(()=>{if(!r)return;const{spaces:l,verticalSpaces:c}=r;let u={};if(l&&l.value&&l.value[o.value]){const{left:f,right:v}=l.value[o.value];u={paddingLeft:f?`${f}px`:null,paddingRight:v?`${v}px`:null}}const{bottom:d}=c.value[o.value]||{};return extend$1(u,{marginBottom:d?`${d}px`:null})});return()=>{const{tag:l,span:c,offset:u}=a;return createVNode$1(l,{style:s.value,class:bem$Y({[c]:c,[`offset-${u}`]:u})},{default:()=>{var d;return[(d=n.default)==null?void 0:d.call(n)]}})}}});const Col=withInstall(stdin_default$13),[name$Y,bem$X]=createNamespace("collapse"),COLLAPSE_KEY=Symbol(name$Y),collapseProps={border:truthProp,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var stdin_default$12=defineComponent({name:name$Y,props:collapseProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{linkChildren:o,children:s}=useChildren(COLLAPSE_KEY),l=f=>{n("change",f),n("update:modelValue",f)},c=(f,v)=>{const{accordion:g,modelValue:y}=a;l(g?f===y?"":f:v?y.concat(f):y.filter(_=>_!==f))},u=(f={})=>{if(a.accordion)return;typeof f=="boolean"&&(f={expanded:f});const{expanded:v,skipDisabled:g}=f,_=s.filter(S=>S.disabled&&g?S.expanded.value:v??!S.expanded.value).map(S=>S.itemName.value);l(_)},d=f=>{const{accordion:v,modelValue:g}=a;return v?g===f:g.includes(f)};return useExpose({toggleAll:u}),o({toggle:c,isExpanded:d}),()=>{var f;return createVNode$1("div",{class:[bem$X(),{[BORDER_TOP_BOTTOM]:a.border}]},[(f=r.default)==null?void 0:f.call(r)])}}});const Collapse=withInstall(stdin_default$12),[name$X,bem$W]=createNamespace("collapse-item"),CELL_SLOTS=["icon","title","value","label","right-icon"],collapseItemProps=extend$1({},cellSharedProps,{name:numericProp,isLink:truthProp,disabled:Boolean,readonly:Boolean,lazyRender:truthProp});var stdin_default$11=defineComponent({name:name$X,props:collapseItemProps,setup(a,{slots:n}){const r=ref(),o=ref(),{parent:s,index:l}=useParent(COLLAPSE_KEY);if(!s)return;const c=computed(()=>{var x;return(x=a.name)!=null?x:l.value}),u=computed(()=>s.isExpanded(c.value)),d=ref(u.value),f=useLazyRender(()=>d.value||!a.lazyRender),v=()=>{u.value?r.value&&(r.value.style.height=""):d.value=!1};watch(u,(x,T)=>{if(T===null)return;x&&(d.value=!0),(x?nextTick:raf)(()=>{if(!o.value||!r.value)return;const{offsetHeight:E}=o.value;if(E){const P=`${E}px`;r.value.style.height=x?"0":P,doubleRaf(()=>{r.value&&(r.value.style.height=x?P:"0")})}else v()})});const g=(x=!u.value)=>{s.toggle(c.value,x)},y=()=>{!a.disabled&&!a.readonly&&g()},_=()=>{const{border:x,disabled:T,readonly:w}=a,E=pick(a,Object.keys(cellSharedProps));return w&&(E.isLink=!1),(T||w)&&(E.clickable=!1),createVNode$1(Cell,mergeProps({role:"button",class:bem$W("title",{disabled:T,expanded:u.value,borderless:!x}),"aria-expanded":String(u.value),onClick:y},E),pick(n,CELL_SLOTS))},S=f(()=>{var x;return withDirectives(createVNode$1("div",{ref:r,class:bem$W("wrapper"),onTransitionend:v},[createVNode$1("div",{ref:o,class:bem$W("content")},[(x=n.default)==null?void 0:x.call(n)])]),[[vShow,d.value]])});return useExpose({toggle:g,expanded:u,itemName:c}),()=>createVNode$1("div",{class:[bem$W({border:l.value&&a.border})]},[_(),S()])}});const CollapseItem=withInstall(stdin_default$11),ConfigProvider=withInstall(stdin_default$1P),[name$W,bem$V,t$e]=createNamespace("contact-card"),contactCardProps={tel:String,name:String,type:makeStringProp("add"),addText:String,editable:truthProp};var stdin_default$10=defineComponent({name:name$W,props:contactCardProps,emits:["click"],setup(a,{emit:n}){const r=s=>{a.editable&&n("click",s)},o=()=>a.type==="add"?a.addText||t$e("addContact"):[createVNode$1("div",null,[`${t$e("name")}：${a.name}`]),createVNode$1("div",null,[`${t$e("tel")}：${a.tel}`])];return()=>createVNode$1(Cell,{center:!0,icon:a.type==="edit"?"contact":"add-square",class:bem$V([a.type]),border:!1,isLink:a.editable,titleClass:bem$V("title"),onClick:r},{title:o})}});const ContactCard=withInstall(stdin_default$10),[name$V,bem$U,t$d]=createNamespace("contact-edit"),DEFAULT_CONTACT={tel:"",name:""},contactEditProps={isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,showSetDefault:Boolean,setDefaultLabel:String,contactInfo:{type:Object,default:()=>extend$1({},DEFAULT_CONTACT)},telValidator:{type:Function,default:isMobile}};var stdin_default$$=defineComponent({name:name$V,props:contactEditProps,emits:["save","delete","changeDefault"],setup(a,{emit:n}){const r=reactive(extend$1({},DEFAULT_CONTACT,a.contactInfo)),o=()=>{a.isSaving||n("save",r)},s=()=>n("delete",r),l=()=>createVNode$1("div",{class:bem$U("buttons")},[createVNode$1(Button,{block:!0,round:!0,type:"primary",text:t$d("save"),class:bem$U("button"),loading:a.isSaving,nativeType:"submit"},null),a.isEdit&&createVNode$1(Button,{block:!0,round:!0,text:t$d("delete"),class:bem$U("button"),loading:a.isDeleting,onClick:s},null)]),c=()=>createVNode$1(Switch,{modelValue:r.isDefault,"onUpdate:modelValue":d=>r.isDefault=d,onChange:d=>n("changeDefault",d)},null),u=()=>{if(a.showSetDefault)return createVNode$1(Cell,{title:a.setDefaultLabel,class:bem$U("switch-cell"),border:!1},{"right-icon":c})};return watch(()=>a.contactInfo,d=>extend$1(r,DEFAULT_CONTACT,d)),()=>createVNode$1(Form,{class:bem$U(),onSubmit:o},{default:()=>[createVNode$1("div",{class:bem$U("fields")},[createVNode$1(Field,{modelValue:r.name,"onUpdate:modelValue":d=>r.name=d,clearable:!0,label:t$d("name"),rules:[{required:!0,message:t$d("nameEmpty")}],maxlength:"30",placeholder:t$d("name")},null),createVNode$1(Field,{modelValue:r.tel,"onUpdate:modelValue":d=>r.tel=d,clearable:!0,type:"tel",label:t$d("tel"),rules:[{validator:a.telValidator,message:t$d("telInvalid")}],placeholder:t$d("tel")},null)]),u(),l()]})}});const ContactEdit=withInstall(stdin_default$$),[name$U,bem$T,t$c]=createNamespace("contact-list"),contactListProps={list:Array,addText:String,modelValue:unknownProp,defaultTagText:String};var stdin_default$_=defineComponent({name:name$U,props:contactListProps,emits:["add","edit","select","update:modelValue"],setup(a,{emit:n}){const r=(o,s)=>{const l=()=>{n("update:modelValue",o.id),n("select",o,s)},c=()=>createVNode$1(Radio,{class:bem$T("radio"),name:o.id,iconSize:18},null),u=()=>createVNode$1(Icon,{name:"edit",class:bem$T("edit"),onClick:f=>{f.stopPropagation(),n("edit",o,s)}},null),d=()=>{const f=[`${o.name}，${o.tel}`];return o.isDefault&&a.defaultTagText&&f.push(createVNode$1(Tag,{type:"primary",round:!0,class:bem$T("item-tag")},{default:()=>[a.defaultTagText]})),f};return createVNode$1(Cell,{key:o.id,isLink:!0,center:!0,class:bem$T("item"),titleClass:bem$T("item-title"),onClick:l},{icon:u,title:d,"right-icon":c})};return()=>createVNode$1("div",{class:bem$T()},[createVNode$1(RadioGroup,{modelValue:a.modelValue,class:bem$T("group")},{default:()=>[a.list&&a.list.map(r)]}),createVNode$1("div",{class:[bem$T("bottom"),"van-safe-area-bottom"]},[createVNode$1(Button,{round:!0,block:!0,type:"primary",class:bem$T("add"),text:a.addText||t$c("addContact"),onClick:()=>n("add")},null)])])}});const ContactList=withInstall(stdin_default$_);function parseFormat(a,n){const{days:r}=n;let{hours:o,minutes:s,seconds:l,milliseconds:c}=n;if(a.includes("DD")?a=a.replace("DD",padZero(r)):o+=r*24,a.includes("HH")?a=a.replace("HH",padZero(o)):s+=o*60,a.includes("mm")?a=a.replace("mm",padZero(s)):l+=s*60,a.includes("ss")?a=a.replace("ss",padZero(l)):c+=l*1e3,a.includes("S")){const u=padZero(c,3);a.includes("SSS")?a=a.replace("SSS",u):a.includes("SS")?a=a.replace("SS",u.slice(0,2)):a=a.replace("S",u.charAt(0))}return a}const[name$T,bem$S]=createNamespace("count-down"),countDownProps={time:makeNumericProp(0),format:makeStringProp("HH:mm:ss"),autoStart:truthProp,millisecond:Boolean};var stdin_default$Z=defineComponent({name:name$T,props:countDownProps,emits:["change","finish"],setup(a,{emit:n,slots:r}){const{start:o,pause:s,reset:l,current:c}=useCountDown({time:+a.time,millisecond:a.millisecond,onChange:f=>n("change",f),onFinish:()=>n("finish")}),u=computed(()=>parseFormat(a.format,c.value)),d=()=>{l(+a.time),a.autoStart&&o()};return watch(()=>a.time,d,{immediate:!0}),useExpose({start:o,pause:s,reset:d}),()=>createVNode$1("div",{role:"timer",class:bem$S()},[r.default?r.default(c.value):u.value])}});const CountDown=withInstall(stdin_default$Z);function getDate(a){const n=new Date(a*1e3);return`${n.getFullYear()}.${padZero(n.getMonth()+1)}.${padZero(n.getDate())}`}const formatDiscount=a=>(a/10).toFixed(a%10===0?0:1),formatAmount=a=>(a/100).toFixed(a%100===0?0:a%10===0?1:2),[name$S,bem$R,t$b]=createNamespace("coupon");var stdin_default$Y=defineComponent({name:name$S,props:{chosen:Boolean,coupon:makeRequiredProp(Object),disabled:Boolean,currency:makeStringProp("¥")},setup(a){const n=computed(()=>{const{startAt:s,endAt:l}=a.coupon;return`${getDate(s)} - ${getDate(l)}`}),r=computed(()=>{const{coupon:s,currency:l}=a;if(s.valueDesc)return[s.valueDesc,createVNode$1("span",null,[s.unitDesc||""])];if(s.denominations){const c=formatAmount(s.denominations);return[createVNode$1("span",null,[l]),` ${c}`]}return s.discount?t$b("discount",formatDiscount(s.discount)):""}),o=computed(()=>{const s=formatAmount(a.coupon.originCondition||0);return s==="0"?t$b("unlimited"):t$b("condition",s)});return()=>{const{chosen:s,coupon:l,disabled:c}=a,u=c&&l.reason||l.description;return createVNode$1("div",{class:bem$R({disabled:c})},[createVNode$1("div",{class:bem$R("content")},[createVNode$1("div",{class:bem$R("head")},[createVNode$1("h2",{class:bem$R("amount")},[r.value]),createVNode$1("p",{class:bem$R("condition")},[l.condition||o.value])]),createVNode$1("div",{class:bem$R("body")},[createVNode$1("p",{class:bem$R("name")},[l.name]),createVNode$1("p",{class:bem$R("valid")},[n.value]),!c&&createVNode$1(Checkbox,{class:bem$R("corner"),modelValue:s},null)])]),u&&createVNode$1("p",{class:bem$R("description")},[u])])}}});const Coupon=withInstall(stdin_default$Y),[name$R,bem$Q,t$a]=createNamespace("coupon-cell"),couponCellProps={title:String,border:truthProp,editable:truthProp,coupons:makeArrayProp(),currency:makeStringProp("¥"),chosenCoupon:{type:[Number,Array],default:-1}},getValue=a=>{const{value:n,denominations:r}=a;return isDef$1(n)?n:isDef$1(r)?r:0};function formatValue({coupons:a,chosenCoupon:n,currency:r}){let o=0,s=!1;return(Array.isArray(n)?n:[n]).forEach(l=>{const c=a[+l];c&&(s=!0,o+=getValue(c))}),s?`-${r} ${(o/100).toFixed(2)}`:a.length===0?t$a("noCoupon"):t$a("count",a.length)}var stdin_default$X=defineComponent({name:name$R,props:couponCellProps,setup(a){return()=>{const n=Array.isArray(a.chosenCoupon)?a.chosenCoupon.length:a.coupons[+a.chosenCoupon];return createVNode$1(Cell,{class:bem$Q(),value:formatValue(a),title:a.title||t$a("title"),border:a.border,isLink:a.editable,valueClass:bem$Q("value",{selected:n})},null)}}});const CouponCell=withInstall(stdin_default$X),[name$Q,bem$P]=createNamespace("empty"),emptyProps={image:makeStringProp("default"),imageSize:[Number,String,Array],description:String};var stdin_default$W=defineComponent({name:name$Q,props:emptyProps,setup(a,{slots:n}){const r=()=>{const w=n.description?n.description():a.description;if(w)return createVNode$1("p",{class:bem$P("description")},[w])},o=()=>{if(n.default)return createVNode$1("div",{class:bem$P("bottom")},[n.default()])},s=useId(),l=w=>`${s}-${w}`,c=w=>`url(#${l(w)})`,u=(w,E,P)=>createVNode$1("stop",{"stop-color":w,offset:`${E}%`,"stop-opacity":P},null),d=(w,E)=>[u(w,0),u(E,100)],f=w=>[createVNode$1("defs",null,[createVNode$1("radialGradient",{id:l(w),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[u("#EBEDF0",0),u("#F2F3F5",100,.3)])]),createVNode$1("ellipse",{fill:c(w),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],v=()=>[createVNode$1("defs",null,[createVNode$1("linearGradient",{id:l("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[u("#FFF",0,.5),u("#F2F3F5",100)])]),createVNode$1("g",{opacity:".8","data-allow-mismatch":"children"},[createVNode$1("path",{d:"M36 131V53H16v20H2v58h34z",fill:c("a")},null),createVNode$1("path",{d:"M123 15h22v14h9v77h-31V15z",fill:c("a")},null)])],g=()=>[createVNode$1("defs",null,[createVNode$1("linearGradient",{id:l("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[u("#F2F3F5",0,.3),u("#F2F3F5",100)])]),createVNode$1("g",{opacity:".8","data-allow-mismatch":"children"},[createVNode$1("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:c("b")},null),createVNode$1("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:c("b")},null)])],y=()=>createVNode$1("svg",{viewBox:"0 0 160 160"},[createVNode$1("defs",{"data-allow-mismatch":"children"},[createVNode$1("linearGradient",{id:l(1),x1:"64%",y1:"100%",x2:"64%"},[u("#FFF",0,.5),u("#F2F3F5",100)]),createVNode$1("linearGradient",{id:l(2),x1:"50%",x2:"50%",y2:"84%"},[u("#EBEDF0",0),u("#DCDEE0",100,0)]),createVNode$1("linearGradient",{id:l(3),x1:"100%",x2:"100%",y2:"100%"},[d("#EAEDF0","#DCDEE0")]),createVNode$1("radialGradient",{id:l(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[u("#EBEDF0",0),u("#FFF",100,0)])]),createVNode$1("g",{fill:"none"},[v(),createVNode$1("path",{fill:c(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),createVNode$1("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:c(2),"data-allow-mismatch":"attribute"},null),createVNode$1("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[createVNode$1("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:c(3)},null),createVNode$1("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:c(3)},null),createVNode$1("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:c(3)},null),createVNode$1("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:c(3)},null)]),createVNode$1("g",{transform:"translate(31 105)"},[createVNode$1("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),createVNode$1("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),createVNode$1("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),_=()=>createVNode$1("svg",{viewBox:"0 0 160 160"},[createVNode$1("defs",{"data-allow-mismatch":"children"},[createVNode$1("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(5)},[d("#F2F3F5","#DCDEE0")]),createVNode$1("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:l(6)},[d("#EAEDF1","#DCDEE0")]),createVNode$1("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:l(7)},[d("#EAEDF1","#DCDEE0")])]),v(),g(),createVNode$1("g",{transform:"translate(36 50)",fill:"none"},[createVNode$1("g",{transform:"translate(8)"},[createVNode$1("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),createVNode$1("rect",{fill:c(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),createVNode$1("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),createVNode$1("g",{transform:"translate(15 17)",fill:c(6),"data-allow-mismatch":"attribute"},[createVNode$1("rect",{width:"34",height:"6",rx:"1"},null),createVNode$1("path",{d:"M0 14h34v6H0z"},null),createVNode$1("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),createVNode$1("rect",{fill:c(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),createVNode$1("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),S=()=>createVNode$1("svg",{viewBox:"0 0 160 160"},[createVNode$1("defs",null,[createVNode$1("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(8),"data-allow-mismatch":"attribute"},[d("#EAEDF1","#DCDEE0")])]),v(),g(),f("c"),createVNode$1("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:c(8),"data-allow-mismatch":"attribute"},null)]),x=()=>createVNode$1("svg",{viewBox:"0 0 160 160"},[createVNode$1("defs",{"data-allow-mismatch":"children"},[createVNode$1("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:l(9)},[d("#EEE","#D8D8D8")]),createVNode$1("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:l(10)},[d("#F2F3F5","#DCDEE0")]),createVNode$1("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(11)},[d("#F2F3F5","#DCDEE0")]),createVNode$1("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:l(12)},[d("#FFF","#F7F8FA")])]),v(),g(),f("d"),createVNode$1("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[createVNode$1("rect",{fill:c(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),createVNode$1("rect",{fill:c(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),createVNode$1("circle",{stroke:c(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),createVNode$1("circle",{fill:c(12),cx:"27",cy:"27",r:"16"},null),createVNode$1("path",{d:"M37 7c-8 0-15 5-16 12",stroke:c(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),T=()=>{var w;if(n.image)return n.image();const E={error:S,search:x,network:y,default:_};return((w=E[a.image])==null?void 0:w.call(E))||createVNode$1("img",{src:a.image},null)};return()=>createVNode$1("div",{class:bem$P()},[createVNode$1("div",{class:bem$P("image"),style:getSizeStyle(a.imageSize)},[T()]),r(),o()])}});const Empty=withInstall(stdin_default$W),[name$P,bem$O,t$9]=createNamespace("coupon-list"),couponListProps={code:makeStringProp(""),coupons:makeArrayProp(),currency:makeStringProp("¥"),showCount:truthProp,emptyImage:String,enabledTitle:String,disabledTitle:String,disabledCoupons:makeArrayProp(),showExchangeBar:truthProp,showCloseButton:truthProp,closeButtonText:String,inputPlaceholder:String,exchangeMinLength:makeNumberProp(1),exchangeButtonText:String,displayedCouponIndex:makeNumberProp(-1),exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,chosenCoupon:{type:[Number,Array],default:-1}};var stdin_default$V=defineComponent({name:name$P,props:couponListProps,emits:["change","exchange","update:code"],setup(a,{emit:n,slots:r}){const[o,s]=useRefs(),l=ref(),c=ref(),u=ref(0),d=ref(0),f=ref(a.code),v=computed(()=>!a.exchangeButtonLoading&&(a.exchangeButtonDisabled||!f.value||f.value.length<a.exchangeMinLength)),g=()=>{const P=useRect(l).height,D=useRect(c).height+44;d.value=(P>D?P:windowHeight.value)-D},y=()=>{n("exchange",f.value),a.code||(f.value="")},_=E=>{nextTick(()=>{var P;return(P=o.value[E])==null?void 0:P.scrollIntoView()})},S=()=>createVNode$1(Empty,{image:a.emptyImage},{default:()=>[createVNode$1("p",{class:bem$O("empty-tip")},[t$9("noCoupon")])]}),x=()=>{if(a.showExchangeBar)return createVNode$1("div",{ref:c,class:bem$O("exchange-bar")},[createVNode$1(Field,{modelValue:f.value,"onUpdate:modelValue":E=>f.value=E,clearable:!0,border:!1,class:bem$O("field"),placeholder:a.inputPlaceholder||t$9("placeholder"),maxlength:"20"},null),createVNode$1(Button,{plain:!0,type:"primary",class:bem$O("exchange"),text:a.exchangeButtonText||t$9("exchange"),loading:a.exchangeButtonLoading,disabled:v.value,onClick:y},null)])},T=()=>{const{coupons:E,chosenCoupon:P}=a,D=a.showCount?` (${E.length})`:"",L=(a.enabledTitle||t$9("enable"))+D,$=(O=[],B=0)=>O.includes(B)?O.filter(V=>V!==B):[...O,B];return createVNode$1(Tab,{title:L},{default:()=>{var O;return[createVNode$1("div",{class:bem$O("list",{"with-bottom":a.showCloseButton}),style:{height:`${d.value}px`}},[E.map((B,V)=>createVNode$1(Coupon,{key:B.id,ref:s(V),coupon:B,chosen:Array.isArray(P)?P.includes(V):V===P,currency:a.currency,onClick:()=>n("change",Array.isArray(P)?$(P,V):V)},null)),!E.length&&S(),(O=r["list-footer"])==null?void 0:O.call(r)])]}})},w=()=>{const{disabledCoupons:E}=a,P=a.showCount?` (${E.length})`:"",D=(a.disabledTitle||t$9("disabled"))+P;return createVNode$1(Tab,{title:D},{default:()=>{var L;return[createVNode$1("div",{class:bem$O("list",{"with-bottom":a.showCloseButton}),style:{height:`${d.value}px`}},[E.map($=>createVNode$1(Coupon,{disabled:!0,key:$.id,coupon:$,currency:a.currency},null)),!E.length&&S(),(L=r["disabled-list-footer"])==null?void 0:L.call(r)])]}})};return watch(()=>a.code,E=>{f.value=E}),watch(windowHeight,g),watch(f,E=>n("update:code",E)),watch(()=>a.displayedCouponIndex,_),onMounted(()=>{g(),_(a.displayedCouponIndex)}),()=>createVNode$1("div",{ref:l,class:bem$O()},[x(),createVNode$1(Tabs,{active:u.value,"onUpdate:active":E=>u.value=E,class:bem$O("tab")},{default:()=>[T(),w()]}),createVNode$1("div",{class:bem$O("bottom")},[r["list-button"]?r["list-button"]():withDirectives(createVNode$1(Button,{round:!0,block:!0,type:"primary",class:bem$O("close"),text:a.closeButtonText||t$9("close"),onClick:()=>n("change",Array.isArray(a.chosenCoupon)?[]:-1)},null),[[vShow,a.showCloseButton]])])])}});const CouponList=withInstall(stdin_default$V),currentYear=new Date().getFullYear(),[name$O]=createNamespace("date-picker"),datePickerProps=extend$1({},sharedProps,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(currentYear-10,0,1),validator:isDate},maxDate:{type:Date,default:()=>new Date(currentYear+10,11,31),validator:isDate}});var stdin_default$U=defineComponent({name:name$O,props:datePickerProps,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(a.modelValue),s=ref(!1),l=ref(),c=computed(()=>s.value?a.modelValue:o.value),u=L=>L===a.minDate.getFullYear(),d=L=>L===a.maxDate.getFullYear(),f=L=>L===a.minDate.getMonth()+1,v=L=>L===a.maxDate.getMonth()+1,g=L=>{const{minDate:$,columnsType:O}=a,B=O.indexOf(L),V=c.value[B];if(V)return+V;switch(L){case"year":return $.getFullYear();case"month":return $.getMonth()+1;case"day":return $.getDate()}},y=()=>{const L=a.minDate.getFullYear(),$=a.maxDate.getFullYear();return genOptions(L,$,"year",a.formatter,a.filter,c.value)},_=()=>{const L=g("year"),$=u(L)?a.minDate.getMonth()+1:1,O=d(L)?a.maxDate.getMonth()+1:12;return genOptions($,O,"month",a.formatter,a.filter,c.value)},S=()=>{const L=g("year"),$=g("month"),O=u(L)&&f($)?a.minDate.getDate():1,B=d(L)&&v($)?a.maxDate.getDate():getMonthEndDay(L,$);return genOptions(O,B,"day",a.formatter,a.filter,c.value)},x=()=>{var L;return(L=l.value)==null?void 0:L.confirm()},T=()=>o.value,w=computed(()=>a.columnsType.map(L=>{switch(L){case"year":return y();case"month":return _();case"day":return S();default:return[]}}));watch(o,L=>{isSameValue(L,a.modelValue)||n("update:modelValue",L)}),watch(()=>a.modelValue,(L,$)=>{s.value=isSameValue($,o.value),L=formatValueRange(L,w.value),isSameValue(L,o.value)||(o.value=L),s.value=!1},{immediate:!0});const E=(...L)=>n("change",...L),P=(...L)=>n("cancel",...L),D=(...L)=>n("confirm",...L);return useExpose({confirm:x,getSelectedDate:T}),()=>createVNode$1(Picker,mergeProps({ref:l,modelValue:o.value,"onUpdate:modelValue":L=>o.value=L,columns:w.value,onChange:E,onCancel:P,onConfirm:D},pick(a,pickerInheritKeys)),r)}});const DatePicker=withInstall(stdin_default$U),[name$N,bem$N,t$8]=createNamespace("dialog"),dialogProps=extend$1({},popupSharedProps,{title:String,theme:String,width:numericProp,message:[String,Function],callback:Function,allowHtml:Boolean,className:unknownProp,transition:makeStringProp("van-dialog-bounce"),messageAlign:String,closeOnPopstate:truthProp,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:truthProp,closeOnClickOverlay:Boolean,keyboardEnabled:truthProp}),popupInheritKeys$1=[...popupSharedPropKeys,"transition","closeOnPopstate"];var stdin_default$T=defineComponent({name:name$N,props:dialogProps,emits:["confirm","cancel","keydown","update:show"],setup(a,{emit:n,slots:r}){const o=ref(),s=reactive({confirm:!1,cancel:!1}),l=w=>n("update:show",w),c=w=>{var E;l(!1),(E=a.callback)==null||E.call(a,w)},u=w=>()=>{a.show&&(n(w),a.beforeClose?(s[w]=!0,callInterceptor(a.beforeClose,{args:[w],done(){c(w),s[w]=!1},canceled(){s[w]=!1}})):c(w))},d=u("cancel"),f=u("confirm"),v=withKeys(w=>{var E,P;if(!a.keyboardEnabled||w.target!==((P=(E=o.value)==null?void 0:E.popupRef)==null?void 0:P.value))return;({Enter:a.showConfirmButton?f:noop$2,Escape:a.showCancelButton?d:noop$2})[w.key](),n("keydown",w)},["enter","esc"]),g=()=>{const w=r.title?r.title():a.title;if(w)return createVNode$1("div",{class:bem$N("header",{isolated:!a.message&&!r.default})},[w])},y=w=>{const{message:E,allowHtml:P,messageAlign:D}=a,L=bem$N("message",{"has-title":w,[D]:D}),$=isFunction$1(E)?E():E;return P&&typeof $=="string"?createVNode$1("div",{class:L,innerHTML:$},null):createVNode$1("div",{class:L},[$])},_=()=>{if(r.default)return createVNode$1("div",{class:bem$N("content")},[r.default()]);const{title:w,message:E,allowHtml:P}=a;if(E){const D=!!(w||r.title);return createVNode$1("div",{key:P?1:0,class:bem$N("content",{isolated:!D})},[y(D)])}},S=()=>createVNode$1("div",{class:[BORDER_TOP,bem$N("footer")]},[a.showCancelButton&&createVNode$1(Button,{size:"large",text:a.cancelButtonText||t$8("cancel"),class:bem$N("cancel"),style:{color:a.cancelButtonColor},loading:s.cancel,disabled:a.cancelButtonDisabled,onClick:d},null),a.showConfirmButton&&createVNode$1(Button,{size:"large",text:a.confirmButtonText||t$8("confirm"),class:[bem$N("confirm"),{[BORDER_LEFT]:a.showCancelButton}],style:{color:a.confirmButtonColor},loading:s.confirm,disabled:a.confirmButtonDisabled,onClick:f},null)]),x=()=>createVNode$1(ActionBar,{class:bem$N("footer")},{default:()=>[a.showCancelButton&&createVNode$1(ActionBarButton,{type:"warning",text:a.cancelButtonText||t$8("cancel"),class:bem$N("cancel"),color:a.cancelButtonColor,loading:s.cancel,disabled:a.cancelButtonDisabled,onClick:d},null),a.showConfirmButton&&createVNode$1(ActionBarButton,{type:"danger",text:a.confirmButtonText||t$8("confirm"),class:bem$N("confirm"),color:a.confirmButtonColor,loading:s.confirm,disabled:a.confirmButtonDisabled,onClick:f},null)]}),T=()=>r.footer?r.footer():a.theme==="round-button"?x():S();return()=>{const{width:w,title:E,theme:P,message:D,className:L}=a;return createVNode$1(Popup,mergeProps({ref:o,role:"dialog",class:[bem$N([P]),L],style:{width:addUnit(w)},tabindex:0,"aria-labelledby":E||D,onKeydown:v,"onUpdate:show":l},pick(a,popupInheritKeys$1)),{default:()=>[g(),_(),T()]})}}});const Dialog=withInstall(stdin_default$T),[name$M,bem$M]=createNamespace("divider"),dividerProps={dashed:Boolean,hairline:truthProp,vertical:Boolean,contentPosition:makeStringProp("center")};var stdin_default$S=defineComponent({name:name$M,props:dividerProps,setup(a,{slots:n}){return()=>{var r;return createVNode$1("div",{role:"separator",class:bem$M({dashed:a.dashed,hairline:a.hairline,vertical:a.vertical,[`content-${a.contentPosition}`]:!!n.default&&!a.vertical})},[!a.vertical&&((r=n.default)==null?void 0:r.call(n))])}}});const Divider=withInstall(stdin_default$S),[name$L,bem$L]=createNamespace("dropdown-menu"),dropdownMenuProps={overlay:truthProp,zIndex:numericProp,duration:makeNumericProp(.2),direction:makeStringProp("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:truthProp,closeOnClickOverlay:truthProp,swipeThreshold:numericProp},DROPDOWN_KEY=Symbol(name$L);var stdin_default$R=defineComponent({name:name$L,props:dropdownMenuProps,setup(a,{slots:n}){const r=useId(),o=ref(),s=ref(),l=ref(0),{children:c,linkChildren:u}=useChildren(DROPDOWN_KEY),d=useScrollParent(o),f=computed(()=>c.some(E=>E.state.showWrapper)),v=computed(()=>a.swipeThreshold&&c.length>+a.swipeThreshold),g=computed(()=>{if(f.value&&isDef$1(a.zIndex))return{zIndex:+a.zIndex+1}}),y=()=>{c.forEach(E=>{E.toggle(!1)})},_=()=>{a.closeOnClickOutside&&y()},S=()=>{if(s.value){const E=useRect(s);a.direction==="down"?l.value=E.bottom:l.value=windowHeight.value-E.top}},x=()=>{f.value&&S()},T=E=>{c.forEach((P,D)=>{D===E?P.toggle():P.state.showPopup&&P.toggle(!1,{immediate:!0})})},w=(E,P)=>{const{showPopup:D}=E.state,{disabled:L,titleClass:$}=E;return createVNode$1("div",{id:`${r}-${P}`,role:"button",tabindex:L?void 0:0,"data-allow-mismatch":"attribute",class:[bem$L("item",{disabled:L,grow:v.value}),{[HAPTICS_FEEDBACK]:!L}],onClick:()=>{L||T(P)}},[createVNode$1("span",{class:[bem$L("title",{down:D===(a.direction==="down"),active:D}),$],style:{color:D?a.activeColor:""}},[createVNode$1("div",{class:"van-ellipsis"},[E.renderTitle()])])])};return useExpose({close:y}),u({id:r,props:a,offset:l,updateOffset:S}),useClickAway(o,_),useEventListener("scroll",x,{target:d,passive:!0}),()=>{var E;return createVNode$1("div",{ref:o,class:bem$L()},[createVNode$1("div",{ref:s,style:g.value,class:bem$L("bar",{opened:f.value,scrollable:v.value})},[c.map(w)]),(E=n.default)==null?void 0:E.call(n)])}}});const[name$K,bem$K]=createNamespace("dropdown-item"),dropdownItemProps={title:String,options:makeArrayProp(),disabled:Boolean,teleport:[String,Object],lazyRender:truthProp,modelValue:unknownProp,titleClass:unknownProp};var stdin_default$Q=defineComponent({name:name$K,inheritAttrs:!1,props:dropdownItemProps,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:n,slots:r,attrs:o}){const s=reactive({showPopup:!1,transition:!0,showWrapper:!1}),l=ref(),{parent:c,index:u}=useParent(DROPDOWN_KEY);if(!c)return;const d=E=>()=>n(E),f=d("open"),v=d("close"),g=d("opened"),y=()=>{s.showWrapper=!1,n("closed")},_=E=>{a.teleport&&E.stopPropagation()},S=(E=!s.showPopup,P={})=>{E!==s.showPopup&&(s.showPopup=E,s.transition=!P.immediate,E&&(c.updateOffset(),s.showWrapper=!0))},x=()=>{if(r.title)return r.title();if(a.title)return a.title;const E=a.options.find(P=>P.value===a.modelValue);return E?E.text:""},T=E=>{const{activeColor:P}=c.props,{disabled:D}=E,L=E.value===a.modelValue,$=()=>{D||(s.showPopup=!1,E.value!==a.modelValue&&(n("update:modelValue",E.value),n("change",E.value)))},O=()=>{if(L)return createVNode$1(Icon,{class:bem$K("icon"),color:D?void 0:P,name:"success"},null)};return createVNode$1(Cell,{role:"menuitem",key:String(E.value),icon:E.icon,title:E.text,class:bem$K("option",{active:L,disabled:D}),style:{color:L?P:""},tabindex:L?0:-1,clickable:!D,onClick:$},{value:O})},w=()=>{const{offset:E}=c,{autoLocate:P,zIndex:D,overlay:L,duration:$,direction:O,closeOnClickOverlay:B}=c.props,V=getZIndexStyle(D);let F=E.value;if(P&&l.value){const U=getContainingBlock$1(l.value);U&&(F-=useRect(U).top)}return O==="down"?V.top=`${F}px`:V.bottom=`${F}px`,withDirectives(createVNode$1("div",mergeProps({ref:l,style:V,class:bem$K([O]),onClick:_},o),[createVNode$1(Popup,{show:s.showPopup,"onUpdate:show":U=>s.showPopup=U,role:"menu",class:bem$K("content"),overlay:L,position:O==="down"?"top":"bottom",duration:s.transition?$:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${c.id}-${u.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:B,onOpen:f,onClose:v,onOpened:g,onClosed:y},{default:()=>{var U;return[a.options.map(T),(U=r.default)==null?void 0:U.call(r)]}})]),[[vShow,s.showWrapper]])};return useExpose({state:s,toggle:S,renderTitle:x}),()=>a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[w()]}):w()}});const DropdownItem=withInstall(stdin_default$Q),DropdownMenu=withInstall(stdin_default$R),floatingBubbleProps={gap:makeNumberProp(24),icon:String,axis:makeStringProp("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[name$J,bem$J]=createNamespace("floating-bubble");var stdin_default$P=defineComponent({name:name$J,inheritAttrs:!1,props:floatingBubbleProps,emits:["click","update:offset","offsetChange"],setup(a,{slots:n,emit:r,attrs:o}){const s=ref(),l=ref({x:0,y:0,width:0,height:0}),c=computed(()=>({top:a.gap,right:windowWidth.value-l.value.width-a.gap,bottom:windowHeight.value-l.value.height-a.gap,left:a.gap})),u=ref(!1);let d=!1;const f=computed(()=>{const P={},D=addUnit(l.value.x),L=addUnit(l.value.y);return P.transform=`translate3d(${D}, ${L}, 0)`,(u.value||!d)&&(P.transition="none"),P}),v=()=>{if(!E.value)return;const{width:P,height:D}=useRect(s.value),{offset:L}=a;l.value={x:L.x>-1?L.x:windowWidth.value-P-a.gap,y:L.y>-1?L.y:windowHeight.value-D-a.gap,width:P,height:D}},g=useTouch();let y=0,_=0;const S=P=>{g.start(P),u.value=!0,y=l.value.x,_=l.value.y};useEventListener("touchmove",P=>{if(P.preventDefault(),g.move(P),a.axis!=="lock"&&!g.isTap.value){if(a.axis==="x"||a.axis==="xy"){let L=y+g.deltaX.value;L<c.value.left&&(L=c.value.left),L>c.value.right&&(L=c.value.right),l.value.x=L}if(a.axis==="y"||a.axis==="xy"){let L=_+g.deltaY.value;L<c.value.top&&(L=c.value.top),L>c.value.bottom&&(L=c.value.bottom),l.value.y=L}const D=pick(l.value,["x","y"]);r("update:offset",D)}},{target:s});const T=()=>{u.value=!1,nextTick(()=>{if(a.magnetic==="x"){const P=closest([c.value.left,c.value.right],l.value.x);l.value.x=P}if(a.magnetic==="y"){const P=closest([c.value.top,c.value.bottom],l.value.y);l.value.y=P}if(!g.isTap.value){const P=pick(l.value,["x","y"]);r("update:offset",P),(y!==P.x||_!==P.y)&&r("offsetChange",P)}})},w=P=>{g.isTap.value?r("click",P):P.stopPropagation()};onMounted(()=>{v(),nextTick(()=>{d=!0})}),watch([windowWidth,windowHeight,()=>a.gap,()=>a.offset],v,{deep:!0});const E=ref(!0);return onActivated(()=>{E.value=!0}),onDeactivated(()=>{a.teleport&&(E.value=!1)}),()=>{const P=withDirectives(createVNode$1("div",mergeProps({class:bem$J(),ref:s,onTouchstartPassive:S,onTouchend:T,onTouchcancel:T,onClickCapture:w,style:f.value},o),[n.default?n.default():createVNode$1(stdin_default$1N,{name:a.icon,class:bem$J("icon")},null)]),[[vShow,E.value]]);return a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[P]}):P}}});const FloatingBubble=withInstall(stdin_default$P),floatingPanelProps={height:makeNumericProp(0),anchors:makeArrayProp(),duration:makeNumericProp(.3),contentDraggable:truthProp,lockScroll:Boolean,safeAreaInsetBottom:truthProp},[name$I,bem$I]=createNamespace("floating-panel");var stdin_default$O=defineComponent({name:name$I,props:floatingPanelProps,emits:["heightChange","update:height"],setup(a,{emit:n,slots:r}){const s=ref(),l=ref(),c=useSyncPropRef(()=>+a.height,P=>n("update:height",P)),u=computed(()=>{var P,D;return{min:(P=a.anchors[0])!=null?P:100,max:(D=a.anchors[a.anchors.length-1])!=null?D:Math.round(windowHeight.value*.6)}}),d=computed(()=>a.anchors.length>=2?a.anchors:[u.value.min,u.value.max]),f=ref(!1),v=computed(()=>({height:addUnit(u.value.max),transform:`translateY(calc(100% + ${addUnit(-c.value)}))`,transition:f.value?"none":`transform ${a.duration}s cubic-bezier(0.18, 0.89, 0.32, 1.28)`})),g=P=>{const D=Math.abs(P),{min:L,max:$}=u.value;return D>$?-($+(D-$)*.2):D<L?-(L-(L-D)*.2):P};let y,_=-1;const S=useTouch(),x=P=>{S.start(P),f.value=!0,y=-c.value,_=-1},T=P=>{var D;S.move(P);const L=P.target;if(l.value===L||(D=l.value)!=null&&D.contains(L)){const{scrollTop:O}=l.value;if(_=Math.max(_,O),!a.contentDraggable)return;if(-y<u.value.max)preventDefault$1(P,!0);else if(!(O<=0&&S.deltaY.value>0)||_>0)return}const $=S.deltaY.value+y;c.value=-g($)},w=()=>{_=-1,f.value=!1,c.value=closest(d.value,c.value),c.value!==-y&&n("heightChange",{height:c.value})};watch(u,()=>{c.value=closest(d.value,c.value)},{immediate:!0}),useLockScroll(s,()=>a.lockScroll||f.value),useEventListener("touchmove",T,{target:s});const E=()=>r.header?r.header():createVNode$1("div",{class:bem$I("header")},[createVNode$1("div",{class:bem$I("header-bar")},null)]);return()=>{var P;return createVNode$1("div",{class:[bem$I(),{"van-safe-area-bottom":a.safeAreaInsetBottom}],ref:s,style:v.value,onTouchstartPassive:x,onTouchend:w,onTouchcancel:w},[E(),createVNode$1("div",{class:bem$I("content"),ref:l},[(P=r.default)==null?void 0:P.call(r)])])}}});const FloatingPanel=withInstall(stdin_default$O),[name$H,bem$H]=createNamespace("grid"),gridProps={square:Boolean,center:truthProp,border:truthProp,gutter:numericProp,reverse:Boolean,iconSize:numericProp,direction:String,clickable:Boolean,columnNum:makeNumericProp(4)},GRID_KEY=Symbol(name$H);var stdin_default$N=defineComponent({name:name$H,props:gridProps,setup(a,{slots:n}){const{linkChildren:r}=useChildren(GRID_KEY);return r({props:a}),()=>{var o;return createVNode$1("div",{style:{paddingLeft:addUnit(a.gutter)},class:[bem$H(),{[BORDER_TOP]:a.border&&!a.gutter}]},[(o=n.default)==null?void 0:o.call(n)])}}});const Grid$1=withInstall(stdin_default$N),[name$G,bem$G]=createNamespace("grid-item"),gridItemProps=extend$1({},routeProps,{dot:Boolean,text:String,icon:String,badge:numericProp,iconColor:String,iconPrefix:String,badgeProps:Object});var stdin_default$M=defineComponent({name:name$G,props:gridItemProps,setup(a,{slots:n}){const{parent:r,index:o}=useParent(GRID_KEY),s=useRoute$1();if(!r)return;const l=computed(()=>{const{square:v,gutter:g,columnNum:y}=r.props,_=`${100/+y}%`,S={flexBasis:_};if(v)S.paddingTop=_;else if(g){const x=addUnit(g);S.paddingRight=x,o.value>=+y&&(S.marginTop=x)}return S}),c=computed(()=>{const{square:v,gutter:g}=r.props;if(v&&g){const y=addUnit(g);return{right:y,bottom:y,height:"auto"}}}),u=()=>{if(n.icon)return createVNode$1(Badge,mergeProps({dot:a.dot,content:a.badge},a.badgeProps),{default:n.icon});if(a.icon)return createVNode$1(Icon,{dot:a.dot,name:a.icon,size:r.props.iconSize,badge:a.badge,class:bem$G("icon"),color:a.iconColor,badgeProps:a.badgeProps,classPrefix:a.iconPrefix},null)},d=()=>{if(n.text)return n.text();if(a.text)return createVNode$1("span",{class:bem$G("text")},[a.text])},f=()=>n.default?n.default():[u(),d()];return()=>{const{center:v,border:g,square:y,gutter:_,reverse:S,direction:x,clickable:T}=r.props,w=[bem$G("content",[x,{center:v,square:y,reverse:S,clickable:T,surround:g&&_}]),{[BORDER]:g}];return createVNode$1("div",{class:[bem$G({square:y})],style:l.value},[createVNode$1("div",{role:T?"button":void 0,class:w,style:c.value,tabindex:T?0:void 0,onClick:s},[f()])])}}});const GridItem=withInstall(stdin_default$M),[name$F,bem$F]=createNamespace("highlight"),highlightProps={autoEscape:truthProp,caseSensitive:Boolean,highlightClass:String,highlightTag:makeStringProp("span"),keywords:makeRequiredProp([String,Array]),sourceString:makeStringProp(""),tag:makeStringProp("div"),unhighlightClass:String,unhighlightTag:makeStringProp("span")};var stdin_default$L=defineComponent({name:name$F,props:highlightProps,setup(a){const n=computed(()=>{const{autoEscape:o,caseSensitive:s,keywords:l,sourceString:c}=a,u=s?"g":"gi";let f=(Array.isArray(l)?l:[l]).filter(g=>g).reduce((g,y)=>{o&&(y=y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));const _=new RegExp(y,u);let S;for(;S=_.exec(c);){const x=S.index,T=_.lastIndex;if(x>=T){_.lastIndex++;continue}g.push({start:x,end:T,highlight:!0})}return g},[]);f=f.sort((g,y)=>g.start-y.start).reduce((g,y)=>{const _=g[g.length-1];if(!_||y.start>_.end){const S=_?_.end:0,x=y.start;S!==x&&g.push({start:S,end:x,highlight:!1}),g.push(y)}else _.end=Math.max(_.end,y.end);return g},[]);const v=f[f.length-1];return v||f.push({start:0,end:c.length,highlight:!1}),v&&v.end<c.length&&f.push({start:v.end,end:c.length,highlight:!1}),f}),r=()=>{const{sourceString:o,highlightClass:s,unhighlightClass:l,highlightTag:c,unhighlightTag:u}=a;return n.value.map(d=>{const{start:f,end:v,highlight:g}=d,y=o.slice(f,v);return g?createVNode$1(c,{class:[bem$F("tag"),s]},{default:()=>[y]}):createVNode$1(u,{class:l},{default:()=>[y]})})};return()=>{const{tag:o}=a;return createVNode$1(o,{class:bem$F()},{default:()=>[r()]})}}});const Highlight=withInstall(stdin_default$L),getDistance=a=>Math.sqrt((a[0].clientX-a[1].clientX)**2+(a[0].clientY-a[1].clientY)**2),getCenter=a=>({x:(a[0].clientX+a[1].clientX)/2,y:(a[0].clientY+a[1].clientY)/2}),bem$E=createNamespace("image-preview")[1],longImageRatio=2.6,imagePreviewItemProps={src:String,show:Boolean,active:Number,minZoom:makeRequiredProp(numericProp),maxZoom:makeRequiredProp(numericProp),rootWidth:makeRequiredProp(Number),rootHeight:makeRequiredProp(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var stdin_default$K=defineComponent({props:imagePreviewItemProps,emits:["scale","close","longPress"],setup(a,{emit:n,slots:r}){const o=reactive({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),s=useTouch(),l=ref(),c=ref(),u=ref(!1),d=ref(!1);let f=0;const v=computed(()=>{const{scale:q,moveX:ie,moveY:ee,moving:he,zooming:pe,initializing:ce}=o,ye={transitionDuration:pe||he||ce?"0s":".3s"};return(q!==1||d.value)&&(ye.transform=`matrix(${q}, 0, 0, ${q}, ${ie}, ${ee})`),ye}),g=computed(()=>{if(o.imageRatio){const{rootWidth:q,rootHeight:ie}=a,ee=u.value?ie/o.imageRatio:q;return Math.max(0,(o.scale*ee-q)/2)}return 0}),y=computed(()=>{if(o.imageRatio){const{rootWidth:q,rootHeight:ie}=a,ee=u.value?ie:q*o.imageRatio;return Math.max(0,(o.scale*ee-ie)/2)}return 0}),_=(q,ie)=>{var ee;if(q=clamp$2(q,+a.minZoom,+a.maxZoom+1),q!==o.scale){const he=q/o.scale;if(o.scale=q,ie){const pe=useRect((ee=l.value)==null?void 0:ee.$el),ce={x:pe.width*.5,y:pe.height*.5},ye=o.moveX-(ie.x-pe.left-ce.x)*(he-1),we=o.moveY-(ie.y-pe.top-ce.y)*(he-1);o.moveX=clamp$2(ye,-g.value,g.value),o.moveY=clamp$2(we,-y.value,y.value)}else o.moveX=0,o.moveY=d.value?f:0;n("scale",{scale:q,index:a.active})}},S=()=>{_(1)},x=()=>{const q=o.scale>1?1:2;_(q,q===2||d.value?{x:s.startX.value,y:s.startY.value}:void 0)};let T,w,E,P,D,L,$,O,B=!1;const V=q=>{const{touches:ie}=q;if(T=ie.length,T===2&&a.disableZoom)return;const{offsetX:ee}=s;s.start(q),w=o.moveX,E=o.moveY,O=Date.now(),B=!1,o.moving=T===1&&(o.scale!==1||d.value),o.zooming=T===2&&!ee.value,o.zooming&&(P=o.scale,D=getDistance(ie))},F=q=>{const{touches:ie}=q;if(s.move(q),o.moving){const{deltaX:ee,deltaY:he}=s,pe=ee.value+w,ce=he.value+E;if((a.vertical?s.isVertical()&&Math.abs(ce)>y.value:s.isHorizontal()&&Math.abs(pe)>g.value)&&!B){o.moving=!1;return}B=!0,preventDefault$1(q,!0),o.moveX=clamp$2(pe,-g.value,g.value),o.moveY=clamp$2(ce,-y.value,y.value)}if(o.zooming&&(preventDefault$1(q,!0),ie.length===2)){const ee=getDistance(ie),he=P*ee/D;L=getCenter(ie),_(he,L)}},U=q=>{var ie;const ee=(ie=c.value)==null?void 0:ie.$el;if(!ee)return;const he=ee.firstElementChild,pe=q.target===ee,ce=he==null?void 0:he.contains(q.target);!a.closeOnClickImage&&ce||!a.closeOnClickOverlay&&pe||n("close")},G=q=>{if(T>1)return;const ie=Date.now()-O,ee=250;s.isTap.value&&(ie<ee?a.doubleScale?$?(clearTimeout($),$=null,x()):$=setTimeout(()=>{U(q),$=null},ee):U(q):ie>LONG_PRESS_START_TIME&&n("longPress"))},W=q=>{let ie=!1;if((o.moving||o.zooming)&&(ie=!0,o.moving&&w===o.moveX&&E===o.moveY&&(ie=!1),!q.touches.length)){o.zooming&&(o.moveX=clamp$2(o.moveX,-g.value,g.value),o.moveY=clamp$2(o.moveY,-y.value,y.value),o.zooming=!1),o.moving=!1,w=0,E=0,P=1,o.scale<1&&S();const ee=+a.maxZoom;o.scale>ee&&_(ee,L)}preventDefault$1(q,ie),G(q),s.reset()},j=()=>{const{rootWidth:q,rootHeight:ie}=a,ee=ie/q,{imageRatio:he}=o;u.value=o.imageRatio>ee&&he<longImageRatio,d.value=o.imageRatio>ee&&he>=longImageRatio,d.value&&(f=(he*q-ie)/2,o.moveY=f,o.initializing=!0,raf(()=>{o.initializing=!1})),S()},K=q=>{const{naturalWidth:ie,naturalHeight:ee}=q.target;o.imageRatio=ee/ie,j()};return watch(()=>a.active,S),watch(()=>a.show,q=>{q||S()}),watch(()=>[a.rootWidth,a.rootHeight],j),useEventListener("touchmove",F,{target:computed(()=>{var q;return(q=c.value)==null?void 0:q.$el})}),useExpose({resetScale:S}),()=>{const q={loading:()=>createVNode$1(Loading,{type:"spinner"},null)};return createVNode$1(SwipeItem,{ref:c,class:bem$E("swipe-item"),onTouchstartPassive:V,onTouchend:W,onTouchcancel:W},{default:()=>[r.image?createVNode$1("div",{class:bem$E("image-wrap")},[r.image({src:a.src,onLoad:K,style:v.value})]):createVNode$1(Image$1,{ref:l,src:a.src,fit:"contain",class:bem$E("image",{vertical:u.value}),style:v.value,onLoad:K},q)]})}}});const[name$E,bem$D]=createNamespace("image-preview"),popupProps$1=["show","teleport","transition","overlayStyle","closeOnPopstate"],imagePreviewProps={show:Boolean,loop:truthProp,images:makeArrayProp(),minZoom:makeNumericProp(1/3),maxZoom:makeNumericProp(3),overlay:truthProp,vertical:Boolean,closeable:Boolean,showIndex:truthProp,className:unknownProp,closeIcon:makeStringProp("clear"),transition:String,beforeClose:Function,doubleScale:truthProp,overlayClass:unknownProp,overlayStyle:Object,swipeDuration:makeNumericProp(300),startPosition:makeNumericProp(0),showIndicators:Boolean,closeOnPopstate:truthProp,closeOnClickImage:truthProp,closeOnClickOverlay:truthProp,closeIconPosition:makeStringProp("top-right"),teleport:[String,Object]};var stdin_default$J=defineComponent({name:name$E,props:imagePreviewProps,emits:["scale","close","closed","change","longPress","update:show"],setup(a,{emit:n,slots:r}){const o=ref(),s=ref(),l=reactive({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),c=()=>{if(o.value){const P=useRect(o.value.$el);l.rootWidth=P.width,l.rootHeight=P.height,o.value.resize()}},u=P=>n("scale",P),d=P=>n("update:show",P),f=()=>{callInterceptor(a.beforeClose,{args:[l.active],done:()=>d(!1)})},v=P=>{P!==l.active&&(l.active=P,n("change",P))},g=()=>{if(a.showIndex)return createVNode$1("div",{class:bem$D("index")},[r.index?r.index({index:l.active}):`${l.active+1} / ${a.images.length}`])},y=()=>{if(r.cover)return createVNode$1("div",{class:bem$D("cover")},[r.cover()])},_=()=>{l.disableZoom=!0},S=()=>{l.disableZoom=!1},x=()=>createVNode$1(Swipe,{ref:o,lazyRender:!0,loop:a.loop,class:bem$D("swipe"),vertical:a.vertical,duration:a.swipeDuration,initialSwipe:a.startPosition,showIndicators:a.showIndicators,indicatorColor:"white",onChange:v,onDragEnd:S,onDragStart:_},{default:()=>[a.images.map((P,D)=>createVNode$1(stdin_default$K,{ref:L=>{D===l.active&&(s.value=L)},src:P,show:a.show,active:l.active,maxZoom:a.maxZoom,minZoom:a.minZoom,rootWidth:l.rootWidth,rootHeight:l.rootHeight,disableZoom:l.disableZoom,doubleScale:a.doubleScale,closeOnClickImage:a.closeOnClickImage,closeOnClickOverlay:a.closeOnClickOverlay,vertical:a.vertical,onScale:u,onClose:f,onLongPress:()=>n("longPress",{index:D})},{image:r.image}))]}),T=()=>{if(a.closeable)return createVNode$1(Icon,{role:"button",name:a.closeIcon,class:[bem$D("close-icon",a.closeIconPosition),HAPTICS_FEEDBACK],onClick:f},null)},w=()=>n("closed"),E=(P,D)=>{var L;return(L=o.value)==null?void 0:L.swipeTo(P,D)};return useExpose({resetScale:()=>{var P;(P=s.value)==null||P.resetScale()},swipeTo:E}),onMounted(c),watch([windowWidth,windowHeight],c),watch(()=>a.startPosition,P=>v(+P)),watch(()=>a.show,P=>{const{images:D,startPosition:L}=a;P?(v(+L),nextTick(()=>{c(),E(+L,{immediate:!0})})):n("close",{index:l.active,url:D[l.active]})}),()=>createVNode$1(Popup,mergeProps({class:[bem$D(),a.className],overlayClass:[bem$D("overlay"),a.overlayClass],onClosed:w,"onUpdate:show":d},pick(a,popupProps$1)),{default:()=>[T(),x(),g(),y()]})}});let instance;const defaultConfig={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function initInstance(){({instance}=mountComponent({setup(){const{state:a,toggle:n}=usePopupState(),r=()=>{a.images=[]};return()=>createVNode$1(stdin_default$J,mergeProps(a,{onClosed:r,"onUpdate:show":n}),null)}}))}const showImagePreview=(a,n=0)=>{if(inBrowser$1)return instance||initInstance(),a=Array.isArray(a)?{images:a,startPosition:n}:a,instance.open(extend$1({},defaultConfig,a)),instance},ImagePreview=withInstall(stdin_default$J);function genAlphabet(){return Array(26).fill("").map((r,o)=>String.fromCharCode(65+o))}const[name$D,bem$C]=createNamespace("index-bar"),indexBarProps={sticky:truthProp,zIndex:numericProp,teleport:[String,Object],highlightColor:String,stickyOffsetTop:makeNumberProp(0),indexList:{type:Array,default:genAlphabet}},INDEX_BAR_KEY=Symbol(name$D);var stdin_default$I=defineComponent({name:name$D,props:indexBarProps,emits:["select","change"],setup(a,{emit:n,slots:r}){const o=ref(),s=ref(),l=ref(""),c=useTouch(),u=useScrollParent(o),{children:d,linkChildren:f}=useChildren(INDEX_BAR_KEY);let v;f({props:a});const g=computed(()=>{if(isDef$1(a.zIndex))return{zIndex:+a.zIndex+1}}),y=computed(()=>{if(a.highlightColor)return{color:a.highlightColor}}),_=(B,V)=>{for(let F=d.length-1;F>=0;F--){const U=F>0?V[F-1].height:0,G=a.sticky?U+a.stickyOffsetTop:0;if(B+G>=V[F].top)return F}return-1},S=B=>d.find(V=>String(V.index)===B),x=()=>{if(isHidden(o))return;const{sticky:B,indexList:V}=a,F=getScrollTop(u.value),U=useRect(u),G=d.map(j=>j.getRect(u.value,U));let W=-1;if(v){const j=S(v);if(j){const K=j.getRect(u.value,U);a.sticky&&a.stickyOffsetTop?W=_(K.top-a.stickyOffsetTop,G):W=_(K.top,G)}}else W=_(F,G);l.value=V[W],B&&d.forEach((j,K)=>{const{state:q,$el:ie}=j;if(K===W||K===W-1){const ee=ie.getBoundingClientRect();q.left=ee.left,q.width=ee.width}else q.left=null,q.width=null;if(K===W)q.active=!0,q.top=Math.max(a.stickyOffsetTop,G[K].top-F)+U.top;else if(K===W-1&&v===""){const ee=G[W].top-F;q.active=ee>0,q.top=ee+U.top-G[K].height}else q.active=!1}),v=""},T=()=>{nextTick(x)};useEventListener("scroll",x,{target:u,passive:!0}),onMounted(T),watch(()=>a.indexList,T),watch(l,B=>{B&&n("change",B)});const w=()=>a.indexList.map(B=>{const V=B===l.value;return createVNode$1("span",{class:bem$C("index",{active:V}),style:V?y.value:void 0,"data-index":B},[B])}),E=B=>{v=String(B);const V=S(v);if(V){const F=getScrollTop(u.value),U=useRect(u),{offsetHeight:G}=document.documentElement;if(V.$el.scrollIntoView(),F===G-U.height){x();return}a.sticky&&a.stickyOffsetTop&&(getRootScrollTop()===G-U.height?setRootScrollTop(getRootScrollTop()):setRootScrollTop(getRootScrollTop()-a.stickyOffsetTop)),n("select",V.index)}},P=B=>{const{index:V}=B.dataset;V&&E(V)},D=B=>{P(B.target)};let L;const $=B=>{if(c.move(B),c.isVertical()){preventDefault$1(B);const{clientX:V,clientY:F}=B.touches[0],U=document.elementFromPoint(V,F);if(U){const{index:G}=U.dataset;G&&L!==G&&(L=G,P(U))}}},O=()=>createVNode$1("div",{ref:s,class:bem$C("sidebar"),style:g.value,onClick:D,onTouchstartPassive:c.start},[w()]);return useExpose({scrollTo:E}),useEventListener("touchmove",$,{target:s}),()=>{var B;return createVNode$1("div",{ref:o,class:bem$C()},[a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[O()]}):O(),(B=r.default)==null?void 0:B.call(r)])}}});const[name$C,bem$B]=createNamespace("index-anchor"),indexAnchorProps={index:numericProp};var stdin_default$H=defineComponent({name:name$C,props:indexAnchorProps,setup(a,{slots:n}){const r=reactive({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),o=ref(),{parent:s}=useParent(INDEX_BAR_KEY);if(!s)return;const l=()=>r.active&&s.props.sticky,c=computed(()=>{const{zIndex:d,highlightColor:f}=s.props;if(l())return extend$1(getZIndexStyle(d),{left:r.left?`${r.left}px`:void 0,width:r.width?`${r.width}px`:void 0,transform:r.top?`translate3d(0, ${r.top}px, 0)`:void 0,color:f})});return useExpose({state:r,getRect:(d,f)=>{const v=useRect(o);return r.rect.height=v.height,d===window||d===document.body?r.rect.top=v.top+getRootScrollTop():r.rect.top=v.top+getScrollTop(d)-f.top,r.rect}}),()=>{const d=l();return createVNode$1("div",{ref:o,style:{height:d?`${r.rect.height}px`:void 0}},[createVNode$1("div",{style:c.value,class:[bem$B({sticky:d}),{[BORDER_BOTTOM]:d}]},[n.default?n.default():a.index])])}}});const IndexAnchor=withInstall(stdin_default$H),IndexBar=withInstall(stdin_default$I),[name$B,bem$A,t$7]=createNamespace("list"),listProps={error:Boolean,offset:makeNumericProp(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:makeStringProp("down"),loadingText:String,finishedText:String,immediateCheck:truthProp};var stdin_default$G=defineComponent({name:name$B,props:listProps,emits:["load","update:error","update:loading"],setup(a,{emit:n,slots:r}){const o=ref(a.loading),s=ref(),l=ref(),c=useTabStatus(),u=useScrollParent(s),d=computed(()=>a.scroller||u.value),f=()=>{nextTick(()=>{if(o.value||a.finished||a.disabled||a.error||(c==null?void 0:c.value)===!1)return;const{direction:S}=a,x=+a.offset,T=useRect(d);if(!T.height||isHidden(s))return;let w=!1;const E=useRect(l);S==="up"?w=T.top-E.top<=x:w=E.bottom-T.bottom<=x,w&&(o.value=!0,n("update:loading",!0),n("load"))})},v=()=>{if(a.finished){const S=r.finished?r.finished():a.finishedText;if(S)return createVNode$1("div",{class:bem$A("finished-text")},[S])}},g=()=>{n("update:error",!1),f()},y=()=>{if(a.error){const S=r.error?r.error():a.errorText;if(S)return createVNode$1("div",{role:"button",class:bem$A("error-text"),tabindex:0,onClick:g},[S])}},_=()=>{if(o.value&&!a.finished&&!a.disabled)return createVNode$1("div",{class:bem$A("loading")},[r.loading?r.loading():createVNode$1(Loading,{class:bem$A("loading-icon")},{default:()=>[a.loadingText||t$7("loading")]})])};return watch(()=>[a.loading,a.finished,a.error],f),c&&watch(c,S=>{S&&f()}),onUpdated(()=>{o.value=a.loading}),onMounted(()=>{a.immediateCheck&&f()}),useExpose({check:f}),useEventListener("scroll",f,{target:d,passive:!0}),()=>{var S;const x=(S=r.default)==null?void 0:S.call(r),T=createVNode$1("div",{ref:l,class:bem$A("placeholder")},null);return createVNode$1("div",{ref:s,role:"feed",class:bem$A(),"aria-busy":o.value},[a.direction==="down"?x:T,_(),v(),y(),a.direction==="up"?x:T])}}});const List=withInstall(stdin_default$G),[name$A,bem$z]=createNamespace("nav-bar"),navBarProps={title:String,fixed:Boolean,zIndex:numericProp,border:truthProp,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:truthProp};var stdin_default$F=defineComponent({name:name$A,props:navBarProps,emits:["clickLeft","clickRight"],setup(a,{emit:n,slots:r}){const o=ref(),s=usePlaceholder(o,bem$z),l=v=>{a.leftDisabled||n("clickLeft",v)},c=v=>{a.rightDisabled||n("clickRight",v)},u=()=>r.left?r.left():[a.leftArrow&&createVNode$1(Icon,{class:bem$z("arrow"),name:"arrow-left"},null),a.leftText&&createVNode$1("span",{class:bem$z("text")},[a.leftText])],d=()=>r.right?r.right():createVNode$1("span",{class:bem$z("text")},[a.rightText]),f=()=>{const{title:v,fixed:g,border:y,zIndex:_}=a,S=getZIndexStyle(_),x=a.leftArrow||a.leftText||r.left,T=a.rightText||r.right;return createVNode$1("div",{ref:o,style:S,class:[bem$z({fixed:g}),{[BORDER_BOTTOM]:y,"van-safe-area-top":a.safeAreaInsetTop}]},[createVNode$1("div",{class:bem$z("content")},[x&&createVNode$1("div",{class:[bem$z("left",{disabled:a.leftDisabled}),a.clickable&&!a.leftDisabled?HAPTICS_FEEDBACK:""],onClick:l},[u()]),createVNode$1("div",{class:[bem$z("title"),"van-ellipsis"]},[r.title?r.title():v]),T&&createVNode$1("div",{class:[bem$z("right",{disabled:a.rightDisabled}),a.clickable&&!a.rightDisabled?HAPTICS_FEEDBACK:""],onClick:c},[d()])])])};return()=>a.fixed&&a.placeholder?s(f):f()}});const NavBar=withInstall(stdin_default$F),[name$z,bem$y]=createNamespace("notice-bar"),noticeBarProps={text:String,mode:String,color:String,delay:makeNumericProp(1),speed:makeNumericProp(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var stdin_default$E=defineComponent({name:name$z,props:noticeBarProps,emits:["close","replay"],setup(a,{emit:n,slots:r}){let o=0,s=0,l;const c=ref(),u=ref(),d=reactive({show:!0,offset:0,duration:0}),f=()=>{if(r["left-icon"])return r["left-icon"]();if(a.leftIcon)return createVNode$1(Icon,{class:bem$y("left-icon"),name:a.leftIcon},null)},v=()=>{if(a.mode==="closeable")return"cross";if(a.mode==="link")return"arrow"},g=T=>{a.mode==="closeable"&&(d.show=!1,n("close",T))},y=()=>{if(r["right-icon"])return r["right-icon"]();const T=v();if(T)return createVNode$1(Icon,{name:T,class:bem$y("right-icon"),onClick:g},null)},_=()=>{d.offset=o,d.duration=0,raf(()=>{doubleRaf(()=>{d.offset=-s,d.duration=(s+o)/+a.speed,n("replay")})})},S=()=>{const T=a.scrollable===!1&&!a.wrapable,w={transform:d.offset?`translateX(${d.offset}px)`:"",transitionDuration:`${d.duration}s`};return createVNode$1("div",{ref:c,role:"marquee",class:bem$y("wrap")},[createVNode$1("div",{ref:u,style:w,class:[bem$y("content"),{"van-ellipsis":T}],onTransitionend:_},[r.default?r.default():a.text])])},x=()=>{const{delay:T,speed:w,scrollable:E}=a,P=isDef$1(T)?+T*1e3:0;o=0,s=0,d.offset=0,d.duration=0,clearTimeout(l),l=setTimeout(()=>{if(!c.value||!u.value||E===!1)return;const D=useRect(c).width,L=useRect(u).width;(E||L>D)&&doubleRaf(()=>{o=D,s=L,d.offset=-s,d.duration=s/+w})},P)};return onPopupReopen(x),onMountedOrActivated(x),useEventListener("pageshow",x),useExpose({reset:x}),watch(()=>[a.text,a.scrollable],x),()=>{const{color:T,wrapable:w,background:E}=a;return withDirectives(createVNode$1("div",{role:"alert",class:bem$y({wrapable:w}),style:{color:T,background:E}},[f(),S(),y()]),[[vShow,d.show]])}}});const NoticeBar=withInstall(stdin_default$E),[name$y,bem$x]=createNamespace("notify"),popupInheritProps=["lockScroll","position","show","teleport","zIndex"],notifyProps=extend$1({},popupSharedProps,{type:makeStringProp("danger"),color:String,message:numericProp,position:makeStringProp("top"),className:unknownProp,background:String,lockScroll:Boolean});var stdin_default$D=defineComponent({name:name$y,props:notifyProps,emits:["update:show"],setup(a,{emit:n,slots:r}){const o=s=>n("update:show",s);return()=>createVNode$1(Popup,mergeProps({class:[bem$x([a.type]),a.className],style:{color:a.color,background:a.background},overlay:!1,duration:.2,"onUpdate:show":o},pick(a,popupInheritProps)),{default:()=>[r.default?r.default():a.message]})}});const Notify=withInstall(stdin_default$D),[name$x,bem$w]=createNamespace("key"),CollapseIcon=createVNode$1("svg",{class:bem$w("collapse-icon"),viewBox:"0 0 30 24"},[createVNode$1("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),DeleteIcon=createVNode$1("svg",{class:bem$w("delete-icon"),viewBox:"0 0 32 22"},[createVNode$1("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var stdin_default$C=defineComponent({name:name$x,props:{type:String,text:numericProp,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(a,{emit:n,slots:r}){const o=ref(!1),s=useTouch(),l=f=>{s.start(f),o.value=!0},c=f=>{s.move(f),s.direction.value&&(o.value=!1)},u=f=>{o.value&&(r.default||preventDefault$1(f),o.value=!1,n("press",a.text,a.type))},d=()=>{if(a.loading)return createVNode$1(Loading,{class:bem$w("loading-icon")},null);const f=r.default?r.default():a.text;switch(a.type){case"delete":return f||DeleteIcon;case"extra":return f||CollapseIcon;default:return f}};return()=>createVNode$1("div",{class:bem$w("wrapper",{wider:a.wider}),onTouchstartPassive:l,onTouchmovePassive:c,onTouchend:u,onTouchcancel:u},[createVNode$1("div",{role:"button",tabindex:0,class:bem$w([a.color,{large:a.large,active:o.value,delete:a.type==="delete"}])},[d()])])}});const[name$w,bem$v]=createNamespace("number-keyboard"),numberKeyboardProps={show:Boolean,title:String,theme:makeStringProp("default"),zIndex:numericProp,teleport:[String,Object],maxlength:makeNumericProp(1/0),modelValue:makeStringProp(""),transition:truthProp,blurOnClose:truthProp,showDeleteKey:truthProp,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:truthProp,safeAreaInsetBottom:truthProp,extraKey:{type:[String,Array],default:""}};function shuffle(a){for(let n=a.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1)),o=a[n];a[n]=a[r],a[r]=o}return a}var stdin_default$B=defineComponent({name:name$w,inheritAttrs:!1,props:numberKeyboardProps,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(a,{emit:n,slots:r,attrs:o}){const s=ref(),l=()=>{const T=Array(9).fill("").map((w,E)=>({text:E+1}));return a.randomKeyOrder&&shuffle(T),T},c=()=>[...l(),{text:a.extraKey,type:"extra"},{text:0},{text:a.showDeleteKey?a.deleteButtonText:"",type:a.showDeleteKey?"delete":""}],u=()=>{const T=l(),{extraKey:w}=a,E=Array.isArray(w)?w:[w];return E.length===0?T.push({text:0,wider:!0}):E.length===1?T.push({text:0,wider:!0},{text:E[0],type:"extra"}):E.length===2&&T.push({text:E[0],type:"extra"},{text:0},{text:E[1],type:"extra"}),T},d=computed(()=>a.theme==="custom"?u():c()),f=()=>{a.show&&n("blur")},v=()=>{n("close"),a.blurOnClose&&f()},g=()=>n(a.show?"show":"hide"),y=(T,w)=>{if(T===""){w==="extra"&&f();return}const E=a.modelValue;w==="delete"?(n("delete"),n("update:modelValue",E.slice(0,E.length-1))):w==="close"?v():E.length<+a.maxlength&&(n("input",T),n("update:modelValue",E+T))},_=()=>{const{title:T,theme:w,closeButtonText:E}=a,P=r["title-left"],D=E&&w==="default";if(T||D||P)return createVNode$1("div",{class:bem$v("header")},[P&&createVNode$1("span",{class:bem$v("title-left")},[P()]),T&&createVNode$1("h2",{class:bem$v("title")},[T]),D&&createVNode$1("button",{type:"button",class:[bem$v("close"),HAPTICS_FEEDBACK],onClick:v},[E])])},S=()=>d.value.map(T=>{const w={};return T.type==="delete"&&(w.default=r.delete),T.type==="extra"&&(w.default=r["extra-key"]),createVNode$1(stdin_default$C,{key:T.text,text:T.text,type:T.type,wider:T.wider,color:T.color,onPress:y},w)}),x=()=>{if(a.theme==="custom")return createVNode$1("div",{class:bem$v("sidebar")},[a.showDeleteKey&&createVNode$1(stdin_default$C,{large:!0,text:a.deleteButtonText,type:"delete",onPress:y},{default:r.delete}),createVNode$1(stdin_default$C,{large:!0,text:a.closeButtonText,type:"close",color:"blue",loading:a.closeButtonLoading,onPress:y},null)])};return watch(()=>a.show,T=>{a.transition||n(T?"show":"hide")}),a.hideOnClickOutside&&useClickAway(s,f,{eventName:"touchstart"}),()=>{const T=_(),w=createVNode$1(Transition,{name:a.transition?"van-slide-up":""},{default:()=>[withDirectives(createVNode$1("div",mergeProps({ref:s,style:getZIndexStyle(a.zIndex),class:bem$v({unfit:!a.safeAreaInsetBottom,"with-title":!!T}),onAnimationend:g,onTouchstartPassive:stopPropagation},o),[T,createVNode$1("div",{class:bem$v("body")},[createVNode$1("div",{class:bem$v("keys")},[S()]),x()])]),[[vShow,a.show]])]});return a.teleport?createVNode$1(Teleport,{to:a.teleport},{default:()=>[w]}):w}}});const NumberKeyboard=withInstall(stdin_default$B),[name$v,bem$u,t$6]=createNamespace("pagination"),makePage=(a,n,r)=>({number:a,text:n,active:r}),paginationProps={mode:makeStringProp("multi"),prevText:String,nextText:String,pageCount:makeNumericProp(0),modelValue:makeNumberProp(0),totalItems:makeNumericProp(0),showPageSize:makeNumericProp(5),itemsPerPage:makeNumericProp(10),forceEllipses:Boolean,showPrevButton:truthProp,showNextButton:truthProp};var stdin_default$A=defineComponent({name:name$v,props:paginationProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const o=computed(()=>{const{pageCount:v,totalItems:g,itemsPerPage:y}=a,_=+v||Math.ceil(+g/+y);return Math.max(1,_)}),s=computed(()=>{const v=[],g=o.value,y=+a.showPageSize,{modelValue:_,forceEllipses:S}=a;let x=1,T=g;const w=y<g;w&&(x=Math.max(_-Math.floor(y/2),1),T=x+y-1,T>g&&(T=g,x=T-y+1));for(let E=x;E<=T;E++){const P=makePage(E,E,E===_);v.push(P)}if(w&&y>0&&S){if(x>1){const E=makePage(x-1,"...");v.unshift(E)}if(T<g){const E=makePage(T+1,"...");v.push(E)}}return v}),l=(v,g)=>{v=clamp$2(v,1,o.value),a.modelValue!==v&&(n("update:modelValue",v),g&&n("change",v))};watchEffect(()=>l(a.modelValue));const c=()=>createVNode$1("li",{class:bem$u("page-desc")},[r.pageDesc?r.pageDesc():`${a.modelValue}/${o.value}`]),u=()=>{const{mode:v,modelValue:g,showPrevButton:y}=a;if(!y)return;const _=r["prev-text"],S=g===1;return createVNode$1("li",{class:[bem$u("item",{disabled:S,border:v==="simple",prev:!0}),BORDER_SURROUND]},[createVNode$1("button",{type:"button",disabled:S,onClick:()=>l(g-1,!0)},[_?_():a.prevText||t$6("prev")])])},d=()=>{const{mode:v,modelValue:g,showNextButton:y}=a;if(!y)return;const _=r["next-text"],S=g===o.value;return createVNode$1("li",{class:[bem$u("item",{disabled:S,border:v==="simple",next:!0}),BORDER_SURROUND]},[createVNode$1("button",{type:"button",disabled:S,onClick:()=>l(g+1,!0)},[_?_():a.nextText||t$6("next")])])},f=()=>s.value.map(v=>createVNode$1("li",{class:[bem$u("item",{active:v.active,page:!0}),BORDER_SURROUND]},[createVNode$1("button",{type:"button","aria-current":v.active||void 0,onClick:()=>l(v.number,!0)},[r.page?r.page(v):v.text])]));return()=>createVNode$1("nav",{role:"navigation",class:bem$u()},[createVNode$1("ul",{class:bem$u("items")},[u(),a.mode==="simple"?c():f(),d()])])}});const Pagination=withInstall(stdin_default$A),[name$u,bem$t]=createNamespace("password-input"),passwordInputProps={info:String,mask:truthProp,value:makeStringProp(""),gutter:numericProp,length:makeNumericProp(6),focused:Boolean,errorInfo:String};var stdin_default$z=defineComponent({name:name$u,props:passwordInputProps,emits:["focus"],setup(a,{emit:n}){const r=s=>{s.stopPropagation(),n("focus",s)},o=()=>{const s=[],{mask:l,value:c,gutter:u,focused:d}=a,f=+a.length;for(let v=0;v<f;v++){const g=c[v],y=v!==0&&!u,_=d&&v===c.length;let S;v!==0&&u&&(S={marginLeft:addUnit(u)}),s.push(createVNode$1("li",{class:[{[BORDER_LEFT]:y},bem$t("item",{focus:_})],style:S},[l?createVNode$1("i",{style:{visibility:g?"visible":"hidden"}},null):g,_&&createVNode$1("div",{class:bem$t("cursor")},null)]))}return s};return()=>{const s=a.errorInfo||a.info;return createVNode$1("div",{class:bem$t()},[createVNode$1("ul",{class:[bem$t("security"),{[BORDER_SURROUND]:!a.gutter}],onTouchstartPassive:r},[o()]),s&&createVNode$1("div",{class:bem$t(a.errorInfo?"error-info":"info")},[s])])}}});const PasswordInput=withInstall(stdin_default$z),PickerGroup=withInstall(stdin_default$1x);function getWindow(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var n=a.ownerDocument;return n&&n.defaultView||window}return a}function isElement(a){var n=getWindow(a).Element;return a instanceof n||a instanceof Element}function isHTMLElement(a){var n=getWindow(a).HTMLElement;return a instanceof n||a instanceof HTMLElement}function isShadowRoot(a){if(typeof ShadowRoot>"u")return!1;var n=getWindow(a).ShadowRoot;return a instanceof n||a instanceof ShadowRoot}var round$4=Math.round;function getUAString(){var a=navigator.userAgentData;return a!=null&&a.brands?a.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(a,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var o=a.getBoundingClientRect(),s=1,l=1;n&&isHTMLElement(a)&&(s=a.offsetWidth>0&&round$4(o.width)/a.offsetWidth||1,l=a.offsetHeight>0&&round$4(o.height)/a.offsetHeight||1);var c=isElement(a)?getWindow(a):window,u=c.visualViewport,d=!isLayoutViewport()&&r,f=(o.left+(d&&u?u.offsetLeft:0))/s,v=(o.top+(d&&u?u.offsetTop:0))/l,g=o.width/s,y=o.height/l;return{width:g,height:y,top:v,right:f+g,bottom:v+y,left:f,x:f,y:v}}function getWindowScroll(a){var n=getWindow(a),r=n.pageXOffset,o=n.pageYOffset;return{scrollLeft:r,scrollTop:o}}function getHTMLElementScroll(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function getNodeScroll(a){return a===getWindow(a)||!isHTMLElement(a)?getWindowScroll(a):getHTMLElementScroll(a)}function getNodeName(a){return a?(a.nodeName||"").toLowerCase():null}function getDocumentElement(a){return((isElement(a)?a.ownerDocument:a.document)||window.document).documentElement}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getWindowScroll(a).scrollLeft}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function isScrollParent(a){var n=getComputedStyle$1(a),r=n.overflow,o=n.overflowX,s=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+o)}function isElementScaled(a){var n=a.getBoundingClientRect(),r=round$4(n.width)/a.offsetWidth||1,o=round$4(n.height)/a.offsetHeight||1;return r!==1||o!==1}function getCompositeRect(a,n,r){r===void 0&&(r=!1);var o=isHTMLElement(n),s=isHTMLElement(n)&&isElementScaled(n),l=getDocumentElement(n),c=getBoundingClientRect(a,s,r),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!r)&&((getNodeName(n)!=="body"||isScrollParent(l))&&(u=getNodeScroll(n)),isHTMLElement(n)?(d=getBoundingClientRect(n,!0),d.x+=n.clientLeft,d.y+=n.clientTop):l&&(d.x=getWindowScrollBarX(l))),{x:c.left+u.scrollLeft-d.x,y:c.top+u.scrollTop-d.y,width:c.width,height:c.height}}function getLayoutRect$1(a){var n=getBoundingClientRect(a),r=a.offsetWidth,o=a.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-o)<=1&&(o=n.height),{x:a.offsetLeft,y:a.offsetTop,width:r,height:o}}function getParentNode(a){return getNodeName(a)==="html"?a:a.assignedSlot||a.parentNode||(isShadowRoot(a)?a.host:null)||getDocumentElement(a)}function getScrollParent(a){return["html","body","#document"].indexOf(getNodeName(a))>=0?a.ownerDocument.body:isHTMLElement(a)&&isScrollParent(a)?a:getScrollParent(getParentNode(a))}function listScrollParents(a,n){var r;n===void 0&&(n=[]);var o=getScrollParent(a),s=o===((r=a.ownerDocument)==null?void 0:r.body),l=getWindow(o),c=s?[l].concat(l.visualViewport||[],isScrollParent(o)?o:[]):o,u=n.concat(c);return s?u:u.concat(listScrollParents(getParentNode(c)))}function isTableElement(a){return["table","td","th"].indexOf(getNodeName(a))>=0}function getTrueOffsetParent(a){return!isHTMLElement(a)||getComputedStyle$1(a).position==="fixed"?null:a.offsetParent}function getContainingBlock(a){var n=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(a)){var o=getComputedStyle$1(a);if(o.position==="fixed")return null}var s=getParentNode(a);for(isShadowRoot(s)&&(s=s.host);isHTMLElement(s)&&["html","body"].indexOf(getNodeName(s))<0;){var l=getComputedStyle$1(s);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||n&&l.willChange==="filter"||n&&l.filter&&l.filter!=="none")return s;s=s.parentNode}return null}function getOffsetParent(a){for(var n=getWindow(a),r=getTrueOffsetParent(a);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?n:r||getContainingBlock(a)||n}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end$1="end",placements=[].concat(basePlacements,[auto]).reduce(function(a,n){return a.concat([n,n+"-"+start$1,n+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function order(a){var n=new Map,r=new Set,o=[];a.forEach(function(l){n.set(l.name,l)});function s(l){r.add(l.name);var c=[].concat(l.requires||[],l.requiresIfExists||[]);c.forEach(function(u){if(!r.has(u)){var d=n.get(u);d&&s(d)}}),o.push(l)}return a.forEach(function(l){r.has(l.name)||s(l)}),o}function orderModifiers(a){var n=order(a);return modifierPhases.reduce(function(r,o){return r.concat(n.filter(function(s){return s.phase===o}))},[])}function debounce(a){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(a())})})),n}}function format$1(a){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return[].concat(r).reduce(function(s,l){return s.replace(/%s/,l)},a)}var INVALID_MODIFIER_ERROR='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',MISSING_DEPENDENCY_ERROR='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',VALID_PROPERTIES=["name","enabled","phase","fn","effect","requires","options"];function validateModifiers(a){a.forEach(function(n){[].concat(Object.keys(n),VALID_PROPERTIES).filter(function(r,o,s){return s.indexOf(r)===o}).forEach(function(r){switch(r){case"name":typeof n.name!="string"&&console.error(format$1(INVALID_MODIFIER_ERROR,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":typeof n.enabled!="boolean"&&console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));break;case"phase":modifierPhases.indexOf(n.phase)<0&&console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"phase"',"either "+modifierPhases.join(", "),'"'+String(n.phase)+'"'));break;case"fn":typeof n.fn!="function"&&console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":n.effect!=null&&typeof n.effect!="function"&&console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":n.requires!=null&&!Array.isArray(n.requires)&&console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(format$1(INVALID_MODIFIER_ERROR,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+VALID_PROPERTIES.map(function(o){return'"'+o+'"'}).join(", ")+'; but "'+r+'" was provided.')}n.requires&&n.requires.forEach(function(o){a.find(function(s){return s.name===o})==null&&console.error(format$1(MISSING_DEPENDENCY_ERROR,String(n.name),o,o))})})})}function uniqueBy(a,n){var r=new Set;return a.filter(function(o){var s=n(o);if(!r.has(s))return r.add(s),!0})}function getBasePlacement(a){return a.split("-")[0]}function mergeByName(a){var n=a.reduce(function(r,o){var s=r[o.name];return r[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,r},{});return Object.keys(n).map(function(r){return n[r]})}function getVariation(a){return a.split("-")[1]}function getMainAxisFromPlacement(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function computeOffsets(a){var n=a.reference,r=a.element,o=a.placement,s=o?getBasePlacement(o):null,l=o?getVariation(o):null,c=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2,d;switch(s){case top:d={x:c,y:n.y-r.height};break;case bottom:d={x:c,y:n.y+n.height};break;case right:d={x:n.x+n.width,y:u};break;case left:d={x:n.x-r.width,y:u};break;default:d={x:n.x,y:n.y}}var f=s?getMainAxisFromPlacement(s):null;if(f!=null){var v=f==="y"?"height":"width";switch(l){case start$1:d[f]=d[f]-(n[v]/2-r[v]/2);break;case end$1:d[f]=d[f]+(n[v]/2-r[v]/2);break}}return d}var INVALID_ELEMENT_ERROR="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",INFINITE_LOOP_ERROR="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return!n.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function popperGenerator(a){a===void 0&&(a={});var n=a,r=n.defaultModifiers,o=r===void 0?[]:r,s=n.defaultOptions,l=s===void 0?DEFAULT_OPTIONS:s;return function(u,d,f){f===void 0&&(f=l);var v={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,l),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},g=[],y=!1,_={state:v,setOptions:function(w){var E=typeof w=="function"?w(v.options):w;x(),v.options=Object.assign({},l,v.options,E),v.scrollParents={reference:isElement(u)?listScrollParents(u):u.contextElement?listScrollParents(u.contextElement):[],popper:listScrollParents(d)};var P=orderModifiers(mergeByName([].concat(o,v.options.modifiers)));v.orderedModifiers=P.filter(function(U){return U.enabled});{var D=uniqueBy([].concat(P,v.options.modifiers),function(U){var G=U.name;return G});if(validateModifiers(D),getBasePlacement(v.options.placement)===auto){var L=v.orderedModifiers.find(function(U){var G=U.name;return G==="flip"});L||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var $=getComputedStyle$1(d),O=$.marginTop,B=$.marginRight,V=$.marginBottom,F=$.marginLeft;[O,B,V,F].some(function(U){return parseFloat(U)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return S(),_.update()},forceUpdate:function(){if(!y){var w=v.elements,E=w.reference,P=w.popper;if(!areValidElements(E,P)){console.error(INVALID_ELEMENT_ERROR);return}v.rects={reference:getCompositeRect(E,getOffsetParent(P),v.options.strategy==="fixed"),popper:getLayoutRect$1(P)},v.reset=!1,v.placement=v.options.placement,v.orderedModifiers.forEach(function(U){return v.modifiersData[U.name]=Object.assign({},U.data)});for(var D=0,L=0;L<v.orderedModifiers.length;L++){if(D+=1,D>100){console.error(INFINITE_LOOP_ERROR);break}if(v.reset===!0){v.reset=!1,L=-1;continue}var $=v.orderedModifiers[L],O=$.fn,B=$.options,V=B===void 0?{}:B,F=$.name;typeof O=="function"&&(v=O({state:v,options:V,name:F,instance:_})||v)}}},update:debounce(function(){return new Promise(function(T){_.forceUpdate(),T(v)})}),destroy:function(){x(),y=!0}};if(!areValidElements(u,d))return console.error(INVALID_ELEMENT_ERROR),_;_.setOptions(f).then(function(T){!y&&f.onFirstUpdate&&f.onFirstUpdate(T)});function S(){v.orderedModifiers.forEach(function(T){var w=T.name,E=T.options,P=E===void 0?{}:E,D=T.effect;if(typeof D=="function"){var L=D({state:v,name:w,instance:_,options:P}),$=function(){};g.push(L||$)}})}function x(){g.forEach(function(T){return T()}),g=[]}return _}}var passive={passive:!0};function effect(a){var n=a.state,r=a.instance,o=a.options,s=o.scroll,l=s===void 0?!0:s,c=o.resize,u=c===void 0?!0:c,d=getWindow(n.elements.popper),f=[].concat(n.scrollParents.reference,n.scrollParents.popper);return l&&f.forEach(function(v){v.addEventListener("scroll",r.update,passive)}),u&&d.addEventListener("resize",r.update,passive),function(){l&&f.forEach(function(v){v.removeEventListener("scroll",r.update,passive)}),u&&d.removeEventListener("resize",r.update,passive)}}var eventListeners_default={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};function popperOffsets(a){var n=a.state,r=a.name;n.modifiersData[r]=computeOffsets({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var popperOffsets_default={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}},unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(a){var n=a.x,r=a.y,o=window,s=o.devicePixelRatio||1;return{x:round$4(n*s)/s||0,y:round$4(r*s)/s||0}}function mapToStyles(a){var n,r=a.popper,o=a.popperRect,s=a.placement,l=a.variation,c=a.offsets,u=a.position,d=a.gpuAcceleration,f=a.adaptive,v=a.roundOffsets,g=a.isFixed,y=c.x,_=y===void 0?0:y,S=c.y,x=S===void 0?0:S,T=typeof v=="function"?v({x:_,y:x}):{x:_,y:x};_=T.x,x=T.y;var w=c.hasOwnProperty("x"),E=c.hasOwnProperty("y"),P=left,D=top,L=window;if(f){var $=getOffsetParent(r),O="clientHeight",B="clientWidth";if($===getWindow(r)&&($=getDocumentElement(r),getComputedStyle$1($).position!=="static"&&u==="absolute"&&(O="scrollHeight",B="scrollWidth")),$=$,s===top||(s===left||s===right)&&l===end$1){D=bottom;var V=g&&$===L&&L.visualViewport?L.visualViewport.height:$[O];x-=V-o.height,x*=d?1:-1}if(s===left||(s===top||s===bottom)&&l===end$1){P=right;var F=g&&$===L&&L.visualViewport?L.visualViewport.width:$[B];_-=F-o.width,_*=d?1:-1}}var U=Object.assign({position:u},f&&unsetSides),G=v===!0?roundOffsetsByDPR({x:_,y:x}):{x:_,y:x};if(_=G.x,x=G.y,d){var W;return Object.assign({},U,(W={},W[D]=E?"0":"",W[P]=w?"0":"",W.transform=(L.devicePixelRatio||1)<=1?"translate("+_+"px, "+x+"px)":"translate3d("+_+"px, "+x+"px, 0)",W))}return Object.assign({},U,(n={},n[D]=E?x+"px":"",n[P]=w?_+"px":"",n.transform="",n))}function computeStyles(a){var n=a.state,r=a.options,o=r.gpuAcceleration,s=o===void 0?!0:o,l=r.adaptive,c=l===void 0?!0:l,u=r.roundOffsets,d=u===void 0?!0:u;{var f=getComputedStyle$1(n.elements.popper).transitionProperty||"";c&&["transform","top","right","bottom","left"].some(function(g){return f.indexOf(g)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var v={placement:getBasePlacement(n.placement),variation:getVariation(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:s,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,mapToStyles(Object.assign({},v,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:c,roundOffsets:d})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,mapToStyles(Object.assign({},v,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var computeStyles_default={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};function applyStyles(a){var n=a.state;Object.keys(n.elements).forEach(function(r){var o=n.styles[r]||{},s=n.attributes[r]||{},l=n.elements[r];!isHTMLElement(l)||!getNodeName(l)||(Object.assign(l.style,o),Object.keys(s).forEach(function(c){var u=s[c];u===!1?l.removeAttribute(c):l.setAttribute(c,u===!0?"":u)}))})}function effect2(a){var n=a.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(o){var s=n.elements[o],l=n.attributes[o]||{},c=Object.keys(n.styles.hasOwnProperty(o)?n.styles[o]:r[o]),u=c.reduce(function(d,f){return d[f]="",d},{});!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,u),Object.keys(l).forEach(function(d){s.removeAttribute(d)}))})}}var applyStyles_default={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect2,requires:["computeStyles"]},defaultModifiers=[eventListeners_default,popperOffsets_default,computeStyles_default,applyStyles_default],createPopper=popperGenerator({defaultModifiers});function distanceAndSkiddingToXY(a,n,r){var o=getBasePlacement(a),s=[left,top].indexOf(o)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},n,{placement:a})):r,c=l[0],u=l[1];return c=c||0,u=(u||0)*s,[left,right].indexOf(o)>=0?{x:u,y:c}:{x:c,y:u}}function offset(a){var n=a.state,r=a.options,o=a.name,s=r.offset,l=s===void 0?[0,0]:s,c=placements.reduce(function(v,g){return v[g]=distanceAndSkiddingToXY(g,n.rects,l),v},{}),u=c[n.placement],d=u.x,f=u.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=d,n.modifiersData.popperOffsets.y+=f),n.modifiersData[o]=c}var offset_default={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};const[name$t,bem$s]=createNamespace("popover"),popupProps=["overlay","duration","teleport","overlayStyle","overlayClass","closeOnClickOverlay"],popoverProps={show:Boolean,theme:makeStringProp("light"),overlay:Boolean,actions:makeArrayProp(),actionsDirection:makeStringProp("vertical"),trigger:makeStringProp("click"),duration:numericProp,showArrow:truthProp,placement:makeStringProp("bottom"),iconPrefix:String,overlayClass:unknownProp,overlayStyle:Object,closeOnClickAction:truthProp,closeOnClickOverlay:truthProp,closeOnClickOutside:truthProp,offset:{type:Array,default:()=>[0,8]},teleport:{type:[String,Object],default:"body"}};var stdin_default$y=defineComponent({name:name$t,props:popoverProps,emits:["select","touchstart","update:show"],setup(a,{emit:n,slots:r,attrs:o}){let s;const l=ref(),c=ref(),u=ref(),d=useSyncPropRef(()=>a.show,E=>n("update:show",E)),f=()=>({placement:a.placement,modifiers:[{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},extend$1({},offset_default,{options:{offset:a.offset}})]}),v=()=>c.value&&u.value?createPopper(c.value,u.value.popupRef.value,f()):null,g=()=>{nextTick(()=>{d.value&&(s?s.setOptions(f()):(s=v(),inBrowser$1&&(window.addEventListener("animationend",g),window.addEventListener("transitionend",g))))})},y=E=>{d.value=E},_=()=>{a.trigger==="click"&&(d.value=!d.value)},S=(E,P)=>{E.disabled||(n("select",E,P),a.closeOnClickAction&&(d.value=!1))},x=()=>{d.value&&a.closeOnClickOutside&&(!a.overlay||a.closeOnClickOverlay)&&(d.value=!1)},T=(E,P)=>r.action?r.action({action:E,index:P}):[E.icon&&createVNode$1(Icon,{name:E.icon,classPrefix:a.iconPrefix,class:bem$s("action-icon")},null),createVNode$1("div",{class:[bem$s("action-text"),{[BORDER_BOTTOM]:a.actionsDirection==="vertical"}]},[E.text])],w=(E,P)=>{const{icon:D,color:L,disabled:$,className:O}=E;return createVNode$1("div",{role:"menuitem",class:[bem$s("action",{disabled:$,"with-icon":D}),{[BORDER_RIGHT]:a.actionsDirection==="horizontal"},O],style:{color:L},tabindex:$?void 0:0,"aria-disabled":$||void 0,onClick:()=>S(E,P)},[T(E,P)])};return onMounted(()=>{g(),watchEffect(()=>{var E;l.value=(E=u.value)==null?void 0:E.popupRef.value})}),onBeforeUnmount(()=>{s&&(inBrowser$1&&(window.removeEventListener("animationend",g),window.removeEventListener("transitionend",g)),s.destroy(),s=null)}),watch(()=>[d.value,a.offset,a.placement],g),useClickAway([c,l],x,{eventName:"touchstart"}),()=>{var E;return createVNode$1(Fragment,null,[createVNode$1("span",{ref:c,class:bem$s("wrapper"),onClick:_},[(E=r.reference)==null?void 0:E.call(r)]),createVNode$1(Popup,mergeProps({ref:u,show:d.value,class:bem$s([a.theme]),position:"",transition:"van-popover-zoom",lockScroll:!1,"onUpdate:show":y},o,useScopeId(),pick(a,popupProps)),{default:()=>[a.showArrow&&createVNode$1("div",{class:bem$s("arrow")},null),createVNode$1("div",{role:"menu",class:bem$s("content",a.actionsDirection)},[r.default?r.default():a.actions.map(w)])]})])}}});const Popover=withInstall(stdin_default$y),[name$s,bem$r]=createNamespace("progress"),progressProps={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:truthProp,pivotColor:String,trackColor:String,strokeWidth:numericProp,percentage:{type:numericProp,default:0,validator:a=>+a>=0&&+a<=100}};var stdin_default$x=defineComponent({name:name$s,props:progressProps,setup(a){const n=computed(()=>a.inactive?void 0:a.color),r=()=>{const{textColor:o,pivotText:s,pivotColor:l,percentage:c}=a,u=s??`${c}%`;if(a.showPivot&&u){const d={color:o,left:`${+c}%`,transform:`translate(-${+c}%,-50%)`,background:l||n.value};return createVNode$1("span",{style:d,class:bem$r("pivot",{inactive:a.inactive})},[u])}};return()=>{const{trackColor:o,percentage:s,strokeWidth:l}=a,c={background:o,height:addUnit(l)},u={width:`${s}%`,background:n.value};return createVNode$1("div",{class:bem$r(),style:c},[createVNode$1("span",{class:bem$r("portion",{inactive:a.inactive}),style:u},null),r()])}}});const Progress=withInstall(stdin_default$x),[name$r,bem$q,t$5]=createNamespace("pull-refresh"),DEFAULT_HEAD_HEIGHT=50,TEXT_STATUS=["pulling","loosing","success"],pullRefreshProps={disabled:Boolean,modelValue:Boolean,headHeight:makeNumericProp(DEFAULT_HEAD_HEIGHT),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:numericProp,successDuration:makeNumericProp(500),animationDuration:makeNumericProp(300)};var stdin_default$w=defineComponent({name:name$r,props:pullRefreshProps,emits:["change","refresh","update:modelValue"],setup(a,{emit:n,slots:r}){let o;const s=ref(),l=ref(),c=useScrollParent(s),u=reactive({status:"normal",distance:0,duration:0}),d=useTouch(),f=()=>{if(a.headHeight!==DEFAULT_HEAD_HEIGHT)return{height:`${a.headHeight}px`}},v=()=>u.status!=="loading"&&u.status!=="success"&&!a.disabled,g=D=>{const L=+(a.pullDistance||a.headHeight);return D>L&&(D<L*2?D=L+(D-L)/2:D=L*1.5+(D-L*2)/4),Math.round(D)},y=(D,L)=>{const $=+(a.pullDistance||a.headHeight);u.distance=D,L?u.status="loading":D===0?u.status="normal":D<$?u.status="pulling":u.status="loosing",n("change",{status:u.status,distance:D})},_=()=>{const{status:D}=u;return D==="normal"?"":a[`${D}Text`]||t$5(D)},S=()=>{const{status:D,distance:L}=u;if(r[D])return r[D]({distance:L});const $=[];return TEXT_STATUS.includes(D)&&$.push(createVNode$1("div",{class:bem$q("text")},[_()])),D==="loading"&&$.push(createVNode$1(Loading,{class:bem$q("loading")},{default:_})),$},x=()=>{u.status="success",setTimeout(()=>{y(0)},+a.successDuration)},T=D=>{o=getScrollTop(c.value)===0,o&&(u.duration=0,d.start(D))},w=D=>{v()&&T(D)},E=D=>{if(v()){o||T(D);const{deltaY:L}=d;d.move(D),o&&L.value>=0&&d.isVertical()&&(preventDefault$1(D),y(g(L.value)))}},P=()=>{o&&d.deltaY.value&&v()&&(u.duration=+a.animationDuration,u.status==="loosing"?(y(+a.headHeight,!0),n("update:modelValue",!0),nextTick(()=>n("refresh"))):y(0))};return watch(()=>a.modelValue,D=>{u.duration=+a.animationDuration,D?y(+a.headHeight,!0):r.success||a.successText?x():y(0,!1)}),useEventListener("touchmove",E,{target:l}),()=>{var D;const L={transitionDuration:`${u.duration}ms`,transform:u.distance?`translate3d(0,${u.distance}px, 0)`:""};return createVNode$1("div",{ref:s,class:bem$q()},[createVNode$1("div",{ref:l,class:bem$q("track"),style:L,onTouchstartPassive:w,onTouchend:P,onTouchcancel:P},[createVNode$1("div",{class:bem$q("head"),style:f()},[S()]),(D=r.default)==null?void 0:D.call(r)])])}}});const PullRefresh=withInstall(stdin_default$w),[name$q,bem$p]=createNamespace("rate");function getRateStatus(a,n,r,o){return a>=n?{status:"full",value:1}:a+.5>=n&&r&&!o?{status:"half",value:.5}:a+1>=n&&r&&o?{status:"half",value:Math.round((a-n+1)*1e10)/1e10}:{status:"void",value:0}}const rateProps={size:numericProp,icon:makeStringProp("star"),color:String,count:makeNumericProp(5),gutter:numericProp,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:makeStringProp("star-o"),allowHalf:Boolean,voidColor:String,touchable:truthProp,iconPrefix:String,modelValue:makeNumberProp(0),disabledColor:String};var stdin_default$v=defineComponent({name:name$q,props:rateProps,emits:["change","update:modelValue"],setup(a,{emit:n}){const r=useTouch(),[o,s]=useRefs(),l=ref(),c=computed(()=>a.readonly||a.disabled),u=computed(()=>c.value||!a.touchable),d=computed(()=>Array(+a.count).fill("").map((P,D)=>getRateStatus(a.modelValue,D+1,a.allowHalf,a.readonly)));let f,v,g=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;const _=()=>{v=useRect(l);const P=o.value.map(useRect);f=[],P.forEach((D,L)=>{g=Math.min(D.top,g),y=Math.max(D.top,y),a.allowHalf?f.push({score:L+.5,left:D.left,top:D.top,height:D.height},{score:L+1,left:D.left+D.width/2,top:D.top,height:D.height}):f.push({score:L+1,left:D.left,top:D.top,height:D.height})})},S=(P,D)=>{for(let L=f.length-1;L>0;L--)if(D>=v.top&&D<=v.bottom){if(P>f[L].left&&D>=f[L].top&&D<=f[L].top+f[L].height)return f[L].score}else{const $=D<v.top?g:y;if(P>f[L].left&&f[L].top===$)return f[L].score}return a.allowHalf?.5:1},x=P=>{c.value||P===a.modelValue||(n("update:modelValue",P),n("change",P))},T=P=>{u.value||(r.start(P),_())},w=P=>{if(!u.value&&(r.move(P),r.isHorizontal()&&!r.isTap.value)){const{clientX:D,clientY:L}=P.touches[0];preventDefault$1(P),x(S(D,L))}},E=(P,D)=>{const{icon:L,size:$,color:O,count:B,gutter:V,voidIcon:F,disabled:U,voidColor:G,allowHalf:W,iconPrefix:j,disabledColor:K}=a,q=D+1,ie=P.status==="full",ee=P.status==="void",he=W&&P.value>0&&P.value<1;let pe;V&&q!==+B&&(pe={paddingRight:addUnit(V)});const ce=ye=>{_();let we=W?S(ye.clientX,ye.clientY):q;a.clearable&&r.isTap.value&&we===a.modelValue&&(we=0),x(we)};return createVNode$1("div",{key:D,ref:s(D),role:"radio",style:pe,class:bem$p("item"),tabindex:U?void 0:0,"aria-setsize":B,"aria-posinset":q,"aria-checked":!ee,onClick:ce},[createVNode$1(Icon,{size:$,name:ie?L:F,class:bem$p("icon",{disabled:U,full:ie}),color:U?K:ie?O:G,classPrefix:j},null),he&&createVNode$1(Icon,{size:$,style:{width:P.value+"em"},name:ee?F:L,class:bem$p("icon",["half",{disabled:U,full:!ee}]),color:U?K:ee?G:O,classPrefix:j},null)])};return useCustomFieldValue(()=>a.modelValue),useEventListener("touchmove",w,{target:l}),()=>createVNode$1("div",{ref:l,role:"radiogroup",class:bem$p({readonly:a.readonly,disabled:a.disabled}),tabindex:a.disabled?void 0:0,"aria-disabled":a.disabled,"aria-readonly":a.readonly,onTouchstartPassive:T},[d.value.map(E)])}});const Rate=withInstall(stdin_default$v),props={figureArr:makeArrayProp(),delay:Number,duration:makeNumberProp(2),isStart:Boolean,direction:makeStringProp("down"),height:makeNumberProp(40)},[name$p,bem$o]=createNamespace("rolling-text-item");var stdin_default$u=defineComponent({name:name$p,props,setup(a){const n=computed(()=>a.direction==="down"?a.figureArr.slice().reverse():a.figureArr),r=computed(()=>`-${a.height*(a.figureArr.length-1)}px`),o=computed(()=>({lineHeight:addUnit(a.height)})),s=computed(()=>({height:addUnit(a.height),"--van-translate":r.value,"--van-duration":a.duration+"s","--van-delay":a.delay+"s"}));return()=>createVNode$1("div",{class:bem$o([a.direction]),style:s.value},[createVNode$1("div",{class:bem$o("box",{animate:a.isStart})},[Array.isArray(n.value)&&n.value.map(l=>createVNode$1("div",{class:bem$o("item"),style:o.value},[l]))])])}});const[name$o,bem$n]=createNamespace("rolling-text"),rollingTextProps={startNum:makeNumberProp(0),targetNum:Number,textList:makeArrayProp(),duration:makeNumberProp(2),autoStart:truthProp,direction:makeStringProp("down"),stopOrder:makeStringProp("ltr"),height:makeNumberProp(40)},CIRCLE_NUM=2;var stdin_default$t=defineComponent({name:name$o,props:rollingTextProps,setup(a){const n=computed(()=>Array.isArray(a.textList)&&a.textList.length),r=computed(()=>n.value?a.textList[0].length:`${Math.max(a.startNum,a.targetNum)}`.length),o=g=>{const y=[];for(let _=0;_<a.textList.length;_++)y.push(a.textList[_][g]);return y},s=computed(()=>n.value?new Array(r.value).fill(""):padZero(a.targetNum,r.value).split("")),l=computed(()=>padZero(a.startNum,r.value).split("")),c=g=>{const y=+l.value[g],_=+s.value[g],S=[];for(let x=y;x<=9;x++)S.push(x);for(let x=0;x<=CIRCLE_NUM;x++)for(let T=0;T<=9;T++)S.push(T);for(let x=0;x<=_;x++)S.push(x);return S},u=(g,y)=>a.stopOrder==="ltr"?.2*g:.2*(y-1-g),d=ref(a.autoStart),f=()=>{d.value=!0},v=()=>{d.value=!1,a.autoStart&&raf(()=>f())};return watch(()=>a.autoStart,g=>{g&&f()}),useExpose({start:f,reset:v}),()=>createVNode$1("div",{class:bem$n()},[s.value.map((g,y)=>createVNode$1(stdin_default$u,{figureArr:n.value?o(y):c(y),duration:a.duration,direction:a.direction,isStart:d.value,height:a.height,delay:u(y,r.value)},null))])}});const RollingText=withInstall(stdin_default$t),Row=withInstall(stdin_default$14),[name$n,bem$m,t$4]=createNamespace("search"),searchProps=extend$1({},fieldSharedProps,{label:String,shape:makeStringProp("square"),leftIcon:makeStringProp("search"),clearable:truthProp,actionText:String,background:String,showAction:Boolean});var stdin_default$s=defineComponent({name:name$n,props:searchProps,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(a,{emit:n,slots:r,attrs:o}){const s=useId(),l=ref(),c=()=>{r.action||(n("update:modelValue",""),n("cancel"))},u=L=>{L.keyCode===13&&(preventDefault$1(L),n("search",a.modelValue))},d=()=>a.id||`${s}-input`,f=()=>{if(r.label||a.label)return createVNode$1("label",{class:bem$m("label"),for:d(),"data-allow-mismatch":"attribute"},[r.label?r.label():a.label])},v=()=>{if(a.showAction){const L=a.actionText||t$4("cancel");return createVNode$1("div",{class:bem$m("action"),role:"button",tabindex:0,onClick:c},[r.action?r.action():L])}},g=()=>{var L;return(L=l.value)==null?void 0:L.blur()},y=()=>{var L;return(L=l.value)==null?void 0:L.focus()},_=L=>n("blur",L),S=L=>n("focus",L),x=L=>n("clear",L),T=L=>n("clickInput",L),w=L=>n("clickLeftIcon",L),E=L=>n("clickRightIcon",L),P=Object.keys(fieldSharedProps),D=()=>{const L=extend$1({},o,pick(a,P),{id:d()}),$=O=>n("update:modelValue",O);return createVNode$1(Field,mergeProps({ref:l,type:"search",class:bem$m("field",{"with-message":L.errorMessage}),border:!1,onBlur:_,onFocus:S,onClear:x,onKeypress:u,onClickInput:T,onClickLeftIcon:w,onClickRightIcon:E,"onUpdate:modelValue":$},L),pick(r,["left-icon","right-icon"]))};return useExpose({focus:y,blur:g}),()=>{var L;return createVNode$1("div",{class:bem$m({"show-action":a.showAction}),style:{background:a.background}},[(L=r.left)==null?void 0:L.call(r),createVNode$1("div",{class:bem$m("content",a.shape)},[f(),D()]),v()])}}});const Search=withInstall(stdin_default$s),isImage=a=>a==null?void 0:a.includes("/"),popupInheritKeys=[...popupSharedPropKeys,"round","closeOnPopstate","safeAreaInsetBottom"],iconMap={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[name$m,bem$l,t$3]=createNamespace("share-sheet"),shareSheetProps=extend$1({},popupSharedProps,{title:String,round:truthProp,options:makeArrayProp(),cancelText:String,description:String,closeOnPopstate:truthProp,safeAreaInsetBottom:truthProp});var stdin_default$r=defineComponent({name:name$m,props:shareSheetProps,emits:["cancel","select","update:show"],setup(a,{emit:n,slots:r}){const o=y=>n("update:show",y),s=()=>{o(!1),n("cancel")},l=(y,_)=>n("select",y,_),c=()=>{const y=r.title?r.title():a.title,_=r.description?r.description():a.description;if(y||_)return createVNode$1("div",{class:bem$l("header")},[y&&createVNode$1("h2",{class:bem$l("title")},[y]),_&&createVNode$1("span",{class:bem$l("description")},[_])])},u=y=>isImage(y)?createVNode$1("img",{src:y,class:bem$l("image-icon")},null):createVNode$1("div",{class:bem$l("icon",[y])},[createVNode$1(Icon,{name:iconMap[y]||y},null)]),d=(y,_)=>{const{name:S,icon:x,className:T,description:w}=y;return createVNode$1("div",{role:"button",tabindex:0,class:[bem$l("option"),T,HAPTICS_FEEDBACK],onClick:()=>l(y,_)},[u(x),S&&createVNode$1("span",{class:bem$l("name")},[S]),w&&createVNode$1("span",{class:bem$l("option-description")},[w])])},f=(y,_)=>createVNode$1("div",{class:bem$l("options",{border:_})},[y.map(d)]),v=()=>{const{options:y}=a;return Array.isArray(y[0])?y.map((_,S)=>f(_,S!==0)):f(y)},g=()=>{var y;const _=(y=a.cancelText)!=null?y:t$3("cancel");if(r.cancel||_)return createVNode$1("button",{type:"button",class:bem$l("cancel"),onClick:s},[r.cancel?r.cancel():_])};return()=>createVNode$1(Popup,mergeProps({class:bem$l(),position:"bottom","onUpdate:show":o},pick(a,popupInheritKeys)),{default:()=>[c(),v(),g()]})}});const ShareSheet=withInstall(stdin_default$r),[name$l,bem$k]=createNamespace("sidebar"),SIDEBAR_KEY=Symbol(name$l),sidebarProps={modelValue:makeNumericProp(0)};var stdin_default$q=defineComponent({name:name$l,props:sidebarProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{linkChildren:o}=useChildren(SIDEBAR_KEY),s=()=>+a.modelValue;return o({getActive:s,setActive:c=>{c!==s()&&(n("update:modelValue",c),n("change",c))}}),()=>{var c;return createVNode$1("div",{role:"tablist",class:bem$k()},[(c=r.default)==null?void 0:c.call(r)])}}});const Sidebar=withInstall(stdin_default$q),[name$k,bem$j]=createNamespace("sidebar-item"),sidebarItemProps=extend$1({},routeProps,{dot:Boolean,title:String,badge:numericProp,disabled:Boolean,badgeProps:Object});var stdin_default$p=defineComponent({name:name$k,props:sidebarItemProps,emits:["click"],setup(a,{emit:n,slots:r}){const o=useRoute$1(),{parent:s,index:l}=useParent(SIDEBAR_KEY);if(!s)return;const c=()=>{a.disabled||(n("click",l.value),s.setActive(l.value),o())};return()=>{const{dot:u,badge:d,title:f,disabled:v}=a,g=l.value===s.getActive();return createVNode$1("div",{role:"tab",class:bem$j({select:g,disabled:v}),tabindex:v?void 0:0,"aria-selected":g,onClick:c},[createVNode$1(Badge,mergeProps({dot:u,class:bem$j("text"),content:d},a.badgeProps),{default:()=>[r.title?r.title():f]})])}}});const SidebarItem=withInstall(stdin_default$p),[name$j,bem$i,t$2]=createNamespace("signature"),signatureProps={tips:String,type:makeStringProp("png"),penColor:makeStringProp("#000"),lineWidth:makeNumberProp(3),clearButtonText:String,backgroundColor:makeStringProp(""),confirmButtonText:String},hasCanvasSupport=()=>{var a;const n=document.createElement("canvas");return!!((a=n.getContext)!=null&&a.call(n,"2d"))};var stdin_default$o=defineComponent({name:name$j,props:signatureProps,emits:["submit","clear","start","end","signing"],setup(a,{emit:n}){const r=ref(),o=ref(),s=computed(()=>r.value?r.value.getContext("2d"):null),l=inBrowser$1?hasCanvasSupport():!0;let c=0,u=0,d;const f=()=>{if(!s.value)return!1;s.value.beginPath(),s.value.lineWidth=a.lineWidth,s.value.strokeStyle=a.penColor,d=useRect(r),n("start")},v=E=>{if(!s.value)return!1;preventDefault$1(E);const P=E.touches[0],D=P.clientX-((d==null?void 0:d.left)||0),L=P.clientY-((d==null?void 0:d.top)||0);s.value.lineCap="round",s.value.lineJoin="round",s.value.lineTo(D,L),s.value.stroke(),n("signing",E)},g=E=>{preventDefault$1(E),n("end")},y=E=>{const P=document.createElement("canvas");if(P.width=E.width,P.height=E.height,a.backgroundColor){const D=P.getContext("2d");_(D)}return E.toDataURL()===P.toDataURL()},_=E=>{E&&a.backgroundColor&&(E.fillStyle=a.backgroundColor,E.fillRect(0,0,c,u))},S=()=>{var E,P;const D=r.value;if(!D)return;const $=y(D)?"":((P=(E={jpg:()=>D.toDataURL("image/jpeg",.8),jpeg:()=>D.toDataURL("image/jpeg",.8)})[a.type])==null?void 0:P.call(E))||D.toDataURL(`image/${a.type}`);n("submit",{image:$,canvas:D})},x=()=>{s.value&&(s.value.clearRect(0,0,c,u),s.value.closePath(),_(s.value)),n("clear")},T=()=>{var E,P,D;if(l&&r.value){const L=r.value,$=inBrowser$1?window.devicePixelRatio:1;c=L.width=(((E=o.value)==null?void 0:E.offsetWidth)||0)*$,u=L.height=(((P=o.value)==null?void 0:P.offsetHeight)||0)*$,(D=s.value)==null||D.scale($,$),_(s.value)}},w=()=>{if(s.value){const E=s.value.getImageData(0,0,c,u);T(),s.value.putImageData(E,0,0)}};return watch(windowWidth,w),onMounted(T),useExpose({resize:w,clear:x,submit:S}),()=>createVNode$1("div",{class:bem$i()},[createVNode$1("div",{class:bem$i("content"),ref:o},[l?createVNode$1("canvas",{ref:r,onTouchstartPassive:f,onTouchmove:v,onTouchend:g},null):createVNode$1("p",null,[a.tips])]),createVNode$1("div",{class:bem$i("footer")},[createVNode$1(Button,{size:"small",onClick:x},{default:()=>[a.clearButtonText||t$2("clear")]}),createVNode$1(Button,{type:"primary",size:"small",onClick:S},{default:()=>[a.confirmButtonText||t$2("confirm")]})])])}});const Signature=withInstall(stdin_default$o),[name$i,bem$h]=createNamespace("skeleton-title"),skeletonTitleProps={round:Boolean,titleWidth:numericProp};var stdin_default$n=defineComponent({name:name$i,props:skeletonTitleProps,setup(a){return()=>createVNode$1("h3",{class:bem$h([{round:a.round}]),style:{width:addUnit(a.titleWidth)}},null)}});const SkeletonTitle=withInstall(stdin_default$n);var stdin_default$m=SkeletonTitle;const[name$h,bem$g]=createNamespace("skeleton-avatar"),skeletonAvatarProps={avatarSize:numericProp,avatarShape:makeStringProp("round")};var stdin_default$l=defineComponent({name:name$h,props:skeletonAvatarProps,setup(a){return()=>createVNode$1("div",{class:bem$g([a.avatarShape]),style:getSizeStyle(a.avatarSize)},null)}});const SkeletonAvatar=withInstall(stdin_default$l);var stdin_default$k=SkeletonAvatar;const DEFAULT_ROW_WIDTH="100%",skeletonParagraphProps={round:Boolean,rowWidth:{type:numericProp,default:DEFAULT_ROW_WIDTH}},[name$g,bem$f]=createNamespace("skeleton-paragraph");var stdin_default$j=defineComponent({name:name$g,props:skeletonParagraphProps,setup(a){return()=>createVNode$1("div",{class:bem$f([{round:a.round}]),style:{width:a.rowWidth}},null)}});const SkeletonParagraph=withInstall(stdin_default$j);var stdin_default$i=SkeletonParagraph;const[name$f,bem$e]=createNamespace("skeleton"),DEFAULT_LAST_ROW_WIDTH="60%",skeletonProps={row:makeNumericProp(0),round:Boolean,title:Boolean,titleWidth:numericProp,avatar:Boolean,avatarSize:numericProp,avatarShape:makeStringProp("round"),loading:truthProp,animate:truthProp,rowWidth:{type:[Number,String,Array],default:DEFAULT_ROW_WIDTH}};var stdin_default$h=defineComponent({name:name$f,inheritAttrs:!1,props:skeletonProps,setup(a,{slots:n,attrs:r}){const o=()=>{if(a.avatar)return createVNode$1(stdin_default$k,{avatarShape:a.avatarShape,avatarSize:a.avatarSize},null)},s=()=>{if(a.title)return createVNode$1(stdin_default$m,{round:a.round,titleWidth:a.titleWidth},null)},l=d=>{const{rowWidth:f}=a;return f===DEFAULT_ROW_WIDTH&&d===+a.row-1?DEFAULT_LAST_ROW_WIDTH:Array.isArray(f)?f[d]:f},c=()=>Array(+a.row).fill("").map((d,f)=>createVNode$1(stdin_default$i,{key:f,round:a.round,rowWidth:addUnit(l(f))},null)),u=()=>n.template?n.template():createVNode$1(Fragment,null,[o(),createVNode$1("div",{class:bem$e("content")},[s(),c()])]);return()=>{var d;return a.loading?createVNode$1("div",mergeProps({class:bem$e({animate:a.animate,round:a.round})},r),[u()]):(d=n.default)==null?void 0:d.call(n)}}});const Skeleton=withInstall(stdin_default$h),[name$e,bem$d]=createNamespace("skeleton-image"),skeletonImageProps={imageSize:numericProp,imageShape:makeStringProp("square")};var stdin_default$g=defineComponent({name:name$e,props:skeletonImageProps,setup(a){return()=>createVNode$1("div",{class:bem$d([a.imageShape]),style:getSizeStyle(a.imageSize)},[createVNode$1(Icon,{name:"photo",class:bem$d("icon")},null)])}});const SkeletonImage=withInstall(stdin_default$g),[name$d,bem$c]=createNamespace("slider"),sliderProps={min:makeNumericProp(0),max:makeNumericProp(100),step:makeNumericProp(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:numericProp,buttonSize:numericProp,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var stdin_default$f=defineComponent({name:name$d,props:sliderProps,emits:["change","dragEnd","dragStart","update:modelValue"],setup(a,{emit:n,slots:r}){let o,s,l;const c=ref(),u=[ref(),ref()],d=ref(),f=useTouch(),v=computed(()=>Number(a.max)-Number(a.min)),g=computed(()=>{const U=a.vertical?"width":"height";return{background:a.inactiveColor,[U]:addUnit(a.barHeight)}}),y=U=>a.range&&Array.isArray(U),_=()=>{const{modelValue:U,min:G}=a;return y(U)?`${(U[1]-U[0])*100/v.value}%`:`${(U-Number(G))*100/v.value}%`},S=()=>{const{modelValue:U,min:G}=a;return y(U)?`${(U[0]-Number(G))*100/v.value}%`:"0%"},x=computed(()=>{const G={[a.vertical?"height":"width"]:_(),background:a.activeColor};d.value&&(G.transition="none");const W=()=>a.vertical?a.reverse?"bottom":"top":a.reverse?"right":"left";return G[W()]=S(),G}),T=U=>{const G=+a.min,W=+a.max,j=+a.step;U=clamp$2(U,G,W);const K=Math.round((U-G)/j)*j;return addNumber(G,K)},w=()=>{const U=a.modelValue;y(U)?l=U.map(T):l=T(U)},E=U=>{var G,W;const j=(G=U[0])!=null?G:Number(a.min),K=(W=U[1])!=null?W:Number(a.max);return j>K?[K,j]:[j,K]},P=(U,G)=>{y(U)?U=E(U).map(T):U=T(U),isSameValue(U,a.modelValue)||n("update:modelValue",U),G&&!isSameValue(U,l)&&n("change",U)},D=U=>{if(U.stopPropagation(),a.disabled||a.readonly)return;w();const{min:G,reverse:W,vertical:j,modelValue:K}=a,q=useRect(c),ie=()=>j?W?q.bottom-U.clientY:U.clientY-q.top:W?q.right-U.clientX:U.clientX-q.left,ee=j?q.height:q.width,he=Number(G)+ie()/ee*v.value;if(y(K)){const[pe,ce]=K,ye=(pe+ce)/2;he<=ye?P([he,ce],!0):P([pe,he],!0)}else P(he,!0)},L=U=>{a.disabled||a.readonly||(f.start(U),s=a.modelValue,w(),d.value="start")},$=U=>{if(a.disabled||a.readonly)return;d.value==="start"&&n("dragStart",U),preventDefault$1(U,!0),f.move(U),d.value="dragging";const G=useRect(c),W=a.vertical?f.deltaY.value:f.deltaX.value,j=a.vertical?G.height:G.width;let K=W/j*v.value;if(a.reverse&&(K=-K),y(l)){const q=a.reverse?1-o:o;s[q]=l[q]+K}else s=l+K;P(s)},O=U=>{a.disabled||a.readonly||(d.value==="dragging"&&(P(s,!0),n("dragEnd",U)),d.value="")},B=U=>typeof U=="number"?bem$c("button-wrapper",["left","right"][U]):bem$c("button-wrapper",a.reverse?"left":"right"),V=(U,G)=>{const W=d.value==="dragging";if(typeof G=="number"){const j=r[G===0?"left-button":"right-button"];let K;if(W&&Array.isArray(s)&&(K=s[0]>s[1]?o^1:o),j)return j({value:U,dragging:W,dragIndex:K})}return r.button?r.button({value:U,dragging:W}):createVNode$1("div",{class:bem$c("button"),style:getSizeStyle(a.buttonSize)},null)},F=U=>{const G=typeof U=="number"?a.modelValue[U]:a.modelValue;return createVNode$1("div",{ref:u[U??0],role:"slider",class:B(U),tabindex:a.disabled?void 0:0,"aria-valuemin":a.min,"aria-valuenow":G,"aria-valuemax":a.max,"aria-disabled":a.disabled||void 0,"aria-readonly":a.readonly||void 0,"aria-orientation":a.vertical?"vertical":"horizontal",onTouchstartPassive:W=>{typeof U=="number"&&(o=U),L(W)},onTouchend:O,onTouchcancel:O,onClick:stopPropagation},[V(G,U)])};return P(a.modelValue),useCustomFieldValue(()=>a.modelValue),u.forEach(U=>{useEventListener("touchmove",$,{target:U})}),()=>createVNode$1("div",{ref:c,style:g.value,class:bem$c({vertical:a.vertical,disabled:a.disabled}),onClick:D},[createVNode$1("div",{class:bem$c("bar"),style:x.value},[a.range?[F(0),F(1)]:F()])])}});const Slider=withInstall(stdin_default$f),[name$c,bem$b]=createNamespace("space"),spaceProps={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function filterEmpty(a=[]){const n=[];return a.forEach(r=>{Array.isArray(r)?n.push(...r):r.type===Fragment?n.push(...filterEmpty(r.children)):n.push(r)}),n.filter(r=>{var o;return!(r&&(r.type===Comment||r.type===Fragment&&((o=r.children)==null?void 0:o.length)===0||r.type===Text&&r.children.trim()===""))})}var stdin_default$e=defineComponent({name:name$c,props:spaceProps,setup(a,{slots:n}){const r=computed(()=>{var l;return(l=a.align)!=null?l:a.direction==="horizontal"?"center":""}),o=l=>typeof l=="number"?l+"px":l,s=l=>{const c={},u=`${o(Array.isArray(a.size)?a.size[0]:a.size)}`,d=`${o(Array.isArray(a.size)?a.size[1]:a.size)}`;return l?a.wrap?{marginBottom:d}:{}:(a.direction==="horizontal"&&(c.marginRight=u),(a.direction==="vertical"||a.wrap)&&(c.marginBottom=d),c)};return()=>{var l;const c=filterEmpty((l=n.default)==null?void 0:l.call(n));return createVNode$1("div",{class:[bem$b({[a.direction]:a.direction,[`align-${r.value}`]:r.value,wrap:a.wrap,fill:a.fill})]},[c.map((u,d)=>createVNode$1("div",{key:`item-${d}`,class:`${name$c}-item`,style:s(d===c.length-1)},[u]))])}}});const Space=withInstall(stdin_default$e),[name$b,bem$a]=createNamespace("steps"),stepsProps={active:makeNumericProp(0),direction:makeStringProp("horizontal"),activeIcon:makeStringProp("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},STEPS_KEY=Symbol(name$b);var stdin_default$d=defineComponent({name:name$b,props:stepsProps,emits:["clickStep"],setup(a,{emit:n,slots:r}){const{linkChildren:o}=useChildren(STEPS_KEY);return o({props:a,onClickStep:l=>n("clickStep",l)}),()=>{var l;return createVNode$1("div",{class:bem$a([a.direction])},[createVNode$1("div",{class:bem$a("items")},[(l=r.default)==null?void 0:l.call(r)])])}}});const[name$a,bem$9]=createNamespace("step");var stdin_default$c=defineComponent({name:name$a,setup(a,{slots:n}){const{parent:r,index:o}=useParent(STEPS_KEY);if(!r)return;const s=r.props,l=()=>{const g=+s.active;return o.value<g?"finish":o.value===g?"process":"waiting"},c=()=>l()==="process",u=computed(()=>({background:l()==="finish"?s.activeColor:s.inactiveColor})),d=computed(()=>{if(c())return{color:s.activeColor};if(l()==="waiting")return{color:s.inactiveColor}}),f=()=>r.onClickStep(o.value),v=()=>{const{iconPrefix:g,finishIcon:y,activeIcon:_,activeColor:S,inactiveIcon:x}=s;return c()?n["active-icon"]?n["active-icon"]():createVNode$1(Icon,{class:bem$9("icon","active"),name:_,color:S,classPrefix:g},null):l()==="finish"&&(y||n["finish-icon"])?n["finish-icon"]?n["finish-icon"]():createVNode$1(Icon,{class:bem$9("icon","finish"),name:y,color:S,classPrefix:g},null):n["inactive-icon"]?n["inactive-icon"]():x?createVNode$1(Icon,{class:bem$9("icon"),name:x,classPrefix:g},null):createVNode$1("i",{class:bem$9("circle"),style:u.value},null)};return()=>{var g;const y=l();return createVNode$1("div",{class:[BORDER,bem$9([s.direction,{[y]:y}])]},[createVNode$1("div",{class:bem$9("title",{active:c()}),style:d.value,onClick:f},[(g=n.default)==null?void 0:g.call(n)]),createVNode$1("div",{class:bem$9("circle-container"),onClick:f},[v()]),createVNode$1("div",{class:bem$9("line"),style:u.value},null)])}}});const Step=withInstall(stdin_default$c),[name$9,bem$8]=createNamespace("stepper"),LONG_PRESS_INTERVAL=200,isEqual=(a,n)=>String(a)===String(n),stepperProps={min:makeNumericProp(1),max:makeNumericProp(1/0),name:makeNumericProp(""),step:makeNumericProp(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:truthProp,showMinus:truthProp,showInput:truthProp,longPress:truthProp,autoFixed:truthProp,allowEmpty:Boolean,modelValue:numericProp,inputWidth:numericProp,buttonSize:numericProp,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:makeNumericProp(1),decimalLength:numericProp};var stdin_default$b=defineComponent({name:name$9,props:stepperProps,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(a,{emit:n}){const r=(B,V=!0)=>{const{min:F,max:U,allowEmpty:G,decimalLength:W}=a;return G&&B===""||(B=formatNumber(String(B),!a.integer),B=B===""?0:+B,B=Number.isNaN(B)?+F:B,B=V?Math.max(Math.min(+U,B),+F):B,isDef$1(W)&&(B=B.toFixed(+W))),B},o=()=>{var B;const V=(B=a.modelValue)!=null?B:a.defaultValue,F=r(V);return isEqual(F,a.modelValue)||n("update:modelValue",F),F};let s;const l=ref(),c=ref(o()),u=computed(()=>a.disabled||a.disableMinus||+c.value<=+a.min),d=computed(()=>a.disabled||a.disablePlus||+c.value>=+a.max),f=computed(()=>({width:addUnit(a.inputWidth),height:addUnit(a.buttonSize)})),v=computed(()=>getSizeStyle(a.buttonSize)),g=()=>{const B=r(c.value);isEqual(B,c.value)||(c.value=B)},y=B=>{a.beforeChange?callInterceptor(a.beforeChange,{args:[B],done(){c.value=B}}):c.value=B},_=()=>{if(s==="plus"&&d.value||s==="minus"&&u.value){n("overlimit",s);return}const B=s==="minus"?-a.step:+a.step,V=r(addNumber(+c.value,B));y(V),n(s)},S=B=>{const V=B.target,{value:F}=V,{decimalLength:U}=a;let G=formatNumber(String(F),!a.integer);if(isDef$1(U)&&G.includes(".")){const j=G.split(".");G=`${j[0]}.${j[1].slice(0,+U)}`}a.beforeChange?V.value=String(c.value):isEqual(F,G)||(V.value=G);const W=G===String(+G);y(W?+G:G)},x=B=>{var V;a.disableInput?(V=l.value)==null||V.blur():n("focus",B)},T=B=>{const V=B.target,F=r(V.value,a.autoFixed);V.value=String(F),c.value=F,nextTick(()=>{n("blur",B),resetScroll()})};let w,E;const P=()=>{E=setTimeout(()=>{_(),P()},LONG_PRESS_INTERVAL)},D=()=>{a.longPress&&(w=!1,clearTimeout(E),E=setTimeout(()=>{w=!0,_(),P()},LONG_PRESS_START_TIME))},L=B=>{a.longPress&&(clearTimeout(E),w&&preventDefault$1(B))},$=B=>{a.disableInput&&preventDefault$1(B)},O=B=>({onClick:V=>{preventDefault$1(V),s=B,_()},onTouchstartPassive:()=>{s=B,D()},onTouchend:L,onTouchcancel:L});return watch(()=>[a.max,a.min,a.integer,a.decimalLength],g),watch(()=>a.modelValue,B=>{isEqual(B,c.value)||(c.value=r(B))}),watch(c,B=>{n("update:modelValue",B),n("change",B,{name:a.name})}),useCustomFieldValue(()=>a.modelValue),()=>createVNode$1("div",{role:"group",class:bem$8([a.theme])},[withDirectives(createVNode$1("button",mergeProps({type:"button",style:v.value,class:[bem$8("minus",{disabled:u.value}),{[HAPTICS_FEEDBACK]:!u.value}],"aria-disabled":u.value||void 0},O("minus")),null),[[vShow,a.showMinus]]),withDirectives(createVNode$1("input",{ref:l,type:a.integer?"tel":"text",role:"spinbutton",class:bem$8("input"),value:c.value,style:f.value,disabled:a.disabled,readonly:a.disableInput,inputmode:a.integer?"numeric":"decimal",placeholder:a.placeholder,autocomplete:"off","aria-valuemax":a.max,"aria-valuemin":a.min,"aria-valuenow":c.value,onBlur:T,onInput:S,onFocus:x,onMousedown:$},null),[[vShow,a.showInput]]),withDirectives(createVNode$1("button",mergeProps({type:"button",style:v.value,class:[bem$8("plus",{disabled:d.value}),{[HAPTICS_FEEDBACK]:!d.value}],"aria-disabled":d.value||void 0},O("plus")),null),[[vShow,a.showPlus]])])}});const Stepper=withInstall(stdin_default$b),Steps=withInstall(stdin_default$d),[name$8,bem$7,t$1]=createNamespace("submit-bar"),submitBarProps={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:makeStringProp("¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:makeStringProp("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:makeNumericProp(2),safeAreaInsetBottom:truthProp};var stdin_default$a=defineComponent({name:name$8,props:submitBarProps,emits:["submit"],setup(a,{emit:n,slots:r}){const o=ref(),s=usePlaceholder(o,bem$7),l=()=>{const{price:v,label:g,currency:y,textAlign:_,suffixLabel:S,decimalLength:x}=a;if(typeof v=="number"){const T=(v/100).toFixed(+x).split("."),w=x?`.${T[1]}`:"";return createVNode$1("div",{class:bem$7("text"),style:{textAlign:_}},[createVNode$1("span",null,[g||t$1("label")]),createVNode$1("span",{class:bem$7("price")},[y,createVNode$1("span",{class:bem$7("price-integer")},[T[0]]),w]),S&&createVNode$1("span",{class:bem$7("suffix-label")},[S])])}},c=()=>{var v;const{tip:g,tipIcon:y}=a;if(r.tip||g)return createVNode$1("div",{class:bem$7("tip")},[y&&createVNode$1(Icon,{class:bem$7("tip-icon"),name:y},null),g&&createVNode$1("span",{class:bem$7("tip-text")},[g]),(v=r.tip)==null?void 0:v.call(r)])},u=()=>n("submit"),d=()=>r.button?r.button():createVNode$1(Button,{round:!0,type:a.buttonType,text:a.buttonText,class:bem$7("button",a.buttonType),color:a.buttonColor,loading:a.loading,disabled:a.disabled,onClick:u},null),f=()=>{var v,g;return createVNode$1("div",{ref:o,class:[bem$7(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(v=r.top)==null?void 0:v.call(r),c(),createVNode$1("div",{class:bem$7("bar")},[(g=r.default)==null?void 0:g.call(r),l(),d()])])};return()=>a.placeholder?s(f):f()}});const SubmitBar=withInstall(stdin_default$a),[name$7,bem$6]=createNamespace("swipe-cell"),swipeCellProps={name:makeNumericProp(""),disabled:Boolean,leftWidth:numericProp,rightWidth:numericProp,beforeClose:Function,stopPropagation:Boolean};var stdin_default$9=defineComponent({name:name$7,props:swipeCellProps,emits:["open","close","click"],setup(a,{emit:n,slots:r}){let o,s,l,c;const u=ref(),d=ref(),f=ref(),v=reactive({offset:0,dragging:!1}),g=useTouch(),y=B=>B.value?useRect(B).width:0,_=computed(()=>isDef$1(a.leftWidth)?+a.leftWidth:y(d)),S=computed(()=>isDef$1(a.rightWidth)?+a.rightWidth:y(f)),x=B=>{v.offset=B==="left"?_.value:-S.value,o||(o=!0,n("open",{name:a.name,position:B}))},T=B=>{v.offset=0,o&&(o=!1,n("close",{name:a.name,position:B}))},w=B=>{const V=Math.abs(v.offset),F=.15,U=o?1-F:F,G=B==="left"?_.value:S.value;G&&V>G*U?x(B):T(B)},E=B=>{a.disabled||(l=v.offset,g.start(B))},P=B=>{if(a.disabled)return;const{deltaX:V}=g;g.move(B),g.isHorizontal()&&(s=!0,v.dragging=!0,(!o||V.value*l<0)&&preventDefault$1(B,a.stopPropagation),v.offset=clamp$2(V.value+l,-S.value,_.value))},D=()=>{v.dragging&&(v.dragging=!1,w(v.offset>0?"left":"right"),setTimeout(()=>{s=!1},0))},L=(B="outside",V)=>{c||(n("click",B),o&&!s&&(c=!0,callInterceptor(a.beforeClose,{args:[{event:V,name:a.name,position:B}],done:()=>{c=!1,T(B)},canceled:()=>c=!1,error:()=>c=!1})))},$=(B,V)=>F=>{V&&F.stopPropagation(),!s&&L(B,F)},O=(B,V)=>{const F=r[B];if(F)return createVNode$1("div",{ref:V,class:bem$6(B),onClick:$(B,!0)},[F()])};return useExpose({open:x,close:T}),useClickAway(u,B=>L("outside",B),{eventName:"touchstart"}),useEventListener("touchmove",P,{target:u}),()=>{var B;const V={transform:`translate3d(${v.offset}px, 0, 0)`,transitionDuration:v.dragging?"0s":".6s"};return createVNode$1("div",{ref:u,class:bem$6(),onClick:$("cell",s),onTouchstartPassive:E,onTouchend:D,onTouchcancel:D},[createVNode$1("div",{class:bem$6("wrapper"),style:V},[O("left",d),(B=r.default)==null?void 0:B.call(r),O("right",f)])])}}});const SwipeCell=withInstall(stdin_default$9),[name$6,bem$5]=createNamespace("tabbar"),tabbarProps={route:Boolean,fixed:truthProp,border:truthProp,zIndex:numericProp,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:makeNumericProp(0),safeAreaInsetBottom:{type:Boolean,default:null}},TABBAR_KEY=Symbol(name$6);var stdin_default$8=defineComponent({name:name$6,props:tabbarProps,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(),{linkChildren:s}=useChildren(TABBAR_KEY),l=usePlaceholder(o,bem$5),c=()=>{var f;return(f=a.safeAreaInsetBottom)!=null?f:a.fixed},u=()=>{var f;const{fixed:v,zIndex:g,border:y}=a;return createVNode$1("div",{ref:o,role:"tablist",style:getZIndexStyle(g),class:[bem$5({fixed:v}),{[BORDER_TOP_BOTTOM]:y,"van-safe-area-bottom":c()}]},[(f=r.default)==null?void 0:f.call(r)])};return s({props:a,setActive:(f,v)=>{callInterceptor(a.beforeChange,{args:[f],done(){n("update:modelValue",f),n("change",f),v()}})}}),()=>a.fixed&&a.placeholder?l(u):u()}});const Tabbar=withInstall(stdin_default$8),[name$5,bem$4]=createNamespace("tabbar-item"),tabbarItemProps=extend$1({},routeProps,{dot:Boolean,icon:String,name:numericProp,badge:numericProp,badgeProps:Object,iconPrefix:String});var stdin_default$7=defineComponent({name:name$5,props:tabbarItemProps,emits:["click"],setup(a,{emit:n,slots:r}){const o=useRoute$1(),s=getCurrentInstance().proxy,{parent:l,index:c}=useParent(TABBAR_KEY);if(!l)return;const u=computed(()=>{var v;const{route:g,modelValue:y}=l.props;if(g&&"$route"in s){const{$route:_}=s,{to:S}=a,x=isObject$4(S)?S:{path:S};return!!_.matched.find(T=>{const w="path"in x&&x.path===T.path,E="name"in x&&x.name===T.name;return w||E})}return((v=a.name)!=null?v:c.value)===y}),d=v=>{var g;u.value||l.setActive((g=a.name)!=null?g:c.value,o),n("click",v)},f=()=>{if(r.icon)return r.icon({active:u.value});if(a.icon)return createVNode$1(Icon,{name:a.icon,classPrefix:a.iconPrefix},null)};return()=>{var v;const{dot:g,badge:y}=a,{activeColor:_,inactiveColor:S}=l.props,x=u.value?_:S;return createVNode$1("div",{role:"tab",class:bem$4({active:u.value}),style:{color:x},tabindex:0,"aria-selected":u.value,onClick:d},[createVNode$1(Badge,mergeProps({dot:g,class:bem$4("icon"),content:y},a.badgeProps),{default:f}),createVNode$1("div",{class:bem$4("text")},[(v=r.default)==null?void 0:v.call(r,{active:u.value})])])}}});const TabbarItem=withInstall(stdin_default$7),[name$4,bem$3]=createNamespace("text-ellipsis"),textEllipsisProps={rows:makeNumericProp(1),dots:makeStringProp("..."),content:makeStringProp(""),expandText:makeStringProp(""),collapseText:makeStringProp(""),position:makeStringProp("end")};var stdin_default$6=defineComponent({name:name$4,props:textEllipsisProps,emits:["clickAction"],setup(a,{emit:n,slots:r}){const o=ref(a.content),s=ref(!1),l=ref(!1),c=ref(),u=ref();let d=!1;const f=computed(()=>s.value?a.collapseText:a.expandText),v=w=>{if(!w)return 0;const E=w.match(/^\d*(\.\d*)?/);return E?Number(E[0]):0},g=()=>{if(!c.value||!c.value.isConnected)return;const w=window.getComputedStyle(c.value),E=document.createElement("div");return Array.prototype.slice.apply(w).forEach(D=>{E.style.setProperty(D,w.getPropertyValue(D))}),E.style.position="fixed",E.style.zIndex="-9999",E.style.top="-9999px",E.style.height="auto",E.style.minHeight="auto",E.style.maxHeight="auto",E.innerText=a.content,document.body.appendChild(E),E},y=(w,E)=>{var P,D;const{content:L,position:$,dots:O}=a,B=L.length,V=0+B>>1,F=r.action?(D=(P=u.value)==null?void 0:P.outerHTML)!=null?D:"":a.expandText,U=()=>{const W=(j,K)=>{if(K-j<=1)return $==="end"?L.slice(0,j)+O:O+L.slice(K,B);const q=Math.round((j+K)/2);return $==="end"?w.innerText=L.slice(0,q)+O:w.innerText=O+L.slice(q,B),w.innerHTML+=F,w.offsetHeight>E?$==="end"?W(j,q):W(q,K):$==="end"?W(q,K):W(j,q)};return W(0,B)},G=(W,j)=>{if(W[1]-W[0]<=1&&j[1]-j[0]<=1)return L.slice(0,W[0])+O+L.slice(j[1],B);const K=Math.floor((W[0]+W[1])/2),q=Math.ceil((j[0]+j[1])/2);return w.innerText=a.content.slice(0,K)+a.dots+a.content.slice(q,B),w.innerHTML+=F,w.offsetHeight>=E?G([W[0],K],[q,j[1]]):G([K,W[1]],[j[0],q])};return a.position==="middle"?G([0,V],[V,B]):U()},_=()=>{const w=g();if(!w){d=!0;return}const{paddingBottom:E,paddingTop:P,lineHeight:D}=w.style,L=Math.ceil((Number(a.rows)+.5)*v(D)+v(P)+v(E));L<w.offsetHeight?(l.value=!0,o.value=y(w,L)):(l.value=!1,o.value=a.content),document.body.removeChild(w)},S=(w=!s.value)=>{s.value=w},x=w=>{S(),n("clickAction",w)},T=()=>{const w=r.action?r.action({expanded:s.value}):f.value;return createVNode$1("span",{ref:u,class:bem$3("action"),onClick:x},[w])};return onMounted(()=>{_(),r.action&&nextTick(_)}),onActivated(()=>{d&&(d=!1,_())}),watch([windowWidth,()=>[a.content,a.rows,a.position]],_),useExpose({toggle:S}),()=>createVNode$1("div",{ref:c,class:bem$3()},[s.value?a.content:o.value,l.value?T():null])}});const TextEllipsis=withInstall(stdin_default$6),[name$3]=createNamespace("time-picker"),validateTime=a=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(a),fullColumns=["hour","minute","second"],timePickerProps=extend$1({},sharedProps,{minHour:makeNumericProp(0),maxHour:makeNumericProp(23),minMinute:makeNumericProp(0),maxMinute:makeNumericProp(59),minSecond:makeNumericProp(0),maxSecond:makeNumericProp(59),minTime:{type:String,validator:validateTime},maxTime:{type:String,validator:validateTime},columnsType:{type:Array,default:()=>["hour","minute"]}});var stdin_default$5=defineComponent({name:name$3,props:timePickerProps,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(a.modelValue),s=ref(),l=y=>{const _=y.split(":");return fullColumns.map((S,x)=>a.columnsType.includes(S)?_[x]:"00")},c=()=>{var y;return(y=s.value)==null?void 0:y.confirm()},u=()=>o.value,d=computed(()=>{let{minHour:y,maxHour:_,minMinute:S,maxMinute:x,minSecond:T,maxSecond:w}=a;if(a.minTime||a.maxTime){const E={hour:0,minute:0,second:0};a.columnsType.forEach((L,$)=>{var O;E[L]=(O=o.value[$])!=null?O:0});const{hour:P,minute:D}=E;if(a.minTime){const[L,$,O]=l(a.minTime);y=L,S=+P<=+y?$:"00",T=+P<=+y&&+D<=+S?O:"00"}if(a.maxTime){const[L,$,O]=l(a.maxTime);_=L,x=+P>=+_?$:"59",w=+P>=+_&&+D>=+x?O:"59"}}return a.columnsType.map(E=>{const{filter:P,formatter:D}=a;switch(E){case"hour":return genOptions(+y,+_,E,D,P,o.value);case"minute":return genOptions(+S,+x,E,D,P,o.value);case"second":return genOptions(+T,+w,E,D,P,o.value);default:return[]}})});watch(o,y=>{isSameValue(y,a.modelValue)||n("update:modelValue",y)}),watch(()=>a.modelValue,y=>{y=formatValueRange(y,d.value),isSameValue(y,o.value)||(o.value=y)},{immediate:!0});const f=(...y)=>n("change",...y),v=(...y)=>n("cancel",...y),g=(...y)=>n("confirm",...y);return useExpose({confirm:c,getSelectedTime:u}),()=>createVNode$1(Picker,mergeProps({ref:s,modelValue:o.value,"onUpdate:modelValue":y=>o.value=y,columns:d.value,onChange:f,onCancel:v,onConfirm:g},pick(a,pickerInheritKeys)),r)}});const TimePicker=withInstall(stdin_default$5),[name$2,bem$2]=createNamespace("tree-select"),treeSelectProps={max:makeNumericProp(1/0),items:makeArrayProp(),height:makeNumericProp(300),selectedIcon:makeStringProp("success"),mainActiveIndex:makeNumericProp(0),activeId:{type:[Number,String,Array],default:0}};var stdin_default$4=defineComponent({name:name$2,props:treeSelectProps,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(a,{emit:n,slots:r}){const o=f=>Array.isArray(a.activeId)?a.activeId.includes(f):a.activeId===f,s=f=>{const v=()=>{if(f.disabled)return;let g;if(Array.isArray(a.activeId)){g=a.activeId.slice();const y=g.indexOf(f.id);y!==-1?g.splice(y,1):g.length<+a.max&&g.push(f.id)}else g=f.id;n("update:activeId",g),n("clickItem",f)};return createVNode$1("div",{key:f.id,class:["van-ellipsis",bem$2("item",{active:o(f.id),disabled:f.disabled})],onClick:v},[f.text,o(f.id)&&createVNode$1(Icon,{name:a.selectedIcon,class:bem$2("selected")},null)])},l=f=>{n("update:mainActiveIndex",f)},c=f=>n("clickNav",f),u=()=>{const f=a.items.map(v=>createVNode$1(SidebarItem,{dot:v.dot,badge:v.badge,class:[bem$2("nav-item"),v.className],disabled:v.disabled,onClick:c},{title:()=>r["nav-text"]?r["nav-text"](v):v.text}));return createVNode$1(Sidebar,{class:bem$2("nav"),modelValue:a.mainActiveIndex,onChange:l},{default:()=>[f]})},d=()=>{if(r.content)return r.content();const f=a.items[+a.mainActiveIndex]||{};if(f.children)return f.children.map(s)};return()=>createVNode$1("div",{class:bem$2(),style:{height:addUnit(a.height)}},[u(),createVNode$1("div",{class:bem$2("content")},[d()])])}});const TreeSelect=withInstall(stdin_default$4),[name$1,bem$1,t]=createNamespace("uploader");function readFileContent(a,n){return new Promise(r=>{if(n==="file"){r();return}const o=new FileReader;o.onload=s=>{r(s.target.result)},n==="dataUrl"?o.readAsDataURL(a):n==="text"&&o.readAsText(a)})}function isOversize(a,n){return toArray(a).some(r=>r.file?isFunction$1(n)?n(r.file):r.file.size>+n:!1)}function filterFiles(a,n){const r=[],o=[];return a.forEach(s=>{isOversize(s,n)?o.push(s):r.push(s)}),{valid:r,invalid:o}}const IMAGE_REGEXP=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,isImageUrl=a=>IMAGE_REGEXP.test(a);function isImageFile(a){return a.isImage?!0:a.file&&a.file.type?a.file.type.indexOf("image")===0:a.url?isImageUrl(a.url):typeof a.content=="string"?a.content.indexOf("data:image")===0:!1}var stdin_default$3=defineComponent({props:{name:numericProp,item:makeRequiredProp(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(a,{emit:n,slots:r}){const o=()=>{const{status:v,message:g}=a.item;if(v==="uploading"||v==="failed"){const y=v==="failed"?createVNode$1(Icon,{name:"close",class:bem$1("mask-icon")},null):createVNode$1(Loading,{class:bem$1("loading")},null),_=isDef$1(g)&&g!=="";return createVNode$1("div",{class:bem$1("mask")},[y,_&&createVNode$1("div",{class:bem$1("mask-message")},[g])])}},s=v=>{const{name:g,item:y,index:_,beforeDelete:S}=a;v.stopPropagation(),callInterceptor(S,{args:[y,{name:g,index:_}],done:()=>n("delete")})},l=()=>n("preview"),c=()=>n("reupload"),u=()=>{if(a.deletable&&a.item.status!=="uploading"){const v=r["preview-delete"];return createVNode$1("div",{role:"button",class:bem$1("preview-delete",{shadow:!v}),tabindex:0,"aria-label":t("delete"),onClick:s},[v?v():createVNode$1(Icon,{name:"cross",class:bem$1("preview-delete-icon")},null)])}},d=()=>{if(r["preview-cover"]){const{index:v,item:g}=a;return createVNode$1("div",{class:bem$1("preview-cover")},[r["preview-cover"](extend$1({index:v},g))])}},f=()=>{const{item:v,lazyLoad:g,imageFit:y,previewSize:_,reupload:S}=a;return isImageFile(v)?createVNode$1(Image$1,{fit:y,src:v.objectUrl||v.content||v.url,class:bem$1("preview-image"),width:Array.isArray(_)?_[0]:_,height:Array.isArray(_)?_[1]:_,lazyLoad:g,onClick:S?c:l},{default:d}):createVNode$1("div",{class:bem$1("file"),style:getSizeStyle(a.previewSize)},[createVNode$1(Icon,{class:bem$1("file-icon"),name:"description"},null),createVNode$1("div",{class:[bem$1("file-name"),"van-ellipsis"]},[v.file?v.file.name:v.url]),d()])};return()=>createVNode$1("div",{class:bem$1("preview")},[f(),o(),u()])}});const uploaderProps={name:makeNumericProp(""),accept:makeStringProp("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:makeNumericProp(1/0),imageFit:makeStringProp("cover"),resultType:makeStringProp("dataUrl"),uploadIcon:makeStringProp("photograph"),uploadText:String,deletable:truthProp,reupload:Boolean,afterRead:Function,showUpload:truthProp,modelValue:makeArrayProp(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:truthProp,previewOptions:Object,previewFullImage:truthProp,maxSize:{type:[Number,String,Function],default:1/0}};var stdin_default$2=defineComponent({name:name$1,props:uploaderProps,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(a,{emit:n,slots:r}){const o=ref(),s=[],l=ref(-1),c=ref(!1),u=(B=a.modelValue.length)=>({name:a.name,index:B}),d=()=>{o.value&&(o.value.value="")},f=B=>{if(d(),isOversize(B,a.maxSize))if(Array.isArray(B)){const V=filterFiles(B,a.maxSize);if(B=V.valid,n("oversize",V.invalid,u()),!B.length)return}else{n("oversize",B,u());return}if(B=reactive(B),l.value>-1){const V=[...a.modelValue];V.splice(l.value,1,B),n("update:modelValue",V),l.value=-1}else n("update:modelValue",[...a.modelValue,...toArray(B)]);a.afterRead&&a.afterRead(B,u())},v=B=>{const{maxCount:V,modelValue:F,resultType:U}=a;if(Array.isArray(B)){const G=+V-F.length;B.length>G&&(B=B.slice(0,G)),Promise.all(B.map(W=>readFileContent(W,U))).then(W=>{const j=B.map((K,q)=>{const ie={file:K,status:"",message:"",objectUrl:URL.createObjectURL(K)};return W[q]&&(ie.content=W[q]),ie});f(j)})}else readFileContent(B,U).then(G=>{const W={file:B,status:"",message:"",objectUrl:URL.createObjectURL(B)};G&&(W.content=G),f(W)})},g=B=>{const{files:V}=B.target;if(a.disabled||!V||!V.length)return;const F=V.length===1?V[0]:[].slice.call(V);if(a.beforeRead){const U=a.beforeRead(F,u());if(!U){d();return}if(isPromise(U)){U.then(G=>{v(G||F)}).catch(d);return}}v(F)};let y;const _=()=>n("closePreview"),S=B=>{if(a.previewFullImage){const V=a.modelValue.filter(isImageFile),F=V.map(U=>(U.objectUrl&&!U.url&&U.status!=="failed"&&(U.url=U.objectUrl,s.push(U.url)),U.url)).filter(Boolean);y=showImagePreview(extend$1({images:F,startPosition:V.indexOf(B),onClose:_},a.previewOptions))}},x=()=>{y&&y.close()},T=(B,V)=>{const F=a.modelValue.slice(0);F.splice(V,1),n("update:modelValue",F),n("delete",B,u(V))},w=B=>{c.value=!0,l.value=B,nextTick(()=>O())},E=()=>{c.value||(l.value=-1),c.value=!1},P=(B,V)=>{const F=["imageFit","deletable","reupload","previewSize","beforeDelete"],U=extend$1(pick(a,F),pick(B,F,!0));return createVNode$1(stdin_default$3,mergeProps({item:B,index:V,onClick:()=>n(a.reupload?"clickReupload":"clickPreview",B,u(V)),onDelete:()=>T(B,V),onPreview:()=>S(B),onReupload:()=>w(V)},pick(a,["name","lazyLoad"]),U),pick(r,["preview-cover","preview-delete"]))},D=()=>{if(a.previewImage)return a.modelValue.map(P)},L=B=>n("clickUpload",B),$=()=>{const B=a.modelValue.length<+a.maxCount,V=a.readonly?null:createVNode$1("input",{ref:o,type:"file",class:bem$1("input"),accept:a.accept,capture:a.capture,multiple:a.multiple&&l.value===-1,disabled:a.disabled,onChange:g,onClick:E},null);return r.default?withDirectives(createVNode$1("div",{class:bem$1("input-wrapper"),onClick:L},[r.default(),V]),[[vShow,B]]):withDirectives(createVNode$1("div",{class:bem$1("upload",{readonly:a.readonly}),style:getSizeStyle(a.previewSize),onClick:L},[createVNode$1(Icon,{name:a.uploadIcon,class:bem$1("upload-icon")},null),a.uploadText&&createVNode$1("span",{class:bem$1("upload-text")},[a.uploadText]),V]),[[vShow,a.showUpload&&B]])},O=()=>{o.value&&!a.disabled&&o.value.click()};return onBeforeUnmount(()=>{s.forEach(B=>URL.revokeObjectURL(B))}),useExpose({chooseFile:O,reuploadFile:w,closeImagePreview:x}),useCustomFieldValue(()=>a.modelValue),()=>createVNode$1("div",{class:bem$1()},[createVNode$1("div",{class:bem$1("wrapper",{disabled:a.disabled})},[D(),$()])])}});const Uploader=withInstall(stdin_default$2),[name,bem]=createNamespace("watermark"),watermarkProps={gapX:makeNumberProp(0),gapY:makeNumberProp(0),image:String,width:makeNumberProp(100),height:makeNumberProp(100),rotate:makeNumericProp(-22),zIndex:numericProp,content:String,opacity:numericProp,fullPage:truthProp,textColor:makeStringProp("#dcdee0")};var stdin_default$1=defineComponent({name,props:watermarkProps,setup(a,{slots:n}){const r=ref(),o=ref(""),s=ref(""),l=()=>{const d={transformOrigin:"center",transform:`rotate(${a.rotate}deg)`},f=()=>a.image&&!n.content?createVNode$1("image",{href:s.value,"xlink:href":s.value,x:"0",y:"0",width:a.width,height:a.height,style:d},null):createVNode$1("foreignObject",{x:"0",y:"0",width:a.width,height:a.height},[createVNode$1("div",{xmlns:"http://www.w3.org/1999/xhtml",style:d},[n.content?n.content():createVNode$1("span",{style:{color:a.textColor}},[a.content])])]),v=a.width+a.gapX,g=a.height+a.gapY;return createVNode$1("svg",{viewBox:`0 0 ${v} ${g}`,width:v,height:g,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{padding:`0 ${a.gapX}px ${a.gapY}px 0`,opacity:a.opacity}},[f()])},c=d=>{const f=document.createElement("canvas"),v=new Image;v.crossOrigin="anonymous",v.referrerPolicy="no-referrer",v.onload=()=>{f.width=v.naturalWidth,f.height=v.naturalHeight;const g=f.getContext("2d");g==null||g.drawImage(v,0,0),s.value=f.toDataURL()},v.src=d},u=d=>{const f=new Blob([d],{type:"image/svg+xml"});return URL.createObjectURL(f)};return watchEffect(()=>{a.image&&c(a.image)}),watch(()=>[s.value,a.content,a.textColor,a.height,a.width,a.rotate,a.gapX,a.gapY],()=>{nextTick(()=>{r.value&&(o.value&&URL.revokeObjectURL(o.value),o.value=u(r.value.innerHTML))})},{immediate:!0}),onUnmounted(()=>{o.value&&URL.revokeObjectURL(o.value)}),()=>{const d=extend$1({backgroundImage:`url(${o.value})`},getZIndexStyle(a.zIndex));return createVNode$1("div",{class:bem({full:a.fullPage}),style:d},[createVNode$1("div",{class:bem("wrapper"),ref:r},[l()])])}}});const Watermark=withInstall(stdin_default$1),version="4.9.15";function install$T(a){[ActionBar,ActionBarButton,ActionBarIcon,ActionSheet,AddressEdit,AddressList,Area,BackTop,Badge,Barrage,Button,Calendar$1,Card,Cascader,Cell,CellGroup,Checkbox,CheckboxGroup,Circle$1,Col,Collapse,CollapseItem,ConfigProvider,ContactCard,ContactEdit,ContactList,CountDown,Coupon,CouponCell,CouponList,DatePicker,Dialog,Divider,DropdownItem,DropdownMenu,Empty,Field,FloatingBubble,FloatingPanel,Form,Grid$1,GridItem,Highlight,Icon,Image$1,ImagePreview,IndexAnchor,IndexBar,List,Loading,Locale,NavBar,NoticeBar,Notify,NumberKeyboard,Overlay,Pagination,PasswordInput,Picker,PickerGroup,Popover,Popup,Progress,PullRefresh,Radio,RadioGroup,Rate,RollingText,Row,Search,ShareSheet,Sidebar,SidebarItem,Signature,Skeleton,SkeletonAvatar,SkeletonImage,SkeletonParagraph,SkeletonTitle,Slider,Space,Step,Stepper,Steps,Sticky,SubmitBar,Swipe,SwipeCell,SwipeItem,Switch,Tab,Tabbar,TabbarItem,Tabs,Tag,TextEllipsis,TimePicker,Toast,TreeSelect,Uploader,Watermark].forEach(r=>{r.install?a.use(r):r.name&&a.component(r.name,r)})}var stdin_default={install:install$T,version};/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(a){return typeof a=="object"||"displayName"in a||"props"in a||"__vccOpts"in a}function isESModule(a){return a.__esModule||a[Symbol.toStringTag]==="Module"||a.default&&isRouteComponent(a.default)}const assign=Object.assign;function applyToParams(a,n){const r={};for(const o in n){const s=n[o];r[o]=isArray$2(s)?s.map(a):a(s)}return r}const noop$1=()=>{},isArray$2=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(a){return encodeURI(""+a).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(a){return commonEncode(a).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(a){return commonEncode(a).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(a){return encodeQueryValue(a).replace(EQUAL_RE,"%3D")}function encodePath(a){return commonEncode(a).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(a){return a==null?"":encodePath(a).replace(SLASH_RE,"%2F")}function decode$1(a){try{return decodeURIComponent(""+a)}catch{}return""+a}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=a=>a.replace(TRAILING_SLASH_RE,"");function parseURL(a,n,r="/"){let o,s={},l="",c="";const u=n.indexOf("#");let d=n.indexOf("?");return u<d&&u>=0&&(d=-1),d>-1&&(o=n.slice(0,d),l=n.slice(d+1,u>-1?u:n.length),s=a(l)),u>-1&&(o=o||n.slice(0,u),c=n.slice(u,n.length)),o=resolveRelativePath(o??n,r),{fullPath:o+(l&&"?")+l+c,path:o,query:s,hash:decode$1(c)}}function stringifyURL(a,n){const r=n.query?a(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function stripBase(a,n){return!n||!a.toLowerCase().startsWith(n.toLowerCase())?a:a.slice(n.length)||"/"}function isSameRouteLocation(a,n,r){const o=n.matched.length-1,s=r.matched.length-1;return o>-1&&o===s&&isSameRouteRecord(n.matched[o],r.matched[s])&&isSameRouteLocationParams(n.params,r.params)&&a(n.query)===a(r.query)&&n.hash===r.hash}function isSameRouteRecord(a,n){return(a.aliasOf||a)===(n.aliasOf||n)}function isSameRouteLocationParams(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const r in a)if(!isSameRouteLocationParamsValue(a[r],n[r]))return!1;return!0}function isSameRouteLocationParamsValue(a,n){return isArray$2(a)?isEquivalentArray(a,n):isArray$2(n)?isEquivalentArray(n,a):a===n}function isEquivalentArray(a,n){return isArray$2(n)?a.length===n.length&&a.every((r,o)=>r===n[o]):a.length===1&&a[0]===n}function resolveRelativePath(a,n){if(a.startsWith("/"))return a;if(!a)return n;const r=n.split("/"),o=a.split("/"),s=o[o.length-1];(s===".."||s===".")&&o.push("");let l=r.length-1,c,u;for(c=0;c<o.length;c++)if(u=o[c],u!==".")if(u==="..")l>1&&l--;else break;return r.slice(0,l).join("/")+"/"+o.slice(c).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(a){a.pop="pop",a.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(a){a.back="back",a.forward="forward",a.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(a){if(!a)if(isBrowser){const n=document.querySelector("base");a=n&&n.getAttribute("href")||"/",a=a.replace(/^\w+:\/\/[^\/]+/,"")}else a="/";return a[0]!=="/"&&a[0]!=="#"&&(a="/"+a),removeTrailingSlash(a)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(a,n){return a.replace(BEFORE_HASH_RE,"#")+n}function getElementPosition(a,n){const r=document.documentElement.getBoundingClientRect(),o=a.getBoundingClientRect();return{behavior:n.behavior,left:o.left-r.left-(n.left||0),top:o.top-r.top-(n.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(a){let n;if("el"in a){const r=a.el,o=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?o?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;n=getElementPosition(s,a)}else n=a;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function getScrollKey(a,n){return(history.state?history.state.position-n:-1)+a}const scrollPositions=new Map;function saveScrollPosition(a,n){scrollPositions.set(a,n)}function getSavedScrollPosition(a){const n=scrollPositions.get(a);return scrollPositions.delete(a),n}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(a,n){const{pathname:r,search:o,hash:s}=n,l=a.indexOf("#");if(l>-1){let u=s.includes(a.slice(l))?a.slice(l).length:1,d=s.slice(u);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(r,a)+o+s}function useHistoryListeners(a,n,r,o){let s=[],l=[],c=null;const u=({state:y})=>{const _=createCurrentLocation(a,location),S=r.value,x=n.value;let T=0;if(y){if(r.value=_,n.value=y,c&&c===S){c=null;return}T=x?y.position-x.position:0}else o(_);s.forEach(w=>{w(r.value,S,{delta:T,type:NavigationType.pop,direction:T?T>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){c=r.value}function f(y){s.push(y);const _=()=>{const S=s.indexOf(y);S>-1&&s.splice(S,1)};return l.push(_),_}function v(){const{history:y}=window;y.state&&y.replaceState(assign({},y.state,{scroll:computeScrollPosition()}),"")}function g(){for(const y of l)y();l=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:d,listen:f,destroy:g}}function buildState(a,n,r,o=!1,s=!1){return{back:a,current:n,forward:r,replaced:o,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(a){const{history:n,location:r}=window,o={value:createCurrentLocation(a,r)},s={value:n.state};s.value||l(o.value,{back:null,current:o.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function l(d,f,v){const g=a.indexOf("#"),y=g>-1?(r.host&&document.querySelector("base")?a:a.slice(g))+d:createBaseLocation()+a+d;try{n[v?"replaceState":"pushState"](f,"",y),s.value=f}catch(_){console.error(_),r[v?"replace":"assign"](y)}}function c(d,f){const v=assign({},n.state,buildState(s.value.back,d,s.value.forward,!0),f,{position:s.value.position});l(d,v,!0),o.value=d}function u(d,f){const v=assign({},s.value,n.state,{forward:d,scroll:computeScrollPosition()});l(v.current,v,!0);const g=assign({},buildState(o.value,d,null),{position:v.position+1},f);l(d,g,!1),o.value=d}return{location:o,state:s,push:u,replace:c}}function createWebHistory(a){a=normalizeBase(a);const n=useHistoryStateNavigation(a),r=useHistoryListeners(a,n.state,n.location,n.replace);function o(l,c=!0){c||r.pauseListeners(),history.go(l)}const s=assign({location:"",base:a,go:o,createHref:createHref.bind(null,a)},n,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function isRouteLocation(a){return typeof a=="string"||a&&typeof a=="object"}function isRouteName(a){return typeof a=="string"||typeof a=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(a){a[a.aborted=4]="aborted",a[a.cancelled=8]="cancelled",a[a.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(a,n){return assign(new Error,{type:a,[NavigationFailureSymbol]:!0},n)}function isNavigationFailure(a,n){return a instanceof Error&&NavigationFailureSymbol in a&&(n==null||!!(a.type&n))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(a,n){const r=assign({},BASE_PATH_PARSER_OPTIONS,n),o=[];let s=r.start?"^":"";const l=[];for(const f of a){const v=f.length?[]:[90];r.strict&&!f.length&&(s+="/");for(let g=0;g<f.length;g++){const y=f[g];let _=40+(r.sensitive?.25:0);if(y.type===0)g||(s+="/"),s+=y.value.replace(REGEX_CHARS_RE,"\\$&"),_+=40;else if(y.type===1){const{value:S,repeatable:x,optional:T,regexp:w}=y;l.push({name:S,repeatable:x,optional:T});const E=w||BASE_PARAM_PATTERN;if(E!==BASE_PARAM_PATTERN){_+=10;try{new RegExp(`(${E})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${S}" (${E}): `+D.message)}}let P=x?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;g||(P=T&&f.length<2?`(?:/${P})`:"/"+P),T&&(P+="?"),s+=P,_+=20,T&&(_+=-8),x&&(_+=-20),E===".*"&&(_+=-50)}v.push(_)}o.push(v)}if(r.strict&&r.end){const f=o.length-1;o[f][o[f].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,r.sensitive?"":"i");function u(f){const v=f.match(c),g={};if(!v)return null;for(let y=1;y<v.length;y++){const _=v[y]||"",S=l[y-1];g[S.name]=_&&S.repeatable?_.split("/"):_}return g}function d(f){let v="",g=!1;for(const y of a){(!g||!v.endsWith("/"))&&(v+="/"),g=!1;for(const _ of y)if(_.type===0)v+=_.value;else if(_.type===1){const{value:S,repeatable:x,optional:T}=_,w=S in f?f[S]:"";if(isArray$2(w)&&!x)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const E=isArray$2(w)?w.join("/"):w;if(!E)if(T)y.length<2&&(v.endsWith("/")?v=v.slice(0,-1):g=!0);else throw new Error(`Missing required param "${S}"`);v+=E}}return v||"/"}return{re:c,score:o,keys:l,parse:u,stringify:d}}function compareScoreArray(a,n){let r=0;for(;r<a.length&&r<n.length;){const o=n[r]-a[r];if(o)return o;r++}return a.length<n.length?a.length===1&&a[0]===80?-1:1:a.length>n.length?n.length===1&&n[0]===80?1:-1:0}function comparePathParserScore(a,n){let r=0;const o=a.score,s=n.score;for(;r<o.length&&r<s.length;){const l=compareScoreArray(o[r],s[r]);if(l)return l;r++}if(Math.abs(s.length-o.length)===1){if(isLastScoreNegative(o))return 1;if(isLastScoreNegative(s))return-1}return s.length-o.length}function isLastScoreNegative(a){const n=a[a.length-1];return a.length>0&&n[n.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(a){if(!a)return[[]];if(a==="/")return[[ROOT_TOKEN]];if(!a.startsWith("/"))throw new Error(`Invalid path "${a}"`);function n(_){throw new Error(`ERR (${r})/"${f}": ${_}`)}let r=0,o=r;const s=[];let l;function c(){l&&s.push(l),l=[]}let u=0,d,f="",v="";function g(){f&&(r===0?l.push({type:0,value:f}):r===1||r===2||r===3?(l.length>1&&(d==="*"||d==="+")&&n(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:f,regexp:v,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):n("Invalid state to consume buffer"),f="")}function y(){f+=d}for(;u<a.length;){if(d=a[u++],d==="\\"&&r!==2){o=r,r=4;continue}switch(r){case 0:d==="/"?(f&&g(),c()):d===":"?(g(),r=1):y();break;case 4:y(),r=o;break;case 1:d==="("?r=2:VALID_PARAM_RE.test(d)?y():(g(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&u--);break;case 2:d===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+d:r=3:v+=d;break;case 3:g(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&u--,v="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${f}"`),g(),c(),s}function createRouteRecordMatcher(a,n,r){const o=tokensToParser(tokenizePath(a.path),r),s=assign(o,{record:a,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function createRouterMatcher(a,n){const r=[],o=new Map;n=mergeOptions({strict:!1,end:!0,sensitive:!1},n);function s(g){return o.get(g)}function l(g,y,_){const S=!_,x=normalizeRouteRecord(g);x.aliasOf=_&&_.record;const T=mergeOptions(n,g),w=[x];if("alias"in g){const D=typeof g.alias=="string"?[g.alias]:g.alias;for(const L of D)w.push(normalizeRouteRecord(assign({},x,{components:_?_.record.components:x.components,path:L,aliasOf:_?_.record:x})))}let E,P;for(const D of w){const{path:L}=D;if(y&&L[0]!=="/"){const $=y.record.path,O=$[$.length-1]==="/"?"":"/";D.path=y.record.path+(L&&O+L)}if(E=createRouteRecordMatcher(D,y,T),_?_.alias.push(E):(P=P||E,P!==E&&P.alias.push(E),S&&g.name&&!isAliasRecord(E)&&c(g.name)),isMatchable(E)&&d(E),x.children){const $=x.children;for(let O=0;O<$.length;O++)l($[O],E,_&&_.children[O])}_=_||E}return P?()=>{c(P)}:noop$1}function c(g){if(isRouteName(g)){const y=o.get(g);y&&(o.delete(g),r.splice(r.indexOf(y),1),y.children.forEach(c),y.alias.forEach(c))}else{const y=r.indexOf(g);y>-1&&(r.splice(y,1),g.record.name&&o.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function u(){return r}function d(g){const y=findInsertionIndex(g,r);r.splice(y,0,g),g.record.name&&!isAliasRecord(g)&&o.set(g.record.name,g)}function f(g,y){let _,S={},x,T;if("name"in g&&g.name){if(_=o.get(g.name),!_)throw createRouterError(1,{location:g});T=_.record.name,S=assign(paramsFromLocation(y.params,_.keys.filter(P=>!P.optional).concat(_.parent?_.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),g.params&&paramsFromLocation(g.params,_.keys.map(P=>P.name))),x=_.stringify(S)}else if(g.path!=null)x=g.path,_=r.find(P=>P.re.test(x)),_&&(S=_.parse(x),T=_.record.name);else{if(_=y.name?o.get(y.name):r.find(P=>P.re.test(y.path)),!_)throw createRouterError(1,{location:g,currentLocation:y});T=_.record.name,S=assign({},y.params,g.params),x=_.stringify(S)}const w=[];let E=_;for(;E;)w.unshift(E.record),E=E.parent;return{name:T,path:x,params:S,matched:w,meta:mergeMetaFields(w)}}a.forEach(g=>l(g));function v(){r.length=0,o.clear()}return{addRoute:l,resolve:f,removeRoute:c,clearRoutes:v,getRoutes:u,getRecordMatcher:s}}function paramsFromLocation(a,n){const r={};for(const o of n)o in a&&(r[o]=a[o]);return r}function normalizeRouteRecord(a){const n={path:a.path,redirect:a.redirect,name:a.name,meta:a.meta||{},aliasOf:a.aliasOf,beforeEnter:a.beforeEnter,props:normalizeRecordProps(a),children:a.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in a?a.components||null:a.component&&{default:a.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function normalizeRecordProps(a){const n={},r=a.props||!1;if("component"in a)n.default=r;else for(const o in a.components)n[o]=typeof r=="object"?r[o]:r;return n}function isAliasRecord(a){for(;a;){if(a.record.aliasOf)return!0;a=a.parent}return!1}function mergeMetaFields(a){return a.reduce((n,r)=>assign(n,r.meta),{})}function mergeOptions(a,n){const r={};for(const o in a)r[o]=o in n?n[o]:a[o];return r}function findInsertionIndex(a,n){let r=0,o=n.length;for(;r!==o;){const l=r+o>>1;comparePathParserScore(a,n[l])<0?o=l:r=l+1}const s=getInsertionAncestor(a);return s&&(o=n.lastIndexOf(s,o-1)),o}function getInsertionAncestor(a){let n=a;for(;n=n.parent;)if(isMatchable(n)&&comparePathParserScore(a,n)===0)return n}function isMatchable({record:a}){return!!(a.name||a.components&&Object.keys(a.components).length||a.redirect)}function parseQuery(a){const n={};if(a===""||a==="?")return n;const o=(a[0]==="?"?a.slice(1):a).split("&");for(let s=0;s<o.length;++s){const l=o[s].replace(PLUS_RE," "),c=l.indexOf("="),u=decode$1(c<0?l:l.slice(0,c)),d=c<0?null:decode$1(l.slice(c+1));if(u in n){let f=n[u];isArray$2(f)||(f=n[u]=[f]),f.push(d)}else n[u]=d}return n}function stringifyQuery(a){let n="";for(let r in a){const o=a[r];if(r=encodeQueryKey(r),o==null){o!==void 0&&(n+=(n.length?"&":"")+r);continue}(isArray$2(o)?o.map(l=>l&&encodeQueryValue(l)):[o&&encodeQueryValue(o)]).forEach(l=>{l!==void 0&&(n+=(n.length?"&":"")+r,l!=null&&(n+="="+l))})}return n}function normalizeQuery(a){const n={};for(const r in a){const o=a[r];o!==void 0&&(n[r]=isArray$2(o)?o.map(s=>s==null?null:""+s):o==null?o:""+o)}return n}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let a=[];function n(o){return a.push(o),()=>{const s=a.indexOf(o);s>-1&&a.splice(s,1)}}function r(){a=[]}return{add:n,list:()=>a.slice(),reset:r}}function guardToPromiseFn(a,n,r,o,s,l=c=>c()){const c=o&&(o.enterCallbacks[s]=o.enterCallbacks[s]||[]);return()=>new Promise((u,d)=>{const f=y=>{y===!1?d(createRouterError(4,{from:r,to:n})):y instanceof Error?d(y):isRouteLocation(y)?d(createRouterError(2,{from:n,to:y})):(c&&o.enterCallbacks[s]===c&&typeof y=="function"&&c.push(y),u())},v=l(()=>a.call(o&&o.instances[s],n,r,f));let g=Promise.resolve(v);a.length<3&&(g=g.then(f)),g.catch(y=>d(y))})}function extractComponentsGuards(a,n,r,o,s=l=>l()){const l=[];for(const c of a)for(const u in c.components){let d=c.components[u];if(!(n!=="beforeRouteEnter"&&!c.instances[u]))if(isRouteComponent(d)){const v=(d.__vccOpts||d)[n];v&&l.push(guardToPromiseFn(v,r,o,c,u,s))}else{let f=d();l.push(()=>f.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${u}" at "${c.path}"`);const g=isESModule(v)?v.default:v;c.mods[u]=v,c.components[u]=g;const _=(g.__vccOpts||g)[n];return _&&guardToPromiseFn(_,r,o,c,u,s)()}))}}return l}function useLink(a){const n=inject(routerKey),r=inject(routeLocationKey),o=computed(()=>{const d=unref(a.to);return n.resolve(d)}),s=computed(()=>{const{matched:d}=o.value,{length:f}=d,v=d[f-1],g=r.matched;if(!v||!g.length)return-1;const y=g.findIndex(isSameRouteRecord.bind(null,v));if(y>-1)return y;const _=getOriginalPath(d[f-2]);return f>1&&getOriginalPath(v)===_&&g[g.length-1].path!==_?g.findIndex(isSameRouteRecord.bind(null,d[f-2])):y}),l=computed(()=>s.value>-1&&includesParams(r.params,o.value.params)),c=computed(()=>s.value>-1&&s.value===r.matched.length-1&&isSameRouteLocationParams(r.params,o.value.params));function u(d={}){if(guardEvent(d)){const f=n[unref(a.replace)?"replace":"push"](unref(a.to)).catch(noop$1);return a.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:o,href:computed(()=>o.value.href),isActive:l,isExactActive:c,navigate:u}}function preferSingleVNode(a){return a.length===1?a[0]:a}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(a,{slots:n}){const r=reactive(useLink(a)),{options:o}=inject(routerKey),s=computed(()=>({[getLinkClass(a.activeClass,o.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(a.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const l=n.default&&preferSingleVNode(n.default(r));return a.custom?l:h("a",{"aria-current":r.isExactActive?a.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(a){if(!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)&&!a.defaultPrevented&&!(a.button!==void 0&&a.button!==0)){if(a.currentTarget&&a.currentTarget.getAttribute){const n=a.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return a.preventDefault&&a.preventDefault(),!0}}function includesParams(a,n){for(const r in n){const o=n[r],s=a[r];if(typeof o=="string"){if(o!==s)return!1}else if(!isArray$2(s)||s.length!==o.length||o.some((l,c)=>l!==s[c]))return!1}return!0}function getOriginalPath(a){return a?a.aliasOf?a.aliasOf.path:a.path:""}const getLinkClass=(a,n,r)=>a??n??r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(a,{attrs:n,slots:r}){const o=inject(routerViewLocationKey),s=computed(()=>a.route||o.value),l=inject(viewDepthKey,0),c=computed(()=>{let f=unref(l);const{matched:v}=s.value;let g;for(;(g=v[f])&&!g.components;)f++;return f}),u=computed(()=>s.value.matched[c.value]);provide(viewDepthKey,computed(()=>c.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,s);const d=ref();return watch(()=>[d.value,u.value,a.name],([f,v,g],[y,_,S])=>{v&&(v.instances[g]=f,_&&_!==v&&f&&f===y&&(v.leaveGuards.size||(v.leaveGuards=_.leaveGuards),v.updateGuards.size||(v.updateGuards=_.updateGuards))),f&&v&&(!_||!isSameRouteRecord(v,_)||!y)&&(v.enterCallbacks[g]||[]).forEach(x=>x(f))},{flush:"post"}),()=>{const f=s.value,v=a.name,g=u.value,y=g&&g.components[v];if(!y)return normalizeSlot(r.default,{Component:y,route:f});const _=g.props[v],S=_?_===!0?f.params:typeof _=="function"?_(f):_:null,T=h(y,assign({},S,n,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(g.instances[v]=null)},ref:d}));return normalizeSlot(r.default,{Component:T,route:f})||T}}});function normalizeSlot(a,n){if(!a)return null;const r=a(n);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(a){const n=createRouterMatcher(a.routes,a),r=a.parseQuery||parseQuery,o=a.stringifyQuery||stringifyQuery,s=a.history,l=useCallbacks(),c=useCallbacks(),u=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let f=START_LOCATION_NORMALIZED;isBrowser&&a.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=applyToParams.bind(null,oe=>""+oe),g=applyToParams.bind(null,encodeParam),y=applyToParams.bind(null,decode$1);function _(oe,me){let _e,Te;return isRouteName(oe)?(_e=n.getRecordMatcher(oe),Te=me):Te=oe,n.addRoute(Te,_e)}function S(oe){const me=n.getRecordMatcher(oe);me&&n.removeRoute(me)}function x(){return n.getRoutes().map(oe=>oe.record)}function T(oe){return!!n.getRecordMatcher(oe)}function w(oe,me){if(me=assign({},me||d.value),typeof oe=="string"){const J=parseURL(r,oe,me.path),xe=n.resolve({path:J.path},me),De=s.createHref(J.fullPath);return assign(J,xe,{params:y(xe.params),hash:decode$1(J.hash),redirectedFrom:void 0,href:De})}let _e;if(oe.path!=null)_e=assign({},oe,{path:parseURL(r,oe.path,me.path).path});else{const J=assign({},oe.params);for(const xe in J)J[xe]==null&&delete J[xe];_e=assign({},oe,{params:g(J)}),me.params=g(me.params)}const Te=n.resolve(_e,me),Le=oe.hash||"";Te.params=v(y(Te.params));const Ge=stringifyURL(o,assign({},oe,{hash:encodeHash(Le),path:Te.path})),se=s.createHref(Ge);return assign({fullPath:Ge,hash:Le,query:o===stringifyQuery?normalizeQuery(oe.query):oe.query||{}},Te,{redirectedFrom:void 0,href:se})}function E(oe){return typeof oe=="string"?parseURL(r,oe,d.value.path):assign({},oe)}function P(oe,me){if(f!==oe)return createRouterError(8,{from:me,to:oe})}function D(oe){return O(oe)}function L(oe){return D(assign(E(oe),{replace:!0}))}function $(oe){const me=oe.matched[oe.matched.length-1];if(me&&me.redirect){const{redirect:_e}=me;let Te=typeof _e=="function"?_e(oe):_e;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=E(Te):{path:Te},Te.params={}),assign({query:oe.query,hash:oe.hash,params:Te.path!=null?{}:oe.params},Te)}}function O(oe,me){const _e=f=w(oe),Te=d.value,Le=oe.state,Ge=oe.force,se=oe.replace===!0,J=$(_e);if(J)return O(assign(E(J),{state:typeof J=="object"?assign({},Le,J.state):Le,force:Ge,replace:se}),me||_e);const xe=_e;xe.redirectedFrom=me;let De;return!Ge&&isSameRouteLocation(o,Te,_e)&&(De=createRouterError(16,{to:xe,from:Te}),ce(Te,Te,!0,!1)),(De?Promise.resolve(De):F(xe,Te)).catch(Ae=>isNavigationFailure(Ae)?isNavigationFailure(Ae,2)?Ae:pe(Ae):ee(Ae,xe,Te)).then(Ae=>{if(Ae){if(isNavigationFailure(Ae,2))return O(assign({replace:se},E(Ae.to),{state:typeof Ae.to=="object"?assign({},Le,Ae.to.state):Le,force:Ge}),me||xe)}else Ae=G(xe,Te,!0,se,Le);return U(xe,Te,Ae),Ae})}function B(oe,me){const _e=P(oe,me);return _e?Promise.reject(_e):Promise.resolve()}function V(oe){const me=ge.values().next().value;return me&&typeof me.runWithContext=="function"?me.runWithContext(oe):oe()}function F(oe,me){let _e;const[Te,Le,Ge]=extractChangingRecords(oe,me);_e=extractComponentsGuards(Te.reverse(),"beforeRouteLeave",oe,me);for(const J of Te)J.leaveGuards.forEach(xe=>{_e.push(guardToPromiseFn(xe,oe,me))});const se=B.bind(null,oe,me);return _e.push(se),$e(_e).then(()=>{_e=[];for(const J of l.list())_e.push(guardToPromiseFn(J,oe,me));return _e.push(se),$e(_e)}).then(()=>{_e=extractComponentsGuards(Le,"beforeRouteUpdate",oe,me);for(const J of Le)J.updateGuards.forEach(xe=>{_e.push(guardToPromiseFn(xe,oe,me))});return _e.push(se),$e(_e)}).then(()=>{_e=[];for(const J of Ge)if(J.beforeEnter)if(isArray$2(J.beforeEnter))for(const xe of J.beforeEnter)_e.push(guardToPromiseFn(xe,oe,me));else _e.push(guardToPromiseFn(J.beforeEnter,oe,me));return _e.push(se),$e(_e)}).then(()=>(oe.matched.forEach(J=>J.enterCallbacks={}),_e=extractComponentsGuards(Ge,"beforeRouteEnter",oe,me,V),_e.push(se),$e(_e))).then(()=>{_e=[];for(const J of c.list())_e.push(guardToPromiseFn(J,oe,me));return _e.push(se),$e(_e)}).catch(J=>isNavigationFailure(J,8)?J:Promise.reject(J))}function U(oe,me,_e){u.list().forEach(Te=>V(()=>Te(oe,me,_e)))}function G(oe,me,_e,Te,Le){const Ge=P(oe,me);if(Ge)return Ge;const se=me===START_LOCATION_NORMALIZED,J=isBrowser?history.state:{};_e&&(Te||se?s.replace(oe.fullPath,assign({scroll:se&&J&&J.scroll},Le)):s.push(oe.fullPath,Le)),d.value=oe,ce(oe,me,_e,se),pe()}let W;function j(){W||(W=s.listen((oe,me,_e)=>{if(!Se.listening)return;const Te=w(oe),Le=$(Te);if(Le){O(assign(Le,{replace:!0,force:!0}),Te).catch(noop$1);return}f=Te;const Ge=d.value;isBrowser&&saveScrollPosition(getScrollKey(Ge.fullPath,_e.delta),computeScrollPosition()),F(Te,Ge).catch(se=>isNavigationFailure(se,12)?se:isNavigationFailure(se,2)?(O(assign(E(se.to),{force:!0}),Te).then(J=>{isNavigationFailure(J,20)&&!_e.delta&&_e.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$1),Promise.reject()):(_e.delta&&s.go(-_e.delta,!1),ee(se,Te,Ge))).then(se=>{se=se||G(Te,Ge,!1),se&&(_e.delta&&!isNavigationFailure(se,8)?s.go(-_e.delta,!1):_e.type===NavigationType.pop&&isNavigationFailure(se,20)&&s.go(-1,!1)),U(Te,Ge,se)}).catch(noop$1)}))}let K=useCallbacks(),q=useCallbacks(),ie;function ee(oe,me,_e){pe(oe);const Te=q.list();return Te.length?Te.forEach(Le=>Le(oe,me,_e)):console.error(oe),Promise.reject(oe)}function he(){return ie&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((oe,me)=>{K.add([oe,me])})}function pe(oe){return ie||(ie=!oe,j(),K.list().forEach(([me,_e])=>oe?_e(oe):me()),K.reset()),oe}function ce(oe,me,_e,Te){const{scrollBehavior:Le}=a;if(!isBrowser||!Le)return Promise.resolve();const Ge=!_e&&getSavedScrollPosition(getScrollKey(oe.fullPath,0))||(Te||!_e)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Le(oe,me,Ge)).then(se=>se&&scrollToPosition(se)).catch(se=>ee(se,oe,me))}const ye=oe=>s.go(oe);let we;const ge=new Set,Se={currentRoute:d,listening:!0,addRoute:_,removeRoute:S,clearRoutes:n.clearRoutes,hasRoute:T,getRoutes:x,resolve:w,options:a,push:D,replace:L,go:ye,back:()=>ye(-1),forward:()=>ye(1),beforeEach:l.add,beforeResolve:c.add,afterEach:u.add,onError:q.add,isReady:he,install(oe){const me=this;oe.component("RouterLink",RouterLink),oe.component("RouterView",RouterView),oe.config.globalProperties.$router=me,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!we&&d.value===START_LOCATION_NORMALIZED&&(we=!0,D(s.location).catch(Le=>{}));const _e={};for(const Le in START_LOCATION_NORMALIZED)Object.defineProperty(_e,Le,{get:()=>d.value[Le],enumerable:!0});oe.provide(routerKey,me),oe.provide(routeLocationKey,shallowReactive(_e)),oe.provide(routerViewLocationKey,d);const Te=oe.unmount;ge.add(oe),oe.unmount=function(){ge.delete(oe),ge.size<1&&(f=START_LOCATION_NORMALIZED,W&&W(),W=null,d.value=START_LOCATION_NORMALIZED,we=!1,ie=!1),Te()}}};function $e(oe){return oe.reduce((me,_e)=>me.then(()=>V(_e)),Promise.resolve())}return Se}function extractChangingRecords(a,n){const r=[],o=[],s=[],l=Math.max(n.matched.length,a.matched.length);for(let c=0;c<l;c++){const u=n.matched[c];u&&(a.matched.find(f=>isSameRouteRecord(f,u))?o.push(u):r.push(u));const d=a.matched[c];d&&(n.matched.find(f=>isSameRouteRecord(f,d))||s.push(d))}return[r,o,s]}function useRouter(){return inject(routerKey)}function useRoute(a){return inject(routeLocationKey)}const _hoisted_1$i={id:"app"},_sfc_main$i=defineComponent({__name:"MainPage",setup(a){const n=useRouter(),r=()=>{n.push("/class")},o=()=>{n.push("/base")},s=()=>{n.push("/progress")},l=()=>{n.push("/dpSystem")},c=()=>{n.push("/stc")},u=()=>{n.push("/progress2")},d=()=>{n.push("/material")},f=()=>{n.push("/pcs")},v=()=>{n.push("/ce")},g=()=>{n.push("/efw")};return(y,_)=>{const S=resolveComponent("van-divider"),x=resolveComponent("van-grid-item"),T=resolveComponent("van-grid"),w=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1$i,[createVNode$1(S,{class:"styled-divider"},{default:withCtx(()=>_[0]||(_[0]=[createTextVNode("基本信息")])),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createVNode$1(x,{icon:"manager",text:"班次信息",onClick:r}),createVNode$1(x,{icon:"todo-list",text:"项目基本信息",onClick:o})]),_:1}),createVNode$1(S,{class:"styled-divider"},{default:withCtx(()=>_[1]||(_[1]=[createTextVNode("进度管理")])),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createVNode$1(x,{icon:"records",text:"进度汇总",onClick:s}),createVNode$1(x,{icon:"clock",text:"当前进度",onClick:u})]),_:1}),createVNode$1(S,{class:"styled-divider"},{default:withCtx(()=>_[2]||(_[2]=[createTextVNode("单项目分析")])),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createVNode$1(x,{icon:"discount",text:"材料消耗",onClick:d}),createVNode$1(x,{icon:"wechat-moments",text:"盾尾间隙",onClick:c}),createVNode$1(x,{icon:"browsing-history",text:"管片姿态",onClick:f}),createVNode$1(x,{icon:"youzan-shield",text:"施工工效",onClick:v})]),_:1}),createVNode$1(S,{class:"styled-divider"},{default:withCtx(()=>_[3]||(_[3]=[createTextVNode("设备故障记录")])),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createVNode$1(x,{icon:"bell",text:"设备故障预警",onClick:g}),createVNode$1(x,{icon:"live",text:"刀盘系统监测",onClick:l})]),_:1}),createVNode$1(w)])}}}),MainPage=_export_sfc(_sfc_main$i,[["__scopeId","data-v-736ccb63"]]);class HttpError extends Error{constructor(n,r){const o=new.target.prototype;super(`${n}: Status code '${r}'`),this.statusCode=r,this.__proto__=o}}class TimeoutError extends Error{constructor(n="A timeout occurred."){const r=new.target.prototype;super(n),this.__proto__=r}}class AbortError extends Error{constructor(n="An abort occurred."){const r=new.target.prototype;super(n),this.__proto__=r}}class UnsupportedTransportError extends Error{constructor(n,r){const o=new.target.prototype;super(n),this.transport=r,this.errorType="UnsupportedTransportError",this.__proto__=o}}class DisabledTransportError extends Error{constructor(n,r){const o=new.target.prototype;super(n),this.transport=r,this.errorType="DisabledTransportError",this.__proto__=o}}class FailedToStartTransportError extends Error{constructor(n,r){const o=new.target.prototype;super(n),this.transport=r,this.errorType="FailedToStartTransportError",this.__proto__=o}}class FailedToNegotiateWithServerError extends Error{constructor(n){const r=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=r}}class AggregateErrors extends Error{constructor(n,r){const o=new.target.prototype;super(n),this.innerErrors=r,this.__proto__=o}}class HttpResponse{constructor(n,r,o){this.statusCode=n,this.statusText=r,this.content=o}}class HttpClient{get(n,r){return this.send({...r,method:"GET",url:n})}post(n,r){return this.send({...r,method:"POST",url:n})}delete(n,r){return this.send({...r,method:"DELETE",url:n})}getCookieString(n){return""}}var LogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Information=2]="Information",a[a.Warning=3]="Warning",a[a.Error=4]="Error",a[a.Critical=5]="Critical",a[a.None=6]="None"})(LogLevel||(LogLevel={}));class NullLogger{constructor(){}log(n,r){}}NullLogger.instance=new NullLogger;const VERSION="8.0.7";class Arg{static isRequired(n,r){if(n==null)throw new Error(`The '${r}' argument is required.`)}static isNotEmpty(n,r){if(!n||n.match(/^\s*$/))throw new Error(`The '${r}' argument should not be empty.`)}static isIn(n,r,o){if(!(n in r))throw new Error(`Unknown ${o} value: ${n}.`)}}class Platform{static get isBrowser(){return!Platform.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Platform.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Platform.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function getDataDetail(a,n){let r="";return isArrayBuffer(a)?(r=`Binary data of length ${a.byteLength}`,n&&(r+=`. Content: '${formatArrayBuffer(a)}'`)):typeof a=="string"&&(r=`String data of length ${a.length}`,n&&(r+=`. Content: '${a}'`)),r}function formatArrayBuffer(a){const n=new Uint8Array(a);let r="";return n.forEach(o=>{const s=o<16?"0":"";r+=`0x${s}${o.toString(16)} `}),r.substr(0,r.length-1)}function isArrayBuffer(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}async function sendMessage(a,n,r,o,s,l){const c={},[u,d]=getUserAgentHeader();c[u]=d,a.log(LogLevel.Trace,`(${n} transport) sending data. ${getDataDetail(s,l.logMessageContent)}.`);const f=isArrayBuffer(s)?"arraybuffer":"text",v=await r.post(o,{content:s,headers:{...c,...l.headers},responseType:f,timeout:l.timeout,withCredentials:l.withCredentials});a.log(LogLevel.Trace,`(${n} transport) request complete. Response status: ${v.statusCode}.`)}function createLogger(a){return a===void 0?new ConsoleLogger(LogLevel.Information):a===null?NullLogger.instance:a.log!==void 0?a:new ConsoleLogger(a)}class SubjectSubscription{constructor(n,r){this._subject=n,this._observer=r}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(r=>{})}}class ConsoleLogger{constructor(n){this._minLevel=n,this.out=console}log(n,r){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${LogLevel[n]}: ${r}`;switch(n){case LogLevel.Critical:case LogLevel.Error:this.out.error(o);break;case LogLevel.Warning:this.out.warn(o);break;case LogLevel.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function getUserAgentHeader(){let a="X-SignalR-User-Agent";return Platform.isNode&&(a="User-Agent"),[a,constructUserAgent(VERSION,getOsName(),getRuntime(),getRuntimeVersion())]}function constructUserAgent(a,n,r,o){let s="Microsoft SignalR/";const l=a.split(".");return s+=`${l[0]}.${l[1]}`,s+=` (${a}; `,n&&n!==""?s+=`${n}; `:s+="Unknown OS; ",s+=`${r}`,o?s+=`; ${o}`:s+="; Unknown Runtime Version",s+=")",s}function getOsName(){if(Platform.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function getRuntimeVersion(){if(Platform.isNode)return process.versions.node}function getRuntime(){return Platform.isNode?"NodeJS":"Browser"}function getErrorString(a){return a.stack?a.stack:a.message?a.message:`${a}`}function getGlobalThis(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class FetchHttpClient extends HttpClient{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||Platform.isNode){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(r("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=r("node-fetch"):this._fetchType=fetch,this._fetchType=r("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(getGlobalThis());if(typeof AbortController>"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=r("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new AbortError;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const r=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{r.abort(),o=new AbortError});let s=null;if(n.timeout){const d=n.timeout;s=setTimeout(()=>{r.abort(),this._logger.log(LogLevel.Warning,"Timeout from HTTP request."),o=new TimeoutError},d)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},isArrayBuffer(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let l;try{l=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:r.signal})}catch(d){throw o||(this._logger.log(LogLevel.Warning,`Error from HTTP request. ${d}.`),d)}finally{s&&clearTimeout(s),n.abortSignal&&(n.abortSignal.onabort=null)}if(!l.ok){const d=await deserializeContent(l,"text");throw new HttpError(d||l.statusText,l.status)}const u=await deserializeContent(l,n.responseType);return new HttpResponse(l.status,l.statusText,u)}getCookieString(n){let r="";return Platform.isNode&&this._jar&&this._jar.getCookies(n,(o,s)=>r=s.join("; ")),r}}function deserializeContent(a,n){let r;switch(n){case"arraybuffer":r=a.arrayBuffer();break;case"text":r=a.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:r=a.text();break}return r}class XhrHttpClient extends HttpClient{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new AbortError):n.method?n.url?new Promise((r,o)=>{const s=new XMLHttpRequest;s.open(n.method,n.url,!0),s.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,s.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(isArrayBuffer(n.content)?s.setRequestHeader("Content-Type","application/octet-stream"):s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const l=n.headers;l&&Object.keys(l).forEach(c=>{s.setRequestHeader(c,l[c])}),n.responseType&&(s.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{s.abort(),o(new AbortError)}),n.timeout&&(s.timeout=n.timeout),s.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),s.status>=200&&s.status<300?r(new HttpResponse(s.status,s.statusText,s.response||s.responseText)):o(new HttpError(s.response||s.responseText||s.statusText,s.status))},s.onerror=()=>{this._logger.log(LogLevel.Warning,`Error from HTTP request. ${s.status}: ${s.statusText}.`),o(new HttpError(s.statusText,s.status))},s.ontimeout=()=>{this._logger.log(LogLevel.Warning,"Timeout from HTTP request."),o(new TimeoutError)},s.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class DefaultHttpClient extends HttpClient{constructor(n){if(super(),typeof fetch<"u"||Platform.isNode)this._httpClient=new FetchHttpClient(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new XhrHttpClient(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new AbortError):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class TextMessageFormat{static write(n){return`${n}${TextMessageFormat.RecordSeparator}`}static parse(n){if(n[n.length-1]!==TextMessageFormat.RecordSeparator)throw new Error("Message is incomplete.");const r=n.split(TextMessageFormat.RecordSeparator);return r.pop(),r}}TextMessageFormat.RecordSeparatorCode=30;TextMessageFormat.RecordSeparator=String.fromCharCode(TextMessageFormat.RecordSeparatorCode);class HandshakeProtocol{writeHandshakeRequest(n){return TextMessageFormat.write(JSON.stringify(n))}parseHandshakeResponse(n){let r,o;if(isArrayBuffer(n)){const u=new Uint8Array(n),d=u.indexOf(TextMessageFormat.RecordSeparatorCode);if(d===-1)throw new Error("Message is incomplete.");const f=d+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(u.slice(0,f))),o=u.byteLength>f?u.slice(f).buffer:null}else{const u=n,d=u.indexOf(TextMessageFormat.RecordSeparator);if(d===-1)throw new Error("Message is incomplete.");const f=d+1;r=u.substring(0,f),o=u.length>f?u.substring(f):null}const s=TextMessageFormat.parse(r),l=JSON.parse(s[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[o,l]}}var MessageType;(function(a){a[a.Invocation=1]="Invocation",a[a.StreamItem=2]="StreamItem",a[a.Completion=3]="Completion",a[a.StreamInvocation=4]="StreamInvocation",a[a.CancelInvocation=5]="CancelInvocation",a[a.Ping=6]="Ping",a[a.Close=7]="Close",a[a.Ack=8]="Ack",a[a.Sequence=9]="Sequence"})(MessageType||(MessageType={}));class Subject{constructor(){this.observers=[]}next(n){for(const r of this.observers)r.next(n)}error(n){for(const r of this.observers)r.error&&r.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new SubjectSubscription(this,n)}}class MessageBuffer{constructor(n,r,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=r,this._bufferSize=o}async _send(n){const r=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let s=()=>{},l=()=>{};isArrayBuffer(r)?this._bufferedByteCount+=r.byteLength:this._bufferedByteCount+=r.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((c,u)=>{s=c,l=u})),this._messages.push(new BufferedItem(r,this._totalMessageCount,s,l))}try{this._reconnectInProgress||await this._connection.send(r)}catch{this._disconnected()}await o}_ack(n){let r=-1;for(let o=0;o<this._messages.length;o++){const s=this._messages[o];if(s._id<=n.sequenceId)r=o,isArrayBuffer(s._message)?this._bufferedByteCount-=s._message.byteLength:this._bufferedByteCount-=s._message.length,s._resolver();else if(this._bufferedByteCount<this._bufferSize)s._resolver();else break}r!==-1&&(this._messages=this._messages.slice(r+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==MessageType.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const r=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,r<=this._latestReceivedSequenceId?(r===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=r,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:MessageType.Sequence,sequenceId:n}));const r=this._messages;for(const o of r)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const r of this._messages)r._rejector(n)}_isInvocationMessage(n){switch(n.type){case MessageType.Invocation:case MessageType.StreamItem:case MessageType.Completion:case MessageType.StreamInvocation:case MessageType.CancelInvocation:return!0;case MessageType.Close:case MessageType.Sequence:case MessageType.Ping:case MessageType.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:MessageType.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class BufferedItem{constructor(n,r,o,s){this._message=n,this._id=r,this._resolver=o,this._rejector=s}}const DEFAULT_TIMEOUT_IN_MS=30*1e3,DEFAULT_PING_INTERVAL_IN_MS=15*1e3,DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE=1e5;var HubConnectionState;(function(a){a.Disconnected="Disconnected",a.Connecting="Connecting",a.Connected="Connected",a.Disconnecting="Disconnecting",a.Reconnecting="Reconnecting"})(HubConnectionState||(HubConnectionState={}));class HubConnection{static create(n,r,o,s,l,c,u){return new HubConnection(n,r,o,s,l,c,u)}constructor(n,r,o,s,l,c,u){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(LogLevel.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Arg.isRequired(n,"connection"),Arg.isRequired(r,"logger"),Arg.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=l??DEFAULT_TIMEOUT_IN_MS,this.keepAliveIntervalInMilliseconds=c??DEFAULT_PING_INTERVAL_IN_MS,this._statefulReconnectBufferSize=u??DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE,this._logger=r,this._protocol=o,this.connection=n,this._reconnectPolicy=s,this._handshakeProtocol=new HandshakeProtocol,this.connection.onreceive=d=>this._processIncomingData(d),this.connection.onclose=d=>this._connectionClosed(d),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=HubConnectionState.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:MessageType.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==HubConnectionState.Disconnected&&this._connectionState!==HubConnectionState.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==HubConnectionState.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=HubConnectionState.Connecting,this._logger.log(LogLevel.Debug,"Starting HubConnection.");try{await this._startInternal(),Platform.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=HubConnectionState.Connected,this._connectionStarted=!0,this._logger.log(LogLevel.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=HubConnectionState.Disconnected,this._logger.log(LogLevel.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((r,o)=>{this._handshakeResolver=r,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let r=this._protocol.version;this.connection.features.reconnect||(r=1);const o={protocol:this._protocol.name,version:r};if(this._logger.log(LogLevel.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(LogLevel.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new MessageBuffer(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(r){throw this._logger.log(LogLevel.Debug,`Hub handshake failed with error '${r}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(r),r}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===HubConnectionState.Disconnected)return this._logger.log(LogLevel.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===HubConnectionState.Disconnecting)return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const r=this._connectionState;return this._connectionState=HubConnectionState.Disconnecting,this._logger.log(LogLevel.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(LogLevel.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(r===HubConnectionState.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new AbortError("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...r){const[o,s]=this._replaceStreamingParams(r),l=this._createStreamInvocation(n,r,s);let c;const u=new Subject;return u.cancelCallback=()=>{const d=this._createCancelInvocation(l.invocationId);return delete this._callbacks[l.invocationId],c.then(()=>this._sendWithProtocol(d))},this._callbacks[l.invocationId]=(d,f)=>{if(f){u.error(f);return}else d&&(d.type===MessageType.Completion?d.error?u.error(new Error(d.error)):u.complete():u.next(d.item))},c=this._sendWithProtocol(l).catch(d=>{u.error(d),delete this._callbacks[l.invocationId]}),this._launchStreams(o,c),u}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...r){const[o,s]=this._replaceStreamingParams(r),l=this._sendWithProtocol(this._createInvocation(n,r,!0,s));return this._launchStreams(o,l),l}invoke(n,...r){const[o,s]=this._replaceStreamingParams(r),l=this._createInvocation(n,r,!1,s);return new Promise((u,d)=>{this._callbacks[l.invocationId]=(v,g)=>{if(g){d(g);return}else v&&(v.type===MessageType.Completion?v.error?d(new Error(v.error)):u(v.result):d(new Error(`Unexpected message type: ${v.type}`)))};const f=this._sendWithProtocol(l).catch(v=>{d(v),delete this._callbacks[l.invocationId]});this._launchStreams(o,f)})}on(n,r){!n||!r||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(r)===-1&&this._methods[n].push(r))}off(n,r){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(r){const s=o.indexOf(r);s!==-1&&(o.splice(s,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const r=this._protocol.parseMessages(n,this._logger);for(const o of r)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case MessageType.Invocation:this._invokeClientMethod(o).catch(s=>{this._logger.log(LogLevel.Error,`Invoke client method threw error: ${getErrorString(s)}`)});break;case MessageType.StreamItem:case MessageType.Completion:{const s=this._callbacks[o.invocationId];if(s){o.type===MessageType.Completion&&delete this._callbacks[o.invocationId];try{s(o)}catch(l){this._logger.log(LogLevel.Error,`Stream callback threw error: ${getErrorString(l)}`)}}break}case MessageType.Ping:break;case MessageType.Close:{this._logger.log(LogLevel.Information,"Close message received from server.");const s=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(s):this._stopPromise=this._stopInternal(s);break}case MessageType.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case MessageType.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(LogLevel.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let r,o;try{[o,r]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(s){const l="Error parsing handshake response: "+s;this._logger.log(LogLevel.Error,l);const c=new Error(l);throw this._handshakeRejecter(c),c}if(r.error){const s="Server returned handshake error: "+r.error;this._logger.log(LogLevel.Error,s);const l=new Error(s);throw this._handshakeRejecter(l),l}else this._logger.log(LogLevel.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let n=this._nextKeepAlive-new Date().getTime();n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===HubConnectionState.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},n)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const r=n.target.toLowerCase(),o=this._methods[r];if(!o){this._logger.log(LogLevel.Warning,`No client method with the name '${r}' found.`),n.invocationId&&(this._logger.log(LogLevel.Warning,`No result given for '${r}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const s=o.slice(),l=!!n.invocationId;let c,u,d;for(const f of s)try{const v=c;c=await f.apply(this,n.arguments),l&&c&&v&&(this._logger.log(LogLevel.Error,`Multiple results provided for '${r}'. Sending error to server.`),d=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),u=void 0}catch(v){u=v,this._logger.log(LogLevel.Error,`A callback for the method '${r}' threw error '${v}'.`)}d?await this._sendWithProtocol(d):l?(u?d=this._createCompletionMessage(n.invocationId,`${u}`,null):c!==void 0?d=this._createCompletionMessage(n.invocationId,null,c):(this._logger.log(LogLevel.Warning,`No result given for '${r}' method and invocation ID '${n.invocationId}'.`),d=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(d)):c&&this._logger.log(LogLevel.Error,`Result given for '${r}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(LogLevel.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new AbortError("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===HubConnectionState.Disconnecting?this._completeClose(n):this._connectionState===HubConnectionState.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===HubConnectionState.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=HubConnectionState.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),Platform.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(r=>r.apply(this,[n]))}catch(r){this._logger.log(LogLevel.Error,`An onclose callback called with error '${n}' threw error '${r}'.`)}}}async _reconnect(n){const r=Date.now();let o=0,s=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),l=this._getNextRetryDelay(o++,0,s);if(l===null){this._logger.log(LogLevel.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=HubConnectionState.Reconnecting,n?this._logger.log(LogLevel.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(LogLevel.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(c=>c.apply(this,[n]))}catch(c){this._logger.log(LogLevel.Error,`An onreconnecting callback called with error '${n}' threw error '${c}'.`)}if(this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;l!==null;){if(this._logger.log(LogLevel.Information,`Reconnect attempt number ${o} will start in ${l} ms.`),await new Promise(c=>{this._reconnectDelayHandle=setTimeout(c,l)}),this._reconnectDelayHandle=void 0,this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=HubConnectionState.Connected,this._logger.log(LogLevel.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(c=>c.apply(this,[this.connection.connectionId]))}catch(c){this._logger.log(LogLevel.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${c}'.`)}return}catch(c){if(this._logger.log(LogLevel.Information,`Reconnect attempt failed because of error '${c}'.`),this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===HubConnectionState.Disconnecting&&this._completeClose();return}s=c instanceof Error?c:new Error(c.toString()),l=this._getNextRetryDelay(o++,Date.now()-r,s)}}this._logger.log(LogLevel.Information,`Reconnect retries have been exhausted after ${Date.now()-r} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,r,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:r,previousRetryCount:n,retryReason:o})}catch(s){return this._logger.log(LogLevel.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${r}) threw error '${s}'.`),null}}_cancelCallbacksWithError(n){const r=this._callbacks;this._callbacks={},Object.keys(r).forEach(o=>{const s=r[o];try{s(null,n)}catch(l){this._logger.log(LogLevel.Error,`Stream 'error' callback called with '${n}' threw error: ${getErrorString(l)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,r,o,s){if(o)return s.length!==0?{arguments:r,streamIds:s,target:n,type:MessageType.Invocation}:{arguments:r,target:n,type:MessageType.Invocation};{const l=this._invocationId;return this._invocationId++,s.length!==0?{arguments:r,invocationId:l.toString(),streamIds:s,target:n,type:MessageType.Invocation}:{arguments:r,invocationId:l.toString(),target:n,type:MessageType.Invocation}}}_launchStreams(n,r){if(n.length!==0){r||(r=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:s=>{let l;s instanceof Error?l=s.message:s&&s.toString?l=s.toString():l="Unknown error",r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,l)))},next:s=>{r=r.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,s)))}})}}_replaceStreamingParams(n){const r=[],o=[];for(let s=0;s<n.length;s++){const l=n[s];if(this._isObservable(l)){const c=this._invocationId;this._invocationId++,r[c]=l,o.push(c.toString()),n.splice(s,1)}}return[r,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,r,o){const s=this._invocationId;return this._invocationId++,o.length!==0?{arguments:r,invocationId:s.toString(),streamIds:o,target:n,type:MessageType.StreamInvocation}:{arguments:r,invocationId:s.toString(),target:n,type:MessageType.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:MessageType.CancelInvocation}}_createStreamItemMessage(n,r){return{invocationId:n,item:r,type:MessageType.StreamItem}}_createCompletionMessage(n,r,o){return r?{error:r,invocationId:n,type:MessageType.Completion}:{invocationId:n,result:o,type:MessageType.Completion}}_createCloseMessage(){return{type:MessageType.Close}}}const DEFAULT_RETRY_DELAYS_IN_MILLISECONDS=[0,2e3,1e4,3e4,null];class DefaultReconnectPolicy{constructor(n){this._retryDelays=n!==void 0?[...n,null]:DEFAULT_RETRY_DELAYS_IN_MILLISECONDS}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class HeaderNames{}HeaderNames.Authorization="Authorization";HeaderNames.Cookie="Cookie";class AccessTokenHttpClient extends HttpClient{constructor(n,r){super(),this._innerClient=n,this._accessTokenFactory=r}async send(n){let r=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(r=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return r&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[HeaderNames.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[HeaderNames.Authorization]&&delete n.headers[HeaderNames.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var HttpTransportType;(function(a){a[a.None=0]="None",a[a.WebSockets=1]="WebSockets",a[a.ServerSentEvents=2]="ServerSentEvents",a[a.LongPolling=4]="LongPolling"})(HttpTransportType||(HttpTransportType={}));var TransferFormat;(function(a){a[a.Text=1]="Text",a[a.Binary=2]="Binary"})(TransferFormat||(TransferFormat={}));let AbortController$1=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class LongPollingTransport{get pollAborted(){return this._pollAbort.aborted}constructor(n,r,o){this._httpClient=n,this._logger=r,this._pollAbort=new AbortController$1,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,r){if(Arg.isRequired(n,"url"),Arg.isRequired(r,"transferFormat"),Arg.isIn(r,TransferFormat,"transferFormat"),this._url=n,this._logger.log(LogLevel.Trace,"(LongPolling transport) Connecting."),r===TransferFormat.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,s]=getUserAgentHeader(),l={[o]:s,...this._options.headers},c={abortSignal:this._pollAbort.signal,headers:l,timeout:1e5,withCredentials:this._options.withCredentials};r===TransferFormat.Binary&&(c.responseType="arraybuffer");const u=`${n}&_=${Date.now()}`;this._logger.log(LogLevel.Trace,`(LongPolling transport) polling: ${u}.`);const d=await this._httpClient.get(u,c);d.statusCode!==200?(this._logger.log(LogLevel.Error,`(LongPolling transport) Unexpected response code: ${d.statusCode}.`),this._closeError=new HttpError(d.statusText||"",d.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,c)}async _poll(n,r){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(LogLevel.Trace,`(LongPolling transport) polling: ${o}.`);const s=await this._httpClient.get(o,r);s.statusCode===204?(this._logger.log(LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):s.statusCode!==200?(this._logger.log(LogLevel.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new HttpError(s.statusText||"",s.statusCode),this._running=!1):s.content?(this._logger.log(LogLevel.Trace,`(LongPolling transport) data received. ${getDataDetail(s.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(s.content)):this._logger.log(LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof TimeoutError?this._logger.log(LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(LogLevel.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?sendMessage(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(LogLevel.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(LogLevel.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[r,o]=getUserAgentHeader();n[r]=o;const s={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let l;try{await this._httpClient.delete(this._url,s)}catch(c){l=c}l?l instanceof HttpError&&(l.statusCode===404?this._logger.log(LogLevel.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(LogLevel.Trace,`(LongPolling transport) Error sending a DELETE request: ${l}`)):this._logger.log(LogLevel.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(LogLevel.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(LogLevel.Trace,n),this.onclose(this._closeError)}}}class ServerSentEventsTransport{constructor(n,r,o,s){this._httpClient=n,this._accessToken=r,this._logger=o,this._options=s,this.onreceive=null,this.onclose=null}async connect(n,r){return Arg.isRequired(n,"url"),Arg.isRequired(r,"transferFormat"),Arg.isIn(r,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,s)=>{let l=!1;if(r!==TransferFormat.Text){s(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let c;if(Platform.isBrowser||Platform.isWebWorker)c=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const u=this._httpClient.getCookieString(n),d={};d.Cookie=u;const[f,v]=getUserAgentHeader();d[f]=v,c=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...d,...this._options.headers}})}try{c.onmessage=u=>{if(this.onreceive)try{this._logger.log(LogLevel.Trace,`(SSE transport) data received. ${getDataDetail(u.data,this._options.logMessageContent)}.`),this.onreceive(u.data)}catch(d){this._close(d);return}},c.onerror=u=>{l?this._close():s(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},c.onopen=()=>{this._logger.log(LogLevel.Information,`SSE connected to ${this._url}`),this._eventSource=c,l=!0,o()}}catch(u){s(u);return}})}async send(n){return this._eventSource?sendMessage(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class WebSocketTransport{constructor(n,r,o,s,l,c){this._logger=o,this._accessTokenFactory=r,this._logMessageContent=s,this._webSocketConstructor=l,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=c}async connect(n,r){Arg.isRequired(n,"url"),Arg.isRequired(r,"transferFormat"),Arg.isIn(r,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((s,l)=>{n=n.replace(/^http/,"ws");let c;const u=this._httpClient.getCookieString(n);let d=!1;if(Platform.isNode||Platform.isReactNative){const f={},[v,g]=getUserAgentHeader();f[v]=g,o&&(f[HeaderNames.Authorization]=`Bearer ${o}`),u&&(f[HeaderNames.Cookie]=u),c=new this._webSocketConstructor(n,void 0,{headers:{...f,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);c||(c=new this._webSocketConstructor(n)),r===TransferFormat.Binary&&(c.binaryType="arraybuffer"),c.onopen=f=>{this._logger.log(LogLevel.Information,`WebSocket connected to ${n}.`),this._webSocket=c,d=!0,s()},c.onerror=f=>{let v=null;typeof ErrorEvent<"u"&&f instanceof ErrorEvent?v=f.error:v="There was an error with the transport",this._logger.log(LogLevel.Information,`(WebSockets transport) ${v}.`)},c.onmessage=f=>{if(this._logger.log(LogLevel.Trace,`(WebSockets transport) data received. ${getDataDetail(f.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(f.data)}catch(v){this._close(v);return}},c.onclose=f=>{if(d)this._close(f);else{let v=null;typeof ErrorEvent<"u"&&f instanceof ErrorEvent?v=f.error:v="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",l(new Error(v))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(LogLevel.Trace,`(WebSockets transport) sending data. ${getDataDetail(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const MAX_REDIRECTS=100;class HttpConnection{constructor(n,r={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Arg.isRequired(n,"url"),this._logger=createLogger(r.logger),this.baseUrl=this._resolveUrl(n),r=r||{},r.logMessageContent=r.logMessageContent===void 0?!1:r.logMessageContent,typeof r.withCredentials=="boolean"||r.withCredentials===void 0)r.withCredentials=r.withCredentials===void 0?!0:r.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.timeout=r.timeout===void 0?100*1e3:r.timeout;let o=null,s=null;if(Platform.isNode&&typeof require<"u"){const l=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=l("ws"),s=l("eventsource")}!Platform.isNode&&typeof WebSocket<"u"&&!r.WebSocket?r.WebSocket=WebSocket:Platform.isNode&&!r.WebSocket&&o&&(r.WebSocket=o),!Platform.isNode&&typeof EventSource<"u"&&!r.EventSource?r.EventSource=EventSource:Platform.isNode&&!r.EventSource&&typeof s<"u"&&(r.EventSource=s),this._httpClient=new AccessTokenHttpClient(r.httpClient||new DefaultHttpClient(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}async start(n){if(n=n||TransferFormat.Binary,Arg.isIn(n,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Debug,`Starting connection with transfer format '${TransferFormat[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const r="Failed to start the HttpConnection before stop() was called.";return this._logger.log(LogLevel.Error,r),await this._stopPromise,Promise.reject(new AbortError(r))}else if(this._connectionState!=="Connected"){const r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(LogLevel.Error,r),Promise.reject(new AbortError(r))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new TransportSendQueue(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(r=>{this._stopPromiseResolver=r}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(r){this._logger.log(LogLevel.Error,`HttpConnection.transport.stop() threw error '${r}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(LogLevel.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let r=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===HttpTransportType.WebSockets)this.transport=this._constructTransport(HttpTransportType.WebSockets),await this._startTransport(r,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,s=0;do{if(o=await this._getNegotiationResponse(r),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new AbortError("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(r=o.url),o.accessToken){const l=o.accessToken;this._accessTokenFactory=()=>l,this._httpClient._accessToken=l,this._httpClient._accessTokenFactory=void 0}s++}while(o.url&&s<MAX_REDIRECTS);if(s===MAX_REDIRECTS&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(r,this._options.transport,o,n)}this.transport instanceof LongPollingTransport&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(LogLevel.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(LogLevel.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const r={},[o,s]=getUserAgentHeader();r[o]=s;const l=this._resolveNegotiateUrl(n);this._logger.log(LogLevel.Debug,`Sending negotiation request: ${l}.`);try{const c=await this._httpClient.post(l,{content:"",headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(c.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${c.statusCode}'`));const u=JSON.parse(c.content);return(!u.negotiateVersion||u.negotiateVersion<1)&&(u.connectionToken=u.connectionId),u.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new FailedToNegotiateWithServerError("Client didn't negotiate Stateful Reconnect but the server did.")):u}catch(c){let u="Failed to complete negotiation with the server: "+c;return c instanceof HttpError&&c.statusCode===404&&(u=u+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(LogLevel.Error,u),Promise.reject(new FailedToNegotiateWithServerError(u))}}_createConnectUrl(n,r){return r?n+(n.indexOf("?")===-1?"?":"&")+`id=${r}`:n}async _createTransport(n,r,o,s){let l=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(r)){this._logger.log(LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,await this._startTransport(l,s),this.connectionId=o.connectionId;return}const c=[],u=o.availableTransports||[];let d=o;for(const f of u){const v=this._resolveTransportOrError(f,r,s,(d==null?void 0:d.useStatefulReconnect)===!0);if(v instanceof Error)c.push(`${f.transport} failed:`),c.push(v);else if(this._isITransport(v)){if(this.transport=v,!d){try{d=await this._getNegotiationResponse(n)}catch(g){return Promise.reject(g)}l=this._createConnectUrl(n,d.connectionToken)}try{await this._startTransport(l,s),this.connectionId=d.connectionId;return}catch(g){if(this._logger.log(LogLevel.Error,`Failed to start the transport '${f.transport}': ${g}`),d=void 0,c.push(new FailedToStartTransportError(`${f.transport} failed: ${g}`,HttpTransportType[f.transport])),this._connectionState!=="Connecting"){const y="Failed to select transport before stop() was called.";return this._logger.log(LogLevel.Debug,y),Promise.reject(new AbortError(y))}}}}return c.length>0?Promise.reject(new AggregateErrors(`Unable to connect to the server with any of the available transports. ${c.join(" ")}`,c)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case HttpTransportType.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new WebSocketTransport(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case HttpTransportType.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ServerSentEventsTransport(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case HttpTransportType.LongPolling:return new LongPollingTransport(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,r){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let s=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,r),await this.features.resend()}catch{s=!0}else{this._stopConnection(o);return}s&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,r)}_resolveTransportOrError(n,r,o,s){const l=HttpTransportType[n.transport];if(l==null)return this._logger.log(LogLevel.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(transportMatches(r,l))if(n.transferFormats.map(u=>TransferFormat[u]).indexOf(o)>=0){if(l===HttpTransportType.WebSockets&&!this._options.WebSocket||l===HttpTransportType.ServerSentEvents&&!this._options.EventSource)return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[l]}' because it is not supported in your environment.'`),new UnsupportedTransportError(`'${HttpTransportType[l]}' is not supported in your environment.`,l);this._logger.log(LogLevel.Debug,`Selecting transport '${HttpTransportType[l]}'.`);try{return this.features.reconnect=l===HttpTransportType.WebSockets?s:void 0,this._constructTransport(l)}catch(u){return u}}else return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[l]}' because it does not support the requested transfer format '${TransferFormat[o]}'.`),new Error(`'${HttpTransportType[l]}' does not support ${TransferFormat[o]}.`);else return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[l]}' because it was disabled by the client.`),new DisabledTransportError(`'${HttpTransportType[l]}' is disabled by the client.`,l)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(LogLevel.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(LogLevel.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(LogLevel.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(LogLevel.Error,`Connection disconnected with error '${n}'.`):this._logger.log(LogLevel.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(r=>{this._logger.log(LogLevel.Error,`TransportSendQueue.stop() threw error '${r}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(r){this._logger.log(LogLevel.Error,`HttpConnection.onclose(${n}) threw error '${r}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!Platform.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const r=window.document.createElement("a");return r.href=n,this._logger.log(LogLevel.Information,`Normalizing '${n}' to '${r.href}'.`),r.href}_resolveNegotiateUrl(n){const r=new URL(n);r.pathname.endsWith("/")?r.pathname+="negotiate":r.pathname+="/negotiate";const o=new URLSearchParams(r.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),r.search=o.toString(),r.toString()}}function transportMatches(a,n){return!a||(n&a)!==0}class TransportSendQueue{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new PromiseSource,this._transportResult=new PromiseSource,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new PromiseSource),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new PromiseSource;const n=this._transportResult;this._transportResult=void 0;const r=typeof this._buffer[0]=="string"?this._buffer.join(""):TransportSendQueue._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(r),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const r=n.map(l=>l.byteLength).reduce((l,c)=>l+c),o=new Uint8Array(r);let s=0;for(const l of n)o.set(new Uint8Array(l),s),s+=l.byteLength;return o.buffer}}class PromiseSource{constructor(){this.promise=new Promise((n,r)=>[this._resolver,this._rejecter]=[n,r])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const JSON_HUB_PROTOCOL_NAME="json";class JsonHubProtocol{constructor(){this.name=JSON_HUB_PROTOCOL_NAME,this.version=2,this.transferFormat=TransferFormat.Text}parseMessages(n,r){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];r===null&&(r=NullLogger.instance);const o=TextMessageFormat.parse(n),s=[];for(const l of o){const c=JSON.parse(l);if(typeof c.type!="number")throw new Error("Invalid payload.");switch(c.type){case MessageType.Invocation:this._isInvocationMessage(c);break;case MessageType.StreamItem:this._isStreamItemMessage(c);break;case MessageType.Completion:this._isCompletionMessage(c);break;case MessageType.Ping:break;case MessageType.Close:break;case MessageType.Ack:this._isAckMessage(c);break;case MessageType.Sequence:this._isSequenceMessage(c);break;default:r.log(LogLevel.Information,"Unknown message type '"+c.type+"' ignored.");continue}s.push(c)}return s}writeMessage(n){return TextMessageFormat.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,r){if(typeof n!="string"||n==="")throw new Error(r)}}const LogLevelNameMapping={trace:LogLevel.Trace,debug:LogLevel.Debug,info:LogLevel.Information,information:LogLevel.Information,warn:LogLevel.Warning,warning:LogLevel.Warning,error:LogLevel.Error,critical:LogLevel.Critical,none:LogLevel.None};function parseLogLevel(a){const n=LogLevelNameMapping[a.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${a}`)}class HubConnectionBuilder{configureLogging(n){if(Arg.isRequired(n,"logging"),isLogger(n))this.logger=n;else if(typeof n=="string"){const r=parseLogLevel(n);this.logger=new ConsoleLogger(r)}else this.logger=new ConsoleLogger(n);return this}withUrl(n,r){return Arg.isRequired(n,"url"),Arg.isNotEmpty(n,"url"),this.url=n,typeof r=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...r}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:r},this}withHubProtocol(n){return Arg.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new DefaultReconnectPolicy(n):this.reconnectPolicy=n:this.reconnectPolicy=new DefaultReconnectPolicy,this}withServerTimeout(n){return Arg.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Arg.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n==null?void 0:n.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const r=new HttpConnection(this.url,n);return HubConnection.create(r,this.logger||NullLogger.instance,this.protocol||new JsonHubProtocol,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function isLogger(a){return a.log!==void 0}const _hoisted_1$h={class:"DataShow"},_sfc_main$h=defineComponent({__name:"DataShow",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=ref([{name:"系统掘进状态",value:0}]),s=ref([{name:"当前刀盘扭矩",value:0},{name:"当前刀盘旋转方向",value:0},{name:"当前刀盘转速",value:0}]),l=ref([{name:"当前推进速度",value:0},{name:"当前总推力",value:0}]),c=ref([{name:"盾尾三维坐标x",value:0},{name:"盾尾三维坐标y",value:0},{name:"盾尾三维坐标z",value:0}]),u=new HubConnectionBuilder().withUrl("http://111.229.185.135:5000/ws").build(),d=ref(0),f=async()=>{if(u){const y=Date.now();await u.invoke("Ping");const _=Date.now();d.value=_-y,setTimeout(f,1e3)}};function v(y,_){console.log("ReceiveMessage",y,_)}function g(y){console.log("Update",y);const _=JSON.parse(y);o.value=[{name:"系统掘进状态",value:_.系统掘进状态||o.value[0].value}],s.value=[{name:"当前刀盘扭矩",value:_.当前刀盘扭矩||s.value[0].value},{name:"当前刀盘旋转方向",value:_.当前刀盘旋转方向||s.value[1].value},{name:"当前刀盘转速",value:_.当前刀盘转速||s.value[2].value}],l.value=[{name:"当前推进速度",value:_.当前推进速度||l.value[0].value},{name:"当前总推力",value:_.当前总推力||l.value[1].value}],c.value=[{name:"盾尾三维坐标x",value:_.盾尾三维坐标x||c.value[0].value},{name:"盾尾三维坐标y",value:_.盾尾三维坐标y||c.value[1].value},{name:"盾尾三维坐标z",value:_.盾尾三维坐标z||c.value[2].value}]}return onMounted(()=>{const y=()=>{u.start().then(()=>{console.log("Connected to WebSocket"),f()}).catch(_=>{console.error("Error connecting to WebSocket:",_),setTimeout(y,5e3)})};y(),u.on("ReceiveMessage",(_,S)=>{v(_,S)}),u.on("Update",_=>{g(_)})}),(y,_)=>{const S=resolveComponent("van-nav-bar"),x=resolveComponent("van-divider"),T=resolveComponent("van-card"),w=resolveComponent("van-grid-item"),E=resolveComponent("van-grid");return openBlock(),createElementBlock("div",_hoisted_1$h,[createVNode$1(S,{class:"fixed-nav-bar",title:"盾构参数采集（演示）","left-text":"返回","left-arrow":"",onClickLeft:r,"right-text":"ping: "+d.value+"ms"},null,8,["right-text"]),createVNode$1(x,{id:"FirstTitle",class:"styled-divider"},{default:withCtx(()=>_[0]||(_[0]=[createTextVNode("设备总览信息")])),_:1}),createVNode$1(E,{"column-num":3},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(P,D)=>(openBlock(),createBlock(w,{key:D},{default:withCtx(()=>[createVNode$1(T,{class:"styled-card",title:P.name,desc:P.value.toString()},null,8,["title","desc"])]),_:2},1024))),128))]),_:1}),createVNode$1(x,{class:"styled-divider"},{default:withCtx(()=>_[1]||(_[1]=[createTextVNode("刀盘系统")])),_:1}),createVNode$1(E,{"column-num":3},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,(P,D)=>(openBlock(),createBlock(w,{key:D},{default:withCtx(()=>[createVNode$1(T,{class:"styled-card",title:P.name,desc:P.value.toString()},null,8,["title","desc"])]),_:2},1024))),128))]),_:1}),createVNode$1(x,{class:"styled-divider"},{default:withCtx(()=>_[2]||(_[2]=[createTextVNode("推进系统")])),_:1}),createVNode$1(E,{"column-num":3},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,(P,D)=>(openBlock(),createBlock(w,{key:D},{default:withCtx(()=>[createVNode$1(T,{class:"styled-card",title:P.name,desc:P.value.toString()},null,8,["title","desc"])]),_:2},1024))),128))]),_:1}),createVNode$1(x,{class:"styled-divider"},{default:withCtx(()=>_[3]||(_[3]=[createTextVNode("导向系统")])),_:1}),createVNode$1(E,{"column-num":3},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(P,D)=>(openBlock(),createBlock(w,{key:D},{default:withCtx(()=>[createVNode$1(T,{class:"styled-card",title:P.name,desc:P.value.toString()},null,8,["title","desc"])]),_:2},1024))),128))]),_:1})])}}}),DataShow=_export_sfc(_sfc_main$h,[["__scopeId","data-v-b3b68e5b"]]),_hoisted_1$g={class:"ClassPage"},_hoisted_2$g={class:"header-section"},_hoisted_3$f={class:"info-card"},_hoisted_4$e={class:"weather-icon"},_hoisted_5$d={class:"meta-info"},_hoisted_6$d={class:"tame"},_hoisted_7$c={class:"info-card leader-info"},_hoisted_8$8={class:"leader-details"},_hoisted_9$7={class:"PhoneNumber"},_hoisted_10$7=["href"],_hoisted_11$7={class:"info-card attendance"},_hoisted_12$7={class:"attendance-status"},_hoisted_13$6={class:"info-card construction-content"},_hoisted_14$5={class:"shield-info"},_hoisted_15$4={class:"progress-value"},_sfc_main$g=defineComponent({__name:"ClassPage",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=reactive({date:new Date().toLocaleDateString(),weather:"晴 26℃",teamCode:"TD-25-016",leader:{name:"王强",phone:"138-1234-5678"}}),s=computed(()=>({iconfont:!0,"icon-sunny":o.weather==="晴","icon-cloudy":o.weather==="多云","icon-rainy":o.weather==="雨"})),l=reactive({normal:18,late:2,absent:1}),c=computed(()=>({normal:{icon:"fas fa-check-circle",label:"出勤"},late:{icon:"fas fa-clock",label:"迟到"},absent:{icon:"fas fa-times-circle",label:"缺勤"}})),u=reactive({daily:12,total:1238}),d=computed(()=>[{title:"今日推进",value:u.daily,percent:u.daily/15*100},{title:"累计完成",value:u.total,percent:u.total/2e3*100}]),f=v=>({width:`${v.percent}%`,background:"skyblue"});return(v,g)=>{const y=resolveComponent("van-nav-bar");return openBlock(),createElementBlock("div",_hoisted_1$g,[createVNode$1(y,{class:"fixed-nav-bar",title:"盾构施工信息看板","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",_hoisted_2$g,[createBaseVNode("div",_hoisted_3$f,[g[0]||(g[0]=createBaseVNode("h3",null,"工程班次信息",-1)),createBaseVNode("span",_hoisted_4$e,[createTextVNode(toDisplayString(o.weather)+" ",1),createBaseVNode("i",{class:normalizeClass(s.value)},null,2)]),createBaseVNode("div",_hoisted_5$d,[createBaseVNode("span",null,"日期："+toDisplayString(o.date),1),createBaseVNode("span",_hoisted_6$d,"施工小队："+toDisplayString(o.teamCode),1)])])]),createBaseVNode("div",_hoisted_7$c,[g[2]||(g[2]=createBaseVNode("h3",null,"负责人信息",-1)),createBaseVNode("div",_hoisted_8$8,[createBaseVNode("p",null,"姓名："+toDisplayString(o.leader.name),1),createBaseVNode("p",_hoisted_9$7,[g[1]||(g[1]=createTextVNode("电话：")),createBaseVNode("a",{href:`tel:${o.leader.phone}`},toDisplayString(o.leader.phone),9,_hoisted_10$7)])])]),createBaseVNode("div",_hoisted_11$7,[g[3]||(g[3]=createBaseVNode("h3",null,"人员考勤状态",-1)),createBaseVNode("div",_hoisted_12$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(_,S)=>(openBlock(),createElementBlock("div",{key:S,class:normalizeClass(["attendance-item",`status-${S}`])},[createBaseVNode("i",{class:normalizeClass(_.icon)},null,2),createBaseVNode("div",null,toDisplayString(_.label)+" "+toDisplayString(l[S])+"人",1)],2))),128))])]),createBaseVNode("div",_hoisted_13$6,[createBaseVNode("div",_hoisted_14$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,_=>(openBlock(),createElementBlock("div",{key:_.title,class:"shield-metric"},[createBaseVNode("h4",null,toDisplayString(_.title),1),createBaseVNode("div",_hoisted_15$4,toDisplayString(_.value)+" 环",1),createBaseVNode("div",{class:"progress-bar",style:normalizeStyle$1(f(_))},null,4),g[4]||(g[4]=createBaseVNode("div",{class:"progress-bar"},null,-1))]))),128))])])])}}}),ClassPage=_export_sfc(_sfc_main$g,[["__scopeId","data-v-3b27322b"]]),_hoisted_1$f={class:"BaseMsg"},_hoisted_2$f={class:"section"},_hoisted_3$e={class:"card-group"},_hoisted_4$d={class:"card-icon"},_hoisted_5$c={class:"card-content"},_hoisted_6$c={class:"card-title"},_hoisted_7$b={class:"card-description"},_hoisted_8$7={class:"section"},_hoisted_9$6={class:"card"},_hoisted_10$6={class:"card-content"},_hoisted_11$6={class:"challenge-list"},_hoisted_12$6={class:"challenge-text"},_sfc_main$f=defineComponent({__name:"BaseMsg",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=[{title:"数字大脑",description:"智能掘进系统实现全流程自动化控制",icon:"fas fa-brain"},{title:"智刃铁齿",description:"超硬龙齿矩阵可实现2000米不换刀",icon:"fas fa-wrench"},{title:"智慧心脏",description:"全球首套主动防护主驱动系统",icon:"fas fa-heart"}],s=["最大埋深75米，最高水压7.5帕","穿越复杂地质带，沉降需控制在毫米级","高水压环境下的密封件承压能力要求","江中地质勘探覆盖区域有限"];return(l,c)=>{const u=resolveComponent("van-nav-bar");return openBlock(),createElementBlock("div",_hoisted_1$f,[createVNode$1(u,{class:"fixed-nav-bar",title:"项目基本信息","left-text":"返回","left-arrow":"",onClickLeft:r}),c[3]||(c[3]=createStaticVNode('<div class="header" data-v-1858bb09><h1 class="title" data-v-1858bb09>海太长江隧道工程</h1><div class="subtitle" data-v-1858bb09>世界最长高速公路水下盾构隧道</div></div><div class="section" data-v-1858bb09><h2 class="section-title" data-v-1858bb09>项目概览</h2><div class="card-group" data-v-1858bb09><div class="card" data-v-1858bb09><div class="card-icon" data-v-1858bb09><i class="fas fa-globe-americas" data-v-1858bb09></i></div><div class="card-content" data-v-1858bb09><div class="card-title" data-v-1858bb09>项目定位</div><div class="card-description" data-v-1858bb09> 国家《长江干线过江通道布局规划（2020—2035年）》重点项目 </div></div></div><div class="card" data-v-1858bb09><div class="card-icon" data-v-1858bb09><i class="fas fa-ruler" data-v-1858bb09></i></div><div class="card-content" data-v-1858bb09><div class="card-title" data-v-1858bb09>线路总长</div><div class="card-description" data-v-1858bb09>39.07公里</div></div></div><div class="card" data-v-1858bb09><div class="card-icon" data-v-1858bb09><i class="fas fa-clock" data-v-1858bb09></i></div><div class="card-content" data-v-1858bb09><div class="card-title" data-v-1858bb09>建设周期</div><div class="card-description" data-v-1858bb09>2023-2028年</div></div></div></div></div><div class="section" data-v-1858bb09><h2 class="section-title" data-v-1858bb09>“沧渊号”盾构机参数</h2><div class="card" data-v-1858bb09><div class="card-content" data-v-1858bb09><div class="parameter-group" data-v-1858bb09><div class="parameter-item" data-v-1858bb09><div class="parameter-label" data-v-1858bb09>开挖直径</div><div class="parameter-value" data-v-1858bb09>16.66米</div></div><div class="parameter-item" data-v-1858bb09><div class="parameter-label" data-v-1858bb09>整机总长</div><div class="parameter-value" data-v-1858bb09>176米</div></div><div class="parameter-item" data-v-1858bb09><div class="parameter-label" data-v-1858bb09>总重量</div><div class="parameter-value" data-v-1858bb09>5650吨</div></div></div></div></div></div>',3)),createBaseVNode("div",_hoisted_2$f,[c[0]||(c[0]=createBaseVNode("h2",{class:"section-title"},"核心技术亮点",-1)),createBaseVNode("div",_hoisted_3$e,[(openBlock(),createElementBlock(Fragment,null,renderList(o,(d,f)=>createBaseVNode("div",{class:"card",key:f},[createBaseVNode("div",_hoisted_4$d,[createBaseVNode("i",{class:normalizeClass(d.icon)},null,2)]),createBaseVNode("div",_hoisted_5$c,[createBaseVNode("div",_hoisted_6$c,toDisplayString(d.title),1),createBaseVNode("div",_hoisted_7$b,toDisplayString(d.description),1)])])),64))])]),createBaseVNode("div",_hoisted_8$7,[c[2]||(c[2]=createBaseVNode("h2",{class:"section-title"},"工程挑战",-1)),createBaseVNode("div",_hoisted_9$6,[createBaseVNode("div",_hoisted_10$6,[createBaseVNode("ul",_hoisted_11$6,[(openBlock(),createElementBlock(Fragment,null,renderList(s,(d,f)=>createBaseVNode("li",{key:f},[c[1]||(c[1]=createBaseVNode("div",{class:"challenge-icon"},[createBaseVNode("i",{class:"fas fa-exclamation-triangle"})],-1)),createBaseVNode("div",_hoisted_12$6,toDisplayString(d),1)])),64))])])])]),c[4]||(c[4]=createStaticVNode('<div class="section" data-v-1858bb09><h2 class="section-title" data-v-1858bb09>项目成果</h2><div class="card" data-v-1858bb09><div class="card-content" data-v-1858bb09><div class="achievement-group" data-v-1858bb09><div class="achievement-item" data-v-1858bb09><div class="achievement-label" data-v-1858bb09>隧道内壁</div><div class="achievement-value" data-v-1858bb09>140万平方米滴水不漏</div></div><div class="achievement-item" data-v-1858bb09><div class="achievement-label" data-v-1858bb09>沉降控制</div><div class="achievement-value" data-v-1858bb09>≤3毫米</div></div><div class="achievement-item" data-v-1858bb09><div class="achievement-label" data-v-1858bb09>生产效率</div><div class="achievement-value" data-v-1858bb09>提升50%</div></div></div></div></div></div>',1))])}}}),BaseMsg=_export_sfc(_sfc_main$f,[["__scopeId","data-v-1858bb09"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},extendStatics(a,n)};function __extends(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Browser=function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a}(),Env=function(){function a(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(a,n){var r=n.browser,o=a.match(/Firefox\/([\d.]+)/),s=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),l=a.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(a);o&&(r.firefox=!0,r.version=o[1]),s&&(r.ie=!0,r.version=s[1]),l&&(r.edge=!0,r.version=l[1],r.newEdge=+l[1].split(".")[0]>18),c&&(r.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,n.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),n.domSupported=typeof document<"u";var u=document.documentElement.style;n.transform3dSupported=(r.ie&&"transition"in u||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),n.transformSupported=n.transform3dSupported||r.ie&&+r.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(a){var n={};if(typeof JSON>"u")return n;for(var r=0;r<a.length;r++){var o=String.fromCharCode(r+32),s=(a.charCodeAt(r)-OFFSET)/SCALE;n[o]=s}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var a,n;return function(r,o){if(!a){var s=platformApi.createCanvas();a=s&&s.getContext("2d")}if(a)return n!==o&&(n=a.font=o||DEFAULT_FONT),a.measureText(r);r=r||"",o=o||DEFAULT_FONT;var l=/((?:\d+)?\.?\d*)px/.exec(o),c=l&&+l[1]||DEFAULT_FONT_SIZE,u=0;if(o.indexOf("mono")>=0)u=c*r.length;else for(var d=0;d<r.length;d++){var f=DEFAULT_TEXT_WIDTH_MAP[r[d]];u+=f==null?c:f*c}return{width:u}}}(),loadImage:function(a,n,r){var o=new Image;return o.onload=n,o.onerror=r,o.src=a,o}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,n){return a["[object "+n+"]"]=!0,a},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,n){return a["[object "+n+"Array]"]=!0,a},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];typeof console<"u"&&console.error.apply(console,a)}function clone$4(a){if(a==null||typeof a!="object")return a;var n=a,r=objToString.call(a);if(r==="[object Array]"){if(!isPrimitive(a)){n=[];for(var o=0,s=a.length;o<s;o++)n[o]=clone$4(a[o])}}else if(TYPED_ARRAY[r]){if(!isPrimitive(a)){var l=a.constructor;if(l.from)n=l.from(a);else{n=new l(a.length);for(var o=0,s=a.length;o<s;o++)n[o]=a[o]}}}else if(!BUILTIN_OBJECT[r]&&!isPrimitive(a)&&!isDom(a)){n={};for(var c in a)a.hasOwnProperty(c)&&c!==protoKey&&(n[c]=clone$4(a[c]))}return n}function merge(a,n,r){if(!isObject$3(n)||!isObject$3(a))return r?clone$4(n):a;for(var o in n)if(n.hasOwnProperty(o)&&o!==protoKey){var s=a[o],l=n[o];isObject$3(l)&&isObject$3(s)&&!isArray$1(l)&&!isArray$1(s)&&!isDom(l)&&!isDom(s)&&!isBuiltInObject(l)&&!isBuiltInObject(s)&&!isPrimitive(l)&&!isPrimitive(s)?merge(s,l,r):(r||!(o in a))&&(a[o]=clone$4(n[o]))}return a}function mergeAll(a,n){for(var r=a[0],o=1,s=a.length;o<s;o++)r=merge(r,a[o],n);return r}function extend(a,n){if(Object.assign)Object.assign(a,n);else for(var r in n)n.hasOwnProperty(r)&&r!==protoKey&&(a[r]=n[r]);return a}function defaults(a,n,r){for(var o=keys(n),s=0,l=o.length;s<l;s++){var c=o[s];(r?n[c]!=null:a[c]==null)&&(a[c]=n[c])}return a}function indexOf(a,n){if(a){if(a.indexOf)return a.indexOf(n);for(var r=0,o=a.length;r<o;r++)if(a[r]===n)return r}return-1}function inherits(a,n){var r=a.prototype;function o(){}o.prototype=n.prototype,a.prototype=new o;for(var s in r)r.hasOwnProperty(s)&&(a.prototype[s]=r[s]);a.prototype.constructor=a,a.superClass=n}function mixin(a,n,r){if(a="prototype"in a?a.prototype:a,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(n),s=0;s<o.length;s++){var l=o[s];l!=="constructor"&&(r?n[l]!=null:a[l]==null)&&(a[l]=n[l])}else defaults(a,n,r)}function isArrayLike(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function each$f(a,n,r){if(a&&n)if(a.forEach&&a.forEach===nativeForEach)a.forEach(n,r);else if(a.length===+a.length)for(var o=0,s=a.length;o<s;o++)n.call(r,a[o],o,a);else for(var l in a)a.hasOwnProperty(l)&&n.call(r,a[l],l,a)}function map$1(a,n,r){if(!a)return[];if(!n)return slice(a);if(a.map&&a.map===nativeMap)return a.map(n,r);for(var o=[],s=0,l=a.length;s<l;s++)o.push(n.call(r,a[s],s,a));return o}function reduce(a,n,r,o){if(a&&n){for(var s=0,l=a.length;s<l;s++)r=n.call(o,r,a[s],s,a);return r}}function filter(a,n,r){if(!a)return[];if(!n)return slice(a);if(a.filter&&a.filter===nativeFilter)return a.filter(n,r);for(var o=[],s=0,l=a.length;s<l;s++)n.call(r,a[s],s,a)&&o.push(a[s]);return o}function find(a,n,r){if(a&&n){for(var o=0,s=a.length;o<s;o++)if(n.call(r,a[o],o,a))return a[o]}}function keys(a){if(!a)return[];if(Object.keys)return Object.keys(a);var n=[];for(var r in a)a.hasOwnProperty(r)&&n.push(r);return n}function bindPolyfill(a,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return function(){return a.apply(n,r.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){return a.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(a){return Array.isArray?Array.isArray(a):objToString.call(a)==="[object Array]"}function isFunction(a){return typeof a=="function"}function isString(a){return typeof a=="string"}function isStringSafe(a){return objToString.call(a)==="[object String]"}function isNumber(a){return typeof a=="number"}function isObject$3(a){var n=typeof a;return n==="function"||!!a&&n==="object"}function isBuiltInObject(a){return!!BUILTIN_OBJECT[objToString.call(a)]}function isTypedArray(a){return!!TYPED_ARRAY[objToString.call(a)]}function isDom(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function isGradientObject(a){return a.colorStops!=null}function isImagePatternObject(a){return a.image!=null}function isRegExp(a){return objToString.call(a)==="[object RegExp]"}function eqNaN(a){return a!==a}function retrieve(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];for(var r=0,o=a.length;r<o;r++)if(a[r]!=null)return a[r]}function retrieve2(a,n){return a??n}function retrieve3(a,n,r){return a??n??r}function slice(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return nativeSlice.apply(a,n)}function normalizeCssArray$1(a){if(typeof a=="number")return[a,a,a,a];var n=a.length;return n===2?[a[0],a[1],a[0],a[1]]:n===3?[a[0],a[1],a[2],a[1]]:a}function assert(a,n){if(!a)throw new Error(n)}function trim$1(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(a){a[primitiveKey]=!0}function isPrimitive(a){return a[primitiveKey]}var MapPolyfill=function(){function a(){this.data={}}return a.prototype.delete=function(n){var r=this.has(n);return r&&delete this.data[n],r},a.prototype.has=function(n){return this.data.hasOwnProperty(n)},a.prototype.get=function(n){return this.data[n]},a.prototype.set=function(n,r){return this.data[n]=r,this},a.prototype.keys=function(){return keys(this.data)},a.prototype.forEach=function(n){var r=this.data;for(var o in r)r.hasOwnProperty(o)&&n(r[o],o)},a}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function a(n){var r=isArray$1(n);this.data=maybeNativeMap();var o=this;n instanceof a?n.each(s):n&&each$f(n,s);function s(l,c){r?o.set(l,c):o.set(c,l)}}return a.prototype.hasKey=function(n){return this.data.has(n)},a.prototype.get=function(n){return this.data.get(n)},a.prototype.set=function(n,r){return this.data.set(n,r),r},a.prototype.each=function(n,r){this.data.forEach(function(o,s){n.call(r,o,s)})},a.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},a.prototype.removeKey=function(n){this.data.delete(n)},a}();function createHashMap(a){return new HashMap(a)}function concatArray(a,n){for(var r=new a.constructor(a.length+n.length),o=0;o<a.length;o++)r[o]=a[o];for(var s=a.length,o=0;o<n.length;o++)r[o+s]=n[o];return r}function createObject(a,n){var r;if(Object.create)r=Object.create(a);else{var o=function(){};o.prototype=a,r=new o}return n&&extend(r,n),r}function disableUserSelect(a){var n=a.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(a,n){return a.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;function create$2(a,n){return a==null&&(a=0),n==null&&(n=0),[a,n]}function copy$1(a,n){return a[0]=n[0],a[1]=n[1],a}function clone$3(a){return[a[0],a[1]]}function set$1(a,n,r){return a[0]=n,a[1]=r,a}function add(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a}function scaleAndAdd$1(a,n,r,o){return a[0]=n[0]+r[0]*o,a[1]=n[1]+r[1]*o,a}function sub(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a}function len(a){return Math.sqrt(lenSquare(a))}function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}function scale$2(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a}function normalize$4(a,n){var r=len(n);return r===0?(a[0]=0,a[1]=0):(a[0]=n[0]/r,a[1]=n[1]/r),a}function distance(a,n){return Math.sqrt((a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1]))}var dist$1=distance;function distanceSquare(a,n){return(a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1])}var distSquare=distanceSquare;function lerp$2(a,n,r,o){return a[0]=n[0]+o*(r[0]-n[0]),a[1]=n[1]+o*(r[1]-n[1]),a}function applyTransform$1(a,n,r){var o=n[0],s=n[1];return a[0]=r[0]*o+r[2]*s+r[4],a[1]=r[1]*o+r[3]*s+r[5],a}function min$1(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a}function max$1(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a}var Param=function(){function a(n,r){this.target=n,this.topTarget=r&&r.topTarget}return a}(),Draggable=function(){function a(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(n){for(var r=n.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(r,n),"dragstart",n.event))},a.prototype._drag=function(n){var r=this._draggingTarget;if(r){var o=n.offsetX,s=n.offsetY,l=o-this._x,c=s-this._y;this._x=o,this._y=s,r.drift(l,c,n),this.handler.dispatchToElement(new Param(r,n),"drag",n.event);var u=this.handler.findHover(o,s,r).target,d=this._dropTarget;this._dropTarget=u,r!==u&&(d&&u!==d&&this.handler.dispatchToElement(new Param(d,n),"dragleave",n.event),u&&u!==d&&this.handler.dispatchToElement(new Param(u,n),"dragenter",n.event))}},a.prototype._dragEnd=function(n){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Param(r,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},a}(),Eventful=function(){function a(n){n&&(this._$eventProcessor=n)}return a.prototype.on=function(n,r,o,s){this._$handlers||(this._$handlers={});var l=this._$handlers;if(typeof r=="function"&&(s=o,o=r,r=null),!o||!n)return this;var c=this._$eventProcessor;r!=null&&c&&c.normalizeQuery&&(r=c.normalizeQuery(r)),l[n]||(l[n]=[]);for(var u=0;u<l[n].length;u++)if(l[n][u].h===o)return this;var d={h:o,query:r,ctx:s||this,callAtLast:o.zrEventfulCallAtLast},f=l[n].length-1,v=l[n][f];return v&&v.callAtLast?l[n].splice(f,0,d):l[n].push(d),this},a.prototype.isSilent=function(n){var r=this._$handlers;return!r||!r[n]||!r[n].length},a.prototype.off=function(n,r){var o=this._$handlers;if(!o)return this;if(!n)return this._$handlers={},this;if(r){if(o[n]){for(var s=[],l=0,c=o[n].length;l<c;l++)o[n][l].h!==r&&s.push(o[n][l]);o[n]=s}o[n]&&o[n].length===0&&delete o[n]}else delete o[n];return this},a.prototype.trigger=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var s=this._$handlers[n],l=this._$eventProcessor;if(s)for(var c=r.length,u=s.length,d=0;d<u;d++){var f=s[d];if(!(l&&l.filter&&f.query!=null&&!l.filter(n,f.query)))switch(c){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,r[0]);break;case 2:f.h.call(f.ctx,r[0],r[1]);break;default:f.h.apply(f.ctx,r);break}}return l&&l.afterTrigger&&l.afterTrigger(n),this},a.prototype.triggerWithContext=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var s=this._$handlers[n],l=this._$eventProcessor;if(s)for(var c=r.length,u=r[c-1],d=s.length,f=0;f<d;f++){var v=s[f];if(!(l&&l.filter&&v.query!=null&&!l.filter(n,v.query)))switch(c){case 0:v.h.call(u);break;case 1:v.h.call(u,r[0]);break;case 2:v.h.call(u,r[0],r[1]);break;default:v.h.apply(u,r.slice(1,c-1));break}}return l&&l.afterTrigger&&l.afterTrigger(n),this},a}(),LN2=Math.log(2);function determinant(a,n,r,o,s,l){var c=o+"-"+s,u=a.length;if(l.hasOwnProperty(c))return l[c];if(n===1){var d=Math.round(Math.log((1<<u)-1&~s)/LN2);return a[r][d]}for(var f=o|1<<r,v=r+1;o&1<<v;)v++;for(var g=0,y=0,_=0;y<u;y++){var S=1<<y;S&s||(g+=(_%2?-1:1)*a[r][y]*determinant(a,n-1,v,f,s|S,l),_++)}return l[c]=g,g}function buildTransformer(a,n){var r=[[a[0],a[1],1,0,0,0,-n[0]*a[0],-n[0]*a[1]],[0,0,0,a[0],a[1],1,-n[1]*a[0],-n[1]*a[1]],[a[2],a[3],1,0,0,0,-n[2]*a[2],-n[2]*a[3]],[0,0,0,a[2],a[3],1,-n[3]*a[2],-n[3]*a[3]],[a[4],a[5],1,0,0,0,-n[4]*a[4],-n[4]*a[5]],[0,0,0,a[4],a[5],1,-n[5]*a[4],-n[5]*a[5]],[a[6],a[7],1,0,0,0,-n[6]*a[6],-n[6]*a[7]],[0,0,0,a[6],a[7],1,-n[7]*a[6],-n[7]*a[7]]],o={},s=determinant(r,8,0,0,0,o);if(s!==0){for(var l=[],c=0;c<8;c++)for(var u=0;u<8;u++)l[u]==null&&(l[u]=0),l[u]+=((c+u)%2?-1:1)*determinant(r,7,c===0?1:0,1<<c,1<<u,o)/s*n[c];return function(d,f,v){var g=f*l[6]+v*l[7]+1;d[0]=(f*l[0]+v*l[1]+l[2])/g,d[1]=(f*l[3]+v*l[4]+l[5])/g}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(a,n,r,o,s){return transformCoordWithViewport(_calcOut$1,n,o,s,!0)&&transformCoordWithViewport(a,r,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(a,n,r,o,s){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var l=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(n,l),u=preparePointerTransformer(c,l,s);if(u)return u(a,r,o),!0}return!1}function prepareCoordMarkers(a,n){var r=n.markers;if(r)return r;r=n.markers=[];for(var o=["left","right"],s=["top","bottom"],l=0;l<4;l++){var c=document.createElement("div"),u=c.style,d=l%2,f=(l>>1)%2;u.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[d]+":0",s[f]+":0",o[1-d]+":auto",s[1-f]+":auto",""].join("!important;"),a.appendChild(c),r.push(c)}return r}function preparePointerTransformer(a,n,r){for(var o=r?"invTrans":"trans",s=n[o],l=n.srcCoords,c=[],u=[],d=!0,f=0;f<4;f++){var v=a[f].getBoundingClientRect(),g=2*f,y=v.left,_=v.top;c.push(y,_),d=d&&l&&y===l[g]&&_===l[g+1],u.push(a[f].offsetLeft,a[f].offsetTop)}return d&&s?s:(n.srcCoords=c,n[o]=r?buildTransformer(u,c):buildTransformer(c,u))}function isCanvasEl(a){return a.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(a){return a==null?"":(a+"").replace(replaceReg,function(n,r){return replaceMap[r]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(a,n,r,o){return r=r||{},o?calculateZrXY(a,n,r):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(r.zrX=n.layerX,r.zrY=n.layerY):n.offsetX!=null?(r.zrX=n.offsetX,r.zrY=n.offsetY):calculateZrXY(a,n,r),r}function calculateZrXY(a,n,r){if(env.domSupported&&a.getBoundingClientRect){var o=n.clientX,s=n.clientY;if(isCanvasEl(a)){var l=a.getBoundingClientRect();r.zrX=o-l.left,r.zrY=s-l.top;return}else if(transformCoordWithViewport(_calcOut,a,o,s)){r.zrX=_calcOut[0],r.zrY=_calcOut[1];return}}r.zrX=r.zrY=0}function getNativeEvent(a){return a||window.event}function normalizeEvent(a,n,r){if(n=getNativeEvent(n),n.zrX!=null)return n;var o=n.type,s=o&&o.indexOf("touch")>=0;if(s){var c=o!=="touchend"?n.targetTouches[0]:n.changedTouches[0];c&&clientToLocal(a,c,n,r)}else{clientToLocal(a,n,n,r);var l=getWheelDeltaMayPolyfill(n);n.zrDelta=l?l/120:-(n.detail||0)/3}var u=n.button;return n.which==null&&u!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=u&1?1:u&2?3:u&4?2:0),n}function getWheelDeltaMayPolyfill(a){var n=a.wheelDelta;if(n)return n;var r=a.deltaX,o=a.deltaY;if(r==null||o==null)return n;var s=Math.abs(o!==0?o:r),l=o>0?-1:o<0?1:r>0?-1:1;return 3*s*l}function addEventListener(a,n,r,o){a.addEventListener(n,r,o)}function removeEventListener(a,n,r,o){a.removeEventListener(n,r,o)}var stop=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var GestureMgr=function(){function a(){this._track=[]}return a.prototype.recognize=function(n,r,o){return this._doTrack(n,r,o),this._recognize(n)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(n,r,o){var s=n.touches;if(s){for(var l={points:[],touches:[],target:r,event:n},c=0,u=s.length;c<u;c++){var d=s[c],f=clientToLocal(o,d,{});l.points.push([f.zrX,f.zrY]),l.touches.push(d)}this._track.push(l)}},a.prototype._recognize=function(n){for(var r in recognizers)if(recognizers.hasOwnProperty(r)){var o=recognizers[r](this._track,n);if(o)return o}},a}();function dist(a){var n=a[1][0]-a[0][0],r=a[1][1]-a[0][1];return Math.sqrt(n*n+r*r)}function center$1(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var recognizers={pinch:function(a,n){var r=a.length;if(r){var o=(a[r-1]||{}).points,s=(a[r-2]||{}).points||o;if(s&&s.length>1&&o&&o.length>1){var l=dist(o)/dist(s);!isFinite(l)&&(l=1),n.pinchScale=l;var c=center$1(o);return n.pinchX=c[0],n.pinchY=c[1],{type:"pinch",target:a[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function copy(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a}function mul(a,n,r){var o=n[0]*r[0]+n[2]*r[1],s=n[1]*r[0]+n[3]*r[1],l=n[0]*r[2]+n[2]*r[3],c=n[1]*r[2]+n[3]*r[3],u=n[0]*r[4]+n[2]*r[5]+n[4],d=n[1]*r[4]+n[3]*r[5]+n[5];return a[0]=o,a[1]=s,a[2]=l,a[3]=c,a[4]=u,a[5]=d,a}function translate(a,n,r){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4]+r[0],a[5]=n[5]+r[1],a}function rotate(a,n,r,o){o===void 0&&(o=[0,0]);var s=n[0],l=n[2],c=n[4],u=n[1],d=n[3],f=n[5],v=Math.sin(r),g=Math.cos(r);return a[0]=s*g+u*v,a[1]=-s*v+u*g,a[2]=l*g+d*v,a[3]=-l*v+g*d,a[4]=g*(c-o[0])+v*(f-o[1])+o[0],a[5]=g*(f-o[1])-v*(c-o[0])+o[1],a}function scale$1(a,n,r){var o=r[0],s=r[1];return a[0]=n[0]*o,a[1]=n[1]*s,a[2]=n[2]*o,a[3]=n[3]*s,a[4]=n[4]*o,a[5]=n[5]*s,a}function invert(a,n){var r=n[0],o=n[2],s=n[4],l=n[1],c=n[3],u=n[5],d=r*c-l*o;return d?(d=1/d,a[0]=c*d,a[1]=-l*d,a[2]=-o*d,a[3]=r*d,a[4]=(o*u-c*s)*d,a[5]=(l*s-r*u)*d,a):null}function clone$2(a){var n=create$1();return copy(n,a),n}var Point=function(){function a(n,r){this.x=n||0,this.y=r||0}return a.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(n,r){return this.x=n,this.y=r,this},a.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},a.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},a.prototype.scale=function(n){this.x*=n,this.y*=n},a.prototype.scaleAndAdd=function(n,r){this.x+=n.x*r,this.y+=n.y*r},a.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},a.prototype.dot=function(n){return this.x*n.x+this.y*n.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},a.prototype.distance=function(n){var r=this.x-n.x,o=this.y-n.y;return Math.sqrt(r*r+o*o)},a.prototype.distanceSquare=function(n){var r=this.x-n.x,o=this.y-n.y;return r*r+o*o},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(n){if(n){var r=this.x,o=this.y;return this.x=n[0]*r+n[2]*o+n[4],this.y=n[1]*r+n[3]*o+n[5],this}},a.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},a.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},a.set=function(n,r,o){n.x=r,n.y=o},a.copy=function(n,r){n.x=r.x,n.y=r.y},a.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},a.lenSquare=function(n){return n.x*n.x+n.y*n.y},a.dot=function(n,r){return n.x*r.x+n.y*r.y},a.add=function(n,r,o){n.x=r.x+o.x,n.y=r.y+o.y},a.sub=function(n,r,o){n.x=r.x-o.x,n.y=r.y-o.y},a.scale=function(n,r,o){n.x=r.x*o,n.y=r.y*o},a.scaleAndAdd=function(n,r,o,s){n.x=r.x+o.x*s,n.y=r.y+o.y*s},a.lerp=function(n,r,o,s){var l=1-s;n.x=l*r.x+s*o.x,n.y=l*r.y+s*o.y},a}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function a(n,r,o,s){o<0&&(n=n+o,o=-o),s<0&&(r=r+s,s=-s),this.x=n,this.y=r,this.width=o,this.height=s}return a.prototype.union=function(n){var r=mathMin$a(n.x,this.x),o=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-r:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-o:this.height=n.height,this.x=r,this.y=o},a.prototype.applyTransform=function(n){a.applyTransform(this,this,n)},a.prototype.calculateTransform=function(n){var r=this,o=n.width/r.width,s=n.height/r.height,l=create$1();return translate(l,l,[-r.x,-r.y]),scale$1(l,l,[o,s]),translate(l,l,[n.x,n.y]),l},a.prototype.intersect=function(n,r){if(!n)return!1;n instanceof a||(n=a.create(n));var o=this,s=o.x,l=o.x+o.width,c=o.y,u=o.y+o.height,d=n.x,f=n.x+n.width,v=n.y,g=n.y+n.height,y=!(l<d||f<s||u<v||g<c);if(r){var _=1/0,S=0,x=Math.abs(l-d),T=Math.abs(f-s),w=Math.abs(u-v),E=Math.abs(g-c),P=Math.min(x,T),D=Math.min(w,E);l<d||f<s?P>S&&(S=P,x<T?Point.set(maxTv$1,-x,0):Point.set(maxTv$1,T,0)):P<_&&(_=P,x<T?Point.set(minTv$1,x,0):Point.set(minTv$1,-T,0)),u<v||g<c?D>S&&(S=D,w<E?Point.set(maxTv$1,0,-w):Point.set(maxTv$1,0,E)):P<_&&(_=P,w<E?Point.set(minTv$1,0,w):Point.set(minTv$1,0,-E))}return r&&Point.copy(r,y?minTv$1:maxTv$1),y},a.prototype.contain=function(n,r){var o=this;return n>=o.x&&n<=o.x+o.width&&r>=o.y&&r<=o.y+o.height},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(n){a.copy(this,n)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(n){return new a(n.x,n.y,n.width,n.height)},a.copy=function(n,r){n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height},a.applyTransform=function(n,r,o){if(!o){n!==r&&a.copy(n,r);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var s=o[0],l=o[3],c=o[4],u=o[5];n.x=r.x*s+c,n.y=r.y*l+u,n.width=r.width*s,n.height=r.height*l,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=r.x,lt.y=rt.y=r.y,rb.x=rt.x=r.x+r.width,rb.y=lb.y=r.y+r.height,lt.transform(o),rt.transform(o),rb.transform(o),lb.transform(o),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var d=mathMax$a(lt.x,rb.x,lb.x,rt.x),f=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=d-n.x,n.height=f-n.y},a}(),SILENT="silent";function makeEventPacket(a,n,r){return{type:a,event:r,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.handler=null,r}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Eventful),HoveredResult=function(){function a(n,r){this.x=n,this.y=r}return a}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(a){__extends(n,a);function n(r,o,s,l,c){var u=a.call(this)||this;return u._hovered=new HoveredResult(0,0),u.storage=r,u.painter=o,u.painterRoot=l,u._pointerSize=c,s=s||new EmptyProxy,u.proxy=null,u.setHandlerProxy(s),u._draggingMgr=new Draggable(u),u}return n.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(each$f(handlerNames,function(o){r.on&&r.on(o,this[o],this)},this),r.handler=this),this.proxy=r},n.prototype.mousemove=function(r){var o=r.zrX,s=r.zrY,l=isOutsideBoundary(this,o,s),c=this._hovered,u=c.target;u&&!u.__zr&&(c=this.findHover(c.x,c.y),u=c.target);var d=this._hovered=l?new HoveredResult(o,s):this.findHover(o,s),f=d.target,v=this.proxy;v.setCursor&&v.setCursor(f?f.cursor:"default"),u&&f!==u&&this.dispatchToElement(c,"mouseout",r),this.dispatchToElement(d,"mousemove",r),f&&f!==u&&this.dispatchToElement(d,"mouseover",r)},n.prototype.mouseout=function(r){var o=r.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(r,o){var s=this[r];s&&s.call(this,o)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(r){var o=this.proxy;o.setCursor&&o.setCursor(r)},n.prototype.dispatchToElement=function(r,o,s){r=r||{};var l=r.target;if(!(l&&l.silent)){for(var c="on"+o,u=makeEventPacket(o,r,s);l&&(l[c]&&(u.cancelBubble=!!l[c].call(l,u)),l.trigger(o,u),l=l.__hostTarget?l.__hostTarget:l.parent,!u.cancelBubble););u.cancelBubble||(this.trigger(o,u),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(d){typeof d[c]=="function"&&d[c].call(d,u),d.trigger&&d.trigger(o,u)}))}},n.prototype.findHover=function(r,o,s){var l=this.storage.getDisplayList(),c=new HoveredResult(r,o);if(setHoverTarget(l,c,r,o,s),this._pointerSize&&!c.target){for(var u=[],d=this._pointerSize,f=d/2,v=new BoundingRect(r-f,o-f,d,d),g=l.length-1;g>=0;g--){var y=l[g];y!==s&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(y.getBoundingRect()),y.transform&&tmpRect$1.applyTransform(y.transform),tmpRect$1.intersect(v)&&u.push(y))}if(u.length)for(var _=4,S=Math.PI/12,x=Math.PI*2,T=0;T<f;T+=_)for(var w=0;w<x;w+=S){var E=r+T*Math.cos(w),P=o+T*Math.sin(w);if(setHoverTarget(u,c,E,P,s),c.target)return c}}return c},n.prototype.processGesture=function(r,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var s=this._gestureMgr;o==="start"&&s.clear();var l=s.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(o==="end"&&s.clear(),l){var c=l.type;r.gestureEvent=c;var u=new HoveredResult;u.target=l.target,this.dispatchToElement(u,c,l.event)}},n}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){Handler.prototype[a]=function(n){var r=n.zrX,o=n.zrY,s=isOutsideBoundary(this,r,o),l,c;if((a!=="mouseup"||!s)&&(l=this.findHover(r,o),c=l.target),a==="mousedown")this._downEl=c,this._downPoint=[n.zrX,n.zrY],this._upEl=c;else if(a==="mouseup")this._upEl=c;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(l,a,n)}});function isHover(a,n,r){if(a[a.rectHover?"rectContain":"contain"](n,r)){for(var o=a,s=void 0,l=!1;o;){if(o.ignoreClip&&(l=!0),!l){var c=o.getClipPath();if(c&&!c.contain(n,r))return!1}o.silent&&(s=!0);var u=o.__hostTarget;o=u||o.parent}return s?SILENT:!0}return!1}function setHoverTarget(a,n,r,o,s){for(var l=a.length-1;l>=0;l--){var c=a[l],u=void 0;if(c!==s&&!c.ignore&&(u=isHover(c,r,o))&&(!n.topTarget&&(n.topTarget=c),u!==SILENT)){n.target=c;break}}}function isOutsideBoundary(a,n,r){var o=a.painter;return n<0||n>o.getWidth()||r<0||r>o.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(a){for(var n=0;a>=DEFAULT_MIN_MERGE;)n|=a&1,a>>=1;return a+n}function makeAscendingRun(a,n,r,o){var s=n+1;if(s===r)return 1;if(o(a[s++],a[n])<0){for(;s<r&&o(a[s],a[s-1])<0;)s++;reverseRun(a,n,s)}else for(;s<r&&o(a[s],a[s-1])>=0;)s++;return s-n}function reverseRun(a,n,r){for(r--;n<r;){var o=a[n];a[n++]=a[r],a[r--]=o}}function binaryInsertionSort(a,n,r,o,s){for(o===n&&o++;o<r;o++){for(var l=a[o],c=n,u=o,d;c<u;)d=c+u>>>1,s(l,a[d])<0?u=d:c=d+1;var f=o-c;switch(f){case 3:a[c+3]=a[c+2];case 2:a[c+2]=a[c+1];case 1:a[c+1]=a[c];break;default:for(;f>0;)a[c+f]=a[c+f-1],f--}a[c]=l}}function gallopLeft(a,n,r,o,s,l){var c=0,u=0,d=1;if(l(a,n[r+s])>0){for(u=o-s;d<u&&l(a,n[r+s+d])>0;)c=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u),c+=s,d+=s}else{for(u=s+1;d<u&&l(a,n[r+s-d])<=0;)c=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u);var f=c;c=s-d,d=s-f}for(c++;c<d;){var v=c+(d-c>>>1);l(a,n[r+v])>0?c=v+1:d=v}return d}function gallopRight(a,n,r,o,s,l){var c=0,u=0,d=1;if(l(a,n[r+s])<0){for(u=s+1;d<u&&l(a,n[r+s-d])<0;)c=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u);var f=c;c=s-d,d=s-f}else{for(u=o-s;d<u&&l(a,n[r+s+d])>=0;)c=d,d=(d<<1)+1,d<=0&&(d=u);d>u&&(d=u),c+=s,d+=s}for(c++;c<d;){var v=c+(d-c>>>1);l(a,n[r+v])<0?d=v:c=v+1}return d}function TimSort(a,n){var r=DEFAULT_MIN_GALLOPING,o,s,l=0,c=[];o=[],s=[];function u(_,S){o[l]=_,s[l]=S,l+=1}function d(){for(;l>1;){var _=l-2;if(_>=1&&s[_-1]<=s[_]+s[_+1]||_>=2&&s[_-2]<=s[_]+s[_-1])s[_-1]<s[_+1]&&_--;else if(s[_]>s[_+1])break;v(_)}}function f(){for(;l>1;){var _=l-2;_>0&&s[_-1]<s[_+1]&&_--,v(_)}}function v(_){var S=o[_],x=s[_],T=o[_+1],w=s[_+1];s[_]=x+w,_===l-3&&(o[_+1]=o[_+2],s[_+1]=s[_+2]),l--;var E=gallopRight(a[T],a,S,x,0,n);S+=E,x-=E,x!==0&&(w=gallopLeft(a[S+x-1],a,T,w,w-1,n),w!==0&&(x<=w?g(S,x,T,w):y(S,x,T,w)))}function g(_,S,x,T){var w=0;for(w=0;w<S;w++)c[w]=a[_+w];var E=0,P=x,D=_;if(a[D++]=a[P++],--T===0){for(w=0;w<S;w++)a[D+w]=c[E+w];return}if(S===1){for(w=0;w<T;w++)a[D+w]=a[P+w];a[D+T]=c[E];return}for(var L=r,$,O,B;;){$=0,O=0,B=!1;do if(n(a[P],c[E])<0){if(a[D++]=a[P++],O++,$=0,--T===0){B=!0;break}}else if(a[D++]=c[E++],$++,O=0,--S===1){B=!0;break}while(($|O)<L);if(B)break;do{if($=gallopRight(a[P],c,E,S,0,n),$!==0){for(w=0;w<$;w++)a[D+w]=c[E+w];if(D+=$,E+=$,S-=$,S<=1){B=!0;break}}if(a[D++]=a[P++],--T===0){B=!0;break}if(O=gallopLeft(c[E],a,P,T,0,n),O!==0){for(w=0;w<O;w++)a[D+w]=a[P+w];if(D+=O,P+=O,T-=O,T===0){B=!0;break}}if(a[D++]=c[E++],--S===1){B=!0;break}L--}while($>=DEFAULT_MIN_GALLOPING||O>=DEFAULT_MIN_GALLOPING);if(B)break;L<0&&(L=0),L+=2}if(r=L,r<1&&(r=1),S===1){for(w=0;w<T;w++)a[D+w]=a[P+w];a[D+T]=c[E]}else{if(S===0)throw new Error;for(w=0;w<S;w++)a[D+w]=c[E+w]}}function y(_,S,x,T){var w=0;for(w=0;w<T;w++)c[w]=a[x+w];var E=_+S-1,P=T-1,D=x+T-1,L=0,$=0;if(a[D--]=a[E--],--S===0){for(L=D-(T-1),w=0;w<T;w++)a[L+w]=c[w];return}if(T===1){for(D-=S,E-=S,$=D+1,L=E+1,w=S-1;w>=0;w--)a[$+w]=a[L+w];a[D]=c[P];return}for(var O=r;;){var B=0,V=0,F=!1;do if(n(c[P],a[E])<0){if(a[D--]=a[E--],B++,V=0,--S===0){F=!0;break}}else if(a[D--]=c[P--],V++,B=0,--T===1){F=!0;break}while((B|V)<O);if(F)break;do{if(B=S-gallopRight(c[P],a,_,S,S-1,n),B!==0){for(D-=B,E-=B,S-=B,$=D+1,L=E+1,w=B-1;w>=0;w--)a[$+w]=a[L+w];if(S===0){F=!0;break}}if(a[D--]=c[P--],--T===1){F=!0;break}if(V=T-gallopLeft(a[E],c,0,T,T-1,n),V!==0){for(D-=V,P-=V,T-=V,$=D+1,L=P+1,w=0;w<V;w++)a[$+w]=c[L+w];if(T<=1){F=!0;break}}if(a[D--]=a[E--],--S===0){F=!0;break}O--}while(B>=DEFAULT_MIN_GALLOPING||V>=DEFAULT_MIN_GALLOPING);if(F)break;O<0&&(O=0),O+=2}if(r=O,r<1&&(r=1),T===1){for(D-=S,E-=S,$=D+1,L=E+1,w=S-1;w>=0;w--)a[$+w]=a[L+w];a[D]=c[P]}else{if(T===0)throw new Error;for(L=D-(T-1),w=0;w<T;w++)a[L+w]=c[w]}}return{mergeRuns:d,forceMergeRuns:f,pushRun:u}}function sort$2(a,n,r,o){r||(r=0),o||(o=a.length);var s=o-r;if(!(s<2)){var l=0;if(s<DEFAULT_MIN_MERGE){l=makeAscendingRun(a,r,o,n),binaryInsertionSort(a,r,o,r+l,n);return}var c=TimSort(a,n),u=minRunLength(s);do{if(l=makeAscendingRun(a,r,o,n),l<u){var d=s;d>u&&(d=u),binaryInsertionSort(a,r,r+d,r+l,n),l=d}c.pushRun(r,l),c.mergeRuns(),s-=l,r+=l}while(s!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,n){return a.zlevel===n.zlevel?a.z===n.z?a.z2-n.z2:a.z-n.z:a.zlevel-n.zlevel}var Storage=function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return a.prototype.traverse=function(n,r){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(n,r)},a.prototype.getDisplayList=function(n,r){r=r||!1;var o=this._displayList;return(n||!o.length)&&this.updateDisplayList(r),o},a.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var r=this._roots,o=this._displayList,s=0,l=r.length;s<l;s++)this._updateAndAddDisplayable(r[s],null,n);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},a.prototype._updateAndAddDisplayable=function(n,r,o){if(!(n.ignore&&!o)){n.beforeUpdate(),n.update(),n.afterUpdate();var s=n.getClipPath();if(n.ignoreClip)r=null;else if(s){r?r=r.slice():r=[];for(var l=s,c=n;l;)l.parent=c,l.updateTransform(),r.push(l),c=l,l=l.getClipPath()}if(n.childrenRef){for(var u=n.childrenRef(),d=0;d<u.length;d++){var f=u[d];n.__dirty&&(f.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(f,r,o)}n.__dirty=0}else{var v=n;r&&r.length?v.__clipPaths=r:v.__clipPaths&&v.__clipPaths.length>0&&(v.__clipPaths=[]),isNaN(v.z)&&(logInvalidZError(),v.z=0),isNaN(v.z2)&&(logInvalidZError(),v.z2=0),isNaN(v.zlevel)&&(logInvalidZError(),v.zlevel=0),this._displayList[this._displayListLen++]=v}var g=n.getDecalElement&&n.getDecalElement();g&&this._updateAndAddDisplayable(g,r,o);var y=n.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,o);var _=n.getTextContent();_&&this._updateAndAddDisplayable(_,r,o)}},a.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},a.prototype.delRoot=function(n){if(n instanceof Array){for(var r=0,o=n.length;r<o;r++)this.delRoot(n[r]);return}var s=indexOf(this._roots,n);s>=0&&this._roots.splice(s,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var easingFuncs={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)))},elasticOut:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*a)*Math.sin((a-n)*(2*Math.PI)/o)+1)},elasticInOut:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),(a*=2)<1?-.5*(r*Math.pow(2,10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)):r*Math.pow(2,-10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)*.5+1)},backIn:function(a){var n=1.70158;return a*a*((n+1)*a-n)},backOut:function(a){var n=1.70158;return--a*a*((n+1)*a+n)+1},backInOut:function(a){var n=2.5949095;return(a*=2)<1?.5*(a*a*((n+1)*a-n)):.5*((a-=2)*a*((n+1)*a+n)+2)},bounceIn:function(a){return 1-easingFuncs.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?easingFuncs.bounceIn(a*2)*.5:easingFuncs.bounceOut(a*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0$3=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(a){return a>-EPSILON$4&&a<EPSILON$4}function isNotAroundZero$1(a){return a>EPSILON$4||a<-EPSILON$4}function cubicAt(a,n,r,o,s){var l=1-s;return l*l*(l*a+3*s*n)+s*s*(s*o+3*l*r)}function cubicDerivativeAt(a,n,r,o,s){var l=1-s;return 3*(((n-a)*l+2*(r-n)*s)*l+(o-r)*s*s)}function cubicRootAt(a,n,r,o,s,l){var c=o+3*(n-r)-a,u=3*(r-n*2+a),d=3*(n-a),f=a-s,v=u*u-3*c*d,g=u*d-9*c*f,y=d*d-3*u*f,_=0;if(isAroundZero$1(v)&&isAroundZero$1(g))if(isAroundZero$1(u))l[0]=0;else{var S=-d/u;S>=0&&S<=1&&(l[_++]=S)}else{var x=g*g-4*v*y;if(isAroundZero$1(x)){var T=g/v,S=-u/c+T,w=-T/2;S>=0&&S<=1&&(l[_++]=S),w>=0&&w<=1&&(l[_++]=w)}else if(x>0){var E=mathSqrt$3(x),P=v*u+1.5*c*(-g+E),D=v*u+1.5*c*(-g-E);P<0?P=-mathPow$2(-P,ONE_THIRD):P=mathPow$2(P,ONE_THIRD),D<0?D=-mathPow$2(-D,ONE_THIRD):D=mathPow$2(D,ONE_THIRD);var S=(-u-(P+D))/(3*c);S>=0&&S<=1&&(l[_++]=S)}else{var L=(2*v*u-3*c*g)/(2*mathSqrt$3(v*v*v)),$=Math.acos(L)/3,O=mathSqrt$3(v),B=Math.cos($),S=(-u-2*O*B)/(3*c),w=(-u+O*(B+THREE_SQRT*Math.sin($)))/(3*c),V=(-u+O*(B-THREE_SQRT*Math.sin($)))/(3*c);S>=0&&S<=1&&(l[_++]=S),w>=0&&w<=1&&(l[_++]=w),V>=0&&V<=1&&(l[_++]=V)}}return _}function cubicExtrema(a,n,r,o,s){var l=6*r-12*n+6*a,c=9*n+3*o-3*a-9*r,u=3*n-3*a,d=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(l)){var f=-u/l;f>=0&&f<=1&&(s[d++]=f)}}else{var v=l*l-4*c*u;if(isAroundZero$1(v))s[0]=-l/(2*c);else if(v>0){var g=mathSqrt$3(v),f=(-l+g)/(2*c),y=(-l-g)/(2*c);f>=0&&f<=1&&(s[d++]=f),y>=0&&y<=1&&(s[d++]=y)}}return d}function cubicSubdivide(a,n,r,o,s,l){var c=(n-a)*s+a,u=(r-n)*s+n,d=(o-r)*s+r,f=(u-c)*s+c,v=(d-u)*s+u,g=(v-f)*s+f;l[0]=a,l[1]=c,l[2]=f,l[3]=g,l[4]=g,l[5]=v,l[6]=d,l[7]=o}function cubicProjectPoint(a,n,r,o,s,l,c,u,d,f,v){var g,y=.005,_=1/0,S,x,T,w;_v0$3[0]=d,_v0$3[1]=f;for(var E=0;E<1;E+=.05)_v1[0]=cubicAt(a,r,s,c,E),_v1[1]=cubicAt(n,o,l,u,E),T=distSquare(_v0$3,_v1),T<_&&(g=E,_=T);_=1/0;for(var P=0;P<32&&!(y<EPSILON_NUMERIC);P++)S=g-y,x=g+y,_v1[0]=cubicAt(a,r,s,c,S),_v1[1]=cubicAt(n,o,l,u,S),T=distSquare(_v1,_v0$3),S>=0&&T<_?(g=S,_=T):(_v2[0]=cubicAt(a,r,s,c,x),_v2[1]=cubicAt(n,o,l,u,x),w=distSquare(_v2,_v0$3),x<=1&&w<_?(g=x,_=w):y*=.5);return v&&(v[0]=cubicAt(a,r,s,c,g),v[1]=cubicAt(n,o,l,u,g)),mathSqrt$3(_)}function cubicLength(a,n,r,o,s,l,c,u,d){for(var f=a,v=n,g=0,y=1/d,_=1;_<=d;_++){var S=_*y,x=cubicAt(a,r,s,c,S),T=cubicAt(n,o,l,u,S),w=x-f,E=T-v;g+=Math.sqrt(w*w+E*E),f=x,v=T}return g}function quadraticAt$1(a,n,r,o){var s=1-o;return s*(s*a+2*o*n)+o*o*r}function quadraticDerivativeAt(a,n,r,o){return 2*((1-o)*(n-a)+o*(r-n))}function quadraticRootAt(a,n,r,o,s){var l=a-2*n+r,c=2*(n-a),u=a-o,d=0;if(isAroundZero$1(l)){if(isNotAroundZero$1(c)){var f=-u/c;f>=0&&f<=1&&(s[d++]=f)}}else{var v=c*c-4*l*u;if(isAroundZero$1(v)){var f=-c/(2*l);f>=0&&f<=1&&(s[d++]=f)}else if(v>0){var g=mathSqrt$3(v),f=(-c+g)/(2*l),y=(-c-g)/(2*l);f>=0&&f<=1&&(s[d++]=f),y>=0&&y<=1&&(s[d++]=y)}}return d}function quadraticExtremum(a,n,r){var o=a+r-2*n;return o===0?.5:(a-n)/o}function quadraticSubdivide(a,n,r,o,s){var l=(n-a)*o+a,c=(r-n)*o+n,u=(c-l)*o+l;s[0]=a,s[1]=l,s[2]=u,s[3]=u,s[4]=c,s[5]=r}function quadraticProjectPoint(a,n,r,o,s,l,c,u,d){var f,v=.005,g=1/0;_v0$3[0]=c,_v0$3[1]=u;for(var y=0;y<1;y+=.05){_v1[0]=quadraticAt$1(a,r,s,y),_v1[1]=quadraticAt$1(n,o,l,y);var _=distSquare(_v0$3,_v1);_<g&&(f=y,g=_)}g=1/0;for(var S=0;S<32&&!(v<EPSILON_NUMERIC);S++){var x=f-v,T=f+v;_v1[0]=quadraticAt$1(a,r,s,x),_v1[1]=quadraticAt$1(n,o,l,x);var _=distSquare(_v1,_v0$3);if(x>=0&&_<g)f=x,g=_;else{_v2[0]=quadraticAt$1(a,r,s,T),_v2[1]=quadraticAt$1(n,o,l,T);var w=distSquare(_v2,_v0$3);T<=1&&w<g?(f=T,g=w):v*=.5}}return d&&(d[0]=quadraticAt$1(a,r,s,f),d[1]=quadraticAt$1(n,o,l,f)),mathSqrt$3(g)}function quadraticLength(a,n,r,o,s,l,c){for(var u=a,d=n,f=0,v=1/c,g=1;g<=c;g++){var y=g*v,_=quadraticAt$1(a,r,s,y),S=quadraticAt$1(n,o,l,y),x=_-u,T=S-d;f+=Math.sqrt(x*x+T*T),u=_,d=S}return f}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(a){var n=a&&regexp.exec(a);if(n){var r=n[1].split(","),o=+trim$1(r[0]),s=+trim$1(r[1]),l=+trim$1(r[2]),c=+trim$1(r[3]);if(isNaN(o+s+l+c))return;var u=[];return function(d){return d<=0?0:d>=1?1:cubicRootAt(0,o,l,1,d,u)&&cubicAt(0,s,c,1,u[0])}}}var Clip=function(){function a(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return a.prototype.step=function(n,r){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var o=this._life,s=n-this._startTime-this._pausedTime,l=s/o;l<0&&(l=0),l=Math.min(l,1);var c=this.easingFunc,u=c?c(l):l;if(this.onframe(u),l===1)if(this.loop){var d=s%o;this._startTime=n-d,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},a}(),Entry=function(){function a(n){this.value=n}return a}(),LinkedList=function(){function a(){this._len=0}return a.prototype.insert=function(n){var r=new Entry(n);return this.insertEntry(r),r},a.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},a.prototype.remove=function(n){var r=n.prev,o=n.next;r?r.next=o:this.head=o,o?o.prev=r:this.tail=r,n.next=n.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a}(),LRU=function(){function a(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return a.prototype.put=function(n,r){var o=this._list,s=this._map,l=null;if(s[n]==null){var c=o.len(),u=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var d=o.head;o.remove(d),delete s[d.key],l=d.value,this._lastRemovedEntry=d}u?u.value=r:u=new Entry(r),u.key=n,o.insertEntry(u),s[n]=u}return l},a.prototype.get=function(n){var r=this._map[n],o=this._list;if(r!=null)return r!==o.tail&&(o.remove(r),o.insertEntry(r)),r.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(a){return a=Math.round(a),a<0?0:a>255?255:a}function clampCssAngle(a){return a=Math.round(a),a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){var n=a;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(a){var n=a;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(a,n,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?a+(n-a)*r*6:r*2<1?n:r*3<2?a+(n-a)*(2/3-r)*6:a}function lerpNumber(a,n,r){return a+(n-a)*r}function setRgba(a,n,r,o,s){return a[0]=n,a[1]=r,a[2]=o,a[3]=s,a}function copyRgba(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(a,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(a,lastRemovedArr||n.slice())}function parse(a,n){if(a){n=n||[];var r=colorCache.get(a);if(r)return copyRgba(n,r);a=a+"";var o=a.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(n,kCSSColorTable[o]),putToCache(a,n),n;var s=o.length;if(o.charAt(0)==="#"){if(s===4||s===5){var l=parseInt(o.slice(1,4),16);if(!(l>=0&&l<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(l&3840)>>4|(l&3840)>>8,l&240|(l&240)>>4,l&15|(l&15)<<4,s===5?parseInt(o.slice(4),16)/15:1),putToCache(a,n),n}else if(s===7||s===9){var l=parseInt(o.slice(1,7),16);if(!(l>=0&&l<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(l&16711680)>>16,(l&65280)>>8,l&255,s===9?parseInt(o.slice(7),16)/255:1),putToCache(a,n),n}return}var c=o.indexOf("("),u=o.indexOf(")");if(c!==-1&&u+1===s){var d=o.substr(0,c),f=o.substr(c+1,u-(c+1)).split(","),v=1;switch(d){case"rgba":if(f.length!==4)return f.length===3?setRgba(n,+f[0],+f[1],+f[2],1):setRgba(n,0,0,0,1);v=parseCssFloat(f.pop());case"rgb":if(f.length>=3)return setRgba(n,parseCssInt(f[0]),parseCssInt(f[1]),parseCssInt(f[2]),f.length===3?v:parseCssFloat(f[3])),putToCache(a,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(f.length!==4){setRgba(n,0,0,0,1);return}return f[3]=parseCssFloat(f[3]),hsla2rgba(f,n),putToCache(a,n),n;case"hsl":if(f.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(f,n),putToCache(a,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(a,n){var r=(parseFloat(a[0])%360+360)%360/360,o=parseCssFloat(a[1]),s=parseCssFloat(a[2]),l=s<=.5?s*(o+1):s+o-s*o,c=s*2-l;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(c,l,r+1/3)*255),clampCssByte(cssHueToRgb(c,l,r)*255),clampCssByte(cssHueToRgb(c,l,r-1/3)*255),1),a.length===4&&(n[3]=a[3]),n}function rgba2hsla(a){if(a){var n=a[0]/255,r=a[1]/255,o=a[2]/255,s=Math.min(n,r,o),l=Math.max(n,r,o),c=l-s,u=(l+s)/2,d,f;if(c===0)d=0,f=0;else{u<.5?f=c/(l+s):f=c/(2-l-s);var v=((l-n)/6+c/2)/c,g=((l-r)/6+c/2)/c,y=((l-o)/6+c/2)/c;n===l?d=y-g:r===l?d=1/3+v-y:o===l&&(d=2/3+g-v),d<0&&(d+=1),d>1&&(d-=1)}var _=[d*360,f,u];return a[3]!=null&&_.push(a[3]),_}}function lift(a,n){var r=parse(a);if(r){for(var o=0;o<3;o++)n<0?r[o]=r[o]*(1-n)|0:r[o]=(255-r[o])*n+r[o]|0,r[o]>255?r[o]=255:r[o]<0&&(r[o]=0);return stringify(r,r.length===4?"rgba":"rgb")}}function fastLerp(a,n,r){if(!(!(n&&n.length)||!(a>=0&&a<=1))){r=r||[];var o=a*(n.length-1),s=Math.floor(o),l=Math.ceil(o),c=n[s],u=n[l],d=o-s;return r[0]=clampCssByte(lerpNumber(c[0],u[0],d)),r[1]=clampCssByte(lerpNumber(c[1],u[1],d)),r[2]=clampCssByte(lerpNumber(c[2],u[2],d)),r[3]=clampCssFloat(lerpNumber(c[3],u[3],d)),r}}function lerp$1(a,n,r){if(!(!(n&&n.length)||!(a>=0&&a<=1))){var o=a*(n.length-1),s=Math.floor(o),l=Math.ceil(o),c=parse(n[s]),u=parse(n[l]),d=o-s,f=stringify([clampCssByte(lerpNumber(c[0],u[0],d)),clampCssByte(lerpNumber(c[1],u[1],d)),clampCssByte(lerpNumber(c[2],u[2],d)),clampCssFloat(lerpNumber(c[3],u[3],d))],"rgba");return r?{color:f,leftIndex:s,rightIndex:l,value:o}:f}}function modifyHSL(a,n,r,o){var s=parse(a);if(a)return s=rgba2hsla(s),n!=null&&(s[0]=clampCssAngle(n)),r!=null&&(s[1]=parseCssFloat(r)),o!=null&&(s[2]=parseCssFloat(o)),stringify(hsla2rgba(s),"rgba")}function modifyAlpha(a,n){var r=parse(a);if(r&&n!=null)return r[3]=clampCssFloat(n),stringify(r,"rgba")}function stringify(a,n){if(!(!a||!a.length)){var r=a[0]+","+a[1]+","+a[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(r+=","+a[3]),n+"("+r+")"}}function lum(a,n){var r=parse(a);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*n:0}var liftedColorCache=new LRU(100);function liftColor(a){if(isString(a)){var n=liftedColorCache.get(a);return n||(n=lift(a,-.1),liftedColorCache.put(a,n)),n}else if(isGradientObject(a)){var r=extend({},a);return r.colorStops=map$1(a.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),r}return a}var mathRound$1=Math.round;function normalizeColor(a){var n;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var r=parse(a);r&&(a="rgb("+r[0]+","+r[1]+","+r[2]+")",n=r[3])}return{color:a,opacity:n??1}}var EPSILON$3=1e-4;function isAroundZero(a){return a<EPSILON$3&&a>-EPSILON$3}function round3(a){return mathRound$1(a*1e3)/1e3}function round4(a){return mathRound$1(a*1e4)/1e4}function getMatrixStr(a){return"matrix("+round3(a[0])+","+round3(a[1])+","+round3(a[2])+","+round3(a[3])+","+round4(a[4])+","+round4(a[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(a,n,r){return r==="top"?a+=n/2:r==="bottom"&&(a-=n/2),a}function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function getShadowKey(a){var n=a.style,r=a.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function isImagePattern(a){return a&&!!a.image}function isSVGPattern(a){return a&&!!a.svgElement}function isPattern(a){return isImagePattern(a)||isSVGPattern(a)}function isLinearGradient(a){return a.type==="linear"}function isRadialGradient(a){return a.type==="radial"}function isGradient(a){return a&&(a.type==="linear"||a.type==="radial")}function getIdURL(a){return"url(#"+a+")"}function getPathPrecision(a){var n=a.getGlobalScale(),r=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function getSRTTransformString(a){var n=a.x||0,r=a.y||0,o=(a.rotation||0)*RADIAN_TO_DEGREE,s=retrieve2(a.scaleX,1),l=retrieve2(a.scaleY,1),c=a.skewX||0,u=a.skewY||0,d=[];return(n||r)&&d.push("translate("+n+"px,"+r+"px)"),o&&d.push("rotate("+o+")"),(s!==1||l!==1)&&d.push("scale("+s+","+l+")"),(c||u)&&d.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(u*RADIAN_TO_DEGREE)+"deg)"),d.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(a,n,r){return(n-a)*r+a}function interpolate1DArray(a,n,r,o){for(var s=n.length,l=0;l<s;l++)a[l]=interpolateNumber$1(n[l],r[l],o);return a}function interpolate2DArray(a,n,r,o){for(var s=n.length,l=s&&n[0].length,c=0;c<s;c++){a[c]||(a[c]=[]);for(var u=0;u<l;u++)a[c][u]=interpolateNumber$1(n[c][u],r[c][u],o)}return a}function add1DArray(a,n,r,o){for(var s=n.length,l=0;l<s;l++)a[l]=n[l]+r[l]*o;return a}function add2DArray(a,n,r,o){for(var s=n.length,l=s&&n[0].length,c=0;c<s;c++){a[c]||(a[c]=[]);for(var u=0;u<l;u++)a[c][u]=n[c][u]+r[c][u]*o}return a}function fillColorStops(a,n){for(var r=a.length,o=n.length,s=r>o?n:a,l=Math.min(r,o),c=s[l-1]||{color:[0,0,0,0],offset:0},u=l;u<Math.max(r,o);u++)s.push({offset:c.offset,color:c.color.slice()})}function fillArray(a,n,r){var o=a,s=n;if(!(!o.push||!s.push)){var l=o.length,c=s.length;if(l!==c){var u=l>c;if(u)o.length=c;else for(var d=l;d<c;d++)o.push(r===1?s[d]:arraySlice.call(s[d]))}for(var f=o[0]&&o[0].length,d=0;d<o.length;d++)if(r===1)isNaN(o[d])&&(o[d]=s[d]);else for(var v=0;v<f;v++)isNaN(o[d][v])&&(o[d][v]=s[d][v])}}function cloneValue(a){if(isArrayLike(a)){var n=a.length;if(isArrayLike(a[0])){for(var r=[],o=0;o<n;o++)r.push(arraySlice.call(a[o]));return r}return arraySlice.call(a)}return a}function rgba2String(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function guessArrayDim(a){return isArrayLike(a&&a[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(a){return a===VALUE_TYPE_LINEAR_GRADIENT||a===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(a){return a===VALUE_TYPE_1D_ARRAY||a===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function a(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(n,r,o){this._needsSort=!0;var s=this.keyframes,l=s.length,c=!1,u=VALUE_TYPE_UNKOWN,d=r;if(isArrayLike(r)){var f=guessArrayDim(r);u=f,(f===1&&!isNumber(r[0])||f===2&&!isNumber(r[0][0]))&&(c=!0)}else if(isNumber(r)&&!eqNaN(r))u=VALUE_TYPE_NUMBER;else if(isString(r))if(!isNaN(+r))u=VALUE_TYPE_NUMBER;else{var v=parse(r);v&&(d=v,u=VALUE_TYPE_COLOR)}else if(isGradientObject(r)){var g=extend({},d);g.colorStops=map$1(r.colorStops,function(_){return{offset:_.offset,color:parse(_.color)}}),isLinearGradient(r)?u=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(r)&&(u=VALUE_TYPE_RADIAL_GRADIENT),d=g}l===0?this.valType=u:(u!==this.valType||u===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var y={time:n,value:d,rawValue:r,percent:0};return o&&(y.easing=o,y.easingFunc=isFunction(o)?o:easingFuncs[o]||createCubicEasingFunc(o)),s.push(y),y},a.prototype.prepare=function(n,r){var o=this.keyframes;this._needsSort&&o.sort(function(x,T){return x.time-T.time});for(var s=this.valType,l=o.length,c=o[l-1],u=this.discrete,d=isArrayValueType(s),f=isGradientValueType(s),v=0;v<l;v++){var g=o[v],y=g.value,_=c.value;g.percent=g.time/n,u||(d&&v!==l-1?fillArray(y,_,s):f&&fillColorStops(y.colorStops,_.colorStops))}if(!u&&s!==VALUE_TYPE_RADIAL_GRADIENT&&r&&this.needsAnimate()&&r.needsAnimate()&&s===r.valType&&!r._finished){this._additiveTrack=r;for(var S=o[0].value,v=0;v<l;v++)s===VALUE_TYPE_NUMBER?o[v].additiveValue=o[v].value-S:s===VALUE_TYPE_COLOR?o[v].additiveValue=add1DArray([],o[v].value,S,-1):isArrayValueType(s)&&(o[v].additiveValue=s===VALUE_TYPE_1D_ARRAY?add1DArray([],o[v].value,S,-1):add2DArray([],o[v].value,S,-1))}},a.prototype.step=function(n,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,s=o?"additiveValue":"value",l=this.valType,c=this.keyframes,u=c.length,d=this.propName,f=l===VALUE_TYPE_COLOR,v,g=this._lastFr,y=Math.min,_,S;if(u===1)_=S=c[0];else{if(r<0)v=0;else if(r<this._lastFrP){var x=y(g+1,u-1);for(v=x;v>=0&&!(c[v].percent<=r);v--);v=y(v,u-2)}else{for(v=g;v<u&&!(c[v].percent>r);v++);v=y(v-1,u-2)}S=c[v+1],_=c[v]}if(_&&S){this._lastFr=v,this._lastFrP=r;var T=S.percent-_.percent,w=T===0?1:y((r-_.percent)/T,1);S.easingFunc&&(w=S.easingFunc(w));var E=o?this._additiveValue:f?tmpRgba:n[d];if((isArrayValueType(l)||f)&&!E&&(E=this._additiveValue=[]),this.discrete)n[d]=w<1?_.rawValue:S.rawValue;else if(isArrayValueType(l))l===VALUE_TYPE_1D_ARRAY?interpolate1DArray(E,_[s],S[s],w):interpolate2DArray(E,_[s],S[s],w);else if(isGradientValueType(l)){var P=_[s],D=S[s],L=l===VALUE_TYPE_LINEAR_GRADIENT;n[d]={type:L?"linear":"radial",x:interpolateNumber$1(P.x,D.x,w),y:interpolateNumber$1(P.y,D.y,w),colorStops:map$1(P.colorStops,function(O,B){var V=D.colorStops[B];return{offset:interpolateNumber$1(O.offset,V.offset,w),color:rgba2String(interpolate1DArray([],O.color,V.color,w))}}),global:D.global},L?(n[d].x2=interpolateNumber$1(P.x2,D.x2,w),n[d].y2=interpolateNumber$1(P.y2,D.y2,w)):n[d].r=interpolateNumber$1(P.r,D.r,w)}else if(f)interpolate1DArray(E,_[s],S[s],w),o||(n[d]=rgba2String(E));else{var $=interpolateNumber$1(_[s],S[s],w);o?this._additiveValue=$:n[d]=$}o&&this._addToTarget(n)}}},a.prototype._addToTarget=function(n){var r=this.valType,o=this.propName,s=this._additiveValue;r===VALUE_TYPE_NUMBER?n[o]=n[o]+s:r===VALUE_TYPE_COLOR?(parse(n[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,s,1),n[o]=rgba2String(tmpRgba)):r===VALUE_TYPE_1D_ARRAY?add1DArray(n[o],n[o],s,1):r===VALUE_TYPE_2D_ARRAY&&add2DArray(n[o],n[o],s,1)},a}(),Animator=function(){function a(n,r,o,s){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=r,r&&s){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=s,this._allowDiscrete=o}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(n){this._target=n},a.prototype.when=function(n,r,o){return this.whenWithKeys(n,r,keys(r),o)},a.prototype.whenWithKeys=function(n,r,o,s){for(var l=this._tracks,c=0;c<o.length;c++){var u=o[c],d=l[u];if(!d){d=l[u]=new Track(u);var f=void 0,v=this._getAdditiveTrack(u);if(v){var g=v.keyframes,y=g[g.length-1];f=y&&y.value,v.valType===VALUE_TYPE_COLOR&&f&&(f=rgba2String(f))}else f=this._target[u];if(f==null)continue;n>0&&d.addKeyframe(0,cloneValue(f),s),this._trackKeys.push(u)}d.addKeyframe(n,cloneValue(r[u]),s)}return this._maxTime=Math.max(this._maxTime,n),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var r=n.length,o=0;o<r;o++)n[o].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,r=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,r)for(var o=0;o<r.length;o++)r[o].call(this)},a.prototype._setTracksFinished=function(){for(var n=this._tracks,r=this._trackKeys,o=0;o<r.length;o++)n[r[o]].setFinished()},a.prototype._getAdditiveTrack=function(n){var r,o=this._additiveAnimators;if(o)for(var s=0;s<o.length;s++){var l=o[s].getTrack(n);l&&(r=l)}return r},a.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var r=this,o=[],s=this._maxTime||0,l=0;l<this._trackKeys.length;l++){var c=this._trackKeys[l],u=this._tracks[c],d=this._getAdditiveTrack(c),f=u.keyframes,v=f.length;if(u.prepare(s,d),u.needsAnimate())if(!this._allowDiscrete&&u.discrete){var g=f[v-1];g&&(r._target[u.propName]=g.rawValue),u.setFinished()}else o.push(u)}if(o.length||this._force){var y=new Clip({life:s,loop:this._loop,delay:this._delay||0,onframe:function(_){r._started=2;var S=r._additiveAnimators;if(S){for(var x=!1,T=0;T<S.length;T++)if(S[T]._clip){x=!0;break}x||(r._additiveAnimators=null)}for(var T=0;T<o.length;T++)o[T].step(r._target,_);var w=r._onframeCbs;if(w)for(var T=0;T<w.length;T++)w[T](r._target,_)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),n&&y.setEasing(n)}else this._doneCallback();return this}},a.prototype.stop=function(n){if(this._clip){var r=this._clip;n&&r.onframe(1),this._abortedCallback()}},a.prototype.delay=function(n){return this._delay=n,this},a.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},a.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},a.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(n){return this._tracks[n]},a.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(r){return n._tracks[r]})},a.prototype.stopTracks=function(n,r){if(!n.length||!this._clip)return!0;for(var o=this._tracks,s=this._trackKeys,l=0;l<n.length;l++){var c=o[n[l]];c&&!c.isFinished()&&(r?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var u=!0,l=0;l<s.length;l++)if(!o[s[l]].isFinished()){u=!1;break}return u&&this._abortedCallback(),u},a.prototype.saveTo=function(n,r,o){if(n){r=r||this._trackKeys;for(var s=0;s<r.length;s++){var l=r[s],c=this._tracks[l];if(!(!c||c.isFinished())){var u=c.keyframes,d=u[o?0:u.length-1];d&&(n[l]=cloneValue(d.rawValue))}}}},a.prototype.__changeFinalValue=function(n,r){r=r||keys(n);for(var o=0;o<r.length;o++){var s=r[o],l=this._tracks[s];if(l){var c=l.keyframes;if(c.length>1){var u=c.pop();l.addKeyframe(u.time,n[s]),l.prepare(this._maxTime,l.getAdditiveTrack())}}}},a}();function getTime(){return new Date().getTime()}var Animation=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,r=r||{},o.stage=r.stage||{},o}return n.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},n.prototype.addAnimator=function(r){r.animation=this;var o=r.getClip();o&&this.addClip(o)},n.prototype.removeClip=function(r){if(r.animation){var o=r.prev,s=r.next;o?o.next=s:this._head=s,s?s.prev=o:this._tail=o,r.next=r.prev=r.animation=null}},n.prototype.removeAnimator=function(r){var o=r.getClip();o&&this.removeClip(o),r.animation=null},n.prototype.update=function(r){for(var o=getTime()-this._pausedTime,s=o-this._time,l=this._head;l;){var c=l.next,u=l.step(o,s);u&&(l.ondestroy(),this.removeClip(l)),l=c}this._time=o,r||(this.trigger("frame",s),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var r=this;this._running=!0;function o(){r._running&&(requestAnimationFrame$1(o),!r._paused&&r.update())}requestAnimationFrame$1(o)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var r=this._head;r;){var o=r.next;r.prev=r.next=r.animation=null,r=o}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(r,o){o=o||{},this.start();var s=new Animator(r,o.loop);return this.addAnimator(s),s},n}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(a,function(s){var l=s.replace("mouse","pointer");return r.hasOwnProperty(l)?l:s});return{mouse:a,touch:n,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(a){var n=a.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function markTouch(a){a&&(a.zrByTouch=!0)}function normalizeGlobalEvent(a,n){return normalizeEvent(a.dom,new FakeGlobalEvent(a,n),!0)}function isLocalEl(a,n){for(var r=n,o=!1;r&&r.nodeType!==9&&!(o=r.domBelongToZr||r!==n&&r===a.painterRoot);)r=r.parentNode;return o}var FakeGlobalEvent=function(){function a(n,r){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=r.type,this.target=this.currentTarget=n.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return a}(),localDOMHandlers={mousedown:function(a){a=normalizeEvent(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=normalizeEvent(this.dom,a);var n=this.__mayPointerCapture;n&&(a.zrX!==n[0]||a.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=normalizeEvent(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=normalizeEvent(this.dom,a);var n=a.toElement||a.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){wheelEventSupported=!0,a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){wheelEventSupported||(a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),localDOMHandlers.mousemove.call(this,a),localDOMHandlers.mousedown.call(this,a)},touchmove:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"change"),localDOMHandlers.mousemove.call(this,a)},touchend:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"end"),localDOMHandlers.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,a)},pointerdown:function(a){localDOMHandlers.mousedown.call(this,a)},pointermove:function(a){isPointerFromTouch(a)||localDOMHandlers.mousemove.call(this,a)},pointerup:function(a){localDOMHandlers.mouseup.call(this,a)},pointerout:function(a){isPointerFromTouch(a)||localDOMHandlers.mouseout.call(this,a)}};each$f(["click","dblclick","contextmenu"],function(a){localDOMHandlers[a]=function(n){n=normalizeEvent(this.dom,n),this.trigger(a,n)}});var globalDOMHandlers={pointermove:function(a){isPointerFromTouch(a)||globalDOMHandlers.mousemove.call(this,a)},pointerup:function(a){globalDOMHandlers.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),n&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function mountLocalDOMEventListeners(a,n){var r=n.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(n,o,function(s){r[o].call(a,s)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(n,o,function(s){r[o].call(a,s),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(n,o,function(s){s=getNativeEvent(s),n.touching||r[o].call(a,s)})}))}function mountGlobalDOMEventListeners(a,n){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,r):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,r);function r(o){function s(l){l=getNativeEvent(l),isLocalEl(a,l.target)||(l=normalizeGlobalEvent(a,l),n.domHandlers[o].call(a,l))}mountSingleDOMEventListener(n,o,s,{capture:!0})}}function mountSingleDOMEventListener(a,n,r,o){a.mounted[n]=r,a.listenerOpts[n]=o,addEventListener(a.domTarget,n,r,o)}function unmountDOMEventListeners(a){var n=a.mounted;for(var r in n)n.hasOwnProperty(r)&&removeEventListener(a.domTarget,r,n[r],a.listenerOpts[r]);a.mounted={}}var DOMHandlerScope=function(){function a(n,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=r}return a}(),HandlerDomProxy=function(a){__extends(n,a);function n(r,o){var s=a.call(this)||this;return s.__pointerCapturing=!1,s.dom=r,s.painterRoot=o,s._localHandlerScope=new DOMHandlerScope(r,localDOMHandlers),globalEventSupported&&(s._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(s,s._localHandlerScope),s}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},n.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var o=this._globalHandlerScope;r?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},n}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(a){return a>EPSILON$2||a<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function a(){}return a.prototype.getLocalTransform=function(n){return a.getLocalTransform(this,n)},a.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},a.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},a.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},a.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},a.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},a.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,r=this.needLocalTransform(),o=this.transform;if(!(r||n)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),r?this.getLocalTransform(o):mIdentity(o),n&&(r?mul(o,n,o):copy(o,n)),this.transform=o,this._resolveGlobalScaleRatio(o)},a.prototype._resolveGlobalScaleRatio=function(n){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,s=scaleTmp[1]<0?-1:1,l=((scaleTmp[0]-o)*r+o)/scaleTmp[0]||0,c=((scaleTmp[1]-s)*r+s)/scaleTmp[1]||0;n[0]*=l,n[1]*=l,n[2]*=c,n[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},a.prototype.getComputedTransform=function(){for(var n=this,r=[];n;)r.push(n),n=n.parent;for(;n=r.pop();)n.updateTransform();return this.transform},a.prototype.setLocalTransform=function(n){if(n){var r=n[0]*n[0]+n[1]*n[1],o=n[2]*n[2]+n[3]*n[3],s=Math.atan2(n[1],n[0]),l=Math.PI/2+s-Math.atan2(n[3],n[2]);o=Math.sqrt(o)*Math.cos(l),r=Math.sqrt(r),this.skewX=l,this.skewY=0,this.rotation=-s,this.x=+n[4],this.y=+n[5],this.scaleX=r,this.scaleY=o,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,r=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,r),r=tmpTransform);var o=this.originX,s=this.originY;(o||s)&&(originTransform[4]=o,originTransform[5]=s,mul(tmpTransform,r,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=s,r=tmpTransform),this.setLocalTransform(r)}},a.prototype.getGlobalScale=function(n){var r=this.transform;return n=n||[],r?(n[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(n[0]=-n[0]),r[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},a.prototype.transformCoordToLocal=function(n,r){var o=[n,r],s=this.invTransform;return s&&applyTransform$1(o,o,s),o},a.prototype.transformCoordToGlobal=function(n,r){var o=[n,r],s=this.transform;return s&&applyTransform$1(o,o,s),o},a.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},a.prototype.copyTransform=function(n){copyTransform(this,n)},a.getLocalTransform=function(n,r){r=r||[];var o=n.originX||0,s=n.originY||0,l=n.scaleX,c=n.scaleY,u=n.anchorX,d=n.anchorY,f=n.rotation||0,v=n.x,g=n.y,y=n.skewX?Math.tan(n.skewX):0,_=n.skewY?Math.tan(-n.skewY):0;if(o||s||u||d){var S=o+u,x=s+d;r[4]=-S*l-y*x*c,r[5]=-x*c-_*S*l}else r[4]=r[5]=0;return r[0]=l,r[3]=c,r[1]=_*l,r[2]=y*c,f&&rotate(r,r,f),r[4]+=o+v,r[5]+=s+g,r},a.initDefaultProps=function(){var n=a.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),a}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(a,n){for(var r=0;r<TRANSFORMABLE_PROPS.length;r++){var o=TRANSFORMABLE_PROPS[r];a[o]=n[o]}}var textWidthCache={};function getWidth(a,n){n=n||DEFAULT_FONT;var r=textWidthCache[n];r||(r=textWidthCache[n]=new LRU(500));var o=r.get(a);return o==null&&(o=platformApi.measureText(a,n).width,r.put(a,o)),o}function innerGetBoundingRect(a,n,r,o){var s=getWidth(a,n),l=getLineHeight(n),c=adjustTextX(0,s,r),u=adjustTextY(0,l,o),d=new BoundingRect(c,u,s,l);return d}function getBoundingRect(a,n,r,o){var s=((a||"")+"").split(`
`),l=s.length;if(l===1)return innerGetBoundingRect(s[0],n,r,o);for(var c=new BoundingRect(0,0,0,0),u=0;u<s.length;u++){var d=innerGetBoundingRect(s[u],n,r,o);u===0?c.copy(d):c.union(d)}return c}function adjustTextX(a,n,r){return r==="right"?a-=n:r==="center"&&(a-=n/2),a}function adjustTextY(a,n,r){return r==="middle"?a-=n/2:r==="bottom"&&(a-=n),a}function getLineHeight(a){return getWidth("国",a)}function parsePercent$1(a,n){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*n:parseFloat(a):a}function calculateTextPosition(a,n,r){var o=n.position||"inside",s=n.distance!=null?n.distance:5,l=r.height,c=r.width,u=l/2,d=r.x,f=r.y,v="left",g="top";if(o instanceof Array)d+=parsePercent$1(o[0],r.width),f+=parsePercent$1(o[1],r.height),v=null,g=null;else switch(o){case"left":d-=s,f+=u,v="right",g="middle";break;case"right":d+=s+c,f+=u,g="middle";break;case"top":d+=c/2,f-=s,v="center",g="bottom";break;case"bottom":d+=c/2,f+=l+s,v="center";break;case"inside":d+=c/2,f+=u,v="center",g="middle";break;case"insideLeft":d+=s,f+=u,g="middle";break;case"insideRight":d+=c-s,f+=u,v="right",g="middle";break;case"insideTop":d+=c/2,f+=s,v="center";break;case"insideBottom":d+=c/2,f+=l-s,v="center",g="bottom";break;case"insideTopLeft":d+=s,f+=s;break;case"insideTopRight":d+=c-s,f+=s,v="right";break;case"insideBottomLeft":d+=s,f+=l-s,g="bottom";break;case"insideBottomRight":d+=c-s,f+=l-s,v="right",g="bottom";break}return a=a||{},a.x=d,a.y=f,a.align=v,a.verticalAlign=g,a}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(a,n){return a[n]=!0,a},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function a(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return a.prototype._init=function(n){this.attr(n)},a.prototype.drift=function(n,r,o){switch(this.draggable){case"horizontal":r=0;break;case"vertical":n=0;break}var s=this.transform;s||(s=this.transform=[1,0,0,1,0,0]),s[4]+=n,s[5]+=r,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(n){var r=this._textContent;if(r&&(!r.ignore||n)){this.textConfig||(this.textConfig={});var o=this.textConfig,s=o.local,l=r.innerTransformable,c=void 0,u=void 0,d=!1;l.parent=s?this:null;var f=!1;if(l.copyTransform(r),o.position!=null){var v=tmpBoundingRect;o.layoutRect?v.copy(o.layoutRect):v.copy(this.getBoundingRect()),s||v.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,v):calculateTextPosition(tmpTextPosCalcRes,o,v),l.x=tmpTextPosCalcRes.x,l.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,u=tmpTextPosCalcRes.verticalAlign;var g=o.origin;if(g&&o.rotation!=null){var y=void 0,_=void 0;g==="center"?(y=v.width*.5,_=v.height*.5):(y=parsePercent$1(g[0],v.width),_=parsePercent$1(g[1],v.height)),f=!0,l.originX=-l.x+y+(s?0:v.x),l.originY=-l.y+_+(s?0:v.y)}}o.rotation!=null&&(l.rotation=o.rotation);var S=o.offset;S&&(l.x+=S[0],l.y+=S[1],f||(l.originX=-S[0],l.originY=-S[1]));var x=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,T=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),w=void 0,E=void 0,P=void 0;x&&this.canBeInsideText()?(w=o.insideFill,E=o.insideStroke,(w==null||w==="auto")&&(w=this.getInsideTextFill()),(E==null||E==="auto")&&(E=this.getInsideTextStroke(w),P=!0)):(w=o.outsideFill,E=o.outsideStroke,(w==null||w==="auto")&&(w=this.getOutsideFill()),(E==null||E==="auto")&&(E=this.getOutsideStroke(w),P=!0)),w=w||"#000",(w!==T.fill||E!==T.stroke||P!==T.autoStroke||c!==T.align||u!==T.verticalAlign)&&(d=!0,T.fill=w,T.stroke=E,T.autoStroke=P,T.align=c,T.verticalAlign=u,r.setDefaultTextStyle(T)),r.__dirty|=REDRAW_BIT,d&&r.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(n){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},a.prototype.getOutsideStroke=function(n){var r=this.__zr&&this.__zr.getBackgroundColor(),o=typeof r=="string"&&parse(r);o||(o=[255,255,255,1]);for(var s=o[3],l=this.__zr.isDarkMode(),c=0;c<3;c++)o[c]=o[c]*s+(l?0:255)*(1-s);return o[3]=1,stringify(o,"rgba")},a.prototype.traverse=function(n,r){},a.prototype.attrKV=function(n,r){n==="textConfig"?this.setTextConfig(r):n==="textContent"?this.setTextContent(r):n==="clipPath"?this.setClipPath(r):n==="extra"?(this.extra=this.extra||{},extend(this.extra,r)):this[n]=r},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(n,r){if(typeof n=="string")this.attrKV(n,r);else if(isObject$3(n))for(var o=n,s=keys(o),l=0;l<s.length;l++){var c=s[l];this.attrKV(c,n[c])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var r=this._normalState,o=0;o<this.animators.length;o++){var s=this.animators[o],l=s.__fromStateTransition;if(!(s.getLoop()||l&&l!==PRESERVED_NORMAL_STATE)){var c=s.targetName,u=c?r[c]:r;s.saveTo(u)}}},a.prototype._innerSaveToNormal=function(n){var r=this._normalState;r||(r=this._normalState={}),n.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(n,r,PRIMARY_STATES_KEYS$1)},a.prototype._savePrimaryToNormal=function(n,r,o){for(var s=0;s<o.length;s++){var l=o[s];n[l]!=null&&!(l in r)&&(r[l]=this[l])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(n){return this.states[n]},a.prototype.ensureState=function(n){var r=this.states;return r[n]||(r[n]={}),r[n]},a.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},a.prototype.useState=function(n,r,o,s){var l=n===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&l)){var u=this.currentStates,d=this.stateTransition;if(!(indexOf(u,n)>=0&&(r||u.length===1))){var f;if(this.stateProxy&&!l&&(f=this.stateProxy(n)),f||(f=this.states&&this.states[n]),!f&&!l){logError("State "+n+" not exists.");return}l||this.saveCurrentToNormalState(f);var v=!!(f&&f.hoverLayer||s);v&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,f,this._normalState,r,!o&&!this.__inHover&&d&&d.duration>0,d);var g=this._textContent,y=this._textGuide;return g&&g.useState(n,r,o,v),y&&y.useState(n,r,o,v),l?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),f}}},a.prototype.useStates=function(n,r,o){if(!n.length)this.clearStates();else{var s=[],l=this.currentStates,c=n.length,u=c===l.length;if(u){for(var d=0;d<c;d++)if(n[d]!==l[d]){u=!1;break}}if(u)return;for(var d=0;d<c;d++){var f=n[d],v=void 0;this.stateProxy&&(v=this.stateProxy(f,n)),v||(v=this.states[f]),v&&s.push(v)}var g=s[c-1],y=!!(g&&g.hoverLayer||o);y&&this._toggleHoverLayerFlag(!0);var _=this._mergeStates(s),S=this.stateTransition;this.saveCurrentToNormalState(_),this._applyStateObj(n.join(","),_,this._normalState,!1,!r&&!this.__inHover&&S&&S.duration>0,S);var x=this._textContent,T=this._textGuide;x&&x.useStates(n,r,y),T&&T.useStates(n,r,y),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},a.prototype.isSilent=function(){for(var n=this.silent,r=this.parent;!n&&r;){if(r.silent){n=!0;break}r=r.parent}return n},a.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var r=this.animators[n];r.targetName&&r.changeTarget(this[r.targetName])}},a.prototype.removeState=function(n){var r=indexOf(this.currentStates,n);if(r>=0){var o=this.currentStates.slice();o.splice(r,1),this.useStates(o)}},a.prototype.replaceState=function(n,r,o){var s=this.currentStates.slice(),l=indexOf(s,n),c=indexOf(s,r)>=0;l>=0?c?s.splice(l,1):s[l]=r:o&&!c&&s.push(r),this.useStates(s)},a.prototype.toggleState=function(n,r){r?this.useState(n,!0):this.removeState(n)},a.prototype._mergeStates=function(n){for(var r={},o,s=0;s<n.length;s++){var l=n[s];extend(r,l),l.textConfig&&(o=o||{},extend(o,l.textConfig))}return o&&(r.textConfig=o),r},a.prototype._applyStateObj=function(n,r,o,s,l,c){var u=!(r&&s);r&&r.textConfig?(this.textConfig=extend({},s?this.textConfig:o.textConfig),extend(this.textConfig,r.textConfig)):u&&o.textConfig&&(this.textConfig=o.textConfig);for(var d={},f=!1,v=0;v<PRIMARY_STATES_KEYS$1.length;v++){var g=PRIMARY_STATES_KEYS$1[v],y=l&&DEFAULT_ANIMATABLE_MAP[g];r&&r[g]!=null?y?(f=!0,d[g]=r[g]):this[g]=r[g]:u&&o[g]!=null&&(y?(f=!0,d[g]=o[g]):this[g]=o[g])}if(!l)for(var v=0;v<this.animators.length;v++){var _=this.animators[v],S=_.targetName;_.getLoop()||_.__changeFinalValue(S?(r||o)[S]:r||o)}f&&this._transitionState(n,d,c)},a.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var r=this.__zr;r&&n.addSelfToZr(r),n.__zr=r,n.__hostTarget=this}},a.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},a.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(n){var r=this._textContent;r!==n&&(r&&r!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},a.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var r=this._textContent,o=this._textGuide;r&&(r.__inHover=n),o&&(o.__inHover=n)},a.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var r=this.animators;if(r)for(var o=0;o<r.length;o++)n.animation.addAnimator(r[o]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},a.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var o=0;o<r.length;o++)n.animation.removeAnimator(r[o]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},a.prototype.animate=function(n,r,o){var s=n?this[n]:this,l=new Animator(s,r,o);return n&&(l.targetName=n),this.addAnimator(l,n),l},a.prototype.addAnimator=function(n,r){var o=this.__zr,s=this;n.during(function(){s.updateDuringAnimation(r)}).done(function(){var l=s.animators,c=indexOf(l,n);c>=0&&l.splice(c,1)}),this.animators.push(n),o&&o.animation.addAnimator(n),o&&o.wakeUp()},a.prototype.updateDuringAnimation=function(n){this.markRedraw()},a.prototype.stopAnimation=function(n,r){for(var o=this.animators,s=o.length,l=[],c=0;c<s;c++){var u=o[c];!n||n===u.scope?u.stop(r):l.push(u)}return this.animators=l,this},a.prototype.animateTo=function(n,r,o){animateTo(this,n,r,o)},a.prototype.animateFrom=function(n,r,o){animateTo(this,n,r,o,!0)},a.prototype._transitionState=function(n,r,o,s){for(var l=animateTo(this,r,o,s),c=0;c<l.length;c++)l[c].__fromStateTransition=n},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=function(){var n=a.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function r(o,s,l,c){Object.defineProperty(n,o,{get:function(){if(!this[s]){var d=this[s]=[];u(this,d)}return this[s]},set:function(d){this[l]=d[0],this[c]=d[1],this[s]=d,u(this,d)}});function u(d,f){Object.defineProperty(f,0,{get:function(){return d[l]},set:function(v){d[l]=v}}),Object.defineProperty(f,1,{get:function(){return d[c]},set:function(v){d[c]=v}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),a}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(a,n,r,o,s){r=r||{};var l=[];animateToShallow(a,"",a,n,r,o,l,s);var c=l.length,u=!1,d=r.done,f=r.aborted,v=function(){u=!0,c--,c<=0&&(u?d&&d():f&&f())},g=function(){c--,c<=0&&(u?d&&d():f&&f())};c||d&&d(),l.length>0&&r.during&&l[0].during(function(S,x){r.during(x)});for(var y=0;y<l.length;y++){var _=l[y];v&&_.done(v),g&&_.aborted(g),r.force&&_.duration(r.duration),_.start(r.easing)}return l}function copyArrShallow(a,n,r){for(var o=0;o<r;o++)a[o]=n[o]}function is2DArray(a){return isArrayLike(a[0])}function copyValue(a,n,r){if(isArrayLike(n[r]))if(isArrayLike(a[r])||(a[r]=[]),isTypedArray(n[r])){var o=n[r].length;a[r].length!==o&&(a[r]=new n[r].constructor(o),copyArrShallow(a[r],n[r],o))}else{var s=n[r],l=a[r],c=s.length;if(is2DArray(s))for(var u=s[0].length,d=0;d<c;d++)l[d]?copyArrShallow(l[d],s[d],u):l[d]=Array.prototype.slice.call(s[d]);else copyArrShallow(l,s,c);l.length=s.length}else a[r]=n[r]}function isValueSame(a,n){return a===n||isArrayLike(a)&&isArrayLike(n)&&is1DArraySame(a,n)}function is1DArraySame(a,n){var r=a.length;if(r!==n.length)return!1;for(var o=0;o<r;o++)if(a[o]!==n[o])return!1;return!0}function animateToShallow(a,n,r,o,s,l,c,u){for(var d=keys(o),f=s.duration,v=s.delay,g=s.additive,y=s.setToFinal,_=!isObject$3(l),S=a.animators,x=[],T=0;T<d.length;T++){var w=d[T],E=o[w];if(E!=null&&r[w]!=null&&(_||l[w]))if(isObject$3(E)&&!isArrayLike(E)&&!isGradientObject(E)){if(n){u||(r[w]=E,a.updateDuringAnimation(n));continue}animateToShallow(a,w,r[w],E,s,l&&l[w],c,u)}else x.push(w);else u||(r[w]=E,a.updateDuringAnimation(n),x.push(w))}var P=x.length;if(!g&&P)for(var D=0;D<S.length;D++){var L=S[D];if(L.targetName===n){var $=L.stopTracks(x);if($){var O=indexOf(S,L);S.splice(O,1)}}}if(s.force||(x=filter(x,function(U){return!isValueSame(o[U],r[U])}),P=x.length),P>0||s.force&&!c.length){var B=void 0,V=void 0,F=void 0;if(u){V={},y&&(B={});for(var D=0;D<P;D++){var w=x[D];V[w]=r[w],y?B[w]=o[w]:r[w]=o[w]}}else if(y){F={};for(var D=0;D<P;D++){var w=x[D];F[w]=cloneValue(r[w]),copyValue(r,o,w)}}var L=new Animator(r,!1,!1,g?filter(S,function(G){return G.targetName===n}):null);L.targetName=n,s.scope&&(L.scope=s.scope),y&&B&&L.whenWithKeys(0,B,x),F&&L.whenWithKeys(0,F,x),L.whenWithKeys(f??500,u?V:o,x).delay(v||0),a.addAnimator(L,n),c.push(L)}}var Group$4=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(r),o}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(r){return this._children[r]},n.prototype.childOfName=function(r){for(var o=this._children,s=0;s<o.length;s++)if(o[s].name===r)return o[s]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},n.prototype.addBefore=function(r,o){if(r&&r!==this&&r.parent!==this&&o&&o.parent===this){var s=this._children,l=s.indexOf(o);l>=0&&(s.splice(l,0,r),this._doAdd(r))}return this},n.prototype.replace=function(r,o){var s=indexOf(this._children,r);return s>=0&&this.replaceAt(o,s),this},n.prototype.replaceAt=function(r,o){var s=this._children,l=s[o];if(r&&r!==this&&r.parent!==this&&r!==l){s[o]=r,l.parent=null;var c=this.__zr;c&&l.removeSelfFromZr(c),this._doAdd(r)}return this},n.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var o=this.__zr;o&&o!==r.__zr&&r.addSelfToZr(o),o&&o.refresh()},n.prototype.remove=function(r){var o=this.__zr,s=this._children,l=indexOf(s,r);return l<0?this:(s.splice(l,1),r.parent=null,o&&r.removeSelfFromZr(o),o&&o.refresh(),this)},n.prototype.removeAll=function(){for(var r=this._children,o=this.__zr,s=0;s<r.length;s++){var l=r[s];o&&l.removeSelfFromZr(o),l.parent=null}return r.length=0,this},n.prototype.eachChild=function(r,o){for(var s=this._children,l=0;l<s.length;l++){var c=s[l];r.call(o,c,l)}return this},n.prototype.traverse=function(r,o){for(var s=0;s<this._children.length;s++){var l=this._children[s],c=r.call(o,l);l.isGroup&&!c&&l.traverse(r,o)}return this},n.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++){var s=this._children[o];s.addSelfToZr(r)}},n.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++){var s=this._children[o];s.removeSelfFromZr(r)}},n.prototype.getBoundingRect=function(r){for(var o=new BoundingRect(0,0,0,0),s=r||this._children,l=[],c=null,u=0;u<s.length;u++){var d=s[u];if(!(d.ignore||d.invisible)){var f=d.getBoundingRect(),v=d.getLocalTransform(l);v?(BoundingRect.applyTransform(o,f,v),c=c||o.clone(),c.union(o)):(c=c||f.clone(),c.union(f))}}return c||o},n}(Element$1);Group$4.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(a){delete instances$1[a]}function isDarkMode(a){if(!a)return!1;if(typeof a=="string")return lum(a,1)<DARK_MODE_THRESHOLD;if(a.colorStops){for(var n=a.colorStops,r=0,o=n.length,s=0;s<o;s++)r+=lum(n[s].color,1);return r/=o,r<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function a(n,r,o){var s=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=r,this.id=n;var l=new Storage,c=o.renderer||"canvas";painterCtors[c]||(c=keys(painterCtors)[0]),o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var u=new painterCtors[c](r,l,o,n),d=o.ssr||u.ssrOnly;this.storage=l,this.painter=u;var f=!env.node&&!env.worker&&!d?new HandlerDomProxy(u.getViewportRoot(),u.root):null,v=o.useCoarsePointer,g=v==null||v==="auto"?env.touchEventsSupported:!!v,y=44,_;g&&(_=retrieve2(o.pointerSize,y)),this.handler=new Handler(l,u,f,u.root,_),this.animation=new Animation({stage:{update:d?null:function(){return s._flush(!0)}}}),d||this.animation.start()}return a.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},a.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(n,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,r),this.refresh())},a.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(n){this._darkMode=n},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(n){var r,o=getTime();this._needsRefresh&&(r=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var s=getTime();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:s-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},a.prototype.findHover=function(n,r){if(!this._disposed)return this.handler.findHover(n,r)},a.prototype.on=function(n,r,o){return this._disposed||this.handler.on(n,r,o),this},a.prototype.off=function(n,r){this._disposed||this.handler.off(n,r)},a.prototype.trigger=function(n,r){this._disposed||this.handler.trigger(n,r)},a.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),r=0;r<n.length;r++)n[r]instanceof Group$4&&n[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},a}();function init$2(a,n){var r=new ZRender(guid(),a,n);return instances$1[r.id]=r,r}function registerPainter(a,n){painterCtors[a]=n}var ssrDataGetter;function getElementSSRData(a){if(typeof ssrDataGetter=="function")return ssrDataGetter(a)}function registerSSRDataGetter(a){ssrDataGetter=a}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(a){return a.replace(/^\s+|\s+$/g,"")}function linearMap$2(a,n,r,o){var s=n[0],l=n[1],c=r[0],u=r[1],d=l-s,f=u-c;if(d===0)return f===0?c:(c+u)/2;if(o)if(d>0){if(a<=s)return c;if(a>=l)return u}else{if(a>=s)return c;if(a<=l)return u}else{if(a===s)return c;if(a===l)return u}return(a-s)/d*f+c}function parsePercent(a,n){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return isString(a)?_trim(a).match(/%$/)?parseFloat(a)/100*n:parseFloat(a):a==null?NaN:+a}function round$3(a,n,r){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),a=(+a).toFixed(n),r?a:+a}function asc$2(a){return a.sort(function(n,r){return n-r}),a}function getPrecision(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var n=1,r=0;r<15;r++,n*=10)if(Math.round(a*n)/n===a)return r}return getPrecisionSafe(a)}function getPrecisionSafe(a){var n=a.toString().toLowerCase(),r=n.indexOf("e"),o=r>0?+n.slice(r+1):0,s=r>0?r:n.length,l=n.indexOf("."),c=l<0?0:s-1-l;return Math.max(0,c-o)}function getPixelPrecision(a,n){var r=Math.log,o=Math.LN10,s=Math.floor(r(a[1]-a[0])/o),l=Math.round(r(Math.abs(n[1]-n[0]))/o),c=Math.min(Math.max(-s+l,0),20);return isFinite(c)?c:20}function getPercentSeats(a,n){var r=reduce(a,function(_,S){return _+(isNaN(S)?0:S)},0);if(r===0)return[];for(var o=Math.pow(10,n),s=map$1(a,function(_){return(isNaN(_)?0:_)/r*o*100}),l=o*100,c=map$1(s,function(_){return Math.floor(_)}),u=reduce(c,function(_,S){return _+S},0),d=map$1(s,function(_,S){return _-c[S]});u<l;){for(var f=Number.NEGATIVE_INFINITY,v=null,g=0,y=d.length;g<y;++g)d[g]>f&&(f=d[g],v=g);++c[v],d[v]=0,++u}return map$1(c,function(_){return _/o})}function addSafe(a,n){var r=Math.max(getPrecision(a),getPrecision(n)),o=a+n;return r>ROUND_SUPPORTED_PRECISION_MAX?o:round$3(o,r)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(a){var n=Math.PI*2;return(a%n+n)%n}function isRadianAroundZero(a){return a>-RADIAN_EPSILON&&a<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(a){if(a instanceof Date)return a;if(isString(a)){var n=TIME_REG.exec(a);if(!n)return new Date(NaN);if(n[8]){var r=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(r-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,r,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){if(a===0)return 0;var n=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,n)>=10&&n++,n}function nice(a,n){var r=quantityExponent(a),o=Math.pow(10,r),s=a/o,l;return s<1.5?l=1:s<2.5?l=2:s<4?l=3:s<7?l=5:l=10,a=l*o,r>=-20?+a.toFixed(r<0?-r:0):a}function quantile(a,n){var r=(a.length-1)*n+1,o=Math.floor(r),s=+a[o-1],l=r-o;return l?s+l*(a[o]-s):s}function reformIntervals(a){a.sort(function(d,f){return u(d,f,0)?-1:1});for(var n=-1/0,r=1,o=0;o<a.length;){for(var s=a[o].interval,l=a[o].close,c=0;c<2;c++)s[c]<=n&&(s[c]=n,l[c]=c?1:1-r),n=s[c],r=l[c];s[0]===s[1]&&l[0]*l[1]!==1?a.splice(o,1):o++}return a;function u(d,f,v){return d.interval[v]<f.interval[v]||d.interval[v]===f.interval[v]&&(d.close[v]-f.close[v]===(v?-1:1)||!v&&u(d,f,1))}}function numericToNumber(a){var n=parseFloat(a);return n==a&&(n!==0||!isString(a)||a.indexOf("x")<=0)?n:NaN}function isNumeric(a){return!isNaN(numericToNumber(a))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(a,n){return n===0?a:getGreatestCommonDividor(n,a%n)}function getLeastCommonMultiple(a,n){return a==null?n:n==null?a:a*n/getGreatestCommonDividor(a,n)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(a,n,r){if(hasConsole){{if(storedLogs[n])return;storedLogs[n]=!0}console[a](ECHARTS_PREFIX+n)}}function warn(a,n){outputLog("warn",a)}function throwError(a){throw new Error(a)}function interpolateNumber(a,n,r){return(n-a)*r+a}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,n,r){if(a){a[n]=a[n]||{},a.emphasis=a.emphasis||{},a.emphasis[n]=a.emphasis[n]||{};for(var o=0,s=r.length;o<s;o++){var l=r[o];!a.emphasis[n].hasOwnProperty(l)&&a[n].hasOwnProperty(l)&&(a.emphasis[n][l]=a[n][l])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(a){return isObject$3(a)&&!isArray$1(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return isObject$3(a)&&!(a instanceof Array)}function mappingToExists(a,n,r){var o=r==="normalMerge",s=r==="replaceMerge",l=r==="replaceAll";a=a||[],n=(n||[]).slice();var c=createHashMap();each$f(n,function(d,f){if(!isObject$3(d)){n[f]=null;return}});var u=prepareResult(a,c,r);return(o||s)&&mappingById(u,a,c,n),o&&mappingByName(u,n),o||s?mappingByIndex(u,n,s):l&&mappingInReplaceAllMode(u,n),makeIdAndName(u),u}function prepareResult(a,n,r){var o=[];if(r==="replaceAll")return o;for(var s=0;s<a.length;s++){var l=a[s];l&&l.id!=null&&n.set(l.id,s),o.push({existing:r==="replaceMerge"||isComponentIdInternal(l)?null:l,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(a,n,r,o){each$f(o,function(s,l){if(!(!s||s.id==null)){var c=makeComparableKey(s.id),u=r.get(c);if(u!=null){var d=a[u];assert(!d.newOption,'Duplicated option on id "'+c+'".'),d.newOption=s,d.existing=n[u],o[l]=null}}})}function mappingByName(a,n){each$f(n,function(r,o){if(!(!r||r.name==null))for(var s=0;s<a.length;s++){var l=a[s].existing;if(!a[s].newOption&&l&&(l.id==null||r.id==null)&&!isComponentIdInternal(r)&&!isComponentIdInternal(l)&&keyExistAndEqual("name",l,r)){a[s].newOption=r,n[o]=null;return}}})}function mappingByIndex(a,n,r){each$f(n,function(o){if(o){for(var s,l=0;(s=a[l])&&(s.newOption||isComponentIdInternal(s.existing)||s.existing&&o.id!=null&&!keyExistAndEqual("id",o,s.existing));)l++;s?(s.newOption=o,s.brandNew=r):a.push({newOption:o,brandNew:r,existing:null,keyInfo:null}),l++}})}function mappingInReplaceAllMode(a,n){each$f(n,function(r){a.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(a){var n=createHashMap();each$f(a,function(r){var o=r.existing;o&&n.set(o.id,r)}),each$f(a,function(r){var o=r.newOption;assert(!o||o.id==null||!n.get(o.id)||n.get(o.id)===r,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&n.set(o.id,r),!r.keyInfo&&(r.keyInfo={})}),each$f(a,function(r,o){var s=r.existing,l=r.newOption,c=r.keyInfo;if(isObject$3(l)){if(c.name=l.name!=null?makeComparableKey(l.name):s?s.name:DUMMY_COMPONENT_NAME_PREFIX+o,s)c.id=makeComparableKey(s.id);else if(l.id!=null)c.id=makeComparableKey(l.id);else{var u=0;do c.id="\0"+c.name+"\0"+u++;while(n.get(c.id))}n.set(c.id,r)}})}function keyExistAndEqual(a,n,r){var o=convertOptionIdName(n[a],null),s=convertOptionIdName(r[a],null);return o!=null&&s!=null&&o===s}function makeComparableKey(a){return convertOptionIdName(a,"")}function convertOptionIdName(a,n){return a==null?n:isString(a)?a:isNumber(a)||isStringSafe(a)?a+"":n}function isNameSpecified(a){var n=a.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(a){return a&&a.id!=null&&makeComparableKey(a.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(a){return INTERNAL_COMPONENT_ID_PREFIX+a}function setComponentTypeToKeyInfo(a,n,r){each$f(a,function(o){var s=o.newOption;isObject$3(s)&&(o.keyInfo.mainType=n,o.keyInfo.subType=determineSubType(n,s,o.existing,r))})}function determineSubType(a,n,r,o){var s=n.type?n.type:r?r.subType:o.determineSubType(a,n);return s}function compressBatches(a,n){var r={},o={};return s(a||[],r),s(n||[],o,r),[l(r),l(o)];function s(c,u,d){for(var f=0,v=c.length;f<v;f++){var g=convertOptionIdName(c[f].seriesId,null);if(g==null)return;for(var y=normalizeToArray(c[f].dataIndex),_=d&&d[g],S=0,x=y.length;S<x;S++){var T=y[S];_&&_[T]?_[T]=null:(u[g]||(u[g]={}))[T]=1}}}function l(c,u){var d=[];for(var f in c)if(c.hasOwnProperty(f)&&c[f]!=null)if(u)d.push(+f);else{var v=l(c[f],!0);v.length&&d.push({seriesId:f,dataIndex:v})}return d}}function queryDataIndex(a,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(r){return a.indexOfRawIndex(r)}):a.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(r){return a.indexOfName(r)}):a.indexOfName(n.name)}function makeInner(){var a="__ec_inner_"+innerUniqueIndex++;return function(n){return n[a]||(n[a]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(a,n,r){var o=preParseFinder(n,r),s=o.mainTypeSpecified,l=o.queryOptionMap,c=o.others,u=c,d=r?r.defaultMainType:null;return!s&&d&&l.set(d,{}),l.each(function(f,v){var g=queryReferringComponents(a,v,f,{useDefault:d===v,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});u[v+"Models"]=g.models,u[v+"Model"]=g.models[0]}),u}function preParseFinder(a,n){var r;if(isString(a)){var o={};o[a+"Index"]=0,r=o}else r=a;var s=createHashMap(),l={},c=!1;return each$f(r,function(u,d){if(d==="dataIndex"||d==="dataIndexInside"){l[d]=u;return}var f=d.match(/^(\w+)(Index|Id|Name)$/)||[],v=f[1],g=(f[2]||"").toLowerCase();if(!(!v||!g||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,v)<0)){c=c||!!v;var y=s.get(v)||s.set(v,{});y[g]=u}}),{mainTypeSpecified:c,queryOptionMap:s,others:l}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(a,n,r,o){o=o||SINGLE_REFERRING;var s=r.index,l=r.id,c=r.name,u={models:null,specified:s!=null||l!=null||c!=null};if(!u.specified){var d=void 0;return u.models=o.useDefault&&(d=a.getComponent(n))?[d]:[],u}return s==="none"||s===!1?(assert(o.enableNone,'`"none"` or `false` is not a valid value on index option.'),u.models=[],u):(s==="all"&&(assert(o.enableAll,'`"all"` is not a valid value on index option.'),s=l=c=null),u.models=a.queryComponents({mainType:n,index:s,id:l,name:c}),u)}function setAttribute(a,n,r){a.setAttribute?a.setAttribute(n,r):a[n]=r}function getAttribute(a,n){return a.getAttribute?a.getAttribute(n):a[n]}function getTooltipRenderMode(a){return a==="auto"?env.domSupported?"html":"richText":a||"html"}function groupData(a,n){var r=createHashMap(),o=[];return each$f(a,function(s){var l=n(s);(r.get(l)||(o.push(l),r.set(l,[]))).push(s)}),{keys:o,buckets:r}}function interpolateRawValues(a,n,r,o,s){var l=n==null||n==="auto";if(o==null)return o;if(isNumber(o)){var c=interpolateNumber(r||0,o,s);return round$3(c,l?Math.max(getPrecision(r||0),getPrecision(o)):n)}else{if(isString(o))return s<1?r:o;for(var u=[],d=r,f=o,v=Math.max(d?d.length:0,f.length),g=0;g<v;++g){var y=a.getDimensionInfo(g);if(y&&y.type==="ordinal")u[g]=(s<1&&d?d:f)[g];else{var _=d&&d[g]?d[g]:0,S=f[g],c=interpolateNumber(_,S,s);u[g]=round$3(c,l?Math.max(getPrecision(_),getPrecision(S)):n)}}return u}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(a){var n={main:"",sub:""};if(a){var r=a.split(TYPE_DELIMITER);n.main=r[0]||"",n.sub=r[1]||""}return n}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function isExtendedClass(a){return!!(a&&a[IS_EXTENDED_CLASS])}function enableClassExtend(a,n){a.$constructor=a,a.extend=function(r){var o=this,s;return isESClass(o)?s=function(l){__extends(c,l);function c(){return l.apply(this,arguments)||this}return c}(o):(s=function(){(r.$constructor||o).apply(this,arguments)},inherits(s,this)),extend(s.prototype,r),s[IS_EXTENDED_CLASS]=!0,s.extend=this.extend,s.superCall=superCall,s.superApply=superApply,s.superClass=o,s}}function isESClass(a){return isFunction(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function mountExtend(a,n){a.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(a){var n=["__\0is_clz",classBase++].join("_");a.prototype[n]=!0,a.isInstance=function(r){return!!(r&&r[n])}}function superCall(a,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return this.superClass.prototype[n].apply(a,r)}function superApply(a,n,r){return this.superClass.prototype[n].apply(a,r)}function enableClassManagement(a){var n={};a.registerClass=function(o){var s=o.type||o.prototype.type;if(s){checkClassType(s),o.prototype.type=s;var l=parseClassType(s);if(!l.sub)n[l.main]=o;else if(l.sub!==IS_CONTAINER){var c=r(l);c[l.sub]=o}}return o},a.getClass=function(o,s,l){var c=n[o];if(c&&c[IS_CONTAINER]&&(c=s?c[s]:null),l&&!c)throw new Error(s?"Component "+o+"."+(s||"")+" is used but not imported.":o+".type should be specified.");return c},a.getClassesByMainType=function(o){var s=parseClassType(o),l=[],c=n[s.main];return c&&c[IS_CONTAINER]?each$f(c,function(u,d){d!==IS_CONTAINER&&l.push(u)}):l.push(c),l},a.hasClass=function(o){var s=parseClassType(o);return!!n[s.main]},a.getAllClassMainTypes=function(){var o=[];return each$f(n,function(s,l){o.push(l)}),o},a.hasSubTypes=function(o){var s=parseClassType(o),l=n[s.main];return l&&l[IS_CONTAINER]};function r(o){var s=n[o.main];return(!s||!s[IS_CONTAINER])&&(s=n[o.main]={},s[IS_CONTAINER]=!0),s}}function makeStyleMapper(a,n){for(var r=0;r<a.length;r++)a[r][1]||(a[r][1]=a[r][0]);return n=n||!1,function(o,s,l){for(var c={},u=0;u<a.length;u++){var d=a[u][1];if(!(s&&indexOf(s,d)>=0||l&&indexOf(l,d)<0)){var f=o.getShallow(d,n);f!=null&&(c[a[u][0]]=f)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function a(){}return a.prototype.getAreaStyle=function(n,r){return getAreaStyle(this,n,r)},a}(),globalImageCache=new LRU(50);function findExistImage(a){if(typeof a=="string"){var n=globalImageCache.get(a);return n&&n.image}else return a}function createOrUpdateImage(a,n,r,o,s){if(a)if(typeof a=="string"){if(n&&n.__zrImageSrc===a||!r)return n;var l=globalImageCache.get(a),c={hostEl:r,cb:o,cbPayload:s};return l?(n=l.image,!isImageReady(n)&&l.pending.push(c)):(n=platformApi.loadImage(a,imageOnLoad,imageOnLoad),n.__zrImageSrc=a,globalImageCache.put(a,n.__cachedImgObj={image:n,pending:[c]})),n}else return a;else return n}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<a.pending.length;n++){var r=a.pending[n],o=r.cb;o&&o(this,r.cbPayload),r.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(a,n,r,o,s,l){if(!r){a.text="",a.isTruncated=!1;return}var c=(n+"").split(`
`);l=prepareTruncateOptions(r,o,s,l);for(var u=!1,d={},f=0,v=c.length;f<v;f++)truncateSingleLine(d,c[f],l),c[f]=d.textLine,u=u||d.isTruncated;a.text=c.join(`
`),a.isTruncated=u}function prepareTruncateOptions(a,n,r,o){o=o||{};var s=extend({},o);s.font=n,r=retrieve2(r,"..."),s.maxIterations=retrieve2(o.maxIterations,2);var l=s.minChar=retrieve2(o.minChar,0);s.cnCharWidth=getWidth("国",n);var c=s.ascCharWidth=getWidth("a",n);s.placeholder=retrieve2(o.placeholder,"");for(var u=a=Math.max(0,a-1),d=0;d<l&&u>=c;d++)u-=c;var f=getWidth(r,n);return f>u&&(r="",f=0),u=a-f,s.ellipsis=r,s.ellipsisWidth=f,s.contentWidth=u,s.containerWidth=a,s}function truncateSingleLine(a,n,r){var o=r.containerWidth,s=r.font,l=r.contentWidth;if(!o){a.textLine="",a.isTruncated=!1;return}var c=getWidth(n,s);if(c<=o){a.textLine=n,a.isTruncated=!1;return}for(var u=0;;u++){if(c<=l||u>=r.maxIterations){n+=r.ellipsis;break}var d=u===0?estimateLength(n,l,r.ascCharWidth,r.cnCharWidth):c>0?Math.floor(n.length*l/c):0;n=n.substr(0,d),c=getWidth(n,s)}n===""&&(n=r.placeholder),a.textLine=n,a.isTruncated=!0}function estimateLength(a,n,r,o){for(var s=0,l=0,c=a.length;l<c&&s<n;l++){var u=a.charCodeAt(l);s+=0<=u&&u<=127?r:o}return l}function parsePlainText(a,n){a!=null&&(a+="");var r=n.overflow,o=n.padding,s=n.font,l=r==="truncate",c=getLineHeight(s),u=retrieve2(n.lineHeight,c),d=!!n.backgroundColor,f=n.lineOverflow==="truncate",v=!1,g=n.width,y;g!=null&&(r==="break"||r==="breakAll")?y=a?wrapText(a,n.font,g,r==="breakAll",0).lines:[]:y=a?a.split(`
`):[];var _=y.length*u,S=retrieve2(n.height,_);if(_>S&&f){var x=Math.floor(S/u);v=v||y.length>x,y=y.slice(0,x)}if(a&&l&&g!=null)for(var T=prepareTruncateOptions(g,s,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),w={},E=0;E<y.length;E++)truncateSingleLine(w,y[E],T),y[E]=w.textLine,v=v||w.isTruncated;for(var P=S,D=0,E=0;E<y.length;E++)D=Math.max(getWidth(y[E],s),D);g==null&&(g=D);var L=D;return o&&(P+=o[0]+o[2],L+=o[1]+o[3],g+=o[1]+o[3]),d&&(L=g),{lines:y,height:S,outerWidth:L,outerHeight:P,lineHeight:u,calculatedLineHeight:c,contentWidth:D,contentHeight:_,width:g,isTruncated:v}}var RichTextToken=function(){function a(){}return a}(),RichTextLine=function(){function a(n){this.tokens=[],n&&(this.tokens=n)}return a}(),RichTextContentBlock=function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a}();function parseRichText(a,n){var r=new RichTextContentBlock;if(a!=null&&(a+=""),!a)return r;for(var o=n.width,s=n.height,l=n.overflow,c=(l==="break"||l==="breakAll")&&o!=null?{width:o,accumWidth:0,breakAll:l==="breakAll"}:null,u=STYLE_REG.lastIndex=0,d;(d=STYLE_REG.exec(a))!=null;){var f=d.index;f>u&&pushTokens(r,a.substring(u,f),n,c),pushTokens(r,d[2],n,c,d[1]),u=STYLE_REG.lastIndex}u<a.length&&pushTokens(r,a.substring(u,a.length),n,c);var v=[],g=0,y=0,_=n.padding,S=l==="truncate",x=n.lineOverflow==="truncate",T={};function w(pe,ce,ye){pe.width=ce,pe.lineHeight=ye,g+=ye,y=Math.max(y,ce)}e:for(var E=0;E<r.lines.length;E++){for(var P=r.lines[E],D=0,L=0,$=0;$<P.tokens.length;$++){var O=P.tokens[$],B=O.styleName&&n.rich[O.styleName]||{},V=O.textPadding=B.padding,F=V?V[1]+V[3]:0,U=O.font=B.font||n.font;O.contentHeight=getLineHeight(U);var G=retrieve2(B.height,O.contentHeight);if(O.innerHeight=G,V&&(G+=V[0]+V[2]),O.height=G,O.lineHeight=retrieve3(B.lineHeight,n.lineHeight,G),O.align=B&&B.align||n.align,O.verticalAlign=B&&B.verticalAlign||"middle",x&&s!=null&&g+O.lineHeight>s){var W=r.lines.length;$>0?(P.tokens=P.tokens.slice(0,$),w(P,L,D),r.lines=r.lines.slice(0,E+1)):r.lines=r.lines.slice(0,E),r.isTruncated=r.isTruncated||r.lines.length<W;break e}var j=B.width,K=j==null||j==="auto";if(typeof j=="string"&&j.charAt(j.length-1)==="%")O.percentWidth=j,v.push(O),O.contentWidth=getWidth(O.text,U);else{if(K){var q=B.backgroundColor,ie=q&&q.image;ie&&(ie=findExistImage(ie),isImageReady(ie)&&(O.width=Math.max(O.width,ie.width*G/ie.height)))}var ee=S&&o!=null?o-L:null;ee!=null&&ee<O.width?!K||ee<F?(O.text="",O.width=O.contentWidth=0):(truncateText2(T,O.text,ee-F,U,n.ellipsis,{minChar:n.truncateMinChar}),O.text=T.text,r.isTruncated=r.isTruncated||T.isTruncated,O.width=O.contentWidth=getWidth(O.text,U)):O.contentWidth=getWidth(O.text,U)}O.width+=F,L+=O.width,B&&(D=Math.max(D,O.lineHeight))}w(P,L,D)}r.outerWidth=r.width=retrieve2(o,y),r.outerHeight=r.height=retrieve2(s,g),r.contentHeight=g,r.contentWidth=y,_&&(r.outerWidth+=_[1]+_[3],r.outerHeight+=_[0]+_[2]);for(var E=0;E<v.length;E++){var O=v[E],he=O.percentWidth;O.width=parseInt(he,10)/100*r.width}return r}function pushTokens(a,n,r,o,s){var l=n==="",c=s&&r.rich[s]||{},u=a.lines,d=c.font||r.font,f=!1,v,g;if(o){var y=c.padding,_=y?y[1]+y[3]:0;if(c.width!=null&&c.width!=="auto"){var S=parsePercent$1(c.width,o.width)+_;u.length>0&&S+o.accumWidth>o.width&&(v=n.split(`
`),f=!0),o.accumWidth=S}else{var x=wrapText(n,d,o.width,o.breakAll,o.accumWidth);o.accumWidth=x.accumWidth+_,g=x.linesWidths,v=x.lines}}else v=n.split(`
`);for(var T=0;T<v.length;T++){var w=v[T],E=new RichTextToken;if(E.styleName=s,E.text=w,E.isLineHolder=!w&&!l,typeof c.width=="number"?E.width=c.width:E.width=g?g[T]:getWidth(w,d),!T&&!f){var P=(u[u.length-1]||(u[0]=new RichTextLine)).tokens,D=P.length;D===1&&P[0].isLineHolder?P[0]=E:(w||!D||l)&&P.push(E)}else u.push(new RichTextLine([E]))}}function isAlphabeticLetter(a){var n=a.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(a,n){return a[n]=!0,a},{});function isWordBreakChar(a){return isAlphabeticLetter(a)?!!breakCharMap[a]:!0}function wrapText(a,n,r,o,s){for(var l=[],c=[],u="",d="",f=0,v=0,g=0;g<a.length;g++){var y=a.charAt(g);if(y===`
`){d&&(u+=d,v+=f),l.push(u),c.push(v),u="",d="",f=0,v=0;continue}var _=getWidth(y,n),S=o?!1:!isWordBreakChar(y);if(l.length?v+_>r:s+v+_>r){v?(u||d)&&(S?(u||(u=d,d="",f=0,v=f),l.push(u),c.push(v-f),d+=y,f+=_,u="",v=f):(d&&(u+=d,d="",f=0),l.push(u),c.push(v),u=y,v=_)):S?(l.push(d),c.push(f),d=y,f=_):(l.push(y),c.push(_));continue}v+=_,S?(d+=y,f+=_):(d&&(u+=d,d="",f=0),u+=y)}return!l.length&&!u&&(u=a,d="",f=0),d&&(u+=d),u&&(l.push(u),c.push(v)),l.length===1&&(v+=s),{accumWidth:v,lines:l,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype._init=function(r){for(var o=keys(r),s=0;s<o.length;s++){var l=o[s];l==="style"?this.useStyle(r[l]):a.prototype.attrKV.call(this,l,r[l])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(r,o,s,l){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,r,o)||c&&!c[0]&&!c[3])return!1;if(s&&this.__clipPaths){for(var u=0;u<this.__clipPaths.length;++u)if(this.__clipPaths[u].isZeroArea())return!1}if(l&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},n.prototype.contain=function(r,o){return this.rectContain(r,o)},n.prototype.traverse=function(r,o){r.call(o,this)},n.prototype.rectContain=function(r,o){var s=this.transformCoordToLocal(r,o),l=this.getBoundingRect();return l.contain(s[0],s[1])},n.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,s=this.getBoundingRect(),l=this.style,c=l.shadowBlur||0,u=l.shadowOffsetX||0,d=l.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),o?BoundingRect.applyTransform(r,s,o):r.copy(s),(c||u||d)&&(r.width+=c*2+Math.abs(u),r.height+=c*2+Math.abs(d),r.x=Math.min(r.x,r.x+u-c),r.y=Math.min(r.y,r.y+d-c));var f=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-f),r.y=Math.floor(r.y-f),r.width=Math.ceil(r.width+1+f*2),r.height=Math.ceil(r.height+1+f*2))}return r},n.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(r){return this.animate("style",r)},n.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(r,o){r!=="style"?a.prototype.attrKV.call(this,r,o):this.style?this.setStyle(o):this.useStyle(o)},n.prototype.setStyle=function(r,o){return typeof r=="string"?this.style[r]=o:extend(this.style,r),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(r){return createObject(DEFAULT_COMMON_STYLE,r)},n.prototype.useStyle=function(r){r[STYLE_MAGIC_KEY]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},n.prototype.isStyleObject=function(r){return r[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,o,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(r,o,s,l,c,u){a.prototype._applyStateObj.call(this,r,o,s,l,c,u);var d=!(o&&l),f;if(o&&o.style?c?l?f=o.style:(f=this._mergeStyle(this.createStyle(),s.style),this._mergeStyle(f,o.style)):(f=this._mergeStyle(this.createStyle(),l?this.style:s.style),this._mergeStyle(f,o.style)):d&&(f=s.style),f)if(c){var v=this.style;if(this.style=this.createStyle(d?{}:v),d)for(var g=keys(v),y=0;y<g.length;y++){var _=g[y];_ in f&&(f[_]=f[_],this.style[_]=v[_])}for(var S=keys(f),y=0;y<S.length;y++){var _=S[y];this.style[_]=this.style[_]}this._transitionState(r,{style:f},u,this.getAnimationStyleProps())}else this.useStyle(f);for(var x=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,y=0;y<x.length;y++){var _=x[y];o&&o[_]!=null?this[_]=o[_]:d&&s[_]!=null&&(this[_]=s[_])}},n.prototype._mergeStates=function(r){for(var o=a.prototype._mergeStates.call(this,r),s,l=0;l<r.length;l++){var c=r[l];c.style&&(s=s||{},this._mergeStyle(s,c.style))}return s&&(o.style=s),o},n.prototype._mergeStyle=function(r,o){return extend(r,o),r},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=function(){var r=n.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),n}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,n,r){return tmpRect.copy(a.getBoundingRect()),a.transform&&tmpRect.applyTransform(a.transform),viewRect.width=n,viewRect.height=r,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(a,n,r){if(a.length!==0){for(var o=a[0],s=o[0],l=o[0],c=o[1],u=o[1],d=1;d<a.length;d++)o=a[d],s=mathMin$9(s,o[0]),l=mathMax$9(l,o[0]),c=mathMin$9(c,o[1]),u=mathMax$9(u,o[1]);n[0]=s,n[1]=c,r[0]=l,r[1]=u}}function fromLine(a,n,r,o,s,l){s[0]=mathMin$9(a,r),s[1]=mathMin$9(n,o),l[0]=mathMax$9(a,r),l[1]=mathMax$9(n,o)}var xDim=[],yDim=[];function fromCubic(a,n,r,o,s,l,c,u,d,f){var v=cubicExtrema,g=cubicAt,y=v(a,r,s,c,xDim);d[0]=1/0,d[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var _=0;_<y;_++){var S=g(a,r,s,c,xDim[_]);d[0]=mathMin$9(S,d[0]),f[0]=mathMax$9(S,f[0])}y=v(n,o,l,u,yDim);for(var _=0;_<y;_++){var x=g(n,o,l,u,yDim[_]);d[1]=mathMin$9(x,d[1]),f[1]=mathMax$9(x,f[1])}d[0]=mathMin$9(a,d[0]),f[0]=mathMax$9(a,f[0]),d[0]=mathMin$9(c,d[0]),f[0]=mathMax$9(c,f[0]),d[1]=mathMin$9(n,d[1]),f[1]=mathMax$9(n,f[1]),d[1]=mathMin$9(u,d[1]),f[1]=mathMax$9(u,f[1])}function fromQuadratic(a,n,r,o,s,l,c,u){var d=quadraticExtremum,f=quadraticAt$1,v=mathMax$9(mathMin$9(d(a,r,s),1),0),g=mathMax$9(mathMin$9(d(n,o,l),1),0),y=f(a,r,s,v),_=f(n,o,l,g);c[0]=mathMin$9(a,s,y),c[1]=mathMin$9(n,l,_),u[0]=mathMax$9(a,s,y),u[1]=mathMax$9(n,l,_)}function fromArc(a,n,r,o,s,l,c,u,d){var f=min$1,v=max$1,g=Math.abs(s-l);if(g%PI2$8<1e-4&&g>1e-4){u[0]=a-r,u[1]=n-o,d[0]=a+r,d[1]=n+o;return}if(start[0]=mathCos$4(s)*r+a,start[1]=mathSin$4(s)*o+n,end[0]=mathCos$4(l)*r+a,end[1]=mathSin$4(l)*o+n,f(u,start,end),v(d,start,end),s=s%PI2$8,s<0&&(s=s+PI2$8),l=l%PI2$8,l<0&&(l=l+PI2$8),s>l&&!c?l+=PI2$8:s<l&&c&&(s+=PI2$8),c){var y=l;l=s,s=y}for(var _=0;_<l;_+=Math.PI/2)_>s&&(extremity[0]=mathCos$4(_)*r+a,extremity[1]=mathSin$4(_)*o+n,f(u,extremity,u),v(d,extremity,d))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(a){var n=Math.round(a/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(a,n){var r=modPI2(a[0]);r<0&&(r+=PI2$7);var o=r-a[0],s=a[1];s+=o,!n&&s-r>=PI2$7?s=r+PI2$7:n&&r-s>=PI2$7?s=r-PI2$7:!n&&r>s?s=r+(PI2$7-modPI2(r-s)):n&&r<s&&(s=r-(PI2$7-modPI2(s-r))),a[0]=r,a[1]=s}var PathProxy=function(){function a(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(n,r,o){o=o||0,o>0&&(this._ux=mathAbs$2(o/devicePixelRatio/n)||0,this._uy=mathAbs$2(o/devicePixelRatio/r)||0)},a.prototype.setDPR=function(n){this.dpr=n},a.prototype.setContext=function(n){this._ctx=n},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(n,r){return this._drawPendingPt(),this.addData(CMD$4.M,n,r),this._ctx&&this._ctx.moveTo(n,r),this._x0=n,this._y0=r,this._xi=n,this._yi=r,this},a.prototype.lineTo=function(n,r){var o=mathAbs$2(n-this._xi),s=mathAbs$2(r-this._yi),l=o>this._ux||s>this._uy;if(this.addData(CMD$4.L,n,r),this._ctx&&l&&this._ctx.lineTo(n,r),l)this._xi=n,this._yi=r,this._pendingPtDist=0;else{var c=o*o+s*s;c>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=r,this._pendingPtDist=c)}return this},a.prototype.bezierCurveTo=function(n,r,o,s,l,c){return this._drawPendingPt(),this.addData(CMD$4.C,n,r,o,s,l,c),this._ctx&&this._ctx.bezierCurveTo(n,r,o,s,l,c),this._xi=l,this._yi=c,this},a.prototype.quadraticCurveTo=function(n,r,o,s){return this._drawPendingPt(),this.addData(CMD$4.Q,n,r,o,s),this._ctx&&this._ctx.quadraticCurveTo(n,r,o,s),this._xi=o,this._yi=s,this},a.prototype.arc=function(n,r,o,s,l,c){this._drawPendingPt(),tmpAngles[0]=s,tmpAngles[1]=l,normalizeArcAngles(tmpAngles,c),s=tmpAngles[0],l=tmpAngles[1];var u=l-s;return this.addData(CMD$4.A,n,r,o,o,s,u,0,c?0:1),this._ctx&&this._ctx.arc(n,r,o,s,l,c),this._xi=mathCos$3(l)*o+n,this._yi=mathSin$3(l)*o+r,this},a.prototype.arcTo=function(n,r,o,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,r,o,s,l),this},a.prototype.rect=function(n,r,o,s){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,r,o,s),this.addData(CMD$4.R,n,r,o,s),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,r=this._x0,o=this._y0;return n&&n.closePath(),this._xi=r,this._yi=o,this},a.prototype.fill=function(n){n&&n.fill(),this.toStatic()},a.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(n){var r=n.length;!(this.data&&this.data.length===r)&&hasTypedArray&&(this.data=new Float32Array(r));for(var o=0;o<r;o++)this.data[o]=n[o];this._len=r},a.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var r=n.length,o=0,s=this._len,l=0;l<r;l++)o+=n[l].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(s+o));for(var l=0;l<r;l++)for(var c=n[l].data,u=0;u<c.length;u++)this.data[s++]=c[u];this._len=s},a.prototype.addData=function(n,r,o,s,l,c,u,d,f){if(this._saveData){var v=this.data;this._len+arguments.length>v.length&&(this._expandData(),v=this.data);for(var g=0;g<arguments.length;g++)v[this._len++]=arguments[g]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],r=0;r<this._len;r++)n[r]=this.data[r];this.data=n}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},a.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,r=0,o=0,s=0,l=0,c;for(c=0;c<this._len;){var u=n[c++],d=c===1;switch(d&&(r=n[c],o=n[c+1],s=r,l=o),u){case CMD$4.M:r=s=n[c++],o=l=n[c++],min2[0]=s,min2[1]=l,max2[0]=s,max2[1]=l;break;case CMD$4.L:fromLine(r,o,n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.C:fromCubic(r,o,n[c++],n[c++],n[c++],n[c++],n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.Q:fromQuadratic(r,o,n[c++],n[c++],n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.A:var f=n[c++],v=n[c++],g=n[c++],y=n[c++],_=n[c++],S=n[c++]+_;c+=1;var x=!n[c++];d&&(s=mathCos$3(_)*g+f,l=mathSin$3(_)*y+v),fromArc(f,v,g,y,_,S,x,min2,max2),r=mathCos$3(S)*g+f,o=mathSin$3(S)*y+v;break;case CMD$4.R:s=r=n[c++],l=o=n[c++];var T=n[c++],w=n[c++];fromLine(s,l,s+T,l+w,min2,max2);break;case CMD$4.Z:r=s,o=l;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},a.prototype._calculateLength=function(){var n=this.data,r=this._len,o=this._ux,s=this._uy,l=0,c=0,u=0,d=0;this._pathSegLen||(this._pathSegLen=[]);for(var f=this._pathSegLen,v=0,g=0,y=0;y<r;){var _=n[y++],S=y===1;S&&(l=n[y],c=n[y+1],u=l,d=c);var x=-1;switch(_){case CMD$4.M:l=u=n[y++],c=d=n[y++];break;case CMD$4.L:{var T=n[y++],w=n[y++],E=T-l,P=w-c;(mathAbs$2(E)>o||mathAbs$2(P)>s||y===r-1)&&(x=Math.sqrt(E*E+P*P),l=T,c=w);break}case CMD$4.C:{var D=n[y++],L=n[y++],T=n[y++],w=n[y++],$=n[y++],O=n[y++];x=cubicLength(l,c,D,L,T,w,$,O,10),l=$,c=O;break}case CMD$4.Q:{var D=n[y++],L=n[y++],T=n[y++],w=n[y++];x=quadraticLength(l,c,D,L,T,w,10),l=T,c=w;break}case CMD$4.A:var B=n[y++],V=n[y++],F=n[y++],U=n[y++],G=n[y++],W=n[y++],j=W+G;y+=1,S&&(u=mathCos$3(G)*F+B,d=mathSin$3(G)*U+V),x=mathMax$8(F,U)*mathMin$8(PI2$7,Math.abs(W)),l=mathCos$3(j)*F+B,c=mathSin$3(j)*U+V;break;case CMD$4.R:{u=l=n[y++],d=c=n[y++];var K=n[y++],q=n[y++];x=K*2+q*2;break}case CMD$4.Z:{var E=u-l,P=d-c;x=Math.sqrt(E*E+P*P),l=u,c=d;break}}x>=0&&(f[g++]=x,v+=x)}return this._pathLen=v,v},a.prototype.rebuildPath=function(n,r){var o=this.data,s=this._ux,l=this._uy,c=this._len,u,d,f,v,g,y,_=r<1,S,x,T=0,w=0,E,P=0,D,L;if(!(_&&(this._pathSegLen||this._calculateLength(),S=this._pathSegLen,x=this._pathLen,E=r*x,!E)))e:for(var $=0;$<c;){var O=o[$++],B=$===1;switch(B&&(f=o[$],v=o[$+1],u=f,d=v),O!==CMD$4.L&&P>0&&(n.lineTo(D,L),P=0),O){case CMD$4.M:u=f=o[$++],d=v=o[$++],n.moveTo(f,v);break;case CMD$4.L:{g=o[$++],y=o[$++];var V=mathAbs$2(g-f),F=mathAbs$2(y-v);if(V>s||F>l){if(_){var U=S[w++];if(T+U>E){var G=(E-T)/U;n.lineTo(f*(1-G)+g*G,v*(1-G)+y*G);break e}T+=U}n.lineTo(g,y),f=g,v=y,P=0}else{var W=V*V+F*F;W>P&&(D=g,L=y,P=W)}break}case CMD$4.C:{var j=o[$++],K=o[$++],q=o[$++],ie=o[$++],ee=o[$++],he=o[$++];if(_){var U=S[w++];if(T+U>E){var G=(E-T)/U;cubicSubdivide(f,j,q,ee,G,tmpOutX),cubicSubdivide(v,K,ie,he,G,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}T+=U}n.bezierCurveTo(j,K,q,ie,ee,he),f=ee,v=he;break}case CMD$4.Q:{var j=o[$++],K=o[$++],q=o[$++],ie=o[$++];if(_){var U=S[w++];if(T+U>E){var G=(E-T)/U;quadraticSubdivide(f,j,q,G,tmpOutX),quadraticSubdivide(v,K,ie,G,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}T+=U}n.quadraticCurveTo(j,K,q,ie),f=q,v=ie;break}case CMD$4.A:var pe=o[$++],ce=o[$++],ye=o[$++],we=o[$++],ge=o[$++],Se=o[$++],$e=o[$++],oe=!o[$++],me=ye>we?ye:we,_e=mathAbs$2(ye-we)>.001,Te=ge+Se,Le=!1;if(_){var U=S[w++];T+U>E&&(Te=ge+Se*(E-T)/U,Le=!0),T+=U}if(_e&&n.ellipse?n.ellipse(pe,ce,ye,we,$e,ge,Te,oe):n.arc(pe,ce,me,ge,Te,oe),Le)break e;B&&(u=mathCos$3(ge)*ye+pe,d=mathSin$3(ge)*we+ce),f=mathCos$3(Te)*ye+pe,v=mathSin$3(Te)*we+ce;break;case CMD$4.R:u=f=o[$],d=v=o[$+1],g=o[$++],y=o[$++];var Ge=o[$++],se=o[$++];if(_){var U=S[w++];if(T+U>E){var J=E-T;n.moveTo(g,y),n.lineTo(g+mathMin$8(J,Ge),y),J-=Ge,J>0&&n.lineTo(g+Ge,y+mathMin$8(J,se)),J-=se,J>0&&n.lineTo(g+mathMax$8(Ge-J,0),y+se),J-=Ge,J>0&&n.lineTo(g,y+mathMax$8(se-J,0));break e}T+=U}n.rect(g,y,Ge,se);break;case CMD$4.Z:if(_){var U=S[w++];if(T+U>E){var G=(E-T)/U;n.lineTo(f*(1-G)+u*G,v*(1-G)+d*G);break e}T+=U}n.closePath(),f=u,v=d}}},a.prototype.clone=function(){var n=new a,r=this.data;return n.data=r.slice?r.slice():Array.prototype.slice.call(r),n._len=this._len,n},a.CMD=CMD$4,a.initDefaultProps=function(){var n=a.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),a}();function containStroke$4(a,n,r,o,s,l,c){if(s===0)return!1;var u=s,d=0,f=a;if(c>n+u&&c>o+u||c<n-u&&c<o-u||l>a+u&&l>r+u||l<a-u&&l<r-u)return!1;if(a!==r)d=(n-o)/(a-r),f=(a*o-r*n)/(a-r);else return Math.abs(l-a)<=u/2;var v=d*l-c+f,g=v*v/(d*d+1);return g<=u/2*u/2}function containStroke$3(a,n,r,o,s,l,c,u,d,f,v){if(d===0)return!1;var g=d;if(v>n+g&&v>o+g&&v>l+g&&v>u+g||v<n-g&&v<o-g&&v<l-g&&v<u-g||f>a+g&&f>r+g&&f>s+g&&f>c+g||f<a-g&&f<r-g&&f<s-g&&f<c-g)return!1;var y=cubicProjectPoint(a,n,r,o,s,l,c,u,f,v,null);return y<=g/2}function containStroke$2(a,n,r,o,s,l,c,u,d){if(c===0)return!1;var f=c;if(d>n+f&&d>o+f&&d>l+f||d<n-f&&d<o-f&&d<l-f||u>a+f&&u>r+f&&u>s+f||u<a-f&&u<r-f&&u<s-f)return!1;var v=quadraticProjectPoint(a,n,r,o,s,l,u,d,null);return v<=f/2}var PI2$6=Math.PI*2;function normalizeRadian(a){return a%=PI2$6,a<0&&(a+=PI2$6),a}var PI2$5=Math.PI*2;function containStroke$1(a,n,r,o,s,l,c,u,d){if(c===0)return!1;var f=c;u-=a,d-=n;var v=Math.sqrt(u*u+d*d);if(v-f>r||v+f<r)return!1;if(Math.abs(o-s)%PI2$5<1e-4)return!0;if(l){var g=o;o=normalizeRadian(s),s=normalizeRadian(g)}else o=normalizeRadian(o),s=normalizeRadian(s);o>s&&(s+=PI2$5);var y=Math.atan2(d,u);return y<0&&(y+=PI2$5),y>=o&&y<=s||y+PI2$5>=o&&y+PI2$5<=s}function windingLine(a,n,r,o,s,l){if(l>n&&l>o||l<n&&l<o||o===n)return 0;var c=(l-n)/(o-n),u=o<n?1:-1;(c===1||c===0)&&(u=o<n?.5:-.5);var d=c*(r-a)+a;return d===s?1/0:d>s?u:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(a,n){return Math.abs(a-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var a=extrema[0];extrema[0]=extrema[1],extrema[1]=a}function windingCubic(a,n,r,o,s,l,c,u,d,f){if(f>n&&f>o&&f>l&&f>u||f<n&&f<o&&f<l&&f<u)return 0;var v=cubicRootAt(n,o,l,u,f,roots);if(v===0)return 0;for(var g=0,y=-1,_=void 0,S=void 0,x=0;x<v;x++){var T=roots[x],w=T===0||T===1?.5:1,E=cubicAt(a,r,s,c,T);E<d||(y<0&&(y=cubicExtrema(n,o,l,u,extrema),extrema[1]<extrema[0]&&y>1&&swapExtrema(),_=cubicAt(n,o,l,u,extrema[0]),y>1&&(S=cubicAt(n,o,l,u,extrema[1]))),y===2?T<extrema[0]?g+=_<n?w:-w:T<extrema[1]?g+=S<_?w:-w:g+=u<S?w:-w:T<extrema[0]?g+=_<n?w:-w:g+=u<_?w:-w)}return g}function windingQuadratic(a,n,r,o,s,l,c,u){if(u>n&&u>o&&u>l||u<n&&u<o&&u<l)return 0;var d=quadraticRootAt(n,o,l,u,roots);if(d===0)return 0;var f=quadraticExtremum(n,o,l);if(f>=0&&f<=1){for(var v=0,g=quadraticAt$1(n,o,l,f),y=0;y<d;y++){var _=roots[y]===0||roots[y]===1?.5:1,S=quadraticAt$1(a,r,s,roots[y]);S<c||(roots[y]<f?v+=g<n?_:-_:v+=l<g?_:-_)}return v}else{var _=roots[0]===0||roots[0]===1?.5:1,S=quadraticAt$1(a,r,s,roots[0]);return S<c?0:l<n?_:-_}}function windingArc(a,n,r,o,s,l,c,u){if(u-=n,u>r||u<-r)return 0;var d=Math.sqrt(r*r-u*u);roots[0]=-d,roots[1]=d;var f=Math.abs(o-s);if(f<1e-4)return 0;if(f>=PI2$4-1e-4){o=0,s=PI2$4;var v=l?1:-1;return c>=roots[0]+a&&c<=roots[1]+a?v:0}if(o>s){var g=o;o=s,s=g}o<0&&(o+=PI2$4,s+=PI2$4);for(var y=0,_=0;_<2;_++){var S=roots[_];if(S+a>c){var x=Math.atan2(u,S),v=l?1:-1;x<0&&(x=PI2$4+x),(x>=o&&x<=s||x+PI2$4>=o&&x+PI2$4<=s)&&(x>Math.PI/2&&x<Math.PI*1.5&&(v=-v),y+=v)}}return y}function containPath(a,n,r,o,s){for(var l=a.data,c=a.len(),u=0,d=0,f=0,v=0,g=0,y,_,S=0;S<c;){var x=l[S++],T=S===1;switch(x===CMD$3.M&&S>1&&(r||(u+=windingLine(d,f,v,g,o,s))),T&&(d=l[S],f=l[S+1],v=d,g=f),x){case CMD$3.M:v=l[S++],g=l[S++],d=v,f=g;break;case CMD$3.L:if(r){if(containStroke$4(d,f,l[S],l[S+1],n,o,s))return!0}else u+=windingLine(d,f,l[S],l[S+1],o,s)||0;d=l[S++],f=l[S++];break;case CMD$3.C:if(r){if(containStroke$3(d,f,l[S++],l[S++],l[S++],l[S++],l[S],l[S+1],n,o,s))return!0}else u+=windingCubic(d,f,l[S++],l[S++],l[S++],l[S++],l[S],l[S+1],o,s)||0;d=l[S++],f=l[S++];break;case CMD$3.Q:if(r){if(containStroke$2(d,f,l[S++],l[S++],l[S],l[S+1],n,o,s))return!0}else u+=windingQuadratic(d,f,l[S++],l[S++],l[S],l[S+1],o,s)||0;d=l[S++],f=l[S++];break;case CMD$3.A:var w=l[S++],E=l[S++],P=l[S++],D=l[S++],L=l[S++],$=l[S++];S+=1;var O=!!(1-l[S++]);y=Math.cos(L)*P+w,_=Math.sin(L)*D+E,T?(v=y,g=_):u+=windingLine(d,f,y,_,o,s);var B=(o-w)*D/P+w;if(r){if(containStroke$1(w,E,D,L,L+$,O,n,B,s))return!0}else u+=windingArc(w,E,D,L,L+$,O,B,s);d=Math.cos(L+$)*P+w,f=Math.sin(L+$)*D+E;break;case CMD$3.R:v=d=l[S++],g=f=l[S++];var V=l[S++],F=l[S++];if(y=v+V,_=g+F,r){if(containStroke$4(v,g,y,g,n,o,s)||containStroke$4(y,g,y,_,n,o,s)||containStroke$4(y,_,v,_,n,o,s)||containStroke$4(v,_,v,g,n,o,s))return!0}else u+=windingLine(y,g,y,_,o,s),u+=windingLine(v,_,v,g,o,s);break;case CMD$3.Z:if(r){if(containStroke$4(d,f,v,g,n,o,s))return!0}else u+=windingLine(d,f,v,g,o,s);d=v,f=g;break}}return!r&&!isAroundEqual$1(f,g)&&(u+=windingLine(d,f,v,g,o,s)||0),u!==0}function contain$2(a,n,r){return containPath(a,0,!1,n,r)}function containStroke(a,n,r,o){return containPath(a,n,!0,r,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.update=function(){var r=this;a.prototype.update.call(this);var o=this.style;if(o.decal){var s=this._decalEl=this._decalEl||new n;s.buildPath===n.prototype.buildPath&&(s.buildPath=function(d){r.buildPath(d,r.shape)}),s.silent=!0;var l=s.style;for(var c in o)l[c]!==o[c]&&(l[c]=o[c]);l.fill=o.fill?o.decal:null,l.decal=null,l.shadowColor=null,o.strokeFirst&&(l.stroke=null);for(var u=0;u<pathCopyParams.length;++u)s[pathCopyParams[u]]=this[pathCopyParams[u]];s.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(r){var o=keys(r);this.shape=this.getDefaultShape();var s=this.getDefaultStyle();s&&this.useStyle(s);for(var l=0;l<o.length;l++){var c=o[l],u=r[c];c==="style"?this.style?extend(this.style,u):this.useStyle(u):c==="shape"?extend(this.shape,u):a.prototype.attrKV.call(this,c,u)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(isString(r)){var o=lum(r,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(r)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(r){var o=this.style.fill;if(isString(o)){var s=this.__zr,l=!!(s&&s.isDarkMode()),c=lum(r,0)<DARK_MODE_THRESHOLD;if(l===c)return o}},n.prototype.buildPath=function(r,o,s){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return!(o==null||o==="none"||!(r.lineWidth>0))},n.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},n.prototype.getBoundingRect=function(){var r=this._rect,o=this.style,s=!r;if(s){var l=!1;this.path||(l=!0,this.createPathProxy());var c=this.path;(l||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),r=c.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var u=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||s){u.copy(r);var d=o.strokeNoScale?this.getLineScale():1,f=o.lineWidth;if(!this.hasFill()){var v=this.strokeContainThreshold;f=Math.max(f,v??4)}d>1e-10&&(u.width+=f/d,u.height+=f/d,u.x-=f/d/2,u.y-=f/d/2)}return u}return r},n.prototype.contain=function(r,o){var s=this.transformCoordToLocal(r,o),l=this.getBoundingRect(),c=this.style;if(r=s[0],o=s[1],l.contain(r,o)){var u=this.path;if(this.hasStroke()){var d=c.lineWidth,f=c.strokeNoScale?this.getLineScale():1;if(f>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),containStroke(u,d/f,r,o)))return!0}if(this.hasFill())return contain$2(u,r,o)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(r){return this.animate("shape",r)},n.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(r,o){r==="shape"?this.setShape(o):a.prototype.attrKV.call(this,r,o)},n.prototype.setShape=function(r,o){var s=this.shape;return s||(s=this.shape={}),typeof r=="string"?s[r]=o:extend(s,r),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(r){return createObject(DEFAULT_PATH_STYLE,r)},n.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.shape&&!o.shape&&(o.shape=extend({},this.shape))},n.prototype._applyStateObj=function(r,o,s,l,c,u){a.prototype._applyStateObj.call(this,r,o,s,l,c,u);var d=!(o&&l),f;if(o&&o.shape?c?l?f=o.shape:(f=extend({},s.shape),extend(f,o.shape)):(f=extend({},l?this.shape:s.shape),extend(f,o.shape)):d&&(f=s.shape),f)if(c){this.shape=extend({},this.shape);for(var v={},g=keys(f),y=0;y<g.length;y++){var _=g[y];typeof f[_]=="object"?this.shape[_]=f[_]:v[_]=f[_]}this._transitionState(r,{shape:v},u)}else this.shape=f,this.dirtyShape()},n.prototype._mergeStates=function(r){for(var o=a.prototype._mergeStates.call(this,r),s,l=0;l<r.length;l++){var c=r[l];c.shape&&(s=s||{},this._mergeStyle(s,c.shape))}return s&&(o.shape=s),o},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(r){var o=function(l){__extends(c,l);function c(u){var d=l.call(this,u)||this;return r.init&&r.init.call(d,u),d}return c.prototype.getDefaultStyle=function(){return clone$4(r.style)},c.prototype.getDefaultShape=function(){return clone$4(r.shape)},c}(n);for(var s in r)typeof r[s]=="function"&&(o.prototype[s]=r[s]);return o},n.initDefaultProps=function(){var r=n.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),n}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return o!=null&&o!=="none"&&r.lineWidth>0},n.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},n.prototype.createStyle=function(r){return createObject(DEFAULT_TSPAN_STYLE,r)},n.prototype.setBoundingRect=function(r){this._rect=r},n.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var o=r.text;o!=null?o+="":o="";var s=getBoundingRect(o,r.font,r.textAlign,r.textBaseline);if(s.x+=r.x||0,s.y+=r.y||0,this.hasStroke()){var l=r.lineWidth;s.x-=l/2,s.y-=l/2,s.width+=l,s.height+=l}this._rect=s}return this._rect},n.initDefaultProps=function(){var r=n.prototype;r.dirtyRectTolerance=10}(),n}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var ZRImage=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.createStyle=function(r){return createObject(DEFAULT_IMAGE_STYLE,r)},n.prototype._getSize=function(r){var o=this.style,s=o[r];if(s!=null)return s;var l=isImageLike$1(o.image)?o.image:this.__image;if(!l)return 0;var c=r==="width"?"height":"width",u=o[c];return u==null?l[r]:l[r]/l[c]*u},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new BoundingRect(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},n}(Displayable);ZRImage.prototype.type="image";function buildPath$2(a,n){var r=n.x,o=n.y,s=n.width,l=n.height,c=n.r,u,d,f,v;s<0&&(r=r+s,s=-s),l<0&&(o=o+l,l=-l),typeof c=="number"?u=d=f=v=c:c instanceof Array?c.length===1?u=d=f=v=c[0]:c.length===2?(u=f=c[0],d=v=c[1]):c.length===3?(u=c[0],d=v=c[1],f=c[2]):(u=c[0],d=c[1],f=c[2],v=c[3]):u=d=f=v=0;var g;u+d>s&&(g=u+d,u*=s/g,d*=s/g),f+v>s&&(g=f+v,f*=s/g,v*=s/g),d+f>l&&(g=d+f,d*=l/g,f*=l/g),u+v>l&&(g=u+v,u*=l/g,v*=l/g),a.moveTo(r+u,o),a.lineTo(r+s-d,o),d!==0&&a.arc(r+s-d,o+d,d,-Math.PI/2,0),a.lineTo(r+s,o+l-f),f!==0&&a.arc(r+s-f,o+l-f,f,0,Math.PI/2),a.lineTo(r+v,o+l),v!==0&&a.arc(r+v,o+l-v,v,Math.PI/2,Math.PI),a.lineTo(r,o+u),u!==0&&a.arc(r+u,o+u,u,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(a,n,r){if(n){var o=n.x1,s=n.x2,l=n.y1,c=n.y2;a.x1=o,a.x2=s,a.y1=l,a.y2=c;var u=r&&r.lineWidth;return u&&(round$2(o*2)===round$2(s*2)&&(a.x1=a.x2=subPixelOptimize$1(o,u,!0)),round$2(l*2)===round$2(c*2)&&(a.y1=a.y2=subPixelOptimize$1(l,u,!0))),a}}function subPixelOptimizeRect$1(a,n,r){if(n){var o=n.x,s=n.y,l=n.width,c=n.height;a.x=o,a.y=s,a.width=l,a.height=c;var u=r&&r.lineWidth;return u&&(a.x=subPixelOptimize$1(o,u,!0),a.y=subPixelOptimize$1(s,u,!0),a.width=Math.max(subPixelOptimize$1(o+l,u,!1)-a.x,l===0?0:1),a.height=Math.max(subPixelOptimize$1(s+c,u,!1)-a.y,c===0?0:1)),a}}function subPixelOptimize$1(a,n,r){if(!n)return a;var o=round$2(a*2);return(o+round$2(n))%2===0?o/2:(o+(r?1:-1))/2}var RectShape=function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a}(),subPixelOptimizeOutputShape$1={},Rect$2=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(r,o){var s,l,c,u;if(this.subPixelOptimize){var d=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);s=d.x,l=d.y,c=d.width,u=d.height,d.r=o.r,o=d}else s=o.x,l=o.y,c=o.width,u=o.height;o.r?buildPath$2(r,o):r.rect(s,l,c,u)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(r),o}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var o=this._children[r];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},n.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):a.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(r){var o=this.innerTransformable;return o?o.getLocalTransform(r):a.prototype.getLocalTransform.call(this,r)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=r},n.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new BoundingRect(0,0,0,0),o=this._children,s=[],l=null,c=0;c<o.length;c++){var u=o[c],d=u.getBoundingRect(),f=u.getLocalTransform(s);f?(r.copy(d),r.applyTransform(f),l=l||r.clone(),l.union(r)):(l=l||d.clone(),l.union(d))}this._rect=l||r}return this._rect},n.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(r){},n.prototype._mergeStyle=function(r,o){if(!o)return r;var s=o.rich,l=r.rich||s&&{};return extend(r,o),s&&l?(this._mergeRich(l,s),r.rich=l):l&&(r.rich=l),r},n.prototype._mergeRich=function(r,o){for(var s=keys(o),l=0;l<s.length;l++){var c=s[l];r[c]=r[c]||{},extend(r[c],o[c])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(r){var o=this._children[this._childCursor];return(!o||!(o instanceof r))&&(o=new r),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},n.prototype._updatePlainTexts=function(){var r=this.style,o=r.font||DEFAULT_FONT,s=r.padding,l=getStyleText(r),c=parsePlainText(l,r),u=needDrawBackground(r),d=!!r.backgroundColor,f=c.outerHeight,v=c.outerWidth,g=c.contentWidth,y=c.lines,_=c.lineHeight,S=this._defaultStyle;this.isTruncated=!!c.isTruncated;var x=r.x||0,T=r.y||0,w=r.align||S.align||"left",E=r.verticalAlign||S.verticalAlign||"top",P=x,D=adjustTextY(T,c.contentHeight,E);if(u||s){var L=adjustTextX(x,v,w),$=adjustTextY(T,f,E);u&&this._renderBackground(r,r,L,$,v,f)}D+=_/2,s&&(P=getTextXForPadding(x,w,s),E==="top"?D+=s[0]:E==="bottom"&&(D-=s[2]));for(var O=0,B=!1,V=getFill("fill"in r?r.fill:(B=!0,S.fill)),F=getStroke("stroke"in r?r.stroke:!d&&(!S.autoStroke||B)?(O=DEFAULT_STROKE_LINE_WIDTH,S.stroke):null),U=r.textShadowBlur>0,G=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),W=c.calculatedLineHeight,j=0;j<y.length;j++){var K=this._getOrCreateChild(TSpan),q=K.createStyle();K.useStyle(q),q.text=y[j],q.x=P,q.y=D,w&&(q.textAlign=w),q.textBaseline="middle",q.opacity=r.opacity,q.strokeFirst=!0,U&&(q.shadowBlur=r.textShadowBlur||0,q.shadowColor=r.textShadowColor||"transparent",q.shadowOffsetX=r.textShadowOffsetX||0,q.shadowOffsetY=r.textShadowOffsetY||0),q.stroke=F,q.fill=V,F&&(q.lineWidth=r.lineWidth||O,q.lineDash=r.lineDash,q.lineDashOffset=r.lineDashOffset||0),q.font=o,setSeparateFont(q,r),D+=_,G&&K.setBoundingRect(new BoundingRect(adjustTextX(q.x,g,q.textAlign),adjustTextY(q.y,W,q.textBaseline),g,W))}},n.prototype._updateRichTexts=function(){var r=this.style,o=getStyleText(r),s=parseRichText(o,r),l=s.width,c=s.outerWidth,u=s.outerHeight,d=r.padding,f=r.x||0,v=r.y||0,g=this._defaultStyle,y=r.align||g.align,_=r.verticalAlign||g.verticalAlign;this.isTruncated=!!s.isTruncated;var S=adjustTextX(f,c,y),x=adjustTextY(v,u,_),T=S,w=x;d&&(T+=d[3],w+=d[0]);var E=T+l;needDrawBackground(r)&&this._renderBackground(r,r,S,x,c,u);for(var P=!!r.backgroundColor,D=0;D<s.lines.length;D++){for(var L=s.lines[D],$=L.tokens,O=$.length,B=L.lineHeight,V=L.width,F=0,U=T,G=E,W=O-1,j=void 0;F<O&&(j=$[F],!j.align||j.align==="left");)this._placeToken(j,r,B,w,U,"left",P),V-=j.width,U+=j.width,F++;for(;W>=0&&(j=$[W],j.align==="right");)this._placeToken(j,r,B,w,G,"right",P),V-=j.width,G-=j.width,W--;for(U+=(l-(U-T)-(E-G)-V)/2;F<=W;)j=$[F],this._placeToken(j,r,B,w,U+j.width/2,"center",P),U+=j.width,F++;w+=B}},n.prototype._placeToken=function(r,o,s,l,c,u,d){var f=o.rich[r.styleName]||{};f.text=r.text;var v=r.verticalAlign,g=l+s/2;v==="top"?g=l+r.height/2:v==="bottom"&&(g=l+s-r.height/2);var y=!r.isLineHolder&&needDrawBackground(f);y&&this._renderBackground(f,o,u==="right"?c-r.width:u==="center"?c-r.width/2:c,g-r.height/2,r.width,r.height);var _=!!f.backgroundColor,S=r.textPadding;S&&(c=getTextXForPadding(c,u,S),g-=r.height/2-S[0]-r.innerHeight/2);var x=this._getOrCreateChild(TSpan),T=x.createStyle();x.useStyle(T);var w=this._defaultStyle,E=!1,P=0,D=getFill("fill"in f?f.fill:"fill"in o?o.fill:(E=!0,w.fill)),L=getStroke("stroke"in f?f.stroke:"stroke"in o?o.stroke:!_&&!d&&(!w.autoStroke||E)?(P=DEFAULT_STROKE_LINE_WIDTH,w.stroke):null),$=f.textShadowBlur>0||o.textShadowBlur>0;T.text=r.text,T.x=c,T.y=g,$&&(T.shadowBlur=f.textShadowBlur||o.textShadowBlur||0,T.shadowColor=f.textShadowColor||o.textShadowColor||"transparent",T.shadowOffsetX=f.textShadowOffsetX||o.textShadowOffsetX||0,T.shadowOffsetY=f.textShadowOffsetY||o.textShadowOffsetY||0),T.textAlign=u,T.textBaseline="middle",T.font=r.font||DEFAULT_FONT,T.opacity=retrieve3(f.opacity,o.opacity,1),setSeparateFont(T,f),L&&(T.lineWidth=retrieve3(f.lineWidth,o.lineWidth,P),T.lineDash=retrieve2(f.lineDash,o.lineDash),T.lineDashOffset=o.lineDashOffset||0,T.stroke=L),D&&(T.fill=D);var O=r.contentWidth,B=r.contentHeight;x.setBoundingRect(new BoundingRect(adjustTextX(T.x,O,T.textAlign),adjustTextY(T.y,B,T.textBaseline),O,B))},n.prototype._renderBackground=function(r,o,s,l,c,u){var d=r.backgroundColor,f=r.borderWidth,v=r.borderColor,g=d&&d.image,y=d&&!g,_=r.borderRadius,S=this,x,T;if(y||r.lineHeight||f&&v){x=this._getOrCreateChild(Rect$2),x.useStyle(x.createStyle()),x.style.fill=null;var w=x.shape;w.x=s,w.y=l,w.width=c,w.height=u,w.r=_,x.dirtyShape()}if(y){var E=x.style;E.fill=d||null,E.fillOpacity=retrieve2(r.fillOpacity,1)}else if(g){T=this._getOrCreateChild(ZRImage),T.onload=function(){S.dirtyStyle()};var P=T.style;P.image=d.image,P.x=s,P.y=l,P.width=c,P.height=u}if(f&&v){var E=x.style;E.lineWidth=f,E.stroke=v,E.strokeOpacity=retrieve2(r.strokeOpacity,1),E.lineDash=r.borderDash,E.lineDashOffset=r.borderDashOffset||0,x.strokeContainThreshold=0,x.hasFill()&&x.hasStroke()&&(E.strokeFirst=!0,E.lineWidth*=2)}var D=(x||T).style;D.shadowBlur=r.shadowBlur||0,D.shadowColor=r.shadowColor||"transparent",D.shadowOffsetX=r.shadowOffsetX||0,D.shadowOffsetY=r.shadowOffsetY||0,D.opacity=retrieve3(r.opacity,o.opacity,1)},n.makeFont=function(r){var o="";return hasSeparateFont(r)&&(o=[r.fontStyle,r.fontWeight,parseFontSize(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||r.textFont||r.font},n}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?DEFAULT_FONT_SIZE+"px":a+"px"}function setSeparateFont(a,n){for(var r=0;r<FONT_PARTS.length;r++){var o=FONT_PARTS[r],s=n[o];s!=null&&(a[o]=s)}}function hasSeparateFont(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function normalizeTextStyle(a){return normalizeStyle(a),each$f(a.rich,normalizeStyle),a}function normalizeStyle(a){if(a){a.font=ZRText.makeFont(a);var n=a.align;n==="middle"&&(n="center"),a.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var r=a.verticalAlign;r==="center"&&(r="middle"),a.verticalAlign=r==null||VALID_TEXT_VERTICAL_ALIGN[r]?r:"top";var o=a.padding;o&&(a.padding=normalizeCssArray$1(a.padding))}}function getStroke(a,n){return a==null||n<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function getFill(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function getTextXForPadding(a,n,r){return n==="right"?a-r[1]:n==="center"?a+r[3]/2-r[1]/2:a+r[3]}function getStyleText(a){var n=a.text;return n!=null&&(n+=""),n}function needDrawBackground(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var getECData=makeInner(),setCommonECData=function(a,n,r,o){if(o){var s=getECData(o);s.dataIndex=r,s.dataType=n,s.seriesIndex=a,s.ssrType="chart",o.type==="group"&&o.traverse(function(l){var c=getECData(l);c.seriesIndex=a,c.dataIndex=r,c.dataType=n,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(a){return a!=null&&a!=="none"}function doChangeHoverState(a,n,r){a.onHoverStateChange&&(a.hoverState||0)!==r&&a.onHoverStateChange(n),a.hoverState=r}function singleEnterEmphasis(a){doChangeHoverState(a,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(a){a.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(a){doChangeHoverState(a,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(a){a.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(a){a.selected=!0}function singleLeaveSelect(a){a.selected=!1}function updateElementState(a,n,r){n(a,r)}function traverseUpdateState(a,n,r){updateElementState(a,n,r),a.isGroup&&a.traverse(function(o){updateElementState(o,n,r)})}function setStatesFlag(a,n){switch(n){case"emphasis":a.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":a.hoverState=HOVER_STATE_NORMAL;break;case"blur":a.hoverState=HOVER_STATE_BLUR;break;case"select":a.selected=!0}}function getFromStateStyle(a,n,r,o){for(var s=a.style,l={},c=0;c<n.length;c++){var u=n[c],d=s[u];l[u]=d??(o&&o[u])}for(var c=0;c<a.animators.length;c++){var f=a.animators[c];f.__fromStateTransition&&f.__fromStateTransition.indexOf(r)<0&&f.targetName==="style"&&f.saveTo(l,n)}return l}function createEmphasisDefaultState(a,n,r,o){var s=r&&indexOf(r,"select")>=0,l=!1;if(a instanceof Path){var c=getSavedStates(a),u=s&&c.selectFill||c.normalFill,d=s&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(u)||hasFillOrStroke(d)){o=o||{};var f=o.style||{};f.fill==="inherit"?(l=!0,o=extend({},o),f=extend({},f),f.fill=u):!hasFillOrStroke(f.fill)&&hasFillOrStroke(u)?(l=!0,o=extend({},o),f=extend({},f),f.fill=liftColor(u)):!hasFillOrStroke(f.stroke)&&hasFillOrStroke(d)&&(l||(o=extend({},o),f=extend({},f)),f.stroke=liftColor(d)),o.style=f}}if(o&&o.z2==null){l||(o=extend({},o));var v=a.z2EmphasisLift;o.z2=a.z2+(v??Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(a,n,r){if(r&&r.z2==null){r=extend({},r);var o=a.z2SelectLift;r.z2=a.z2+(o??Z2_SELECT_LIFT)}return r}function createBlurDefaultState(a,n,r){var o=indexOf(a.currentStates,n)>=0,s=a.style.opacity,l=o?null:getFromStateStyle(a,["opacity"],n,{opacity:1});r=r||{};var c=r.style||{};return c.opacity==null&&(r=extend({},r),c=extend({opacity:o?s:l.opacity*.1},c),r.style=c),r}function elementStateProxy(a,n){var r=this.states[a];if(this.style){if(a==="emphasis")return createEmphasisDefaultState(this,a,n,r);if(a==="blur")return createBlurDefaultState(this,a,r);if(a==="select")return createSelectDefaultState(this,a,r)}return r}function setDefaultStateProxy(a){a.stateProxy=elementStateProxy;var n=a.getTextContent(),r=a.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),r&&(r.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(a,n){!shouldSilent(a,n)&&!a.__highByOuter&&traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(a,n){!shouldSilent(a,n)&&!a.__highByOuter&&traverseUpdateState(a,singleLeaveEmphasis)}function enterEmphasis(a,n){a.__highByOuter|=1<<(n||0),traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasis(a,n){!(a.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(a,singleLeaveEmphasis)}function enterBlur(a){traverseUpdateState(a,singleEnterBlur)}function leaveBlur(a){traverseUpdateState(a,singleLeaveBlur)}function enterSelect(a){traverseUpdateState(a,singleEnterSelect)}function leaveSelect(a){traverseUpdateState(a,singleLeaveSelect)}function shouldSilent(a,n){return a.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(a){var n=a.getModel(),r=[],o=[];n.eachComponent(function(s,l){var c=getComponentStates(l),u=s==="series",d=u?a.getViewOfSeriesModel(l):a.getViewOfComponentModel(l);!u&&o.push(d),c.isBlured&&(d.group.traverse(function(f){singleLeaveBlur(f)}),u&&r.push(l)),c.isBlured=!1}),each$f(o,function(s){s&&s.toggleBlurSeries&&s.toggleBlurSeries(r,!1,n)})}function blurSeries(a,n,r,o){var s=o.getModel();r=r||"coordinateSystem";function l(f,v){for(var g=0;g<v.length;g++){var y=f.getItemGraphicEl(v[g]);y&&leaveBlur(y)}}if(a!=null&&!(!n||n==="none")){var c=s.getSeriesByIndex(a),u=c.coordinateSystem;u&&u.master&&(u=u.master);var d=[];s.eachSeries(function(f){var v=c===f,g=f.coordinateSystem;g&&g.master&&(g=g.master);var y=g&&u?g===u:v;if(!(r==="series"&&!v||r==="coordinateSystem"&&!y||n==="series"&&v)){var _=o.getViewOfSeriesModel(f);if(_.group.traverse(function(T){T.__highByOuter&&v&&n==="self"||singleEnterBlur(T)}),isArrayLike(n))l(f.getData(),n);else if(isObject$3(n))for(var S=keys(n),x=0;x<S.length;x++)l(f.getData(S[x]),n[S[x]]);d.push(f),getComponentStates(f).isBlured=!0}}),s.eachComponent(function(f,v){if(f!=="series"){var g=o.getViewOfComponentModel(v);g&&g.toggleBlurSeries&&g.toggleBlurSeries(d,!0,s)}})}}function blurComponent(a,n,r){if(!(a==null||n==null)){var o=r.getModel().getComponent(a,n);if(o){getComponentStates(o).isBlured=!0;var s=r.getViewOfComponentModel(o);!s||!s.focusBlurEnabled||s.group.traverse(function(l){singleEnterBlur(l)})}}}function blurSeriesFromHighlightPayload(a,n,r){var o=a.seriesIndex,s=a.getData(n.dataType);if(s){var l=queryDataIndex(s,n);l=(isArray$1(l)?l[0]:l)||0;var c=s.getItemGraphicEl(l);if(!c)for(var u=s.count(),d=0;!c&&d<u;)c=s.getItemGraphicEl(d++);if(c){var f=getECData(c);blurSeries(o,f.focus,f.blurScope,r)}else{var v=a.get(["emphasis","focus"]),g=a.get(["emphasis","blurScope"]);v!=null&&blurSeries(o,v,g,r)}}}function findComponentHighDownDispatchers(a,n,r,o){var s={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||n==null||r==null)return s;var l=o.getModel().getComponent(a,n);if(!l)return s;var c=o.getViewOfComponentModel(l);if(!c||!c.findHighDownDispatchers)return s;for(var u=c.findHighDownDispatchers(r),d,f=0;f<u.length;f++)if(getECData(u[f]).focus==="self"){d=!0;break}return{focusSelf:d,dispatchers:u}}function handleGlobalMouseOverForHighDown(a,n,r){var o=getECData(a),s=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r),l=s.dispatchers,c=s.focusSelf;l?(c&&blurComponent(o.componentMainType,o.componentIndex,r),each$f(l,function(u){return enterEmphasisWhenMouseOver(u,n)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,r),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,r),enterEmphasisWhenMouseOver(a,n))}function handleGlobalMouseOutForHighDown(a,n,r){allLeaveBlur(r);var o=getECData(a),s=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r).dispatchers;s?each$f(s,function(l){return leaveEmphasisWhenMouseOut(l,n)}):leaveEmphasisWhenMouseOut(a,n)}function toggleSelectionFromPayload(a,n,r){if(isSelectChangePayload(n)){var o=n.dataType,s=a.getData(o),l=queryDataIndex(s,n);isArray$1(l)||(l=[l]),a[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](l,o)}}function updateSeriesElementSelection(a){var n=a.getAllData();each$f(n,function(r){var o=r.data,s=r.type;o.eachItemGraphicEl(function(l,c){a.isSelected(c,s)?enterSelect(l):leaveSelect(l)})})}function getAllSelectedIndices(a){var n=[];return a.eachSeries(function(r){var o=r.getAllData();each$f(o,function(s){s.data;var l=s.type,c=r.getSelectedDataIndices();if(c.length>0){var u={dataIndex:c,seriesIndex:r.seriesIndex};l!=null&&(u.dataType=l),n.push(u)}})}),n}function enableHoverEmphasis(a,n,r){setAsHighDownDispatcher(a,!0),traverseUpdateState(a,setDefaultStateProxy),enableHoverFocus(a,n,r)}function disableHoverEmphasis(a){setAsHighDownDispatcher(a,!1)}function toggleHoverEmphasis(a,n,r,o){o?disableHoverEmphasis(a):enableHoverEmphasis(a,n,r)}function enableHoverFocus(a,n,r){var o=getECData(a);n!=null?(o.focus=n,o.blurScope=r):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(a,n,r,o){r=r||"itemStyle";for(var s=0;s<OTHER_STATES.length;s++){var l=OTHER_STATES[s],c=n.getModel([l,r]),u=a.ensureState(l);u.style=o?o(c):c[defaultStyleGetterMap[r]]()}}function setAsHighDownDispatcher(a,n){var r=n===!1,o=a;a.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!r||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!r)}function isHighDownDispatcher(a){return!!(a&&a.__highDownDispatcher)}function enableComponentHighDownFeatures(a,n,r){var o=getECData(a);o.componentMainType=n.mainType,o.componentIndex=n.componentIndex,o.componentHighDownName=r}function getHighlightDigit(a){var n=_highlightKeyMap[a];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[a]=_highlightNextDigit++),n}function isSelectChangePayload(a){var n=a.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(a){var n=a.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(a){var n=getSavedStates(a);n.normalFill=a.style.fill,n.normalStroke=a.style.stroke;var r=a.states.select||{};n.selectFill=r.style&&r.style.fill||null,n.selectStroke=r.style&&r.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(a,n){if(n){var r=a.data,o=a.len(),s,l,c,u,d,f,v=CMD$2.M,g=CMD$2.C,y=CMD$2.L,_=CMD$2.R,S=CMD$2.A,x=CMD$2.Q;for(c=0,u=0;c<o;){switch(s=r[c++],u=c,l=0,s){case v:l=1;break;case y:l=1;break;case g:l=3;break;case x:l=2;break;case S:var T=n[4],w=n[5],E=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),P=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),D=mathAtan2(-n[1]/P,n[0]/E);r[c]*=E,r[c++]+=T,r[c]*=P,r[c++]+=w,r[c++]*=E,r[c++]*=P,r[c++]+=D,r[c++]+=D,c+=2,u=c;break;case _:f[0]=r[c++],f[1]=r[c++],applyTransform$1(f,f,n),r[u++]=f[0],r[u++]=f[1],f[0]+=r[c++],f[1]+=r[c++],applyTransform$1(f,f,n),r[u++]=f[0],r[u++]=f[1]}for(d=0;d<l;d++){var L=points$2[d];L[0]=r[c++],L[1]=r[c++],applyTransform$1(L,L,n),r[u++]=L[0],r[u++]=L[1]}}a.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function vRatio(a,n){return(a[0]*n[0]+a[1]*n[1])/(vMag(a)*vMag(n))}function vAngle(a,n){return(a[0]*n[1]<a[1]*n[0]?-1:1)*Math.acos(vRatio(a,n))}function processArc(a,n,r,o,s,l,c,u,d,f,v){var g=d*(PI$7/180),y=mathCos$2(g)*(a-r)/2+mathSin$2(g)*(n-o)/2,_=-1*mathSin$2(g)*(a-r)/2+mathCos$2(g)*(n-o)/2,S=y*y/(c*c)+_*_/(u*u);S>1&&(c*=mathSqrt$1(S),u*=mathSqrt$1(S));var x=(s===l?-1:1)*mathSqrt$1((c*c*(u*u)-c*c*(_*_)-u*u*(y*y))/(c*c*(_*_)+u*u*(y*y)))||0,T=x*c*_/u,w=x*-u*y/c,E=(a+r)/2+mathCos$2(g)*T-mathSin$2(g)*w,P=(n+o)/2+mathSin$2(g)*T+mathCos$2(g)*w,D=vAngle([1,0],[(y-T)/c,(_-w)/u]),L=[(y-T)/c,(_-w)/u],$=[(-1*y-T)/c,(-1*_-w)/u],O=vAngle(L,$);if(vRatio(L,$)<=-1&&(O=PI$7),vRatio(L,$)>=1&&(O=0),O<0){var B=Math.round(O/PI$7*1e6)/1e6;O=PI$7*2+B%2*PI$7}v.addData(f,E,P,c,u,D,O,g,l)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(a){var n=new PathProxy;if(!a)return n;var r=0,o=0,s=r,l=o,c,u=PathProxy.CMD,d=a.match(commandReg);if(!d)return n;for(var f=0;f<d.length;f++){for(var v=d[f],g=v.charAt(0),y=void 0,_=v.match(numberReg$1)||[],S=_.length,x=0;x<S;x++)_[x]=parseFloat(_[x]);for(var T=0;T<S;){var w=void 0,E=void 0,P=void 0,D=void 0,L=void 0,$=void 0,O=void 0,B=r,V=o,F=void 0,U=void 0;switch(g){case"l":r+=_[T++],o+=_[T++],y=u.L,n.addData(y,r,o);break;case"L":r=_[T++],o=_[T++],y=u.L,n.addData(y,r,o);break;case"m":r+=_[T++],o+=_[T++],y=u.M,n.addData(y,r,o),s=r,l=o,g="l";break;case"M":r=_[T++],o=_[T++],y=u.M,n.addData(y,r,o),s=r,l=o,g="L";break;case"h":r+=_[T++],y=u.L,n.addData(y,r,o);break;case"H":r=_[T++],y=u.L,n.addData(y,r,o);break;case"v":o+=_[T++],y=u.L,n.addData(y,r,o);break;case"V":o=_[T++],y=u.L,n.addData(y,r,o);break;case"C":y=u.C,n.addData(y,_[T++],_[T++],_[T++],_[T++],_[T++],_[T++]),r=_[T-2],o=_[T-1];break;case"c":y=u.C,n.addData(y,_[T++]+r,_[T++]+o,_[T++]+r,_[T++]+o,_[T++]+r,_[T++]+o),r+=_[T-2],o+=_[T-1];break;case"S":w=r,E=o,F=n.len(),U=n.data,c===u.C&&(w+=r-U[F-4],E+=o-U[F-3]),y=u.C,B=_[T++],V=_[T++],r=_[T++],o=_[T++],n.addData(y,w,E,B,V,r,o);break;case"s":w=r,E=o,F=n.len(),U=n.data,c===u.C&&(w+=r-U[F-4],E+=o-U[F-3]),y=u.C,B=r+_[T++],V=o+_[T++],r+=_[T++],o+=_[T++],n.addData(y,w,E,B,V,r,o);break;case"Q":B=_[T++],V=_[T++],r=_[T++],o=_[T++],y=u.Q,n.addData(y,B,V,r,o);break;case"q":B=_[T++]+r,V=_[T++]+o,r+=_[T++],o+=_[T++],y=u.Q,n.addData(y,B,V,r,o);break;case"T":w=r,E=o,F=n.len(),U=n.data,c===u.Q&&(w+=r-U[F-4],E+=o-U[F-3]),r=_[T++],o=_[T++],y=u.Q,n.addData(y,w,E,r,o);break;case"t":w=r,E=o,F=n.len(),U=n.data,c===u.Q&&(w+=r-U[F-4],E+=o-U[F-3]),r+=_[T++],o+=_[T++],y=u.Q,n.addData(y,w,E,r,o);break;case"A":P=_[T++],D=_[T++],L=_[T++],$=_[T++],O=_[T++],B=r,V=o,r=_[T++],o=_[T++],y=u.A,processArc(B,V,r,o,$,O,P,D,L,y,n);break;case"a":P=_[T++],D=_[T++],L=_[T++],$=_[T++],O=_[T++],B=r,V=o,r+=_[T++],o+=_[T++],y=u.A,processArc(B,V,r,o,$,O,P,D,L,y,n);break}}(g==="z"||g==="Z")&&(y=u.Z,n.addData(y),r=s,o=l),c=y}return n.toStatic(),n}var SVGPath=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.applyTransform=function(r){},n}(Path);function isPathProxy(a){return a.setData!=null}function createPathOptions(a,n){var r=createPathProxyFromString(a),o=extend({},n);return o.buildPath=function(s){if(isPathProxy(s)){s.setData(r.data);var l=s.getContext();l&&s.rebuildPath(l,1)}else{var l=s;r.rebuildPath(l,1)}},o.applyTransform=function(s){transformPath(r,s),this.dirtyShape()},o}function createFromString(a,n){return new SVGPath(createPathOptions(a,n))}function extendFromString(a,n){var r=createPathOptions(a,n),o=function(s){__extends(l,s);function l(c){var u=s.call(this,c)||this;return u.applyTransform=r.applyTransform,u.buildPath=r.buildPath,u}return l}(SVGPath);return o}function mergePath$1(a,n){for(var r=[],o=a.length,s=0;s<o;s++){var l=a[s];r.push(l.getUpdatedPathProxy(!0))}var c=new Path(n);return c.createPathProxy(),c.buildPath=function(u){if(isPathProxy(u)){u.appendPath(r);var d=u.getContext();d&&u.rebuildPath(d,1)}},c}function clonePath(a,n){n=n||{};var r=new Path;return a.shape&&r.setShape(a.shape),r.setStyle(a.style),n.bakeTransform?transformPath(r.path,a.getComputedTransform()):n.toLocal?r.setLocalTransform(a.getComputedTransform()):r.copyTransform(a),r.buildPath=a.buildPath,r.applyTransform=r.applyTransform,r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r}var CircleShape=function(){function a(){this.cx=0,this.cy=0,this.r=0}return a}(),Circle=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(r,o){r.moveTo(o.cx+o.r,o.cy),r.arc(o.cx,o.cy,o.r,0,Math.PI*2)},n}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a}(),Ellipse=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(r,o){var s=.5522848,l=o.cx,c=o.cy,u=o.rx,d=o.ry,f=u*s,v=d*s;r.moveTo(l-u,c),r.bezierCurveTo(l-u,c-v,l-f,c-d,l,c-d),r.bezierCurveTo(l+f,c-d,l+u,c-v,l+u,c),r.bezierCurveTo(l+u,c+v,l+f,c+d,l,c+d),r.bezierCurveTo(l-f,c+d,l-u,c+v,l-u,c),r.closePath()},n}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(a,n,r,o,s,l,c,u){var d=r-a,f=o-n,v=c-s,g=u-l,y=g*d-v*f;if(!(y*y<e))return y=(v*(n-l)-g*(a-s))/y,[a+y*d,n+y*f]}function computeCornerTangents(a,n,r,o,s,l,c){var u=a-r,d=n-o,f=(c?l:-l)/mathSqrt(u*u+d*d),v=f*d,g=-f*u,y=a+v,_=n+g,S=r+v,x=o+g,T=(y+S)/2,w=(_+x)/2,E=S-y,P=x-_,D=E*E+P*P,L=s-l,$=y*x-S*_,O=(P<0?-1:1)*mathSqrt(mathMax$7(0,L*L*D-$*$)),B=($*P-E*O)/D,V=(-$*E-P*O)/D,F=($*P+E*O)/D,U=(-$*E+P*O)/D,G=B-T,W=V-w,j=F-T,K=U-w;return G*G+W*W>j*j+K*K&&(B=F,V=U),{cx:B,cy:V,x0:-v,y0:-g,x1:B*(s/L-1),y1:V*(s/L-1)}}function normalizeCornerRadius(a){var n;if(isArray$1(a)){var r=a.length;if(!r)return a;r===1?n=[a[0],a[0],0,0]:r===2?n=[a[0],a[0],a[1],a[1]]:r===3?n=a.concat(a[2]):n=a}else n=[a,a,a,a];return n}function buildPath$1(a,n){var r,o=mathMax$7(n.r,0),s=mathMax$7(n.r0||0,0),l=o>0,c=s>0;if(!(!l&&!c)){if(l||(o=s,s=0),s>o){var u=o;o=s,s=u}var d=n.startAngle,f=n.endAngle;if(!(isNaN(d)||isNaN(f))){var v=n.cx,g=n.cy,y=!!n.clockwise,_=mathAbs$1(f-d),S=_>PI2$3&&_%PI2$3;if(S>e&&(_=S),!(o>e))a.moveTo(v,g);else if(_>PI2$3-e)a.moveTo(v+o*mathCos$1(d),g+o*mathSin$1(d)),a.arc(v,g,o,d,f,!y),s>e&&(a.moveTo(v+s*mathCos$1(f),g+s*mathSin$1(f)),a.arc(v,g,s,f,d,y));else{var x=void 0,T=void 0,w=void 0,E=void 0,P=void 0,D=void 0,L=void 0,$=void 0,O=void 0,B=void 0,V=void 0,F=void 0,U=void 0,G=void 0,W=void 0,j=void 0,K=o*mathCos$1(d),q=o*mathSin$1(d),ie=s*mathCos$1(f),ee=s*mathSin$1(f),he=_>e;if(he){var pe=n.cornerRadius;pe&&(r=normalizeCornerRadius(pe),x=r[0],T=r[1],w=r[2],E=r[3]);var ce=mathAbs$1(o-s)/2;if(P=mathMin$7(ce,w),D=mathMin$7(ce,E),L=mathMin$7(ce,x),$=mathMin$7(ce,T),V=O=mathMax$7(P,D),F=B=mathMax$7(L,$),(O>e||B>e)&&(U=o*mathCos$1(f),G=o*mathSin$1(f),W=s*mathCos$1(d),j=s*mathSin$1(d),_<PI$6)){var ye=intersect(K,q,W,j,U,G,ie,ee);if(ye){var we=K-ye[0],ge=q-ye[1],Se=U-ye[0],$e=G-ye[1],oe=1/mathSin$1(mathACos((we*Se+ge*$e)/(mathSqrt(we*we+ge*ge)*mathSqrt(Se*Se+$e*$e)))/2),me=mathSqrt(ye[0]*ye[0]+ye[1]*ye[1]);V=mathMin$7(O,(o-me)/(oe+1)),F=mathMin$7(B,(s-me)/(oe-1))}}}if(!he)a.moveTo(v+K,g+q);else if(V>e){var _e=mathMin$7(w,V),Te=mathMin$7(E,V),Le=computeCornerTangents(W,j,K,q,o,_e,y),Ge=computeCornerTangents(U,G,ie,ee,o,Te,y);a.moveTo(v+Le.cx+Le.x0,g+Le.cy+Le.y0),V<O&&_e===Te?a.arc(v+Le.cx,g+Le.cy,V,mathATan2(Le.y0,Le.x0),mathATan2(Ge.y0,Ge.x0),!y):(_e>0&&a.arc(v+Le.cx,g+Le.cy,_e,mathATan2(Le.y0,Le.x0),mathATan2(Le.y1,Le.x1),!y),a.arc(v,g,o,mathATan2(Le.cy+Le.y1,Le.cx+Le.x1),mathATan2(Ge.cy+Ge.y1,Ge.cx+Ge.x1),!y),Te>0&&a.arc(v+Ge.cx,g+Ge.cy,Te,mathATan2(Ge.y1,Ge.x1),mathATan2(Ge.y0,Ge.x0),!y))}else a.moveTo(v+K,g+q),a.arc(v,g,o,d,f,!y);if(!(s>e)||!he)a.lineTo(v+ie,g+ee);else if(F>e){var _e=mathMin$7(x,F),Te=mathMin$7(T,F),Le=computeCornerTangents(ie,ee,U,G,s,-Te,y),Ge=computeCornerTangents(K,q,W,j,s,-_e,y);a.lineTo(v+Le.cx+Le.x0,g+Le.cy+Le.y0),F<B&&_e===Te?a.arc(v+Le.cx,g+Le.cy,F,mathATan2(Le.y0,Le.x0),mathATan2(Ge.y0,Ge.x0),!y):(Te>0&&a.arc(v+Le.cx,g+Le.cy,Te,mathATan2(Le.y0,Le.x0),mathATan2(Le.y1,Le.x1),!y),a.arc(v,g,s,mathATan2(Le.cy+Le.y1,Le.cx+Le.x1),mathATan2(Ge.cy+Ge.y1,Ge.cx+Ge.x1),y),_e>0&&a.arc(v+Ge.cx,g+Ge.cy,_e,mathATan2(Ge.y1,Ge.x1),mathATan2(Ge.y0,Ge.x0),!y))}else a.lineTo(v+ie,g+ee),a.arc(v,g,s,f,d,y)}a.closePath()}}}var SectorShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a}(),Sector=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(r,o){buildPath$1(r,o)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Path);Sector.prototype.type="sector";var RingShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a}(),Ring=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(r,o){var s=o.cx,l=o.cy,c=Math.PI*2;r.moveTo(s+o.r,l),r.arc(s,l,o.r,0,c,!1),r.moveTo(s+o.r0,l),r.arc(s,l,o.r0,0,c,!0)},n}(Path);Ring.prototype.type="ring";function smoothBezier(a,n,r,o){var s=[],l=[],c=[],u=[],d,f,v,g;if(o){v=[1/0,1/0],g=[-1/0,-1/0];for(var y=0,_=a.length;y<_;y++)min$1(v,v,a[y]),max$1(g,g,a[y]);min$1(v,v,o[0]),max$1(g,g,o[1])}for(var y=0,_=a.length;y<_;y++){var S=a[y];if(r)d=a[y?y-1:_-1],f=a[(y+1)%_];else if(y===0||y===_-1){s.push(clone$3(a[y]));continue}else d=a[y-1],f=a[y+1];sub(l,f,d),scale$2(l,l,n);var x=distance(S,d),T=distance(S,f),w=x+T;w!==0&&(x/=w,T/=w),scale$2(c,l,-x),scale$2(u,l,T);var E=add([],S,c),P=add([],S,u);o&&(max$1(E,E,v),min$1(E,E,g),max$1(P,P,v),min$1(P,P,g)),s.push(E),s.push(P)}return r&&s.push(s.shift()),s}function buildPath(a,n,r){var o=n.smooth,s=n.points;if(s&&s.length>=2){if(o){var l=smoothBezier(s,o,r,n.smoothConstraint);a.moveTo(s[0][0],s[0][1]);for(var c=s.length,u=0;u<(r?c:c-1);u++){var d=l[u*2],f=l[u*2+1],v=s[(u+1)%c];a.bezierCurveTo(d[0],d[1],f[0],f[1],v[0],v[1])}}else{a.moveTo(s[0][0],s[0][1]);for(var u=1,g=s.length;u<g;u++)a.lineTo(s[u][0],s[u][1])}r&&a.closePath()}}var PolygonShape=function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a}(),Polygon=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(r,o){buildPath(r,o,!0)},n}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a}(),Polyline$1=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(r,o){buildPath(r,o,!1)},n}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Line$2=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(r,o){var s,l,c,u;if(this.subPixelOptimize){var d=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);s=d.x1,l=d.y1,c=d.x2,u=d.y2}else s=o.x1,l=o.y1,c=o.x2,u=o.y2;var f=o.percent;f!==0&&(r.moveTo(s,l),f<1&&(c=s*(1-f)+c*f,u=l*(1-f)+u*f),r.lineTo(c,u))},n.prototype.pointAt=function(r){var o=this.shape;return[o.x1*(1-r)+o.x2*r,o.y1*(1-r)+o.y2*r]},n}(Path);Line$2.prototype.type="line";var out=[],BezierCurveShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a}();function someVectorAt(a,n,r){var o=a.cpx2,s=a.cpy2;return o!=null||s!=null?[(r?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,n),(r?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,n)]:[(r?quadraticDerivativeAt:quadraticAt$1)(a.x1,a.cpx1,a.x2,n),(r?quadraticDerivativeAt:quadraticAt$1)(a.y1,a.cpy1,a.y2,n)]}var BezierCurve=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(r,o){var s=o.x1,l=o.y1,c=o.x2,u=o.y2,d=o.cpx1,f=o.cpy1,v=o.cpx2,g=o.cpy2,y=o.percent;y!==0&&(r.moveTo(s,l),v==null||g==null?(y<1&&(quadraticSubdivide(s,d,c,y,out),d=out[1],c=out[2],quadraticSubdivide(l,f,u,y,out),f=out[1],u=out[2]),r.quadraticCurveTo(d,f,c,u)):(y<1&&(cubicSubdivide(s,d,v,c,y,out),d=out[1],v=out[2],c=out[3],cubicSubdivide(l,f,g,u,y,out),f=out[1],g=out[2],u=out[3]),r.bezierCurveTo(d,f,v,g,c,u)))},n.prototype.pointAt=function(r){return someVectorAt(this.shape,r,!1)},n.prototype.tangentAt=function(r){var o=someVectorAt(this.shape,r,!0);return normalize$4(o,o)},n}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Arc=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(r,o){var s=o.cx,l=o.cy,c=Math.max(o.r,0),u=o.startAngle,d=o.endAngle,f=o.clockwise,v=Math.cos(u),g=Math.sin(u);r.moveTo(v*c+s,g*c+l),r.arc(s,l,c,u,d,!f)},n}(Path);Arc.prototype.type="arc";var CompoundPath=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="compound",r}return n.prototype._updatePathDirty=function(){for(var r=this.shape.paths,o=this.shapeChanged(),s=0;s<r.length;s++)o=o||r[s].shapeChanged();o&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],o=this.getGlobalScale(),s=0;s<r.length;s++)r[s].path||r[s].createPathProxy(),r[s].path.setScale(o[0],o[1],r[s].segmentIgnoreThreshold)},n.prototype.buildPath=function(r,o){for(var s=o.paths||[],l=0;l<s.length;l++)s[l].buildPath(r,s[l].shape,!0)},n.prototype.afterBrush=function(){for(var r=this.shape.paths||[],o=0;o<r.length;o++)r[o].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n}(Path),Gradient=function(){function a(n){this.colorStops=n||[]}return a.prototype.addColorStop=function(n,r){this.colorStops.push({offset:n,color:r})},a}(),LinearGradient=function(a){__extends(n,a);function n(r,o,s,l,c,u){var d=a.call(this,c)||this;return d.x=r??0,d.y=o??0,d.x2=s??1,d.y2=l??0,d.type="linear",d.global=u||!1,d}return n}(Gradient),RadialGradient=function(a){__extends(n,a);function n(r,o,s,l,c){var u=a.call(this,l)||this;return u.x=r??.5,u.y=o??.5,u.r=s??.5,u.type="radial",u.global=c||!1,u}return n}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function a(n,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point;for(var o=0;o<2;o++)this._axes[o]=new Point;n&&this.fromBoundingRect(n,r)}return a.prototype.fromBoundingRect=function(n,r){var o=this._corners,s=this._axes,l=n.x,c=n.y,u=l+n.width,d=c+n.height;if(o[0].set(l,c),o[1].set(u,c),o[2].set(u,d),o[3].set(l,d),r)for(var f=0;f<4;f++)o[f].transform(r);Point.sub(s[0],o[1],o[0]),Point.sub(s[1],o[3],o[0]),s[0].normalize(),s[1].normalize();for(var f=0;f<2;f++)this._origin[f]=s[f].dot(o[0])},a.prototype.intersect=function(n,r){var o=!0,s=!r;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,s,1)&&(o=!1,s)||!this._intersectCheckOneSide(n,this,minTv,maxTv,s,-1)&&(o=!1,s)||s||Point.copy(r,o?minTv:maxTv),o},a.prototype._intersectCheckOneSide=function(n,r,o,s,l,c){for(var u=!0,d=0;d<2;d++){var f=this._axes[d];if(this._getProjMinMaxOnAxis(d,n._corners,extent),this._getProjMinMaxOnAxis(d,r._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(u=!1,l)return u;var v=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(v,g)>s.len()&&(v<g?Point.scale(s,f,-v*c):Point.scale(s,f,g*c))}else if(o){var v=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(v,g)<o.len()&&(v<g?Point.scale(o,f,v*c):Point.scale(o,f,-g*c))}}return u},a.prototype._getProjMinMaxOnAxis=function(n,r,o){for(var s=this._axes[n],l=this._origin,c=r[0].dot(s)+l[n],u=c,d=c,f=1;f<r.length;f++){var v=r[f].dot(s)+l[n];u=Math.min(v,u),d=Math.max(v,d)}o[0]=u,o[1]=d},a}(),m=[],IncrementalDisplayable=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return n.prototype.traverse=function(r,o){r.call(o,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(r,o){o?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},n.prototype.addDisplayables=function(r,o){o=o||!1;for(var s=0;s<r.length;s++)this.addDisplayable(r[s],o)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(r){for(var o=this._cursor;o<this._displayables.length;o++)r&&r(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)r&&r(this._temporaryDisplayables[o])},n.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var o=this._displayables[r];o.parent=this,o.update(),o.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var o=this._temporaryDisplayables[r];o.parent=this,o.update(),o.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new BoundingRect(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var s=this._displayables[o],l=s.getBoundingRect().clone();s.needLocalTransform()&&l.applyTransform(s.getLocalTransform(m)),r.union(l)}this._rect=r}return this._rect},n.prototype.contain=function(r,o){var s=this.transformCoordToLocal(r,o),l=this.getBoundingRect();if(l.contain(s[0],s[1]))for(var c=0;c<this._displayables.length;c++){var u=this._displayables[c];if(u.contain(r,o))return!0}return!1},n}(Displayable),transitionStore=makeInner();function getAnimationConfig(a,n,r,o,s){var l;if(n&&n.ecModel){var c=n.ecModel.getUpdatePayload();l=c&&c.animation}var u=n&&n.isAnimationEnabled(),d=a==="update";if(u){var f=void 0,v=void 0,g=void 0;o?(f=retrieve2(o.duration,200),v=retrieve2(o.easing,"cubicOut"),g=0):(f=n.getShallow(d?"animationDurationUpdate":"animationDuration"),v=n.getShallow(d?"animationEasingUpdate":"animationEasing"),g=n.getShallow(d?"animationDelayUpdate":"animationDelay")),l&&(l.duration!=null&&(f=l.duration),l.easing!=null&&(v=l.easing),l.delay!=null&&(g=l.delay)),isFunction(g)&&(g=g(r,s)),isFunction(f)&&(f=f(r));var y={duration:f||0,delay:g,easing:v};return y}else return null}function animateOrSetProps(a,n,r,o,s,l,c){var u=!1,d;isFunction(s)?(c=l,l=s,s=null):isObject$3(s)&&(l=s.cb,c=s.during,u=s.isFrom,d=s.removeOpt,s=s.dataIndex);var f=a==="leave";f||n.stopAnimation("leave");var v=getAnimationConfig(a,o,s,f?d||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(n,s):null);if(v&&v.duration>0){var g=v.duration,y=v.delay,_=v.easing,S={duration:g,delay:y||0,easing:_,done:l,force:!!l||!!c,setToFinal:!f,scope:a,during:c};u?n.animateFrom(r,S):n.animateTo(r,S)}else n.stopAnimation(),!u&&n.attr(r),c&&c(1),l&&l()}function updateProps$1(a,n,r,o,s,l){animateOrSetProps("update",a,n,r,o,s,l)}function initProps(a,n,r,o,s,l){animateOrSetProps("enter",a,n,r,o,s,l)}function isElementRemoved(a){if(!a.__zr)return!0;for(var n=0;n<a.animators.length;n++){var r=a.animators[n];if(r.scope==="leave")return!0}return!1}function removeElement(a,n,r,o,s,l){isElementRemoved(a)||animateOrSetProps("leave",a,n,r,o,s,l)}function fadeOutDisplayable(a,n,r,o){a.removeTextContent(),a.removeTextGuideLine(),removeElement(a,{style:{opacity:0}},n,r,o)}function removeElementWithFadeOut(a,n,r){function o(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(s){s.isGroup||fadeOutDisplayable(s,n,r,o)}):fadeOutDisplayable(a,n,r,o)}function saveOldStyle(a){transitionStore(a).oldStyle=a.style}function getOldStyle(a){return transitionStore(a).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(a){return Path.extend(a)}var extendPathFromString=extendFromString;function extendPath(a,n){return extendPathFromString(a,n)}function registerShape(a,n){_customShapeMap[a]=n}function getShapeClass(a){if(_customShapeMap.hasOwnProperty(a))return _customShapeMap[a]}function makePath(a,n,r,o){var s=createFromString(a,n);return r&&(o==="center"&&(r=centerGraphic(r,s.getBoundingRect())),resizePath(s,r)),s}function makeImage(a,n,r){var o=new ZRImage({style:{image:a,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(s){if(r==="center"){var l={width:s.width,height:s.height};o.setStyle(centerGraphic(n,l))}}});return o}function centerGraphic(a,n){var r=n.width/n.height,o=a.height*r,s;o<=a.width?s=a.height:(o=a.width,s=o/r);var l=a.x+a.width/2,c=a.y+a.height/2;return{x:l-o/2,y:c-s/2,width:o,height:s}}var mergePath=mergePath$1;function resizePath(a,n){if(a.applyTransform){var r=a.getBoundingRect(),o=r.calculateTransform(n);a.applyTransform(o)}}function subPixelOptimizeLine(a,n){return subPixelOptimizeLine$1(a,a,{lineWidth:n}),a}function subPixelOptimizeRect(a){return subPixelOptimizeRect$1(a.shape,a.shape,a.style),a}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(a,n){for(var r=identity([]);a&&a!==n;)mul(r,a.getLocalTransform(),r),a=a.parent;return r}function applyTransform(a,n,r){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),r&&(n=invert([],n)),applyTransform$1([],a,n)}function transformDirection(a,n,r){var o=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),s=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),l=[a==="left"?-o:a==="right"?o:0,a==="top"?-s:a==="bottom"?s:0];return l=applyTransform(l,n,r),Math.abs(l[0])>Math.abs(l[1])?l[0]>0?"right":"left":l[1]>0?"bottom":"top"}function isNotGroup(a){return!a.isGroup}function isPath$1(a){return a.shape!=null}function groupTransition(a,n,r){if(!a||!n)return;function o(c){var u={};return c.traverse(function(d){isNotGroup(d)&&d.anid&&(u[d.anid]=d)}),u}function s(c){var u={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(u.shape=extend({},c.shape)),u}var l=o(a);n.traverse(function(c){if(isNotGroup(c)&&c.anid){var u=l[c.anid];if(u){var d=s(c);c.attr(s(u)),updateProps$1(c,d,r,getECData(c).dataIndex)}}})}function clipPointsByRect(a,n){return map$1(a,function(r){var o=r[0];o=mathMax$6(o,n.x),o=mathMin$6(o,n.x+n.width);var s=r[1];return s=mathMax$6(s,n.y),s=mathMin$6(s,n.y+n.height),[o,s]})}function clipRectByRect(a,n){var r=mathMax$6(a.x,n.x),o=mathMin$6(a.x+a.width,n.x+n.width),s=mathMax$6(a.y,n.y),l=mathMin$6(a.y+a.height,n.y+n.height);if(o>=r&&l>=s)return{x:r,y:s,width:o-r,height:l-s}}function createIcon(a,n,r){var o=extend({rectHover:!0},n),s=o.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(s.image=a.slice(8),defaults(s,r),new ZRImage(o)):makePath(a.replace("path://",""),o,r,"center")}function linePolygonIntersect(a,n,r,o,s){for(var l=0,c=s[s.length-1];l<s.length;l++){var u=s[l];if(lineLineIntersect$1(a,n,r,o,u[0],u[1],c[0],c[1]))return!0;c=u}}function lineLineIntersect$1(a,n,r,o,s,l,c,u){var d=r-a,f=o-n,v=c-s,g=u-l,y=crossProduct2d$1(v,g,d,f);if(nearZero(y))return!1;var _=a-s,S=n-l,x=crossProduct2d$1(_,S,d,f)/y;if(x<0||x>1)return!1;var T=crossProduct2d$1(_,S,v,g)/y;return!(T<0||T>1)}function crossProduct2d$1(a,n,r,o){return a*o-r*n}function nearZero(a){return a<=1e-6&&a>=-1e-6}function setTooltipConfig(a){var n=a.itemTooltipOption,r=a.componentModel,o=a.itemName,s=isString(n)?{formatter:n}:n,l=r.mainType,c=r.componentIndex,u={componentType:l,name:o,$vars:["name"]};u[l+"Index"]=c;var d=a.formatterParamsExtra;d&&each$f(keys(d),function(v){hasOwn(u,v)||(u[v]=d[v],u.$vars.push(v))});var f=getECData(a.el);f.componentMainType=l,f.componentIndex=c,f.tooltipConfig={name:o,option:defaults({content:o,encodeHTMLContent:!0,formatterParams:u},s)}}function traverseElement(a,n){var r;a.isGroup&&(r=n(a)),r||a.traverse(n)}function traverseElements(a,n){if(a)if(isArray$1(a))for(var r=0;r<a.length;r++)traverseElement(a[r],n);else traverseElement(a,n)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$2);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$4,Image:ZRImage,IncrementalDisplayable,Line:Line$2,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(a,n){for(var r=0;r<SPECIAL_STATES.length;r++){var o=SPECIAL_STATES[r],s=n[o],l=a.ensureState(o);l.style=l.style||{},l.style.text=s}var c=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:n.normal}),a.useStates(c,!0)}function getLabelText(a,n,r){var o=a.labelFetcher,s=a.labelDataIndex,l=a.labelDimIndex,c=n.normal,u;o&&(u=o.getFormattedLabel(s,"normal",null,l,c&&c.get("formatter"),r!=null?{interpolatedValue:r}:null)),u==null&&(u=isFunction(a.defaultText)?a.defaultText(s,a,r):a.defaultText);for(var d={normal:u},f=0;f<SPECIAL_STATES.length;f++){var v=SPECIAL_STATES[f],g=n[v];d[v]=retrieve2(o?o.getFormattedLabel(s,v,null,l,g&&g.get("formatter")):null,u)}return d}function setLabelStyle(a,n,r,o){r=r||EMPTY_OBJ;for(var s=a instanceof ZRText,l=!1,c=0;c<DISPLAY_STATES.length;c++){var u=n[DISPLAY_STATES[c]];if(u&&u.getShallow("show")){l=!0;break}}var d=s?a:a.getTextContent();if(l){s||(d||(d=new ZRText,a.setTextContent(d)),a.stateProxy&&(d.stateProxy=a.stateProxy));var f=getLabelText(r,n),v=n.normal,g=!!v.getShallow("show"),y=createTextStyle(v,o&&o.normal,r,!1,!s);y.text=f.normal,s||a.setTextConfig(createTextConfig(v,r,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var _=SPECIAL_STATES[c],u=n[_];if(u){var S=d.ensureState(_),x=!!retrieve2(u.getShallow("show"),g);if(x!==g&&(S.ignore=!x),S.style=createTextStyle(u,o&&o[_],r,!0,!s),S.style.text=f[_],!s){var T=a.ensureState(_);T.textConfig=createTextConfig(u,r,!0)}}}d.silent=!!v.getShallow("silent"),d.style.x!=null&&(y.x=d.style.x),d.style.y!=null&&(y.y=d.style.y),d.ignore=!g,d.useStyle(y),d.dirty(),r.enableTextSetter&&(labelInner(d).setLabelText=function(w){var E=getLabelText(r,n,w);setLabelText(d,E)})}else d&&(d.ignore=!0);a.dirty()}function getLabelStatesModels(a,n){n=n||"label";for(var r={normal:a.getModel(n)},o=0;o<SPECIAL_STATES.length;o++){var s=SPECIAL_STATES[o];r[s]=a.getModel([s,n])}return r}function createTextStyle(a,n,r,o,s){var l={};return setTextStyleCommon(l,a,r,o,s),n&&extend(l,n),l}function createTextConfig(a,n,r){n=n||{};var o={},s,l=a.getShallow("rotate"),c=retrieve2(a.getShallow("distance"),r?null:5),u=a.getShallow("offset");return s=a.getShallow("position")||(r?null:"inside"),s==="outside"&&(s=n.defaultOutsidePosition||"top"),s!=null&&(o.position=s),u!=null&&(o.offset=u),l!=null&&(l*=Math.PI/180,o.rotation=l),c!=null&&(o.distance=c),o.outsideFill=a.get("color")==="inherit"?n.inheritColor||null:"auto",o}function setTextStyleCommon(a,n,r,o,s){r=r||EMPTY_OBJ;var l=n.ecModel,c=l&&l.option.textStyle,u=getRichItemNames(n),d;if(u){d={};for(var f in u)if(u.hasOwnProperty(f)){var v=n.getModel(["rich",f]);setTokenTextStyle(d[f]={},v,c,r,o,s,!1,!0)}}d&&(a.rich=d);var g=n.get("overflow");g&&(a.overflow=g);var y=n.get("minMargin");y!=null&&(a.margin=y),setTokenTextStyle(a,n,c,r,o,s,!0,!1)}function getRichItemNames(a){for(var n;a&&a!==a.ecModel;){var r=(a.option||EMPTY_OBJ).rich;if(r){n=n||{};for(var o=keys(r),s=0;s<o.length;s++){var l=o[s];n[l]=1}}a=a.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(a,n,r,o,s,l,c,u){r=!s&&r||EMPTY_OBJ;var d=o&&o.inheritColor,f=n.getShallow("color"),v=n.getShallow("textBorderColor"),g=retrieve2(n.getShallow("opacity"),r.opacity);(f==="inherit"||f==="auto")&&(d?f=d:f=null),(v==="inherit"||v==="auto")&&(d?v=d:v=null),l||(f=f||r.color,v=v||r.textBorderColor),f!=null&&(a.fill=f),v!=null&&(a.stroke=v);var y=retrieve2(n.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(a.lineWidth=y);var _=retrieve2(n.getShallow("textBorderType"),r.textBorderType);_!=null&&(a.lineDash=_);var S=retrieve2(n.getShallow("textBorderDashOffset"),r.textBorderDashOffset);S!=null&&(a.lineDashOffset=S),!s&&g==null&&!u&&(g=o&&o.defaultOpacity),g!=null&&(a.opacity=g),!s&&!l&&a.fill==null&&o.inheritColor&&(a.fill=o.inheritColor);for(var x=0;x<TEXT_PROPS_WITH_GLOBAL.length;x++){var T=TEXT_PROPS_WITH_GLOBAL[x],w=retrieve2(n.getShallow(T),r[T]);w!=null&&(a[T]=w)}for(var x=0;x<TEXT_PROPS_SELF.length;x++){var T=TEXT_PROPS_SELF[x],w=n.getShallow(T);w!=null&&(a[T]=w)}if(a.verticalAlign==null){var E=n.getShallow("baseline");E!=null&&(a.verticalAlign=E)}if(!c||!o.disableBox){for(var x=0;x<TEXT_PROPS_BOX.length;x++){var T=TEXT_PROPS_BOX[x],w=n.getShallow(T);w!=null&&(a[T]=w)}var P=n.getShallow("borderType");P!=null&&(a.borderDash=P),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&d&&(a.backgroundColor=d),(a.borderColor==="auto"||a.borderColor==="inherit")&&d&&(a.borderColor=d)}}function getFont(a,n){var r=n&&n.getModel("textStyle");return trim$1([a.fontStyle||r&&r.getShallow("fontStyle")||"",a.fontWeight||r&&r.getShallow("fontWeight")||"",(a.fontSize||r&&r.getShallow("fontSize")||12)+"px",a.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(a,n,r,o){if(a){var s=labelInner(a);s.prevValue=s.value,s.value=r;var l=n.normal;s.valueAnimation=l.get("valueAnimation"),s.valueAnimation&&(s.precision=l.get("precision"),s.defaultInterpolatedText=o,s.statesModels=n)}}function animateLabelValue(a,n,r,o,s){var l=labelInner(a);if(!l.valueAnimation||l.prevValue===l.value)return;var c=l.defaultInterpolatedText,u=retrieve2(l.interpolatedValue,l.prevValue),d=l.value;function f(v){var g=interpolateRawValues(r,l.precision,u,d,v);l.interpolatedValue=v===1?null:g;var y=getLabelText({labelDataIndex:n,labelFetcher:s,defaultText:c?c(g):g+""},l.statesModels,g);setLabelText(a,y)}a.percent=0,(l.prevValue==null?initProps:updateProps$1)(a,{percent:1},o,n,null,f)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function a(){}return a.prototype.getTextColor=function(n){var r=this.ecModel;return this.getShallow("color")||(!n&&r?r.get(PATH_COLOR):null)},a.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(n){for(var r={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)r[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(r),tmpText.update(),tmpText.getBoundingRect()},a}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function a(){}return a.prototype.getLineStyle=function(n){return getLineStyle(this,n)},a}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function a(){}return a.prototype.getItemStyle=function(n,r){return getItemStyle(this,n,r)},a}(),Model=function(){function a(n,r,o){this.parentModel=r,this.ecModel=o,this.option=n}return a.prototype.init=function(n,r,o){},a.prototype.mergeOption=function(n,r){merge(this.option,n,!0)},a.prototype.get=function(n,r){return n==null?this.option:this._doGet(this.parsePath(n),!r&&this.parentModel)},a.prototype.getShallow=function(n,r){var o=this.option,s=o==null?o:o[n];if(s==null&&!r){var l=this.parentModel;l&&(s=l.getShallow(n))}return s},a.prototype.getModel=function(n,r){var o=n!=null,s=o?this.parsePath(n):null,l=o?this._doGet(s):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(s)),new a(l,r,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},a.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},a.prototype.resolveParentPath=function(n){return n},a.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(n,r){var o=this.option;if(!n)return o;for(var s=0;s<n.length&&!(n[s]&&(o=o&&typeof o=="object"?o[n[s]]:null,o==null));s++);return o==null&&r&&(o=r._doGet(this.resolveParentPath(n),r.parentModel)),o},a}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(a){return[a||"",base++].join("_")}function enableSubTypeDefaulter(a){var n={};a.registerSubTypeDefaulter=function(r,o){var s=parseClassType(r);n[s.main]=o},a.determineSubType=function(r,o){var s=o.type;if(!s){var l=parseClassType(r).main;a.hasSubTypes(r)&&n[l]&&(s=n[l](o))}return s}}function enableTopologicalTravel(a,n){a.topologicalTravel=function(l,c,u,d){if(!l.length)return;var f=r(c),v=f.graph,g=f.noEntryList,y={};for(each$f(l,function(E){y[E]=!0});g.length;){var _=g.pop(),S=v[_],x=!!y[_];x&&(u.call(d,_,S.originalDeps.slice()),delete y[_]),each$f(S.successor,x?w:T)}each$f(y,function(){var E="";throw new Error(E)});function T(E){v[E].entryCount--,v[E].entryCount===0&&g.push(E)}function w(E){y[E]=!0,T(E)}};function r(l){var c={},u=[];return each$f(l,function(d){var f=o(c,d),v=f.originalDeps=n(d),g=s(v,l);f.entryCount=g.length,f.entryCount===0&&u.push(d),each$f(g,function(y){indexOf(f.predecessor,y)<0&&f.predecessor.push(y);var _=o(c,y);indexOf(_.successor,y)<0&&_.successor.push(d)})}),{graph:c,noEntryList:u}}function o(l,c){return l[c]||(l[c]={predecessor:[],successor:[]}),l[c]}function s(l,c){var u=[];return each$f(l,function(d){indexOf(c,d)>=0&&u.push(d)}),u}}function inheritDefaultOption(a,n){return merge(merge({},a,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return a.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(a,n){a=a.toUpperCase(),localeModels[a]=new Model(n),localeStorage[a]=n}function createLocaleObject(a){if(isString(a)){var n=localeStorage[a.toUpperCase()]||{};return a===LOCALE_ZH||a===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(a){return localeModels[a]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(a,n){return a+="","0000".substr(0,n-a.length)+a}function getPrimaryTimeUnit(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function isPrimaryTimeUnit(a){return a===getPrimaryTimeUnit(a)}function getDefaultFormatPrecisionOfInterval(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(a,n,r,o){var s=parseDate(a),l=s[fullYearGetterName(r)](),c=s[monthGetterName(r)]()+1,u=Math.floor((c-1)/3)+1,d=s[dateGetterName(r)](),f=s["get"+(r?"UTC":"")+"Day"](),v=s[hoursGetterName(r)](),g=(v-1)%12+1,y=s[minutesGetterName(r)](),_=s[secondsGetterName(r)](),S=s[millisecondsGetterName(r)](),x=v>=12?"pm":"am",T=x.toUpperCase(),w=o instanceof Model?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),E=w.getModel("time"),P=E.get("month"),D=E.get("monthAbbr"),L=E.get("dayOfWeek"),$=E.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,x+"").replace(/{A}/g,T+"").replace(/{yyyy}/g,l+"").replace(/{yy}/g,pad(l%100+"",2)).replace(/{Q}/g,u+"").replace(/{MMMM}/g,P[c-1]).replace(/{MMM}/g,D[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,L[f]).replace(/{ee}/g,$[f]).replace(/{e}/g,f+"").replace(/{HH}/g,pad(v,2)).replace(/{H}/g,v+"").replace(/{hh}/g,pad(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,pad(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,pad(_,2)).replace(/{s}/g,_+"").replace(/{SSS}/g,pad(S,3)).replace(/{S}/g,S+"")}function leveledFormat(a,n,r,o,s){var l=null;if(isString(r))l=r;else if(isFunction(r))l=r(a.value,n,{level:a.level});else{var c=extend({},defaultLeveledFormatter);if(a.level>0)for(var u=0;u<primaryTimeUnits.length;++u)c[primaryTimeUnits[u]]="{primary|"+c[primaryTimeUnits[u]]+"}";var d=r?r.inherit===!1?r:defaults(r,c):c,f=getUnitFromValue(a.value,s);if(d[f])l=d[f];else if(d.inherit){for(var v=timeUnits.indexOf(f),u=v-1;u>=0;--u)if(d[f]){l=d[f];break}l=l||c.none}if(isArray$1(l)){var g=a.level==null?0:a.level>=0?a.level:l.length+a.level;g=Math.min(g,l.length-1),l=l[g]}}return format(new Date(a.value),l,s,o)}function getUnitFromValue(a,n){var r=parseDate(a),o=r[monthGetterName(n)]()+1,s=r[dateGetterName(n)](),l=r[hoursGetterName(n)](),c=r[minutesGetterName(n)](),u=r[secondsGetterName(n)](),d=r[millisecondsGetterName(n)](),f=d===0,v=f&&u===0,g=v&&c===0,y=g&&l===0,_=y&&s===1,S=_&&o===1;return S?"year":_?"month":y?"day":g?"hour":v?"minute":f?"second":"millisecond"}function getUnitValue(a,n,r){var o=isNumber(a)?parseDate(a):a;switch(n=n||getUnitFromValue(a,r),n){case"year":return o[fullYearGetterName(r)]();case"half-year":return o[monthGetterName(r)]()>=6?1:0;case"quarter":return Math.floor((o[monthGetterName(r)]()+1)/4);case"month":return o[monthGetterName(r)]();case"day":return o[dateGetterName(r)]();case"half-day":return o[hoursGetterName(r)]()/24;case"hour":return o[hoursGetterName(r)]();case"minute":return o[minutesGetterName(r)]();case"second":return o[secondsGetterName(r)]();case"millisecond":return o[millisecondsGetterName(r)]()}}function fullYearGetterName(a){return a?"getUTCFullYear":"getFullYear"}function monthGetterName(a){return a?"getUTCMonth":"getMonth"}function dateGetterName(a){return a?"getUTCDate":"getDate"}function hoursGetterName(a){return a?"getUTCHours":"getHours"}function minutesGetterName(a){return a?"getUTCMinutes":"getMinutes"}function secondsGetterName(a){return a?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(a){return a?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(a){return a?"setUTCFullYear":"setFullYear"}function monthSetterName(a){return a?"setUTCMonth":"setMonth"}function dateSetterName(a){return a?"setUTCDate":"setDate"}function hoursSetterName(a){return a?"setUTCHours":"setHours"}function minutesSetterName(a){return a?"setUTCMinutes":"setMinutes"}function secondsSetterName(a){return a?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(a){return a?"setUTCMilliseconds":"setMilliseconds"}function addCommas(a){if(!isNumeric(a))return isString(a)?a:"-";var n=(a+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(a,n){return a=(a||"").toLowerCase().replace(/-(.)/g,function(r,o){return o.toUpperCase()}),n&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(a,n,r){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function s(v){return v&&trim$1(v)?v:"-"}function l(v){return!!(v!=null&&!isNaN(v)&&isFinite(v))}var c=n==="time",u=a instanceof Date;if(c||u){var d=c?parseDate(a):a;if(isNaN(+d)){if(u)return"-"}else return format(d,o,r)}if(n==="ordinal")return isStringSafe(a)?s(a):isNumber(a)&&l(a)?a+"":"-";var f=numericToNumber(a);return l(f)?addCommas(f):isStringSafe(a)?s(a):typeof a=="boolean"?a+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(a,n){return"{"+a+(n??"")+"}"};function formatTpl(a,n,r){isArray$1(n)||(n=[n]);var o=n.length;if(!o)return"";for(var s=n[0].$vars||[],l=0;l<s.length;l++){var c=TPL_VAR_ALIAS[l];a=a.replace(wrapVar(c),wrapVar(c,0))}for(var u=0;u<o;u++)for(var d=0;d<s.length;d++){var f=n[u][s[d]];a=a.replace(wrapVar(TPL_VAR_ALIAS[d],u),r?encodeHTML(f):f)}return a}function formatTplSimple(a,n,r){return each$f(n,function(o,s){a=a.replace("{"+s+"}",o)}),a}function getTooltipMarker(a,n){var r=isString(a)?{color:a,extraCssText:n}:a||{},o=r.color,s=r.type;n=r.extraCssText;var l=r.renderMode||"html";if(!o)return"";if(l==="html")return s==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(n||"")+'"></span>';var c=r.markerId||"markerX";return{renderMode:l,content:"{"+c+"|}  ",style:s==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function convertToColorString(a,n){return n=n||"transparent",isString(a)?a:isObject$3(a)&&a.colorStops&&(a.colorStops[0]||{}).color||n}function windowOpen(a,n){if(n==="_blank"||n==="blank"){var r=window.open();r.opener=null,r.location.href=a}else window.open(a,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(a,n,r,o,s){var l=0,c=0;o==null&&(o=1/0),s==null&&(s=1/0);var u=0;n.eachChild(function(d,f){var v=d.getBoundingRect(),g=n.childAt(f+1),y=g&&g.getBoundingRect(),_,S;if(a==="horizontal"){var x=v.width+(y?-y.x+v.x:0);_=l+x,_>o||d.newline?(l=0,_=x,c+=u+r,u=v.height):u=Math.max(u,v.height)}else{var T=v.height+(y?-y.y+v.y:0);S=c+T,S>s||d.newline?(l+=u+r,c=0,S=T,u=v.width):u=Math.max(u,v.width)}d.newline||(d.x=l,d.y=c,d.markRedraw(),a==="horizontal"?l=_+r:c=S+r)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(a,n,r){var o=n.width,s=n.height,l=parsePercent(a.left,o),c=parsePercent(a.top,s),u=parsePercent(a.right,o),d=parsePercent(a.bottom,s);return(isNaN(l)||isNaN(parseFloat(a.left)))&&(l=0),(isNaN(u)||isNaN(parseFloat(a.right)))&&(u=o),(isNaN(c)||isNaN(parseFloat(a.top)))&&(c=0),(isNaN(d)||isNaN(parseFloat(a.bottom)))&&(d=s),r=normalizeCssArray(r||0),{width:Math.max(u-l-r[1]-r[3],0),height:Math.max(d-c-r[0]-r[2],0)}}function getLayoutRect(a,n,r){r=normalizeCssArray(r||0);var o=n.width,s=n.height,l=parsePercent(a.left,o),c=parsePercent(a.top,s),u=parsePercent(a.right,o),d=parsePercent(a.bottom,s),f=parsePercent(a.width,o),v=parsePercent(a.height,s),g=r[2]+r[0],y=r[1]+r[3],_=a.aspect;switch(isNaN(f)&&(f=o-u-y-l),isNaN(v)&&(v=s-d-g-c),_!=null&&(isNaN(f)&&isNaN(v)&&(_>o/s?f=o*.8:v=s*.8),isNaN(f)&&(f=_*v),isNaN(v)&&(v=f/_)),isNaN(l)&&(l=o-u-f-y),isNaN(c)&&(c=s-d-v-g),a.left||a.right){case"center":l=o/2-f/2-r[3];break;case"right":l=o-f-y;break}switch(a.top||a.bottom){case"middle":case"center":c=s/2-v/2-r[0];break;case"bottom":c=s-v-g;break}l=l||0,c=c||0,isNaN(f)&&(f=o-y-l-(u||0)),isNaN(v)&&(v=s-g-c-(d||0));var S=new BoundingRect(l+r[3],c+r[0],f,v);return S.margin=r,S}function positionElement(a,n,r,o,s,l){var c=!s||!s.hv||s.hv[0],u=!s||!s.hv||s.hv[1],d=s&&s.boundingMode||"all";if(l=l||a,l.x=a.x,l.y=a.y,!c&&!u)return!1;var f;if(d==="raw")f=a.type==="group"?new BoundingRect(0,0,+n.width||0,+n.height||0):a.getBoundingRect();else if(f=a.getBoundingRect(),a.needLocalTransform()){var v=a.getLocalTransform();f=f.clone(),f.applyTransform(v)}var g=getLayoutRect(defaults({width:f.width,height:f.height},n),r,o),y=c?g.x-f.x:0,_=u?g.y-f.y:0;return d==="raw"?(l.x=y,l.y=_):(l.x+=y,l.y+=_),l===a&&a.markRedraw(),!0}function sizeCalculable(a,n){return a[HV_NAMES[n][0]]!=null||a[HV_NAMES[n][1]]!=null&&a[HV_NAMES[n][2]]!=null}function fetchLayoutMode(a){var n=a.layoutMode||a.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(a,n,r){var o=r&&r.ignoreSize;!isArray$1(o)&&(o=[o,o]);var s=c(HV_NAMES[0],0),l=c(HV_NAMES[1],1);f(HV_NAMES[0],a,s),f(HV_NAMES[1],a,l);function c(v,g){var y={},_=0,S={},x=0,T=2;if(each$e(v,function(P){S[P]=a[P]}),each$e(v,function(P){u(n,P)&&(y[P]=S[P]=n[P]),d(y,P)&&_++,d(S,P)&&x++}),o[g])return d(n,v[1])?S[v[2]]=null:d(n,v[2])&&(S[v[1]]=null),S;if(x===T||!_)return S;if(_>=T)return y;for(var w=0;w<v.length;w++){var E=v[w];if(!u(y,E)&&u(a,E)){y[E]=a[E];break}}return y}function u(v,g){return v.hasOwnProperty(g)}function d(v,g){return v[g]!=null&&v[g]!=="auto"}function f(v,g,y){each$e(v,function(_){g[_]=y[_]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(a,n){return n&&a&&each$e(LOCATION_PARAMS,function(r){n.hasOwnProperty(r)&&(a[r]=n[r])}),a}var inner$l=makeInner(),ComponentModel=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this,r,o,s)||this;return l.uid=getUID("ec_cpt_model"),l}return n.prototype.init=function(r,o,s){this.mergeDefaultAndTheme(r,s)},n.prototype.mergeDefaultAndTheme=function(r,o){var s=fetchLayoutMode(this),l=s?getLayoutParams(r):{},c=o.getTheme();merge(r,c.get(this.mainType)),merge(r,this.getDefaultOption()),s&&mergeLayoutParam(r,l,s)},n.prototype.mergeOption=function(r,o){merge(this.option,r,!0);var s=fetchLayoutMode(this);s&&mergeLayoutParam(this.option,r,s)},n.prototype.optionUpdated=function(r,o){},n.prototype.getDefaultOption=function(){var r=this.constructor;if(!isExtendedClass(r))return r.defaultOption;var o=inner$l(this);if(!o.defaultOption){for(var s=[],l=r;l;){var c=l.prototype.defaultOption;c&&s.push(c),l=l.superClass}for(var u={},d=s.length-1;d>=0;d--)u=merge(u,s[d],!0);o.defaultOption=u}return o.defaultOption},n.prototype.getReferringComponents=function(r,o){var s=r+"Index",l=r+"Id";return queryReferringComponents(this.ecModel,r,{index:this.get(s,!0),id:this.get(l,!0)},o)},n.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(r){this.option.zlevel=r},n.protoInitialize=function(){var r=n.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),n}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(a){var n=[];return each$f(ComponentModel.getClassesByMainType(a),function(r){n=n.concat(r.dependencies||r.prototype.dependencies||[])}),n=map$1(n,function(r){return parseClassType(r).main}),a!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(a){innerGlobalModel(a).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(a,n,r){var o={},s=querySeriesUpstreamDatasetModel(n);if(!s||!a)return o;var l=[],c=[],u=n.ecModel,d=innerGlobalModel(u).datasetMap,f=s.uid+"_"+r.seriesLayoutBy,v,g;a=a.slice(),each$f(a,function(x,T){var w=isObject$3(x)?x:a[T]={name:x};w.type==="ordinal"&&v==null&&(v=T,g=S(w)),o[w.name]=[]});var y=d.get(f)||d.set(f,{categoryWayDim:g,valueWayDim:0});each$f(a,function(x,T){var w=x.name,E=S(x);if(v==null){var P=y.valueWayDim;_(o[w],P,E),_(c,P,E),y.valueWayDim+=E}else if(v===T)_(o[w],0,E),_(l,0,E);else{var P=y.categoryWayDim;_(o[w],P,E),_(c,P,E),y.categoryWayDim+=E}});function _(x,T,w){for(var E=0;E<w;E++)x.push(T+E)}function S(x){var T=x.dimsDef;return T?T.length:1}return l.length&&(o.itemName=l),c.length&&(o.seriesName=c),o}function makeSeriesEncodeForNameBased(a,n,r){var o={},s=querySeriesUpstreamDatasetModel(a);if(!s)return o;var l=n.sourceFormat,c=n.dimensionsDefine,u;(l===SOURCE_FORMAT_OBJECT_ROWS||l===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(v,g){(isObject$3(v)?v.name:v)==="name"&&(u=g)});var d=function(){for(var v={},g={},y=[],_=0,S=Math.min(5,r);_<S;_++){var x=doGuessOrdinal(n.data,l,n.seriesLayoutBy,c,n.startIndex,_);y.push(x);var T=x===BE_ORDINAL.Not;if(T&&v.v==null&&_!==u&&(v.v=_),(v.n==null||v.n===v.v||!T&&y[v.n]===BE_ORDINAL.Not)&&(v.n=_),w(v)&&y[v.n]!==BE_ORDINAL.Not)return v;T||(x===BE_ORDINAL.Might&&g.v==null&&_!==u&&(g.v=_),(g.n==null||g.n===g.v)&&(g.n=_))}function w(E){return E.v!=null&&E.n!=null}return w(v)?v:w(g)?g:null}();if(d){o.value=[d.v];var f=u??d.n;o.itemName=[f],o.seriesName=[f]}return o}function querySeriesUpstreamDatasetModel(a){var n=a.get("data",!0);if(!n)return queryReferringComponents(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:queryReferringComponents(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(a,n){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,n)}function doGuessOrdinal(a,n,r,o,s,l){var c,u=5;if(isTypedArray(a))return BE_ORDINAL.Not;var d,f;if(o){var v=o[l];isObject$3(v)?(d=v.name,f=v.type):isString(v)&&(d=v)}if(f!=null)return f==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var g=a;if(r===SERIES_LAYOUT_BY_ROW){for(var y=g[l],_=0;_<(y||[]).length&&_<u;_++)if((c=D(y[s+_]))!=null)return c}else for(var _=0;_<g.length&&_<u;_++){var S=g[s+_];if(S&&(c=D(S[l]))!=null)return c}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var x=a;if(!d)return BE_ORDINAL.Not;for(var _=0;_<x.length&&_<u;_++){var T=x[_];if(T&&(c=D(T[d]))!=null)return c}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var w=a;if(!d)return BE_ORDINAL.Not;var y=w[d];if(!y||isTypedArray(y))return BE_ORDINAL.Not;for(var _=0;_<y.length&&_<u;_++)if((c=D(y[_]))!=null)return c}else if(n===SOURCE_FORMAT_ORIGINAL)for(var E=a,_=0;_<E.length&&_<u;_++){var T=E[_],P=getDataItemValue(T);if(!isArray$1(P))return BE_ORDINAL.Not;if((c=D(P[l]))!=null)return c}function D(L){var $=isString(L);if(L!=null&&Number.isFinite(Number(L))&&L!=="")return $?BE_ORDINAL.Might:BE_ORDINAL.Not;if($&&L!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(a,n){assert(internalOptionCreatorMap.get(a)==null&&n),internalOptionCreatorMap.set(a,n)}function concatInternalOptions(a,n,r){var o=internalOptionCreatorMap.get(n);if(!o)return r;var s=o(a);return s?r.concat(s):r}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function a(){}return a.prototype.getColorFromPalette=function(n,r,o){var s=normalizeToArray(this.get("color",!0)),l=this.get("colorLayer",!0);return getFromPalette(this,innerColor,s,l,n,r,o)},a.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},a}();function getDecalFromPalette(a,n,r,o){var s=normalizeToArray(a.get(["aria","decal","decals"]));return getFromPalette(a,innerDecal,s,null,n,r,o)}function getNearestPalette(a,n){for(var r=a.length,o=0;o<r;o++)if(a[o].length>n)return a[o];return a[r-1]}function getFromPalette(a,n,r,o,s,l,c){l=l||a;var u=n(l),d=u.paletteIdx||0,f=u.paletteNameMap=u.paletteNameMap||{};if(f.hasOwnProperty(s))return f[s];var v=c==null||!o?r:getNearestPalette(o,c);if(v=v||r,!(!v||!v.length)){var g=v[d];return s&&(f[s]=g),u.paletteIdx=(d+1)%v.length,g}}function clearPalette(a,n){n(a).paletteIdx=0,n(a).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(r,o,s,l,c,u){l=l||{},this.option=null,this._theme=new Model(l),this._locale=new Model(c),this._optionManager=u},n.prototype.setOption=function(r,o,s){var l=normalizeSetOptionInput(o);this._optionManager.setOption(r,s,l),this._resetOption(null,l)},n.prototype.resetOption=function(r,o){return this._resetOption(r,normalizeSetOptionInput(o))},n.prototype._resetOption=function(r,o){var s=!1,l=this._optionManager;if(!r||r==="recreate"){var c=l.mountOption(r==="recreate");!this.option||r==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,o)),s=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var u=l.getTimelineOption(this);u&&(s=!0,this._mergeOption(u,o))}if(!r||r==="recreate"||r==="media"){var d=l.getMediaOption(this);d.length&&each$f(d,function(f){s=!0,this._mergeOption(f,o)},this)}return s},n.prototype.mergeOption=function(r){this._mergeOption(r,null)},n.prototype._mergeOption=function(r,o){var s=this.option,l=this._componentsMap,c=this._componentsCount,u=[],d=createHashMap(),f=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(r,function(g,y){g!=null&&(ComponentModel.hasClass(y)?y&&(u.push(y),d.set(y,!0)):s[y]=s[y]==null?clone$4(g):merge(s[y],g,!0))}),f&&f.each(function(g,y){ComponentModel.hasClass(y)&&!d.get(y)&&(u.push(y),d.set(y,!0))}),ComponentModel.topologicalTravel(u,ComponentModel.getAllClassMainTypes(),v,this);function v(g){var y=concatInternalOptions(this,g,normalizeToArray(r[g])),_=l.get(g),S=_?f&&f.get(g)?"replaceMerge":"normalMerge":"replaceAll",x=mappingToExists(_,y,S);setComponentTypeToKeyInfo(x,g,ComponentModel),s[g]=null,l.set(g,null),c.set(g,0);var T=[],w=[],E=0,P;each$f(x,function(D,L){var $=D.existing,O=D.newOption;if(!O)$&&($.mergeOption({},this),$.optionUpdated({},!1));else{var B=g==="series",V=ComponentModel.getClass(g,D.keyInfo.subType,!B);if(!V)return;if(g==="tooltip"){if(P)return;P=!0}if($&&$.constructor===V)$.name=D.keyInfo.name,$.mergeOption(O,this),$.optionUpdated(O,!1);else{var F=extend({componentIndex:L},D.keyInfo);$=new V(O,this,this,F),extend($,F),D.brandNew&&($.__requireNewView=!0),$.init(O,this,this),$.optionUpdated(null,!0)}}$?(T.push($.option),w.push($),E++):(T.push(void 0),w.push(void 0))},this),s[g]=T,l.set(g,w),c.set(g,E),g==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var r=clone$4(this.option);return each$f(r,function(o,s){if(ComponentModel.hasClass(s)){for(var l=normalizeToArray(o),c=l.length,u=!1,d=c-1;d>=0;d--)l[d]&&!isComponentIdInternal(l[d])?u=!0:(l[d]=null,!u&&c--);l.length=c,r[s]=l}}),delete r[OPTION_INNER_KEY],r},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(r){this._payload=r},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(r,o){var s=this._componentsMap.get(r);if(s){var l=s[o||0];if(l)return l;if(o==null){for(var c=0;c<s.length;c++)if(s[c])return s[c]}}},n.prototype.queryComponents=function(r){var o=r.mainType;if(!o)return[];var s=r.index,l=r.id,c=r.name,u=this._componentsMap.get(o);if(!u||!u.length)return[];var d;return s!=null?(d=[],each$f(normalizeToArray(s),function(f){u[f]&&d.push(u[f])})):l!=null?d=queryByIdOrName("id",l,u):c!=null?d=queryByIdOrName("name",c,u):d=filter(u,function(f){return!!f}),filterBySubType(d,r)},n.prototype.findComponents=function(r){var o=r.query,s=r.mainType,l=u(o),c=l?this.queryComponents(l):filter(this._componentsMap.get(s),function(f){return!!f});return d(filterBySubType(c,r));function u(f){var v=s+"Index",g=s+"Id",y=s+"Name";return f&&(f[v]!=null||f[g]!=null||f[y]!=null)?{mainType:s,index:f[v],id:f[g],name:f[y]}:null}function d(f){return r.filter?filter(f,r.filter):f}},n.prototype.eachComponent=function(r,o,s){var l=this._componentsMap;if(isFunction(r)){var c=o,u=r;l.each(function(g,y){for(var _=0;g&&_<g.length;_++){var S=g[_];S&&u.call(c,y,S,S.componentIndex)}})}else for(var d=isString(r)?l.get(r):isObject$3(r)?this.findComponents(r):null,f=0;d&&f<d.length;f++){var v=d[f];v&&o.call(s,v,v.componentIndex)}},n.prototype.getSeriesByName=function(r){var o=convertOptionIdName(r,null);return filter(this._componentsMap.get("series"),function(s){return!!s&&o!=null&&s.name===o})},n.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},n.prototype.getSeriesByType=function(r){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===r})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(r){return!!r})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(r,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];r.call(o,l,s)},this)},n.prototype.eachRawSeries=function(r,o){each$f(this._componentsMap.get("series"),function(s){s&&r.call(o,s,s.componentIndex)})},n.prototype.eachSeriesByType=function(r,o,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var c=this._componentsMap.get("series")[l];c.subType===r&&o.call(s,c,l)},this)},n.prototype.eachRawSeriesByType=function(r,o,s){return each$f(this.getSeriesByType(r),o,s)},n.prototype.isSeriesFiltered=function(r){return assertSeriesInitialized(this),this._seriesIndicesMap.get(r.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(r,o){assertSeriesInitialized(this);var s=[];each$f(this._seriesIndices,function(l){var c=this._componentsMap.get("series")[l];r.call(o,c,l)&&s.push(l)},this),this._seriesIndices=s,this._seriesIndicesMap=createHashMap(s)},n.prototype.restoreData=function(r){reCreateSeriesIndices(this);var o=this._componentsMap,s=[];o.each(function(l,c){ComponentModel.hasClass(c)&&s.push(c)}),ComponentModel.topologicalTravel(s,ComponentModel.getAllClassMainTypes(),function(l){each$f(o.get(l),function(c){c&&(l!=="series"||!isNotTargetSeries(c,r))&&c.restoreData()})})},n.internalField=function(){reCreateSeriesIndices=function(r){var o=r._seriesIndices=[];each$f(r._componentsMap.get("series"),function(s){s&&o.push(s.componentIndex)}),r._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(r){},initBase=function(r,o){r.option={},r.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,r._componentsMap=createHashMap({series:[]}),r._componentsCount=createHashMap();var s=o.aria;isObject$3(s)&&s.enabled==null&&(s.enabled=!0),mergeTheme(o,r._theme.option),merge(o,globalDefault,!1),r._mergeOption(o,null)}}(),n}(Model);function isNotTargetSeries(a,n){if(n){var r=n.seriesIndex,o=n.seriesId,s=n.seriesName;return r!=null&&a.componentIndex!==r||o!=null&&a.id!==o||s!=null&&a.name!==s}}function mergeTheme(a,n){var r=a.color&&!a.colorLayer;each$f(n,function(o,s){s==="colorLayer"&&r||ComponentModel.hasClass(s)||(typeof o=="object"?a[s]=a[s]?merge(a[s],o,!1):clone$4(o):a[s]==null&&(a[s]=o))})}function queryByIdOrName(a,n,r){if(isArray$1(n)){var o=createHashMap();return each$f(n,function(l){if(l!=null){var c=convertOptionIdName(l,null);c!=null&&o.set(l,!0)}}),filter(r,function(l){return l&&o.get(l[a])})}else{var s=convertOptionIdName(n,null);return filter(r,function(l){return l&&s!=null&&l[a]===s})}}function filterBySubType(a,n){return n.hasOwnProperty("subType")?filter(a,function(r){return r&&r.subType===n.subType}):a}function normalizeSetOptionInput(a){var n=createHashMap();return a&&each$f(normalizeToArray(a.replaceMerge),function(r){n.set(r,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function a(n){each$f(availableMethods,function(r){this[r]=bind$1(n[r],n)},this)}return a}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function a(){this._coordinateSystems=[]}return a.prototype.create=function(n,r){var o=[];each$f(coordinateSystemCreators,function(s,l){var c=s.create(n,r);o=o.concat(c||[])}),this._coordinateSystems=o},a.prototype.update=function(n,r){each$f(this._coordinateSystems,function(o){o.update&&o.update(n,r)})},a.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},a.register=function(n,r){coordinateSystemCreators[n]=r},a.get=function(n){return coordinateSystemCreators[n]},a}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function a(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return a.prototype.setOption=function(n,r,o){n&&(each$f(normalizeToArray(n.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(n.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),n=clone$4(n);var s=this._optionBackup,l=parseRawOption(n,r,!s);this._newBaseOption=l.baseOption,s?(l.timelineOptions.length&&(s.timelineOptions=l.timelineOptions),l.mediaList.length&&(s.mediaList=l.mediaList),l.mediaDefault&&(s.mediaDefault=l.mediaDefault)):this._optionBackup=l},a.prototype.mountOption=function(n){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],clone$4(n?r.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(n){var r,o=this._timelineOptions;if(o.length){var s=n.getComponent("timeline");s&&(r=clone$4(o[s.getCurrentIndex()]))}return r},a.prototype.getMediaOption=function(n){var r=this._api.getWidth(),o=this._api.getHeight(),s=this._mediaList,l=this._mediaDefault,c=[],u=[];if(!s.length&&!l)return u;for(var d=0,f=s.length;d<f;d++)applyMediaQuery(s[d].query,r,o)&&c.push(d);return!c.length&&l&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(u=map$1(c,function(v){return clone$4(v===-1?l.option:s[v].option)})),this._currentMediaIndices=c,u},a}();function parseRawOption(a,n,r){var o=[],s,l,c=a.baseOption,u=a.timeline,d=a.options,f=a.media,v=!!a.media,g=!!(d||u||c&&c.timeline);c?(l=c,l.timeline||(l.timeline=u)):((g||v)&&(a.options=a.media=null),l=a),v&&isArray$1(f)&&each$f(f,function(_){_&&_.option&&(_.query?o.push(_):s||(s=_))}),y(l),each$f(d,function(_){return y(_)}),each$f(o,function(_){return y(_.option)});function y(_){each$f(n,function(S){S(_,r)})}return{baseOption:l,timelineOptions:d||[],mediaDefault:s,mediaList:o}}function applyMediaQuery(a,n,r){var o={width:n,height:r,aspectratio:n/r},s=!0;return each$f(a,function(l,c){var u=c.match(QUERY_REG);if(!(!u||!u[1]||!u[2])){var d=u[1],f=u[2].toLowerCase();compare(o[f],l,d)||(s=!1)}}),s}function compare(a,n,r){return r==="min"?a>=n:r==="max"?a<=n:a===n}function indicesEquals(a,n){return a.join(",")===n.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(a){var n=a&&a.itemStyle;if(n)for(var r=0,o=POSSIBLE_STYLES.length;r<o;r++){var s=POSSIBLE_STYLES[r],l=n.normal,c=n.emphasis;l&&l[s]&&(a[s]=a[s]||{},a[s].normal?merge(a[s].normal,l[s]):a[s].normal=l[s],l[s]=null),c&&c[s]&&(a[s]=a[s]||{},a[s].emphasis?merge(a[s].emphasis,c[s]):a[s].emphasis=c[s],c[s]=null)}}function convertNormalEmphasis(a,n,r){if(a&&a[n]&&(a[n].normal||a[n].emphasis)){var o=a[n].normal,s=a[n].emphasis;o&&(r?(a[n].normal=a[n].emphasis=null,defaults(a[n],o)):a[n]=o),s&&(a.emphasis=a.emphasis||{},a.emphasis[n]=s,s.focus&&(a.emphasis.focus=s.focus),s.blurScope&&(a.emphasis.blurScope=s.blurScope))}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"lineStyle"),convertNormalEmphasis(a,"areaStyle"),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"labelLine"),convertNormalEmphasis(a,"upperLabel"),convertNormalEmphasis(a,"edgeLabel")}function compatTextStyle(a,n){var r=isObject$2(a)&&a[n],o=isObject$2(r)&&r.textStyle;if(o)for(var s=0,l=TEXT_STYLE_OPTIONS.length;s<l;s++){var c=TEXT_STYLE_OPTIONS[s];o.hasOwnProperty(c)&&(r[c]=o[c])}}function compatEC3CommonStyles(a){a&&(removeEC3NormalStatus(a),compatTextStyle(a,"label"),a.emphasis&&compatTextStyle(a.emphasis,"label"))}function processSeries(a){if(isObject$2(a)){compatEC2ItemStyle(a),removeEC3NormalStatus(a),compatTextStyle(a,"label"),compatTextStyle(a,"upperLabel"),compatTextStyle(a,"edgeLabel"),a.emphasis&&(compatTextStyle(a.emphasis,"label"),compatTextStyle(a.emphasis,"upperLabel"),compatTextStyle(a.emphasis,"edgeLabel"));var n=a.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var r=a.markLine;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var o=a.markArea;o&&compatEC3CommonStyles(o);var s=a.data;if(a.type==="graph"){s=s||a.nodes;var l=a.links||a.edges;if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);each$f(a.categories,function(f){removeEC3NormalStatus(f)})}if(s&&!isTypedArray(s))for(var c=0;c<s.length;c++)compatEC3CommonStyles(s[c]);if(n=a.markPoint,n&&n.data)for(var u=n.data,c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);if(r=a.markLine,r&&r.data)for(var d=r.data,c=0;c<d.length;c++)isArray$1(d[c])?(compatEC3CommonStyles(d[c][0]),compatEC3CommonStyles(d[c][1])):compatEC3CommonStyles(d[c]);a.type==="gauge"?(compatTextStyle(a,"axisLabel"),compatTextStyle(a,"title"),compatTextStyle(a,"detail")):a.type==="treemap"?(convertNormalEmphasis(a.breadcrumb,"itemStyle"),each$f(a.levels,function(f){removeEC3NormalStatus(f)})):a.type==="tree"&&removeEC3NormalStatus(a.leaves)}}function toArr(a){return isArray$1(a)?a:a?[a]:[]}function toObj(a){return(isArray$1(a)?a[0]:a)||{}}function globalCompatStyle(a,n){each$d(toArr(a.series),function(o){isObject$2(o)&&processSeries(o)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(r,function(o){each$d(toArr(a[o]),function(s){s&&(compatTextStyle(s,"axisLabel"),compatTextStyle(s.axisPointer,"label"))})}),each$d(toArr(a.parallel),function(o){var s=o&&o.parallelAxisDefault;compatTextStyle(s,"axisLabel"),compatTextStyle(s&&s.axisPointer,"label")}),each$d(toArr(a.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(a.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap)}),each$d(toArr(a.geo),function(o){isObject$2(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(s){compatEC3CommonStyles(s)}))}),each$d(toArr(a.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var s=o.data;isArray$1(s)&&each$f(s,function(l){isObject$3(l)&&(convertNormalEmphasis(l,"label"),convertNormalEmphasis(l,"itemStyle"))})}),each$d(toArr(a.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(s){convertNormalEmphasis(s,"iconStyle")})}),compatTextStyle(toObj(a.axisPointer),"label"),compatTextStyle(toObj(a.tooltip).axisPointer,"label")}function get(a,n){for(var r=n.split(","),o=a,s=0;s<r.length&&(o=o&&o[r[s]],o!=null);s++);return o}function set(a,n,r,o){for(var s=n.split(","),l=a,c,u=0;u<s.length-1;u++)c=s[u],l[c]==null&&(l[c]={}),l=l[c];l[s[u]]==null&&(l[s[u]]=r)}function compatLayoutProperties(a){a&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in a&&!(n[1]in a)&&(a[n[1]]=a[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(a){var n=a&&a.itemStyle;if(n)for(var r=0;r<BAR_ITEM_STYLE_MAP.length;r++){var o=BAR_ITEM_STYLE_MAP[r][1],s=BAR_ITEM_STYLE_MAP[r][0];n[o]!=null&&(n[s]=n[o])}}function compatPieLabel(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function compatSunburstState(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function compatGraphFocus(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function traverseTree(a,n){if(a)for(var r=0;r<a.length;r++)n(a[r]),a[r]&&traverseTree(a[r].children,n)}function globalBackwardCompat(a,n){globalCompatStyle(a,n),a.series=normalizeToArray(a.series),each$f(a.series,function(r){if(isObject$3(r)){var o=r.type;if(o==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(o==="pie"||o==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),compatPieLabel(r.label);var s=r.data;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)compatPieLabel(s[l]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(o==="gauge"){var c=get(r,"pointer.color");c!=null&&set(r,"itemStyle.color",c)}else if(o==="bar"){compatBarItemStyle(r),compatBarItemStyle(r.backgroundStyle),compatBarItemStyle(r.emphasis);var s=r.data;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)typeof s[l]=="object"&&(compatBarItemStyle(s[l]),compatBarItemStyle(s[l]&&s[l].emphasis))}else if(o==="sunburst"){var u=r.highlightPolicy;u&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=u)),compatSunburstState(r),traverseTree(r.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(r):o==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&defaults(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),compatLayoutProperties(r)}}),a.dataRange&&(a.visualMap=a.dataRange),each$f(COMPATITABLE_COMPONENTS,function(r){var o=a[r];o&&(isArray$1(o)||(o=[o]),each$f(o,function(s){compatLayoutProperties(s)}))})}function dataStack(a){var n=createHashMap();a.eachSeries(function(r){var o=r.get("stack");if(o){var s=n.get(o)||n.set(o,[]),l=r.getData(),c={stackResultDimension:l.getCalculationInfo("stackResultDimension"),stackedOverDimension:l.getCalculationInfo("stackedOverDimension"),stackedDimension:l.getCalculationInfo("stackedDimension"),stackedByDimension:l.getCalculationInfo("stackedByDimension"),isStackedByIndex:l.getCalculationInfo("isStackedByIndex"),data:l,seriesModel:r};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;s.length&&l.setCalculationInfo("stackedOnSeries",s[s.length-1].seriesModel),s.push(c)}}),n.each(calculateStack)}function calculateStack(a){each$f(a,function(n,r){var o=[],s=[NaN,NaN],l=[n.stackResultDimension,n.stackedOverDimension],c=n.data,u=n.isStackedByIndex,d=n.seriesModel.get("stackStrategy")||"samesign";c.modify(l,function(f,v,g){var y=c.get(n.stackedDimension,g);if(isNaN(y))return s;var _,S;u?S=c.getRawIndex(g):_=c.get(n.stackedByDimension,g);for(var x=NaN,T=r-1;T>=0;T--){var w=a[T];if(u||(S=w.data.rawIndexOf(w.stackedByDimension,_)),S>=0){var E=w.data.getByRawIndex(w.stackResultDimension,S);if(d==="all"||d==="positive"&&E>0||d==="negative"&&E<0||d==="samesign"&&y>=0&&E>0||d==="samesign"&&y<=0&&E<0){y=addSafe(y,E),x=E;break}}}return o[0]=y,o[1]=x,o})})}var SourceImpl=function(){function a(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var r=this.dimensionsDefine=n.dimensionsDefine;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(s.type="ordinal")}}return a}();function isSourceInstance(a){return a instanceof SourceImpl}function createSource(a,n,r){r=r||detectSourceFormat(a);var o=n.seriesLayoutBy,s=determineSourceDimensions(a,r,o,n.sourceHeader,n.dimensions),l=new SourceImpl({data:a,sourceFormat:r,seriesLayoutBy:o,dimensionsDefine:s.dimensionsDefine,startIndex:s.startIndex,dimensionsDetectedCount:s.dimensionsDetectedCount,metaRawOption:clone$4(n)});return l}function createSourceFromSeriesDataOption(a){return new SourceImpl({data:a,sourceFormat:isTypedArray(a)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(a){return new SourceImpl({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:clone$4(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function detectSourceFormat(a){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(a))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(a)){a.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,o=a.length;r<o;r++){var s=a[r];if(s!=null){if(isArray$1(s)||isTypedArray(s)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(s)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(a)){for(var l in a)if(hasOwn(a,l)&&isArrayLike(a[l])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(a,n,r,o,s){var l,c;if(!a)return{dimensionsDefine:normalizeDimensionsOption(s),startIndex:c,dimensionsDetectedCount:l};if(n===SOURCE_FORMAT_ARRAY_ROWS){var u=a;o==="auto"||o==null?arrayRowsTravelFirst(function(f){f!=null&&f!=="-"&&(isString(f)?c==null&&(c=1):c=0)},r,u,10):c=isNumber(o)?o:o?1:0,!s&&c===1&&(s=[],arrayRowsTravelFirst(function(f,v){s[v]=f!=null?f+"":""},r,u,1/0)),l=s?s.length:r===SERIES_LAYOUT_BY_ROW?u.length:u[0]?u[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)s||(s=objectRowsCollectDimensions(a));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)s||(s=[],each$f(a,function(f,v){s.push(v)}));else if(n===SOURCE_FORMAT_ORIGINAL){var d=getDataItemValue(a[0]);l=isArray$1(d)&&d.length||1}return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(s),dimensionsDetectedCount:l}}function objectRowsCollectDimensions(a){for(var n=0,r;n<a.length&&!(r=a[n++]););if(r)return keys(r)}function normalizeDimensionsOption(a){if(a){var n=createHashMap();return map$1(a,function(r,o){r=isObject$3(r)?r:{name:r};var s={name:r.name,displayName:r.displayName,type:r.type};if(s.name==null)return s;s.name+="",s.displayName==null&&(s.displayName=s.name);var l=n.get(s.name);return l?s.name+="-"+l.count++:n.set(s.name,{count:1}),s})}}function arrayRowsTravelFirst(a,n,r,o){if(n===SERIES_LAYOUT_BY_ROW)for(var s=0;s<r.length&&s<o;s++)a(r[s]?r[s][0]:null,s);else for(var l=r[0]||[],s=0;s<l.length&&s<o;s++)a(l[s],s)}function shouldRetrieveDataByName(a){var n=a.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function a(n,r){var o=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=o;var s=this._data=o.data;o.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=r,this._data=s),mountMethods(this,s,o)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(n,r){},a.prototype.appendData=function(n){},a.prototype.clean=function(){},a.protoInitialize=function(){var n=a.prototype;n.pure=!1,n.persistent=!0}(),a.internalField=function(){var n;mountMethods=function(c,u,d){var f=d.sourceFormat,v=d.seriesLayoutBy,g=d.startIndex,y=d.dimensionsDefine,_=providerMethods[getMethodMapKey(f,v)];if(extend(c,_),f===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=r,c.count=s,c.fillStorage=o;else{var S=getRawSourceItemGetter(f,v);c.getItem=bind$1(S,null,u,g,y);var x=getRawSourceDataCounter(f,v);c.count=bind$1(x,null,u,g,y)}};var r=function(c,u){c=c-this._offset,u=u||[];for(var d=this._data,f=this._dimSize,v=f*c,g=0;g<f;g++)u[g]=d[v+g];return u},o=function(c,u,d,f){for(var v=this._data,g=this._dimSize,y=0;y<g;y++){for(var _=f[y],S=_[0]==null?1/0:_[0],x=_[1]==null?-1/0:_[1],T=u-c,w=d[y],E=0;E<T;E++){var P=v[E*g+y];w[c+E]=P,P<S&&(S=P),P>x&&(x=P)}_[0]=S,_[1]=x}},s=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:l},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:l},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var u=this._data;each$f(c,function(d,f){for(var v=u[f]||(u[f]=[]),g=0;g<(d||[]).length;g++)v.push(d[g])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:l},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},n);function l(c){for(var u=0;u<c.length;u++)this._data.push(c[u])}}(),a}(),getItemSimply=function(a,n,r,o){return a[o]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,n,r,o){return a[o+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,n,r,o,s){o+=n;for(var l=s||[],c=a,u=0;u<c.length;u++){var d=c[u];l[u]=d?d[o]:null}return l},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,n,r,o,s){for(var l=s||[],c=0;c<r.length;c++){var u=r[c].name,d=a[u];l[c]=d?d[o]:null}return l},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(a,n){var r=rawSourceItemGetterMap[getMethodMapKey(a,n)];return r}var countSimply=function(a,n,r){return a.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,n,r){return Math.max(0,a.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,n,r){var o=a[0];return o?Math.max(0,o.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,n,r){var o=r[0].name,s=a[o];return s?s.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(a,n){var r=rawSourceDataCounterMap[getMethodMapKey(a,n)];return r}var getRawValueSimply=function(a,n,r){return a[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(a,n,r){return a[r]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(a,n,r){var o=getDataItemValue(a);return o instanceof Array?o[n]:o},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(a){var n=rawSourceValueGetterMap[a];return n}function getMethodMapKey(a,n){return a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+n:a}function retrieveRawValue(a,n,r){if(a){var o=a.getRawDataItem(n);if(o!=null){var s=a.getStore(),l=s.getSource().sourceFormat;if(r!=null){var c=a.getDimensionIndex(r),u=s.getDimensionProperty(c);return getRawSourceValueGetter(l)(o,c,u)}else{var d=o;return l===SOURCE_FORMAT_ORIGINAL&&(d=getDataItemValue(o)),d}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function a(){}return a.prototype.getDataParams=function(n,r){var o=this.getData(r),s=this.getRawValue(n,r),l=o.getRawIndex(n),c=o.getName(n),u=o.getRawDataItem(n),d=o.getItemVisual(n,"style"),f=d&&d[o.getItemVisual(n,"drawType")||"fill"],v=d&&d.stroke,g=this.mainType,y=g==="series",_=o.userOutput&&o.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:c,dataIndex:l,data:u,dataType:r,value:s,color:f,borderColor:v,dimensionNames:_?_.fullDimensions:null,encode:_?_.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(n,r,o,s,l,c){r=r||"normal";var u=this.getData(o),d=this.getDataParams(n,o);if(c&&(d.value=c.interpolatedValue),s!=null&&isArray$1(d.value)&&(d.value=d.value[s]),!l){var f=u.getItemModel(n);l=f.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(isFunction(l))return d.status=r,d.dimensionIndex=s,l(d);if(isString(l)){var v=formatTpl(l,d);return v.replace(DIMENSION_LABEL_REG,function(g,y){var _=y.length,S=y;S.charAt(0)==="["&&S.charAt(_-1)==="]"&&(S=+S.slice(1,_-1));var x=retrieveRawValue(u,n,S);if(c&&isArray$1(c.interpolatedValue)){var T=u.getDimensionIndex(S);T>=0&&(x=c.interpolatedValue[T])}return x!=null?x+"":""})}},a.prototype.getRawValue=function(n,r){return retrieveRawValue(this.getData(r),n)},a.prototype.formatTooltip=function(n,r,o){},a}();function normalizeTooltipFormatResult(a){var n,r;return isObject$3(a)?a.type&&(r=a):n=a,{text:n,frag:r}}function createTask(a){return new Task(a)}var Task=function(){function a(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return a.prototype.perform=function(n){var r=this._upstream,o=n&&n.skip;if(this._dirty&&r){var s=this.context;s.data=s.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var l;this._plan&&!o&&(l=this._plan(this.context));var c=v(this._modBy),u=this._modDataCount||0,d=v(n&&n.modBy),f=n&&n.modDataCount||0;(c!==d||u!==f)&&(l="reset");function v(E){return!(E>=1)&&(E=1),E}var g;(this._dirty||l==="reset")&&(this._dirty=!1,g=this._doReset(o)),this._modBy=d,this._modDataCount=f;var y=n&&n.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var _=this._dueIndex,S=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!o&&(g||_<S)){var x=this._progress;if(isArray$1(x))for(var T=0;T<x.length;T++)this._doProgress(x[T],_,S,d,f);else this._doProgress(x,_,S,d,f)}this._dueIndex=S;var w=this._settedOutputEnd!=null?this._settedOutputEnd:S;this._outputDueEnd=w}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(n,r,o,s,l){iterator.reset(r,o,s,l),this._callingProgress=n,this._callingProgress({start:r,end:o,count:o-r,next:iterator.next},this.context)},a.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,o;!n&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(o=r.forceFirstProgress,r=r.progress),isArray$1(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var s=this._downstream;return s&&s.dirty(),o},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},a}(),iterator=function(){var a,n,r,o,s,l={reset:function(d,f,v,g){n=d,a=f,r=v,o=g,s=Math.ceil(o/r),l.next=r>1&&o>0?u:c}};return l;function c(){return n<a?n++:null}function u(){var d=n%s*r+Math.ceil(n/s),f=n>=a?null:d<o?d:n;return n++,f}}();function parseDataValue(a,n){var r=n&&n.type;return r==="ordinal"?a:(r==="time"&&!isNumber(a)&&a!=null&&a!=="-"&&(a=+parseDate(a)),a==null||a===""?NaN:Number(a))}var valueParserMap=createHashMap({number:function(a){return parseFloat(a)},time:function(a){return+parseDate(a)},trim:function(a){return isString(a)?trim$1(a):a}});function getRawValueParser(a){return valueParserMap.get(a)}var ORDER_COMPARISON_OP_MAP={lt:function(a,n){return a<n},lte:function(a,n){return a<=n},gt:function(a,n){return a>n},gte:function(a,n){return a>=n}},FilterOrderComparator=function(){function a(n,r){if(!isNumber(r)){var o="";throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},a}(),SortOrderComparator=function(){function a(n,r){var o=n==="desc";this._resultLT=o?1:-1,r==null&&(r=o?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return a.prototype.evaluate=function(n,r){var o=isNumber(n)?n:numericToNumber(n),s=isNumber(r)?r:numericToNumber(r),l=isNaN(o),c=isNaN(s);if(l&&(o=this._incomparable),c&&(s=this._incomparable),l&&c){var u=isString(n),d=isString(r);u&&(o=d?n:0),d&&(s=u?r:0)}return o<s?this._resultLT:o>s?-this._resultLT:0},a}(),FilterEqualityComparator=function(){function a(n,r){this._rval=r,this._isEQ=n,this._rvalTypeof=typeof r,this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(n){var r=n===this._rval;if(!r){var o=typeof n;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(r=numericToNumber(n)===this._rvalFloat)}return this._isEQ?r:!r},a}();function createFilterComparator(a,n){return a==="eq"||a==="ne"?new FilterEqualityComparator(a==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,a)?new FilterOrderComparator(a,n):null}var ExternalSource=function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(n){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(n){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(n,r){},a.prototype.retrieveValueFromItem=function(n,r){},a.prototype.convertValue=function(n,r){return parseDataValue(n,r)},a}();function createExternalSource(a,n){var r=new ExternalSource,o=a.data,s=r.sourceFormat=a.sourceFormat,l=a.startIndex,c="";a.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(c);var u=[],d={},f=a.dimensionsDefine;if(f)each$f(f,function(x,T){var w=x.name,E={index:T,name:w,displayName:x.displayName};if(u.push(E),w!=null){var P="";hasOwn(d,w)&&throwError(P),d[w]=E}});else for(var v=0;v<a.dimensionsDetectedCount;v++)u.push({index:v});var g=getRawSourceItemGetter(s,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(r.getRawDataItem=function(x){return g(o,l,u,x)},r.getRawData=bind$1(getRawData,null,a)),r.cloneRawData=bind$1(cloneRawData,null,a);var y=getRawSourceDataCounter(s,SERIES_LAYOUT_BY_COLUMN);r.count=bind$1(y,null,o,l,u);var _=getRawSourceValueGetter(s);r.retrieveValue=function(x,T){var w=g(o,l,u,x);return S(w,T)};var S=r.retrieveValueFromItem=function(x,T){if(x!=null){var w=u[T];if(w)return _(x,T,w.name)}};return r.getDimensionInfo=bind$1(getDimensionInfo,null,u,d),r.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,u),r}function getRawData(a){var n=a.sourceFormat;if(!isSupportedSourceFormat(n)){var r="";throwError(r)}return a.data}function cloneRawData(a){var n=a.sourceFormat,r=a.data;if(!isSupportedSourceFormat(n)){var o="";throwError(o)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var s=[],l=0,c=r.length;l<c;l++)s.push(r[l].slice());return s}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var s=[],l=0,c=r.length;l<c;l++)s.push(extend({},r[l]));return s}}function getDimensionInfo(a,n,r){if(r!=null){if(isNumber(r)||!isNaN(r)&&!hasOwn(n,r))return a[r];if(hasOwn(n,r))return n[r]}}function cloneAllDimensionInfo(a){return clone$4(a)}var externalTransformMap=createHashMap();function registerExternalTransform(a){a=clone$4(a);var n=a.type,r="";n||throwError(r);var o=n.split(":");o.length!==2&&throwError(r);var s=!1;o[0]==="echarts"&&(n=o[1],s=!0),a.__isBuiltIn=s,externalTransformMap.set(n,a)}function applyDataTransform(a,n,r){var o=normalizeToArray(a),s=o.length,l="";s||throwError(l);for(var c=0,u=s;c<u;c++){var d=o[c];n=applySingleDataTransform(d,n),c!==u-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(a,n,r,o){var s="";n.length||throwError(s),isObject$3(a)||throwError(s);var l=a.type,c=externalTransformMap.get(l);c||throwError(s);var u=map$1(n,function(f){return createExternalSource(f,c)}),d=normalizeToArray(c.transform({upstream:u[0],upstreamList:u,config:clone$4(a.config)}));return map$1(d,function(f,v){var g="";isObject$3(f)||throwError(g),f.data||throwError(g);var y=detectSourceFormat(f.data);isSupportedSourceFormat(y)||throwError(g);var _,S=n[0];if(S&&v===0&&!f.dimensions){var x=S.startIndex;x&&(f.data=S.data.slice(0,x).concat(f.data)),_={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:x,dimensions:S.metaRawOption.dimensions}}else _={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:f.dimensions};return createSource(f.data,_,null)})}function isSupportedSourceFormat(a){return a===SOURCE_FORMAT_ARRAY_ROWS||a===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(a){return a>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(a){var n=a.constructor;return n===Array?a.slice():new n(a)}function prepareStore(a,n,r,o,s){var l=dataCtors[r||"float"];if(s){var c=a[n],u=c&&c.length;if(u!==o){for(var d=new l(o),f=0;f<u;f++)d[f]=c[f];a[n]=d}}else a[n]=new l(o)}var DataStore=function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return a.prototype.initData=function(n,r,o){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var s=n.getSource(),l=this.defaultDimValueGetter=defaultDimValueGetters[s.sourceFormat];this._dimValueGetter=o||l,this._rawExtent=[],shouldRetrieveDataByName(s),this._dimensions=map$1(r,function(c){return{type:c.type,property:c.property}}),this._initDataFromProvider(0,n.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(n,r){var o=this._calcDimNameToIdx,s=this._dimensions,l=o.get(n);if(l!=null){if(s[l].type===r)return l}else l=s.length;return s[l]={type:r},o.set(n,l),this._chunks[l]=new dataCtors[r||"float"](this._rawCount),this._rawExtent[l]=getInitialExtent(),l},a.prototype.collectOrdinalMeta=function(n,r){var o=this._chunks[n],s=this._dimensions[n],l=this._rawExtent,c=s.ordinalOffset||0,u=o.length;c===0&&(l[n]=getInitialExtent());for(var d=l[n],f=c;f<u;f++){var v=o[f]=r.parseAndCollect(o[f]);isNaN(v)||(d[0]=Math.min(v,d[0]),d[1]=Math.max(v,d[1]))}s.ordinalMeta=r,s.ordinalOffset=u,s.type="ordinal"},a.prototype.getOrdinalMeta=function(n){var r=this._dimensions[n],o=r.ordinalMeta;return o},a.prototype.getDimensionProperty=function(n){var r=this._dimensions[n];return r&&r.property},a.prototype.appendData=function(n){var r=this._provider,o=this.count();r.appendData(n);var s=r.count();return r.persistent||(s+=o),o<s&&this._initDataFromProvider(o,s,!0),[o,s]},a.prototype.appendValues=function(n,r){for(var o=this._chunks,s=this._dimensions,l=s.length,c=this._rawExtent,u=this.count(),d=u+Math.max(n.length,r||0),f=0;f<l;f++){var v=s[f];prepareStore(o,f,v.type,d,!0)}for(var g=[],y=u;y<d;y++)for(var _=y-u,S=0;S<l;S++){var v=s[S],x=defaultDimValueGetters.arrayRows.call(this,n[_]||g,v.property,_,S);o[S][y]=x;var T=c[S];x<T[0]&&(T[0]=x),x>T[1]&&(T[1]=x)}return this._rawCount=this._count=d,{start:u,end:d}},a.prototype._initDataFromProvider=function(n,r,o){for(var s=this._provider,l=this._chunks,c=this._dimensions,u=c.length,d=this._rawExtent,f=map$1(c,function(E){return E.property}),v=0;v<u;v++){var g=c[v];d[v]||(d[v]=getInitialExtent()),prepareStore(l,v,g.type,r,o)}if(s.fillStorage)s.fillStorage(n,r,l,d);else for(var y=[],_=n;_<r;_++){y=s.getItem(_,y);for(var S=0;S<u;S++){var x=l[S],T=this._dimValueGetter(y,f[S],_,S);x[_]=T;var w=d[S];T<w[0]&&(w[0]=T),T>w[1]&&(w[1]=T)}}!s.persistent&&s.clean&&s.clean(),this._rawCount=this._count=r,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(n,r){if(!(r>=0&&r<this._count))return NaN;var o=this._chunks[n];return o?o[this.getRawIndex(r)]:NaN},a.prototype.getValues=function(n,r){var o=[],s=[];if(r==null){r=n,n=[];for(var l=0;l<this._dimensions.length;l++)s.push(l)}else s=n;for(var l=0,c=s.length;l<c;l++)o.push(this.get(s[l],r));return o},a.prototype.getByRawIndex=function(n,r){if(!(r>=0&&r<this._rawCount))return NaN;var o=this._chunks[n];return o?o[r]:NaN},a.prototype.getSum=function(n){var r=this._chunks[n],o=0;if(r)for(var s=0,l=this.count();s<l;s++){var c=this.get(n,s);isNaN(c)||(o+=c)}return o},a.prototype.getMedian=function(n){var r=[];this.each([n],function(l){isNaN(l)||r.push(l)});var o=r.sort(function(l,c){return l-c}),s=this.count();return s===0?0:s%2===1?o[(s-1)/2]:(o[s/2]+o[s/2-1])/2},a.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var r=this._indices,o=r[n];if(o!=null&&o<this._count&&o===n)return n;for(var s=0,l=this._count-1;s<=l;){var c=(s+l)/2|0;if(r[c]<n)s=c+1;else if(r[c]>n)l=c-1;else return c}return-1},a.prototype.indicesOfNearest=function(n,r,o){var s=this._chunks,l=s[n],c=[];if(!l)return c;o==null&&(o=1/0);for(var u=1/0,d=-1,f=0,v=0,g=this.count();v<g;v++){var y=this.getRawIndex(v),_=r-l[y],S=Math.abs(_);S<=o&&((S<u||S===u&&_>=0&&d<0)&&(u=S,d=_,f=0),_===d&&(c[f++]=v))}return c.length=f,c},a.prototype.getIndices=function(){var n,r=this._indices;if(r){var o=r.constructor,s=this._count;if(o===Array){n=new o(s);for(var l=0;l<s;l++)n[l]=r[l]}else n=new o(r.buffer,0,s)}else{var o=getIndicesCtor(this._rawCount);n=new o(this.count());for(var l=0;l<n.length;l++)n[l]=l}return n},a.prototype.filter=function(n,r){if(!this._count)return this;for(var o=this.clone(),s=o.count(),l=getIndicesCtor(o._rawCount),c=new l(s),u=[],d=n.length,f=0,v=n[0],g=o._chunks,y=0;y<s;y++){var _=void 0,S=o.getRawIndex(y);if(d===0)_=r(y);else if(d===1){var x=g[v][S];_=r(x,y)}else{for(var T=0;T<d;T++)u[T]=g[n[T]][S];u[T]=y,_=r.apply(null,u)}_&&(c[f++]=S)}return f<s&&(o._indices=c),o._count=f,o._extent=[],o._updateGetRawIdx(),o},a.prototype.selectRange=function(n){var r=this.clone(),o=r._count;if(!o)return this;var s=keys(n),l=s.length;if(!l)return this;var c=r.count(),u=getIndicesCtor(r._rawCount),d=new u(c),f=0,v=s[0],g=n[v][0],y=n[v][1],_=r._chunks,S=!1;if(!r._indices){var x=0;if(l===1){for(var T=_[s[0]],w=0;w<o;w++){var E=T[w];(E>=g&&E<=y||isNaN(E))&&(d[f++]=x),x++}S=!0}else if(l===2){for(var T=_[s[0]],P=_[s[1]],D=n[s[1]][0],L=n[s[1]][1],w=0;w<o;w++){var E=T[w],$=P[w];(E>=g&&E<=y||isNaN(E))&&($>=D&&$<=L||isNaN($))&&(d[f++]=x),x++}S=!0}}if(!S)if(l===1)for(var w=0;w<c;w++){var O=r.getRawIndex(w),E=_[s[0]][O];(E>=g&&E<=y||isNaN(E))&&(d[f++]=O)}else for(var w=0;w<c;w++){for(var B=!0,O=r.getRawIndex(w),V=0;V<l;V++){var F=s[V],E=_[F][O];(E<n[F][0]||E>n[F][1])&&(B=!1)}B&&(d[f++]=r.getRawIndex(w))}return f<c&&(r._indices=d),r._count=f,r._extent=[],r._updateGetRawIdx(),r},a.prototype.map=function(n,r){var o=this.clone(n);return this._updateDims(o,n,r),o},a.prototype.modify=function(n,r){this._updateDims(this,n,r)},a.prototype._updateDims=function(n,r,o){for(var s=n._chunks,l=[],c=r.length,u=n.count(),d=[],f=n._rawExtent,v=0;v<r.length;v++)f[r[v]]=getInitialExtent();for(var g=0;g<u;g++){for(var y=n.getRawIndex(g),_=0;_<c;_++)d[_]=s[r[_]][y];d[c]=g;var S=o&&o.apply(null,d);if(S!=null){typeof S!="object"&&(l[0]=S,S=l);for(var v=0;v<S.length;v++){var x=r[v],T=S[v],w=f[x],E=s[x];E&&(E[y]=T),T<w[0]&&(w[0]=T),T>w[1]&&(w[1]=T)}}}},a.prototype.lttbDownSample=function(n,r){var o=this.clone([n],!0),s=o._chunks,l=s[n],c=this.count(),u=0,d=Math.floor(1/r),f=this.getRawIndex(0),v,g,y,_=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/d)+2)*2,c));_[u++]=f;for(var S=1;S<c-1;S+=d){for(var x=Math.min(S+d,c-1),T=Math.min(S+d*2,c),w=(T+x)/2,E=0,P=x;P<T;P++){var D=this.getRawIndex(P),L=l[D];isNaN(L)||(E+=L)}E/=T-x;var $=S,O=Math.min(S+d,c),B=S-1,V=l[f];v=-1,y=$;for(var F=-1,U=0,P=$;P<O;P++){var D=this.getRawIndex(P),L=l[D];if(isNaN(L)){U++,F<0&&(F=D);continue}g=Math.abs((B-w)*(L-V)-(B-P)*(E-V)),g>v&&(v=g,y=D)}U>0&&U<O-$&&(_[u++]=Math.min(F,y),y=Math.max(F,y)),_[u++]=y,f=y}return _[u++]=this.getRawIndex(c-1),o._count=u,o._indices=_,o.getRawIndex=this._getRawIdx,o},a.prototype.minmaxDownSample=function(n,r){for(var o=this.clone([n],!0),s=o._chunks,l=Math.floor(1/r),c=s[n],u=this.count(),d=new(getIndicesCtor(this._rawCount))(Math.ceil(u/l)*2),f=0,v=0;v<u;v+=l){var g=v,y=c[this.getRawIndex(g)],_=v,S=c[this.getRawIndex(_)],x=l;v+l>u&&(x=u-v);for(var T=0;T<x;T++){var w=this.getRawIndex(v+T),E=c[w];E<y&&(y=E,g=v+T),E>S&&(S=E,_=v+T)}var P=this.getRawIndex(g),D=this.getRawIndex(_);g<_?(d[f++]=P,d[f++]=D):(d[f++]=D,d[f++]=P)}return o._count=f,o._indices=d,o._updateGetRawIdx(),o},a.prototype.downSample=function(n,r,o,s){for(var l=this.clone([n],!0),c=l._chunks,u=[],d=Math.floor(1/r),f=c[n],v=this.count(),g=l._rawExtent[n]=getInitialExtent(),y=new(getIndicesCtor(this._rawCount))(Math.ceil(v/d)),_=0,S=0;S<v;S+=d){d>v-S&&(d=v-S,u.length=d);for(var x=0;x<d;x++){var T=this.getRawIndex(S+x);u[x]=f[T]}var w=o(u),E=this.getRawIndex(Math.min(S+s(u,w)||0,v-1));f[E]=w,w<g[0]&&(g[0]=w),w>g[1]&&(g[1]=w),y[_++]=E}return l._count=_,l._indices=y,l._updateGetRawIdx(),l},a.prototype.each=function(n,r){if(this._count)for(var o=n.length,s=this._chunks,l=0,c=this.count();l<c;l++){var u=this.getRawIndex(l);switch(o){case 0:r(l);break;case 1:r(s[n[0]][u],l);break;case 2:r(s[n[0]][u],s[n[1]][u],l);break;default:for(var d=0,f=[];d<o;d++)f[d]=s[n[d]][u];f[d]=l,r.apply(null,f)}}},a.prototype.getDataExtent=function(n){var r=this._chunks[n],o=getInitialExtent();if(!r)return o;var s=this.count(),l=!this._indices,c;if(l)return this._rawExtent[n].slice();if(c=this._extent[n],c)return c.slice();c=o;for(var u=c[0],d=c[1],f=0;f<s;f++){var v=this.getRawIndex(f),g=r[v];g<u&&(u=g),g>d&&(d=g)}return c=[u,d],this._extent[n]=c,c},a.prototype.getRawDataItem=function(n){var r=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(r);for(var o=[],s=this._chunks,l=0;l<s.length;l++)o.push(s[l][r]);return o},a.prototype.clone=function(n,r){var o=new a,s=this._chunks,l=n&&reduce(n,function(u,d){return u[d]=!0,u},{});if(l)for(var c=0;c<s.length;c++)o._chunks[c]=l[c]?cloneChunk(s[c]):s[c];else o._chunks=s;return this._copyCommonProps(o),r||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},a.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,r=void 0;if(n===Array){var o=this._indices.length;r=new n(o);for(var s=0;s<o;s++)r[s]=this._indices[s]}else r=new n(this._indices);return r}return null},a.prototype._getRawIdxIdentity=function(n){return n},a.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=function(){function n(r,o,s,l){return parseDataValue(r[l],this._dimensions[l])}defaultDimValueGetters={arrayRows:n,objectRows:function(r,o,s,l){return parseDataValue(r[o],this._dimensions[l])},keyedColumns:n,original:function(r,o,s,l){var c=r&&(r.value==null?r:r.value);return parseDataValue(c instanceof Array?c[l]:c,this._dimensions[l])},typedArray:function(r,o,s,l){return r[l]}}}(),a}(),SourceManager=function(){function a(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(n,r){this._sourceList=n,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,r=this._getUpstreamSourceManagers(),o=!!r.length,s,l;if(isSeries(n)){var c=n,u=void 0,d=void 0,f=void 0;if(o){var v=r[0];v.prepareSource(),f=v.getSource(),u=f.data,d=f.sourceFormat,l=[v._getVersionSign()]}else u=c.get("data",!0),d=isTypedArray(u)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,l=[];var g=this._getSourceMetaRawOption()||{},y=f&&f.metaRawOption||{},_=retrieve2(g.seriesLayoutBy,y.seriesLayoutBy)||null,S=retrieve2(g.sourceHeader,y.sourceHeader),x=retrieve2(g.dimensions,y.dimensions),T=_!==y.seriesLayoutBy||!!S!=!!y.sourceHeader||x;s=T?[createSource(u,{seriesLayoutBy:_,sourceHeader:S,dimensions:x},d)]:[]}else{var w=n;if(o){var E=this._applyTransform(r);s=E.sourceList,l=E.upstreamSignList}else{var P=w.get("source",!0);s=[createSource(P,this._getSourceMetaRawOption(),null)],l=[]}}this._setLocalSource(s,l)},a.prototype._applyTransform=function(n){var r=this._sourceHost,o=r.get("transform",!0),s=r.get("fromTransformResult",!0);if(s!=null){var l="";n.length!==1&&doThrow(l)}var c,u=[],d=[];return each$f(n,function(f){f.prepareSource();var v=f.getSource(s||0),g="";s!=null&&!v&&doThrow(g),u.push(v),d.push(f._getVersionSign())}),o?c=applyDataTransform(o,u,{datasetIndex:r.componentIndex}):s!=null&&(c=[cloneSourceShallow(u[0])]),{sourceList:c,upstreamSignList:d}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),r=0;r<n.length;r++){var o=n[r];if(o._isDirty()||this._upstreamSignList[r]!==o._getVersionSign())return!0}},a.prototype.getSource=function(n){n=n||0;var r=this._sourceList[n];if(!r){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(n)}return r},a.prototype.getSharedDataStore=function(n){var r=n.makeStoreSchema();return this._innerGetDataStore(r.dimensions,n.source,r.hash)},a.prototype._innerGetDataStore=function(n,r,o){var s=0,l=this._storeList,c=l[s];c||(c=l[s]={});var u=c[o];if(!u){var d=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&d?u=d._innerGetDataStore(n,r,o):(u=new DataStore,u.initData(new DefaultDataProvider(r,n.length),n)),c[o]=u}return u},a.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var r=querySeriesUpstreamDatasetModel(n);return r?[r.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(o){return o.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,r,o,s;if(isSeries(n))r=n.get("seriesLayoutBy",!0),o=n.get("sourceHeader",!0),s=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var l=n;r=l.get("seriesLayoutBy",!0),o=l.get("sourceHeader",!0),s=l.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:o,dimensions:s}},a}();function disableTransformOptionMerge(a){var n=a.option.transform;n&&setAsPrimitive(a.option.transform)}function isSeries(a){return a.mainType==="series"}function doThrow(a){throw new Error(a)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(a){var n=a.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(a,n){var r=a.color||"#6e7079",o=a.fontSize||12,s=a.fontWeight||"400",l=a.color||"#464646",c=a.fontSize||14,u=a.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(r)+";font-weight:"+encodeHTML(s+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(l)+";font-weight:"+encodeHTML(u+"")}:{nameStyle:{fontSize:o,fill:r,fontWeight:s},valueStyle:{fontSize:c,fill:l,fontWeight:u}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(a,n){return n.type=a,n}function isSectionFragment(a){return a.type==="section"}function getBuilder(a){return isSectionFragment(a)?buildSection:buildNameValue}function getBlockGapLevel(a){if(isSectionFragment(a)){var n=0,r=a.blocks.length,o=r>1||r>0&&!a.noHeader;return each$f(a.blocks,function(s){var l=getBlockGapLevel(s);l>=n&&(n=l+ +(o&&(!l||isSectionFragment(s)&&!s.noHeader)))}),n}return 0}function buildSection(a,n,r,o){var s=n.noHeader,l=getGap(getBlockGapLevel(n)),c=[],u=n.blocks||[];assert(!u||isArray$1(u)),u=u||[];var d=a.orderMode;if(n.sortBlocks&&d){u=u.slice();var f={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(f,d)){var v=new SortOrderComparator(f[d],null);u.sort(function(x,T){return v.evaluate(x.sortParam,T.sortParam)})}else d==="seriesDesc"&&u.reverse()}each$f(u,function(x,T){var w=n.valueFormatter,E=getBuilder(x)(w?extend(extend({},a),{valueFormatter:w}):a,x,T>0?l.html:0,o);E!=null&&c.push(E)});var g=a.renderMode==="richText"?c.join(l.richText):wrapBlockHTML(o,c.join(""),s?r:l.html);if(s)return g;var y=makeValueReadable(n.header,"ordinal",a.useUTC),_=getTooltipTextStyle(o,a.renderMode).nameStyle,S=getTooltipLineHeight(o);return a.renderMode==="richText"?wrapInlineNameRichText(a,y,_)+l.richText+g:wrapBlockHTML(o,'<div style="'+_+";"+S+';">'+encodeHTML(y)+"</div>"+g,r)}function buildNameValue(a,n,r,o){var s=a.renderMode,l=n.noName,c=n.noValue,u=!n.markerType,d=n.name,f=a.useUTC,v=n.valueFormatter||a.valueFormatter||function(D){return D=isArray$1(D)?D:[D],map$1(D,function(L,$){return makeValueReadable(L,isArray$1(_)?_[$]:_,f)})};if(!(l&&c)){var g=u?"":a.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",s),y=l?"":makeValueReadable(d,"ordinal",f),_=n.valueType,S=c?[]:v(n.value,n.dataIndex),x=!u||!l,T=!u&&l,w=getTooltipTextStyle(o,s),E=w.nameStyle,P=w.valueStyle;return s==="richText"?(u?"":g)+(l?"":wrapInlineNameRichText(a,y,E))+(c?"":wrapInlineValueRichText(a,S,x,T,P)):wrapBlockHTML(o,(u?"":g)+(l?"":wrapInlineNameHTML(y,!u,E))+(c?"":wrapInlineValueHTML(S,x,T,P)),r)}}function buildTooltipMarkup(a,n,r,o,s,l){if(a){var c=getBuilder(a),u={useUTC:s,renderMode:r,orderMode:o,markupStyleCreator:n,valueFormatter:a.valueFormatter};return c(u,a,0,l)}}function getGap(a){return{html:HTML_GAPS[a],richText:RICH_TEXT_GAPS[a]}}function wrapBlockHTML(a,n,r){var o='<div style="clear:both"></div>',s="margin: "+r+"px 0 0",l=getTooltipLineHeight(a);return'<div style="'+s+";"+l+';">'+n+o+"</div>"}function wrapInlineNameHTML(a,n,r){var o=n?"margin-left:2px":"";return'<span style="'+r+";"+o+'">'+encodeHTML(a)+"</span>"}function wrapInlineValueHTML(a,n,r,o){var s=r?"10px":"20px",l=n?"float:right;margin-left:"+s:"";return a=isArray$1(a)?a:[a],'<span style="'+l+";"+o+'">'+map$1(a,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(a,n,r){return a.markupStyleCreator.wrapRichTextStyle(n,r)}function wrapInlineValueRichText(a,n,r,o,s){var l=[s],c=o?10:20;return r&&l.push({padding:[0,0,0,c],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,l)}function retrieveVisualColorForTooltipMarker(a,n){var r=a.getData().getItemVisual(n,"style"),o=r[a.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(a,n){var r=a.get("padding");return r??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function a(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(n,r,o){var s=o==="richText"?this._generateStyleName():null,l=getTooltipMarker({color:r,type:n,renderMode:o,markerId:s});return isString(l)?l:(this.richTextStyles[s]=l.style,l.content)},a.prototype.wrapRichTextStyle=function(n,r){var o={};isArray$1(r)?each$f(r,function(l){return extend(o,l)}):extend(o,r);var s=this._generateStyleName();return this.richTextStyles[s]=o,"{"+s+"|"+n+"}"},a}();function defaultSeriesFormatTooltip(a){var n=a.series,r=a.dataIndex,o=a.multipleSeries,s=n.getData(),l=s.mapDimensionsAll("defaultedTooltip"),c=l.length,u=n.getRawValue(r),d=isArray$1(u),f=retrieveVisualColorForTooltipMarker(n,r),v,g,y,_;if(c>1||d&&!c){var S=formatTooltipArrayValue(u,n,r,l,f);v=S.inlineValues,g=S.inlineValueTypes,y=S.blocks,_=S.inlineValues[0]}else if(c){var x=s.getDimensionInfo(l[0]);_=v=retrieveRawValue(s,r,l[0]),g=x.type}else _=v=d?u[0]:u;var T=isNameSpecified(n),w=T&&n.name||"",E=s.getName(r),P=o?w:E;return createTooltipMarkup("section",{header:w,noHeader:o||!T,sortParam:_,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:f,name:P,noName:!trim$1(P),value:v,valueType:g,dataIndex:r})].concat(y||[])})}function formatTooltipArrayValue(a,n,r,o,s){var l=n.getData(),c=reduce(a,function(g,y,_){var S=l.getDimensionInfo(_);return g=g||S&&S.tooltip!==!1&&S.displayName!=null},!1),u=[],d=[],f=[];o.length?each$f(o,function(g){v(retrieveRawValue(l,r,g),g)}):each$f(a,v);function v(g,y){var _=l.getDimensionInfo(y);!_||_.otherDims.tooltip===!1||(c?f.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:s,name:_.displayName,value:g,valueType:_.type})):(u.push(g),d.push(_.type)))}return{inlineValues:u,inlineValueTypes:d,blocks:f}}var inner$k=makeInner();function getSelectionKey(a,n){return a.getName(n)||a.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return n.prototype.init=function(r,o,s){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,s);var l=inner$k(this).sourceManager=new SourceManager(this);l.prepareSource();var c=this.getInitialData(r,s);wrapData(c,this),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.mergeDefaultAndTheme=function(r,o){var s=fetchLayoutMode(this),l=s?getLayoutParams(r):{},c=this.subType;ComponentModel.hasClass(c)&&(c+="Series"),merge(r,o.getTheme().get(this.subType)),merge(r,this.getDefaultOption()),defaultEmphasis(r,"label",["show"]),this.fillDataTextStyle(r.data),s&&mergeLayoutParam(r,l,s)},n.prototype.mergeOption=function(r,o){r=merge(this.option,r,!0),this.fillDataTextStyle(r.data);var s=fetchLayoutMode(this);s&&mergeLayoutParam(this.option,r,s);var l=inner$k(this).sourceManager;l.dirty(),l.prepareSource();var c=this.getInitialData(r,o);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.fillDataTextStyle=function(r){if(r&&!isTypedArray(r))for(var o=["show"],s=0;s<r.length;s++)r[s]&&r[s].label&&defaultEmphasis(r[s],"label",o)},n.prototype.getInitialData=function(r,o){},n.prototype.appendData=function(r){var o=this.getRawData();o.appendData(r.data)},n.prototype.getData=function(r){var o=getCurrentTask(this);if(o){var s=o.context.data;return r==null||!s.getLinkedData?s:s.getLinkedData(r)}else return inner$k(this).data},n.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},n.prototype.setData=function(r){var o=getCurrentTask(this);if(o){var s=o.context;s.outputData=r,o!==this.dataTask&&(s.data=r)}inner$k(this).data=r},n.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return createHashMap(r)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},n.prototype.formatTooltip=function(r,o,s){return defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o})},n.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(env.node&&!(r&&r.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(r,o,s){var l=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,r,o,s);return c||(c=l.getColorFromPalette(r,o,s)),c},n.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(r,o){this._innerSelect(this.getData(o),r)},n.prototype.unselect=function(r,o){var s=this.option.selectedMap;if(s){var l=this.option.selectedMode,c=this.getData(o);if(l==="series"||s==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var u=0;u<r.length;u++){var d=r[u],f=getSelectionKey(c,d);s[f]=!1,this._selectedDataIndicesMap[f]=-1}}},n.prototype.toggleSelect=function(r,o){for(var s=[],l=0;l<r.length;l++)s[0]=r[l],this.isSelected(r[l],o)?this.unselect(s,o):this.select(s,o)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,o=keys(r),s=[],l=0;l<o.length;l++){var c=r[o[l]];c>=0&&s.push(c)}return s},n.prototype.isSelected=function(r,o){var s=this.option.selectedMap;if(!s)return!1;var l=this.getData(o);return(s==="all"||s[getSelectionKey(l,r)])&&!l.getItemModel(r).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},n.prototype._innerSelect=function(r,o){var s,l,c=this.option,u=c.selectedMode,d=o.length;if(!(!u||!d)){if(u==="series")c.selectedMap="all";else if(u==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var f=c.selectedMap,v=0;v<d;v++){var g=o[v],y=getSelectionKey(r,g);f[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(g)}}else if(u==="single"||u===!0){var _=o[d-1],y=getSelectionKey(r,_);c.selectedMap=(s={},s[y]=!0,s),this._selectedDataIndicesMap=(l={},l[y]=r.getRawIndex(_),l)}}},n.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var o=[];r.hasItemOption&&r.each(function(s){var l=r.getRawDataItem(s);l&&l.selected&&o.push(s)}),o.length>0&&this._innerSelect(r,o)}},n.registerClass=function(r){return ComponentModel.registerClass(r)},n.protoInitialize=function(){var r=n.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),n}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(a){var n=a.name;isNameSpecified(a)||(a.name=getSeriesAutoName(a)||n)}function getSeriesAutoName(a){var n=a.getRawData(),r=n.mapDimensionsAll("seriesName"),o=[];return each$f(r,function(s){var l=n.getDimensionInfo(s);l.displayName&&o.push(l.displayName)}),o.join(" ")}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(a){var n=a.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(a,n){n.outputData&&a.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(a,n){each$f(concatArray(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(r){a.wrapMethod(r,curry$1(onDataChange,n))})}function onDataChange(a,n){var r=getCurrentTask(a);return r&&r.setOutputEnd((n||this).count()),n}function getCurrentTask(a){var n=(a.ecModel||{}).scheduler,r=n&&n.getPipeline(a.uid);if(r){var o=r.currentTask;if(o){var s=o.agentStubMap;s&&(o=s.get(a.uid))}return o}}var ComponentView=function(){function a(){this.group=new Group$4,this.uid=getUID("viewComponent")}return a.prototype.init=function(n,r){},a.prototype.render=function(n,r,o,s){},a.prototype.dispose=function(n,r){},a.prototype.updateView=function(n,r,o,s){},a.prototype.updateLayout=function(n,r,o,s){},a.prototype.updateVisual=function(n,r,o,s){},a.prototype.toggleBlurSeries=function(n,r,o){},a.prototype.eachRendered=function(n){var r=this.group;r&&r.traverse(n)},a}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var a=makeInner();return function(n){var r=a(n),o=n.pipelineContext,s=!!r.large,l=!!r.progressiveRender,c=r.large=!!(o&&o.large),u=r.progressiveRender=!!(o&&o.progressiveRender);return(s!==c||l!==u)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function a(){this.group=new Group$4,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return a.prototype.init=function(n,r){},a.prototype.render=function(n,r,o,s){},a.prototype.highlight=function(n,r,o,s){var l=n.getData(s&&s.dataType);l&&toggleHighlight(l,s,"emphasis")},a.prototype.downplay=function(n,r,o,s){var l=n.getData(s&&s.dataType);l&&toggleHighlight(l,s,"normal")},a.prototype.remove=function(n,r){this.group.removeAll()},a.prototype.dispose=function(n,r){},a.prototype.updateView=function(n,r,o,s){this.render(n,r,o,s)},a.prototype.updateLayout=function(n,r,o,s){this.render(n,r,o,s)},a.prototype.updateVisual=function(n,r,o,s){this.render(n,r,o,s)},a.prototype.eachRendered=function(n){traverseElements(this.group,n)},a.markUpdateMethod=function(n,r){inner$j(n).updateMethod=r},a.protoInitialize=function(){var n=a.prototype;n.type="chart"}(),a}();function elSetState(a,n,r){a&&isHighDownDispatcher(a)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(a,r)}function toggleHighlight(a,n,r){var o=queryDataIndex(a,n),s=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(l){elSetState(a.getItemGraphicEl(l),r,s)}):a.eachItemGraphicEl(function(l){elSetState(l,r,s)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(a){return renderPlanner(a.model)}function renderTaskReset(a){var n=a.model,r=a.ecModel,o=a.api,s=a.payload,l=n.pipelineContext.progressiveRender,c=a.view,u=s&&inner$j(s).updateMethod,d=l?"incrementalPrepareRender":u&&c[u]?u:"render";return d!=="render"&&c[d](n,r,o,s),progressMethodMap[d]}var progressMethodMap={incrementalPrepareRender:{progress:function(a,n){n.view.incrementalRender(a,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(a,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(a,n,r){var o,s=0,l=0,c=null,u,d,f,v;n=n||0;function g(){l=new Date().getTime(),c=null,a.apply(d,f||[])}var y=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];o=new Date().getTime(),d=this,f=_;var x=v||n,T=v||r;v=null,u=o-(T?s:l)-x,clearTimeout(c),T?c=setTimeout(g,x):u>=0?g():c=setTimeout(g,-u),s=o};return y.clear=function(){c&&(clearTimeout(c),c=null)},y.debounceNextCall=function(_){v=_},y}function createOrUpdate(a,n,r,o){var s=a[n];if(s){var l=s[ORIGIN_METHOD]||s,c=s[THROTTLE_TYPE],u=s[RATE];if(u!==r||c!==o){if(r==null||!o)return a[n]=l;s=a[n]=throttle(l,r,o==="debounce"),s[ORIGIN_METHOD]=l,s[THROTTLE_TYPE]=o,s[RATE]=r}return s}}function clear$1(a,n){var r=a[n];r&&r[ORIGIN_METHOD]&&(r.clear&&r.clear(),a[n]=r[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(a,n){var r=a.visualStyleMapper||defaultStyleMappers[n];return r||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(a,n){var r=a.visualDrawType||defaultColorKey[n];return r||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){var r=a.getData(),o=a.visualStyleAccessPath||"itemStyle",s=a.getModel(o),l=getStyleMapper(a,o),c=l(s),u=s.getShallow("decal");u&&(r.setVisual("decal",u),u.dirty=!0);var d=getDefaultColorKey(a,o),f=c[d],v=isFunction(f)?f:null,g=c.fill==="auto"||c.stroke==="auto";if(!c[d]||v||g){var y=a.getColorFromPalette(a.name,null,n.getSeriesCount());c[d]||(c[d]=y,r.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction(c.fill)?y:c.fill,c.stroke=c.stroke==="auto"||isFunction(c.stroke)?y:c.stroke}if(r.setVisual("style",c),r.setVisual("drawType",d),!n.isSeriesFiltered(a)&&v)return r.setVisual("colorFromPalette",!1),{dataEach:function(_,S){var x=a.getDataParams(S),T=extend({},c);T[d]=v(x),_.setItemVisual(S,"style",T)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){if(!(a.ignoreStyleOnData||n.isSeriesFiltered(a))){var r=a.getData(),o=a.visualStyleAccessPath||"itemStyle",s=getStyleMapper(a,o),l=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(c,u){var d=c.getRawDataItem(u);if(d&&d[o]){sharedModel.option=d[o];var f=s(sharedModel),v=c.ensureUniqueItemVisual(u,"style");extend(v,f),sharedModel.option.decal&&(c.setItemVisual(u,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),l in f&&c.setItemVisual(u,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(a){var n=createHashMap();a.eachSeries(function(r){var o=r.getColorBy();if(!r.isColorBySeries()){var s=r.type+"-"+o,l=n.get(s);l||(l={},n.set(s,l)),inner$i(r).scope=l}}),a.eachSeries(function(r){if(!(r.isColorBySeries()||a.isSeriesFiltered(r))){var o=r.getRawData(),s={},l=r.getData(),c=inner$i(r).scope,u=r.visualStyleAccessPath||"itemStyle",d=getDefaultColorKey(r,u);l.each(function(f){var v=l.getRawIndex(f);s[v]=f}),o.each(function(f){var v=s[f],g=l.getItemVisual(v,"colorFromPalette");if(g){var y=l.ensureUniqueItemVisual(v,"style"),_=o.getName(f)||f+"",S=o.count();y[d]=r.getColorFromPalette(_,c,S)}})}})}},PI$5=Math.PI;function defaultLoading(a,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Group$4,o=new Rect$2({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});r.add(o);var s=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),l=new Rect$2({style:{fill:"none"},textContent:s,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});r.add(l);var c;return n.showSpinner&&(c=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),r.add(c)),r.resize=function(){var u=s.getBoundingRect().width,d=n.showSpinner?n.spinnerRadius:0,f=(a.getWidth()-d*2-(n.showSpinner&&u?10:0)-u)/2-(n.showSpinner&&u?0:5+u/2)+(n.showSpinner?0:u/2)+(u?0:d),v=a.getHeight()/2;n.showSpinner&&c.setShape({cx:f,cy:v}),l.setShape({x:f-d,y:v-d,width:d*2,height:d*2}),o.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},r.resize(),r}var Scheduler=function(){function a(n,r,o,s){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=r,o=this._dataProcessorHandlers=o.slice(),s=this._visualHandlers=s.slice(),this._allHandlers=o.concat(s)}return a.prototype.restoreData=function(n,r){n.restoreData(r),this._stageTaskMap.each(function(o){var s=o.overallTask;s&&s.dirty()})},a.prototype.getPerformArgs=function(n,r){if(n.__pipeline){var o=this._pipelineMap.get(n.__pipeline.id),s=o.context,l=!r&&o.progressiveEnabled&&(!s||s.progressiveRender)&&n.__idxInPipeline>o.blockIndex,c=l?o.step:null,u=s&&s.modDataCount,d=u!=null?Math.ceil(u/c):null;return{step:c,modBy:d,modDataCount:u}}},a.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},a.prototype.updateStreamModes=function(n,r){var o=this._pipelineMap.get(n.uid),s=n.getData(),l=s.count(),c=o.progressiveEnabled&&r.incrementalPrepareRender&&l>=o.threshold,u=n.get("large")&&l>=n.get("largeThreshold"),d=n.get("progressiveChunkMode")==="mod"?l:null;n.pipelineContext=o.context={progressiveRender:c,modDataCount:d,large:u}},a.prototype.restorePipelines=function(n){var r=this,o=r._pipelineMap=createHashMap();n.eachSeries(function(s){var l=s.getProgressive(),c=s.uid;o.set(c,{id:c,head:null,tail:null,threshold:s.getProgressiveThreshold(),progressiveEnabled:l&&!(s.preventIncremental&&s.preventIncremental()),blockIndex:-1,step:Math.round(l||700),count:0}),r._pipe(s,s.dataTask)})},a.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,r=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(s){var l=n.get(s.uid)||n.set(s.uid,{}),c="";assert(!(s.reset&&s.overallReset),c),s.reset&&this._createSeriesStageTask(s,l,r,o),s.overallReset&&this._createOverallStageTask(s,l,r,o)},this)},a.prototype.prepareView=function(n,r,o,s){var l=n.renderTask,c=l.context;c.model=r,c.ecModel=o,c.api=s,l.__block=!n.incrementalPrepareRender,this._pipe(r,l)},a.prototype.performDataProcessorTasks=function(n,r){this._performStageTasks(this._dataProcessorHandlers,n,r,{block:!0})},a.prototype.performVisualTasks=function(n,r,o){this._performStageTasks(this._visualHandlers,n,r,o)},a.prototype._performStageTasks=function(n,r,o,s){s=s||{};var l=!1,c=this;each$f(n,function(d,f){if(!(s.visualType&&s.visualType!==d.visualType)){var v=c._stageTaskMap.get(d.uid),g=v.seriesTaskMap,y=v.overallTask;if(y){var _,S=y.agentStubMap;S.each(function(T){u(s,T)&&(T.dirty(),_=!0)}),_&&y.dirty(),c.updatePayload(y,o);var x=c.getPerformArgs(y,s.block);S.each(function(T){T.perform(x)}),y.perform(x)&&(l=!0)}else g&&g.each(function(T,w){u(s,T)&&T.dirty();var E=c.getPerformArgs(T,s.block);E.skip=!d.performRawSeries&&r.isSeriesFiltered(T.context.model),c.updatePayload(T,o),T.perform(E)&&(l=!0)})}});function u(d,f){return d.setDirty&&(!d.dirtyMap||d.dirtyMap.get(f.__pipeline.id))}this.unfinished=l||this.unfinished},a.prototype.performSeriesTasks=function(n){var r;n.eachSeries(function(o){r=o.dataTask.perform()||r}),this.unfinished=r||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(n){var r=n.tail;do{if(r.__block){n.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},a.prototype.updatePayload=function(n,r){r!=="remain"&&(n.context.payload=r)},a.prototype._createSeriesStageTask=function(n,r,o,s){var l=this,c=r.seriesTaskMap,u=r.seriesTaskMap=createHashMap(),d=n.seriesType,f=n.getTargetSeries;n.createOnAllSeries?o.eachRawSeries(v):d?o.eachRawSeriesByType(d,v):f&&f(o,s).each(v);function v(g){var y=g.uid,_=u.set(y,c&&c.get(y)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));_.context={model:g,ecModel:o,api:s,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:l},l._pipe(g,_)}},a.prototype._createOverallStageTask=function(n,r,o,s){var l=this,c=r.overallTask=r.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:o,api:s,overallReset:n.overallReset,scheduler:l};var u=c.agentStubMap,d=c.agentStubMap=createHashMap(),f=n.seriesType,v=n.getTargetSeries,g=!0,y=!1,_="";assert(!n.createOnAllSeries,_),f?o.eachRawSeriesByType(f,S):v?v(o,s).each(S):(g=!1,each$f(o.getSeries(),S));function S(x){var T=x.uid,w=d.set(T,u&&u.get(T)||(y=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));w.context={model:x,overallProgress:g},w.agent=c,w.__block=g,l._pipe(x,w)}y&&c.dirty()},a.prototype._pipe=function(n,r){var o=n.uid,s=this._pipelineMap.get(o);!s.head&&(s.head=r),s.tail&&s.tail.pipe(r),s.tail=r,r.__idxInPipeline=s.count++,r.__pipeline=s},a.wrapStageHandler=function(n,r){return isFunction(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),r&&(n.visualType=r),n},a}();function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function seriesTaskReset(a){a.useClearVisual&&a.data.clearAllVisual();var n=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return n.length>1?map$1(n,function(r,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(n,r){var o=r.data,s=r.resetDefines[a];if(s&&s.dataEach)for(var l=n.start;l<n.end;l++)s.dataEach(o,l);else s&&s.progress&&s.progress(n,o)}}function seriesTaskCount(a){return a.data.count()}function detectSeriseType(a){seriesType=null;try{a(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(a){seriesType=a};ecModelMock.eachComponent=function(a){a.mainType==="series"&&a.subType&&(seriesType=a.subType)};function mockMethods(a,n){for(var r in n.prototype)a[r]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function a(){}return a.prototype.normalizeQuery=function(n){var r={},o={},s={};if(isString(n)){var l=parseClassType(n);r.mainType=l.main||null,r.subType=l.sub||null}else{var c=["Index","Name","Id"],u={name:1,dataIndex:1,dataType:1};each$f(n,function(d,f){for(var v=!1,g=0;g<c.length;g++){var y=c[g],_=f.lastIndexOf(y);if(_>0&&_===f.length-y.length){var S=f.slice(0,_);S!=="data"&&(r.mainType=S,r[y.toLowerCase()]=d,v=!0)}}u.hasOwnProperty(f)&&(o[f]=d,v=!0),v||(s[f]=d)})}return{cptQuery:r,dataQuery:o,otherQuery:s}},a.prototype.filter=function(n,r){var o=this.eventInfo;if(!o)return!0;var s=o.targetEl,l=o.packedEvent,c=o.model,u=o.view;if(!c||!u)return!0;var d=r.cptQuery,f=r.dataQuery;return v(d,c,"mainType")&&v(d,c,"subType")&&v(d,c,"index","componentIndex")&&v(d,c,"name")&&v(d,c,"id")&&v(f,l,"name")&&v(f,l,"dataIndex")&&v(f,l,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(n,r.otherQuery,s,l));function v(g,y,_,S){return g[_]==null||y[S||_]===g[_]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){var r=a.getData();if(a.legendIcon&&r.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var o={},s={},l=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var u=SYMBOL_PROPS_WITH_CB[c],d=a.get(u);isFunction(d)?(l=!0,s[u]=d):o[u]=d}if(o.symbol=o.symbol||a.defaultSymbol,r.setVisual(extend({legendIcon:a.legendIcon||o.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},o)),n.isSeriesFiltered(a))return;var f=keys(s);function v(g,y){for(var _=a.getRawValue(y),S=a.getDataParams(y),x=0;x<f.length;x++){var T=f[x];g.setItemVisual(y,T,s[T](_,S))}}return{dataEach:l?v:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){if(!a.hasSymbolVisual||n.isSeriesFiltered(a))return;var r=a.getData();function o(s,l){for(var c=s.getItemModel(l),u=0;u<SYMBOL_PROPS.length;u++){var d=SYMBOL_PROPS[u],f=c.getShallow(d,!0);f!=null&&s.setItemVisual(l,d,f)}}return{dataEach:r.hasItemOption?o:null}}};function getItemVisualFromData(a,n,r){switch(r){case"color":var o=a.getItemVisual(n,"style");return o[a.getVisual("drawType")];case"opacity":return a.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(n,r)}}function getVisualFromData(a,n){switch(n){case"color":var r=a.getVisual("style");return r[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(n)}}function setItemVisualFromData(a,n,r,o){switch(r){case"color":var s=a.ensureUniqueItemVisual(n,"style");s[a.getVisual("drawType")]=o,a.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(n,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(n,r,o);break}}function createLegacyDataSelectAction(a,n){function r(o,s){var l=[];return o.eachComponent({mainType:"series",subType:a,query:s},function(c){l.push(c.seriesIndex)}),l}each$f([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(o){n(o[0],function(s,l,c){s=extend({},s),c.dispatchAction(extend(s,{type:o[1],seriesIndex:r(l,s)}))})})}function handleSeriesLegacySelectEvents(a,n,r,o,s){var l=a+n;r.isSilent(l)||o.eachComponent({mainType:"series",subType:"pie"},function(c){for(var u=c.seriesIndex,d=c.option.selectedMap,f=s.selected,v=0;v<f.length;v++)if(f[v].seriesIndex===u){var g=c.getData(),y=queryDataIndex(g,s.fromActionPayload);r.trigger(l,{type:l,seriesId:c.id,name:isArray$1(y)?g.getName(y[0]):g.getName(y),selected:isString(d)?d:extend({},d)})}})}function handleLegacySelectEvents(a,n,r){a.on("selectchanged",function(o){var s=r.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,s,o),handleSeriesLegacySelectEvents("pie","selectchanged",n,s,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,s,o),handleSeriesLegacySelectEvents("pie","selected",n,s,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,s,o),handleSeriesLegacySelectEvents("pie","unselected",n,s,o))})}function findEventDispatcher(a,n,r){for(var o;a&&!(n(a)&&(o=a,r));)a=a.__hostTarget||a.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function a(){this._id="__ec_inner_"+wmUniqueIndex++}return a.prototype.get=function(n){return this._guard(n)[this._id]},a.prototype.set=function(n,r){var o=this._guard(n);return supportDefineProperty?Object.defineProperty(o,this._id,{value:r,enumerable:!1,configurable:!0}):o[this._id]=r,this},a.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},a.prototype.has=function(n){return!!this._guard(n)[this._id]},a.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},a}(),Triangle$1=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,n){var r=n.cx,o=n.cy,s=n.width/2,l=n.height/2;a.moveTo(r,o-l),a.lineTo(r+s,o+l),a.lineTo(r-s,o+l),a.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,n){var r=n.cx,o=n.cy,s=n.width/2,l=n.height/2;a.moveTo(r,o-l),a.lineTo(r+s,o),a.lineTo(r,o+l),a.lineTo(r-s,o),a.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,n){var r=n.x,o=n.y,s=n.width/5*3,l=Math.max(s,n.height),c=s/2,u=c*c/(l-c),d=o-l+c+u,f=Math.asin(u/c),v=Math.cos(f)*c,g=Math.sin(f),y=Math.cos(f),_=c*.6,S=c*.7;a.moveTo(r-v,d+u),a.arc(r,d,c,Math.PI-f,Math.PI*2+f),a.bezierCurveTo(r+v-g*_,d+u+y*_,r,o-S,r,o),a.bezierCurveTo(r,o-S,r-v+g*_,d+u+y*_,r-v,d+u),a.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,n){var r=n.height,o=n.width,s=n.x,l=n.y,c=o/3*2;a.moveTo(s,l),a.lineTo(s+c,l+r),a.lineTo(s,l+r/4*3),a.lineTo(s-c,l+r),a.lineTo(s,l),a.closePath()}}),symbolCtors={line:Line$2,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle$1},symbolShapeMakers={line:function(a,n,r,o,s){s.x1=a,s.y1=n+o/2,s.x2=a+r,s.y2=n+o/2},rect:function(a,n,r,o,s){s.x=a,s.y=n,s.width=r,s.height=o},roundRect:function(a,n,r,o,s){s.x=a,s.y=n,s.width=r,s.height=o,s.r=Math.min(r,o)/4},square:function(a,n,r,o,s){var l=Math.min(r,o);s.x=a,s.y=n,s.width=l,s.height=l},circle:function(a,n,r,o,s){s.cx=a+r/2,s.cy=n+o/2,s.r=Math.min(r,o)/2},diamond:function(a,n,r,o,s){s.cx=a+r/2,s.cy=n+o/2,s.width=r,s.height=o},pin:function(a,n,r,o,s){s.x=a+r/2,s.y=n+o/2,s.width=r,s.height=o},arrow:function(a,n,r,o,s){s.x=a+r/2,s.y=n+o/2,s.width=r,s.height=o},triangle:function(a,n,r,o,s){s.cx=a+r/2,s.cy=n+o/2,s.width=r,s.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(a,n){symbolBuildProxies[n]=new a});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,n,r){var o=calculateTextPosition(a,n,r),s=this.shape;return s&&s.symbolType==="pin"&&n.position==="inside"&&(o.y=r.y+r.height*.4),o},buildPath:function(a,n,r){var o=n.symbolType;if(o!=="none"){var s=symbolBuildProxies[o];s||(o="rect",s=symbolBuildProxies[o]),symbolShapeMakers[o](n.x,n.y,n.width,n.height,s.shape),s.buildPath(a,s.shape,r)}}});function symbolPathSetColor(a,n){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=a,r.fill=n||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=a:r.fill=a,this.markRedraw()}}function createSymbol$1(a,n,r,o,s,l,c){var u=a.indexOf("empty")===0;u&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var d;return a.indexOf("image://")===0?d=makeImage(a.slice(8),new BoundingRect(n,r,o,s),c?"center":"cover"):a.indexOf("path://")===0?d=makePath(a.slice(7),{},new BoundingRect(n,r,o,s),c?"center":"cover"):d=new SymbolClz({shape:{symbolType:a,x:n,y:r,width:o,height:s}}),d.__isEmptyBrush=u,d.setColor=symbolPathSetColor,l&&d.setColor(l),d}function normalizeSymbolSize(a){return isArray$1(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function normalizeSymbolOffset(a,n){if(a!=null)return isArray$1(a)||(a=[a,a]),[parsePercent(a[0],n[0])||0,parsePercent(retrieve2(a[1],a[0]),n[1])||0]}function isSafeNum(a){return isFinite(a)}function createLinearGradient(a,n,r){var o=n.x==null?0:n.x,s=n.x2==null?1:n.x2,l=n.y==null?0:n.y,c=n.y2==null?0:n.y2;n.global||(o=o*r.width+r.x,s=s*r.width+r.x,l=l*r.height+r.y,c=c*r.height+r.y),o=isSafeNum(o)?o:0,s=isSafeNum(s)?s:1,l=isSafeNum(l)?l:0,c=isSafeNum(c)?c:0;var u=a.createLinearGradient(o,l,s,c);return u}function createRadialGradient(a,n,r){var o=r.width,s=r.height,l=Math.min(o,s),c=n.x==null?.5:n.x,u=n.y==null?.5:n.y,d=n.r==null?.5:n.r;n.global||(c=c*o+r.x,u=u*s+r.y,d=d*l),c=isSafeNum(c)?c:.5,u=isSafeNum(u)?u:.5,d=d>=0&&isSafeNum(d)?d:.5;var f=a.createRadialGradient(c,u,0,c,u,d);return f}function getCanvasGradient(a,n,r){for(var o=n.type==="radial"?createRadialGradient(a,n,r):createLinearGradient(a,n,r),s=n.colorStops,l=0;l<s.length;l++)o.addColorStop(s[l].offset,s[l].color);return o}function isClipPathChanged(a,n){if(a===n||!a&&!n)return!1;if(!a||!n||a.length!==n.length)return!0;for(var r=0;r<a.length;r++)if(a[r]!==n[r])return!0;return!1}function parseInt10(a){return parseInt(a,10)}function getSize$1(a,n,r){var o=["width","height"][n],s=["clientWidth","clientHeight"][n],l=["paddingLeft","paddingTop"][n],c=["paddingRight","paddingBottom"][n];if(r[o]!=null&&r[o]!=="auto")return parseFloat(r[o]);var u=document.defaultView.getComputedStyle(a);return(a[s]||parseInt10(u[o])||parseInt10(a.style[o]))-(parseInt10(u[l])||0)-(parseInt10(u[c])||0)|0}function normalizeLineDash(a,n){return!a||a==="solid"||!(n>0)?null:a==="dashed"?[4*n,2*n]:a==="dotted"?[n]:isNumber(a)?[a]:isArray$1(a)?a:null}function getLineDash(a){var n=a.style,r=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),o=n.lineDashOffset;if(r){var s=n.strokeNoScale&&a.getLineScale?a.getLineScale():1;s&&s!==1&&(r=map$1(r,function(l){return l/s}),o/=s)}return[r,o]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(a){var n=a.stroke;return!(n==null||n==="none"||!(a.lineWidth>0))}function isValidStrokeFillStyle(a){return typeof a=="string"&&a!=="none"}function styleHasFill(a){var n=a.fill;return n!=null&&n!=="none"}function doFillPath(a,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var r=a.globalAlpha;a.globalAlpha=n.fillOpacity*n.opacity,a.fill(),a.globalAlpha=r}else a.fill()}function doStrokePath(a,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var r=a.globalAlpha;a.globalAlpha=n.strokeOpacity*n.opacity,a.stroke(),a.globalAlpha=r}else a.stroke()}function createCanvasPattern(a,n,r){var o=createOrUpdateImage(n.image,n.__image,r);if(isImageReady(o)){var s=a.createPattern(o,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&s&&s.setTransform){var l=new DOMMatrix;l.translateSelf(n.x||0,n.y||0),l.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),l.scaleSelf(n.scaleX||1,n.scaleY||1),s.setTransform(l)}return s}}function brushPath(a,n,r,o){var s,l=styleHasStroke(r),c=styleHasFill(r),u=r.strokePercent,d=u<1,f=!n.path;(!n.silent||d)&&f&&n.createPathProxy();var v=n.path||pathProxyForDraw,g=n.__dirty;if(!o){var y=r.fill,_=r.stroke,S=c&&!!y.colorStops,x=l&&!!_.colorStops,T=c&&!!y.image,w=l&&!!_.image,E=void 0,P=void 0,D=void 0,L=void 0,$=void 0;(S||x)&&($=n.getBoundingRect()),S&&(E=g?getCanvasGradient(a,y,$):n.__canvasFillGradient,n.__canvasFillGradient=E),x&&(P=g?getCanvasGradient(a,_,$):n.__canvasStrokeGradient,n.__canvasStrokeGradient=P),T&&(D=g||!n.__canvasFillPattern?createCanvasPattern(a,y,n):n.__canvasFillPattern,n.__canvasFillPattern=D),w&&(L=g||!n.__canvasStrokePattern?createCanvasPattern(a,_,n):n.__canvasStrokePattern,n.__canvasStrokePattern=D),S?a.fillStyle=E:T&&(D?a.fillStyle=D:c=!1),x?a.strokeStyle=P:w&&(L?a.strokeStyle=L:l=!1)}var O=n.getGlobalScale();v.setScale(O[0],O[1],n.segmentIgnoreThreshold);var B,V;a.setLineDash&&r.lineDash&&(s=getLineDash(n),B=s[0],V=s[1]);var F=!0;(f||g&SHAPE_CHANGED_BIT)&&(v.setDPR(a.dpr),d?v.setContext(null):(v.setContext(a),F=!1),v.reset(),n.buildPath(v,n.shape,o),v.toStatic(),n.pathUpdated()),F&&v.rebuildPath(a,d?u:1),B&&(a.setLineDash(B),a.lineDashOffset=V),o||(r.strokeFirst?(l&&doStrokePath(a,r),c&&doFillPath(a,r)):(c&&doFillPath(a,r),l&&doStrokePath(a,r))),B&&a.setLineDash([])}function brushImage(a,n,r){var o=n.__image=createOrUpdateImage(r.image,n.__image,n,n.onload);if(!(!o||!isImageReady(o))){var s=r.x||0,l=r.y||0,c=n.getWidth(),u=n.getHeight(),d=o.width/o.height;if(c==null&&u!=null?c=u*d:u==null&&c!=null?u=c/d:c==null&&u==null&&(c=o.width,u=o.height),r.sWidth&&r.sHeight){var f=r.sx||0,v=r.sy||0;a.drawImage(o,f,v,r.sWidth,r.sHeight,s,l,c,u)}else if(r.sx&&r.sy){var f=r.sx,v=r.sy,g=c-f,y=u-v;a.drawImage(o,f,v,g,y,s,l,c,u)}else a.drawImage(o,s,l,c,u)}}function brushText(a,n,r){var o,s=r.text;if(s!=null&&(s+=""),s){a.font=r.font||DEFAULT_FONT,a.textAlign=r.textAlign,a.textBaseline=r.textBaseline;var l=void 0,c=void 0;a.setLineDash&&r.lineDash&&(o=getLineDash(n),l=o[0],c=o[1]),l&&(a.setLineDash(l),a.lineDashOffset=c),r.strokeFirst?(styleHasStroke(r)&&a.strokeText(s,r.x,r.y),styleHasFill(r)&&a.fillText(s,r.x,r.y)):(styleHasFill(r)&&a.fillText(s,r.x,r.y),styleHasStroke(r)&&a.strokeText(s,r.x,r.y)),l&&a.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(a,n,r,o,s){var l=!1;if(!o&&(r=r||{},n===r))return!1;if(o||n.opacity!==r.opacity){flushPathDrawn(a,s),l=!0;var c=Math.max(Math.min(n.opacity,1),0);a.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(o||n.blend!==r.blend)&&(l||(flushPathDrawn(a,s),l=!0),a.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var u=0;u<SHADOW_NUMBER_PROPS.length;u++){var d=SHADOW_NUMBER_PROPS[u];(o||n[d]!==r[d])&&(l||(flushPathDrawn(a,s),l=!0),a[d]=a.dpr*(n[d]||0))}return(o||n.shadowColor!==r.shadowColor)&&(l||(flushPathDrawn(a,s),l=!0),a.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),l}function bindPathAndTextCommonStyle(a,n,r,o,s){var l=getStyle(n,s.inHover),c=o?null:r&&getStyle(r,s.inHover)||{};if(l===c)return!1;var u=bindCommonProps(a,l,c,o,s);if((o||l.fill!==c.fill)&&(u||(flushPathDrawn(a,s),u=!0),isValidStrokeFillStyle(l.fill)&&(a.fillStyle=l.fill)),(o||l.stroke!==c.stroke)&&(u||(flushPathDrawn(a,s),u=!0),isValidStrokeFillStyle(l.stroke)&&(a.strokeStyle=l.stroke)),(o||l.opacity!==c.opacity)&&(u||(flushPathDrawn(a,s),u=!0),a.globalAlpha=l.opacity==null?1:l.opacity),n.hasStroke()){var d=l.lineWidth,f=d/(l.strokeNoScale&&n.getLineScale?n.getLineScale():1);a.lineWidth!==f&&(u||(flushPathDrawn(a,s),u=!0),a.lineWidth=f)}for(var v=0;v<STROKE_PROPS.length;v++){var g=STROKE_PROPS[v],y=g[0];(o||l[y]!==c[y])&&(u||(flushPathDrawn(a,s),u=!0),a[y]=l[y]||g[1])}return u}function bindImageStyle(a,n,r,o,s){return bindCommonProps(a,getStyle(n,s.inHover),r&&getStyle(r,s.inHover),o,s)}function setContextTransform(a,n){var r=n.transform,o=a.dpr||1;r?a.setTransform(o*r[0],o*r[1],o*r[2],o*r[3],o*r[4],o*r[5]):a.setTransform(o,0,0,o,0,0)}function updateClipStatus(a,n,r){for(var o=!1,s=0;s<a.length;s++){var l=a[s];o=o||l.isZeroArea(),setContextTransform(n,l),n.beginPath(),l.buildPath(n,l.shape),n.clip()}r.allClipped=o}function isTransformChanged(a,n){return a&&n?a[0]!==n[0]||a[1]!==n[1]||a[2]!==n[2]||a[3]!==n[3]||a[4]!==n[4]||a[5]!==n[5]:!(!a&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(a){var n=styleHasFill(a),r=styleHasStroke(a);return!(a.lineDash||!(+n^+r)||n&&typeof a.fill!="string"||r&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function flushPathDrawn(a,n){n.batchFill&&a.fill(),n.batchStroke&&a.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(a,n){return n&&a.__hoverStyle||a.style}function brushSingle(a,n){brush$1(a,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(a,n,r,o){var s=n.transform;if(!n.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var l=n.__clipPaths,c=r.prevElClipPaths,u=!1,d=!1;if((!c||isClipPathChanged(l,c))&&(c&&c.length&&(flushPathDrawn(a,r),a.restore(),d=u=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),l&&l.length&&(flushPathDrawn(a,r),a.save(),updateClipStatus(l,a,r),u=!0),r.prevElClipPaths=l),r.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var f=r.prevEl;f||(d=u=!0);var v=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);u||isTransformChanged(s,f.transform)?(flushPathDrawn(a,r),setContextTransform(a,n)):v||flushPathDrawn(a,r);var g=getStyle(n,r.inHover);n instanceof Path?(r.lastDrawType!==DRAW_TYPE_PATH&&(d=!0,r.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(a,n,f,d,r),(!v||!r.batchFill&&!r.batchStroke)&&a.beginPath(),brushPath(a,n,g,v),v&&(r.batchFill=g.fill||"",r.batchStroke=g.stroke||"")):n instanceof TSpan?(r.lastDrawType!==DRAW_TYPE_TEXT&&(d=!0,r.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(a,n,f,d,r),brushText(a,n,g)):n instanceof ZRImage?(r.lastDrawType!==DRAW_TYPE_IMAGE&&(d=!0,r.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(a,n,f,d,r),brushImage(a,n,g)):n.getTemporalDisplayables&&(r.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(d=!0,r.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(a,n,r)),v&&o&&flushPathDrawn(a,r),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),r.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(a,n,r){var o=n.getDisplayables(),s=n.getTemporalDisplayables();a.save();var l={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},c,u;for(c=n.getCursor(),u=o.length;c<u;c++){var d=o[c];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(a,d,l,c===u-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),l.prevEl=d}for(var f=0,v=s.length;f<v;f++){var d=s[f];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(a,d,l,f===v-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),l.prevEl=d}n.clearTemporalDisplayables(),n.notClear=!0,a.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(a,n){if(a==="none")return null;var r=n.getDevicePixelRatio(),o=n.getZr(),s=o.painter.type==="svg";a.dirty&&decalMap.delete(a);var l=decalMap.get(a);if(l)return l;var c=defaults(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var u={repeat:"repeat"};return d(u),u.rotation=c.rotation,u.scaleX=u.scaleY=s?1:1/r,decalMap.set(a,u),a.dirty=!1,u;function d(f){for(var v=[r],g=!0,y=0;y<decalKeys.length;++y){var _=c[decalKeys[y]];if(_!=null&&!isArray$1(_)&&!isString(_)&&!isNumber(_)&&typeof _!="boolean"){g=!1;break}v.push(_)}var S;if(g){S=v.join(",")+(s?"-svg":"");var x=decalCache.get(S);x&&(s?f.svgElement=x:f.image=x)}var T=normalizeDashArrayX(c.dashArrayX),w=normalizeDashArrayY(c.dashArrayY),E=normalizeSymbolArray(c.symbol),P=getLineBlockLengthX(T),D=getLineBlockLengthY(w),L=!s&&platformApi.createCanvas(),$=s&&{tag:"g",attrs:{},key:"dcl",children:[]},O=V(),B;L&&(L.width=O.width*r,L.height=O.height*r,B=L.getContext("2d")),F(),g&&decalCache.put(S,L||$),f.image=L,f.svgElement=$,f.svgWidth=O.width,f.svgHeight=O.height;function V(){for(var U=1,G=0,W=P.length;G<W;++G)U=getLeastCommonMultiple(U,P[G]);for(var j=1,G=0,W=E.length;G<W;++G)j=getLeastCommonMultiple(j,E[G].length);U*=j;var K=D*P.length*E.length;return{width:Math.max(1,Math.min(U,c.maxTileWidth)),height:Math.max(1,Math.min(K,c.maxTileHeight))}}function F(){B&&(B.clearRect(0,0,L.width,L.height),c.backgroundColor&&(B.fillStyle=c.backgroundColor,B.fillRect(0,0,L.width,L.height)));for(var U=0,G=0;G<w.length;++G)U+=w[G];if(U<=0)return;for(var W=-D,j=0,K=0,q=0;W<O.height;){if(j%2===0){for(var ie=K/2%E.length,ee=0,he=0,pe=0;ee<O.width*2;){for(var ce=0,G=0;G<T[q].length;++G)ce+=T[q][G];if(ce<=0)break;if(he%2===0){var ye=(1-c.symbolSize)*.5,we=ee+T[q][he]*ye,ge=W+w[j]*ye,Se=T[q][he]*c.symbolSize,$e=w[j]*c.symbolSize,oe=pe/2%E[ie].length;me(we,ge,Se,$e,E[ie][oe])}ee+=T[q][he],++pe,++he,he===T[q].length&&(he=0)}++q,q===T.length&&(q=0)}W+=w[j],++K,++j,j===w.length&&(j=0)}function me(_e,Te,Le,Ge,se){var J=s?1:r,xe=createSymbol$1(se,_e*J,Te*J,Le*J,Ge*J,c.color,c.symbolKeepAspect);if(s){var De=o.painter.renderOneToVNode(xe);De&&$.children.push(De)}else brushSingle(B,xe)}}}}function normalizeSymbolArray(a){if(!a||a.length===0)return[["rect"]];if(isString(a))return[[a]];for(var n=!0,r=0;r<a.length;++r)if(!isString(a[r])){n=!1;break}if(n)return normalizeSymbolArray([a]);for(var o=[],r=0;r<a.length;++r)isString(a[r])?o.push([a[r]]):o.push(a[r]);return o}function normalizeDashArrayX(a){if(!a||a.length===0)return[[0,0]];if(isNumber(a)){var n=Math.ceil(a);return[[n,n]]}for(var r=!0,o=0;o<a.length;++o)if(!isNumber(a[o])){r=!1;break}if(r)return normalizeDashArrayX([a]);for(var s=[],o=0;o<a.length;++o)if(isNumber(a[o])){var n=Math.ceil(a[o]);s.push([n,n])}else{var n=map$1(a[o],function(u){return Math.ceil(u)});n.length%2===1?s.push(n.concat(n)):s.push(n)}return s}function normalizeDashArrayY(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(isNumber(a)){var n=Math.ceil(a);return[n,n]}var r=map$1(a,function(o){return Math.ceil(o)});return a.length%2?r.concat(r):r}function getLineBlockLengthX(a){return map$1(a,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(a){for(var n=0,r=0;r<a.length;++r)n+=a[r];return a.length%2===1?n*2:n}function decalVisual(a,n){a.eachRawSeries(function(r){if(!a.isSeriesFiltered(r)){var o=r.getData();o.hasItemVisual()&&o.each(function(c){var u=o.getItemVisual(c,"decal");if(u){var d=o.ensureUniqueItemVisual(c,"style");d.decal=createOrUpdatePatternFromDecal(u,n)}});var s=o.getVisual("decal");if(s){var l=o.getVisual("style");l.decal=createOrUpdatePatternFromDecal(s,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(a,n){implsStore[a]=n}function getImpl(a){return implsStore[a]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(a){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,a,n)}}function createRegisterEventWithLowercaseMessageCenter(a){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return toLowercaseNameAndCallEventful(this,a,n)}}function toLowercaseNameAndCallEventful(a,n,r){return r[0]=r[0]&&r[0].toLowerCase(),Eventful.prototype[n].apply(a,r)}var MessageCenter=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts$1=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this,new ECEventProcessor)||this;l._chartsViews=[],l._chartsMap={},l._componentsViews=[],l._componentsMap={},l._pendingActions=[],s=s||{},isString(o)&&(o=themeStorage[o]),l._dom=r;var c="canvas",u="auto",d=!1;s.ssr&&registerSSRDataGetter(function(y){var _=getECData(y),S=_.dataIndex;if(S!=null){var x=createHashMap();return x.set("series_index",_.seriesIndex),x.set("data_index",S),_.ssrType&&x.set("ssr_type",_.ssrType),x}});var f=l._zr=init$2(r,{renderer:s.renderer||c,devicePixelRatio:s.devicePixelRatio,width:s.width,height:s.height,ssr:s.ssr,useDirtyRect:retrieve2(s.useDirtyRect,d),useCoarsePointer:retrieve2(s.useCoarsePointer,u),pointerSize:s.pointerSize});l._ssr=s.ssr,l._throttledZrFlush=throttle(bind$1(f.flush,f),17),o=clone$4(o),o&&globalBackwardCompat(o,!0),l._theme=o,l._locale=createLocaleObject(s.locale||SYSTEM_LANG),l._coordSysMgr=new CoordinateSystemManager;var v=l._api=createExtensionAPI(l);function g(y,_){return y.__prio-_.__prio}return sort$2(visualFuncs,g),sort$2(dataProcessorFuncs,g),l._scheduler=new Scheduler(l,v,dataProcessorFuncs,visualFuncs),l._messageCenter=new MessageCenter,l._initEvents(),l.resize=bind$1(l.resize,l),f.animation.on("frame",l._onframe,l),bindRenderedEvent(f,l),bindMouseEvent(f,l),setAsPrimitive(l),l}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var r=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,d}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(r.unfinished){var s=TEST_FRAME_REMAIN_TIME,l=this._model,c=this._api;r.unfinished=!1;do{var u=+new Date;r.performSeriesTasks(l),r.performDataProcessorTasks(l),updateStreamModes(this,l),r.performVisualTasks(l),renderSeries(this,this._model,c,"remain",{}),s-=+new Date-u}while(s>0&&r.unfinished);r.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(r,o,s){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var l,c,u;if(isObject$3(o)&&(s=o.lazyUpdate,l=o.silent,c=o.replaceMerge,u=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||o){var d=new OptionManager(this._api),f=this._theme,v=this._model=new GlobalModel;v.scheduler=this._scheduler,v.ssr=this._ssr,v.init(null,null,null,f,this._locale,d)}this._model.setOption(r,{replaceMerge:c},optionPreprocessorFuncs);var g={seriesTransition:u,optionChanged:!0};if(s)this[PENDING_UPDATE]={silent:l,updateParams:g},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,g)}catch(y){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,y}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},n.prototype.setTheme=function(){},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},n.prototype.renderToCanvas=function(r){r=r||{};var o=this._zr.painter;return o.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(r){r=r||{};var o=this._zr.painter;return o.renderToString({useViewBox:r.useViewBox})},n.prototype.getSvgDataURL=function(){if(env.svgSupported){var r=this._zr,o=r.storage.getDisplayList();return each$f(o,function(s){s.stopAnimation(null,!0)}),r.painter.toDataURL()}},n.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var o=r.excludeComponents,s=this._model,l=[],c=this;each$f(o,function(d){s.eachComponent({mainType:d},function(f){var v=c._componentsMap[f.__viewId];v.group.ignore||(l.push(v),v.group.ignore=!0)})});var u=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return each$f(l,function(d){d.group.ignore=!1}),u},n.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var o=r.type==="svg",s=this.group,l=Math.min,c=Math.max,u=1/0;if(connectedGroups[s]){var d=u,f=u,v=-u,g=-u,y=[],_=r&&r.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(P,D){if(P.group===s){var L=o?P.getZr().painter.getSvgDom().innerHTML:P.renderToCanvas(clone$4(r)),$=P.getDom().getBoundingClientRect();d=l($.left,d),f=l($.top,f),v=c($.right,v),g=c($.bottom,g),y.push({dom:L,left:$.left,top:$.top})}}),d*=_,f*=_,v*=_,g*=_;var S=v-d,x=g-f,T=platformApi.createCanvas(),w=init$2(T,{renderer:o?"svg":"canvas"});if(w.resize({width:S,height:x}),o){var E="";return each$f(y,function(P){var D=P.left-d,L=P.top-f;E+='<g transform="translate('+D+","+L+')">'+P.dom+"</g>"}),w.painter.getSvgRoot().innerHTML=E,r.connectedBackgroundColor&&w.painter.setBackgroundColor(r.connectedBackgroundColor),w.refreshImmediately(),w.painter.toDataURL()}else return r.connectedBackgroundColor&&w.add(new Rect$2({shape:{x:0,y:0,width:S,height:x},style:{fill:r.connectedBackgroundColor}})),each$f(y,function(P){var D=new ZRImage({style:{x:P.left*_-d,y:P.top*_-f,image:P.dom}});w.add(D)}),w.refreshImmediately(),T.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},n.prototype.convertToPixel=function(r,o){return doConvertPixel(this,"convertToPixel",r,o)},n.prototype.convertFromPixel=function(r,o){return doConvertPixel(this,"convertFromPixel",r,o)},n.prototype.containPixel=function(r,o){if(this._disposed){this.id;return}var s=this._model,l,c=parseFinder$1(s,r);return each$f(c,function(u,d){d.indexOf("Models")>=0&&each$f(u,function(f){var v=f.coordinateSystem;if(v&&v.containPoint)l=l||!!v.containPoint(o);else if(d==="seriesModels"){var g=this._chartsMap[f.__viewId];g&&g.containPoint&&(l=l||g.containPoint(o,f))}},this)},this),!!l},n.prototype.getVisual=function(r,o){var s=this._model,l=parseFinder$1(s,r,{defaultMainType:"series"}),c=l.seriesModel,u=c.getData(),d=l.hasOwnProperty("dataIndexInside")?l.dataIndexInside:l.hasOwnProperty("dataIndex")?u.indexOfRawIndex(l.dataIndex):null;return d!=null?getItemVisualFromData(u,d,o):getVisualFromData(u,o)},n.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},n.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},n.prototype._initEvents=function(){var r=this;each$f(MOUSE_EVENT_NAMES,function(o){var s=function(l){var c=r.getModel(),u=l.target,d,f=o==="globalout";if(f?d={}:u&&findEventDispatcher(u,function(S){var x=getECData(S);if(x&&x.dataIndex!=null){var T=x.dataModel||c.getSeriesByIndex(x.seriesIndex);return d=T&&T.getDataParams(x.dataIndex,x.dataType,u)||{},!0}else if(x.eventData)return d=extend({},x.eventData),!0},!0),d){var v=d.componentType,g=d.componentIndex;(v==="markLine"||v==="markPoint"||v==="markArea")&&(v="series",g=d.seriesIndex);var y=v&&g!=null&&c.getComponent(v,g),_=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];d.event=l,d.type=o,r._$eventProcessor.eventInfo={targetEl:u,packedEvent:d,model:y,view:_},r.trigger(o,d)}};s.zrEventfulCallAtLast=!0,r._zr.on(o,s,r)}),each$f(eventActionMap,function(o,s){r._messageCenter.on(s,function(l){this.trigger(s,l)},r)}),each$f(["selectchanged"],function(o){r._messageCenter.on(o,function(s){this.trigger(o,s)},r)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,s=o._api,l=o._model;each$f(o._componentsViews,function(c){c.dispose(l,s)}),each$f(o._chartsViews,function(c){c.dispose(l,s)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},n.prototype.resize=function(r){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(r);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var s=o.resetOption("media"),l=r&&r.silent;this[PENDING_UPDATE]&&(l==null&&(l=this[PENDING_UPDATE].silent),s=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{s&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},r&&r.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}}},n.prototype.showLoading=function(r,o){if(this._disposed){this.id;return}if(isObject$3(r)&&(o=r,r=""),r=r||"default",this.hideLoading(),!!loadingEffects[r]){var s=loadingEffects[r](this._api,o),l=this._zr;this._loadingFX=s,l.add(s)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(r){var o=extend({},r);return o.type=eventActionMap[r.type],o},n.prototype.dispatchAction=function(r,o){if(this._disposed){this.id;return}if(isObject$3(o)||(o={silent:!!o}),!!actions[r.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(r);return}var s=o.silent;doDispatchAction.call(this,r,s);var l=o.flush;l?this._zr.flush():l!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(r){if(this._disposed){this.id;return}var o=r.seriesIndex,s=this.getModel(),l=s.getSeriesByIndex(o);l.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=function(){prepare=function(g){var y=g._scheduler;y.restorePipelines(g._model),y.prepareStageTasks(),prepareView(g,!0),prepareView(g,!1),y.plan()},prepareView=function(g,y){for(var _=g._model,S=g._scheduler,x=y?g._componentsViews:g._chartsViews,T=y?g._componentsMap:g._chartsMap,w=g._zr,E=g._api,P=0;P<x.length;P++)x[P].__alive=!1;y?_.eachComponent(function($,O){$!=="series"&&D(O)}):_.eachSeries(D);function D($){var O=$.__requireNewView;$.__requireNewView=!1;var B="_ec_"+$.id+"_"+$.type,V=!O&&T[B];if(!V){var F=parseClassType($.type),U=y?ComponentView.getClass(F.main,F.sub):ChartView.getClass(F.sub);V=new U,V.init(_,E),T[B]=V,x.push(V),w.add(V.group)}$.__viewId=V.__id=B,V.__alive=!0,V.__model=$,V.group.__ecComponentInfo={mainType:$.mainType,index:$.componentIndex},!y&&S.prepareView(V,$,_,E)}for(var P=0;P<x.length;){var L=x[P];L.__alive?P++:(!y&&L.renderTask.dispose(),w.remove(L.group),L.dispose(_,E),x.splice(P,1),T[L.__id]===L&&delete T[L.__id],L.__id=L.group.__ecComponentInfo=null)}},updateDirectly=function(g,y,_,S,x){var T=g._model;if(T.setUpdatePayload(_),!S){each$f([].concat(g._componentsViews).concat(g._chartsViews),L);return}var w={};w[S+"Id"]=_[S+"Id"],w[S+"Index"]=_[S+"Index"],w[S+"Name"]=_[S+"Name"];var E={mainType:S,query:w};x&&(E.subType=x);var P=_.excludeSeriesId,D;P!=null&&(D=createHashMap(),each$f(normalizeToArray(P),function($){var O=convertOptionIdName($,null);O!=null&&D.set(O,!0)})),T&&T.eachComponent(E,function($){var O=D&&D.get($.id)!=null;if(!O)if(isHighDownPayload(_))if($ instanceof SeriesModel)_.type===HIGHLIGHT_ACTION_TYPE&&!_.notBlur&&!$.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload($,_,g._api);else{var B=findComponentHighDownDispatchers($.mainType,$.componentIndex,_.name,g._api),V=B.focusSelf,F=B.dispatchers;_.type===HIGHLIGHT_ACTION_TYPE&&V&&!_.notBlur&&blurComponent($.mainType,$.componentIndex,g._api),F&&each$f(F,function(U){_.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(U):leaveEmphasis(U)})}else isSelectChangePayload(_)&&$ instanceof SeriesModel&&(toggleSelectionFromPayload($,_,g._api),updateSeriesElementSelection($),markStatusToUpdate(g))},g),T&&T.eachComponent(E,function($){var O=D&&D.get($.id)!=null;O||L(g[S==="series"?"_chartsMap":"_componentsMap"][$.__viewId])},g);function L($){$&&$.__alive&&$[y]&&$[y]($.__model,T,g._api,_)}},updateMethods={prepareAndUpdate:function(g){prepare(this),updateMethods.update.call(this,g,{optionChanged:g.newOption!=null})},update:function(g,y){var _=this._model,S=this._api,x=this._zr,T=this._coordSysMgr,w=this._scheduler;if(_){_.setUpdatePayload(g),w.restoreData(_,g),w.performSeriesTasks(_),T.create(_,S),w.performDataProcessorTasks(_,g),updateStreamModes(this,_),T.update(_,S),r(_),w.performVisualTasks(_,g),render(this,_,S,g,y);var E=_.get("backgroundColor")||"transparent",P=_.get("darkMode");x.setBackgroundColor(E),P!=null&&P!=="auto"&&x.setDarkMode(P),lifecycle.trigger("afterupdate",_,S)}},updateTransform:function(g){var y=this,_=this._model,S=this._api;if(_){_.setUpdatePayload(g);var x=[];_.eachComponent(function(w,E){if(w!=="series"){var P=y.getViewOfComponentModel(E);if(P&&P.__alive)if(P.updateTransform){var D=P.updateTransform(E,_,S,g);D&&D.update&&x.push(P)}else x.push(P)}});var T=createHashMap();_.eachSeries(function(w){var E=y._chartsMap[w.__viewId];if(E.updateTransform){var P=E.updateTransform(w,_,S,g);P&&P.update&&T.set(w.uid,1)}else T.set(w.uid,1)}),r(_),this._scheduler.performVisualTasks(_,g,{setDirty:!0,dirtyMap:T}),renderSeries(this,_,S,g,{},T),lifecycle.trigger("afterupdate",_,S)}},updateView:function(g){var y=this._model;y&&(y.setUpdatePayload(g),ChartView.markUpdateMethod(g,"updateView"),r(y),this._scheduler.performVisualTasks(y,g,{setDirty:!0}),render(this,y,this._api,g,{}),lifecycle.trigger("afterupdate",y,this._api))},updateVisual:function(g){var y=this,_=this._model;_&&(_.setUpdatePayload(g),_.eachSeries(function(S){S.getData().clearAllVisual()}),ChartView.markUpdateMethod(g,"updateVisual"),r(_),this._scheduler.performVisualTasks(_,g,{visualType:"visual",setDirty:!0}),_.eachComponent(function(S,x){if(S!=="series"){var T=y.getViewOfComponentModel(x);T&&T.__alive&&T.updateVisual(x,_,y._api,g)}}),_.eachSeries(function(S){var x=y._chartsMap[S.__viewId];x.updateVisual(S,_,y._api,g)}),lifecycle.trigger("afterupdate",_,this._api))},updateLayout:function(g){updateMethods.update.call(this,g)}},doConvertPixel=function(g,y,_,S){if(g._disposed){g.id;return}for(var x=g._model,T=g._coordSysMgr.getCoordinateSystems(),w,E=parseFinder$1(x,_),P=0;P<T.length;P++){var D=T[P];if(D[y]&&(w=D[y](x,E,S))!=null)return w}},updateStreamModes=function(g,y){var _=g._chartsMap,S=g._scheduler;y.eachSeries(function(x){S.updateStreamModes(x,_[x.__viewId])})},doDispatchAction=function(g,y){var _=this,S=this.getModel(),x=g.type,T=g.escapeConnect,w=actions[x],E=w.actionInfo,P=(E.update||"update").split(":"),D=P.pop(),L=P[0]!=null&&parseClassType(P[0]);this[IN_MAIN_PROCESS_KEY]=!0;var $=[g],O=!1;g.batch&&(O=!0,$=map$1(g.batch,function(j){return j=defaults(extend({},j),g),j.batch=null,j}));var B=[],V,F=isSelectChangePayload(g),U=isHighDownPayload(g);if(U&&allLeaveBlur(this._api),each$f($,function(j){if(V=w.action(j,_._model,_._api),V=V||extend({},j),V.type=E.event||V.type,B.push(V),U){var K=preParseFinder(g),q=K.queryOptionMap,ie=K.mainTypeSpecified,ee=ie?q.keys()[0]:"series";updateDirectly(_,D,j,ee),markStatusToUpdate(_)}else F?(updateDirectly(_,D,j,"series"),markStatusToUpdate(_)):L&&updateDirectly(_,D,j,L.main,L.sub)}),D!=="none"&&!U&&!F&&!L)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,g),this[PENDING_UPDATE]=null):updateMethods[D].call(this,g)}catch(j){throw this[IN_MAIN_PROCESS_KEY]=!1,j}if(O?V={type:E.event||x,escapeConnect:T,batch:B}:V=B[0],this[IN_MAIN_PROCESS_KEY]=!1,!y){var G=this._messageCenter;if(G.trigger(V.type,V),F){var W={type:"selectchanged",escapeConnect:T,selected:getAllSelectedIndices(S),isFromClick:g.isFromClick||!1,fromAction:g.type,fromActionPayload:g};G.trigger(W.type,W)}}},flushPendingActions=function(g){for(var y=this._pendingActions;y.length;){var _=y.shift();doDispatchAction.call(this,_,g)}},triggerUpdatedEvent=function(g){!g&&this.trigger("updated")},bindRenderedEvent=function(g,y){g.on("rendered",function(_){y.trigger("rendered",_),g.animation.isFinished()&&!y[PENDING_UPDATE]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},bindMouseEvent=function(g,y){g.on("mouseover",function(_){var S=_.target,x=findEventDispatcher(S,isHighDownDispatcher);x&&(handleGlobalMouseOverForHighDown(x,_,y._api),markStatusToUpdate(y))}).on("mouseout",function(_){var S=_.target,x=findEventDispatcher(S,isHighDownDispatcher);x&&(handleGlobalMouseOutForHighDown(x,_,y._api),markStatusToUpdate(y))}).on("click",function(_){var S=_.target,x=findEventDispatcher(S,function(E){return getECData(E).dataIndex!=null},!0);if(x){var T=x.selected?"unselect":"select",w=getECData(x);y._api.dispatchAction({type:T,dataType:w.dataType,dataIndexInside:w.dataIndex,seriesIndex:w.seriesIndex,isFromClick:!0})}})};function r(g){g.clearColorPalette(),g.eachSeries(function(y){y.clearColorPalette()})}function o(g){var y=[],_=[],S=!1;if(g.eachComponent(function(E,P){var D=P.get("zlevel")||0,L=P.get("z")||0,$=P.getZLevelKey();S=S||!!$,(E==="series"?_:y).push({zlevel:D,z:L,idx:P.componentIndex,type:E,key:$})}),S){var x=y.concat(_),T,w;sort$2(x,function(E,P){return E.zlevel===P.zlevel?E.z-P.z:E.zlevel-P.zlevel}),each$f(x,function(E){var P=g.getComponent(E.type,E.idx),D=E.zlevel,L=E.key;T!=null&&(D=Math.max(T,D)),L?(D===T&&L!==w&&D++,w=L):w&&(D===T&&D++,w=""),T=D,P.setZLevel(D)})}}render=function(g,y,_,S,x){o(y),renderComponents(g,y,_,S,x),each$f(g._chartsViews,function(T){T.__alive=!1}),renderSeries(g,y,_,S,x),each$f(g._chartsViews,function(T){T.__alive||T.remove(y,_)})},renderComponents=function(g,y,_,S,x,T){each$f(T||g._componentsViews,function(w){var E=w.__model;f(E,w),w.render(E,y,_,S),u(E,w),v(E,w)})},renderSeries=function(g,y,_,S,x,T){var w=g._scheduler;x=extend(x||{},{updatedSeries:y.getSeries()}),lifecycle.trigger("series:beforeupdate",y,_,x);var E=!1;y.eachSeries(function(P){var D=g._chartsMap[P.__viewId];D.__alive=!0;var L=D.renderTask;w.updatePayload(L,S),f(P,D),T&&T.get(P.uid)&&L.dirty(),L.perform(w.getPerformArgs(L))&&(E=!0),D.group.silent=!!P.get("silent"),c(P,D),updateSeriesElementSelection(P)}),w.unfinished=E||w.unfinished,lifecycle.trigger("series:layoutlabels",y,_,x),lifecycle.trigger("series:transition",y,_,x),y.eachSeries(function(P){var D=g._chartsMap[P.__viewId];u(P,D),v(P,D)}),l(g,y),lifecycle.trigger("series:afterupdate",y,_,x)},markStatusToUpdate=function(g){g[STATUS_NEEDS_UPDATE_KEY]=!0,g.getZr().wakeUp()},applyChangedStates=function(g){g[STATUS_NEEDS_UPDATE_KEY]&&(g.getZr().storage.traverse(function(y){isElementRemoved(y)||s(y)}),g[STATUS_NEEDS_UPDATE_KEY]=!1)};function s(g){for(var y=[],_=g.currentStates,S=0;S<_.length;S++){var x=_[S];x==="emphasis"||x==="blur"||x==="select"||y.push(x)}g.selected&&g.states.select&&y.push("select"),g.hoverState===HOVER_STATE_EMPHASIS&&g.states.emphasis?y.push("emphasis"):g.hoverState===HOVER_STATE_BLUR&&g.states.blur&&y.push("blur"),g.useStates(y)}function l(g,y){var _=g._zr,S=_.storage,x=0;S.traverse(function(T){T.isGroup||x++}),x>y.get("hoverLayerThreshold")&&!env.node&&!env.worker&&y.eachSeries(function(T){if(!T.preventUsingHoverLayer){var w=g._chartsMap[T.__viewId];w.__alive&&w.eachRendered(function(E){E.states.emphasis&&(E.states.emphasis.hoverLayer=!0)})}})}function c(g,y){var _=g.get("blendMode")||null;y.eachRendered(function(S){S.isGroup||(S.style.blend=_)})}function u(g,y){if(!g.preventAutoZ){var _=g.get("z")||0,S=g.get("zlevel")||0;y.eachRendered(function(x){return d(x,_,S,-1/0),!0})}}function d(g,y,_,S){var x=g.getTextContent(),T=g.getTextGuideLine(),w=g.isGroup;if(w)for(var E=g.childrenRef(),P=0;P<E.length;P++)S=Math.max(d(E[P],y,_,S),S);else g.z=y,g.zlevel=_,S=Math.max(g.z2,S);if(x&&(x.z=y,x.zlevel=_,isFinite(S)&&(x.z2=S+2)),T){var D=g.textGuideLineConfig;T.z=y,T.zlevel=_,isFinite(S)&&(T.z2=S+(D&&D.showAbove?1:-1))}return S}function f(g,y){y.eachRendered(function(_){if(!isElementRemoved(_)){var S=_.getTextContent(),x=_.getTextGuideLine();_.stateTransition&&(_.stateTransition=null),S&&S.stateTransition&&(S.stateTransition=null),x&&x.stateTransition&&(x.stateTransition=null),_.hasState()?(_.prevStates=_.currentStates,_.clearStates()):_.prevStates&&(_.prevStates=null)}})}function v(g,y){var _=g.getModel("stateAnimation"),S=g.isAnimationEnabled(),x=_.get("duration"),T=x>0?{duration:x,delay:_.get("delay"),easing:_.get("easing")}:null;y.eachRendered(function(w){if(w.states&&w.states.emphasis){if(isElementRemoved(w))return;if(w instanceof Path&&savePathStates(w),w.__dirty){var E=w.prevStates;E&&w.useStates(E)}if(S){w.stateTransition=T;var P=w.getTextContent(),D=w.getTextGuideLine();P&&(P.stateTransition=T),D&&(D.stateTransition=T)}w.__dirty&&s(w)}})}createExtensionAPI=function(g){return new(function(y){__extends(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},_.prototype.getComponentByElement=function(S){for(;S;){var x=S.__ecComponentInfo;if(x!=null)return g._model.getComponent(x.mainType,x.index);S=S.parent}},_.prototype.enterEmphasis=function(S,x){enterEmphasis(S,x),markStatusToUpdate(g)},_.prototype.leaveEmphasis=function(S,x){leaveEmphasis(S,x),markStatusToUpdate(g)},_.prototype.enterBlur=function(S){enterBlur(S),markStatusToUpdate(g)},_.prototype.leaveBlur=function(S){leaveBlur(S),markStatusToUpdate(g)},_.prototype.enterSelect=function(S){enterSelect(S),markStatusToUpdate(g)},_.prototype.leaveSelect=function(S){leaveSelect(S),markStatusToUpdate(g)},_.prototype.getModel=function(){return g.getModel()},_.prototype.getViewOfComponentModel=function(S){return g.getViewOfComponentModel(S)},_.prototype.getViewOfSeriesModel=function(S){return g.getViewOfSeriesModel(S)},_}(ExtensionAPI))(g)},enableConnect=function(g){function y(_,S){for(var x=0;x<_.length;x++){var T=_[x];T[CONNECT_STATUS_KEY]=S}}each$f(eventActionMap,function(_,S){g._messageCenter.on(S,function(x){if(connectedGroups[g.group]&&g[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(x&&x.escapeConnect)return;var T=g.makeActionFromEvent(x),w=[];each$f(instances,function(E){E!==g&&E.group===g.group&&w.push(E)}),y(w,CONNECT_STATUS_PENDING),each$f(w,function(E){E[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&E.dispatchAction(T)}),y(w,CONNECT_STATUS_UPDATED)}})})}}(),n}(Eventful),echartsProto=ECharts$1.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(a,n,r){var o=this;function s(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];n&&n.apply&&n.apply(this,l),o.off(a,s)}this.on.call(this,a,s,r)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(a){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(a,n,r){var o=!(r&&r.ssr);if(o){var s=getInstanceByDom(a);if(s)return s}var l=new ECharts$1(a,n,r);return l.id="ec_"+idBase++,instances[l.id]=l,o&&setAttribute(a,DOM_ATTRIBUTE_KEY,l.id),enableConnect(l),lifecycle.trigger("afterinit",l),l}function getInstanceByDom(a){return instances[getAttribute(a,DOM_ATTRIBUTE_KEY)]}function registerTheme(a,n){themeStorage[a]=n}function registerPreprocessor(a){indexOf(optionPreprocessorFuncs,a)<0&&optionPreprocessorFuncs.push(a)}function registerProcessor(a,n){normalizeRegister(dataProcessorFuncs,a,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(a){registerUpdateLifecycle("afterinit",a)}function registerPostUpdate(a){registerUpdateLifecycle("afterupdate",a)}function registerUpdateLifecycle(a,n){lifecycle.on(a,n)}function registerAction(a,n,r){isFunction(n)&&(r=n,n="");var o=isObject$3(a)?a.type:[a,a={event:n}][0];a.event=(a.event||o).toLowerCase(),n=a.event,!eventActionMap[n]&&(assert(ACTION_REG.test(o)&&ACTION_REG.test(n)),actions[o]||(actions[o]={action:r,actionInfo:a}),eventActionMap[n]=o)}function registerCoordinateSystem(a,n){CoordinateSystemManager.register(a,n)}function registerLayout(a,n){normalizeRegister(visualFuncs,a,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(a,n){normalizeRegister(visualFuncs,a,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(a,n,r,o,s){if((isFunction(n)||isObject$3(n))&&(r=n,n=o),!(indexOf(registeredTasks,r)>=0)){registeredTasks.push(r);var l=Scheduler.wrapStageHandler(r,s);l.__prio=n,l.__raw=r,a.push(l)}}function registerLoading(a,n){loadingEffects[a]=n}function registerMap$1(a,n,r){var o=getImpl("registerMap");o&&o(a,n,r)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(a){ComponentModel.registerClass(a)},registerComponentView:function(a){ComponentView.registerClass(a)},registerSeriesModel:function(a){SeriesModel.registerClass(a)},registerChartView:function(a){ChartView.registerClass(a)},registerSubTypeDefaulter:function(a,n){ComponentModel.registerSubTypeDefaulter(a,n)},registerPainter:function(a,n){registerPainter(a,n)}};function use(a){if(isArray$1(a)){each$f(a,function(n){use(n)});return}indexOf(extensions,a)>=0||(extensions.push(a),isFunction(a)&&(a={install:a}),a.install(extensionRegisters))}function dataIndexMapValueLength(a){return a==null?0:a.length||1}function defaultKeyGetter(a){return a}var DataDiffer=function(){function a(n,r,o,s,l,c){this._old=n,this._new=r,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=s||defaultKeyGetter,this.context=l,this._diffModeMultiple=c==="multiple"}return a.prototype.add=function(n){return this._add=n,this},a.prototype.update=function(n){return this._update=n,this},a.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},a.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},a.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},a.prototype.remove=function(n){return this._remove=n,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var n=this._old,r=this._new,o={},s=new Array(n.length),l=new Array(r.length);this._initIndexMap(n,null,s,"_oldKeyGetter"),this._initIndexMap(r,o,l,"_newKeyGetter");for(var c=0;c<n.length;c++){var u=s[c],d=o[u],f=dataIndexMapValueLength(d);if(f>1){var v=d.shift();d.length===1&&(o[u]=d[0]),this._update&&this._update(v,c)}else f===1?(o[u]=null,this._update&&this._update(d,c)):this._remove&&this._remove(c)}this._performRestAdd(l,o)},a.prototype._executeMultiple=function(){var n=this._old,r=this._new,o={},s={},l=[],c=[];this._initIndexMap(n,o,l,"_oldKeyGetter"),this._initIndexMap(r,s,c,"_newKeyGetter");for(var u=0;u<l.length;u++){var d=l[u],f=o[d],v=s[d],g=dataIndexMapValueLength(f),y=dataIndexMapValueLength(v);if(g>1&&y===1)this._updateManyToOne&&this._updateManyToOne(v,f),s[d]=null;else if(g===1&&y>1)this._updateOneToMany&&this._updateOneToMany(v,f),s[d]=null;else if(g===1&&y===1)this._update&&this._update(v,f),s[d]=null;else if(g>1&&y>1)this._updateManyToMany&&this._updateManyToMany(v,f),s[d]=null;else if(g>1)for(var _=0;_<g;_++)this._remove&&this._remove(f[_]);else this._remove&&this._remove(f)}this._performRestAdd(c,s)},a.prototype._performRestAdd=function(n,r){for(var o=0;o<n.length;o++){var s=n[o],l=r[s],c=dataIndexMapValueLength(l);if(c>1)for(var u=0;u<c;u++)this._add&&this._add(l[u]);else c===1&&this._add&&this._add(l);r[s]=null}},a.prototype._initIndexMap=function(n,r,o,s){for(var l=this._diffModeMultiple,c=0;c<n.length;c++){var u="_ec_"+this[s](n[c],c);if(l||(o[c]=u),!!r){var d=r[u],f=dataIndexMapValueLength(d);f===0?(r[u]=c,l&&o.push(u)):f===1?r[u]=[d,c]:d.push(c)}}},a}(),DimensionUserOuput=function(){function a(n,r){this._encode=n,this._schema=r}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function summarizeDimensions(a,n){var r={},o=r.encode={},s=createHashMap(),l=[],c=[],u={};each$f(a.dimensions,function(y){var _=a.getDimensionInfo(y),S=_.coordDim;if(S){var x=_.coordDimIndex;getOrCreateEncodeArr(o,S)[x]=y,_.isExtraCoord||(s.set(S,1),mayLabelDimType(_.type)&&(l[0]=y),getOrCreateEncodeArr(u,S)[x]=a.getDimensionIndex(_.name)),_.defaultTooltip&&c.push(y)}VISUAL_DIMENSIONS.each(function(T,w){var E=getOrCreateEncodeArr(o,w),P=_.otherDims[w];P!=null&&P!==!1&&(E[P]=_.name)})});var d=[],f={};s.each(function(y,_){var S=o[_];f[_]=S[0],d=d.concat(S)}),r.dataDimsOnCoord=d,r.dataDimIndicesOnCoord=map$1(d,function(y){return a.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=f;var v=o.label;v&&v.length&&(l=v.slice());var g=o.tooltip;return g&&g.length?c=g.slice():c.length||(c=l.slice()),o.defaultedLabel=l,o.defaultedTooltip=c,r.userOutput=new DimensionUserOuput(u,n),r}function getOrCreateEncodeArr(a,n){return a.hasOwnProperty(n)||(a[n]=[]),a[n]}function getDimensionTypeByAxis(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function mayLabelDimType(a){return!(a==="ordinal"||a==="time")}var SeriesDimensionDefine=function(){function a(n){this.otherDims={},n!=null&&extend(this,n)}return a}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function a(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},a.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},a.prototype.getSourceDimension=function(n){var r=this.source.dimensionsDefine;if(r)return r[n]},a.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,r=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(n),s="",l=[],c=0,u=0;c<n;c++){var d=void 0,f=void 0,v=void 0,g=this.dimensions[u];if(g&&g.storeDimIndex===c)d=r?g.name:null,f=g.type,v=g.ordinalMeta,u++;else{var y=this.getSourceDimension(c);y&&(d=r?y.name:null,f=y.type)}l.push({property:d,type:f,ordinalMeta:v}),r&&d!=null&&(!g||!g.isCalculationCoord)&&(s+=o?d.replace(/\`/g,"`1").replace(/\$/g,"`2"):d),s+="$",s+=dimTypeShort[f]||"f",v&&(s+=v.uid),s+="$"}var _=this.source,S=[_.seriesLayoutBy,_.startIndex,s].join("$$");return{dimensions:l,hash:S}},a.prototype.makeOutputDimensionNames=function(){for(var n=[],r=0,o=0;r<this._fullDimCount;r++){var s=void 0,l=this.dimensions[o];if(l&&l.storeDimIndex===r)l.isCalculationCoord||(s=l.name),o++;else{var c=this.getSourceDimension(r);c&&(s=c.name)}n.push(s)}return n},a.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function isSeriesDataSchema(a){return a instanceof SeriesDataSchema}function createDimNameMap(a){for(var n=createHashMap(),r=0;r<(a||[]).length;r++){var o=a[r],s=isObject$3(o)?o.name:o;s!=null&&n.get(s)==null&&n.set(s,r)}return n}function ensureSourceDimNameMap(a){var n=inner$h(a);return n.dimNameMap||(n.dimNameMap=createDimNameMap(a.dimensionsDefine))}function shouldOmitUnusedDimensions(a){return a>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function a(n,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var o,s=!1;isSeriesDataSchema(n)?(o=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(s=!0,o=n),o=o||["x","y"];for(var l={},c=[],u={},d=!1,f={},v=0;v<o.length;v++){var g=o[v],y=isString(g)?new SeriesDimensionDefine({name:g}):g instanceof SeriesDimensionDefine?g:new SeriesDimensionDefine(g),_=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=_,y.coordDimIndex=0);var S=y.otherDims=y.otherDims||{};c.push(_),l[_]=y,f[_]!=null&&(d=!0),y.createInvertedIndices&&(u[_]=[]),S.itemName===0&&(this._nameDimIdx=v),S.itemId===0&&(this._idDimIdx=v),s&&(y.storeDimIndex=v)}if(this.dimensions=c,this._dimInfos=l,this._initGetDimensionInfo(d),this.hostModel=r,this._invertedIndicesMap=u,this._dimOmitted){var x=this._dimIdxToName=createHashMap();each$f(c,function(T){x.set(l[T].storeDimIndex,T)})}}return a.prototype.getDimension=function(n){var r=this._recognizeDimIndex(n);if(r==null)return n;if(r=n,!this._dimOmitted)return this.dimensions[r];var o=this._dimIdxToName.get(r);if(o!=null)return o;var s=this._schema.getSourceDimension(r);if(s)return s.name},a.prototype.getDimensionIndex=function(n){var r=this._recognizeDimIndex(n);if(r!=null)return r;if(n==null)return-1;var o=this._getDimInfo(n);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},a.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},a.prototype._getStoreDimIndex=function(n){var r=this.getDimensionIndex(n);return r},a.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},a.prototype._initGetDimensionInfo=function(n){var r=this._dimInfos;this._getDimInfo=n?function(o){return r.hasOwnProperty(o)?r[o]:void 0}:function(o){return r[o]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(n,r){var o=this._dimSummary;if(r==null)return o.encodeFirstDimNotExtra[n];var s=o.encode[n];return s?s[r]:null},a.prototype.mapDimensionsAll=function(n){var r=this._dimSummary,o=r.encode[n];return(o||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(n,r,o){var s=this,l;if(n instanceof DataStore&&(l=n),!l){var c=this.dimensions,u=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,c.length):n;l=new DataStore;var d=map(c,function(f){return{type:s._dimInfos[f].type,property:f}});l.initData(u,d,o)}this._store=l,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,l.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(n){var r=this._store.appendData(n);this._doInit(r[0],r[1])},a.prototype.appendValues=function(n,r){var o=this._store.appendValues(n,r&&r.length),s=o.start,l=o.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var u=s;u<l;u++){var d=u-s;this._nameList[u]=r[d],c&&makeIdFromName(this,u)}},a.prototype._updateOrdinalMeta=function(){for(var n=this._store,r=this.dimensions,o=0;o<r.length;o++){var s=this._dimInfos[r[o]];s.ordinalMeta&&n.collectOrdinalMeta(s.storeDimIndex,s.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},a.prototype._doInit=function(n,r){if(!(n>=r)){var o=this._store,s=o.getProvider();this._updateOrdinalMeta();var l=this._nameList,c=this._idList,u=s.getSource().sourceFormat,d=u===SOURCE_FORMAT_ORIGINAL;if(d&&!s.pure)for(var f=[],v=n;v<r;v++){var g=s.getItem(v,f);if(!this.hasItemOption&&isDataItemOption(g)&&(this.hasItemOption=!0),g){var y=g.name;l[v]==null&&y!=null&&(l[v]=convertOptionIdName(y,null));var _=g.id;c[v]==null&&_!=null&&(c[v]=convertOptionIdName(_,null))}}if(this._shouldMakeIdFromName())for(var v=n;v<r;v++)makeIdFromName(this,v);prepareInvertedIndex(this)}},a.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},a.prototype.setApproximateExtent=function(n,r){r=this.getDimension(r),this._approximateExtent[r]=n.slice()},a.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},a.prototype.setCalculationInfo=function(n,r){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=r},a.prototype.getName=function(n){var r=this.getRawIndex(n),o=this._nameList[r];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,r)),o==null&&(o=""),o},a.prototype._getCategory=function(n,r){var o=this._store.get(n,r),s=this._store.getOrdinalMeta(n);return s?s.categories[o]:o},a.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(n,r){var o=this._store,s=this._dimInfos[n];if(s)return o.get(s.storeDimIndex,r)},a.prototype.getByRawIndex=function(n,r){var o=this._store,s=this._dimInfos[n];if(s)return o.getByRawIndex(s.storeDimIndex,r)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},a.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},a.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},a.prototype.getValues=function(n,r){var o=this,s=this._store;return isArray$1(n)?s.getValues(map(n,function(l){return o._getStoreDimIndex(l)}),r):s.getValues(n)},a.prototype.hasValue=function(n){for(var r=this._dimSummary.dataDimIndicesOnCoord,o=0,s=r.length;o<s;o++)if(isNaN(this._store.get(r[o],n)))return!1;return!0},a.prototype.indexOfName=function(n){for(var r=0,o=this._store.count();r<o;r++)if(this.getName(r)===n)return r;return-1},a.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},a.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},a.prototype.rawIndexOf=function(n,r){var o=n&&this._invertedIndicesMap[n],s=o&&o[r];return s==null||isNaN(s)?INDEX_NOT_FOUND:s},a.prototype.indicesOfNearest=function(n,r,o){return this._store.indicesOfNearest(this._getStoreDimIndex(n),r,o)},a.prototype.each=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]);var s=o||this,l=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(l,s?bind$1(r,s):r)},a.prototype.filterSelf=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]);var s=o||this,l=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(l,s?bind$1(r,s):r),this},a.prototype.selectRange=function(n){var r=this,o={},s=keys(n);return each$f(s,function(l){var c=r._getStoreDimIndex(l);o[c]=n[l]}),this._store=this._store.selectRange(o),this},a.prototype.mapArray=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]),o=o||this;var s=[];return this.each(n,function(){s.push(r&&r.apply(this,arguments))},o),s},a.prototype.map=function(n,r,o,s){var l=o||s||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this),u=cloneListForMapAndSample(this);return u._store=this._store.map(c,l?bind$1(r,l):r),u},a.prototype.modify=function(n,r,o,s){var l=o||s||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(c,l?bind$1(r,l):r)},a.prototype.downSample=function(n,r,o,s){var l=cloneListForMapAndSample(this);return l._store=this._store.downSample(this._getStoreDimIndex(n),r,o,s),l},a.prototype.minmaxDownSample=function(n,r){var o=cloneListForMapAndSample(this);return o._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),r),o},a.prototype.lttbDownSample=function(n,r){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(n),r),o},a.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},a.prototype.getItemModel=function(n){var r=this.hostModel,o=this.getRawDataItem(n);return new Model(o,r,r&&r.ecModel)},a.prototype.diff=function(n){var r=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(n,o)},function(o){return getId(r,o)})},a.prototype.getVisual=function(n){var r=this._visual;return r&&r[n]},a.prototype.setVisual=function(n,r){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=r},a.prototype.getItemVisual=function(n,r){var o=this._itemVisuals[n],s=o&&o[r];return s??this.getVisual(r)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(n,r){var o=this._itemVisuals,s=o[n];s||(s=o[n]={});var l=s[r];return l==null&&(l=this.getVisual(r),isArray$1(l)?l=l.slice():isObject$1(l)&&(l=extend({},l)),s[r]=l),l},a.prototype.setItemVisual=function(n,r,o){var s=this._itemVisuals[n]||{};this._itemVisuals[n]=s,isObject$1(r)?extend(s,r):s[r]=o},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(n,r){isObject$1(n)?extend(this._layout,n):this._layout[n]=r},a.prototype.getLayout=function(n){return this._layout[n]},a.prototype.getItemLayout=function(n){return this._itemLayouts[n]},a.prototype.setItemLayout=function(n,r,o){this._itemLayouts[n]=o?extend(this._itemLayouts[n]||{},r):r},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(n,r){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,n,r),this._graphicEls[n]=r},a.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},a.prototype.eachItemGraphicEl=function(n,r){each$f(this._graphicEls,function(o,s){o&&n&&n.call(r,o,s)})},a.prototype.cloneShallow=function(n){return n||(n=new a(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},a.prototype.wrapMethod=function(n,r){var o=this[n];isFunction(o)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var s=o.apply(this,arguments);return r.apply(this,[s].concat(slice(arguments)))})},a.internalField=function(){prepareInvertedIndex=function(n){var r=n._invertedIndicesMap;each$f(r,function(o,s){var l=n._dimInfos[s],c=l.ordinalMeta,u=n._store;if(c){o=r[s]=new CtorInt32Array(c.categories.length);for(var d=0;d<o.length;d++)o[d]=INDEX_NOT_FOUND;for(var d=0;d<u.count();d++)o[u.get(l.storeDimIndex,d)]=d}})},getIdNameFromStore=function(n,r,o){return convertOptionIdName(n._getCategory(r,o),null)},getId=function(n,r){var o=n._idList[r];return o==null&&n._idDimIdx!=null&&(o=getIdNameFromStore(n,n._idDimIdx,r)),o==null&&(o=ID_PREFIX+r),o},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var r=new a(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(r,n),r},transferProperties=function(n,r){each$f(TRANSFERABLE_PROPERTIES.concat(r.__wrappedMethods||[]),function(o){r.hasOwnProperty(o)&&(n[o]=r[o])}),n.__wrappedMethods=r.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){n[o]=clone$4(r[o])}),n._calculationInfo=extend({},r._calculationInfo)},makeIdFromName=function(n,r){var o=n._nameList,s=n._idList,l=n._nameDimIdx,c=n._idDimIdx,u=o[r],d=s[r];if(u==null&&l!=null&&(o[r]=u=getIdNameFromStore(n,l,r)),d==null&&c!=null&&(s[r]=d=getIdNameFromStore(n,c,r)),d==null&&u!=null){var f=n._nameRepeatCount,v=f[u]=(f[u]||0)+1;d=u,v>1&&(d+="__ec__"+v),s[r]=d}}}(),a}();function prepareSeriesDataSchema(a,n){isSourceInstance(a)||(a=createSourceFromSeriesDataOption(a)),n=n||{};var r=n.coordDimensions||[],o=n.dimensionsDefine||a.dimensionsDefine||[],s=createHashMap(),l=[],c=getDimCount(a,r,o,n.dimensionsCount),u=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),d=o===a.dimensionsDefine,f=d?ensureSourceDimNameMap(a):createDimNameMap(o),v=n.encodeDefine;!v&&n.encodeDefaulter&&(v=n.encodeDefaulter(a,c));for(var g=createHashMap(v),y=new CtorInt32Array$1(c),_=0;_<y.length;_++)y[_]=-1;function S(V){var F=y[V];if(F<0){var U=o[V],G=isObject$3(U)?U:{name:U},W=new SeriesDimensionDefine,j=G.name;j!=null&&f.get(j)!=null&&(W.name=W.displayName=j),G.type!=null&&(W.type=G.type),G.displayName!=null&&(W.displayName=G.displayName);var K=l.length;return y[V]=K,W.storeDimIndex=V,l.push(W),W}return l[F]}if(!u)for(var _=0;_<c;_++)S(_);g.each(function(V,F){var U=normalizeToArray(V).slice();if(U.length===1&&!isString(U[0])&&U[0]<0){g.set(F,!1);return}var G=g.set(F,[]);each$f(U,function(W,j){var K=isString(W)?f.get(W):W;K!=null&&K<c&&(G[j]=K,T(S(K),F,j))})});var x=0;each$f(r,function(V){var F,U,G,W;if(isString(V))F=V,W={};else{W=V,F=W.name;var j=W.ordinalMeta;W.ordinalMeta=null,W=extend({},W),W.ordinalMeta=j,U=W.dimsDef,G=W.otherDims,W.name=W.coordDim=W.coordDimIndex=W.dimsDef=W.otherDims=null}var K=g.get(F);if(K!==!1){if(K=normalizeToArray(K),!K.length)for(var q=0;q<(U&&U.length||1);q++){for(;x<c&&S(x).coordDim!=null;)x++;x<c&&K.push(x++)}each$f(K,function(ie,ee){var he=S(ie);if(d&&W.type!=null&&(he.type=W.type),T(defaults(he,W),F,ee),he.name==null&&U){var pe=U[ee];!isObject$3(pe)&&(pe={name:pe}),he.name=he.displayName=pe.name,he.defaultTooltip=pe.defaultTooltip}G&&defaults(he.otherDims,G)})}});function T(V,F,U){VISUAL_DIMENSIONS.get(F)!=null?V.otherDims[F]=U:(V.coordDim=F,V.coordDimIndex=U,s.set(F,!0))}var w=n.generateCoord,E=n.generateCoordCount,P=E!=null;E=w?E||1:0;var D=w||"value";function L(V){V.name==null&&(V.name=V.coordDim)}if(u)each$f(l,function(V){L(V)}),l.sort(function(V,F){return V.storeDimIndex-F.storeDimIndex});else for(var $=0;$<c;$++){var O=S($),B=O.coordDim;B==null&&(O.coordDim=genCoordDimName(D,s,P),O.coordDimIndex=0,(!w||E<=0)&&(O.isExtraCoord=!0),E--),L(O),O.type==null&&(guessOrdinal(a,$)===BE_ORDINAL.Must||O.isExtraCoord&&(O.otherDims.itemName!=null||O.otherDims.seriesName!=null))&&(O.type="ordinal")}return removeDuplication(l),new SeriesDataSchema({source:a,dimensions:l,fullDimensionCount:c,dimensionOmitted:u})}function removeDuplication(a){for(var n=createHashMap(),r=0;r<a.length;r++){var o=a[r],s=o.name,l=n.get(s)||0;l>0&&(o.name=s+(l-1)),l++,n.set(s,l)}}function getDimCount(a,n,r,o){var s=Math.max(a.dimensionsDetectedCount||1,n.length,r.length,o||0);return each$f(n,function(l){var c;isObject$3(l)&&(c=l.dimsDef)&&(s=Math.max(s,c.length))}),s}function genCoordDimName(a,n,r){if(r||n.hasKey(a)){for(var o=0;n.hasKey(a+o);)o++;a+=o}return n.set(a,!0),a}var CoordSysInfo=function(){function a(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return a}();function getCoordSysInfoBySeries(a){var n=a.get("coordinateSystem"),r=new CoordSysInfo(n),o=fetchers[n];if(o)return o(a,r,r.axisMap,r.categoryAxisMap),r}var fetchers={cartesian2d:function(a,n,r,o){var s=a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],r.set("x",s),r.set("y",l),isCategory(s)&&(o.set("x",s),n.firstCategoryDimIndex=0),isCategory(l)&&(o.set("y",l),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(a,n,r,o){var s=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],r.set("single",s),isCategory(s)&&(o.set("single",s),n.firstCategoryDimIndex=0)},polar:function(a,n,r,o){var s=a.getReferringComponents("polar",SINGLE_REFERRING).models[0],l=s.findAxisModel("radiusAxis"),c=s.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],r.set("radius",l),r.set("angle",c),isCategory(l)&&(o.set("radius",l),n.firstCategoryDimIndex=0),isCategory(c)&&(o.set("angle",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(a,n,r,o){n.coordSysDims=["lng","lat"]},parallel:function(a,n,r,o){var s=a.ecModel,l=s.getComponent("parallel",a.get("parallelIndex")),c=n.coordSysDims=l.dimensions.slice();each$f(l.parallelAxisIndex,function(u,d){var f=s.getComponent("parallelAxis",u),v=c[d];r.set(v,f),isCategory(f)&&(o.set(v,f),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=d))})}};function isCategory(a){return a.get("type")==="category"}function enableDataStack(a,n,r){r=r||{};var o=r.byIndex,s=r.stackedCoordDimension,l,c,u;isLegacyDimensionsInput(n)?l=n:(c=n.schema,l=c.dimensions,u=n.store);var d=!!(a&&a.get("stack")),f,v,g,y;if(each$f(l,function(E,P){isString(E)&&(l[P]=E={name:E}),d&&!E.isExtraCoord&&(!o&&!f&&E.ordinalMeta&&(f=E),!v&&E.type!=="ordinal"&&E.type!=="time"&&(!s||s===E.coordDim)&&(v=E))}),v&&!o&&!f&&(o=!0),v){g="__\0ecstackresult_"+a.id,y="__\0ecstackedover_"+a.id,f&&(f.createInvertedIndices=!0);var _=v.coordDim,S=v.type,x=0;each$f(l,function(E){E.coordDim===_&&x++});var T={name:g,coordDim:_,coordDimIndex:x,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length},w={name:y,coordDim:y,coordDimIndex:x+1,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:l.length+1};c?(u&&(T.storeDimIndex=u.ensureCalculationDimension(y,S),w.storeDimIndex=u.ensureCalculationDimension(g,S)),c.appendCalculationDimension(T),c.appendCalculationDimension(w)):(l.push(T),l.push(w))}return{stackedDimension:v&&v.name,stackedByDimension:f&&f.name,isStackedByIndex:o,stackedOverDimension:y,stackResultDimension:g}}function isLegacyDimensionsInput(a){return!isSeriesDataSchema(a.schema)}function isDimensionStacked(a,n){return!!n&&n===a.getCalculationInfo("stackedDimension")}function getStackedDimension(a,n){return isDimensionStacked(a,n)?a.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(a,n){var r=a.get("coordinateSystem"),o=CoordinateSystemManager.get(r),s;return n&&n.coordSysDims&&(s=map$1(n.coordSysDims,function(l){var c={name:l},u=n.axisMap.get(l);if(u){var d=u.get("type");c.type=getDimensionTypeByAxis(d)}return c})),s||(s=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),s}function injectOrdinalMeta(a,n,r){var o,s;return r&&each$f(a,function(l,c){var u=l.coordDim,d=r.categoryAxisMap.get(u);d&&(o==null&&(o=c),l.ordinalMeta=d.getOrdinalMeta(),n&&(l.createInvertedIndices=!0)),l.otherDims.itemName!=null&&(s=!0)}),!s&&o!=null&&(a[o].otherDims.itemName=0),o}function createSeriesData(a,n,r){r=r||{};var o=n.getSourceManager(),s,l=!1;a?(l=!0,s=createSourceFromSeriesDataOption(a)):(s=o.getSource(),l=s.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(n),u=getCoordSysDimDefs(n,c),d=r.useEncodeDefaulter,f=isFunction(d)?d:d?curry$1(makeSeriesEncodeForAxisCoordSys,u,n):null,v={coordDimensions:u,generateCoord:r.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!l},g=prepareSeriesDataSchema(s,v),y=injectOrdinalMeta(g.dimensions,r.createInvertedIndices,c),_=l?null:o.getSharedDataStore(g),S=enableDataStack(n,{schema:g,store:_}),x=new SeriesData(g,n);x.setCalculationInfo(S);var T=y!=null&&isNeedCompleteOrdinalData(s)?function(w,E,P,D){return D===y?P:this.defaultDimValueGetter(w,E,P,D)}:null;return x.hasItemOption=!1,x.initData(l?s:_,null,T),x}function isNeedCompleteOrdinalData(a){if(a.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(a.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(a){for(var n=0;n<a.length&&a[n]==null;)n++;return a[n]}var Scale=function(){function a(n){this._setting=n||{},this._extent=[1/0,-1/0]}return a.prototype.getSetting=function(n){return this._setting[n]},a.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])},a.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(n,r){var o=this._extent;isNaN(n)||(o[0]=n),isNaN(r)||(o[1]=r)},a.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(n){this._isBlank=n},a}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function a(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return a.createByAxisModel=function(n){var r=n.option,o=r.data,s=o&&map$1(o,getName);return new a({categories:s,needCollect:!s,deduplication:r.dedplication!==!1})},a.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},a.prototype.parseAndCollect=function(n){var r,o=this._needCollect;if(!isString(n)&&!o)return n;if(o&&!this._deduplication)return r=this.categories.length,this.categories[r]=n,r;var s=this._getOrCreateMap();return r=s.get(n),r==null&&(o?(r=this.categories.length,this.categories[r]=n,s.set(n,r)):r=NaN),r},a.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},a}();function getName(a){return isObject$3(a)&&a.value!=null?a.value:a+""}function isIntervalOrLogScale(a){return a.type==="interval"||a.type==="log"}function intervalScaleNiceTicks(a,n,r,o){var s={},l=a[1]-a[0],c=s.interval=nice(l/n);r!=null&&c<r&&(c=s.interval=r),o!=null&&c>o&&(c=s.interval=o);var u=s.intervalPrecision=getIntervalPrecision(c),d=s.niceTickExtent=[round$3(Math.ceil(a[0]/c)*c,u),round$3(Math.floor(a[1]/c)*c,u)];return fixExtent(d,a),s}function increaseInterval(a){var n=Math.pow(10,quantityExponent(a)),r=a/n;return r?r===2?r=3:r===3?r=5:r*=2:r=1,round$3(r*n)}function getIntervalPrecision(a){return getPrecision(a)+2}function clamp$1(a,n,r){a[n]=Math.max(Math.min(a[n],r[1]),r[0])}function fixExtent(a,n){!isFinite(a[0])&&(a[0]=n[0]),!isFinite(a[1])&&(a[1]=n[1]),clamp$1(a,0,n),clamp$1(a,1,n),a[0]>a[1]&&(a[0]=a[1])}function contain$1(a,n){return a>=n[0]&&a<=n[1]}function normalize$3(a,n){return n[1]===n[0]?.5:(a-n[0])/(n[1]-n[0])}function scale(a,n){return a*(n[1]-n[0])+n[0]}var OrdinalScale=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;o.type="ordinal";var s=o.getSetting("ordinalMeta");return s||(s=new OrdinalMeta({})),isArray$1(s)&&(s=new OrdinalMeta({categories:map$1(s,function(l){return isObject$3(l)?l.value:l})})),o._ordinalMeta=s,o._extent=o.getSetting("extent")||[0,s.categories.length-1],o}return n.prototype.parse=function(r){return r==null?NaN:isString(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},n.prototype.contain=function(r){return r=this.parse(r),contain$1(r,this._extent)&&this._ordinalMeta.categories[r]!=null},n.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),normalize$3(r,this._extent)},n.prototype.scale=function(r){return r=Math.round(scale(r,this._extent)),this.getRawOrdinalNumber(r)},n.prototype.getTicks=function(){for(var r=[],o=this._extent,s=o[0];s<=o[1];)r.push({value:s}),s++;return r},n.prototype.getMinorTicks=function(r){},n.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=r.ordinalNumbers,s=this._ordinalNumbersByTick=[],l=this._ticksByOrdinalNumber=[],c=0,u=this._ordinalMeta.categories.length,d=Math.min(u,o.length);c<d;++c){var f=o[c];s[c]=f,l[f]=c}for(var v=0;c<u;++c){for(;l[v]!=null;)v++;s.push(v),l[v]=c}},n.prototype._getTickNumber=function(r){var o=this._ticksByOrdinalNumber;return o&&r>=0&&r<o.length?o[r]:r},n.prototype.getRawOrdinalNumber=function(r){var o=this._ordinalNumbersByTick;return o&&r>=0&&r<o.length?o[r]:r},n.prototype.getLabel=function(r){if(!this.isBlank()){var o=this.getRawOrdinalNumber(r.value),s=this._ordinalMeta.categories[o];return s==null?"":s+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},n.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return n.prototype.parse=function(r){return r},n.prototype.contain=function(r){return contain$1(r,this._extent)},n.prototype.normalize=function(r){return normalize$3(r,this._extent)},n.prototype.scale=function(r){return scale(r,this._extent)},n.prototype.setExtent=function(r,o){var s=this._extent;isNaN(r)||(s[0]=parseFloat(r)),isNaN(o)||(s[1]=parseFloat(o))},n.prototype.unionExtent=function(r){var o=this._extent;r[0]<o[0]&&(o[0]=r[0]),r[1]>o[1]&&(o[1]=r[1]),this.setExtent(o[0],o[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(r)},n.prototype.getTicks=function(r){var o=this._interval,s=this._extent,l=this._niceExtent,c=this._intervalPrecision,u=[];if(!o)return u;var d=1e4;s[0]<l[0]&&(r?u.push({value:roundNumber(l[0]-o,c)}):u.push({value:s[0]}));for(var f=l[0];f<=l[1]&&(u.push({value:f}),f=roundNumber(f+o,c),f!==u[u.length-1].value);)if(u.length>d)return[];var v=u.length?u[u.length-1].value:l[1];return s[1]>v&&(r?u.push({value:roundNumber(v+o,c)}):u.push({value:s[1]})),u},n.prototype.getMinorTicks=function(r){for(var o=this.getTicks(!0),s=[],l=this.getExtent(),c=1;c<o.length;c++){for(var u=o[c],d=o[c-1],f=0,v=[],g=u.value-d.value,y=g/r;f<r-1;){var _=roundNumber(d.value+(f+1)*y);_>l[0]&&_<l[1]&&v.push(_),f++}s.push(v)}return s},n.prototype.getLabel=function(r,o){if(r==null)return"";var s=o&&o.precision;s==null?s=getPrecision(r.value)||0:s==="auto"&&(s=this._intervalPrecision);var l=roundNumber(r.value,s,!0);return addCommas(l)},n.prototype.calcNiceTicks=function(r,o,s){r=r||5;var l=this._extent,c=l[1]-l[0];if(isFinite(c)){c<0&&(c=-c,l.reverse());var u=intervalScaleNiceTicks(l,r,o,s);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},n.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1])if(o[0]!==0){var s=Math.abs(o[0]);r.fixMax||(o[1]+=s/2),o[0]-=s/2}else o[1]=1;var l=o[1]-o[0];isFinite(l)||(o[0]=0,o[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var c=this._interval;r.fixMin||(o[0]=roundNumber(Math.floor(o[0]/c)*c)),r.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/c)*c))},n.prototype.setNiceExtent=function(r,o){this._niceExtent=[r,o]},n.type="interval",n}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(a){return isArray$1(a)?supportFloat32Array?new Float32Array(a):a:new Float32ArrayCtor(a)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(a){return a.get("stack")||STACK_PREFIX+a.seriesIndex}function getAxisKey$1(a){return a.dim+a.index}function getLayoutOnAxis(a){var n=[],r=a.axis,o="axis0";if(r.type==="category"){for(var s=r.getBandWidth(),l=0;l<a.count;l++)n.push(defaults({bandWidth:s,axisKey:o,stackId:STACK_PREFIX+l},a));for(var c=doCalBarWidthAndOffset(n),u=[],l=0;l<a.count;l++){var d=c[o][STACK_PREFIX+l];d.offsetCenter=d.offset+d.width/2,u.push(d)}return u}}function prepareLayoutBarSeries(a,n){var r=[];return n.eachSeriesByType(a,function(o){isOnCartesian(o)&&r.push(o)}),r}function getValueAxesMinGaps(a){var n={};each$f(a,function(d){var f=d.coordinateSystem,v=f.getBaseAxis();if(!(v.type!=="time"&&v.type!=="value"))for(var g=d.getData(),y=v.dim+"_"+v.index,_=g.getDimensionIndex(g.mapDimension(v.dim)),S=g.getStore(),x=0,T=S.count();x<T;++x){var w=S.get(_,x);n[y]?n[y].push(w):n[y]=[w]}});var r={};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s){s.sort(function(d,f){return d-f});for(var l=null,c=1;c<s.length;++c){var u=s[c]-s[c-1];u>0&&(l=l===null?u:Math.min(l,u))}r[o]=l}}return r}function makeColumnLayout(a){var n=getValueAxesMinGaps(a),r=[];return each$f(a,function(o){var s=o.coordinateSystem,l=s.getBaseAxis(),c=l.getExtent(),u;if(l.type==="category")u=l.getBandWidth();else if(l.type==="value"||l.type==="time"){var d=l.dim+"_"+l.index,f=n[d],v=Math.abs(c[1]-c[0]),g=l.scale.getExtent(),y=Math.abs(g[1]-g[0]);u=f?v/y*f:v}else{var _=o.getData();u=Math.abs(c[1]-c[0])/_.count()}var S=parsePercent(o.get("barWidth"),u),x=parsePercent(o.get("barMaxWidth"),u),T=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),u),w=o.get("barGap"),E=o.get("barCategoryGap");r.push({bandWidth:u,barWidth:S,barMaxWidth:x,barMinWidth:T,barGap:w,barCategoryGap:E,axisKey:getAxisKey$1(l),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(r)}function doCalBarWidthAndOffset(a){var n={};each$f(a,function(o,s){var l=o.axisKey,c=o.bandWidth,u=n[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},d=u.stacks;n[l]=u;var f=o.stackId;d[f]||u.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var v=o.barWidth;v&&!d[f].width&&(d[f].width=v,v=Math.min(u.remainedWidth,v),u.remainedWidth-=v);var g=o.barMaxWidth;g&&(d[f].maxWidth=g);var y=o.barMinWidth;y&&(d[f].minWidth=y);var _=o.barGap;_!=null&&(u.gap=_);var S=o.barCategoryGap;S!=null&&(u.categoryGap=S)});var r={};return each$f(n,function(o,s){r[s]={};var l=o.stacks,c=o.bandWidth,u=o.categoryGap;if(u==null){var d=keys(l).length;u=Math.max(35-d*4,15)+"%"}var f=parsePercent(u,c),v=parsePercent(o.gap,1),g=o.remainedWidth,y=o.autoWidthCount,_=(g-f)/(y+(y-1)*v);_=Math.max(_,0),each$f(l,function(w){var E=w.maxWidth,P=w.minWidth;if(w.width){var D=w.width;E&&(D=Math.min(D,E)),P&&(D=Math.max(D,P)),w.width=D,g-=D+v*D,y--}else{var D=_;E&&E<D&&(D=Math.min(E,g)),P&&P>D&&(D=P),D!==_&&(w.width=D,g-=D+v*D,y--)}}),_=(g-f)/(y+(y-1)*v),_=Math.max(_,0);var S=0,x;each$f(l,function(w,E){w.width||(w.width=_),x=w,S+=w.width*(1+v)}),x&&(S-=x.width*v);var T=-S/2;each$f(l,function(w,E){r[s][E]=r[s][E]||{bandWidth:c,offset:T,width:w.width},T+=w.width*(1+v)})}),r}function retrieveColumnLayout(a,n,r){if(a&&n){var o=a[getAxisKey$1(n)];return o!=null&&r!=null?o[getSeriesStackId$1(r)]:o}}function layout$3(a,n){var r=prepareLayoutBarSeries(a,n),o=makeColumnLayout(r);each$f(r,function(s){var l=s.getData(),c=s.coordinateSystem,u=c.getBaseAxis(),d=getSeriesStackId$1(s),f=o[getAxisKey$1(u)][d],v=f.offset,g=f.width;l.setLayout({bandWidth:f.bandWidth,offset:v,size:g})})}function createProgressiveLayout(a){return{seriesType:a,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var r=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=o.getOtherAxis(s),c=r.getDimensionIndex(r.mapDimension(l.dim)),u=r.getDimensionIndex(r.mapDimension(s.dim)),d=n.get("showBackground",!0),f=r.mapDimension(l.dim),v=r.getCalculationInfo("stackResultDimension"),g=isDimensionStacked(r,f)&&!!r.getCalculationInfo("stackedOnSeries"),y=l.isHorizontal(),_=getValueAxisStart(s,l),S=isInLargeMode(n),x=n.get("barMinHeight")||0,T=v&&r.getDimensionIndex(v),w=r.getLayout("size"),E=r.getLayout("offset");return{progress:function(P,D){for(var L=P.count,$=S&&createFloat32Array(L*3),O=S&&d&&createFloat32Array(L*3),B=S&&createFloat32Array(L),V=o.master.getRect(),F=y?V.width:V.height,U,G=D.getStore(),W=0;(U=P.next())!=null;){var j=G.get(g?T:c,U),K=G.get(u,U),q=_,ie=void 0;g&&(ie=+j-G.get(c,U));var ee=void 0,he=void 0,pe=void 0,ce=void 0;if(y){var ye=o.dataToPoint([j,K]);if(g){var we=o.dataToPoint([ie,K]);q=we[0]}ee=q,he=ye[1]+E,pe=ye[0]-q,ce=w,Math.abs(pe)<x&&(pe=(pe<0?-1:1)*x)}else{var ye=o.dataToPoint([K,j]);if(g){var we=o.dataToPoint([K,ie]);q=we[1]}ee=ye[0]+E,he=q,pe=w,ce=ye[1]-q,Math.abs(ce)<x&&(ce=(ce<=0?-1:1)*x)}S?($[W]=ee,$[W+1]=he,$[W+2]=y?pe:ce,O&&(O[W]=y?V.x:ee,O[W+1]=y?he:V.y,O[W+2]=F),B[U]=U):D.setItemLayout(U,{x:ee,y:he,width:pe,height:ce}),W+=3}S&&D.setLayout({largePoints:$,largeDataIndices:B,largeBackgroundPoints:O,valueAxisHorizontal:y})}}}}}}function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(a,n){var r=n.model.get("startValue");return r||(r=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?r>0?r:1:r))}var bisect=function(a,n,r,o){for(;r<o;){var s=r+o>>>1;a[s][1]<n?r=s+1:o=s}return r},TimeScale=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="time",o}return n.prototype.getLabel=function(r){var o=this.getSetting("useUTC");return format(r.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(r,o,s){var l=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(r,o,s,c,l)},n.prototype.getTicks=function(){var r=this._interval,o=this._extent,s=[];if(!r)return s;s.push({value:o[0],level:0});var l=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,l,o);return s=s.concat(c),s.push({value:o[1],level:0}),s},n.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var s=new Date;o[1]=+new Date(s.getFullYear(),s.getMonth(),s.getDate()),o[0]=o[1]-ONE_DAY}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},n.prototype.calcNiceTicks=function(r,o,s){r=r||10;var l=this._extent,c=l[1]-l[0];this._approxInterval=c/r,o!=null&&this._approxInterval<o&&(this._approxInterval=o),s!=null&&this._approxInterval>s&&(this._approxInterval=s);var u=scaleIntervals.length,d=Math.min(bisect(scaleIntervals,this._approxInterval,0,u),u-1);this._interval=scaleIntervals[d][1],this._minLevelUnit=scaleIntervals[Math.max(d-1,0)][0]},n.prototype.parse=function(r){return isNumber(r)?r:+parseDate(r)},n.prototype.contain=function(r){return contain$1(this.parse(r),this._extent)},n.prototype.normalize=function(r){return normalize$3(this.parse(r),this._extent)},n.prototype.scale=function(r){return scale(r,this._extent)},n.type="time",n}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(a,n,r,o){var s=parseDate(n),l=parseDate(r),c=function(S){return getUnitValue(s,S,o)===getUnitValue(l,S,o)},u=function(){return c("year")},d=function(){return u()&&c("month")},f=function(){return d()&&c("day")},v=function(){return f()&&c("hour")},g=function(){return v()&&c("minute")},y=function(){return g()&&c("second")},_=function(){return y()&&c("millisecond")};switch(a){case"year":return u();case"month":return d();case"day":return f();case"hour":return v();case"minute":return g();case"second":return y();case"millisecond":return _()}}function getDateInterval(a,n){return a/=ONE_DAY,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function getMonthInterval(a){var n=30*ONE_DAY;return a/=n,a>6?6:a>3?3:a>2?2:1}function getHourInterval(a){return a/=ONE_HOUR,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function getMinutesAndSecondsInterval(a,n){return a/=n?ONE_MINUTE:ONE_SECOND,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function getMillisecondsInterval(a){return nice(a)}function getFirstTimestampOfUnit(a,n,r){var o=new Date(a);switch(getPrimaryTimeUnit(n)){case"year":case"month":o[monthSetterName(r)](0);case"day":o[dateSetterName(r)](1);case"hour":o[hoursSetterName(r)](0);case"minute":o[minutesSetterName(r)](0);case"second":o[secondsSetterName(r)](0),o[millisecondsSetterName(r)](0)}return o.getTime()}function getIntervalTicks(a,n,r,o){var s=1e4,l=timeUnits,c=0;function u(F,U,G,W,j,K,q){for(var ie=new Date(U),ee=U,he=ie[W]();ee<G&&ee<=o[1];)q.push({value:ee}),he+=F,ie[j](he),ee=ie.getTime();q.push({value:ee,notAdd:!0})}function d(F,U,G){var W=[],j=!U.length;if(!isUnitValueSame(getPrimaryTimeUnit(F),o[0],o[1],r)){j&&(U=[{value:getFirstTimestampOfUnit(new Date(o[0]),F,r)},{value:o[1]}]);for(var K=0;K<U.length-1;K++){var q=U[K].value,ie=U[K+1].value;if(q!==ie){var ee=void 0,he=void 0,pe=void 0,ce=!1;switch(F){case"year":ee=Math.max(1,Math.round(n/ONE_DAY/365)),he=fullYearGetterName(r),pe=fullYearSetterName(r);break;case"half-year":case"quarter":case"month":ee=getMonthInterval(n),he=monthGetterName(r),pe=monthSetterName(r);break;case"week":case"half-week":case"day":ee=getDateInterval(n),he=dateGetterName(r),pe=dateSetterName(r),ce=!0;break;case"half-day":case"quarter-day":case"hour":ee=getHourInterval(n),he=hoursGetterName(r),pe=hoursSetterName(r);break;case"minute":ee=getMinutesAndSecondsInterval(n,!0),he=minutesGetterName(r),pe=minutesSetterName(r);break;case"second":ee=getMinutesAndSecondsInterval(n,!1),he=secondsGetterName(r),pe=secondsSetterName(r);break;case"millisecond":ee=getMillisecondsInterval(n),he=millisecondsGetterName(r),pe=millisecondsSetterName(r);break}u(ee,q,ie,he,pe,ce,W),F==="year"&&G.length>1&&K===0&&G.unshift({value:G[0].value-ee})}}for(var K=0;K<W.length;K++)G.push(W[K]);return W}}for(var f=[],v=[],g=0,y=0,_=0;_<l.length&&c++<s;++_){var S=getPrimaryTimeUnit(l[_]);if(isPrimaryTimeUnit(l[_])){d(l[_],f[f.length-1]||[],v);var x=l[_+1]?getPrimaryTimeUnit(l[_+1]):null;if(S!==x){if(v.length){y=g,v.sort(function(F,U){return F.value-U.value});for(var T=[],w=0;w<v.length;++w){var E=v[w].value;(w===0||v[w-1].value!==E)&&(T.push(v[w]),E>=o[0]&&E<=o[1]&&g++)}var P=(o[1]-o[0])/n;if(g>P*1.5&&y>P/1.5||(f.push(T),g>P||a===l[_]))break}v=[]}}}for(var D=filter(map$1(f,function(F){return filter(F,function(U){return U.value>=o[0]&&U.value<=o[1]&&!U.notAdd})}),function(F){return F.length>0}),L=[],$=D.length-1,_=0;_<D.length;++_)for(var O=D[_],B=0;B<O.length;++B)L.push({value:O[B].value,level:$-_});L.sort(function(F,U){return F.value-U.value});for(var V=[],_=0;_<L.length;++_)(_===0||L[_].value!==L[_-1].value)&&V.push(L[_]);return V}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new IntervalScale,r._interval=0,r}return n.prototype.getTicks=function(r){var o=this._originalScale,s=this._extent,l=o.getExtent(),c=intervalScaleProto.getTicks.call(this,r);return map$1(c,function(u){var d=u.value,f=round$3(mathPow$1(this.base,d));return f=d===s[0]&&this._fixMin?fixRoundingError(f,l[0]):f,f=d===s[1]&&this._fixMax?fixRoundingError(f,l[1]):f,{value:f}},this)},n.prototype.setExtent=function(r,o){var s=mathLog$1(this.base);r=mathLog$1(Math.max(0,r))/s,o=mathLog$1(Math.max(0,o))/s,intervalScaleProto.setExtent.call(this,r,o)},n.prototype.getExtent=function(){var r=this.base,o=scaleProto.getExtent.call(this);o[0]=mathPow$1(r,o[0]),o[1]=mathPow$1(r,o[1]);var s=this._originalScale,l=s.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],l[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],l[1])),o},n.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var o=this.base;r[0]=mathLog$1(r[0])/mathLog$1(o),r[1]=mathLog$1(r[1])/mathLog$1(o),scaleProto.unionExtent.call(this,r)},n.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},n.prototype.calcNiceTicks=function(r){r=r||10;var o=this._extent,s=o[1]-o[0];if(!(s===1/0||s<=0)){var l=quantity(s),c=r/s*l;for(c<=.5&&(l*=10);!isNaN(l)&&Math.abs(l)<1&&Math.abs(l)>0;)l*=10;var u=[round$3(mathCeil$1(o[0]/l)*l),round$3(mathFloor$1(o[1]/l)*l)];this._interval=l,this._niceExtent=u}},n.prototype.calcNiceExtent=function(r){intervalScaleProto.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},n.prototype.parse=function(r){return r},n.prototype.contain=function(r){return r=mathLog$1(r)/mathLog$1(this.base),contain$1(r,this._extent)},n.prototype.normalize=function(r){return r=mathLog$1(r)/mathLog$1(this.base),normalize$3(r,this._extent)},n.prototype.scale=function(r){return r=scale(r,this._extent),mathPow$1(this.base,r)},n.type="log",n}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(a,n){return roundingErrorFix(a,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function a(n,r,o){this._prepareParams(n,r,o)}return a.prototype._prepareParams=function(n,r,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var s=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var l=r.get("min",!0);l==null&&(l=r.get("startValue",!0));var c=this._modelMinRaw=l;isFunction(c)?this._modelMinNum=parseAxisModelMinMax(n,c({min:o[0],max:o[1]})):c!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,c));var u=this._modelMaxRaw=r.get("max",!0);if(isFunction(u)?this._modelMaxNum=parseAxisModelMinMax(n,u({min:o[0],max:o[1]})):u!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,u)),s)this._axisDataLen=r.getCategories().length;else{var d=r.get("boundaryGap"),f=isArray$1(d)?d:[d||0,d||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(f[0],1),parsePercent$1(f[1],1)]}},a.prototype.calculate=function(){var n=this._isOrdinal,r=this._dataMin,o=this._dataMax,s=this._axisDataLen,l=this._boundaryGapInner,c=n?null:o-r||Math.abs(r),u=this._modelMinRaw==="dataMin"?r:this._modelMinNum,d=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,f=u!=null,v=d!=null;u==null&&(u=n?s?0:NaN:r-l[0]*c),d==null&&(d=n?s?s-1:NaN:o+l[1]*c),(u==null||!isFinite(u))&&(u=NaN),(d==null||!isFinite(d))&&(d=NaN);var g=eqNaN(u)||eqNaN(d)||n&&!s;this._needCrossZero&&(u>0&&d>0&&!f&&(u=0),u<0&&d<0&&!v&&(d=0));var y=this._determinedMin,_=this._determinedMax;return y!=null&&(u=y,f=!0),_!=null&&(d=_,v=!0),{min:u,max:d,minFixed:f,maxFixed:v,isBlank:g}},a.prototype.modifyDataMinMax=function(n,r){this[DATA_MIN_MAX_ATTR[n]]=r},a.prototype.setDeterminedMinMax=function(n,r){var o=DETERMINED_MIN_MAX_ATTR[n];this[o]=r},a.prototype.freeze=function(){this.frozen=!0},a}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(a,n,r){var o=a.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(a,n,r),a.rawExtentInfo=o,o)}function parseAxisModelMinMax(a,n){return n==null?null:eqNaN(n)?NaN:a.parse(n)}function getScaleExtent(a,n){var r=a.type,o=ensureScaleRawExtentInfo(a,n,a.getExtent()).calculate();a.setBlank(o.isBlank);var s=o.min,l=o.max,c=n.ecModel;if(c&&r==="time"){var u=prepareLayoutBarSeries("bar",c),d=!1;if(each$f(u,function(g){d=d||g.getBaseAxis()===n.axis}),d){var f=makeColumnLayout(u),v=adjustScaleForOverflow(s,l,n,f);s=v.min,l=v.max}}return{extent:[s,l],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(a,n,r,o){var s=r.axis.getExtent(),l=Math.abs(s[1]-s[0]),c=retrieveColumnLayout(o,r.axis);if(c===void 0)return{min:a,max:n};var u=1/0;each$f(c,function(_){u=Math.min(_.offset,u)});var d=-1/0;each$f(c,function(_){d=Math.max(_.offset+_.width,d)}),u=Math.abs(u),d=Math.abs(d);var f=u+d,v=n-a,g=1-(u+d)/l,y=v/g-v;return n+=y*(d/f),a-=y*(u/f),{min:a,max:n}}function niceScaleExtent(a,n){var r=n,o=getScaleExtent(a,r),s=o.extent,l=r.get("splitNumber");a instanceof LogScale&&(a.base=r.get("logBase"));var c=a.type,u=r.get("interval"),d=c==="interval"||c==="time";a.setExtent(s[0],s[1]),a.calcNiceExtent({splitNumber:l,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:d?r.get("minInterval"):null,maxInterval:d?r.get("maxInterval"):null}),u!=null&&a.setInterval&&a.setInterval(u)}function createScaleByModel$1(a,n){if(n=n||a.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(a){var n=a.scale.getExtent(),r=n[0],o=n[1];return!(r>0&&o>0||r<0&&o<0)}function makeLabelFormatter(a){var n=a.getLabelModel().get("formatter"),r=a.type==="category"?a.scale.getExtent()[0]:null;return a.scale.type==="time"?function(o){return function(s,l){return a.scale.getFormattedLabel(s,l,o)}}(n):isString(n)?function(o){return function(s){var l=a.scale.getLabel(s),c=o.replace("{value}",l??"");return c}}(n):isFunction(n)?function(o){return function(s,l){return r!=null&&(l=s.value-r),o(getAxisRawValue(a,s),l,s.level!=null?{level:s.level}:null)}}(n):function(o){return a.scale.getLabel(o)}}function getAxisRawValue(a,n){return a.type==="category"?a.scale.getLabel(n):n.value}function estimateLabelUnionRect(a){var n=a.model,r=a.scale;if(!(!n.get(["axisLabel","show"])||r.isBlank())){var o,s,l=r.getExtent();r instanceof OrdinalScale?s=r.count():(o=r.getTicks(),s=o.length);var c=a.getLabelModel(),u=makeLabelFormatter(a),d,f=1;s>40&&(f=Math.ceil(s/40));for(var v=0;v<s;v+=f){var g=o?o[v]:{value:l[0]+v},y=u(g,v),_=c.getTextRect(y),S=rotateTextRect(_,c.get("rotate")||0);d?d.union(S):d=S}return d}}function rotateTextRect(a,n){var r=n*Math.PI/180,o=a.width,s=a.height,l=o*Math.abs(Math.cos(r))+Math.abs(s*Math.sin(r)),c=o*Math.abs(Math.sin(r))+Math.abs(s*Math.cos(r)),u=new BoundingRect(a.x,a.y,l,c);return u}function getOptionCategoryInterval(a){var n=a.get("interval");return n??"auto"}function shouldShowAllLabels(a){return a.type==="category"&&getOptionCategoryInterval(a.getLabelModel())===0}function getDataDimensionsOnAxis(a,n){var r={};return each$f(a.mapDimensionsAll(n),function(o){r[getStackedDimension(a,o)]=!0}),keys(r)}function unionAxisExtentFromData(a,n,r){n&&each$f(getDataDimensionsOnAxis(n,r),function(o){var s=n.getApproximateExtent(o);s[0]<a[0]&&(a[0]=s[0]),s[1]>a[1]&&(a[1]=s[1])})}var AxisModelCommonMixin=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},a.prototype.getCoordSysModel=function(){},a}(),EPSILON=1e-8;function isAroundEqual(a,n){return Math.abs(a-n)<EPSILON}function contain(a,n,r){var o=0,s=a[0];if(!s)return!1;for(var l=1;l<a.length;l++){var c=a[l];o+=windingLine(s[0],s[1],c[0],c[1],n,r),s=c}var u=a[0];return(!isAroundEqual(s[0],u[0])||!isAroundEqual(s[1],u[1]))&&(o+=windingLine(s[0],s[1],u[0],u[1],n,r)),o!==0}var TMP_TRANSFORM=[];function transformPoints(a,n){for(var r=0;r<a.length;r++)applyTransform$1(a[r],a[r],n)}function updateBBoxFromPoints(a,n,r,o){for(var s=0;s<a.length;s++){var l=a[s];o&&(l=o.project(l)),l&&isFinite(l[0])&&isFinite(l[1])&&(min$1(n,n,l),max$1(r,r,l))}}function centroid$1(a){for(var n=0,r=0,o=0,s=a.length,l=a[s-1][0],c=a[s-1][1],u=0;u<s;u++){var d=a[u][0],f=a[u][1],v=l*f-d*c;n+=v,r+=(l+d)*v,o+=(c+f)*v,l=d,c=f}return n?[r/n/3,o/n/3,n]:[a[0][0]||0,a[0][1]||0]}var Region=function(){function a(n){this.name=n}return a.prototype.setCenter=function(n){this._center=n},a.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},a}(),GeoJSONPolygonGeometry=function(){function a(n,r){this.type="polygon",this.exterior=n,this.interiors=r}return a}(),GeoJSONLineStringGeometry=function(){function a(n){this.type="linestring",this.points=n}return a}(),GeoJSONRegion=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this,r)||this;return l.type="geoJSON",l.geometries=o,l._center=s&&[s[0],s[1]],l}return n.prototype.calcCenter=function(){for(var r=this.geometries,o,s=0,l=0;l<r.length;l++){var c=r[l],u=c.exterior,d=u&&u.length;d>s&&(o=c,s=d)}if(o)return centroid$1(o.exterior);var f=this.getBoundingRect();return[f.x+f.width/2,f.y+f.height/2]},n.prototype.getBoundingRect=function(r){var o=this._rect;if(o&&!r)return o;var s=[1/0,1/0],l=[-1/0,-1/0],c=this.geometries;return each$f(c,function(u){u.type==="polygon"?updateBBoxFromPoints(u.exterior,s,l,r):each$f(u.points,function(d){updateBBoxFromPoints(d,s,l,r)})}),isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])||(s[0]=s[1]=l[0]=l[1]=0),o=new BoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1]),r||(this._rect=o),o},n.prototype.contain=function(r){var o=this.getBoundingRect(),s=this.geometries;if(!o.contain(r[0],r[1]))return!1;e:for(var l=0,c=s.length;l<c;l++){var u=s[l];if(u.type==="polygon"){var d=u.exterior,f=u.interiors;if(contain(d,r[0],r[1])){for(var v=0;v<(f?f.length:0);v++)if(contain(f[v],r[0],r[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(r,o,s,l){var c=this.getBoundingRect(),u=c.width/c.height;s?l||(l=s/u):s=u*l;for(var d=new BoundingRect(r,o,s,l),f=c.calculateTransform(d),v=this.geometries,g=0;g<v.length;g++){var y=v[g];y.type==="polygon"?(transformPoints(y.exterior,f),each$f(y.interiors,function(_){transformPoints(_,f)})):each$f(y.points,function(_){transformPoints(_,f)})}c=this._rect,c.copy(d),this._center=[c.x+c.width/2,c.y+c.height/2]},n.prototype.cloneShallow=function(r){r==null&&(r=this.name);var o=new n(r,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},n}(Region),GeoSVGRegion=function(a){__extends(n,a);function n(r,o){var s=a.call(this,r)||this;return s.type="geoSVG",s._elOnlyForCalculate=o,s}return n.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,o=r.getBoundingRect(),s=[o.x+o.width/2,o.y+o.height/2],l=identity(TMP_TRANSFORM),c=r;c&&!c.isGeoSVGGraphicRoot;)mul(l,c.getLocalTransform(),l),c=c.parent;return invert(l,l),applyTransform$1(s,s,l),s},n}(Region);function decode(a){if(!a.UTF8Encoding)return a;var n=a,r=n.UTF8Scale;r==null&&(r=1024);var o=n.features;return each$f(o,function(s){var l=s.geometry,c=l.encodeOffsets,u=l.coordinates;if(c)switch(l.type){case"LineString":l.coordinates=decodeRing(u,c,r);break;case"Polygon":decodeRings(u,c,r);break;case"MultiLineString":decodeRings(u,c,r);break;case"MultiPolygon":each$f(u,function(d,f){return decodeRings(d,c[f],r)})}}),n.UTF8Encoding=!1,n}function decodeRings(a,n,r){for(var o=0;o<a.length;o++)a[o]=decodeRing(a[o],n[o],r)}function decodeRing(a,n,r){for(var o=[],s=n[0],l=n[1],c=0;c<a.length;c+=2){var u=a.charCodeAt(c)-64,d=a.charCodeAt(c+1)-64;u=u>>1^-(u&1),d=d>>1^-(d&1),u+=s,d+=l,s=u,l=d,o.push([u/r,d/r])}return o}function parseGeoJSON(a,n){return a=decode(a),map$1(filter(a.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var o=r.properties,s=r.geometry,l=[];switch(s.type){case"Polygon":var c=s.coordinates;l.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(s.coordinates,function(d){d[0]&&l.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)))});break;case"LineString":l.push(new GeoJSONLineStringGeometry([s.coordinates]));break;case"MultiLineString":l.push(new GeoJSONLineStringGeometry(s.coordinates))}var u=new GeoJSONRegion(o[n||"name"],l,o.cp);return u.properties=o,u})}var inner$g=makeInner();function tickValuesToNumbers(a,n){var r=map$1(n,function(o){return a.scale.parse(o)});return a.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function createAxisLabels(a){var n=a.getLabelModel().get("customValues");if(n){var r=makeLabelFormatter(a),o=a.scale.getExtent(),s=tickValuesToNumbers(a,n),l=filter(s,function(c){return c>=o[0]&&c<=o[1]});return{labels:map$1(l,function(c){var u={value:c};return{formattedLabel:r(u),rawLabel:a.scale.getLabel(u),tickValue:c}})}}return a.type==="category"?makeCategoryLabels(a):makeRealNumberLabels(a)}function createAxisTicks(a,n){var r=a.getTickModel().get("customValues");if(r){var o=a.scale.getExtent(),s=tickValuesToNumbers(a,r);return{ticks:filter(s,function(l){return l>=o[0]&&l<=o[1]})}}return a.type==="category"?makeCategoryTicks(a,n):{ticks:map$1(a.scale.getTicks(),function(l){return l.value})}}function makeCategoryLabels(a){var n=a.getLabelModel(),r=makeCategoryLabelsActually(a,n);return!n.get("show")||a.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function makeCategoryLabelsActually(a,n){var r=getListCache(a,"labels"),o=getOptionCategoryInterval(n),s=listCacheGet(r,o);if(s)return s;var l,c;return isFunction(o)?l=makeLabelsByCustomizedCategoryInterval(a,o):(c=o==="auto"?makeAutoCategoryInterval(a):o,l=makeLabelsByNumericCategoryInterval(a,c)),listCacheSet(r,o,{labels:l,labelCategoryInterval:c})}function makeCategoryTicks(a,n){var r=getListCache(a,"ticks"),o=getOptionCategoryInterval(n),s=listCacheGet(r,o);if(s)return s;var l,c;if((!n.get("show")||a.scale.isBlank())&&(l=[]),isFunction(o))l=makeLabelsByCustomizedCategoryInterval(a,o,!0);else if(o==="auto"){var u=makeCategoryLabelsActually(a,a.getLabelModel());c=u.labelCategoryInterval,l=map$1(u.labels,function(d){return d.tickValue})}else c=o,l=makeLabelsByNumericCategoryInterval(a,c,!0);return listCacheSet(r,o,{ticks:l,tickCategoryInterval:c})}function makeRealNumberLabels(a){var n=a.scale.getTicks(),r=makeLabelFormatter(a);return{labels:map$1(n,function(o,s){return{level:o.level,formattedLabel:r(o,s),rawLabel:a.scale.getLabel(o),tickValue:o.value}})}}function getListCache(a,n){return inner$g(a)[n]||(inner$g(a)[n]=[])}function listCacheGet(a,n){for(var r=0;r<a.length;r++)if(a[r].key===n)return a[r].value}function listCacheSet(a,n,r){return a.push({key:n,value:r}),r}function makeAutoCategoryInterval(a){var n=inner$g(a).autoInterval;return n??(inner$g(a).autoInterval=a.calculateCategoryInterval())}function calculateCategoryInterval(a){var n=fetchAutoCategoryIntervalCalculationParams(a),r=makeLabelFormatter(a),o=(n.axisRotate-n.labelRotate)/180*Math.PI,s=a.scale,l=s.getExtent(),c=s.count();if(l[1]-l[0]<1)return 0;var u=1;c>40&&(u=Math.max(1,Math.floor(c/40)));for(var d=l[0],f=a.dataToCoord(d+1)-a.dataToCoord(d),v=Math.abs(f*Math.cos(o)),g=Math.abs(f*Math.sin(o)),y=0,_=0;d<=l[1];d+=u){var S=0,x=0,T=getBoundingRect(r({value:d}),n.font,"center","top");S=T.width*1.3,x=T.height*1.3,y=Math.max(y,S,7),_=Math.max(_,x,7)}var w=y/v,E=_/g;isNaN(w)&&(w=1/0),isNaN(E)&&(E=1/0);var P=Math.max(0,Math.floor(Math.min(w,E))),D=inner$g(a.model),L=a.getExtent(),$=D.lastAutoInterval,O=D.lastTickCount;return $!=null&&O!=null&&Math.abs($-P)<=1&&Math.abs(O-c)<=1&&$>P&&D.axisExtent0===L[0]&&D.axisExtent1===L[1]?P=$:(D.lastTickCount=c,D.lastAutoInterval=P,D.axisExtent0=L[0],D.axisExtent1=L[1]),P}function fetchAutoCategoryIntervalCalculationParams(a){var n=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(a,n,r){var o=makeLabelFormatter(a),s=a.scale,l=s.getExtent(),c=a.getLabelModel(),u=[],d=Math.max((n||0)+1,1),f=l[0],v=s.count();f!==0&&d>1&&v/d>2&&(f=Math.round(Math.ceil(f/d)*d));var g=shouldShowAllLabels(a),y=c.get("showMinLabel")||g,_=c.get("showMaxLabel")||g;y&&f!==l[0]&&x(l[0]);for(var S=f;S<=l[1];S+=d)x(S);_&&S-d!==l[1]&&x(l[1]);function x(T){var w={value:T};u.push(r?T:{formattedLabel:o(w),rawLabel:s.getLabel(w),tickValue:T})}return u}function makeLabelsByCustomizedCategoryInterval(a,n,r){var o=a.scale,s=makeLabelFormatter(a),l=[];return each$f(o.getTicks(),function(c){var u=o.getLabel(c),d=c.value;n(c.value,u)&&l.push(r?d:{formattedLabel:s(c),rawLabel:u,tickValue:d})}),l}var NORMALIZED_EXTENT=[0,1],Axis=function(){function a(n,r,o){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=r,this._extent=o||[0,0]}return a.prototype.contain=function(n){var r=this._extent,o=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n>=o&&n<=s},a.prototype.containData=function(n){return this.scale.contain(n)},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(n,r){var o=this._extent;o[0]=n,o[1]=r},a.prototype.dataToCoord=function(n,r){var o=this._extent,s=this.scale;return n=s.normalize(n),this.onBand&&s.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,s.count())),linearMap$2(n,NORMALIZED_EXTENT,o,r)},a.prototype.coordToData=function(n,r){var o=this._extent,s=this.scale;this.onBand&&s.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,s.count()));var l=linearMap$2(n,o,NORMALIZED_EXTENT,r);return this.scale.scale(l)},a.prototype.pointToData=function(n,r){},a.prototype.getTicksCoords=function(n){n=n||{};var r=n.tickModel||this.getTickModel(),o=createAxisTicks(this,r),s=o.ticks,l=map$1(s,function(u){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(u):u),tickValue:u}},this),c=r.get("alignWithLabel");return fixOnBandTicksCoords(this,l,c,n.clamp),l},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),r=n.get("splitNumber");r>0&&r<100||(r=5);var o=this.scale.getMinorTicks(r),s=map$1(o,function(l){return map$1(l,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return s},a.prototype.getViewLabels=function(){return createAxisLabels(this).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var n=this._extent,r=this.scale.getExtent(),o=r[1]-r[0]+(this.onBand?1:0);o===0&&(o=1);var s=Math.abs(n[1]-n[0]);return Math.abs(s)/o},a.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},a}();function fixExtentWithBands(a,n){var r=a[1]-a[0],o=n,s=r/o/2;a[0]+=s,a[1]-=s}function fixOnBandTicksCoords(a,n,r,o){var s=n.length;if(!a.onBand||r||!s)return;var l=a.getExtent(),c,u;if(s===1)n[0].coord=l[0],c=n[1]={coord:l[1],tickValue:n[0].tickValue};else{var d=n[s-1].tickValue-n[0].tickValue,f=(n[s-1].coord-n[0].coord)/d;each$f(n,function(_){_.coord-=f/2});var v=a.scale.getExtent();u=1+v[1]-n[s-1].tickValue,c={coord:n[s-1].coord+f*u,tickValue:v[1]+1},n.push(c)}var g=l[0]>l[1];y(n[0].coord,l[0])&&(o?n[0].coord=l[0]:n.shift()),o&&y(l[0],n[0].coord)&&n.unshift({coord:l[0]}),y(l[1],c.coord)&&(o?c.coord=l[1]:n.pop()),o&&y(c.coord,l[1])&&n.push({coord:l[1]});function y(_,S){return _=round$3(_),S=round$3(S),g?_>S:_<S}}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(a,n,r,o,s){var l=r.width,c=r.height;switch(a){case"top":o.set(r.x+l/2,r.y-n),s.set(0,-1);break;case"bottom":o.set(r.x+l/2,r.y+c+n),s.set(0,1);break;case"left":o.set(r.x-n,r.y+c/2),s.set(-1,0);break;case"right":o.set(r.x+l+n,r.y+c/2),s.set(1,0);break}}function projectPointToArc(a,n,r,o,s,l,c,u,d){c-=a,u-=n;var f=Math.sqrt(c*c+u*u);c/=f,u/=f;var v=c*r+a,g=u*r+n;if(Math.abs(o-s)%PI2$2<1e-4)return d[0]=v,d[1]=g,f-r;if(l){var y=o;o=normalizeRadian(s),s=normalizeRadian(y)}else o=normalizeRadian(o),s=normalizeRadian(s);o>s&&(s+=PI2$2);var _=Math.atan2(u,c);if(_<0&&(_+=PI2$2),_>=o&&_<=s||_+PI2$2>=o&&_+PI2$2<=s)return d[0]=v,d[1]=g,f-r;var S=r*Math.cos(o)+a,x=r*Math.sin(o)+n,T=r*Math.cos(s)+a,w=r*Math.sin(s)+n,E=(S-c)*(S-c)+(x-u)*(x-u),P=(T-c)*(T-c)+(w-u)*(w-u);return E<P?(d[0]=S,d[1]=x,Math.sqrt(E)):(d[0]=T,d[1]=w,Math.sqrt(P))}function projectPointToLine(a,n,r,o,s,l,c,u){var d=s-a,f=l-n,v=r-a,g=o-n,y=Math.sqrt(v*v+g*g);v/=y,g/=y;var _=d*v+f*g,S=_/y;u&&(S=Math.min(Math.max(S,0),1)),S*=y;var x=c[0]=a+S*v,T=c[1]=n+S*g;return Math.sqrt((x-s)*(x-s)+(T-l)*(T-l))}function projectPointToRect(a,n,r,o,s,l,c){r<0&&(a=a+r,r=-r),o<0&&(n=n+o,o=-o);var u=a+r,d=n+o,f=c[0]=Math.min(Math.max(s,a),u),v=c[1]=Math.min(Math.max(l,n),d);return Math.sqrt((f-s)*(f-s)+(v-l)*(v-l))}var tmpPt=[];function nearestPointOnRect(a,n,r){var o=projectPointToRect(n.x,n.y,n.width,n.height,a.x,a.y,tmpPt);return r.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(a,n,r){for(var o=0,s=0,l=0,c=0,u,d,f=1/0,v=n.data,g=a.x,y=a.y,_=0;_<v.length;){var S=v[_++];_===1&&(o=v[_],s=v[_+1],l=o,c=s);var x=f;switch(S){case CMD$1.M:l=v[_++],c=v[_++],o=l,s=c;break;case CMD$1.L:x=projectPointToLine(o,s,v[_],v[_+1],g,y,tmpPt,!0),o=v[_++],s=v[_++];break;case CMD$1.C:x=cubicProjectPoint(o,s,v[_++],v[_++],v[_++],v[_++],v[_],v[_+1],g,y,tmpPt),o=v[_++],s=v[_++];break;case CMD$1.Q:x=quadraticProjectPoint(o,s,v[_++],v[_++],v[_],v[_+1],g,y,tmpPt),o=v[_++],s=v[_++];break;case CMD$1.A:var T=v[_++],w=v[_++],E=v[_++],P=v[_++],D=v[_++],L=v[_++];_+=1;var $=!!(1-v[_++]);u=Math.cos(D)*E+T,d=Math.sin(D)*P+w,_<=1&&(l=u,c=d);var O=(g-T)*P/E+T;x=projectPointToArc(T,w,P,D,D+L,$,O,y,tmpPt),o=Math.cos(D+L)*E+T,s=Math.sin(D+L)*P+w;break;case CMD$1.R:l=o=v[_++],c=s=v[_++];var B=v[_++],V=v[_++];x=projectPointToRect(l,c,B,V,g,y,tmpPt);break;case CMD$1.Z:x=projectPointToLine(o,s,l,c,g,y,tmpPt,!0),o=l,s=c;break}x<f&&(f=x,r.set(tmpPt[0],tmpPt[1]))}return f}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(a,n){if(a){var r=a.getTextGuideLine(),o=a.getTextContent();if(o&&r){var s=a.textGuideLineConfig||{},l=[[0,0],[0,0],[0,0]],c=s.candidates||DEFAULT_SEARCH_SPACE,u=o.getBoundingRect().clone();u.applyTransform(o.getComputedTransform());var d=1/0,f=s.anchor,v=a.getComputedTransform(),g=v&&invert([],v),y=n.get("length2")||0;f&&pt2.copy(f);for(var _=0;_<c.length;_++){var S=c[_];getCandidateAnchor(S,0,u,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,y),pt1.transform(g);var x=a.getBoundingRect(),T=f?f.distance(pt1):a instanceof Path?nearestPointOnPath(pt1,a.path,pt2):nearestPointOnRect(pt1,x,pt2);T<d&&(d=T,pt1.transform(v),pt2.transform(v),pt2.toArray(l[0]),pt1.toArray(l[1]),pt0.toArray(l[2]))}limitTurnAngle(l,n.get("minTurnAngle")),r.setShape({points:l})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(a,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var r=dir.len(),o=dir2.len();if(!(r<.001||o<.001)){dir.scale(1/r),dir2.scale(1/o);var s=dir.dot(dir2),l=Math.cos(n);if(l<s){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-n));var u=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(u))return;u<0?Point.copy(tmpProjPoint,pt1):u>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(a[1])}}}}function limitSurfaceAngle(a,n,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var o=dir.len(),s=dir2.len();if(!(o<.001||s<.001)){dir.scale(1/o),dir2.scale(1/s);var l=dir.dot(n),c=Math.cos(r);if(l<c){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var d=Math.PI/2,f=Math.acos(dir2.dot(n)),v=d+f-r;if(v>=d)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI/2-v));var g=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(g))return;g<0?Point.copy(tmpProjPoint,pt1):g>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(a[1])}}}}function setLabelLineState(a,n,r,o){var s=r==="normal",l=s?a:a.ensureState(r);l.ignore=n;var c=o.get("smooth");c&&c===!0&&(c=.3),l.shape=l.shape||{},c>0&&(l.shape.smooth=c);var u=o.getModel("lineStyle").getLineStyle();s?a.useStyle(u):l.style=u}function buildLabelLinePath(a,n){var r=n.smooth,o=n.points;if(o)if(a.moveTo(o[0][0],o[0][1]),r>0&&o.length>=3){var s=dist$1(o[0],o[1]),l=dist$1(o[1],o[2]);if(!s||!l){a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]);return}var c=Math.min(s,l)*r,u=lerp$2([],o[1],o[0],c/s),d=lerp$2([],o[1],o[2],c/l),f=lerp$2([],u,d,.5);a.bezierCurveTo(u[0],u[1],u[0],u[1],f[0],f[1]),a.bezierCurveTo(d[0],d[1],d[0],d[1],o[2][0],o[2][1])}else for(var v=1;v<o.length;v++)a.lineTo(o[v][0],o[v][1])}function setLabelLineStyle(a,n,r){var o=a.getTextGuideLine(),s=a.getTextContent();if(!s){o&&a.removeTextGuideLine();return}for(var l=n.normal,c=l.get("show"),u=s.ignore,d=0;d<DISPLAY_STATES.length;d++){var f=DISPLAY_STATES[d],v=n[f],g=f==="normal";if(v){var y=v.get("show"),_=g?u:retrieve2(s.states[f]&&s.states[f].ignore,u);if(_||!retrieve2(y,c)){var S=g?o:o&&o.states[f];S&&(S.ignore=!0),o&&setLabelLineState(o,!0,f,v);continue}o||(o=new Polyline$1,a.setTextGuideLine(o),!g&&(u||!c)&&setLabelLineState(o,!0,"normal",n.normal),a.stateProxy&&(o.stateProxy=a.stateProxy)),setLabelLineState(o,!1,f,v)}}if(o){defaults(o.style,r),o.style.fill=null;var x=l.get("showAbove"),T=a.textGuideLineConfig=a.textGuideLineConfig||{};T.showAbove=x||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(a,n){n=n||"labelLine";for(var r={normal:a.getModel(n)},o=0;o<SPECIAL_STATES.length;o++){var s=SPECIAL_STATES[o];r[s]=a.getModel([s,n])}return r}function prepareLayoutList(a){for(var n=[],r=0;r<a.length;r++){var o=a[r];if(!o.defaultAttr.ignore){var s=o.label,l=s.getComputedTransform(),c=s.getBoundingRect(),u=!l||l[1]<1e-5&&l[2]<1e-5,d=s.style.margin||0,f=c.clone();f.applyTransform(l),f.x-=d/2,f.y-=d/2,f.width+=d,f.height+=d;var v=u?new OrientedBoundingRect(c,l):null;n.push({label:s,labelLine:o.labelLine,rect:f,localRect:c,obb:v,priority:o.priority,defaultAttr:o.defaultAttr,layoutOption:o.computedLayoutOption,axisAligned:u,transform:l})}}return n}function shiftLayout(a,n,r,o,s,l){var c=a.length;if(c<2)return;a.sort(function(B,V){return B.rect[n]-V.rect[n]});for(var u=0,d,f=!1,v=0,g=0;g<c;g++){var y=a[g],_=y.rect;d=_[n]-u,d<0&&(_[n]-=d,y.label[n]-=d,f=!0);var S=Math.max(-d,0);v+=S,u=_[n]+_[r]}v>0&&l&&L(-v/c,0,c);var x=a[0],T=a[c-1],w,E;P(),w<0&&$(-w,.8),E<0&&$(E,.8),P(),D(w,E,1),D(E,w,-1),P(),w<0&&O(-w),E<0&&O(E);function P(){w=x.rect[n]-o,E=s-T.rect[n]-T.rect[r]}function D(B,V,F){if(B<0){var U=Math.min(V,-B);if(U>0){L(U*F,0,c);var G=U+B;G<0&&$(-G*F,1)}else $(-B*F,1)}}function L(B,V,F){B!==0&&(f=!0);for(var U=V;U<F;U++){var G=a[U],W=G.rect;W[n]+=B,G.label[n]+=B}}function $(B,V){for(var F=[],U=0,G=1;G<c;G++){var W=a[G-1].rect,j=Math.max(a[G].rect[n]-W[n]-W[r],0);F.push(j),U+=j}if(U){var K=Math.min(Math.abs(B)/U,V);if(B>0)for(var G=0;G<c-1;G++){var q=F[G]*K;L(q,0,G+1)}else for(var G=c-1;G>0;G--){var q=F[G-1]*K;L(-q,G,c)}}}function O(B){var V=B<0?-1:1;B=Math.abs(B);for(var F=Math.ceil(B/(c-1)),U=0;U<c-1;U++)if(V>0?L(F,0,U+1):L(-F,c-U-1,c),B-=F,B<=0)return}return f}function shiftLayoutOnX(a,n,r,o){return shiftLayout(a,"x","width",n,r,o)}function shiftLayoutOnY(a,n,r,o){return shiftLayout(a,"y","height",n,r,o)}function hideOverlap(a){var n=[];a.sort(function(x,T){return T.priority-x.priority});var r=new BoundingRect(0,0,0,0);function o(x){if(!x.ignore){var T=x.ensureState("emphasis");T.ignore==null&&(T.ignore=!1)}x.ignore=!0}for(var s=0;s<a.length;s++){var l=a[s],c=l.axisAligned,u=l.localRect,d=l.transform,f=l.label,v=l.labelLine;r.copy(l.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var g=l.obb,y=!1,_=0;_<n.length;_++){var S=n[_];if(r.intersect(S.rect)){if(c&&S.axisAligned){y=!0;break}if(S.obb||(S.obb=new OrientedBoundingRect(S.localRect,S.transform)),g||(g=new OrientedBoundingRect(u,d)),g.intersect(S.obb)){y=!0;break}}}y?(o(f),v&&o(v)):(f.attr("ignore",l.defaultAttr.ignore),v&&v.attr("ignore",l.defaultAttr.labelGuideIgnore),n.push(l))}}function cloneArr(a){if(a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].slice());return n}}function prepareLayoutCallbackParams(a,n){var r=a.label,o=n&&n.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(a,n,r){for(var o=0;o<r.length;o++){var s=r[o];n[s]!=null&&(a[s]=n[s])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(n,r,o,s,l){var c=s.style,u=s.__hostTarget,d=u.textConfig||{},f=s.getComputedTransform(),v=s.getBoundingRect().plain();BoundingRect.applyTransform(v,v,f),f?dummyTransformable.setLocalTransform(f):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var g=s.__hostTarget,y;if(g){y=g.getBoundingRect().plain();var _=g.getComputedTransform();BoundingRect.applyTransform(y,y,_)}var S=y&&g.getTextGuideLine();this._labelList.push({label:s,labelLine:S,seriesModel:o,dataIndex:n,dataType:r,layoutOption:l,computedLayoutOption:null,rect:v,hostRect:y,priority:y?y.width*y.height:0,defaultAttr:{ignore:s.ignore,labelGuideIgnore:S&&S.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:s.cursor,attachedPos:d.position,attachedRot:d.rotation}})},a.prototype.addLabelsOfSeries=function(n){var r=this;this._chartViewList.push(n);var o=n.__model,s=o.get("labelLayout");(isFunction(s)||keys(s).length)&&n.group.traverse(function(l){if(l.ignore)return!0;var c=l.getTextContent(),u=getECData(l);c&&!c.disableLabelLayout&&r._addLabel(u.dataIndex,u.dataType,o,c,s)})},a.prototype.updateLayoutConfig=function(n){var r=n.getWidth(),o=n.getHeight();function s(P,D){return function(){updateLabelLinePoints(P,D)}}for(var l=0;l<this._labelList.length;l++){var c=this._labelList[l],u=c.label,d=u.__hostTarget,f=c.defaultAttr,v=void 0;isFunction(c.layoutOption)?v=c.layoutOption(prepareLayoutCallbackParams(c,d)):v=c.layoutOption,v=v||{},c.computedLayoutOption=v;var g=Math.PI/180;d&&d.setTextConfig({local:!1,position:v.x!=null||v.y!=null?null:f.attachedPos,rotation:v.rotate!=null?v.rotate*g:f.attachedRot,offset:[v.dx||0,v.dy||0]});var y=!1;if(v.x!=null?(u.x=parsePercent(v.x,r),u.setStyle("x",0),y=!0):(u.x=f.x,u.setStyle("x",f.style.x)),v.y!=null?(u.y=parsePercent(v.y,o),u.setStyle("y",0),y=!0):(u.y=f.y,u.setStyle("y",f.style.y)),v.labelLinePoints){var _=d.getTextGuideLine();_&&(_.setShape({points:v.labelLinePoints}),y=!1)}var S=labelLayoutInnerStore(u);S.needsUpdateLabelLine=y,u.rotation=v.rotate!=null?v.rotate*g:f.rotation,u.scaleX=f.scaleX,u.scaleY=f.scaleY;for(var x=0;x<LABEL_OPTION_TO_STYLE_KEYS.length;x++){var T=LABEL_OPTION_TO_STYLE_KEYS[x];u.setStyle(T,v[T]!=null?v[T]:f.style[T])}if(v.draggable){if(u.draggable=!0,u.cursor="move",d){var w=c.seriesModel;if(c.dataIndex!=null){var E=c.seriesModel.getData(c.dataType);w=E.getItemModel(c.dataIndex)}u.on("drag",s(d,w.getModel("labelLine")))}}else u.off("drag"),u.cursor=f.cursor}},a.prototype.layout=function(n){var r=n.getWidth(),o=n.getHeight(),s=prepareLayoutList(this._labelList),l=filter(s,function(d){return d.layoutOption.moveOverlap==="shiftX"}),c=filter(s,function(d){return d.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(l,0,r),shiftLayoutOnY(c,0,o);var u=filter(s,function(d){return d.layoutOption.hideOverlap});hideOverlap(u)},a.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(r){var o=r.__model,s=r.ignoreLabelLineUpdate,l=o.isAnimationEnabled();r.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var u=!s,d=c.getTextContent();!u&&d&&(u=labelLayoutInnerStore(d).needsUpdateLabelLine),u&&n._updateLabelLine(c,o),l&&n._animateLabels(c,o)})})},a.prototype._updateLabelLine=function(n,r){var o=n.getTextContent(),s=getECData(n),l=s.dataIndex;if(o&&l!=null){var c=r.getData(s.dataType),u=c.getItemModel(l),d={},f=c.getItemVisual(l,"style");if(f){var v=c.getVisual("drawType");d.stroke=f[v]}var g=u.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(u),d),updateLabelLinePoints(n,g)}},a.prototype._animateLabels=function(n,r){var o=n.getTextContent(),s=n.getTextGuideLine();if(o&&(n.forceLabelAnimation||!o.ignore&&!o.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var l=labelLayoutInnerStore(o),c=l.oldLayout,u=getECData(n),d=u.dataIndex,f={x:o.x,y:o.y,rotation:o.rotation},v=r.getData(u.dataType);if(c){o.attr(c);var y=n.prevStates;y&&(indexOf(y,"select")>=0&&o.attr(l.oldLayoutSelect),indexOf(y,"emphasis")>=0&&o.attr(l.oldLayoutEmphasis)),updateProps$1(o,f,r,d)}else if(o.attr(f),!labelInner(o).valueAnimation){var g=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:g}},r,d)}if(l.oldLayout=f,o.states.select){var _=l.oldLayoutSelect={};extendWithKeys(_,f,LABEL_LAYOUT_PROPS),extendWithKeys(_,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var S=l.oldLayoutEmphasis={};extendWithKeys(S,f,LABEL_LAYOUT_PROPS),extendWithKeys(S,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,d,v,r,r)}if(s&&!s.ignore&&!s.invisible){var l=labelLineAnimationStore(s),c=l.oldLayout,x={points:s.shape.points};c?(s.attr({shape:c}),updateProps$1(s,{shape:x},r)):(s.setShape(x),s.style.strokePercent=0,initProps(s,{style:{strokePercent:1}},r)),l.oldLayout=x}},a}(),getLabelManager=makeInner();function installLabelLayout(a){a.registerUpdateLifecycle("series:beforeupdate",function(n,r,o){var s=getLabelManager(r).labelManager;s||(s=getLabelManager(r).labelManager=new LabelManager),s.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(n,r,o){var s=getLabelManager(r).labelManager;o.updatedSeries.forEach(function(l){s.addLabelsOfSeries(r.getViewOfSeriesModel(l))}),s.updateLayoutConfig(r),s.layout(r),s.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function a(){}return a.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},a.prototype.moveTo=function(n,r){this._add("M",n,r)},a.prototype.lineTo=function(n,r){this._add("L",n,r)},a.prototype.bezierCurveTo=function(n,r,o,s,l,c){this._add("C",n,r,o,s,l,c)},a.prototype.quadraticCurveTo=function(n,r,o,s){this._add("Q",n,r,o,s)},a.prototype.arc=function(n,r,o,s,l,c){this.ellipse(n,r,o,o,0,s,l,c)},a.prototype.ellipse=function(n,r,o,s,l,c,u,d){var f=u-c,v=!d,g=Math.abs(f),y=isAroundZero(g-PI2$1)||(v?f>=PI2$1:-f>=PI2$1),_=f>0?f%PI2$1:f%PI2$1+PI2$1,S=!1;y?S=!0:isAroundZero(g)?S=!1:S=_>=PI$4==!!v;var x=n+o*mathCos(c),T=r+s*mathSin(c);this._start&&this._add("M",x,T);var w=Math.round(l*degree);if(y){var E=1/this._p,P=(v?1:-1)*(PI2$1-E);this._add("A",o,s,w,1,+v,n+o*mathCos(c+P),r+s*mathSin(c+P)),E>.01&&this._add("A",o,s,w,0,+v,x,T)}else{var D=n+o*mathCos(u),L=r+s*mathSin(u);this._add("A",o,s,w,+S,+v,D,L)}},a.prototype.rect=function(n,r,o,s){this._add("M",n,r),this._add("l",o,0),this._add("l",0,s),this._add("l",-o,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(n,r,o,s,l,c,u,d,f){for(var v=[],g=this._p,y=1;y<arguments.length;y++){var _=arguments[y];if(isNaN(_)){this._invalid=!0;return}v.push(Math.round(_*g)/g)}this._d.push(n+v.join(" ")),this._start=n==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),NONE="none",mathRound=Math.round;function pathHasFill(a){var n=a.fill;return n!=null&&n!==NONE}function pathHasStroke(a){var n=a.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(a){return"stroke-"+a.toLowerCase()});function mapStyleToAttrs(a,n,r,o){var s=n.opacity==null?1:n.opacity;if(r instanceof ZRImage){a("opacity",s);return}if(pathHasFill(n)){var l=normalizeColor(n.fill);a("fill",l.color);var c=n.fillOpacity!=null?n.fillOpacity*l.opacity*s:l.opacity*s;c<1&&a("fill-opacity",c)}else a("fill",NONE);if(pathHasStroke(n)){var u=normalizeColor(n.stroke);a("stroke",u.color);var d=n.strokeNoScale?r.getLineScale():1,f=d?(n.lineWidth||0)/d:0,v=n.strokeOpacity!=null?n.strokeOpacity*u.opacity*s:u.opacity*s,g=n.strokeFirst;if(f!==1&&a("stroke-width",f),g&&a("paint-order",g?"stroke":"fill"),v<1&&a("stroke-opacity",v),n.lineDash){var y=getLineDash(r),_=y[0],S=y[1];_&&(S=mathRound(S||0),a("stroke-dasharray",_.join(",")),(S||o)&&a("stroke-dashoffset",S))}for(var x=0;x<strokeProps.length;x++){var T=strokeProps[x];if(n[T]!==DEFAULT_PATH_STYLE[T]){var w=n[T]||DEFAULT_PATH_STYLE[T];w&&a(svgStrokeProps[x],w)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(a){return document.createElementNS(SVGNS,a)}function createVNode(a,n,r,o,s){return{tag:a,attrs:r||{},children:o,text:s,key:n}}function createElementOpen(a,n){var r=[];if(n)for(var o in n){var s=n[o],l=o;s!==!1&&(s!==!0&&s!=null&&(l+='="'+s+'"'),r.push(l))}return"<"+a+" "+r.join(" ")+">"}function createElementClose(a){return"</"+a+">"}function vNodeToString(a,n){n=n||{};var r=n.newline?`
`:"";function o(s){var l=s.children,c=s.tag,u=s.attrs,d=s.text;return createElementOpen(c,u)+(c!=="style"?encodeHTML(d):d||"")+(l?""+r+map$1(l,function(f){return o(f)}).join(r)+r:"")+createElementClose(c)}return o(a)}function getCssString(a,n,r){r=r||{};var o=r.newline?`
`:"",s=" {"+o,l=o+"}",c=map$1(keys(a),function(d){return d+s+map$1(keys(a[d]),function(f){return f+":"+a[d][f]+";"}).join(o)+l}).join(o),u=map$1(keys(n),function(d){return"@keyframes "+d+s+map$1(keys(n[d]),function(f){return f+s+map$1(keys(n[d][f]),function(v){var g=n[d][f][v];return v==="d"&&(g='path("'+g+'")'),v+":"+g+";"}).join(o)+l}).join(o)+l}).join(o);return!c&&!u?"":["<![CDATA[",c,u,"]]>"].join(o)}function createBrushScope(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(a,n,r,o){return createVNode("svg","root",{width:a,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+a+" "+n:!1},r)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(a,n,r){var o=extend({},a.shape);extend(o,n),a.buildPath(r,o);var s=new SVGPathRebuilder;return s.reset(getPathPrecision(a)),r.rebuildPath(s,1),s.generateStr(),s.getStr()}function setTransformOrigin(a,n){var r=n.originX,o=n.originY;(r||o)&&(a[transformOriginKey]=r+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(a,n){var r=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[r]=a,r}function createCompoundPathCSSAnimation(a,n,r){var o=a.shape.paths,s={},l,c;if(each$f(o,function(d){var f=createBrushScope(r.zrId);f.animation=!0,createCSSAnimation(d,{},f,!0);var v=f.cssAnims,g=f.cssNodes,y=keys(v),_=y.length;if(_){c=y[_-1];var S=v[c];for(var x in S){var T=S[x];s[x]=s[x]||{d:""},s[x].d+=T.d||""}for(var w in g){var E=g[w].animation;E.indexOf(c)>=0&&(l=E)}}}),!!l){n.d=!1;var u=addAnimation(s,r);return l.replace(c,u)}}function getEasingFunc(a){return isString(a)?EASING_MAP[a]?"cubic-bezier("+EASING_MAP[a]+")":createCubicEasingFunc(a)?a:"":""}function createCSSAnimation(a,n,r,o){var s=a.animators,l=s.length,c=[];if(a instanceof CompoundPath){var u=createCompoundPathCSSAnimation(a,n,r);if(u)c.push(u);else if(!l)return}else if(!l)return;for(var d={},f=0;f<l;f++){var v=s[f],g=[v.getMaxTime()/1e3+"s"],y=getEasingFunc(v.getClip().easing),_=v.getDelay();y?g.push(y):g.push("linear"),_&&g.push(_/1e3+"s"),v.getLoop()&&g.push("infinite");var S=g.join(" ");d[S]=d[S]||[S,[]],d[S][1].push(v)}function x(E){var P=E[1],D=P.length,L={},$={},O={},B="animation-timing-function";function V(me,_e,Te){for(var Le=me.getTracks(),Ge=me.getMaxTime(),se=0;se<Le.length;se++){var J=Le[se];if(J.needsAnimate()){var xe=J.keyframes,De=J.propName;if(Te&&(De=Te(De)),De)for(var Ae=0;Ae<xe.length;Ae++){var Ie=xe[Ae],ze=Math.round(Ie.time/Ge*100)+"%",Fe=getEasingFunc(Ie.easing),ae=Ie.rawValue;(isString(ae)||isNumber(ae))&&(_e[ze]=_e[ze]||{},_e[ze][De]=Ie.rawValue,Fe&&(_e[ze][B]=Fe))}}}}for(var F=0;F<D;F++){var U=P[F],G=U.targetName;G?G==="shape"&&V(U,$):!o&&V(U,L)}for(var W in L){var j={};copyTransform(j,a),extend(j,L[W]);var K=getSRTTransformString(j),q=L[W][B];O[W]=K?{transform:K}:{},setTransformOrigin(O[W],j),q&&(O[W][B]=q)}var ie,ee=!0;for(var W in $){O[W]=O[W]||{};var he=!ie,q=$[W][B];he&&(ie=new PathProxy);var pe=ie.len();ie.reset(),O[W].d=buildPathString(a,$[W],ie);var ce=ie.len();if(!he&&pe!==ce){ee=!1;break}q&&(O[W][B]=q)}if(!ee)for(var W in O)delete O[W].d;if(!o)for(var F=0;F<D;F++){var U=P[F],G=U.targetName;G==="style"&&V(U,O,function(Le){return ANIMATE_STYLE_MAP[Le]})}for(var ye=keys(O),we=!0,ge,F=1;F<ye.length;F++){var Se=ye[F-1],$e=ye[F];if(O[Se][transformOriginKey]!==O[$e][transformOriginKey]){we=!1;break}ge=O[Se][transformOriginKey]}if(we&&ge){for(var W in O)O[W][transformOriginKey]&&delete O[W][transformOriginKey];n[transformOriginKey]=ge}if(filter(ye,function(me){return keys(O[me]).length>0}).length){var oe=addAnimation(O,r);return oe+" "+E[0]+" both"}}for(var T in d){var u=x(d[T]);u&&c.push(u)}if(c.length){var w=r.zrId+"-cls-"+getClassId();r.cssNodes["."+w]={animation:c.join(",")},n.class=w}}function createCSSEmphasis(a,n,r){if(!a.ignore)if(a.isSilent()){var o={"pointer-events":"none"};setClassAttribute(o,n,r)}else{var s=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},l=s.fill;if(!l){var c=a.style&&a.style.fill,u=a.states.select&&a.states.select.style&&a.states.select.style.fill,d=a.currentStates.indexOf("select")>=0&&u||c;d&&(l=liftColor(d))}var f=s.lineWidth;if(f){var v=!s.strokeNoScale&&a.transform?a.transform[0]:1;f=f/v}var o={cursor:"pointer"};l&&(o.fill=l),s.stroke&&(o.stroke=s.stroke),f&&(o["stroke-width"]=f),setClassAttribute(o,n,r)}}function setClassAttribute(a,n,r,o){var s=JSON.stringify(a),l=r.cssStyleCache[s];l||(l=r.zrId+"-cls-"+getClassId(),r.cssStyleCache[s]=l,r.cssNodes["."+l+":hover"]=a),n.class=n.class?n.class+" "+l:l}var round$1=Math.round;function isImageLike(a){return a&&isString(a.src)}function isCanvasLike(a){return a&&isFunction(a.toDataURL)}function setStyleAttrs(a,n,r,o){mapStyleToAttrs(function(s,l){var c=s==="fill"||s==="stroke";c&&isGradient(l)?setGradient(n,a,s,o):c&&isPattern(l)?setPattern(r,a,s,o):a[s]=l,c&&o.ssr&&l==="none"&&(a["pointer-events"]="visible")},n,r,!1),setShadow(r,a,o)}function setMetaData(a,n){var r=getElementSSRData(n);r&&(r.each(function(o,s){o!=null&&(a[(META_DATA_PREFIX+s).toLowerCase()]=o+"")}),n.isSilent()&&(a[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(a){return isAroundZero(a[0]-1)&&isAroundZero(a[1])&&isAroundZero(a[2])&&isAroundZero(a[3]-1)}function noTranslate(a){return isAroundZero(a[4])&&isAroundZero(a[5])}function setTransform(a,n,r){if(n&&!(noTranslate(n)&&noRotateScale(n))){var o=1e4;a.transform=noRotateScale(n)?"translate("+round$1(n[4]*o)/o+" "+round$1(n[5]*o)/o+")":getMatrixStr(n)}}function convertPolyShape(a,n,r){for(var o=a.points,s=[],l=0;l<o.length;l++)s.push(round$1(o[l][0]*r)/r),s.push(round$1(o[l][1]*r)/r);n.points=s.join(" ")}function validatePolyShape(a){return!a.smooth}function createAttrsConvert(a){var n=map$1(a,function(r){return typeof r=="string"?[r,r]:r});return function(r,o,s){for(var l=0;l<n.length;l++){var c=n[l],u=r[c[0]];u!=null&&(o[c[1]]=round$1(u*s)/s)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(a){for(var n=a.animators,r=0;r<n.length;r++)if(n[r].targetName==="shape")return!0;return!1}function brushSVGPath(a,n){var r=a.style,o=a.shape,s=builtinShapesDef[a.type],l={},c=n.animation,u="path",d=a.style.strokePercent,f=n.compress&&getPathPrecision(a)||4;if(s&&!n.willUpdate&&!(s[1]&&!s[1](o))&&!(c&&hasShapeAnimation(a))&&!(d<1)){u=a.type;var v=Math.pow(10,f);s[0](o,l,v)}else{var g=!a.path||a.shapeChanged();a.path||a.createPathProxy();var y=a.path;g&&(y.beginPath(),a.buildPath(y,a.shape),a.pathUpdated());var _=y.getVersion(),S=a,x=S.__svgPathBuilder;(S.__svgPathVersion!==_||!x||d!==S.__svgPathStrokePercent)&&(x||(x=S.__svgPathBuilder=new SVGPathRebuilder),x.reset(f),y.rebuildPath(x,d),x.generateStr(),S.__svgPathVersion=_,S.__svgPathStrokePercent=d),l.d=x.getStr()}return setTransform(l,a.transform),setStyleAttrs(l,r,a,n),setMetaData(l,a),n.animation&&createCSSAnimation(a,l,n),n.emphasis&&createCSSEmphasis(a,l,n),createVNode(u,a.id+"",l)}function brushSVGImage(a,n){var r=a.style,o=r.image;if(o&&!isString(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var s=r.x||0,l=r.y||0,c=r.width,u=r.height,d={href:o,width:c,height:u};return s&&(d.x=s),l&&(d.y=l),setTransform(d,a.transform),setStyleAttrs(d,r,a,n),setMetaData(d,a),n.animation&&createCSSAnimation(a,d,n),createVNode("image",a.id+"",d)}}function brushSVGTSpan(a,n){var r=a.style,o=r.text;if(o!=null&&(o+=""),!(!o||isNaN(r.x)||isNaN(r.y))){var s=r.font||DEFAULT_FONT,l=r.x||0,c=adjustTextY$1(r.y||0,getLineHeight(s),r.textBaseline),u=TEXT_ALIGN_TO_ANCHOR[r.textAlign]||r.textAlign,d={"dominant-baseline":"central","text-anchor":u};if(hasSeparateFont(r)){var f="",v=r.fontStyle,g=parseFontSize(r.fontSize);if(!parseFloat(g))return;var y=r.fontFamily||DEFAULT_FONT_FAMILY,_=r.fontWeight;f+="font-size:"+g+";font-family:"+y+";",v&&v!=="normal"&&(f+="font-style:"+v+";"),_&&_!=="normal"&&(f+="font-weight:"+_+";"),d.style=f}else d.style="font: "+s;return o.match(/\s/)&&(d["xml:space"]="preserve"),l&&(d.x=l),c&&(d.y=c),setTransform(d,a.transform),setStyleAttrs(d,r,a,n),setMetaData(d,a),n.animation&&createCSSAnimation(a,d,n),createVNode("text",a.id+"",d,void 0,o)}}function brush(a,n){if(a instanceof Path)return brushSVGPath(a,n);if(a instanceof ZRImage)return brushSVGImage(a,n);if(a instanceof TSpan)return brushSVGTSpan(a,n)}function setShadow(a,n,r){var o=a.style;if(hasShadow(o)){var s=getShadowKey(a),l=r.shadowCache,c=l[s];if(!c){var u=a.getGlobalScale(),d=u[0],f=u[1];if(!d||!f)return;var v=o.shadowOffsetX||0,g=o.shadowOffsetY||0,y=o.shadowBlur,_=normalizeColor(o.shadowColor),S=_.opacity,x=_.color,T=y/2/d,w=y/2/f,E=T+" "+w;c=r.zrId+"-s"+r.shadowIdx++,r.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:v/d,dy:g/f,stdDeviation:E,"flood-color":x,"flood-opacity":S})]),l[s]=c}n.filter=getIdURL(c)}}function setGradient(a,n,r,o){var s=a[r],l,c={gradientUnits:s.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(s))l="linearGradient",c.x1=s.x,c.y1=s.y,c.x2=s.x2,c.y2=s.y2;else if(isRadialGradient(s))l="radialGradient",c.cx=retrieve2(s.x,.5),c.cy=retrieve2(s.y,.5),c.r=retrieve2(s.r,.5);else return;for(var u=s.colorStops,d=[],f=0,v=u.length;f<v;++f){var g=round4(u[f].offset)*100+"%",y=u[f].color,_=normalizeColor(y),S=_.color,x=_.opacity,T={offset:g};T["stop-color"]=S,x<1&&(T["stop-opacity"]=x),d.push(createVNode("stop",f+"",T))}var w=createVNode(l,"",c,d),E=vNodeToString(w),P=o.gradientCache,D=P[E];D||(D=o.zrId+"-g"+o.gradientIdx++,P[E]=D,c.id=D,o.defs[D]=createVNode(l,D,c,d)),n[r]=getIdURL(D)}function setPattern(a,n,r,o){var s=a.style[r],l=a.getBoundingRect(),c={},u=s.repeat,d=u==="no-repeat",f=u==="repeat-x",v=u==="repeat-y",g;if(isImagePattern(s)){var y=s.imageWidth,_=s.imageHeight,S=void 0,x=s.image;if(isString(x)?S=x:isImageLike(x)?S=x.src:isCanvasLike(x)&&(S=x.toDataURL()),typeof Image>"u"){var T="Image width/height must been given explictly in svg-ssr renderer.";assert(y,T),assert(_,T)}else if(y==null||_==null){var w=function(F,U){if(F){var G=F.elm,W=y||U.width,j=_||U.height;F.tag==="pattern"&&(f?(j=1,W/=l.width):v&&(W=1,j/=l.height)),F.attrs.width=W,F.attrs.height=j,G&&(G.setAttribute("width",W),G.setAttribute("height",j))}},E=createOrUpdateImage(S,null,a,function(F){d||w($,F),w(g,F)});E&&E.width&&E.height&&(y=y||E.width,_=_||E.height)}g=createVNode("image","img",{href:S,width:y,height:_}),c.width=y,c.height=_}else s.svgElement&&(g=clone$4(s.svgElement),c.width=s.svgWidth,c.height=s.svgHeight);if(g){var P,D;d?P=D=1:f?(D=1,P=c.width/l.width):v?(P=1,D=c.height/l.height):c.patternUnits="userSpaceOnUse",P!=null&&!isNaN(P)&&(c.width=P),D!=null&&!isNaN(D)&&(c.height=D);var L=getSRTTransformString(s);L&&(c.patternTransform=L);var $=createVNode("pattern","",c,[g]),O=vNodeToString($),B=o.patternCache,V=B[O];V||(V=o.zrId+"-p"+o.patternIdx++,B[O]=V,c.id=V,$=o.defs[V]=createVNode("pattern",V,c,[g])),n[r]=getIdURL(V)}}function setClipPath(a,n,r){var o=r.clipPathCache,s=r.defs,l=o[a.id];if(!l){l=r.zrId+"-c"+r.clipPathIdx++;var c={id:l};o[a.id]=l,s[l]=createVNode("clipPath",l,c,[brushSVGPath(a,r)])}n["clip-path"]=getIdURL(l)}function createTextNode(a){return document.createTextNode(a)}function insertBefore(a,n,r){a.insertBefore(n,r)}function removeChild(a,n){a.removeChild(n)}function appendChild(a,n){a.appendChild(n)}function parentNode(a){return a.parentNode}function nextSibling(a){return a.nextSibling}function setTextContent(a,n){a.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(a){return a===void 0}function isDef(a){return a!==void 0}function createKeyToOldIdx(a,n,r){for(var o={},s=n;s<=r;++s){var l=a[s].key;l!==void 0&&(o[l]=s)}return o}function sameVnode(a,n){var r=a.key===n.key,o=a.tag===n.tag;return o&&r}function createElm(a){var n,r=a.children,o=a.tag;if(isDef(o)){var s=a.elm=createElement(o);if(updateAttrs(emptyNode,a),isArray$1(r))for(n=0;n<r.length;++n){var l=r[n];l!=null&&appendChild(s,createElm(l))}else isDef(a.text)&&!isObject$3(a.text)&&appendChild(s,createTextNode(a.text))}else a.elm=createTextNode(a.text);return a.elm}function addVnodes(a,n,r,o,s){for(;o<=s;++o){var l=r[o];l!=null&&insertBefore(a,createElm(l),n)}}function removeVnodes(a,n,r,o){for(;r<=o;++r){var s=n[r];if(s!=null)if(isDef(s.tag)){var l=parentNode(s.elm);removeChild(l,s.elm)}else removeChild(a,s.elm)}}function updateAttrs(a,n){var r,o=n.elm,s=a&&a.attrs||{},l=n.attrs||{};if(s!==l){for(r in l){var c=l[r],u=s[r];u!==c&&(c===!0?o.setAttribute(r,""):c===!1?o.removeAttribute(r):r==="style"?o.style.cssText=c:r.charCodeAt(0)!==xChar?o.setAttribute(r,c):r==="xmlns:xlink"||r==="xmlns"?o.setAttributeNS(XMLNS,r,c):r.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,r,c):r.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,r,c):o.setAttribute(r,c))}for(r in s)r in l||o.removeAttribute(r)}}function updateChildren(a,n,r){for(var o=0,s=0,l=n.length-1,c=n[0],u=n[l],d=r.length-1,f=r[0],v=r[d],g,y,_,S;o<=l&&s<=d;)c==null?c=n[++o]:u==null?u=n[--l]:f==null?f=r[++s]:v==null?v=r[--d]:sameVnode(c,f)?(patchVnode(c,f),c=n[++o],f=r[++s]):sameVnode(u,v)?(patchVnode(u,v),u=n[--l],v=r[--d]):sameVnode(c,v)?(patchVnode(c,v),insertBefore(a,c.elm,nextSibling(u.elm)),c=n[++o],v=r[--d]):sameVnode(u,f)?(patchVnode(u,f),insertBefore(a,u.elm,c.elm),u=n[--l],f=r[++s]):(isUndef(g)&&(g=createKeyToOldIdx(n,o,l)),y=g[f.key],isUndef(y)?insertBefore(a,createElm(f),c.elm):(_=n[y],_.tag!==f.tag?insertBefore(a,createElm(f),c.elm):(patchVnode(_,f),n[y]=void 0,insertBefore(a,_.elm,c.elm))),f=r[++s]);(o<=l||s<=d)&&(o>l?(S=r[d+1]==null?null:r[d+1].elm,addVnodes(a,S,r,s,d)):removeVnodes(a,n,o,l))}function patchVnode(a,n){var r=n.elm=a.elm,o=a.children,s=n.children;a!==n&&(updateAttrs(a,n),isUndef(n.text)?isDef(o)&&isDef(s)?o!==s&&updateChildren(r,o,s):isDef(s)?(isDef(a.text)&&setTextContent(r,""),addVnodes(r,null,s,0,s.length-1)):isDef(o)?removeVnodes(r,o,0,o.length-1):isDef(a.text)&&setTextContent(r,""):a.text!==n.text&&(isDef(o)&&removeVnodes(r,o,0,o.length-1),setTextContent(r,n.text)))}function patch(a,n){if(sameVnode(a,n))patchVnode(a,n);else{var r=a.elm,o=parentNode(r);createElm(n),o!==null&&(insertBefore(o,n.elm,nextSibling(r)),removeVnodes(o,[a],0,0))}return n}var svgId=0,SVGPainter=function(){function a(n,r,o){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=r,this._opts=o=extend({},o),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),n&&!o.ssr){var s=this._viewport=document.createElement("div");s.style.cssText="position:relative;overflow:hidden";var l=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),s.appendChild(l),n.appendChild(s)}this.resize(o.width,o.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},a.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},a.prototype.renderToVNode=function(n){n=n||{};var r=this.storage.getDisplayList(!0),o=this._width,s=this._height,l=createBrushScope(this._id);l.animation=n.animation,l.willUpdate=n.willUpdate,l.compress=n.compress,l.emphasis=n.emphasis,l.ssr=this._opts.ssr;var c=[],u=this._bgVNode=createBackgroundVNode(o,s,this._backgroundColor,l);u&&c.push(u);var d=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(r,l,d?d.children:c),d&&c.push(d);var f=map$1(keys(l.defs),function(y){return l.defs[y]});if(f.length&&c.push(createVNode("defs","defs",{},f)),n.animation){var v=getCssString(l.cssNodes,l.cssAnims,{newline:!0});if(v){var g=createVNode("style","stl",{},[],v);c.push(g)}}return createSVGVNode(o,s,c,n.useViewBox)},a.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(n){this._backgroundColor=n},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(n,r,o){for(var s=n.length,l=[],c=0,u,d,f=0,v=0;v<s;v++){var g=n[v];if(!g.invisible){var y=g.__clipPaths,_=y&&y.length||0,S=d&&d.length||0,x=void 0;for(x=Math.max(_-1,S-1);x>=0&&!(y&&d&&y[x]===d[x]);x--);for(var T=S-1;T>x;T--)c--,u=l[c-1];for(var w=x+1;w<_;w++){var E={};setClipPath(y[w],E,r);var P=createVNode("g","clip-g-"+f++,E,[]);(u?u.children:o).push(P),l[c++]=P,u=P}d=y;var D=brush(g,r);D&&(u?u.children:o).push(D)}}},a.prototype.resize=function(n,r){var o=this._opts,s=this.root,l=this._viewport;if(n!=null&&(o.width=n),r!=null&&(o.height=r),s&&l&&(l.style.display="none",n=getSize$1(s,0,o),r=getSize$1(s,1,o),l.style.display=""),this._width!==n||this._height!==r){if(this._width=n,this._height=r,l){var c=l.style;c.width=n+"px",c.height=r+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var u=this._svgDom;u&&(u.setAttribute("width",n),u.setAttribute("height",r));var d=this._bgVNode&&this._bgVNode.elm;d&&(d.setAttribute("width",n),d.setAttribute("height",r))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(n){var r=this.renderToString(),o="data:image/svg+xml;";return n?(r=encodeBase64(r),r&&o+"base64,"+r):o+"charset=UTF-8,"+encodeURIComponent(r)},a}();function createMethodNotSupport(a){return function(){}}function createBackgroundVNode(a,n,r,o){var s;if(r&&r!=="none")if(s=createVNode("rect","bg",{width:a,height:n,x:"0",y:"0"}),isGradient(r))setGradient({fill:r},s.attrs,"fill",o);else if(isPattern(r))setPattern({style:{fill:r},dirty:noop,getBoundingRect:function(){return{width:a,height:n}}},s.attrs,"fill",o);else{var l=normalizeColor(r),c=l.color,u=l.opacity;s.attrs.fill=c,u<1&&(s.attrs["fill-opacity"]=u)}return s}function install$S(a){a.registerPainter("svg",SVGPainter)}function createDom(a,n,r){var o=platformApi.createCanvas(),s=n.getWidth(),l=n.getHeight(),c=o.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=s+"px",c.height=l+"px",o.setAttribute("data-zr-dom-id",a)),o.width=s*r,o.height=l*r,o}var Layer=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this)||this;l.motionBlur=!1,l.lastFrameAlpha=.7,l.dpr=1,l.virtual=!1,l.config={},l.incremental=!1,l.zlevel=0,l.maxRepaintRectCount=5,l.__dirty=!0,l.__firstTimePaint=!0,l.__used=!1,l.__drawIndex=0,l.__startIndex=0,l.__endIndex=0,l.__prevStartIndex=null,l.__prevEndIndex=null;var c;s=s||devicePixelRatio,typeof r=="string"?c=createDom(r,o,s):isObject$3(r)&&(c=r,r=c.id),l.id=r,l.dom=c;var u=c.style;return u&&(disableUserSelect(c),c.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),l.painter=o,l.dpr=s,l}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},n.prototype.createRepaintRects=function(r,o,s,l){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],u=this.maxRepaintRectCount,d=!1,f=new BoundingRect(0,0,0,0);function v(E){if(!(!E.isFinite()||E.isZero()))if(c.length===0){var P=new BoundingRect(0,0,0,0);P.copy(E),c.push(P)}else{for(var D=!1,L=1/0,$=0,O=0;O<c.length;++O){var B=c[O];if(B.intersect(E)){var V=new BoundingRect(0,0,0,0);V.copy(B),V.union(E),c[O]=V,D=!0;break}else if(d){f.copy(E),f.union(B);var F=E.width*E.height,U=B.width*B.height,G=f.width*f.height,W=G-F-U;W<L&&(L=W,$=O)}}if(d&&(c[$].union(E),D=!0),!D){var P=new BoundingRect(0,0,0,0);P.copy(E),c.push(P)}d||(d=c.length>=u)}}for(var g=this.__startIndex;g<this.__endIndex;++g){var y=r[g];if(y){var _=y.shouldBePainted(s,l,!0,!0),S=y.__isRendered&&(y.__dirty&REDRAW_BIT||!_)?y.getPrevPaintRect():null;S&&v(S);var x=_&&(y.__dirty&REDRAW_BIT||!y.__isRendered)?y.getPaintRect():null;x&&v(x)}}for(var g=this.__prevStartIndex;g<this.__prevEndIndex;++g){var y=o[g],_=y&&y.shouldBePainted(s,l,!0,!0);if(y&&(!_||!y.__zr)&&y.__isRendered){var S=y.getPrevPaintRect();S&&v(S)}}var T;do{T=!1;for(var g=0;g<c.length;){if(c[g].isZero()){c.splice(g,1);continue}for(var w=g+1;w<c.length;)c[g].intersect(c[w])?(T=!0,c[g].union(c[w]),c.splice(w,1)):w++;g++}}while(T);return this._paintRects=c,c},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(r,o){var s=this.dpr,l=this.dom,c=l.style,u=this.domBack;c&&(c.width=r+"px",c.height=o+"px"),l.width=r*s,l.height=o*s,u&&(u.width=r*s,u.height=o*s,s!==1&&this.ctxBack.scale(s,s))},n.prototype.clear=function(r,o,s){var l=this.dom,c=this.ctx,u=l.width,d=l.height;o=o||this.clearColor;var f=this.motionBlur&&!r,v=this.lastFrameAlpha,g=this.dpr,y=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(l,0,0,u/g,d/g));var _=this.domBack;function S(x,T,w,E){if(c.clearRect(x,T,w,E),o&&o!=="transparent"){var P=void 0;if(isGradientObject(o)){var D=o.global||o.__width===w&&o.__height===E;P=D&&o.__canvasGradient||getCanvasGradient(c,o,{x:0,y:0,width:w,height:E}),o.__canvasGradient=P,o.__width=w,o.__height=E}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||g,o.scaleY=o.scaleY||g,P=createCanvasPattern(c,o,{dirty:function(){y.setUnpainted(),y.painter.refresh()}}));c.save(),c.fillStyle=P||o,c.fillRect(x,T,w,E),c.restore()}f&&(c.save(),c.globalAlpha=v,c.drawImage(_,x,T,w,E),c.restore())}!s||f?S(0,0,u,d):s.length&&each$f(s,function(x){S(x.x*g,x.y*g,x.width*g,x.height*g)})},n}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function createRoot(a,n){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+a+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var CanvasPainter=function(){function a(n,r,o,s){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var l=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=l,this.root=n;var c=n.style;c&&(disableUserSelect(n),n.innerHTML=""),this.storage=r;var u=this._zlevelList;this._prevDisplayList=[];var d=this._layers;if(l){var v=n,g=v.width,y=v.height;o.width!=null&&(g=o.width),o.height!=null&&(y=o.height),this.dpr=o.devicePixelRatio||1,v.width=g*this.dpr,v.height=y*this.dpr,this._width=g,this._height=y;var _=new Layer(v,this,this.dpr);_.__builtin__=!0,_.initContext(),d[CANVAS_ZLEVEL]=_,_.zlevel=CANVAS_ZLEVEL,u.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,o),this._height=getSize$1(n,1,o);var f=this._domRoot=createRoot(this._width,this._height);n.appendChild(f)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},a.prototype.refresh=function(n){var r=this.storage.getDisplayList(!0),o=this._prevDisplayList,s=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,o,n,this._redrawId);for(var l=0;l<s.length;l++){var c=s[l],u=this._layers[c];if(!u.__builtin__&&u.refresh){var d=l===0?this._backgroundColor:null;u.refresh(d)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(n){var r=n.length,o=this._hoverlayer;if(o&&o.clear(),!!r){for(var s={inHover:!0,viewWidth:this._width,viewHeight:this._height},l,c=0;c<r;c++){var u=n[c];u.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),l||(l=o.ctx,l.save()),brush$1(l,u,s,c===r-1))}l&&l.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},a.prototype.paintOne=function(n,r){brushSingle(n,r)},a.prototype._paintList=function(n,r,o,s){if(this._redrawId===s){o=o||!1,this._updateLayerStatus(n);var l=this._doPaintList(n,r,o),c=l.finished,u=l.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),u&&this._paintHoverList(n),c)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var d=this;requestAnimationFrame$1(function(){d._paintList(n,r,o,s)})}}},a.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,r=this._domRoot.width,o=this._domRoot.height;n.clearRect(0,0,r,o),this.eachBuiltinLayer(function(s){s.virtual&&n.drawImage(s.dom,0,0,r,o)})},a.prototype._doPaintList=function(n,r,o){for(var s=this,l=[],c=this._opts.useDirtyRect,u=0;u<this._zlevelList.length;u++){var d=this._zlevelList[u],f=this._layers[d];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||o)&&l.push(f)}for(var v=!0,g=!1,y=function(x){var T=l[x],w=T.ctx,E=c&&T.createRepaintRects(n,r,_._width,_._height),P=o?T.__startIndex:T.__drawIndex,D=!o&&T.incremental&&Date.now,L=D&&Date.now(),$=T.zlevel===_._zlevelList[0]?_._backgroundColor:null;if(T.__startIndex===T.__endIndex)T.clear(!1,$,E);else if(P===T.__startIndex){var O=n[P];(!O.incremental||!O.notClear||o)&&T.clear(!1,$,E)}P===-1&&(console.error("For some unknown reason. drawIndex is -1"),P=T.__startIndex);var B,V=function(W){var j={inHover:!1,allClipped:!1,prevEl:null,viewWidth:s._width,viewHeight:s._height};for(B=P;B<T.__endIndex;B++){var K=n[B];if(K.__inHover&&(g=!0),s._doPaintEl(K,T,c,W,j,B===T.__endIndex-1),D){var q=Date.now()-L;if(q>15)break}}j.prevElClipPaths&&w.restore()};if(E)if(E.length===0)B=T.__endIndex;else for(var F=_.dpr,U=0;U<E.length;++U){var G=E[U];w.save(),w.beginPath(),w.rect(G.x*F,G.y*F,G.width*F,G.height*F),w.clip(),V(G),w.restore()}else w.save(),V(),w.restore();T.__drawIndex=B,T.__drawIndex<T.__endIndex&&(v=!1)},_=this,S=0;S<l.length;S++)y(S);return env.wxa&&each$f(this._layers,function(x){x&&x.ctx&&x.ctx.draw&&x.ctx.draw()}),{finished:v,needsRefreshHover:g}},a.prototype._doPaintEl=function(n,r,o,s,l,c){var u=r.ctx;if(o){var d=n.getPaintRect();(!s||d&&d.intersect(s))&&(brush$1(u,n,l,c),n.setPrevPaintRect(d))}else brush$1(u,n,l,c)},a.prototype.getLayer=function(n,r){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var o=this._layers[n];return o||(o=new Layer("zr_"+n,this,this.dpr),o.zlevel=n,o.__builtin__=!0,this._layerConfig[n]?merge(o,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),r&&(o.virtual=r),this.insertLayer(n,o),o.initContext()),o},a.prototype.insertLayer=function(n,r){var o=this._layers,s=this._zlevelList,l=s.length,c=this._domRoot,u=null,d=-1;if(!o[n]&&isLayerValid(r)){if(l>0&&n>s[0]){for(d=0;d<l-1&&!(s[d]<n&&s[d+1]>n);d++);u=o[s[d]]}if(s.splice(d+1,0,n),o[n]=r,!r.virtual)if(u){var f=u.dom;f.nextSibling?c.insertBefore(r.dom,f.nextSibling):c.appendChild(r.dom)}else c.firstChild?c.insertBefore(r.dom,c.firstChild):c.appendChild(r.dom);r.painter||(r.painter=this)}},a.prototype.eachLayer=function(n,r){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s];n.call(r,this._layers[l],l)}},a.prototype.eachBuiltinLayer=function(n,r){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s],c=this._layers[l];c.__builtin__&&n.call(r,c,l)}},a.prototype.eachOtherLayer=function(n,r){for(var o=this._zlevelList,s=0;s<o.length;s++){var l=o[s],c=this._layers[l];c.__builtin__||n.call(r,c,l)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(g,y){g.__dirty=g.__used=!1});function r(g){l&&(l.__endIndex!==g&&(l.__dirty=!0),l.__endIndex=g)}if(this._singleCanvas)for(var o=1;o<n.length;o++){var s=n[o];if(s.zlevel!==n[o-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var l=null,c=0,u,d;for(d=0;d<n.length;d++){var s=n[d],f=s.zlevel,v=void 0;u!==f&&(u=f,c=0),s.incremental?(v=this.getLayer(f+INCREMENTAL_INC,this._needsManuallyCompositing),v.incremental=!0,c=1):v=this.getLayer(f+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),v.__builtin__||logError("ZLevel "+f+" has been used by unkown layer "+v.id),v!==l&&(v.__used=!0,v.__startIndex!==d&&(v.__dirty=!0),v.__startIndex=d,v.incremental?v.__drawIndex=-1:v.__drawIndex=d,r(d),l=v),s.__dirty&REDRAW_BIT&&!s.__inHover&&(v.__dirty=!0,v.incremental&&v.__drawIndex<0&&(v.__drawIndex=d))}r(d),this.eachBuiltinLayer(function(g,y){!g.__used&&g.getElementCount()>0&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(n){n.clear()},a.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(r){r.setUnpainted()})},a.prototype.configLayer=function(n,r){if(r){var o=this._layerConfig;o[n]?merge(o[n],r,!0):o[n]=r;for(var s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s];if(l===n||l===n+EL_AFTER_INCREMENTAL_INC){var c=this._layers[l];merge(c,o[n],!0)}}}},a.prototype.delLayer=function(n){var r=this._layers,o=this._zlevelList,s=r[n];s&&(s.dom.parentNode.removeChild(s.dom),delete r[n],o.splice(indexOf(o,n),1))},a.prototype.resize=function(n,r){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var s=this._opts,l=this.root;if(n!=null&&(s.width=n),r!=null&&(s.height=r),n=getSize$1(l,0,s),r=getSize$1(l,1,s),o.style.display="",this._width!==n||r!==this._height){o.style.width=n+"px",o.style.height=r+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(n,r);this.refresh(!0)}this._width=n,this._height=r}else{if(n==null||r==null)return;this._width=n,this._height=r,this.getLayer(CANVAS_ZLEVEL).resize(n,r)}return this},a.prototype.clearLayer=function(n){var r=this._layers[n];r&&r.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var r=new Layer("image",this,n.pixelRatio||this.dpr);r.initContext(),r.clear(!1,n.backgroundColor||this._backgroundColor);var o=r.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var s=r.dom.width,l=r.dom.height;this.eachLayer(function(g){g.__builtin__?o.drawImage(g.dom,0,0,s,l):g.renderToCanvas&&(o.save(),g.renderToCanvas(o),o.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},u=this.storage.getDisplayList(!0),d=0,f=u.length;d<f;d++){var v=u[d];brush$1(o,v,c,d===f-1)}return r.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();function install$R(a){a.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(r){var o=new Group$4,s=createSymbol$1("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);o.add(s),s.setStyle(r.lineStyle);var l=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),u=l==="none"?"circle":l,d=r.itemHeight*.8,f=createSymbol$1(u,(r.itemWidth-d)/2,(r.itemHeight-d)/2,d,d,r.itemStyle.fill);o.add(f),f.setStyle(r.itemStyle);var v=r.iconRotate==="inherit"?c:r.iconRotate||0;return f.rotation=v*Math.PI/180,f.setOrigin([r.itemWidth/2,r.itemHeight/2]),u.indexOf("empty")>-1&&(f.style.stroke=f.style.fill,f.style.fill="#fff",f.style.lineWidth=2),o},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(SeriesModel);function getDefaultLabel(a,n){var r=a.mapDimensionsAll("defaultedLabel"),o=r.length;if(o===1){var s=retrieveRawValue(a,n,r[0]);return s!=null?s+"":null}else if(o){for(var l=[],c=0;c<r.length;c++)l.push(retrieveRawValue(a,n,r[c]));return l.join(" ")}}function getDefaultInterpolatedLabel(a,n){var r=a.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var o=[],s=0;s<r.length;s++){var l=a.getDimensionIndex(r[s]);l>=0&&o.push(n[l])}return o.join(" ")}var Symbol$1=function(a){__extends(n,a);function n(r,o,s,l){var c=a.call(this)||this;return c.updateData(r,o,s,l),c}return n.prototype._createSymbol=function(r,o,s,l,c){this.removeAll();var u=createSymbol$1(r,-1,-1,2,2,null,c);u.attr({z2:100,culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),u.drift=driftSymbol,this._symbolType=r,this.add(u)},n.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(r,o){var s=this.childAt(0);s.zlevel=r,s.z=o},n.prototype.setDraggable=function(r,o){var s=this.childAt(0);s.draggable=r,s.cursor=!o&&r?"move":s.cursor},n.prototype.updateData=function(r,o,s,l){this.silent=!1;var c=r.getItemVisual(o,"symbol")||"circle",u=r.hostModel,d=n.getSymbolSize(r,o),f=c!==this._symbolType,v=l&&l.disableAnimation;if(f){var g=r.getItemVisual(o,"symbolKeepAspect");this._createSymbol(c,r,o,d,g)}else{var y=this.childAt(0);y.silent=!1;var _={scaleX:d[0]/2,scaleY:d[1]/2};v?y.attr(_):updateProps$1(y,_,u,o),saveOldStyle(y)}if(this._updateCommon(r,o,d,s,l),f){var y=this.childAt(0);if(!v){var _={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,initProps(y,_,u,o)}}v&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(r,o,s,l,c){var u=this.childAt(0),d=r.hostModel,f,v,g,y,_,S,x,T,w;if(l&&(f=l.emphasisItemStyle,v=l.blurItemStyle,g=l.selectItemStyle,y=l.focus,_=l.blurScope,x=l.labelStatesModels,T=l.hoverScale,w=l.cursorStyle,S=l.emphasisDisabled),!l||r.hasItemOption){var E=l&&l.itemModel?l.itemModel:r.getItemModel(o),P=E.getModel("emphasis");f=P.getModel("itemStyle").getItemStyle(),g=E.getModel(["select","itemStyle"]).getItemStyle(),v=E.getModel(["blur","itemStyle"]).getItemStyle(),y=P.get("focus"),_=P.get("blurScope"),S=P.get("disabled"),x=getLabelStatesModels(E),T=P.getShallow("scale"),w=E.getShallow("cursor")}var D=r.getItemVisual(o,"symbolRotate");u.attr("rotation",(D||0)*Math.PI/180||0);var L=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),s);L&&(u.x=L[0],u.y=L[1]),w&&u.attr("cursor",w);var $=r.getItemVisual(o,"style"),O=$.fill;if(u instanceof ZRImage){var B=u.style;u.useStyle(extend({image:B.image,x:B.x,y:B.y,width:B.width,height:B.height},$))}else u.__isEmptyBrush?u.useStyle(extend({},$)):u.useStyle($),u.style.decal=null,u.setColor(O,c&&c.symbolInnerColor),u.style.strokeNoScale=!0;var V=r.getItemVisual(o,"liftZ"),F=this._z2;V!=null?F==null&&(this._z2=u.z2,u.z2+=V):F!=null&&(u.z2=F,this._z2=null);var U=c&&c.useNameLabel;setLabelStyle(u,x,{labelFetcher:d,labelDataIndex:o,defaultText:G,inheritColor:O,defaultOpacity:$.opacity});function G(K){return U?r.getName(K):getDefaultLabel(r,K)}this._sizeX=s[0]/2,this._sizeY=s[1]/2;var W=u.ensureState("emphasis");W.style=f,u.ensureState("select").style=g,u.ensureState("blur").style=v;var j=T==null||T===!0?Math.max(1.1,3/this._sizeY):isFinite(T)&&T>0?+T:1;W.scaleX=this._sizeX*j,W.scaleY=this._sizeY*j,this.setSymbolScale(1),toggleHoverEmphasis(this,y,_,S)},n.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},n.prototype.fadeOut=function(r,o,s){var l=this.childAt(0),c=getECData(this).dataIndex,u=s&&s.animation;if(this.silent=l.silent=!0,s&&s.fadeLabel){var d=l.getTextContent();d&&removeElement(d,{style:{opacity:0}},o,{dataIndex:c,removeOpt:u,cb:function(){l.removeTextContent()}})}else l.removeTextContent();removeElement(l,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:c,cb:r,removeOpt:u})},n.getSymbolSize=function(r,o){return normalizeSymbolSize(r.getItemVisual(o,"symbolSize"))},n}(Group$4);function driftSymbol(a,n){this.parent.drift(a,n)}function symbolNeedsDraw$1(a,n,r,o){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(o.isIgnore&&o.isIgnore(r))&&!(o.clipShape&&!o.clipShape.contain(n[0],n[1]))&&a.getItemVisual(r,"symbol")!=="none"}function normalizeUpdateOpt(a){return a!=null&&!isObject$3(a)&&(a={isIgnore:a}),a||{}}function makeSeriesScope$2(a){var n=a.hostModel,r=n.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=function(){function a(n){this.group=new Group$4,this._SymbolCtor=n||Symbol$1}return a.prototype.updateData=function(n,r){this._progressiveEls=null,r=normalizeUpdateOpt(r);var o=this.group,s=n.hostModel,l=this._data,c=this._SymbolCtor,u=r.disableAnimation,d=makeSeriesScope$2(n),f={disableAnimation:u},v=r.getSymbolPoint||function(g){return n.getItemLayout(g)};l||o.removeAll(),n.diff(l).add(function(g){var y=v(g);if(symbolNeedsDraw$1(n,y,g,r)){var _=new c(n,g,d,f);_.setPosition(y),n.setItemGraphicEl(g,_),o.add(_)}}).update(function(g,y){var _=l.getItemGraphicEl(y),S=v(g);if(!symbolNeedsDraw$1(n,S,g,r)){o.remove(_);return}var x=n.getItemVisual(g,"symbol")||"circle",T=_&&_.getSymbolType&&_.getSymbolType();if(!_||T&&T!==x)o.remove(_),_=new c(n,g,d,f),_.setPosition(S);else{_.updateData(n,g,d,f);var w={x:S[0],y:S[1]};u?_.attr(w):updateProps$1(_,w,s)}o.add(_),n.setItemGraphicEl(g,_)}).remove(function(g){var y=l.getItemGraphicEl(g);y&&y.fadeOut(function(){o.remove(y)},s)}).execute(),this._getSymbolPoint=v,this._data=n},a.prototype.updateLayout=function(){var n=this,r=this._data;r&&r.eachItemGraphicEl(function(o,s){var l=n._getSymbolPoint(s);o.setPosition(l),o.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(n,r,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function s(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=n.start;l<n.end;l++){var c=r.getItemLayout(l);if(symbolNeedsDraw$1(r,c,l,o)){var u=new this._SymbolCtor(r,l,this._seriesScope);u.traverse(s),u.setPosition(c),this.group.add(u),r.setItemGraphicEl(l,u),this._progressiveEls.push(u)}}},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype.remove=function(n){var r=this.group,o=this._data;o&&n?o.eachItemGraphicEl(function(s){s.fadeOut(function(){r.remove(s)},o.hostModel)}):r.removeAll()},a}();function prepareDataCoordInfo(a,n,r){var o=a.getBaseAxis(),s=a.getOtherAxis(o),l=getValueStart(s,r),c=o.dim,u=s.dim,d=n.mapDimension(u),f=n.mapDimension(c),v=u==="x"||u==="radius"?1:0,g=map$1(a.dimensions,function(S){return n.mapDimension(S)}),y=!1,_=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,g[0])&&(y=!0,g[0]=_),isDimensionStacked(n,g[1])&&(y=!0,g[1]=_),{dataDimsForPoint:g,valueStart:l,valueAxisDim:u,baseAxisDim:c,stacked:!!y,valueDim:d,baseDim:f,baseDataOffset:v,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(a,n){var r=0,o=a.scale.getExtent();return n==="start"?r=o[0]:n==="end"?r=o[1]:isNumber(n)&&!isNaN(n)?r=n:o[0]>0?r=o[0]:o[1]<0&&(r=o[1]),r}function getStackedOnPoint(a,n,r,o){var s=NaN;a.stacked&&(s=r.get(r.getCalculationInfo("stackedOverDimension"),o)),isNaN(s)&&(s=a.valueStart);var l=a.baseDataOffset,c=[];return c[l]=r.get(a.baseDim,o),c[1-l]=s,n.dataToPoint(c)}function diffData(a,n){var r=[];return n.diff(a).add(function(o){r.push({cmd:"+",idx:o})}).update(function(o,s){r.push({cmd:"=",idx:s,idx1:o})}).remove(function(o){r.push({cmd:"-",idx:o})}).execute(),r}function lineAnimationDiff(a,n,r,o,s,l,c,u){for(var d=diffData(a,n),f=[],v=[],g=[],y=[],_=[],S=[],x=[],T=prepareDataCoordInfo(s,n,c),w=a.getLayout("points")||[],E=n.getLayout("points")||[],P=0;P<d.length;P++){var D=d[P],L=!0,$=void 0,O=void 0;switch(D.cmd){case"=":$=D.idx*2,O=D.idx1*2;var B=w[$],V=w[$+1],F=E[O],U=E[O+1];(isNaN(B)||isNaN(V))&&(B=F,V=U),f.push(B,V),v.push(F,U),g.push(r[$],r[$+1]),y.push(o[O],o[O+1]),x.push(n.getRawIndex(D.idx1));break;case"+":var G=D.idx,W=T.dataDimsForPoint,j=s.dataToPoint([n.get(W[0],G),n.get(W[1],G)]);O=G*2,f.push(j[0],j[1]),v.push(E[O],E[O+1]);var K=getStackedOnPoint(T,s,n,G);g.push(K[0],K[1]),y.push(o[O],o[O+1]),x.push(n.getRawIndex(G));break;case"-":L=!1}L&&(_.push(D),S.push(S.length))}S.sort(function(Se,$e){return x[Se]-x[$e]});for(var q=f.length,ie=createFloat32Array(q),ee=createFloat32Array(q),he=createFloat32Array(q),pe=createFloat32Array(q),ce=[],P=0;P<S.length;P++){var ye=S[P],we=P*2,ge=ye*2;ie[we]=f[ge],ie[we+1]=f[ge+1],ee[we]=v[ge],ee[we+1]=v[ge+1],he[we]=g[ge],he[we+1]=g[ge+1],pe[we]=y[ge],pe[we+1]=y[ge+1],ce[P]=_[ye]}return{current:ie,next:ee,stackedOnCurrent:he,stackedOnNext:pe,status:ce}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(a,n){return isNaN(a)||isNaN(n)}function drawSegment(a,n,r,o,s,l,c,u,d){for(var f,v,g,y,_,S,x=r,T=0;T<o;T++){var w=n[x*2],E=n[x*2+1];if(x>=s||x<0)break;if(isPointNull$1(w,E)){if(d){x+=l;continue}break}if(x===r)a[l>0?"moveTo":"lineTo"](w,E),g=w,y=E;else{var P=w-f,D=E-v;if(P*P+D*D<.5){x+=l;continue}if(c>0){for(var L=x+l,$=n[L*2],O=n[L*2+1];$===w&&O===E&&T<o;)T++,L+=l,x+=l,$=n[L*2],O=n[L*2+1],w=n[x*2],E=n[x*2+1],P=w-f,D=E-v;var B=T+1;if(d)for(;isPointNull$1($,O)&&B<o;)B++,L+=l,$=n[L*2],O=n[L*2+1];var V=.5,F=0,U=0,G=void 0,W=void 0;if(B>=o||isPointNull$1($,O))_=w,S=E;else{F=$-f,U=O-v;var j=w-f,K=$-w,q=E-v,ie=O-E,ee=void 0,he=void 0;if(u==="x"){ee=Math.abs(j),he=Math.abs(K);var pe=F>0?1:-1;_=w-pe*ee*c,S=E,G=w+pe*he*c,W=E}else if(u==="y"){ee=Math.abs(q),he=Math.abs(ie);var ce=U>0?1:-1;_=w,S=E-ce*ee*c,G=w,W=E+ce*he*c}else ee=Math.sqrt(j*j+q*q),he=Math.sqrt(K*K+ie*ie),V=he/(he+ee),_=w-F*c*(1-V),S=E-U*c*(1-V),G=w+F*c*V,W=E+U*c*V,G=mathMin$5(G,mathMax$5($,w)),W=mathMin$5(W,mathMax$5(O,E)),G=mathMax$5(G,mathMin$5($,w)),W=mathMax$5(W,mathMin$5(O,E)),F=G-w,U=W-E,_=w-F*ee/he,S=E-U*ee/he,_=mathMin$5(_,mathMax$5(f,w)),S=mathMin$5(S,mathMax$5(v,E)),_=mathMax$5(_,mathMin$5(f,w)),S=mathMax$5(S,mathMin$5(v,E)),F=w-_,U=E-S,G=w+F*he/ee,W=E+U*he/ee}a.bezierCurveTo(g,y,_,S,w,E),g=G,y=W}else a.lineTo(w,E)}f=w,v=E,x+=l}return T}var ECPolylineShape=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ECPolyline=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-polyline",o}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(r,o){var s=o.points,l=0,c=s.length/2;if(o.connectNulls){for(;c>0&&isPointNull$1(s[c*2-2],s[c*2-1]);c--);for(;l<c&&isPointNull$1(s[l*2],s[l*2+1]);l++);}for(;l<c;)l+=drawSegment(r,s,l,c,c,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},n.prototype.getPointOn=function(r,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var s=this.path,l=s.data,c=PathProxy.CMD,u,d,f=o==="x",v=[],g=0;g<l.length;){var y=l[g++],_=void 0,S=void 0,x=void 0,T=void 0,w=void 0,E=void 0,P=void 0;switch(y){case c.M:u=l[g++],d=l[g++];break;case c.L:if(_=l[g++],S=l[g++],P=f?(r-u)/(_-u):(r-d)/(S-d),P<=1&&P>=0){var D=f?(S-d)*P+d:(_-u)*P+u;return f?[r,D]:[D,r]}u=_,d=S;break;case c.C:_=l[g++],S=l[g++],x=l[g++],T=l[g++],w=l[g++],E=l[g++];var L=f?cubicRootAt(u,_,x,w,r,v):cubicRootAt(d,S,T,E,r,v);if(L>0)for(var $=0;$<L;$++){var O=v[$];if(O<=1&&O>=0){var D=f?cubicAt(d,S,T,E,O):cubicAt(u,_,x,w,O);return f?[r,D]:[D,r]}}u=w,d=E;break}}},n}(Path),ECPolygonShape=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(ECPolylineShape),ECPolygon=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-polygon",o}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(r,o){var s=o.points,l=o.stackedOnPoints,c=0,u=s.length/2,d=o.smoothMonotone;if(o.connectNulls){for(;u>0&&isPointNull$1(s[u*2-2],s[u*2-1]);u--);for(;c<u&&isPointNull$1(s[c*2],s[c*2+1]);c++);}for(;c<u;){var f=drawSegment(r,s,c,u,u,1,o.smooth,d,o.connectNulls);drawSegment(r,l,c+f-1,f,u,-1,o.stackedOnSmooth,d,o.connectNulls),c+=f+1,r.closePath()}},n}(Path);function createGridClipPath(a,n,r,o,s){var l=a.getArea(),c=l.x,u=l.y,d=l.width,f=l.height,v=r.get(["lineStyle","width"])||0;c-=v/2,u-=v/2,d+=v,f+=v,d=Math.ceil(d),c!==Math.floor(c)&&(c=Math.floor(c),d++);var g=new Rect$2({shape:{x:c,y:u,width:d,height:f}});if(n){var y=a.getBaseAxis(),_=y.isHorizontal(),S=y.inverse;_?(S&&(g.shape.x+=d),g.shape.width=0):(S||(g.shape.y+=f),g.shape.height=0);var x=isFunction(s)?function(T){s(T,g)}:null;initProps(g,{shape:{width:d,height:f,x:c,y:u}},r,null,o,x)}return g}function createPolarClipPath(a,n,r){var o=a.getArea(),s=round$3(o.r0,1),l=round$3(o.r,1),c=new Sector({shape:{cx:round$3(a.cx,1),cy:round$3(a.cy,1),r0:s,r:l,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(n){var u=a.getBaseAxis().dim==="angle";u?c.shape.endAngle=o.startAngle:c.shape.r=s,initProps(c,{shape:{endAngle:o.endAngle,r:l}},r)}return c}function createClipPath(a,n,r,o,s){if(a){if(a.type==="polar")return createPolarClipPath(a,n,r);if(a.type==="cartesian2d")return createGridClipPath(a,n,r,o,s)}else return null;return null}function isCoordinateSystemType(a,n){return a.type===n}function isPointsSame(a,n){if(a.length===n.length){for(var r=0;r<a.length;r++)if(a[r]!==n[r])return;return!0}}function bboxFromPoints(a){for(var n=1/0,r=1/0,o=-1/0,s=-1/0,l=0;l<a.length;){var c=a[l++],u=a[l++];isNaN(c)||(n=Math.min(c,n),o=Math.max(c,o)),isNaN(u)||(r=Math.min(u,r),s=Math.max(u,s))}return[[n,r],[o,s]]}function getBoundingDiff(a,n){var r=bboxFromPoints(a),o=r[0],s=r[1],l=bboxFromPoints(n),c=l[0],u=l[1];return Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(s[0]-u[0]),Math.abs(s[1]-u[1]))}function getSmooth(a){return isNumber(a)?a:a?.5:0}function getStackedOnPoints(a,n,r){if(!r.valueDim)return[];for(var o=n.count(),s=createFloat32Array(o*2),l=0;l<o;l++){var c=getStackedOnPoint(r,a,n,l);s[l*2]=c[0],s[l*2+1]=c[1]}return s}function turnPointsIntoStep(a,n,r,o,s){var l=r.getBaseAxis(),c=l.dim==="x"||l.dim==="radius"?0:1,u=[],d=0,f=[],v=[],g=[],y=[];if(s){for(d=0;d<a.length;d+=2){var _=n||a;!isNaN(_[d])&&!isNaN(_[d+1])&&y.push(a[d],a[d+1])}a=y}for(d=0;d<a.length-2;d+=2)switch(g[0]=a[d+2],g[1]=a[d+3],v[0]=a[d],v[1]=a[d+1],u.push(v[0],v[1]),o){case"end":f[c]=g[c],f[1-c]=v[1-c],u.push(f[0],f[1]);break;case"middle":var S=(v[c]+g[c])/2,x=[];f[c]=x[c]=S,f[1-c]=v[1-c],x[1-c]=g[1-c],u.push(f[0],f[1]),u.push(x[0],x[1]);break;default:f[c]=v[c],f[1-c]=g[1-c],u.push(f[0],f[1])}return u.push(a[d++],a[d++]),u}function clipColorStops(a,n){var r=[],o=a.length,s,l;function c(v,g,y){var _=v.coord,S=(y-_)/(g.coord-_),x=lerp$1(S,[v.color,g.color]);return{coord:y,color:x}}for(var u=0;u<o;u++){var d=a[u],f=d.coord;if(f<0)s=d;else if(f>n){l?r.push(c(l,d,n)):s&&r.push(c(s,d,0),c(s,d,n));break}else s&&(r.push(c(s,d,0)),s=null),r.push(d),l=d}return r}function getVisualGradient(a,n,r){var o=a.getVisual("visualMeta");if(!(!o||!o.length||!a.count())&&n.type==="cartesian2d"){for(var s,l,c=o.length-1;c>=0;c--){var u=a.getDimensionInfo(o[c].dimension);if(s=u&&u.coordDim,s==="x"||s==="y"){l=o[c];break}}if(l){var d=n.getAxis(s),f=map$1(l.stops,function(P){return{coord:d.toGlobalCoord(d.dataToCoord(P.value)),color:P.color}}),v=f.length,g=l.outerColors.slice();v&&f[0].coord>f[v-1].coord&&(f.reverse(),g.reverse());var y=clipColorStops(f,s==="x"?r.getWidth():r.getHeight()),_=y.length;if(!_&&v)return f[0].coord<0?g[1]?g[1]:f[v-1].color:g[0]?g[0]:f[0].color;var S=10,x=y[0].coord-S,T=y[_-1].coord+S,w=T-x;if(w<.001)return"transparent";each$f(y,function(P){P.offset=(P.coord-x)/w}),y.push({offset:_?y[_-1].offset:.5,color:g[1]||"transparent"}),y.unshift({offset:_?y[0].offset:.5,color:g[0]||"transparent"});var E=new LinearGradient(0,0,0,0,y,!0);return E[s]=x,E[s+"2"]=T,E}}}function getIsIgnoreFunc(a,n,r){var o=a.get("showAllSymbol"),s=o==="auto";if(!(o&&!s)){var l=r.getAxesByScale("ordinal")[0];if(l&&!(s&&canShowAllSymbolForCategory(l,n))){var c=n.mapDimension(l.dim),u={};return each$f(l.getViewLabels(),function(d){var f=l.scale.getRawOrdinalNumber(d.tickValue);u[f]=1}),function(d){return!u.hasOwnProperty(n.get(c,d))}}}}function canShowAllSymbolForCategory(a,n){var r=a.getExtent(),o=Math.abs(r[1]-r[0])/a.scale.count();isNaN(o)&&(o=0);for(var s=n.count(),l=Math.max(1,Math.round(s/5)),c=0;c<s;c+=l)if(Symbol$1.getSymbolSize(n,c)[a.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(a,n){return isNaN(a)||isNaN(n)}function getLastIndexNotNull(a){for(var n=a.length/2;n>0&&isPointNull(a[n*2-2],a[n*2-1]);n--);return n-1}function getPointAtIndex(a,n){return[a[n*2],a[n*2+1]]}function getIndexRange(a,n,r){for(var o=a.length/2,s=r==="x"?0:1,l,c,u=0,d=-1,f=0;f<o;f++)if(c=a[f*2+s],!(isNaN(c)||isNaN(a[f*2+1-s]))){if(f===0){l=c;continue}if(l<=n&&c>=n||l>=n&&c<=n){d=f;break}u=f,l=c}return{range:[u,d],t:(n-l)/(c-l)}}function anyStateShowEndLabel(a){if(a.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(a.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(a,n,r,o){if(isCoordinateSystemType(n,"cartesian2d")){var s=o.getModel("endLabel"),l=s.get("valueAnimation"),c=o.getData(),u={lastFrameIndex:0},d=anyStateShowEndLabel(o)?function(_,S){a._endLabelOnDuring(_,S,c,u,l,s,n)}:null,f=n.getBaseAxis().isHorizontal(),v=createGridClipPath(n,r,o,function(){var _=a._endLabel;_&&r&&u.originalX!=null&&_.attr({x:u.originalX,y:u.originalY})},d);if(!o.get("clip",!0)){var g=v.shape,y=Math.max(g.width,g.height);f?(g.y-=y,g.height+=y*2):(g.x-=y,g.width+=y*2)}return d&&d(1,v),v}else return createPolarClipPath(n,r,o)}function getEndLabelStateSpecified(a,n){var r=n.getBaseAxis(),o=r.isHorizontal(),s=r.inverse,l=o?s?"right":"left":"center",c=o?"middle":s?"top":"bottom";return{normal:{align:a.get("align")||l,verticalAlign:a.get("verticalAlign")||c}}}var LineView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(){var r=new Group$4,o=new SymbolDraw;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=r,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(r,o,s){var l=r.coordinateSystem,c=this.group,u=r.getData(),d=r.getModel("lineStyle"),f=r.getModel("areaStyle"),v=u.getLayout("points")||[],g=l.type==="polar",y=this._coordSys,_=this._symbolDraw,S=this._polyline,x=this._polygon,T=this._lineGroup,w=!o.ssr&&r.get("animation"),E=!f.isEmpty(),P=f.get("origin"),D=prepareDataCoordInfo(l,u,P),L=E&&getStackedOnPoints(l,u,D),$=r.get("showSymbol"),O=r.get("connectNulls"),B=$&&!g&&getIsIgnoreFunc(r,u,l),V=this._data;V&&V.eachItemGraphicEl(function(Se,$e){Se.__temp&&(c.remove(Se),V.setItemGraphicEl($e,null))}),$||_.remove(),c.add(T);var F=g?!1:r.get("step"),U;l&&l.getArea&&r.get("clip",!0)&&(U=l.getArea(),U.width!=null?(U.x-=.1,U.y-=.1,U.width+=.2,U.height+=.2):U.r0&&(U.r0-=.5,U.r+=.5)),this._clipShapeForSymbol=U;var G=getVisualGradient(u,l,s)||u.getVisual("style")[u.getVisual("drawType")];if(!(S&&y.type===l.type&&F===this._step))$&&_.updateData(u,{isIgnore:B,clipShape:U,disableAnimation:!0,getSymbolPoint:function(Se){return[v[Se*2],v[Se*2+1]]}}),w&&this._initSymbolLabelAnimation(u,l,U),F&&(L&&(L=turnPointsIntoStep(L,v,l,F,O)),v=turnPointsIntoStep(v,null,l,F,O)),S=this._newPolyline(v),E?x=this._newPolygon(v,L):x&&(T.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,l,convertToColorString(G)),T.setClipPath(createLineClipPath(this,l,!0,r));else{E&&!x?x=this._newPolygon(v,L):x&&!E&&(T.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,l,convertToColorString(G));var W=T.getClipPath();if(W){var j=createLineClipPath(this,l,!1,r);initProps(W,{shape:j.shape},r)}else T.setClipPath(createLineClipPath(this,l,!0,r));$&&_.updateData(u,{isIgnore:B,clipShape:U,disableAnimation:!0,getSymbolPoint:function(Se){return[v[Se*2],v[Se*2+1]]}}),(!isPointsSame(this._stackedOnPoints,L)||!isPointsSame(this._points,v))&&(w?this._doUpdateAnimation(u,L,l,s,F,P,O):(F&&(L&&(L=turnPointsIntoStep(L,v,l,F,O)),v=turnPointsIntoStep(v,null,l,F,O)),S.setShape({points:v}),x&&x.setShape({points:v,stackedOnPoints:L})))}var K=r.getModel("emphasis"),q=K.get("focus"),ie=K.get("blurScope"),ee=K.get("disabled");if(S.useStyle(defaults(d.getLineStyle(),{fill:"none",stroke:G,lineJoin:"bevel"})),setStatesStylesFromModel(S,r,"lineStyle"),S.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var he=S.getState("emphasis").style;he.lineWidth=+S.style.lineWidth+1}getECData(S).seriesIndex=r.seriesIndex,toggleHoverEmphasis(S,q,ie,ee);var pe=getSmooth(r.get("smooth")),ce=r.get("smoothMonotone");if(S.setShape({smooth:pe,smoothMonotone:ce,connectNulls:O}),x){var ye=u.getCalculationInfo("stackedOnSeries"),we=0;x.useStyle(defaults(f.getAreaStyle(),{fill:G,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),ye&&(we=getSmooth(ye.get("smooth"))),x.setShape({smooth:pe,stackedOnSmooth:we,smoothMonotone:ce,connectNulls:O}),setStatesStylesFromModel(x,r,"areaStyle"),getECData(x).seriesIndex=r.seriesIndex,toggleHoverEmphasis(x,q,ie,ee)}var ge=this._changePolyState;u.eachItemGraphicEl(function(Se){Se&&(Se.onHoverStateChange=ge)}),this._polyline.onHoverStateChange=ge,this._data=u,this._coordSys=l,this._stackedOnPoints=L,this._points=v,this._step=F,this._valueOrigin=P,r.get("triggerLineEvent")&&(this.packEventData(r,S),x&&this.packEventData(r,x))},n.prototype.packEventData=function(r,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},n.prototype.highlight=function(r,o,s,l){var c=r.getData(),u=queryDataIndex(c,l);if(this._changePolyState("emphasis"),!(u instanceof Array)&&u!=null&&u>=0){var d=c.getLayout("points"),f=c.getItemGraphicEl(u);if(!f){var v=d[u*2],g=d[u*2+1];if(isNaN(v)||isNaN(g)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(v,g))return;var y=r.get("zlevel")||0,_=r.get("z")||0;f=new Symbol$1(c,u),f.x=v,f.y=g,f.setZ(y,_);var S=f.getSymbolPath().getTextContent();S&&(S.zlevel=y,S.z=_,S.z2=this._polyline.z2+1),f.__temp=!0,c.setItemGraphicEl(u,f),f.stopSymbolAnimation(!0),this.group.add(f)}f.highlight()}else ChartView.prototype.highlight.call(this,r,o,s,l)},n.prototype.downplay=function(r,o,s,l){var c=r.getData(),u=queryDataIndex(c,l);if(this._changePolyState("normal"),u!=null&&u>=0){var d=c.getItemGraphicEl(u);d&&(d.__temp?(c.setItemGraphicEl(u,null),this.group.remove(d)):d.downplay())}else ChartView.prototype.downplay.call(this,r,o,s,l)},n.prototype._changePolyState=function(r){var o=this._polygon;setStatesFlag(this._polyline,r),o&&setStatesFlag(o,r)},n.prototype._newPolyline=function(r){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},n.prototype._newPolygon=function(r,o){var s=this._polygon;return s&&this._lineGroup.remove(s),s=new ECPolygon({shape:{points:r,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(s),this._polygon=s,s},n.prototype._initSymbolLabelAnimation=function(r,o,s){var l,c,u=o.getBaseAxis(),d=u.inverse;o.type==="cartesian2d"?(l=u.isHorizontal(),c=!1):o.type==="polar"&&(l=u.dim==="angle",c=!0);var f=r.hostModel,v=f.get("animationDuration");isFunction(v)&&(v=v(null));var g=f.get("animationDelay")||0,y=isFunction(g)?g(null):g;r.eachItemGraphicEl(function(_,S){var x=_;if(x){var T=[_.x,_.y],w=void 0,E=void 0,P=void 0;if(s)if(c){var D=s,L=o.pointToCoord(T);l?(w=D.startAngle,E=D.endAngle,P=-L[1]/180*Math.PI):(w=D.r0,E=D.r,P=L[0])}else{var $=s;l?(w=$.x,E=$.x+$.width,P=_.x):(w=$.y+$.height,E=$.y,P=_.y)}var O=E===w?0:(P-w)/(E-w);d&&(O=1-O);var B=isFunction(g)?g(S):v*O+y,V=x.getSymbolPath(),F=V.getTextContent();x.attr({scaleX:0,scaleY:0}),x.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:B}),F&&F.animateFrom({style:{opacity:0}},{duration:300,delay:B}),V.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(r,o,s){var l=r.getModel("endLabel");if(anyStateShowEndLabel(r)){var c=r.getData(),u=this._polyline,d=c.getLayout("points");if(!d){u.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;f||(f=this._endLabel=new ZRText({z2:200}),f.ignoreClip=!0,u.setTextContent(this._endLabel),u.disableLabelAnimation=!0);var v=getLastIndexNotNull(d);v>=0&&(setLabelStyle(u,getLabelStatesModels(r,"endLabel"),{inheritColor:s,labelFetcher:r,labelDataIndex:v,defaultText:function(g,y,_){return _!=null?getDefaultInterpolatedLabel(c,_):getDefaultLabel(c,g)},enableTextSetter:!0},getEndLabelStateSpecified(l,o)),u.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(r,o,s,l,c,u,d){var f=this._endLabel,v=this._polyline;if(f){r<1&&l.originalX==null&&(l.originalX=f.x,l.originalY=f.y);var g=s.getLayout("points"),y=s.hostModel,_=y.get("connectNulls"),S=u.get("precision"),x=u.get("distance")||0,T=d.getBaseAxis(),w=T.isHorizontal(),E=T.inverse,P=o.shape,D=E?w?P.x:P.y+P.height:w?P.x+P.width:P.y,L=(w?x:0)*(E?-1:1),$=(w?0:-x)*(E?-1:1),O=w?"x":"y",B=getIndexRange(g,D,O),V=B.range,F=V[1]-V[0],U=void 0;if(F>=1){if(F>1&&!_){var G=getPointAtIndex(g,V[0]);f.attr({x:G[0]+L,y:G[1]+$}),c&&(U=y.getRawValue(V[0]))}else{var G=v.getPointOn(D,O);G&&f.attr({x:G[0]+L,y:G[1]+$});var W=y.getRawValue(V[0]),j=y.getRawValue(V[1]);c&&(U=interpolateRawValues(s,S,W,j,B.t))}l.lastFrameIndex=V[0]}else{var K=r===1||l.lastFrameIndex>0?V[0]:0,G=getPointAtIndex(g,K);c&&(U=y.getRawValue(K)),f.attr({x:G[0]+L,y:G[1]+$})}if(c){var q=labelInner(f);typeof q.setLabelText=="function"&&q.setLabelText(U)}}},n.prototype._doUpdateAnimation=function(r,o,s,l,c,u,d){var f=this._polyline,v=this._polygon,g=r.hostModel,y=lineAnimationDiff(this._data,r,this._stackedOnPoints,o,this._coordSys,s,this._valueOrigin),_=y.current,S=y.stackedOnCurrent,x=y.next,T=y.stackedOnNext;if(c&&(S=turnPointsIntoStep(y.stackedOnCurrent,y.current,s,c,d),_=turnPointsIntoStep(y.current,null,s,c,d),T=turnPointsIntoStep(y.stackedOnNext,y.next,s,c,d),x=turnPointsIntoStep(y.next,null,s,c,d)),getBoundingDiff(_,x)>3e3||v&&getBoundingDiff(S,T)>3e3){f.stopAnimation(),f.setShape({points:x}),v&&(v.stopAnimation(),v.setShape({points:x,stackedOnPoints:T}));return}f.shape.__points=y.current,f.shape.points=_;var w={shape:{points:x}};y.current!==_&&(w.shape.__points=y.next),f.stopAnimation(),updateProps$1(f,w,g),v&&(v.setShape({points:_,stackedOnPoints:S}),v.stopAnimation(),updateProps$1(v,{shape:{stackedOnPoints:T}},g),f.shape.points!==v.shape.points&&(v.shape.points=f.shape.points));for(var E=[],P=y.status,D=0;D<P.length;D++){var L=P[D].cmd;if(L==="="){var $=r.getItemGraphicEl(P[D].idx1);$&&E.push({el:$,ptIdx:D})}}f.animators&&f.animators.length&&f.animators[0].during(function(){v&&v.dirtyShape();for(var O=f.shape.__points,B=0;B<E.length;B++){var V=E[B].el,F=E[B].ptIdx*2;V.x=O[F],V.y=O[F+1],V.markRedraw()}})},n.prototype.remove=function(r){var o=this.group,s=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),s&&s.eachItemGraphicEl(function(l,c){l.__temp&&(o.remove(l),s.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(ChartView);function pointsLayout(a,n){return{seriesType:a,plan:createRenderPlanner(),reset:function(r){var o=r.getData(),s=r.coordinateSystem,l=r.pipelineContext,c=n||l.large;if(s){var u=map$1(s.dimensions,function(_){return o.mapDimension(_)}).slice(0,2),d=u.length,f=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,u[0])&&(u[0]=f),isDimensionStacked(o,u[1])&&(u[1]=f);var v=o.getStore(),g=o.getDimensionIndex(u[0]),y=o.getDimensionIndex(u[1]);return d&&{progress:function(_,S){for(var x=_.end-_.start,T=c&&createFloat32Array(x*d),w=[],E=[],P=_.start,D=0;P<_.end;P++){var L=void 0;if(d===1){var $=v.get(g,P);L=s.dataToPoint($,null,E)}else w[0]=v.get(g,P),w[1]=v.get(y,P),L=s.dataToPoint(w,null,E);c?(T[D++]=L[0],T[D++]=L[1]):S.setItemLayout(P,L.slice())}c&&S.setLayout("points",T)}}}}}}var samplers={average:function(a){for(var n=0,r=0,o=0;o<a.length;o++)isNaN(a[o])||(n+=a[o],r++);return r===0?NaN:n/r},sum:function(a){for(var n=0,r=0;r<a.length;r++)n+=a[r]||0;return n},max:function(a){for(var n=-1/0,r=0;r<a.length;r++)a[r]>n&&(n=a[r]);return isFinite(n)?n:NaN},min:function(a){for(var n=1/0,r=0;r<a.length;r++)a[r]<n&&(n=a[r]);return isFinite(n)?n:NaN},nearest:function(a){return a[0]}},indexSampler=function(a){return Math.round(a.length/2)};function dataSample(a){return{seriesType:a,reset:function(n,r,o){var s=n.getData(),l=n.get("sampling"),c=n.coordinateSystem,u=s.count();if(u>10&&c.type==="cartesian2d"&&l){var d=c.getBaseAxis(),f=c.getOtherAxis(d),v=d.getExtent(),g=o.getDevicePixelRatio(),y=Math.abs(v[1]-v[0])*(g||1),_=Math.round(u/y);if(isFinite(_)&&_>1){l==="lttb"?n.setData(s.lttbDownSample(s.mapDimension(f.dim),1/_)):l==="minmax"&&n.setData(s.minmaxDownSample(s.mapDimension(f.dim),1/_));var S=void 0;isString(l)?S=samplers[l]:isFunction(l)&&(S=l),S&&n.setData(s.downSample(s.mapDimension(f.dim),1/_,S,indexSampler))}}}}}function install$Q(a){a.registerChartView(LineView),a.registerSeriesModel(LineSeriesModel),a.registerLayout(pointsLayout("line",!0)),a.registerVisual({seriesType:"line",reset:function(n){var r=n.getData(),o=n.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",o)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(r,o,s){var l=this.coordinateSystem;if(l&&l.clampData){var c=l.clampData(r),u=l.dataToPoint(c);if(s)each$f(l.getAxes(),function(y,_){if(y.type==="category"&&o!=null){var S=y.getTicksCoords(),x=y.getTickModel().get("alignWithLabel"),T=c[_],w=o[_]==="x1"||o[_]==="y1";if(w&&!x&&(T+=1),S.length<2)return;if(S.length===2){u[_]=y.toGlobalCoord(y.getExtent()[w?1:0]);return}for(var E=void 0,P=void 0,D=1,L=0;L<S.length;L++){var $=S[L].coord,O=L===S.length-1?S[L-1].tickValue+D:S[L].tickValue;if(O===T){P=$;break}else if(O<T)E=$;else if(E!=null&&O>T){P=($+E)/2;break}L===1&&(D=O-S[0].tickValue)}P==null&&(E?E&&(P=S[S.length-1].coord):P=S[0].coord),u[_]=y.toGlobalCoord(P)}});else{var d=this.getData(),f=d.getLayout("offset"),v=d.getLayout("size"),g=l.getBaseAxis().isHorizontal()?0:1;u[g]+=f+v/2}return u}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>r&&(r=o),r},n.prototype.brushSelector=function(r,o,s){return s.rect(o.getItemLayout(r))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n}(BaseBarSeriesModel),SausageShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),SausagePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="sausage",o}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(r,o){var s=o.cx,l=o.cy,c=Math.max(o.r0||0,0),u=Math.max(o.r,0),d=(u-c)*.5,f=c+d,v=o.startAngle,g=o.endAngle,y=o.clockwise,_=Math.PI*2,S=y?g-v<_:v-g<_;S||(v=g-(y?_:-_));var x=Math.cos(v),T=Math.sin(v),w=Math.cos(g),E=Math.sin(g);S?(r.moveTo(x*c+s,T*c+l),r.arc(x*f+s,T*f+l,d,-Math.PI+v,v,!y)):r.moveTo(x*u+s,T*u+l),r.arc(s,l,u,v,g,!y),r.arc(w*f+s,E*f+l,d,g-Math.PI*2,g-Math.PI,!y),c!==0&&r.arc(s,l,c,g,v,y)},n}(Path);function createSectorCalculateTextPosition(a,n){n=n||{};var r=n.isRoundCap;return function(o,s,l){var c=s.position;if(!c||c instanceof Array)return calculateTextPosition(o,s,l);var u=a(c),d=s.distance!=null?s.distance:5,f=this.shape,v=f.cx,g=f.cy,y=f.r,_=f.r0,S=(y+_)/2,x=f.startAngle,T=f.endAngle,w=(x+T)/2,E=r?Math.abs(y-_)/2:0,P=Math.cos,D=Math.sin,L=v+y*P(x),$=g+y*D(x),O="left",B="top";switch(u){case"startArc":L=v+(_-d)*P(w),$=g+(_-d)*D(w),O="center",B="top";break;case"insideStartArc":L=v+(_+d)*P(w),$=g+(_+d)*D(w),O="center",B="bottom";break;case"startAngle":L=v+S*P(x)+adjustAngleDistanceX(x,d+E,!1),$=g+S*D(x)+adjustAngleDistanceY(x,d+E,!1),O="right",B="middle";break;case"insideStartAngle":L=v+S*P(x)+adjustAngleDistanceX(x,-d+E,!1),$=g+S*D(x)+adjustAngleDistanceY(x,-d+E,!1),O="left",B="middle";break;case"middle":L=v+S*P(w),$=g+S*D(w),O="center",B="middle";break;case"endArc":L=v+(y+d)*P(w),$=g+(y+d)*D(w),O="center",B="bottom";break;case"insideEndArc":L=v+(y-d)*P(w),$=g+(y-d)*D(w),O="center",B="top";break;case"endAngle":L=v+S*P(T)+adjustAngleDistanceX(T,d+E,!0),$=g+S*D(T)+adjustAngleDistanceY(T,d+E,!0),O="left",B="middle";break;case"insideEndAngle":L=v+S*P(T)+adjustAngleDistanceX(T,-d+E,!0),$=g+S*D(T)+adjustAngleDistanceY(T,-d+E,!0),O="right",B="middle";break;default:return calculateTextPosition(o,s,l)}return o=o||{},o.x=L,o.y=$,o.align=O,o.verticalAlign=B,o}}function setSectorTextRotation(a,n,r,o){if(isNumber(o)){a.setTextConfig({rotation:o});return}else if(isArray$1(n)){a.setTextConfig({rotation:0});return}var s=a.shape,l=s.clockwise?s.startAngle:s.endAngle,c=s.clockwise?s.endAngle:s.startAngle,u=(l+c)/2,d,f=r(n);switch(f){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":d=u;break;case"startAngle":case"insideStartAngle":d=l;break;case"endAngle":case"insideEndAngle":d=c;break;default:a.setTextConfig({rotation:0});return}var v=Math.PI*1.5-d;f==="middle"&&v>Math.PI/2&&v<Math.PI*1.5&&(v-=Math.PI),a.setTextConfig({rotation:v})}function adjustAngleDistanceX(a,n,r){return n*Math.sin(a)*(r?-1:1)}function adjustAngleDistanceY(a,n,r){return n*Math.cos(a)*(r?1:-1)}function getSectorCornerRadius(a,n,r){var o=a.get("borderRadius");if(o==null)return r?{cornerRadius:0}:null;isArray$1(o)||(o=[o,o,o,o]);var s=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(o,function(l){return parsePercent$1(l,s)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(a,n){var r=a.getArea&&a.getArea();if(isCoordinateSystemType(a,"cartesian2d")){var o=a.getBaseAxis();if(o.type!=="category"||!o.onBand){var s=n.getLayout("bandWidth");o.isHorizontal()?(r.x-=s,r.width+=s*2):(r.y-=s,r.height+=s*2)}}return r}var BarView=function(a){__extends(n,a);function n(){var r=a.call(this)||this;return r.type=n.type,r._isFirstFrame=!0,r}return n.prototype.render=function(r,o,s,l){this._model=r,this._removeOnRenderedListener(s),this._updateDrawMode(r);var c=r.get("coordinateSystem");(c==="cartesian2d"||c==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,o,s):this._renderNormal(r,o,s,l))},n.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},n.prototype.incrementalRender=function(r,o){this._progressiveEls=[],this._incrementalRenderLarge(r,o)},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},n.prototype._renderNormal=function(r,o,s,l){var c=this.group,u=r.getData(),d=this._data,f=r.coordinateSystem,v=f.getBaseAxis(),g;f.type==="cartesian2d"?g=v.isHorizontal():f.type==="polar"&&(g=v.dim==="angle");var y=r.isAnimationEnabled()?r:null,_=shouldRealtimeSort(r,f);_&&this._enableRealtimeSort(_,u,s);var S=r.get("clip",!0)||_,x=getClipArea(f,u);c.removeClipPath();var T=r.get("roundCap",!0),w=r.get("showBackground",!0),E=r.getModel("backgroundStyle"),P=E.get("borderRadius")||0,D=[],L=this._backgroundEls,$=l&&l.isInitSort,O=l&&l.type==="changeAxisOrder";function B(U){var G=getLayout[f.type](u,U),W=createBackgroundEl(f,g,G);return W.useStyle(E.getItemStyle()),f.type==="cartesian2d"?W.setShape("r",P):W.setShape("cornerRadius",P),D[U]=W,W}u.diff(d).add(function(U){var G=u.getItemModel(U),W=getLayout[f.type](u,U,G);if(w&&B(U),!(!u.hasValue(U)||!isValidLayout[f.type](W))){var j=!1;S&&(j=clip[f.type](x,W));var K=elementCreator[f.type](r,u,U,W,g,y,v.model,!1,T);_&&(K.forceLabelAnimation=!0),updateStyle(K,u,U,G,W,r,g,f.type==="polar"),$?K.attr({shape:W}):_?updateRealtimeAnimation(_,y,K,W,U,g,!1,!1):initProps(K,{shape:W},r,U),u.setItemGraphicEl(U,K),c.add(K),K.ignore=j}}).update(function(U,G){var W=u.getItemModel(U),j=getLayout[f.type](u,U,W);if(w){var K=void 0;L.length===0?K=B(G):(K=L[G],K.useStyle(E.getItemStyle()),f.type==="cartesian2d"?K.setShape("r",P):K.setShape("cornerRadius",P),D[U]=K);var q=getLayout[f.type](u,U),ie=createBackgroundShape(g,q,f);updateProps$1(K,{shape:ie},y,U)}var ee=d.getItemGraphicEl(G);if(!u.hasValue(U)||!isValidLayout[f.type](j)){c.remove(ee);return}var he=!1;if(S&&(he=clip[f.type](x,j),he&&c.remove(ee)),ee?saveOldStyle(ee):ee=elementCreator[f.type](r,u,U,j,g,y,v.model,!!ee,T),_&&(ee.forceLabelAnimation=!0),O){var pe=ee.getTextContent();if(pe){var ce=labelInner(pe);ce.prevValue!=null&&(ce.prevValue=ce.value)}}else updateStyle(ee,u,U,W,j,r,g,f.type==="polar");$?ee.attr({shape:j}):_?updateRealtimeAnimation(_,y,ee,j,U,g,!0,O):updateProps$1(ee,{shape:j},r,U,null),u.setItemGraphicEl(U,ee),ee.ignore=he,c.add(ee)}).remove(function(U){var G=d.getItemGraphicEl(U);G&&removeElementWithFadeOut(G,r,U)}).execute();var V=this._backgroundGroup||(this._backgroundGroup=new Group$4);V.removeAll();for(var F=0;F<D.length;++F)V.add(D[F]);c.add(V),this._backgroundEls=D,this._data=u},n.prototype._renderLarge=function(r,o,s){this._clear(),createLarge$1(r,this.group),this._updateLargeClip(r)},n.prototype._incrementalRenderLarge=function(r,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(r){var o=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r),s=this.group;o?s.setClipPath(o):s.removeClipPath()},n.prototype._enableRealtimeSort=function(r,o,s){var l=this;if(o.count()){var c=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,r,s),this._isFirstFrame=!1;else{var u=function(d){var f=o.getItemGraphicEl(d),v=f&&f.shape;return v&&Math.abs(c.isHorizontal()?v.height:v.width)||0};this._onRendered=function(){l._updateSortWithinSameData(o,u,c,s)},s.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(r,o,s){var l=[];return r.each(r.mapDimension(o.dim),function(c,u){var d=s(u);d=d??NaN,l.push({dataIndex:u,mappedValue:d,ordinalNumber:c})}),l.sort(function(c,u){return u.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(l,function(c){return c.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(r,o,s){for(var l=s.scale,c=r.mapDimension(s.dim),u=Number.MAX_VALUE,d=0,f=l.getOrdinalMeta().categories.length;d<f;++d){var v=r.rawIndexOf(c,l.getRawOrdinalNumber(d)),g=v<0?Number.MIN_VALUE:o(r.indexOfRawIndex(v));if(g>u)return!0;u=g}return!1},n.prototype._isOrderDifferentInView=function(r,o){for(var s=o.scale,l=s.getExtent(),c=Math.max(0,l[0]),u=Math.min(l[1],s.getOrdinalMeta().categories.length-1);c<=u;++c)if(r.ordinalNumbers[c]!==s.getRawOrdinalNumber(c))return!0},n.prototype._updateSortWithinSameData=function(r,o,s,l){if(this._isOrderChangedWithinSameData(r,o,s)){var c=this._dataSort(r,s,o);this._isOrderDifferentInView(c,s)&&(this._removeOnRenderedListener(l),l.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",axisId:s.index,sortInfo:c}))}},n.prototype._dispatchInitSort=function(r,o,s){var l=o.baseAxis,c=this._dataSort(r,l,function(u){return r.get(r.mapDimension(o.otherAxis.dim),u)});s.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",isInitSort:!0,axisId:l.index,sortInfo:c})},n.prototype.remove=function(r,o){this._clear(this._model),this._removeOnRenderedListener(o)},n.prototype.dispose=function(r,o){this._removeOnRenderedListener(o)},n.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(r){var o=this.group,s=this._data;r&&r.isAnimationEnabled()&&s&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],s.eachItemGraphicEl(function(l){removeElementWithFadeOut(l,r,getECData(l).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n}(ChartView),clip={cartesian2d:function(a,n){var r=n.width<0?-1:1,o=n.height<0?-1:1;r<0&&(n.x+=n.width,n.width=-n.width),o<0&&(n.y+=n.height,n.height=-n.height);var s=a.x+a.width,l=a.y+a.height,c=mathMax$4(n.x,a.x),u=mathMin$4(n.x+n.width,s),d=mathMax$4(n.y,a.y),f=mathMin$4(n.y+n.height,l),v=u<c,g=f<d;return n.x=v&&c>s?u:c,n.y=g&&d>l?f:d,n.width=v?0:u-c,n.height=g?0:f-d,r<0&&(n.x+=n.width,n.width=-n.width),o<0&&(n.y+=n.height,n.height=-n.height),v||g},polar:function(a,n){var r=n.r0<=n.r?1:-1;if(r<0){var o=n.r;n.r=n.r0,n.r0=o}var s=mathMin$4(n.r,a.r),l=mathMax$4(n.r0,a.r0);n.r=s,n.r0=l;var c=s-l<0;if(r<0){var o=n.r;n.r=n.r0,n.r0=o}return c}},elementCreator={cartesian2d:function(a,n,r,o,s,l,c,u,d){var f=new Rect$2({shape:extend({},o),z2:1});if(f.__dataIndex=r,f.name="item",l){var v=f.shape,g=s?"height":"width";v[g]=0}return f},polar:function(a,n,r,o,s,l,c,u,d){var f=!s&&d?SausagePath:Sector,v=new f({shape:o,z2:1});v.name="item";var g=createPolarPositionMapping(s);if(v.calculateTextPosition=createSectorCalculateTextPosition(g,{isRoundCap:f===SausagePath}),l){var y=v.shape,_=s?"r":"endAngle",S={};y[_]=s?o.r0:o.startAngle,S[_]=o[_],(u?updateProps$1:initProps)(v,{shape:S},l)}return v}};function shouldRealtimeSort(a,n){var r=a.get("realtimeSort",!0),o=n.getBaseAxis();if(r&&o.type==="category"&&n.type==="cartesian2d")return{baseAxis:o,otherAxis:n.getOtherAxis(o)}}function updateRealtimeAnimation(a,n,r,o,s,l,c,u){var d,f;l?(f={x:o.x,width:o.width},d={y:o.y,height:o.height}):(f={y:o.y,height:o.height},d={x:o.x,width:o.width}),u||(c?updateProps$1:initProps)(r,{shape:d},n,s,null);var v=n?a.baseAxis.model:null;(c?updateProps$1:initProps)(r,{shape:f},v,s)}function checkPropertiesNotValid(a,n){for(var r=0;r<n.length;r++)if(!isFinite(a[n[r]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(a){return!checkPropertiesNotValid(a,rectPropties)},polar:function(a){return!checkPropertiesNotValid(a,polarPropties)}},getLayout={cartesian2d:function(a,n,r){var o=a.getItemLayout(n),s=r?getLineWidth(r,o):0,l=o.width>0?1:-1,c=o.height>0?1:-1;return{x:o.x+l*s/2,y:o.y+c*s/2,width:o.width-l*s,height:o.height-c*s}},polar:function(a,n,r){var o=a.getItemLayout(n);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function createPolarPositionMapping(a){return function(n){var r=n?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+r;default:return o}}}(a)}function updateStyle(a,n,r,o,s,l,c,u){var d=n.getItemVisual(r,"style");if(u){if(!l.get("roundCap")){var v=a.shape,g=getSectorCornerRadius(o.getModel("itemStyle"),v,!0);extend(v,g),a.setShape(v)}}else{var f=o.get(["itemStyle","borderRadius"])||0;a.setShape("r",f)}a.useStyle(d);var y=o.getShallow("cursor");y&&a.attr("cursor",y);var _=u?c?s.r>=s.r0?"endArc":"startArc":s.endAngle>=s.startAngle?"endAngle":"startAngle":c?s.height>=0?"bottom":"top":s.width>=0?"right":"left",S=getLabelStatesModels(o);setLabelStyle(a,S,{labelFetcher:l,labelDataIndex:r,defaultText:getDefaultLabel(l.getData(),r),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:_});var x=a.getTextContent();if(u&&x){var T=o.get(["label","position"]);a.textConfig.inside=T==="middle"?!0:null,setSectorTextRotation(a,T==="outside"?_:T,createPolarPositionMapping(c),o.get(["label","rotate"]))}setLabelValueAnimation(x,S,l.getRawValue(r),function(E){return getDefaultInterpolatedLabel(n,E)});var w=o.getModel(["emphasis"]);toggleHoverEmphasis(a,w.get("focus"),w.get("blurScope"),w.get("disabled")),setStatesStylesFromModel(a,o),isZeroOnPolar(s)&&(a.style.fill="none",a.style.stroke="none",each$f(a.states,function(E){E.style&&(E.style.fill=E.style.stroke="none")}))}function getLineWidth(a,n){var r=a.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var o=a.get(["itemStyle","borderWidth"])||0,s=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),l=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(o,s,l)}var LagePathShape=function(){function a(){}return a}(),LargePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="largeBar",o}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(r,o){for(var s=o.points,l=this.baseDimIdx,c=1-this.baseDimIdx,u=[],d=[],f=this.barWidth,v=0;v<s.length;v+=3)d[l]=f,d[c]=s[v+2],u[l]=s[v+l],u[c]=s[v+c],r.rect(u[0],u[1],d[0],d[1])},n}(Path);function createLarge$1(a,n,r,o){var s=a.getData(),l=s.getLayout("valueAxisHorizontal")?1:0,c=s.getLayout("largeDataIndices"),u=s.getLayout("size"),d=a.getModel("backgroundStyle"),f=s.getLayout("largeBackgroundPoints");if(f){var v=new LargePath({shape:{points:f},incremental:!!o,silent:!0,z2:0});v.baseDimIdx=l,v.largeDataIndices=c,v.barWidth=u,v.useStyle(d.getItemStyle()),n.add(v),r&&r.push(v)}var g=new LargePath({shape:{points:s.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=l,g.largeDataIndices=c,g.barWidth=u,n.add(g),g.useStyle(s.getVisual("style")),g.style.stroke=null,getECData(g).seriesIndex=a.seriesIndex,a.get("silent")||(g.on("mousedown",largePathUpdateDataIndex),g.on("mousemove",largePathUpdateDataIndex)),r&&r.push(g)}var largePathUpdateDataIndex=throttle(function(a){var n=this,r=largePathFindDataIndex(n,a.offsetX,a.offsetY);getECData(n).dataIndex=r>=0?r:null},30,!1);function largePathFindDataIndex(a,n,r){for(var o=a.baseDimIdx,s=1-o,l=a.shape.points,c=a.largeDataIndices,u=[],d=[],f=a.barWidth,v=0,g=l.length/3;v<g;v++){var y=v*3;if(d[o]=f,d[s]=l[y+2],u[o]=l[y+o],u[s]=l[y+s],d[s]<0&&(u[s]+=d[s],d[s]=-d[s]),n>=u[0]&&n<=u[0]+d[0]&&r>=u[1]&&r<=u[1]+d[1])return c[v]}return-1}function createBackgroundShape(a,n,r){if(isCoordinateSystemType(r,"cartesian2d")){var o=n,s=r.getArea();return{x:a?o.x:s.x,y:a?s.y:o.y,width:a?o.width:s.width,height:a?s.height:o.height}}else{var s=r.getArea(),l=n;return{cx:s.cx,cy:s.cy,r0:a?s.r0:l.r0,r:a?s.r:l.r,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:Math.PI*2}}}function createBackgroundEl(a,n,r){var o=a.type==="polar"?Sector:Rect$2;return new o({shape:createBackgroundShape(n,r,a),silent:!0,z2:0})}function install$P(a){a.registerChartView(BarView),a.registerSeriesModel(BarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,r){var o=n.componentType||"series";r.eachComponent({mainType:o,query:n},function(s){n.sortInfo&&s.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(a,n){var r=getViewRect$5(a,n),o=a.get("center"),s=a.get("radius");isArray$1(s)||(s=[0,s]);var l=parsePercent(r.width,n.getWidth()),c=parsePercent(r.height,n.getHeight()),u=Math.min(l,c),d=parsePercent(s[0],u/2),f=parsePercent(s[1],u/2),v,g,y=a.coordinateSystem;if(y){var _=y.dataToPoint(o);v=_[0]||0,g=_[1]||0}else isArray$1(o)||(o=[o,o]),v=parsePercent(o[0],l)+r.x,g=parsePercent(o[1],c)+r.y;return{cx:v,cy:g,r0:d,r:f}}function pieLayout(a,n,r){n.eachSeriesByType(a,function(o){var s=o.getData(),l=s.mapDimension("value"),c=getViewRect$5(o,r),u=getBasicPieLayout(o,r),d=u.cx,f=u.cy,v=u.r,g=u.r0,y=-o.get("startAngle")*RADIAN$2,_=o.get("endAngle"),S=o.get("padAngle")*RADIAN$2;_=_==="auto"?y-PI2:-_*RADIAN$2;var x=o.get("minAngle")*RADIAN$2,T=x+S,w=0;s.each(l,function(ie){!isNaN(ie)&&w++});var E=s.getSum(l),P=Math.PI/(E||w)*2,D=o.get("clockwise"),L=o.get("roseType"),$=o.get("stillShowZeroSum"),O=s.getDataExtent(l);O[0]=0;var B=D?1:-1,V=[y,_],F=B*S/2;normalizeArcAngles(V,!D),y=V[0],_=V[1];var U=getSeriesLayoutData(o);U.startAngle=y,U.endAngle=_,U.clockwise=D;var G=Math.abs(_-y),W=G,j=0,K=y;if(s.setLayout({viewRect:c,r:v}),s.each(l,function(ie,ee){var he;if(isNaN(ie)){s.setItemLayout(ee,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:D,cx:d,cy:f,r0:g,r:L?NaN:v});return}L!=="area"?he=E===0&&$?P:ie*P:he=G/w,he<T?(he=T,W-=T):j+=ie;var pe=K+B*he,ce=0,ye=0;S>he?(ce=K+B*he/2,ye=ce):(ce=K+F,ye=pe-F),s.setItemLayout(ee,{angle:he,startAngle:ce,endAngle:ye,clockwise:D,cx:d,cy:f,r0:g,r:L?linearMap$2(ie,O,[g,v]):v}),K=pe}),W<PI2&&w)if(W<=.001){var q=G/w;s.each(l,function(ie,ee){if(!isNaN(ie)){var he=s.getItemLayout(ee);he.angle=q;var pe=0,ce=0;q<S?(pe=y+B*(ee+1/2)*q,ce=pe):(pe=y+B*ee*q+F,ce=y+B*(ee+1)*q-F),he.startAngle=pe,he.endAngle=ce}})}else P=W/j,K=y,s.each(l,function(ie,ee){if(!isNaN(ie)){var he=s.getItemLayout(ee),pe=he.angle===T?T:ie*P,ce=0,ye=0;pe<S?(ce=K+B*pe/2,ye=ce):(ce=K+F,ye=K+B*pe-F),he.startAngle=ce,he.endAngle=ye,K+=B*pe}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(a){return{seriesType:a,reset:function(n,r){var o=r.findComponents({mainType:"legend"});if(!(!o||!o.length)){var s=n.getData();s.filterSelf(function(l){for(var c=s.getName(l),u=0;u<o.length;u++)if(!o[u].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(a,n,r,o,s,l,c,u,d,f){if(a.length<2)return;function v(x){for(var T=x.rB,w=T*T,E=0;E<x.list.length;E++){var P=x.list[E],D=Math.abs(P.label.y-r),L=o+P.len,$=L*L,O=Math.sqrt(Math.abs((1-D*D/w)*$)),B=n+(O+P.len2)*s,V=B-P.label.x,F=P.targetTextWidth-V*s;constrainTextWidth(P,F,!0),P.label.x=B}}function g(x){for(var T={list:[],maxY:0},w={list:[],maxY:0},E=0;E<x.length;E++)if(x[E].labelAlignTo==="none"){var P=x[E],D=P.label.y>r?w:T,L=Math.abs(P.label.y-r);if(L>=D.maxY){var $=P.label.x-n-P.len2*s,O=o+P.len,B=Math.abs($)<O?Math.sqrt(L*L/(1-$*$/O/O)):O;D.rB=B,D.maxY=L}D.list.push(P)}v(T),v(w)}for(var y=a.length,_=0;_<y;_++)if(a[_].position==="outer"&&a[_].labelAlignTo==="labelLine"){var S=a[_].label.x-f;a[_].linePoints[1][0]+=S,a[_].label.x=f}shiftLayoutOnY(a,d,d+c)&&g(a)}function avoidOverlap(a,n,r,o,s,l,c,u){for(var d=[],f=[],v=Number.MAX_VALUE,g=-Number.MAX_VALUE,y=0;y<a.length;y++){var _=a[y].label;isPositionCenter(a[y])||(_.x<n?(v=Math.min(v,_.x),d.push(a[y])):(g=Math.max(g,_.x),f.push(a[y])))}for(var y=0;y<a.length;y++){var S=a[y];if(!isPositionCenter(S)&&S.linePoints){if(S.labelStyleWidth!=null)continue;var _=S.label,x=S.linePoints,T=void 0;S.labelAlignTo==="edge"?_.x<n?T=x[2][0]-S.labelDistance-c-S.edgeDistance:T=c+s-S.edgeDistance-x[2][0]-S.labelDistance:S.labelAlignTo==="labelLine"?_.x<n?T=v-c-S.bleedMargin:T=c+s-g-S.bleedMargin:_.x<n?T=_.x-c-S.bleedMargin:T=c+s-_.x-S.bleedMargin,S.targetTextWidth=T,constrainTextWidth(S,T)}}adjustSingleSide(f,n,r,o,1,s,l,c,u,g),adjustSingleSide(d,n,r,o,-1,s,l,c,u,v);for(var y=0;y<a.length;y++){var S=a[y];if(!isPositionCenter(S)&&S.linePoints){var _=S.label,x=S.linePoints,w=S.labelAlignTo==="edge",E=_.style.padding,P=E?E[1]+E[3]:0,D=_.style.backgroundColor?0:P,L=S.rect.width+D,$=x[1][0]-x[2][0];w?_.x<n?x[2][0]=c+S.edgeDistance+L+S.labelDistance:x[2][0]=c+s-S.edgeDistance-L-S.labelDistance:(_.x<n?x[2][0]=_.x+S.labelDistance:x[2][0]=_.x-S.labelDistance,x[1][0]=x[2][0]+$),x[1][1]=x[2][1]=_.y}}}function constrainTextWidth(a,n,r){if(r===void 0&&(r=!1),a.labelStyleWidth==null){var o=a.label,s=o.style,l=a.rect,c=s.backgroundColor,u=s.padding,d=u?u[1]+u[3]:0,f=s.overflow,v=l.width+(c?0:d);if(n<v||r){var g=l.height;if(f&&f.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",n-d);var y=o.getBoundingRect();o.setStyle("width",Math.ceil(y.width)),o.setStyle("backgroundColor",c)}else{var _=n-d,S=n<v?_:r?_>a.unconstrainedWidth?null:_:null;o.setStyle("width",S)}var x=o.getBoundingRect();l.width=x.width;var T=(o.style.margin||0)+2.1;l.height=x.height+T,l.y-=(l.height-g)/2}}}function isPositionCenter(a){return a.position==="center"}function pieLabelLayout(a){var n=a.getData(),r=[],o,s,l=!1,c=(a.get("minShowLabelAngle")||0)*RADIAN$1,u=n.getLayout("viewRect"),d=n.getLayout("r"),f=u.width,v=u.x,g=u.y,y=u.height;function _($){$.ignore=!0}function S($){if(!$.ignore)return!0;for(var O in $.states)if($.states[O].ignore===!1)return!0;return!1}n.each(function($){var O=n.getItemGraphicEl($),B=O.shape,V=O.getTextContent(),F=O.getTextGuideLine(),U=n.getItemModel($),G=U.getModel("label"),W=G.get("position")||U.get(["emphasis","label","position"]),j=G.get("distanceToLabelLine"),K=G.get("alignTo"),q=parsePercent(G.get("edgeDistance"),f),ie=G.get("bleedMargin"),ee=U.getModel("labelLine"),he=ee.get("length");he=parsePercent(he,f);var pe=ee.get("length2");if(pe=parsePercent(pe,f),Math.abs(B.endAngle-B.startAngle)<c){each$f(V.states,_),V.ignore=!0,F&&(each$f(F.states,_),F.ignore=!0);return}if(S(V)){var ce=(B.startAngle+B.endAngle)/2,ye=Math.cos(ce),we=Math.sin(ce),ge,Se,$e,oe;o=B.cx,s=B.cy;var me=W==="inside"||W==="inner";if(W==="center")ge=B.cx,Se=B.cy,oe="center";else{var _e=(me?(B.r+B.r0)/2*ye:B.r*ye)+o,Te=(me?(B.r+B.r0)/2*we:B.r*we)+s;if(ge=_e+ye*3,Se=Te+we*3,!me){var Le=_e+ye*(he+d-B.r),Ge=Te+we*(he+d-B.r),se=Le+(ye<0?-1:1)*pe,J=Ge;K==="edge"?ge=ye<0?v+q:v+f-q:ge=se+(ye<0?-j:j),Se=J,$e=[[_e,Te],[Le,Ge],[se,J]]}oe=me?"center":K==="edge"?ye>0?"right":"left":ye>0?"left":"right"}var xe=Math.PI,De=0,Ae=G.get("rotate");if(isNumber(Ae))De=Ae*(xe/180);else if(W==="center")De=0;else if(Ae==="radial"||Ae===!0){var Ie=ye<0?-ce+xe:-ce;De=Ie}else if(Ae==="tangential"&&W!=="outside"&&W!=="outer"){var ze=Math.atan2(ye,we);ze<0&&(ze=xe*2+ze);var Fe=we>0;Fe&&(ze=xe+ze),De=ze-xe}if(l=!!De,V.x=ge,V.y=Se,V.rotation=De,V.setStyle({verticalAlign:"middle"}),me){V.setStyle({align:oe});var be=V.states.select;be&&(be.x+=V.x,be.y+=V.y)}else{var ae=V.getBoundingRect().clone();ae.applyTransform(V.getComputedTransform());var Q=(V.style.margin||0)+2.1;ae.y-=Q/2,ae.height+=Q,r.push({label:V,labelLine:F,position:W,len:he,len2:pe,minTurnAngle:ee.get("minTurnAngle"),maxSurfaceAngle:ee.get("maxSurfaceAngle"),surfaceNormal:new Point(ye,we),linePoints:$e,textAlign:oe,labelDistance:j,labelAlignTo:K,edgeDistance:q,bleedMargin:ie,rect:ae,unconstrainedWidth:ae.width,labelStyleWidth:V.style.width})}O.setTextConfig({inside:me})}}),!l&&a.get("avoidLabelOverlap")&&avoidOverlap(r,o,s,d,f,y,v,g);for(var x=0;x<r.length;x++){var T=r[x],w=T.label,E=T.labelLine,P=isNaN(w.x)||isNaN(w.y);if(w){w.setStyle({align:T.textAlign}),P&&(each$f(w.states,_),w.ignore=!0);var D=w.states.select;D&&(D.x+=w.x,D.y+=w.y)}if(E){var L=T.linePoints;P||!L?(each$f(E.states,_),E.ignore=!0):(limitTurnAngle(L,T.minTurnAngle),limitSurfaceAngle(L,T.surfaceNormal,T.maxSurfaceAngle),E.setShape({points:L}),w.__hostTarget.textGuideLineConfig={anchor:new Point(L[0][0],L[0][1])})}}}var PiePiece=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this)||this;l.z2=2;var c=new ZRText;return l.setTextContent(c),l.updateData(r,o,s,!0),l}return n.prototype.updateData=function(r,o,s,l){var c=this,u=r.hostModel,d=r.getItemModel(o),f=d.getModel("emphasis"),v=r.getItemLayout(o),g=extend(getSectorCornerRadius(d.getModel("itemStyle"),v,!0),v);if(isNaN(g.startAngle)){c.setShape(g);return}if(l){c.setShape(g);var y=u.getShallow("animationType");u.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},u,{dataIndex:o,isFrom:!0}),c.originX=g.cx,c.originY=g.cy):y==="scale"?(c.shape.r=v.r0,initProps(c,{shape:{r:v.r}},u,o)):s!=null?(c.setShape({startAngle:s,endAngle:s}),initProps(c,{shape:{startAngle:v.startAngle,endAngle:v.endAngle}},u,o)):(c.shape.endAngle=v.startAngle,updateProps$1(c,{shape:{endAngle:v.endAngle}},u,o))}else saveOldStyle(c),updateProps$1(c,{shape:g},u,o);c.useStyle(r.getItemVisual(o,"style")),setStatesStylesFromModel(c,d);var _=(v.startAngle+v.endAngle)/2,S=u.get("selectedOffset"),x=Math.cos(_)*S,T=Math.sin(_)*S,w=d.getShallow("cursor");w&&c.attr("cursor",w),this._updateLabel(u,r,o),c.ensureState("emphasis").shape=extend({r:v.r+(f.get("scale")&&f.get("scaleSize")||0)},getSectorCornerRadius(f.getModel("itemStyle"),v)),extend(c.ensureState("select"),{x,y:T,shape:getSectorCornerRadius(d.getModel(["select","itemStyle"]),v)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(d.getModel(["blur","itemStyle"]),v)});var E=c.getTextGuideLine(),P=c.getTextContent();E&&extend(E.ensureState("select"),{x,y:T}),extend(P.ensureState("select"),{x,y:T}),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},n.prototype._updateLabel=function(r,o,s){var l=this,c=o.getItemModel(s),u=c.getModel("labelLine"),d=o.getItemVisual(s,"style"),f=d&&d.fill,v=d&&d.opacity;setLabelStyle(l,getLabelStatesModels(c),{labelFetcher:o.hostModel,labelDataIndex:s,inheritColor:f,defaultOpacity:v,defaultText:r.getFormattedLabel(s,"normal")||o.getName(s)});var g=l.getTextContent();l.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var y=r.get(["label","position"]);if(y!=="outside"&&y!=="outer")l.removeTextGuideLine();else{var _=this.getTextGuideLine();_||(_=new Polyline$1,this.setTextGuideLine(_)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:f,opacity:retrieve3(u.get(["lineStyle","opacity"]),v,1)})}},n}(Sector),PieView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return n.prototype.render=function(r,o,s,l){var c=r.getData(),u=this._data,d=this.group,f;if(!u&&c.count()>0){for(var v=c.getItemLayout(0),g=1;isNaN(v&&v.startAngle)&&g<c.count();++g)v=c.getItemLayout(g);v&&(f=v.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),c.count()===0&&r.get("showEmptyCircle")){var y=getSeriesLayoutData(r),_=new Sector({shape:extend(getBasicPieLayout(r,s),y)});_.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=_,d.add(_)}c.diff(u).add(function(S){var x=new PiePiece(c,S,f);c.setItemGraphicEl(S,x),d.add(x)}).update(function(S,x){var T=u.getItemGraphicEl(x);T.updateData(c,S,f),T.off("click"),d.add(T),c.setItemGraphicEl(S,T)}).remove(function(S){var x=u.getItemGraphicEl(S);removeElementWithFadeOut(x,r,S)}).execute(),pieLabelLayout(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},n.prototype.dispose=function(){},n.prototype.containPoint=function(r,o){var s=o.getData(),l=s.getItemLayout(0);if(l){var c=r[0]-l.cx,u=r[1]-l.cy,d=Math.sqrt(c*c+u*u);return d<=l.r&&d>=l.r0}},n.type="pie",n}(ChartView);function createSeriesDataSimply(a,n,r){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:a.getEncode()},n);var o=a.getSource(),s=prepareSeriesDataSchema(o,n).dimensions,l=new SeriesData(s,a);return l.initData(o,r),l}var LegendVisualProvider=function(){function a(n,r){this._getDataWithEncodedVisual=n,this._getRawData=r}return a.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},a.prototype.containName=function(n){var r=this._getRawData();return r.indexOfName(n)>=0},a.prototype.indexOfName=function(n){var r=this._getDataWithEncodedVisual();return r.indexOfName(n)},a.prototype.getItemVisual=function(n,r){var o=this._getDataWithEncodedVisual();return o.getItemVisual(n,r)},a}(),innerData=makeInner(),PieSeriesModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},n.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(r){var o=this.getData(),s=innerData(o),l=s.seats;if(!l){var c=[];o.each(o.mapDimension("value"),function(d){c.push(d)}),l=s.seats=getPercentSeats(c,o.hostModel.get("percentPrecision"))}var u=a.prototype.getDataParams.call(this,r);return u.percent=l[r]||0,u.$vars.push("percent"),u},n.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,s=r.emphasis.labelLine;o.show=o.show&&r.label.show,s.show=s.show&&r.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(SeriesModel);function negativeDataFilter(a){return{seriesType:a,reset:function(n,r){var o=n.getData();o.filterSelf(function(s){var l=o.mapDimension("value"),c=o.get(l,s);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(a){a.registerChartView(PieView),a.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",a.registerAction),a.registerLayout(curry$1(pieLayout,"pie")),a.registerProcessor(dataFilter$1("pie")),a.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(r,o,s){return s.point(o.getItemLayout(r))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function a(){}return a}(),LargeSymbolPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(r,o){var s=o.points,l=o.size,c=this.symbolProxy,u=c.shape,d=r.getContext?r.getContext():r,f=d&&l[0]<BOOST_SIZE_THRESHOLD,v=this.softClipShape,g;if(f){this._ctx=d;return}for(this._ctx=null,g=this._off;g<s.length;){var y=s[g++],_=s[g++];isNaN(y)||isNaN(_)||v&&!v.contain(y,_)||(u.x=y-l[0]/2,u.y=_-l[1]/2,u.width=l[0],u.height=l[1],c.buildPath(r,u,!0))}this.incremental&&(this._off=g,this.notClear=!0)},n.prototype.afterBrush=function(){var r=this.shape,o=r.points,s=r.size,l=this._ctx,c=this.softClipShape,u;if(l){for(u=this._off;u<o.length;){var d=o[u++],f=o[u++];isNaN(d)||isNaN(f)||c&&!c.contain(d,f)||l.fillRect(d-s[0]/2,f-s[1]/2,s[0],s[1])}this.incremental&&(this._off=u,this.notClear=!0)}},n.prototype.findDataIndex=function(r,o){for(var s=this.shape,l=s.points,c=s.size,u=Math.max(c[0],4),d=Math.max(c[1],4),f=l.length/2-1;f>=0;f--){var v=f*2,g=l[v]-u/2,y=l[v+1]-d/2;if(r>=g&&o>=y&&r<=g+u&&o<=y+d)return f}return-1},n.prototype.contain=function(r,o){var s=this.transformCoordToLocal(r,o),l=this.getBoundingRect();if(r=s[0],o=s[1],l.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,s=o.points,l=o.size,c=l[0],u=l[1],d=1/0,f=1/0,v=-1/0,g=-1/0,y=0;y<s.length;){var _=s[y++],S=s[y++];d=Math.min(_,d),v=Math.max(_,v),f=Math.min(S,f),g=Math.max(S,g)}r=this._rect=new BoundingRect(d-c/2,f-u/2,v-d+c,g-f+u)}return r},n}(Path),LargeSymbolDraw=function(){function a(){this.group=new Group$4}return a.prototype.updateData=function(n,r){this._clear();var o=this._create();o.setShape({points:n.getLayout("points")}),this._setCommon(o,n,r)},a.prototype.updateLayout=function(n){var r=n.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var s=(o.endIndex-o.startIndex)*2,l=o.startIndex*4*2;r=new Float32Array(r.buffer,l,s)}o.setShape("points",r),o.reset()})},a.prototype.incrementalPrepareUpdate=function(n){this._clear()},a.prototype.incrementalUpdate=function(n,r,o){var s=this._newAdded[0],l=r.getLayout("points"),c=s&&s.shape.points;if(c&&c.length<2e4){var u=c.length,d=new Float32Array(u+l.length);d.set(c),d.set(l,u),s.endIndex=n.end,s.setShape({points:d})}else{this._newAdded=[];var f=this._create();f.startIndex=n.start,f.endIndex=n.end,f.incremental=!0,f.setShape({points:l}),this._setCommon(f,r,o)}},a.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},a.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},a.prototype._setCommon=function(n,r,o){var s=r.hostModel;o=o||{};var l=r.getVisual("symbolSize");n.setShape("size",l instanceof Array?l:[l,l]),n.softClipShape=o.clipShape||null,n.symbolProxy=createSymbol$1(r.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var c=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(s.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var u=r.getVisual("style"),d=u&&u.fill;d&&n.setColor(d);var f=getECData(n);f.seriesIndex=s.seriesIndex,n.on("mousemove",function(v){f.dataIndex=null;var g=n.hoverDataIdx;g>=0&&(f.dataIndex=g+(n.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),ScatterView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=r.getData(),c=this._updateSymbolDraw(l,r);c.updateData(l,{clipShape:this._getClipShape(r)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(r,o,s){var l=r.getData(),c=this._updateSymbolDraw(l,r);c.incrementalPrepareUpdate(l),this._finished=!1},n.prototype.incrementalRender=function(r,o,s){this._symbolDraw.incrementalUpdate(r,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=r.end===o.getData().count()},n.prototype.updateTransform=function(r,o,s){var l=r.getData();if(this.group.dirty(),!this._finished||l.count()>1e4)return{update:!0};var c=pointsLayout("").reset(r,o,s);c.progress&&c.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout(l)},n.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},n.prototype._getClipShape=function(r){if(r.get("clip",!0)){var o=r.coordinateSystem;return o&&o.getArea&&o.getArea(.1)}},n.prototype._updateSymbolDraw=function(r,o){var s=this._symbolDraw,l=o.pipelineContext,c=l.large;return(!s||c!==this._isLargeDraw)&&(s&&s.remove(),s=this._symbolDraw=c?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=c,this.group.removeAll()),this.group.add(s.group),s},n.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(ChartView),GridModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n}(ComponentModel),CartesianAxisModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(a,n,r,o){each$f(AXIS_TYPES,function(s,l){var c=merge(merge({},axisDefault[l],!0),o,!0),u=function(d){__extends(f,d);function f(){var v=d!==null&&d.apply(this,arguments)||this;return v.type=n+"Axis."+l,v}return f.prototype.mergeDefaultAndTheme=function(v,g){var y=fetchLayoutMode(this),_=y?getLayoutParams(v):{},S=g.getTheme();merge(v,S.get(l+"Axis")),merge(v,this.getDefaultOption()),v.type=getAxisType(v),y&&mergeLayoutParam(v,_,y)},f.prototype.optionUpdated=function(){var v=this.option;v.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},f.prototype.getCategories=function(v){var g=this.option;if(g.type==="category")return v?g.data:this.__ordinalMeta.categories},f.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},f.type=n+"Axis."+l,f.defaultOption=c,f}(r);a.registerComponentModel(u)}),a.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(a){return a.type||(a.data?"category":"value")}var Cartesian=function(){function a(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return a.prototype.getAxis=function(n){return this._axes[n]},a.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},a.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(r){return r.scale.type===n})},a.prototype.addAxis=function(n){var r=n.dim;this._axes[r]=n,this._dimList.push(r)},a}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(a){return a.type==="interval"||a.type==="time"}var Cartesian2D=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=cartesian2DDimensions,r}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(r)||!canCalculateAffineTransform(o))){var s=r.getExtent(),l=o.getExtent(),c=this.dataToPoint([s[0],l[0]]),u=this.dataToPoint([s[1],l[1]]),d=s[1]-s[0],f=l[1]-l[0];if(!(!d||!f)){var v=(u[0]-c[0])/d,g=(u[1]-c[1])/f,y=c[0]-s[0]*v,_=c[1]-l[0]*g,S=this._transform=[v,0,0,g,y,_];this._invTransform=invert([],S)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(r){var o=this.getAxis("x"),s=this.getAxis("y");return o.contain(o.toLocalCoord(r[0]))&&s.contain(s.toLocalCoord(r[1]))},n.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},n.prototype.containZone=function(r,o){var s=this.dataToPoint(r),l=this.dataToPoint(o),c=this.getArea(),u=new BoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1]);return c.intersect(u)},n.prototype.dataToPoint=function(r,o,s){s=s||[];var l=r[0],c=r[1];if(this._transform&&l!=null&&isFinite(l)&&c!=null&&isFinite(c))return applyTransform$1(s,r,this._transform);var u=this.getAxis("x"),d=this.getAxis("y");return s[0]=u.toGlobalCoord(u.dataToCoord(l,o)),s[1]=d.toGlobalCoord(d.dataToCoord(c,o)),s},n.prototype.clampData=function(r,o){var s=this.getAxis("x").scale,l=this.getAxis("y").scale,c=s.getExtent(),u=l.getExtent(),d=s.parse(r[0]),f=l.parse(r[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),o[1]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),o},n.prototype.pointToData=function(r,o){var s=[];if(this._invTransform)return applyTransform$1(s,r,this._invTransform);var l=this.getAxis("x"),c=this.getAxis("y");return s[0]=l.coordToData(l.toLocalCoord(r[0]),o),s[1]=c.coordToData(c.toLocalCoord(r[1]),o),s},n.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},n.prototype.getArea=function(r){r=r||0;var o=this.getAxis("x").getGlobalExtent(),s=this.getAxis("y").getGlobalExtent(),l=Math.min(o[0],o[1])-r,c=Math.min(s[0],s[1])-r,u=Math.max(o[0],o[1])-l+r,d=Math.max(s[0],s[1])-c+r;return new BoundingRect(l,c,u,d)},n}(Cartesian),Axis2D=function(a){__extends(n,a);function n(r,o,s,l,c){var u=a.call(this,r,o,s)||this;return u.index=0,u.type=l||"value",u.position=c||"bottom",u}return n.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},n.prototype.getGlobalExtent=function(r){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),r&&o[0]>o[1]&&o.reverse(),o},n.prototype.pointToData=function(r,o){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),o)},n.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},n}(Axis);function layout$2(a,n,r){r=r||{};var o=a.coordinateSystem,s=n.axis,l={},c=s.getAxesOnZeroOf()[0],u=s.position,d=c?"onZero":u,f=s.dim,v=o.getRect(),g=[v.x,v.x+v.width,v.y,v.y+v.height],y={left:0,right:1,top:0,bottom:1,onZero:2},_=n.get("offset")||0,S=f==="x"?[g[2]-_,g[3]+_]:[g[0]-_,g[1]+_];if(c){var x=c.toGlobalCoord(c.dataToCoord(0));S[y.onZero]=Math.max(Math.min(x,S[1]),S[0])}l.position=[f==="y"?S[y[d]]:g[0],f==="x"?S[y[d]]:g[3]],l.rotation=Math.PI/2*(f==="x"?0:1);var T={top:-1,bottom:1,left:-1,right:1};l.labelDirection=l.tickDirection=l.nameDirection=T[u],l.labelOffset=c?S[y[u]]-S[y.onZero]:0,n.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(r.labelInside,n.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var w=n.get(["axisLabel","rotate"]);return l.labelRotate=d==="top"?-w:w,l.z2=1,l}function isCartesian2DSeries(a){return a.get("coordinateSystem")==="cartesian2d"}function findAxisModels(a){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(r,o){var s=o.replace(/Model$/,""),l=a.getReferringComponents(s,SINGLE_REFERRING).models[0];n[o]=l}),n}var mathLog=Math.log;function alignScaleTicks(a,n,r){var o=IntervalScale.prototype,s=o.getTicks.call(r),l=o.getTicks.call(r,!0),c=s.length-1,u=o.getInterval.call(r),d=getScaleExtent(a,n),f=d.extent,v=d.fixMin,g=d.fixMax;if(a.type==="log"){var y=mathLog(a.base);f=[mathLog(f[0])/y,mathLog(f[1])/y]}a.setExtent(f[0],f[1]),a.calcNiceExtent({splitNumber:c,fixMin:v,fixMax:g});var _=o.getExtent.call(a);v&&(f[0]=_[0]),g&&(f[1]=_[1]);var S=o.getInterval.call(a),x=f[0],T=f[1];if(v&&g)S=(T-x)/c;else if(v)for(T=f[0]+S*c;T<f[1]&&isFinite(T)&&isFinite(f[1]);)S=increaseInterval(S),T=f[0]+S*c;else if(g)for(x=f[1]-S*c;x>f[0]&&isFinite(x)&&isFinite(f[0]);)S=increaseInterval(S),x=f[1]-S*c;else{var w=a.getTicks().length-1;w>c&&(S=increaseInterval(S));var E=S*c;T=Math.ceil(f[1]/S)*S,x=round$3(T-E),x<0&&f[0]>=0?(x=0,T=round$3(E)):T>0&&f[1]<=0&&(T=0,x=-round$3(E))}var P=(s[0].value-l[0].value)/u,D=(s[c].value-l[c].value)/u;o.setExtent.call(a,x+S*P,T+S*D),o.setInterval.call(a,S),(P||D)&&o.setNiceExtent.call(a,x+S,T-S)}var Grid=function(){function a(n,r,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,r,o),this.model=n}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(n,r){var o=this._axesMap;this._updateScale(n,this.model);function s(c){var u,d=keys(c),f=d.length;if(f){for(var v=[],g=f-1;g>=0;g--){var y=+d[g],_=c[y],S=_.model,x=_.scale;isIntervalOrLogScale(x)&&S.get("alignTicks")&&S.get("interval")==null?v.push(_):(niceScaleExtent(x,S),isIntervalOrLogScale(x)&&(u=_))}v.length&&(u||(u=v.pop(),niceScaleExtent(u.scale,u.model)),each$f(v,function(T){alignScaleTicks(T.scale,T.model,u.scale)}))}}s(o.x),s(o.y);var l={};each$f(o.x,function(c){fixAxisOnZero(o,"y",c,l)}),each$f(o.y,function(c){fixAxisOnZero(o,"x",c,l)}),this.resize(this.model,r)},a.prototype.resize=function(n,r,o){var s=n.getBoxLayoutParams(),l=!o&&n.get("containLabel"),c=getLayoutRect(s,{width:r.getWidth(),height:r.getHeight()});this._rect=c;var u=this._axesList;d(),l&&(each$f(u,function(f){if(!f.model.get(["axisLabel","inside"])){var v=estimateLabelUnionRect(f);if(v){var g=f.isHorizontal()?"height":"width",y=f.model.get(["axisLabel","margin"]);c[g]-=v[g]+y,f.position==="top"?c.y+=v.height+y:f.position==="left"&&(c.x+=v.width+y)}}}),d()),each$f(this._coordsList,function(f){f.calcAffineTransform()});function d(){each$f(u,function(f){var v=f.isHorizontal(),g=v?[0,c.width]:[0,c.height],y=f.inverse?1:0;f.setExtent(g[y],g[1-y]),updateAxisTransform(f,v?c.x:c.y)})}},a.prototype.getAxis=function(n,r){var o=this._axesMap[n];if(o!=null)return o[r||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(n,r){if(n!=null&&r!=null){var o="x"+n+"y"+r;return this._coordsMap[o]}isObject$3(n)&&(r=n.yAxisIndex,n=n.xAxisIndex);for(var s=0,l=this._coordsList;s<l.length;s++)if(l[s].getAxis("x").index===n||l[s].getAxis("y").index===r)return l[s]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(n,r,o){var s=this._findConvertTarget(r);return s.cartesian?s.cartesian.dataToPoint(o):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(o)):null},a.prototype.convertFromPixel=function(n,r,o){var s=this._findConvertTarget(r);return s.cartesian?s.cartesian.pointToData(o):s.axis?s.axis.coordToData(s.axis.toLocalCoord(o)):null},a.prototype._findConvertTarget=function(n){var r=n.seriesModel,o=n.xAxisModel||r&&r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],s=n.yAxisModel||r&&r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],l=n.gridModel,c=this._coordsList,u,d;if(r)u=r.coordinateSystem,indexOf(c,u)<0&&(u=null);else if(o&&s)u=this.getCartesian(o.componentIndex,s.componentIndex);else if(o)d=this.getAxis("x",o.componentIndex);else if(s)d=this.getAxis("y",s.componentIndex);else if(l){var f=l.coordinateSystem;f===this&&(u=this._coordsList[0])}return{cartesian:u,axis:d}},a.prototype.containPoint=function(n){var r=this._coordsList[0];if(r)return r.containPoint(n)},a.prototype._initCartesian=function(n,r,o){var s=this,l=this,c={left:!1,right:!1,top:!1,bottom:!1},u={x:{},y:{}},d={x:0,y:0};if(r.eachComponent("xAxis",f("x"),this),r.eachComponent("yAxis",f("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=u,each$f(u.x,function(v,g){each$f(u.y,function(y,_){var S="x"+g+"y"+_,x=new Cartesian2D(S);x.master=s,x.model=n,s._coordsMap[S]=x,s._coordsList.push(x),x.addAxis(v),x.addAxis(y)})});function f(v){return function(g,y){if(isAxisUsedInTheGrid(g,n)){var _=g.get("position");v==="x"?_!=="top"&&_!=="bottom"&&(_=c.bottom?"top":"bottom"):_!=="left"&&_!=="right"&&(_=c.left?"right":"left"),c[_]=!0;var S=new Axis2D(v,createScaleByModel$1(g),[0,0],g.get("type"),_),x=S.type==="category";S.onBand=x&&g.get("boundaryGap"),S.inverse=g.get("inverse"),g.axis=S,S.model=g,S.grid=l,S.index=y,l._axesList.push(S),u[v][y]=S,d[v]++}}}},a.prototype._updateScale=function(n,r){each$f(this._axesList,function(s){if(s.scale.setExtent(1/0,-1/0),s.type==="category"){var l=s.model.get("categorySortInfo");s.scale.setSortInfo(l)}}),n.eachSeries(function(s){if(isCartesian2DSeries(s)){var l=findAxisModels(s),c=l.xAxisModel,u=l.yAxisModel;if(!isAxisUsedInTheGrid(c,r)||!isAxisUsedInTheGrid(u,r))return;var d=this.getCartesian(c.componentIndex,u.componentIndex),f=s.getData(),v=d.getAxis("x"),g=d.getAxis("y");o(f,v),o(f,g)}},this);function o(s,l){each$f(getDataDimensionsOnAxis(s,l.dim),function(c){l.scale.unionExtentFromData(s,c)})}},a.prototype.getTooltipAxes=function(n){var r=[],o=[];return each$f(this.getCartesians(),function(s){var l=n!=null&&n!=="auto"?s.getAxis(n):s.getBaseAxis(),c=s.getOtherAxis(l);indexOf(r,l)<0&&r.push(l),indexOf(o,c)<0&&o.push(c)}),{baseAxes:r,otherAxes:o}},a.create=function(n,r){var o=[];return n.eachComponent("grid",function(s,l){var c=new a(s,n,r);c.name="grid_"+l,c.resize(s,r,!0),s.coordinateSystem=c,o.push(c)}),n.eachSeries(function(s){if(isCartesian2DSeries(s)){var l=findAxisModels(s),c=l.xAxisModel,u=l.yAxisModel,d=c.getCoordSysModel(),f=d.coordinateSystem;s.coordinateSystem=f.getCartesian(c.componentIndex,u.componentIndex)}}),o},a.dimensions=cartesian2DDimensions,a}();function isAxisUsedInTheGrid(a,n){return a.getCoordSysModel()===n}function fixAxisOnZero(a,n,r,o){r.getAxesOnZeroOf=function(){return l?[l]:[]};var s=a[n],l,c=r.model,u=c.get(["axisLine","onZero"]),d=c.get(["axisLine","onZeroAxisIndex"]);if(!u)return;if(d!=null)canOnZeroToAxis(s[d])&&(l=s[d]);else for(var f in s)if(s.hasOwnProperty(f)&&canOnZeroToAxis(s[f])&&!o[v(s[f])]){l=s[f];break}l&&(o[v(l)]=!0);function v(g){return g.dim+"_"+g.index}}function canOnZeroToAxis(a){return a&&a.type!=="category"&&a.type!=="time"&&ifAxisCrossZero(a)}function updateAxisTransform(a,n){var r=a.getExtent(),o=r[0]+r[1];a.toGlobalCoord=a.dim==="x"?function(s){return s+n}:function(s){return o-s+n},a.toLocalCoord=a.dim==="x"?function(s){return s-n}:function(s){return o-s+n}}var PI$3=Math.PI,AxisBuilder=function(){function a(n,r){this.group=new Group$4,this.opt=r,this.axisModel=n,defaults(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var o=new Group$4({x:r.position[0],y:r.position[1],rotation:r.rotation});o.updateTransform(),this._transformGroup=o}return a.prototype.hasBuilder=function(n){return!!builders[n]},a.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(n,r,o){var s=remRadian(r-n),l,c;return isRadianAroundZero(s)?(c=o>0?"top":"bottom",l="center"):isRadianAroundZero(s-PI$3)?(c=o>0?"bottom":"top",l="center"):(c="middle",s>0&&s<PI$3?l=o>0?"right":"left":l=o>0?"left":"right"),{rotation:s,textAlign:l,textVerticalAlign:c}},a.makeAxisEventDataBase=function(n){var r={componentType:n.mainType,componentIndex:n.componentIndex};return r[n.mainType+"Index"]=n.componentIndex,r},a.isLabelSilent=function(n){var r=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||r&&r.show)},a}(),builders={axisLine:function(a,n,r,o){var s=n.get(["axisLine","show"]);if(s==="auto"&&a.handleAutoShown&&(s=a.handleAutoShown("axisLine")),!!s){var l=n.axis.getExtent(),c=o.transform,u=[l[0],0],d=[l[1],0],f=u[0]>d[0];c&&(applyTransform$1(u,u,c),applyTransform$1(d,d,c));var v=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new Line$2({shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:v,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(g.shape,g.style.lineWidth),g.anid="line",r.add(g);var y=n.get(["axisLine","symbol"]);if(y!=null){var _=n.get(["axisLine","symbolSize"]);isString(y)&&(y=[y,y]),(isString(_)||isNumber(_))&&(_=[_,_]);var S=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,_),x=_[0],T=_[1];each$f([{rotate:a.rotation+Math.PI/2,offset:S[0],r:0},{rotate:a.rotation-Math.PI/2,offset:S[1],r:Math.sqrt((u[0]-d[0])*(u[0]-d[0])+(u[1]-d[1])*(u[1]-d[1]))}],function(w,E){if(y[E]!=="none"&&y[E]!=null){var P=createSymbol$1(y[E],-x/2,-T/2,x,T,v.stroke,!0),D=w.r+w.offset,L=f?d:u;P.attr({rotation:w.rotate,x:L[0]+D*Math.cos(a.rotation),y:L[1]-D*Math.sin(a.rotation),silent:!0,z2:11}),r.add(P)}})}}},axisTickLabel:function(a,n,r,o){var s=buildAxisMajorTicks(r,o,n,a),l=buildAxisLabel(r,o,n,a);if(fixMinMaxLabelShow(n,l,s),buildAxisMinorTicks(r,o,n,a.tickDirection),n.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(l,function(u){return{label:u,priority:u.z2,defaultAttr:{ignore:u.ignore}}}));hideOverlap(c)}},axisName:function(a,n,r,o){var s=retrieve(a.axisName,n.get("name"));if(s){var l=n.get("nameLocation"),c=a.nameDirection,u=n.getModel("nameTextStyle"),d=n.get("nameGap")||0,f=n.axis.getExtent(),v=f[0]>f[1]?-1:1,g=[l==="start"?f[0]-v*d:l==="end"?f[1]+v*d:(f[0]+f[1])/2,isNameLocationCenter(l)?a.labelOffset+c*d:0],y,_=n.get("nameRotate");_!=null&&(_=_*PI$3/180);var S;isNameLocationCenter(l)?y=AxisBuilder.innerTextLayout(a.rotation,_??a.rotation,c):(y=endTextLayout(a.rotation,l,_||0,f),S=a.axisNameAvailableWidth,S!=null&&(S=Math.abs(S/Math.sin(y.rotation)),!isFinite(S)&&(S=null)));var x=u.getFont(),T=n.get("nameTruncate",!0)||{},w=T.ellipsis,E=retrieve(a.nameTruncateMaxWidth,T.maxWidth,S),P=new ZRText({x:g[0],y:g[1],rotation:y.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle(u,{text:s,font:x,overflow:"truncate",width:E,ellipsis:w,fill:u.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:u.get("align")||y.textAlign,verticalAlign:u.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(setTooltipConfig({el:P,componentModel:n,itemName:s}),P.__fullText=s,P.anid="name",n.get("triggerEvent")){var D=AxisBuilder.makeAxisEventDataBase(n);D.targetType="axisName",D.name=s,getECData(P).eventData=D}o.add(P),P.updateTransform(),r.add(P),P.decomposeTransform()}}};function endTextLayout(a,n,r,o){var s=remRadian(r-a),l,c,u=o[0]>o[1],d=n==="start"&&!u||n!=="start"&&u;return isRadianAroundZero(s-PI$3/2)?(c=d?"bottom":"top",l="center"):isRadianAroundZero(s-PI$3*1.5)?(c=d?"top":"bottom",l="center"):(c="middle",s<PI$3*1.5&&s>PI$3/2?l=d?"left":"right":l=d?"right":"left"),{rotation:s,textAlign:l,textVerticalAlign:c}}function fixMinMaxLabelShow(a,n,r){if(!shouldShowAllLabels(a.axis)){var o=a.get(["axisLabel","showMinLabel"]),s=a.get(["axisLabel","showMaxLabel"]);n=n||[],r=r||[];var l=n[0],c=n[1],u=n[n.length-1],d=n[n.length-2],f=r[0],v=r[1],g=r[r.length-1],y=r[r.length-2];o===!1?(ignoreEl(l),ignoreEl(f)):isTwoLabelOverlapped(l,c)&&(o?(ignoreEl(c),ignoreEl(v)):(ignoreEl(l),ignoreEl(f))),s===!1?(ignoreEl(u),ignoreEl(g)):isTwoLabelOverlapped(d,u)&&(s?(ignoreEl(d),ignoreEl(y)):(ignoreEl(u),ignoreEl(g)))}}function ignoreEl(a){a&&(a.ignore=!0)}function isTwoLabelOverlapped(a,n){var r=a&&a.getBoundingRect().clone(),o=n&&n.getBoundingRect().clone();if(!(!r||!o)){var s=identity([]);return rotate(s,s,-a.rotation),r.applyTransform(mul([],s,a.getLocalTransform())),o.applyTransform(mul([],s,n.getLocalTransform())),r.intersect(o)}}function isNameLocationCenter(a){return a==="middle"||a==="center"}function createTicks(a,n,r,o,s){for(var l=[],c=[],u=[],d=0;d<a.length;d++){var f=a[d].coord;c[0]=f,c[1]=0,u[0]=f,u[1]=r,n&&(applyTransform$1(c,c,n),applyTransform$1(u,u,n));var v=new Line$2({shape:{x1:c[0],y1:c[1],x2:u[0],y2:u[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(v.shape,v.style.lineWidth),v.anid=s+"_"+a[d].tickValue,l.push(v)}return l}function buildAxisMajorTicks(a,n,r,o){var s=r.axis,l=r.getModel("axisTick"),c=l.get("show");if(c==="auto"&&o.handleAutoShown&&(c=o.handleAutoShown("axisTick")),!(!c||s.scale.isBlank())){for(var u=l.getModel("lineStyle"),d=o.tickDirection*l.get("length"),f=s.getTicksCoords(),v=createTicks(f,n.transform,d,defaults(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<v.length;g++)a.add(v[g]);return v}}function buildAxisMinorTicks(a,n,r,o){var s=r.axis,l=r.getModel("minorTick");if(!(!l.get("show")||s.scale.isBlank())){var c=s.getMinorTicksCoords();if(c.length)for(var u=l.getModel("lineStyle"),d=o*l.get("length"),f=defaults(u.getLineStyle(),defaults(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),v=0;v<c.length;v++)for(var g=createTicks(c[v],n.transform,d,f,"minorticks_"+v),y=0;y<g.length;y++)a.add(g[y])}}function buildAxisLabel(a,n,r,o){var s=r.axis,l=retrieve(o.axisLabelShow,r.get(["axisLabel","show"]));if(!(!l||s.scale.isBlank())){var c=r.getModel("axisLabel"),u=c.get("margin"),d=s.getViewLabels(),f=(retrieve(o.labelRotate,c.get("rotate"))||0)*PI$3/180,v=AxisBuilder.innerTextLayout(o.rotation,f,o.labelDirection),g=r.getCategories&&r.getCategories(!0),y=[],_=AxisBuilder.isLabelSilent(r),S=r.get("triggerEvent");return each$f(d,function(x,T){var w=s.scale.type==="ordinal"?s.scale.getRawOrdinalNumber(x.tickValue):x.tickValue,E=x.formattedLabel,P=x.rawLabel,D=c;if(g&&g[w]){var L=g[w];isObject$3(L)&&L.textStyle&&(D=new Model(L.textStyle,c,r.ecModel))}var $=D.getTextColor()||r.get(["axisLine","lineStyle","color"]),O=s.dataToCoord(w),B=D.getShallow("align",!0)||v.textAlign,V=retrieve2(D.getShallow("alignMinLabel",!0),B),F=retrieve2(D.getShallow("alignMaxLabel",!0),B),U=D.getShallow("verticalAlign",!0)||D.getShallow("baseline",!0)||v.textVerticalAlign,G=retrieve2(D.getShallow("verticalAlignMinLabel",!0),U),W=retrieve2(D.getShallow("verticalAlignMaxLabel",!0),U),j=new ZRText({x:O,y:o.labelOffset+o.labelDirection*u,rotation:v.rotation,silent:_,z2:10+(x.level||0),style:createTextStyle(D,{text:E,align:T===0?V:T===d.length-1?F:B,verticalAlign:T===0?G:T===d.length-1?W:U,fill:isFunction($)?$(s.type==="category"?P:s.type==="value"?w+"":w,T):$})});if(j.anid="label_"+w,setTooltipConfig({el:j,componentModel:r,itemName:E,formatterParamsExtra:{isTruncated:function(){return j.isTruncated},value:P,tickIndex:T}}),S){var K=AxisBuilder.makeAxisEventDataBase(r);K.targetType="axisLabel",K.value=P,K.tickIndex=T,s.type==="category"&&(K.dataIndex=w),getECData(j).eventData=K}n.add(j),j.updateTransform(),y.push(j),a.add(j),j.decomposeTransform()}),y}}function collect(a,n){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(r,a,n),r.seriesInvolved&&collectSeriesInfo(r,a),r}function collectAxesInfo(a,n,r){var o=n.getComponent("tooltip"),s=n.getComponent("axisPointer"),l=s.get("link",!0)||[],c=[];each$f(r.getCoordinateSystems(),function(u){if(!u.axisPointerEnabled)return;var d=makeKey(u.model),f=a.coordSysAxesInfo[d]={};a.coordSysMap[d]=u;var v=u.model,g=v.getModel("tooltip",o);if(each$f(u.getAxes(),curry$1(x,!1,null)),u.getTooltipAxes&&o&&g.get("show")){var y=g.get("trigger")==="axis",_=g.get(["axisPointer","type"])==="cross",S=u.getTooltipAxes(g.get(["axisPointer","axis"]));(y||_)&&each$f(S.baseAxes,curry$1(x,_?"cross":!0,y)),_&&each$f(S.otherAxes,curry$1(x,"cross",!1))}function x(T,w,E){var P=E.model.getModel("axisPointer",s),D=P.get("show");if(!(!D||D==="auto"&&!T&&!isHandleTrigger(P))){w==null&&(w=P.get("triggerTooltip")),P=T?makeAxisPointerModel(E,g,s,n,T,w):P;var L=P.get("snap"),$=P.get("triggerEmphasis"),O=makeKey(E.model),B=w||L||E.type==="category",V=a.axesInfo[O]={key:O,axis:E,coordSys:u,axisPointerModel:P,triggerTooltip:w,triggerEmphasis:$,involveSeries:B,snap:L,useHandle:isHandleTrigger(P),seriesModels:[],linkGroup:null};f[O]=V,a.seriesInvolved=a.seriesInvolved||B;var F=getLinkGroupIndex(l,E);if(F!=null){var U=c[F]||(c[F]={axesInfo:{}});U.axesInfo[O]=V,U.mapper=l[F].mapper,V.linkGroup=U}}}})}function makeAxisPointerModel(a,n,r,o,s,l){var c=n.getModel("axisPointer"),u=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};each$f(u,function(y){d[y]=clone$4(c.get(y))}),d.snap=a.type!=="category"&&!!l,c.get("type")==="cross"&&(d.type="line");var f=d.label||(d.label={});if(f.show==null&&(f.show=!1),s==="cross"){var v=c.get(["label","show"]);if(f.show=v??!0,!l){var g=d.lineStyle=c.get("crossStyle");g&&defaults(f,g.textStyle)}}return a.model.getModel("axisPointer",new Model(d,r,o))}function collectSeriesInfo(a,n){n.eachSeries(function(r){var o=r.coordinateSystem,s=r.get(["tooltip","trigger"],!0),l=r.get(["tooltip","show"],!0);!o||s==="none"||s===!1||s==="item"||l===!1||r.get(["axisPointer","show"],!0)===!1||each$f(a.coordSysAxesInfo[makeKey(o.model)],function(c){var u=c.axis;o.getAxis(u.dim)===u&&(c.seriesModels.push(r),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=r.getData().count())})})}function getLinkGroupIndex(a,n){for(var r=n.model,o=n.dim,s=0;s<a.length;s++){var l=a[s]||{};if(checkPropInLink(l[o+"AxisId"],r.id)||checkPropInLink(l[o+"AxisIndex"],r.componentIndex)||checkPropInLink(l[o+"AxisName"],r.name))return s}}function checkPropInLink(a,n){return a==="all"||isArray$1(a)&&indexOf(a,n)>=0||a===n}function fixValue(a){var n=getAxisInfo$1(a);if(n){var r=n.axisPointerModel,o=n.axis.scale,s=r.option,l=r.get("status"),c=r.get("value");c!=null&&(c=o.parse(c));var u=isHandleTrigger(r);l==null&&(s.status=u?"show":"hide");var d=o.getExtent().slice();d[0]>d[1]&&d.reverse(),(c==null||c>d[1])&&(c=d[1]),c<d[0]&&(c=d[0]),s.value=c,u&&(s.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(a){var n=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(a)]}function getAxisPointerModel(a){var n=getAxisInfo$1(a);return n&&n.axisPointerModel}function isHandleTrigger(a){return!!a.get(["handle","show"])}function makeKey(a){return a.type+"||"+a.id}var axisPointerClazz={},AxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s,l){this.axisPointerClass&&fixValue(r),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,s,!0)},n.prototype.updateAxisPointer=function(r,o,s,l){this._doUpdateAxisPointerClass(r,s,!1)},n.prototype.remove=function(r,o){var s=this._axisPointer;s&&s.remove(o)},n.prototype.dispose=function(r,o){this._disposeAxisPointer(o),a.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(r,o,s){var l=n.getAxisPointerClass(this.axisPointerClass);if(l){var c=getAxisPointerModel(r);c?(this._axisPointer||(this._axisPointer=new l)).render(r,c,o,s):this._disposeAxisPointer(o)}},n.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},n.registerAxisPointerClass=function(r,o){axisPointerClazz[r]=o},n.getAxisPointerClass=function(r){return r&&axisPointerClazz[r]},n.type="axis",n}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(a,n,r,o){var s=r.axis;if(!s.scale.isBlank()){var l=r.getModel("splitArea"),c=l.getModel("areaStyle"),u=c.get("color"),d=o.coordinateSystem.getRect(),f=s.getTicksCoords({tickModel:l,clamp:!0});if(f.length){var v=u.length,g=inner$f(a).splitAreaColors,y=createHashMap(),_=0;if(g)for(var S=0;S<f.length;S++){var x=g.get(f[S].tickValue);if(x!=null){_=(x+(v-1)*S)%v;break}}var T=s.toGlobalCoord(f[0].coord),w=c.getAreaStyle();u=isArray$1(u)?u:[u];for(var S=1;S<f.length;S++){var E=s.toGlobalCoord(f[S].coord),P=void 0,D=void 0,L=void 0,$=void 0;s.isHorizontal()?(P=T,D=d.y,L=E-P,$=d.height,T=P+L):(P=d.x,D=T,L=d.width,$=E-D,T=D+$);var O=f[S-1].tickValue;O!=null&&y.set(O,_),n.add(new Rect$2({anid:O!=null?"area_"+O:null,shape:{x:P,y:D,width:L,height:$},style:defaults({fill:u[_]},w),autoBatch:!0,silent:!0})),_=(_+1)%v}inner$f(a).splitAreaColors=y}}}function rectCoordAxisHandleRemove(a){inner$f(a).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="CartesianAxisPointer",r}return n.prototype.render=function(r,o,s,l){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var u=r.getCoordSysModel(),d=layout$2(u,r),f=new AxisBuilder(r,extend({handleAutoShown:function(g){for(var y=u.coordinateSystem.getCartesians(),_=0;_<y.length;_++)if(isIntervalOrLogScale(y[_].getOtherAxis(r.axis).scale))return!0;return!1}},d));each$f(axisBuilderAttrs$3,f.add,f),this._axisGroup.add(f.getGroup()),each$f(selfBuilderAttrs$2,function(g){r.get([g,"show"])&&axisElementBuilders$2[g](this,this._axisGroup,r,u)},this);var v=l&&l.type==="changeAxisOrder"&&l.isInitSort;v||groupTransition(c,this._axisGroup,r),a.prototype.render.call(this,r,o,s,l)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n}(AxisView),axisElementBuilders$2={splitLine:function(a,n,r,o){var s=r.axis;if(!s.scale.isBlank()){var l=r.getModel("splitLine"),c=l.getModel("lineStyle"),u=c.get("color"),d=l.get("showMinLine")!==!1,f=l.get("showMaxLine")!==!1;u=isArray$1(u)?u:[u];for(var v=o.coordinateSystem.getRect(),g=s.isHorizontal(),y=0,_=s.getTicksCoords({tickModel:l}),S=[],x=[],T=c.getLineStyle(),w=0;w<_.length;w++){var E=s.toGlobalCoord(_[w].coord);if(!(w===0&&!d||w===_.length-1&&!f)){var P=_[w].tickValue;g?(S[0]=E,S[1]=v.y,x[0]=E,x[1]=v.y+v.height):(S[0]=v.x,S[1]=E,x[0]=v.x+v.width,x[1]=E);var D=y++%u.length,L=new Line$2({anid:P!=null?"line_"+P:null,autoBatch:!0,shape:{x1:S[0],y1:S[1],x2:x[0],y2:x[1]},style:defaults({stroke:u[D]},T),silent:!0});subPixelOptimizeLine(L.shape,T.lineWidth),n.add(L)}}}},minorSplitLine:function(a,n,r,o){var s=r.axis,l=r.getModel("minorSplitLine"),c=l.getModel("lineStyle"),u=o.coordinateSystem.getRect(),d=s.isHorizontal(),f=s.getMinorTicksCoords();if(f.length)for(var v=[],g=[],y=c.getLineStyle(),_=0;_<f.length;_++)for(var S=0;S<f[_].length;S++){var x=s.toGlobalCoord(f[_][S].coord);d?(v[0]=x,v[1]=u.y,g[0]=x,g[1]=u.y+u.height):(v[0]=u.x,v[1]=x,g[0]=u.x+u.width,g[1]=x);var T=new Line$2({anid:"minor_line_"+f[_][S].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:g[0],y2:g[1]},style:y,silent:!0});subPixelOptimizeLine(T.shape,y.lineWidth),n.add(T)}},splitArea:function(a,n,r,o){rectCoordAxisBuildSplitArea(a,n,r,o)}},CartesianXAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="xAxis",n}(CartesianAxisView),CartesianYAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=CartesianXAxisView.type,r}return n.type="yAxis",n}(CartesianAxisView),GridView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="grid",r}return n.prototype.render=function(r,o){this.group.removeAll(),r.get("show")&&this.group.add(new Rect$2({shape:r.coordinateSystem.getRect(),style:defaults({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(ComponentView),extraOption={offset:0};function install$N(a){a.registerComponentView(GridView),a.registerComponentModel(GridModel),a.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(a,"x",CartesianAxisModel,extraOption),axisModelCreator(a,"y",CartesianAxisModel,extraOption),a.registerComponentView(CartesianXAxisView),a.registerComponentView(CartesianYAxisView),a.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(a){use(install$N),a.registerSeriesModel(ScatterSeriesModel),a.registerChartView(ScatterView),a.registerLayout(pointsLayout("scatter"))}function radarLayout(a){a.eachSeriesByType("radar",function(n){var r=n.getData(),o=[],s=n.coordinateSystem;if(s){var l=s.getIndicatorAxes();each$f(l,function(c,u){r.each(r.mapDimension(l[u].dim),function(d,f){o[f]=o[f]||[];var v=s.dataToPoint(d,u);o[f][u]=isValidPoint(v)?v:getValueMissingPoint(s)})}),r.each(function(c){var u=find(o[c],function(d){return isValidPoint(d)})||getValueMissingPoint(s);o[c].push(u.slice()),r.setItemLayout(c,o[c])})}})}function isValidPoint(a){return!isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return[a.cx,a.cy]}function radarBackwardCompat(a){var n=a.polar;if(n){isArray$1(n)||(n=[n]);var r=[];each$f(n,function(o,s){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),a.radar=a.radar||[],isArray$1(a.radar)||(a.radar=[a.radar]),a.radar.push(o)):r.push(o)}),a.polar=r}each$f(a.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$1=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=r.coordinateSystem,c=this.group,u=r.getData(),d=this._data;function f(y,_){var S=y.getItemVisual(_,"symbol")||"circle";if(S!=="none"){var x=normalizeSymbolSize(y.getItemVisual(_,"symbolSize")),T=createSymbol$1(S,-1,-1,2,2),w=y.getItemVisual(_,"symbolRotate")||0;return T.attr({style:{strokeNoScale:!0},z2:100,scaleX:x[0]/2,scaleY:x[1]/2,rotation:w*Math.PI/180||0}),T}}function v(y,_,S,x,T,w){S.removeAll();for(var E=0;E<_.length-1;E++){var P=f(x,T);P&&(P.__dimIdx=E,y[E]?(P.setPosition(y[E]),graphic[w?"initProps":"updateProps"](P,{x:_[E][0],y:_[E][1]},r,T)):P.setPosition(_[E]),S.add(P))}}function g(y){return map$1(y,function(_){return[l.cx,l.cy]})}u.diff(d).add(function(y){var _=u.getItemLayout(y);if(_){var S=new Polygon,x=new Polyline$1,T={shape:{points:_}};S.shape.points=g(_),x.shape.points=g(_),initProps(S,T,r,y),initProps(x,T,r,y);var w=new Group$4,E=new Group$4;w.add(x),w.add(S),w.add(E),v(x.shape.points,_,E,u,y,!0),u.setItemGraphicEl(y,w)}}).update(function(y,_){var S=d.getItemGraphicEl(_),x=S.childAt(0),T=S.childAt(1),w=S.childAt(2),E={shape:{points:u.getItemLayout(y)}};E.shape.points&&(v(x.shape.points,E.shape.points,w,u,y,!1),saveOldStyle(T),saveOldStyle(x),updateProps$1(x,E,r),updateProps$1(T,E,r),u.setItemGraphicEl(y,S))}).remove(function(y){c.remove(d.getItemGraphicEl(y))}).execute(),u.eachItemGraphicEl(function(y,_){var S=u.getItemModel(_),x=y.childAt(0),T=y.childAt(1),w=y.childAt(2),E=u.getItemVisual(_,"style"),P=E.fill;c.add(y),x.useStyle(defaults(S.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:P})),setStatesStylesFromModel(x,S,"lineStyle"),setStatesStylesFromModel(T,S,"areaStyle");var D=S.getModel("areaStyle"),L=D.isEmpty()&&D.parentModel.isEmpty();T.ignore=L,each$f(["emphasis","select","blur"],function(B){var V=S.getModel([B,"areaStyle"]),F=V.isEmpty()&&V.parentModel.isEmpty();T.ensureState(B).ignore=F&&L}),T.useStyle(defaults(D.getAreaStyle(),{fill:P,opacity:.7,decal:E.decal}));var $=S.getModel("emphasis"),O=$.getModel("itemStyle").getItemStyle();w.eachChild(function(B){if(B instanceof ZRImage){var V=B.style;B.useStyle(extend({image:V.image,x:V.x,y:V.y,width:V.width,height:V.height},E))}else B.useStyle(E),B.setColor(P),B.style.strokeNoScale=!0;var F=B.ensureState("emphasis");F.style=clone$4(O);var U=u.getStore().get(u.getDimensionIndex(B.__dimIdx),_);(U==null||isNaN(U))&&(U=""),setLabelStyle(B,getLabelStatesModels(S),{labelFetcher:u.hostModel,labelDataIndex:_,labelDimIndex:B.__dimIdx,defaultText:U,inheritColor:P,defaultOpacity:E.opacity})}),toggleHoverEmphasis(y,$.get("focus"),$.get("blurScope"),$.get("disabled"))}),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(ChartView),RadarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(r,o,s){var l=this.getData(),c=this.coordinateSystem,u=c.getIndicatorAxes(),d=this.getData().getName(r),f=d===""?this.name:d,v=retrieveVisualColorForTooltipMarker(this,r);return createTooltipMarkup("section",{header:f,sortBlocks:!0,blocks:map$1(u,function(g){var y=l.get(l.mapDimension(g.dim),r);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:v,name:g.name,value:y,sortParam:y})})})},n.prototype.getTooltipPosition=function(r){if(r!=null){for(var o=this.getData(),s=this.coordinateSystem,l=o.getValues(map$1(s.dimensions,function(f){return o.mapDimension(f)}),r),c=0,u=l.length;c<u;c++)if(!isNaN(l[c])){var d=s.getIndicatorAxes();return s.coordToPoint(d[c].dataToCoord(l[c]),c)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(a,n){return defaults({show:n},a)}var RadarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),o=this.get("splitNumber"),s=this.get("scale"),l=this.get("axisLine"),c=this.get("axisTick"),u=this.get("axisLabel"),d=this.get("axisName"),f=this.get(["axisName","show"]),v=this.get(["axisName","formatter"]),g=this.get("axisNameGap"),y=this.get("triggerEvent"),_=map$1(this.get("indicator")||[],function(S){S.max!=null&&S.max>0&&!S.min?S.min=0:S.min!=null&&S.min<0&&!S.max&&(S.max=0);var x=d;S.color!=null&&(x=defaults({color:S.color},d));var T=merge(clone$4(S),{boundaryGap:r,splitNumber:o,scale:s,axisLine:l,axisTick:c,axisLabel:u,name:S.text,showName:f,nameLocation:"end",nameGap:g,nameTextStyle:x,triggerEvent:y},!1);if(isString(v)){var w=T.name;T.name=v.replace("{value}",w??"")}else isFunction(v)&&(T.name=v(T.name,T));var E=new Model(T,null,this.ecModel);return mixin(E,AxisModelCommonMixin.prototype),E.mainType="radar",E.componentIndex=this.componentIndex,E},this);this._indicatorModels=_},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=this.group;l.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},n.prototype._buildAxes=function(r){var o=r.coordinateSystem,s=o.getIndicatorAxes(),l=map$1(s,function(c){var u=c.model.get("showName")?c.name:"",d=new AxisBuilder(c.model,{axisName:u,position:[o.cx,o.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(l,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(r){var o=r.coordinateSystem,s=o.getIndicatorAxes();if(!s.length)return;var l=r.get("shape"),c=r.getModel("splitLine"),u=r.getModel("splitArea"),d=c.getModel("lineStyle"),f=u.getModel("areaStyle"),v=c.get("show"),g=u.get("show"),y=d.get("color"),_=f.get("color"),S=isArray$1(y)?y:[y],x=isArray$1(_)?_:[_],T=[],w=[];function E(K,q,ie){var ee=ie%q.length;return K[ee]=K[ee]||[],ee}if(l==="circle")for(var P=s[0].getTicksCoords(),D=o.cx,L=o.cy,$=0;$<P.length;$++){if(v){var O=E(T,S,$);T[O].push(new Circle({shape:{cx:D,cy:L,r:P[$].coord}}))}if(g&&$<P.length-1){var O=E(w,x,$);w[O].push(new Ring({shape:{cx:D,cy:L,r0:P[$].coord,r:P[$+1].coord}}))}}else for(var B,V=map$1(s,function(K,q){var ie=K.getTicksCoords();return B=B==null?ie.length-1:Math.min(ie.length-1,B),map$1(ie,function(ee){return o.coordToPoint(ee.coord,q)})}),F=[],$=0;$<=B;$++){for(var U=[],G=0;G<s.length;G++)U.push(V[G][$]);if(U[0]&&U.push(U[0].slice()),v){var O=E(T,S,$);T[O].push(new Polyline$1({shape:{points:U}}))}if(g&&F){var O=E(w,x,$-1);w[O].push(new Polygon({shape:{points:U.concat(F)}}))}F=U.slice().reverse()}var W=d.getLineStyle(),j=f.getAreaStyle();each$f(w,function(K,q){this.group.add(mergePath(K,{style:defaults({stroke:"none",fill:x[q%x.length]},j),silent:!0}))},this),each$f(T,function(K,q){this.group.add(mergePath(K,{style:defaults({fill:"none",stroke:S[q%S.length]},W),silent:!0}))},this)},n.type="radar",n}(ComponentView),IndicatorAxis=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this,r,o,s)||this;return l.type="value",l.angle=0,l.name="",l}return n}(Axis),Radar=function(){function a(n,r,o){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(s,l){var c="indicator_"+l,u=new IndicatorAxis(c,new IntervalScale);return u.name=s.get("name"),u.model=s,s.axis=u,this.dimensions.push(c),u},this),this.resize(n,o)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(n,r){var o=this._indicatorAxes[r];return this.coordToPoint(o.dataToCoord(n),r)},a.prototype.coordToPoint=function(n,r){var o=this._indicatorAxes[r],s=o.angle,l=this.cx+n*Math.cos(s),c=this.cy-n*Math.sin(s);return[l,c]},a.prototype.pointToData=function(n){var r=n[0]-this.cx,o=n[1]-this.cy,s=Math.sqrt(r*r+o*o);r/=s,o/=s;for(var l=Math.atan2(-o,r),c=1/0,u,d=-1,f=0;f<this._indicatorAxes.length;f++){var v=this._indicatorAxes[f],g=Math.abs(l-v.angle);g<c&&(u=v,d=f,c=g)}return[d,+(u&&u.coordToData(s))]},a.prototype.resize=function(n,r){var o=n.get("center"),s=r.getWidth(),l=r.getHeight(),c=Math.min(s,l)/2;this.cx=parsePercent(o[0],s),this.cy=parsePercent(o[1],l),this.startAngle=n.get("startAngle")*Math.PI/180;var u=n.get("radius");(isString(u)||isNumber(u))&&(u=[0,u]),this.r0=parsePercent(u[0],c),this.r=parsePercent(u[1],c),each$f(this._indicatorAxes,function(d,f){d.setExtent(this.r0,this.r);var v=this.startAngle+f*Math.PI*2/this._indicatorAxes.length;v=Math.atan2(Math.sin(v),Math.cos(v)),d.angle=v},this)},a.prototype.update=function(n,r){var o=this._indicatorAxes,s=this._model;each$f(o,function(u){u.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(u,d){if(!(u.get("coordinateSystem")!=="radar"||n.getComponent("radar",u.get("radarIndex"))!==s)){var f=u.getData();each$f(o,function(v){v.scale.unionExtentFromData(f,f.mapDimension(v.dim))})}},this);var l=s.get("splitNumber"),c=new IntervalScale;c.setExtent(0,l),c.setInterval(1),each$f(o,function(u,d){alignScaleTicks(u.scale,u.model,c)})},a.prototype.convertToPixel=function(n,r,o){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(n,r,o){return console.warn("Not implemented."),null},a.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},a.create=function(n,r){var o=[];return n.eachComponent("radar",function(s){var l=new a(s,n,r);o.push(l),s.coordinateSystem=l}),n.eachSeriesByType("radar",function(s){s.get("coordinateSystem")==="radar"&&(s.coordinateSystem=o[s.get("radarIndex")||0])}),o},a.dimensions=[],a}();function install$L(a){a.registerCoordinateSystem("radar",Radar),a.registerComponentModel(RadarModel),a.registerComponentView(RadarView),a.registerVisual({seriesType:"radar",reset:function(n){var r=n.getData();r.each(function(o){r.setItemVisual(o,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function install$K(a){use(install$L),a.registerChartView(RadarView$1),a.registerSeriesModel(RadarSeriesModel),a.registerLayout(radarLayout),a.registerProcessor(dataFilter$1("radar")),a.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(a,n,r){var o=getStore(a);o[n]=r}function release(a,n,r){var o=getStore(a),s=o[n];s===r&&(o[n]=null)}function isTaken(a,n){return!!getStore(a)[n]}function getStore(a){return a[ATTR]||(a[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;o._zr=r;var s=bind$1(o._mousedownHandler,o),l=bind$1(o._mousemoveHandler,o),c=bind$1(o._mouseupHandler,o),u=bind$1(o._mousewheelHandler,o),d=bind$1(o._pinchHandler,o);return o.enable=function(f,v){this.disable(),this._opt=defaults(clone$4(v)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),f==null&&(f=!0),(f===!0||f==="move"||f==="pan")&&(r.on("mousedown",s),r.on("mousemove",l),r.on("mouseup",c)),(f===!0||f==="scale"||f==="zoom")&&(r.on("mousewheel",u),r.on("pinch",d))},o.disable=function(){r.off("mousedown",s),r.off("mousemove",l),r.off("mouseup",c),r.off("mousewheel",u),r.off("pinch",d)},o}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(r){this.pointerChecker=r},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(r){if(!isMiddleOrRightButtonOnMouseUpDown(r)){for(var o=r.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var s=r.offsetX,l=r.offsetY;this.pointerChecker&&this.pointerChecker(r,s,l)&&(this._x=s,this._y=l,this._dragging=!0)}},n.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var o=r.offsetX,s=r.offsetY,l=this._x,c=this._y,u=o-l,d=s-c;this._x=o,this._y=s,this._opt.preventDefaultMouseMove&&stop(r.event),trigger$1(this,"pan","moveOnMouseMove",r,{dx:u,dy:d,oldX:l,oldY:c,newX:o,newY:s,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(r){isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(r){var o=isAvailableBehavior("zoomOnMouseWheel",r,this._opt),s=isAvailableBehavior("moveOnMouseWheel",r,this._opt),l=r.wheelDelta,c=Math.abs(l),u=r.offsetX,d=r.offsetY;if(!(l===0||!o&&!s)){if(o){var f=c>3?1.4:c>1?1.2:1.1,v=l>0?f:1/f;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",r,{scale:v,originX:u,originY:d,isAvailableBehavior:null})}if(s){var g=Math.abs(l),y=(l>0?1:-1)*(g>3?.4:g>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:y,originX:u,originY:d,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(r){if(!isTaken(this._zr,"globalPan")){var o=r.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,r,{scale:o,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},n}(Eventful);function checkPointerAndTrigger(a,n,r,o,s){a.pointerChecker&&a.pointerChecker(o,s.originX,s.originY)&&(stop(o.event),trigger$1(a,n,r,o,s))}function trigger$1(a,n,r,o,s){s.isAvailableBehavior=bind$1(isAvailableBehavior,null,r,o),a.trigger(n,s)}function isAvailableBehavior(a,n,r){var o=r[a];return!a||o&&(!isString(o)||n.event[o+"Key"])}function updateViewOnPan(a,n,r){var o=a.target;o.x+=n,o.y+=r,o.dirty()}function updateViewOnZoom(a,n,r,o){var s=a.target,l=a.zoomLimit,c=a.zoom=a.zoom||1;if(c*=n,l){var u=l.min||0,d=l.max||1/0;c=Math.max(Math.min(d,c),u)}var f=c/a.zoom;a.zoom=c,s.x-=(r-s.x)*(f-1),s.y-=(o-s.y)*(f-1),s.scaleX*=f,s.scaleY*=f,s.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(a,n,r){var o=n.getComponentByElement(a.topTarget),s=o&&o.coordinateSystem;return o&&o!==r&&!IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType)&&s&&s.model!==r}function parseXML(a){if(isString(a)){var n=new DOMParser;a=n.parseFromString(a,"text/xml")}var r=a;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(n,r){r=r||{};var o=parseXML(n);this._defsUsePending=[];var s=new Group$4;this._root=s;var l=[],c=o.getAttribute("viewBox")||"",u=parseFloat(o.getAttribute("width")||r.width),d=parseFloat(o.getAttribute("height")||r.height);isNaN(u)&&(u=null),isNaN(d)&&(d=null),parseAttributes(o,s,null,!0,!1);for(var f=o.firstChild;f;)this._parseNode(f,s,l,null,!1,!1),f=f.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var v,g;if(c){var y=splitNumberSequence(c);y.length>=4&&(v={x:parseFloat(y[0]||0),y:parseFloat(y[1]||0),width:parseFloat(y[2]),height:parseFloat(y[3])})}if(v&&u!=null&&d!=null&&(g=makeViewBoxTransform(v,{x:0,y:0,width:u,height:d}),!r.ignoreViewBox)){var _=s;s=new Group$4,s.add(_),_.scaleX=_.scaleY=g.scale,_.x=g.x,_.y=g.y}return!r.ignoreRootClip&&u!=null&&d!=null&&s.setClipPath(new Rect$2({shape:{x:0,y:0,width:u,height:d}})),{root:s,width:u,height:d,viewBoxRect:v,viewBoxTransform:g,named:l}},a.prototype._parseNode=function(n,r,o,s,l,c){var u=n.nodeName.toLowerCase(),d,f=s;if(u==="defs"&&(l=!0),u==="text"&&(c=!0),u==="defs"||u==="switch")d=r;else{if(!l){var v=nodeParsers[u];if(v&&hasOwn(nodeParsers,u)){d=v.call(this,n,r);var g=n.getAttribute("name");if(g){var y={name:g,namedFrom:null,svgNodeTagLower:u,el:d};o.push(y),u==="g"&&(f=y)}else s&&o.push({name:s.name,namedFrom:s,svgNodeTagLower:u,el:d});r.add(d)}}var _=paintServerParsers[u];if(_&&hasOwn(paintServerParsers,u)){var S=_.call(this,n),x=n.getAttribute("id");x&&(this._defs[x]=S)}}if(d&&d.isGroup)for(var T=n.firstChild;T;)T.nodeType===1?this._parseNode(T,d,o,f,l,c):T.nodeType===3&&c&&this._parseText(T,d),T=T.nextSibling},a.prototype._parseText=function(n,r){var o=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),applyTextAlignment(o,r);var s=o.style,l=s.fontSize;l&&l<9&&(s.fontSize=9,o.scaleX*=l/9,o.scaleY*=l/9);var c=(s.fontSize||s.fontFamily)&&[s.fontStyle,s.fontWeight,(s.fontSize||12)+"px",s.fontFamily||"sans-serif"].join(" ");s.font=c;var u=o.getBoundingRect();return this._textX+=u.width,r.add(o),o},a.internalField=function(){nodeParsers={g:function(n,r){var o=new Group$4;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o},rect:function(n,r){var o=new Rect$2;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(n,r){var o=new Circle;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),o.silent=!0,o},line:function(n,r){var o=new Line$2;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(n,r){var o=new Ellipse;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(n,r){var o=n.getAttribute("points"),s;o&&(s=parsePoints(o));var l=new Polygon({shape:{points:s||[]},silent:!0});return inheritStyle(r,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l},polyline:function(n,r){var o=n.getAttribute("points"),s;o&&(s=parsePoints(o));var l=new Polyline$1({shape:{points:s||[]},silent:!0});return inheritStyle(r,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l},image:function(n,r){var o=new ZRImage;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),o.silent=!0,o},text:function(n,r){var o=n.getAttribute("x")||"0",s=n.getAttribute("y")||"0",l=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(l),this._textY=parseFloat(s)+parseFloat(c);var u=new Group$4;return inheritStyle(r,u),parseAttributes(n,u,this._defsUsePending,!1,!0),u},tspan:function(n,r){var o=n.getAttribute("x"),s=n.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),s!=null&&(this._textY=parseFloat(s));var l=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0",u=new Group$4;return inheritStyle(r,u),parseAttributes(n,u,this._defsUsePending,!1,!0),this._textX+=parseFloat(l),this._textY+=parseFloat(c),u},path:function(n,r){var o=n.getAttribute("d")||"",s=createFromString(o);return inheritStyle(r,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s.silent=!0,s}}}(),a}(),paintServerParsers={lineargradient:function(a){var n=parseInt(a.getAttribute("x1")||"0",10),r=parseInt(a.getAttribute("y1")||"0",10),o=parseInt(a.getAttribute("x2")||"10",10),s=parseInt(a.getAttribute("y2")||"0",10),l=new LinearGradient(n,r,o,s);return parsePaintServerUnit(a,l),parseGradientColorStops(a,l),l},radialgradient:function(a){var n=parseInt(a.getAttribute("cx")||"0",10),r=parseInt(a.getAttribute("cy")||"0",10),o=parseInt(a.getAttribute("r")||"0",10),s=new RadialGradient(n,r,o);return parsePaintServerUnit(a,s),parseGradientColorStops(a,s),s}};function parsePaintServerUnit(a,n){var r=a.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(a,n){for(var r=a.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var o=r.getAttribute("offset"),s=void 0;o&&o.indexOf("%")>0?s=parseInt(o,10)/100:o?s=parseFloat(o):s=0;var l={};parseInlineStyle(r,l,l);var c=l.stopColor||r.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:s,color:c})}r=r.nextSibling}}function inheritStyle(a,n){a&&a.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,a.__inheritedStyle))}function parsePoints(a){for(var n=splitNumberSequence(a),r=[],o=0;o<n.length;o+=2){var s=parseFloat(n[o]),l=parseFloat(n[o+1]);r.push([s,l])}return r}function parseAttributes(a,n,r,o,s){var l=n,c=l.__inheritedStyle=l.__inheritedStyle||{},u={};a.nodeType===1&&(parseTransformAttribute(a,n),parseInlineStyle(a,c,u),o||parseAttributeStyle(a,c,u)),l.style=l.style||{},c.fill!=null&&(l.style.fill=getFillStrokeStyle(l,"fill",c.fill,r)),c.stroke!=null&&(l.style.stroke=getFillStrokeStyle(l,"stroke",c.stroke,r)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){c[d]!=null&&(l.style[d]=parseFloat(c[d]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(d){c[d]!=null&&(l.style[d]=c[d])}),s&&(l.__selfStyle=u),c.lineDash&&(l.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(d){return parseFloat(d)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(l.invisible=!0),c.display==="none"&&(l.ignore=!0)}function applyTextAlignment(a,n){var r=n.__selfStyle;if(r){var o=r.textBaseline,s=o;!o||o==="auto"||o==="baseline"?s="alphabetic":o==="before-edge"||o==="text-before-edge"?s="top":o==="after-edge"||o==="text-after-edge"?s="bottom":(o==="central"||o==="mathematical")&&(s="middle"),a.style.textBaseline=s}var l=n.__inheritedStyle;if(l){var c=l.textAlign,u=c;c&&(c==="middle"&&(u="center"),a.style.textAlign=u)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(a,n,r,o){var s=r&&r.match(urlRegex);if(s){var l=trim$1(s[1]);o.push([a,n,l]);return}return r==="none"&&(r=null),r}function applyDefs(a,n){for(var r=0;r<n.length;r++){var o=n[r];o[0].style[o[1]]=a[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(a){return a.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(a,n){var r=a.getAttribute("transform");if(r){r=r.replace(/,/g," ");var o=[],s=null;r.replace(transformRegex,function(g,y,_){return o.push(y,_),""});for(var l=o.length-1;l>0;l-=2){var c=o[l],u=o[l-1],d=splitNumberSequence(c);switch(s=s||create$1(),u){case"translate":translate(s,s,[parseFloat(d[0]),parseFloat(d[1]||"0")]);break;case"scale":scale$1(s,s,[parseFloat(d[0]),parseFloat(d[1]||d[0])]);break;case"rotate":rotate(s,s,-parseFloat(d[0])*DEGREE_TO_ANGLE,[parseFloat(d[1]||"0"),parseFloat(d[2]||"0")]);break;case"skewX":var f=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(s,[1,0,f,1,0,0],s);break;case"skewY":var v=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(s,[1,v,0,1,0,0],s);break;case"matrix":s[0]=parseFloat(d[0]),s[1]=parseFloat(d[1]),s[2]=parseFloat(d[2]),s[3]=parseFloat(d[3]),s[4]=parseFloat(d[4]),s[5]=parseFloat(d[5]);break}}n.setLocalTransform(s)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(a,n,r){var o=a.getAttribute("style");if(o){styleRegex.lastIndex=0;for(var s;(s=styleRegex.exec(o))!=null;){var l=s[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,l)?INHERITABLE_STYLE_ATTRIBUTES_MAP[l]:null;c&&(n[c]=s[2]);var u=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,l)?SELF_STYLE_ATTRIBUTES_MAP[l]:null;u&&(r[u]=s[2])}}}function parseAttributeStyle(a,n,r){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var s=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],l=a.getAttribute(s);l!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[s]]=l)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var s=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],l=a.getAttribute(s);l!=null&&(r[SELF_STYLE_ATTRIBUTES_MAP[s]]=l)}}function makeViewBoxTransform(a,n){var r=n.width/a.width,o=n.height/a.height,s=Math.min(r,o);return{scale:s,x:-(a.x+a.width/2)*s+(n.x+n.width/2),y:-(a.y+a.height/2)*s+(n.y+n.height/2)}}function parseSVG(a,n){var r=new SVGParser;return r.parse(a,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function a(n,r){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(r)}return a.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=createRegions(n.named),o=r.regions,s=r.regionsMap;this._regions=o,this._regionsMap=s}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(n){var r,o;try{r=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=r.root,assert(o!=null)}catch(T){throw new Error(`Invalid svg format
`+T.message)}var s=new Group$4;s.add(o),s.isGeoSVGGraphicRoot=!0;var l=r.width,c=r.height,u=r.viewBoxRect,d=this._boundingRect;if(!d){var f=void 0,v=void 0,g=void 0,y=void 0;if(l!=null?(f=0,g=l):u&&(f=u.x,g=u.width),c!=null?(v=0,y=c):u&&(v=u.y,y=u.height),f==null||v==null){var _=o.getBoundingRect();f==null&&(f=_.x,g=_.width),v==null&&(v=_.y,y=_.height)}d=this._boundingRect=new BoundingRect(f,v,g,y)}if(u){var S=makeViewBoxTransform(u,d);o.scaleX=o.scaleY=S.scale,o.x=S.x,o.y=S.y}s.setClipPath(new Rect$2({shape:d.plain()}));var x=[];return each$f(r.named,function(T){REGION_AVAILABLE_SVG_TAG_MAP.get(T.svgNodeTagLower)!=null&&(x.push(T),setSilent(T.el))}),{root:s,boundingRect:d,named:x}},a.prototype.useGraphic=function(n){var r=this._usedGraphicMap,o=r.get(n);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(n,o),o)},a.prototype.freeGraphic=function(n){var r=this._usedGraphicMap,o=r.get(n);o&&(r.removeKey(n),this._freedGraphics.push(o))},a}();function setSilent(a){a.silent=!1,a.isGroup&&a.traverse(function(n){n.silent=!1})}function createRegions(a){var n=[],r=createHashMap();return each$f(a,function(o){if(o.namedFrom==null){var s=new GeoSVGRegion(o.name,o.el);n.push(s),r.set(o.name,s)}}),{regions:n,regionsMap:r}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(a,n){if(a==="china"){for(var r=0;r<n.length;r++)if(n[r].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(a,n){if(a==="china"){var r=coordsOffsetMap[n.name];if(r){var o=n.getCenter();o[0]+=r[0]/10.5,o[1]+=-r[1]/(10.5/.75),n.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(a,n){a==="china"&&n.name==="台湾"&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function a(n,r,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=o,this._geoJSON=parseInput(r)}return a.prototype.load=function(n,r){r=r||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(r);if(!o){var s=this._parseToRegions(r);o=this._parsedMap.set(r,{regions:s,boundingRect:calculateBoundingRect(s)})}var l=createHashMap(),c=[];return each$f(o.regions,function(u){var d=u.name;n&&hasOwn(n,d)&&(u=u.cloneShallow(d=n[d])),c.push(u),l.set(d,u)}),{regions:c,boundingRect:o.boundingRect||new BoundingRect(0,0,0,0),regionsMap:l}},a.prototype._parseToRegions=function(n){var r=this._mapName,o=this._geoJSON,s;try{s=o?parseGeoJSON(o,n):[]}catch(l){throw new Error(`Invalid geoJson format
`+l.message)}return fixNanhai(r,s),each$f(s,function(l){var c=l.name;fixTextCoords(r,l),fixDiaoyuIsland(r,l);var u=this._specialAreas&&this._specialAreas[c];u&&l.transformTo(u.left,u.top,u.width,u.height)},this),s},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function calculateBoundingRect(a){for(var n,r=0;r<a.length;r++){var o=a[r].getBoundingRect();n=n||o.clone(),n.union(o)}return n}function parseInput(a){return isString(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var storage=createHashMap();const geoSourceManager={registerMap:function(a,n,r){if(n.svg){var o=new GeoSVGResource(a,n.svg);storage.set(a,o)}else{var s=n.geoJson||n.geoJSON;s&&!n.features?r=n.specialAreas:s=n;var o=new GeoJSONResource(a,s,r);storage.set(a,o)}},getGeoResource:function(a){return storage.get(a)},getMapForUser:function(a){var n=storage.get(a);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(a,n,r){var o=storage.get(a);if(o)return o.load(n,r)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(a){var n=a.getItemStyle(),r=a.get("areaColor");return r!=null&&(n.fill=r),n}function fixLineStyle(a){var n=a.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=function(){function a(n){var r=new Group$4;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Group$4),r.add(this._svgGroup=new Group$4)}return a.prototype.draw=function(n,r,o,s,l){var c=n.mainType==="geo",u=n.getData&&n.getData();c&&r.eachComponent({mainType:"series",subType:"map"},function(w){!u&&w.getHostGeoModel()===n&&(u=w.getData())});var d=n.coordinateSystem,f=this._regionsGroup,v=this.group,g=d.getTransformInfo(),y=g.raw,_=g.roam,S=!f.childAt(0)||l;S?(v.x=_.x,v.y=_.y,v.scaleX=_.scaleX,v.scaleY=_.scaleY,v.dirty()):updateProps$1(v,_,n);var x=u&&u.getVisual("visualMeta")&&u.getVisual("visualMeta").length>0,T={api:o,geo:d,mapOrGeoModel:n,data:u,isVisualEncodedByVisualMap:x,isGeo:c,transformInfoRaw:y};d.resourceType==="geoJSON"?this._buildGeoJSON(T):d.resourceType==="geoSVG"&&this._buildSVG(T),this._updateController(n,r,o),this._updateMapSelectHandler(n,f,o,s)},a.prototype._buildGeoJSON=function(n){var r=this._regionsGroupByName=createHashMap(),o=createHashMap(),s=this._regionsGroup,l=n.transformInfoRaw,c=n.mapOrGeoModel,u=n.data,d=n.geo.projection,f=d&&d.stream;function v(_,S){return S&&(_=S(_)),_&&[_[0]*l.scaleX+l.x,_[1]*l.scaleY+l.y]}function g(_){for(var S=[],x=!f&&d&&d.project,T=0;T<_.length;++T){var w=v(_[T],x);w&&S.push(w)}return S}function y(_){return{shape:{points:g(_)}}}s.removeAll(),each$f(n.geo.regions,function(_){var S=_.name,x=r.get(S),T=o.get(S)||{},w=T.dataIdx,E=T.regionModel;if(!x){x=r.set(S,new Group$4),s.add(x),w=u?u.indexOfName(S):null,E=n.isGeo?c.getRegionModel(S):u?u.getItemModel(w):null;var P=E.get("silent",!0);P!=null&&(x.silent=P),o.set(S,{dataIdx:w,regionModel:E})}var D=[],L=[];each$f(_.geometries,function(B){if(B.type==="polygon"){var V=[B.exterior].concat(B.interiors||[]);f&&(V=projectPolys(V,f)),each$f(V,function(U){D.push(new Polygon(y(U)))})}else{var F=B.points;f&&(F=projectPolys(F,f,!0)),each$f(F,function(U){L.push(new Polyline$1(y(U)))})}});var $=v(_.getCenter(),d&&d.project);function O(B,V){if(B.length){var F=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:B}});x.add(F),applyOptionStyleForRegion(n,F,w,E),resetLabelForRegion(n,F,S,E,c,w,$),V&&(fixLineStyle(F),each$f(F.states,fixLineStyle))}}O(D),O(L,!0)}),r.each(function(_,S){var x=o.get(S),T=x.dataIdx,w=x.regionModel;resetEventTriggerForRegion(n,_,S,w,c,T),resetTooltipForRegion(n,_,S,w,c),resetStateTriggerForRegion(n,_,S,w,c)},this)},a.prototype._buildSVG=function(n){var r=n.geo.map,o=n.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var s=this._svgDispatcherMap=createHashMap(),l=!1;each$f(this._svgGraphicRecord.named,function(c){var u=c.name,d=n.mapOrGeoModel,f=n.data,v=c.svgNodeTagLower,g=c.el,y=f?f.indexOfName(u):null,_=d.getRegionModel(u);OPTION_STYLE_ENABLED_TAG_MAP.get(v)!=null&&g instanceof Displayable&&applyOptionStyleForRegion(n,g,y,_),g instanceof Displayable&&(g.culling=!0);var S=_.get("silent",!0);if(S!=null&&(g.silent=S),g.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(v)!=null&&resetLabelForRegion(n,g,u,_,d,y,null),resetEventTriggerForRegion(n,g,u,_,d,y),resetTooltipForRegion(n,g,u,_,d),STATE_TRIGGER_TAG_MAP.get(v)!=null)){var x=resetStateTriggerForRegion(n,g,u,_,d);x==="self"&&(l=!0);var T=s.get(u)||s.set(u,[]);T.push(g)}},this),this._enableBlurEntireSVG(l,n)},a.prototype._enableBlurEntireSVG=function(n,r){if(n&&r.isGeo){var o=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),s=o.opacity;this._svgGraphicRecord.root.traverse(function(l){if(!l.isGroup){setDefaultStateProxy(l);var c=l.ensureState("blur").style||{};c.opacity==null&&s!=null&&(c.opacity=s),l.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(n,r){if(n==null)return[];var o=r.coordinateSystem;if(o.resourceType==="geoJSON"){var s=this._regionsGroupByName;if(s){var l=s.get(n);return l?[l]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},a.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},a.prototype._useSVG=function(n){var r=geoSourceManager.getGeoResource(n);if(r&&r.type==="geoSVG"){var o=r.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=n}},a.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var r=geoSourceManager.getGeoResource(n);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(n,r,o){var s=n.coordinateSystem,l=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=s.getZoom(),l.enable(n.get("roam")||!1);var u=n.mainType;function d(){var f={type:"geoRoam",componentType:u};return f[u+"Id"]=n.id,f}l.off("pan").on("pan",function(f){this._mouseDownFlag=!1,updateViewOnPan(c,f.dx,f.dy),o.dispatchAction(extend(d(),{dx:f.dx,dy:f.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(f){this._mouseDownFlag=!1,updateViewOnZoom(c,f.scale,f.originX,f.originY),o.dispatchAction(extend(d(),{totalZoom:c.zoom,zoom:f.scale,originX:f.originX,originY:f.originY,animation:{duration:0}}))},this),l.setPointerChecker(function(f,v,g){return s.containPoint([v,g])&&!onIrrelevantElement(f,o,n)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var r=n.getTextContent();r&&(r.ignore=mapLabelRaw(r).ignore)})},a.prototype._updateMapSelectHandler=function(n,r,o,s){var l=this;r.off("mousedown"),r.off("click"),n.get("selectedMode")&&(r.on("mousedown",function(){l._mouseDownFlag=!0}),r.on("click",function(c){l._mouseDownFlag&&(l._mouseDownFlag=!1)}))},a}();function applyOptionStyleForRegion(a,n,r,o){var s=o.getModel("itemStyle"),l=o.getModel(["emphasis","itemStyle"]),c=o.getModel(["blur","itemStyle"]),u=o.getModel(["select","itemStyle"]),d=getFixedItemStyle(s),f=getFixedItemStyle(l),v=getFixedItemStyle(u),g=getFixedItemStyle(c),y=a.data;if(y){var _=y.getItemVisual(r,"style"),S=y.getItemVisual(r,"decal");a.isVisualEncodedByVisualMap&&_.fill&&(d.fill=_.fill),S&&(d.decal=createOrUpdatePatternFromDecal(S,a.api))}n.setStyle(d),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=f,n.ensureState("select").style=v,n.ensureState("blur").style=g,setDefaultStateProxy(n)}function resetLabelForRegion(a,n,r,o,s,l,c){var u=a.data,d=a.isGeo,f=u&&isNaN(u.get(u.mapDimension("value"),l)),v=u&&u.getItemLayout(l);if(d||f||v&&v.showLabel){var g=d?r:l,y=void 0;(!u||l>=0)&&(y=s);var _=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(o),{labelFetcher:y,labelDataIndex:g,defaultText:r},_);var S=n.getTextContent();if(S&&(mapLabelRaw(S).ignore=S.ignore,n.textConfig&&c)){var x=n.getBoundingRect().clone();n.textConfig.layoutRect=x,n.textConfig.position=[(c[0]-x.x)/x.width*100+"%",(c[1]-x.y)/x.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(a,n,r,o,s,l){a.data?a.data.setItemGraphicEl(l,n):getECData(n).eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:r,region:o&&o.option||{}}}function resetTooltipForRegion(a,n,r,o,s){a.data||setTooltipConfig({el:n,componentModel:s,itemName:r,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(a,n,r,o,s){n.highDownSilentOnTouch=!!s.get("selectedMode");var l=o.getModel("emphasis"),c=l.get("focus");return toggleHoverEmphasis(n,c,l.get("blurScope"),l.get("disabled")),a.isGeo&&enableComponentHighDownFeatures(n,s,r),c}function projectPolys(a,n,r){var o=[],s;function l(){s=[]}function c(){s.length&&(o.push(s),s=[])}var u=n({polygonStart:l,polygonEnd:c,lineStart:l,lineEnd:c,point:function(d,f){isFinite(d)&&isFinite(f)&&s.push([d,f])},sphere:function(){}});return!r&&u.polygonStart(),each$f(a,function(d){u.lineStart();for(var f=0;f<d.length;f++)u.point(d[f][0],d[f][1]);u.lineEnd()}),!r&&u.polygonEnd(),o}var MapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s,l){if(!(l&&l.type==="mapToggleSelect"&&l.from===this.uid)){var c=this.group;if(c.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&l&&l.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),l&&l.type==="geoRoam"&&l.componentType==="series"&&l.seriesId===r.id){var u=this._mapDraw;u&&c.add(u.group)}else if(r.needsDrawMap){var u=this._mapDraw||new MapDraw(s);c.add(u.group),u.draw(r,o,s,this,l),this._mapDraw=u}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(r,o,s)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(r,o,s){var l=r.originalData,c=this.group;l.each(l.mapDimension("value"),function(u,d){if(!isNaN(u)){var f=l.getItemLayout(d);if(!(!f||!f.point)){var v=f.point,g=f.offset,y=new Circle({style:{fill:r.getData().getVisual("style").fill},shape:{cx:v[0]+g*9,cy:v[1],r:3},silent:!0,z2:8+(g?0:Z2_EMPHASIS_LIFT+1)});if(!g){var _=r.mainSeries.getData(),S=l.getName(d),x=_.indexOfName(S),T=l.getItemModel(d),w=T.getModel("label"),E=_.getItemGraphicEl(x);setLabelStyle(y,getLabelStatesModels(T),{labelFetcher:{getFormattedLabel:function(P,D){return r.getFormattedLabel(x,D)}},defaultText:S}),y.disableLabelAnimation=!0,w.get("position")||y.setTextConfig({position:"bottom"}),E.onHoverStateChange=function(P){setStatesFlag(y,P)}}c.add(y)}}})},n.type="map",n}(ChartView),MapSeries=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(o){if(o!=null){var s=this.getData().getName(o),l=this.coordinateSystem,c=l.getRegion(s);return c&&l.dataToPoint(c.getCenter())}},r}return n.prototype.getInitialData=function(r){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),s=createHashMap(),l=[],c=0,u=o.count();c<u;c++){var d=o.getName(c);s.set(d,c)}var f=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(f.regions,function(v){var g=v.name,y=s.get(g),_=v.properties&&v.properties.echartsStyle,S;y==null?(S={name:g},l.push(S)):S=o.getRawDataItem(y),_&&merge(S,_)}),o.appendData(l),o},n.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(r){var o=this.getData();return o.get(o.mapDimension("value"),r)},n.prototype.getRegionModel=function(r){var o=this.getData();return o.getItemModel(o.indexOfName(r))},n.prototype.formatTooltip=function(r,o,s){for(var l=this.getData(),c=this.getRawValue(r),u=l.getName(r),d=this.seriesGroup,f=[],v=0;v<d.length;v++){var g=d[v].originalData.indexOfName(u),y=l.mapDimension("value");isNaN(d[v].originalData.get(y,g))||f.push(d[v].name)}return createTooltipMarkup("section",{header:f.join(", "),noHeader:!f.length,blocks:[createTooltipMarkup("nameValue",{name:u,value:c})]})},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.getLegendIcon=function(r){var o=r.icon||"roundRect",s=createSymbol$1(o,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return s.setStyle(r.itemStyle),s.style.stroke="none",o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),s},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(SeriesModel);function dataStatistics(a,n){var r={};return each$f(a,function(o){o.each(o.mapDimension("value"),function(s,l){var c="ec-"+o.getName(l);r[c]=r[c]||[],isNaN(s)||r[c].push(s)})}),a[0].map(a[0].mapDimension("value"),function(o,s){for(var l="ec-"+a[0].getName(s),c=0,u=1/0,d=-1/0,f=r[l].length,v=0;v<f;v++)u=Math.min(u,r[l][v]),d=Math.max(d,r[l][v]),c+=r[l][v];var g;return n==="min"?g=u:n==="max"?g=d:n==="average"?g=c/f:g=c,f===0?NaN:g})}function mapDataStatistic(a){var n={};a.eachSeriesByType("map",function(r){var o=r.getHostGeoModel(),s=o?"o"+o.id:"i"+r.getMapType();(n[s]=n[s]||[]).push(r)}),each$f(n,function(r,o){for(var s=dataStatistics(map$1(r,function(c){return c.getData()}),r[0].get("mapValueCalculation")),l=0;l<r.length;l++)r[l].originalData=r[l].getData();for(var l=0;l<r.length;l++)r[l].seriesGroup=r,r[l].needsDrawMap=l===0&&!r[l].getHostGeoModel(),r[l].setData(s.cloneShallow()),r[l].mainSeries=r[0]})}function mapSymbolLayout(a){var n={};a.eachSeriesByType("map",function(r){var o=r.getMapType();if(!(r.getHostGeoModel()||n[o])){var s={};each$f(r.seriesGroup,function(c){var u=c.coordinateSystem,d=c.originalData;c.get("showLegendSymbol")&&a.getComponent("legend")&&d.each(d.mapDimension("value"),function(f,v){var g=d.getName(v),y=u.getRegion(g);if(!(!y||isNaN(f))){var _=s[g]||0,S=u.dataToPoint(y.getCenter());s[g]=_+1,d.setItemLayout(v,{point:S,offset:_})}})});var l=r.getData();l.each(function(c){var u=l.getName(c),d=l.getItemLayout(c)||{};d.showLabel=!s[u],l.setItemLayout(c,d)}),n[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable,o._rawTransformable=new Transformable,o.name=r,o}return n.prototype.setBoundingRect=function(r,o,s,l){return this._rect=new BoundingRect(r,o,s,l),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(r,o,s,l){this._transformTo(r,o,s,l),this._viewRect=new BoundingRect(r,o,s,l)},n.prototype._transformTo=function(r,o,s,l){var c=this.getBoundingRect(),u=this._rawTransformable;u.transform=c.calculateTransform(new BoundingRect(r,o,s,l));var d=u.parent;u.parent=null,u.decomposeTransform(),u.parent=d,this._updateTransform()},n.prototype.setCenter=function(r,o){r&&(this._center=[parsePercent(r[0],o.getWidth()),parsePercent(r[1],o.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(r){r=r||1;var o=this.zoomLimit;o&&(o.max!=null&&(r=Math.min(o.max,r)),o.min!=null&&(r=Math.max(o.min,r))),this._zoom=r,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),o=r.x+r.width/2,s=r.y+r.height/2;return[o,s]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,s=this.getDefaultCenter(),l=this.getCenter(),c=this.getZoom();l=applyTransform$1([],l,r),s=applyTransform$1([],s,r),o.originX=l[0],o.originY=l[1],o.x=s[0]-l[0],o.y=s[1]-l[1],o.scaleX=o.scaleY=c,this._updateTransform()},n.prototype._updateTransform=function(){var r=this._roamTransformable,o=this._rawTransformable;o.parent=r,r.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var r=this._rawTransformable,o=this._roamTransformable,s=new Transformable;return s.transform=o.transform,s.decomposeTransform(),{roam:{x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},n.prototype.dataToPoint=function(r,o,s){var l=o?this._rawTransform:this.transform;return s=s||[],l?v2ApplyTransform(s,r,l):copy$1(s,r)},n.prototype.pointToData=function(r){var o=this.invTransform;return o?v2ApplyTransform([],r,o):[r[0],r[1]]},n.prototype.convertToPixel=function(r,o,s){var l=getCoordSys$4(o);return l===this?l.dataToPoint(s):null},n.prototype.convertFromPixel=function(r,o,s){var l=getCoordSys$4(o);return l===this?l.pointToData(s):null},n.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},n.dimensions=["x","y"],n}(Transformable);function getCoordSys$4(a){var n=a.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this,r)||this;l.dimensions=geo2DDimensions,l.type="geo",l._nameCoordMap=createHashMap(),l.map=o;var c=s.projection,u=geoSourceManager.load(o,s.nameMap,s.nameProperty),d=geoSourceManager.getGeoResource(o);l.resourceType=d?d.type:null;var f=l.regions=u.regions,v=GEO_DEFAULT_PARAMS[d.type];l._regionsMap=u.regionsMap,l.regions=u.regions,l.projection=c;var g;if(c)for(var y=0;y<f.length;y++){var _=f[y].getBoundingRect(c);g=g||_.clone(),g.union(_)}else g=u.boundingRect;return l.setBoundingRect(g.x,g.y,g.width,g.height),l.aspectScale=c?1:retrieve2(s.aspectScale,v.aspectScale),l._invertLongitute=c?!1:v.invertLongitute,l}return n.prototype._transformTo=function(r,o,s,l){var c=this.getBoundingRect(),u=this._invertLongitute;c=c.clone(),u&&(c.y=-c.y-c.height);var d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect(r,o,s,l));var f=d.parent;d.parent=null,d.decomposeTransform(),d.parent=f,u&&(d.scaleY=-d.scaleY),this._updateTransform()},n.prototype.getRegion=function(r){return this._regionsMap.get(r)},n.prototype.getRegionByCoord=function(r){for(var o=this.regions,s=0;s<o.length;s++){var l=o[s];if(l.type==="geoJSON"&&l.contain(r))return o[s]}},n.prototype.addGeoCoord=function(r,o){this._nameCoordMap.set(r,o)},n.prototype.getGeoCoord=function(r){var o=this._regionsMap.get(r);return this._nameCoordMap.get(r)||o&&o.getCenter()},n.prototype.dataToPoint=function(r,o,s){if(isString(r)&&(r=this.getGeoCoord(r)),r){var l=this.projection;return l&&(r=l.project(r)),r&&this.projectedToPoint(r,o,s)}},n.prototype.pointToData=function(r){var o=this.projection;return o&&(r=o.unproject(r)),r&&this.pointToProjected(r)},n.prototype.pointToProjected=function(r){return a.prototype.pointToData.call(this,r)},n.prototype.projectedToPoint=function(r,o,s){return a.prototype.dataToPoint.call(this,r,o,s)},n.prototype.convertToPixel=function(r,o,s){var l=getCoordSys$3(o);return l===this?l.dataToPoint(s):null},n.prototype.convertFromPixel=function(r,o,s){var l=getCoordSys$3(o);return l===this?l.pointToData(s):null},n}(View);mixin(Geo,View);function getCoordSys$3(a){var n=a.geoModel,r=a.seriesModel;return n?n.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(a,n){var r=a.get("boundingCoords");if(r!=null){var o=r[0],s=r[1];if(isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])){var l=this.projection;if(l){var c=o[0],u=o[1],d=s[0],f=s[1];o=[1/0,1/0],s=[-1/0,-1/0];var v=function($,O,B,V){for(var F=B-$,U=V-O,G=0;G<=100;G++){var W=G/100,j=l.project([$+F*W,O+U*W]);min$1(o,o,j),max$1(s,s,j)}};v(c,u,d,u),v(d,u,d,f),v(d,f,c,f),v(c,f,d,u)}this.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1])}}var g=this.getBoundingRect(),y=a.get("layoutCenter"),_=a.get("layoutSize"),S=n.getWidth(),x=n.getHeight(),T=g.width/g.height*this.aspectScale,w=!1,E,P;y&&_&&(E=[parsePercent(y[0],S),parsePercent(y[1],x)],P=parsePercent(_,Math.min(S,x)),!isNaN(E[0])&&!isNaN(E[1])&&!isNaN(P)&&(w=!0));var D;if(w)D={},T>1?(D.width=P,D.height=P/T):(D.height=P,D.width=P*T),D.y=E[1]-D.height/2,D.x=E[0]-D.width/2;else{var L=a.getBoxLayoutParams();L.aspect=T,D=getLayoutRect(L,{width:S,height:x})}this.setViewRect(D.x,D.y,D.width,D.height),this.setCenter(a.get("center"),n),this.setZoom(a.get("zoom"))}function setGeoCoords(a,n){each$f(n.get("geoCoord"),function(r,o){a.addGeoCoord(o,r)})}var GeoCreator=function(){function a(){this.dimensions=geo2DDimensions}return a.prototype.create=function(n,r){var o=[];function s(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}n.eachComponent("geo",function(c,u){var d=c.get("map"),f=new Geo(d+u,d,extend({nameMap:c.get("nameMap")},s(c)));f.zoomLimit=c.get("scaleLimit"),o.push(f),c.coordinateSystem=f,f.model=c,f.resize=resizeGeo,f.resize(c,r)}),n.eachSeries(function(c){var u=c.get("coordinateSystem");if(u==="geo"){var d=c.get("geoIndex")||0;c.coordinateSystem=o[d]}});var l={};return n.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var u=c.getMapType();l[u]=l[u]||[],l[u].push(c)}}),each$f(l,function(c,u){var d=map$1(c,function(v){return v.get("nameMap")}),f=new Geo(u,u,extend({nameMap:mergeAll(d)},s(c[0])));f.zoomLimit=retrieve.apply(null,map$1(c,function(v){return v.get("scaleLimit")})),o.push(f),f.resize=resizeGeo,f.resize(c[0],r),each$f(c,function(v){v.coordinateSystem=f,setGeoCoords(f,v)})}),o},a.prototype.getFilledRegions=function(n,r,o,s){for(var l=(n||[]).slice(),c=createHashMap(),u=0;u<l.length;u++)c.set(l[u].name,l[u]);var d=geoSourceManager.load(r,o,s);return each$f(d.regions,function(f){var v=f.name,g=c.get(v),y=f.properties&&f.properties.echartsStyle;g||(g={name:v},l.push(g)),y&&merge(g,y)}),l},a}(),geoCreator=new GeoCreator,GeoModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o,s){var l=geoSourceManager.getGeoResource(r.map);if(l&&l.type==="geoJSON"){var c=r.itemStyle=r.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(r,s),defaultEmphasis(r,"label",["show"])},n.prototype.optionUpdated=function(){var r=this,o=this.option;o.regions=geoCreator.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var s={};this._optionModelMap=reduce(o.regions||[],function(l,c){var u=c.name;return u&&(l.set(u,new Model(c,r,r.ecModel)),c.selected&&(s[u]=!0)),l},createHashMap()),o.selectedMap||(o.selectedMap=s)},n.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(r,o){var s=this.getRegionModel(r),l=o==="normal"?s.get(["label","formatter"]):s.get(["emphasis","label","formatter"]),c={name:r};if(isFunction(l))return c.status=o,l(c);if(isString(l))return l.replace("{a}",r??"")},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.select=function(r){var o=this.option,s=o.selectedMode;if(s){s!=="multiple"&&(o.selectedMap=null);var l=o.selectedMap||(o.selectedMap={});l[r]=!0}},n.prototype.unSelect=function(r){var o=this.option.selectedMap;o&&(o[r]=!1)},n.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},n.prototype.isSelected=function(r){var o=this.option.selectedMap;return!!(o&&o[r])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n}(ComponentModel);function getCenterCoord(a,n){return a.pointToProjected?a.pointToProjected(n):a.pointToData(n)}function updateCenterAndZoom(a,n,r,o){var s=a.getZoom(),l=a.getCenter(),c=n.zoom,u=a.projectedToPoint?a.projectedToPoint(l):a.dataToPoint(l);if(n.dx!=null&&n.dy!=null&&(u[0]-=n.dx,u[1]-=n.dy,a.setCenter(getCenterCoord(a,u),o)),c!=null){if(r){var d=r.min||0,f=r.max||1/0;c=Math.max(Math.min(s*c,f),d)/s}a.scaleX*=c,a.scaleY*=c;var v=(n.originX-a.x)*(c-1),g=(n.originY-a.y)*(c-1);a.x-=v,a.y-=g,a.updateTransform(),a.setCenter(getCenterCoord(a,u),o),a.setZoom(c*s)}return{center:a.getCenter(),zoom:a.getZoom()}}var GeoView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.focusBlurEnabled=!0,r}return n.prototype.init=function(r,o){this._api=o},n.prototype.render=function(r,o,s,l){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(s));var c=this._mapDraw;c.draw(r,o,s,this,l),c.group.on("click",this._handleRegionClick,this),c.group.silent=r.get("silent"),this.group.add(c.group),this.updateSelectStatus(r,o,s)},n.prototype._handleRegionClick=function(r){var o;findEventDispatcher(r.target,function(s){return(o=getECData(s).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},n.prototype.updateSelectStatus=function(r,o,s){var l=this;this._mapDraw.group.traverse(function(c){var u=getECData(c).eventData;if(u)return l._model.isSelected(u.name)?s.enterSelect(c):s.leaveSelect(c),!0})},n.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(ComponentView);function registerMap(a,n,r){geoSourceManager.registerMap(a,n,r)}function install$J(a){a.registerCoordinateSystem("geo",geoCreator),a.registerComponentModel(GeoModel),a.registerComponentView(GeoView),a.registerImpl("registerMap",registerMap),a.registerImpl("getMap",function(r){return geoSourceManager.getMapForUser(r)});function n(r,o){o.update="geo:updateSelectStatus",a.registerAction(o,function(s,l){var c={},u=[];return l.eachComponent({mainType:"geo",query:s},function(d){d[r](s.name);var f=d.coordinateSystem;each$f(f.regions,function(g){c[g.name]=d.isSelected(g.name)||!1});var v=[];each$f(c,function(g,y){c[y]&&v.push(y)}),u.push({geoIndex:d.componentIndex,name:v})}),{selected:c,allSelected:u,name:s.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,o,s){var l=r.componentType||"series";o.eachComponent({mainType:l,query:r},function(c){var u=c.coordinateSystem;if(u.type==="geo"){var d=updateCenterAndZoom(u,r,c.get("scaleLimit"),s);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom),l==="series"&&each$f(c.seriesGroup,function(f){f.setCenter(d.center),f.setZoom(d.zoom)})}})})}function install$I(a){use(install$J),a.registerChartView(MapView),a.registerSeriesModel(MapSeries),a.registerLayout(mapSymbolLayout),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",a.registerAction)}function init(a){var n=a;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[n],o,s;o=r.pop();)if(s=o.children,o.isExpand&&s.length)for(var l=s.length,c=l-1;c>=0;c--){var u=s[c];u.hierNode={defaultAncestor:null,ancestor:u,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},r.push(u)}}function firstWalk(a,n){var r=a.isExpand?a.children:[],o=a.parentNode.children,s=a.hierNode.i?o[a.hierNode.i-1]:null;if(r.length){executeShifts(a);var l=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;s?(a.hierNode.prelim=s.hierNode.prelim+n(a,s),a.hierNode.modifier=a.hierNode.prelim-l):a.hierNode.prelim=l}else s&&(a.hierNode.prelim=s.hierNode.prelim+n(a,s));a.parentNode.hierNode.defaultAncestor=apportion(a,s,a.parentNode.hierNode.defaultAncestor||o[0],n)}function secondWalk(a){var n=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:n},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(a,n){return a-=Math.PI/2,{x:n*Math.cos(a),y:n*Math.sin(a)}}function getViewRect$4(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(a){for(var n=a.children,r=n.length,o=0,s=0;--r>=0;){var l=n[r];l.hierNode.prelim+=o,l.hierNode.modifier+=o,s+=l.hierNode.change,o+=l.hierNode.shift+s}}function apportion(a,n,r,o){if(n){for(var s=a,l=a,c=l.parentNode.children[0],u=n,d=s.hierNode.modifier,f=l.hierNode.modifier,v=c.hierNode.modifier,g=u.hierNode.modifier;u=nextRight(u),l=nextLeft(l),u&&l;){s=nextRight(s),c=nextLeft(c),s.hierNode.ancestor=a;var y=u.hierNode.prelim+g-l.hierNode.prelim-f+o(u,l);y>0&&(moveSubtree(nextAncestor(u,a,r),a,y),f+=y,d+=y),g+=u.hierNode.modifier,f+=l.hierNode.modifier,d+=s.hierNode.modifier,v+=c.hierNode.modifier}u&&!nextRight(s)&&(s.hierNode.thread=u,s.hierNode.modifier+=g-d),l&&!nextLeft(c)&&(c.hierNode.thread=l,c.hierNode.modifier+=f-v,r=a)}return r}function nextRight(a){var n=a.children;return n.length&&a.isExpand?n[n.length-1]:a.hierNode.thread}function nextLeft(a){var n=a.children;return n.length&&a.isExpand?n[0]:a.hierNode.thread}function nextAncestor(a,n,r){return a.hierNode.ancestor.parentNode===n.parentNode?a.hierNode.ancestor:r}function moveSubtree(a,n,r){var o=r/(n.hierNode.i-a.hierNode.i);n.hierNode.change-=o,n.hierNode.shift+=r,n.hierNode.modifier+=r,n.hierNode.prelim+=r,a.hierNode.change+=o}function defaultSeparation(a,n){return a.parentNode===n.parentNode?1:2}var TreeEdgeShape=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),TreePath=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(r,o){var s=o.childPoints,l=s.length,c=o.parentPoint,u=s[0],d=s[l-1];if(l===1){r.moveTo(c[0],c[1]),r.lineTo(u[0],u[1]);return}var f=o.orient,v=f==="TB"||f==="BT"?0:1,g=1-v,y=parsePercent(o.forkPosition,1),_=[];_[v]=c[v],_[g]=c[g]+(d[g]-c[g])*y,r.moveTo(c[0],c[1]),r.lineTo(_[0],_[1]),r.moveTo(u[0],u[1]),_[v]=u[v],r.lineTo(_[0],_[1]),_[v]=d[v],r.lineTo(_[0],_[1]),r.lineTo(d[0],d[1]);for(var S=1;S<l-1;S++){var x=s[S];r.moveTo(x[0],x[1]),_[v]=x[v],r.lineTo(_[0],_[1])}},n}(Path),TreeView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._mainGroup=new Group$4,r}return n.prototype.init=function(r,o){this._controller=new RoamController(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(r,o,s){var l=r.getData(),c=r.layoutInfo,u=this._mainGroup,d=r.get("layout");d==="radial"?(u.x=c.x+c.width/2,u.y=c.y+c.height/2):(u.x=c.x,u.y=c.y),this._updateViewCoordSys(r,s),this._updateController(r,o,s);var f=this._data;l.diff(f).add(function(v){symbolNeedsDraw(l,v)&&updateNode(l,v,null,u,r)}).update(function(v,g){var y=f.getItemGraphicEl(g);if(!symbolNeedsDraw(l,v)){y&&removeNode(f,g,y,u,r);return}updateNode(l,v,y,u,r)}).remove(function(v){var g=f.getItemGraphicEl(v);g&&removeNode(f,v,g,u,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&l.eachItemGraphicEl(function(v,g){v.off("click").on("click",function(){s.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:g})})}),this._data=l},n.prototype._updateViewCoordSys=function(r,o){var s=r.getData(),l=[];s.each(function(g){var y=s.getItemLayout(g);y&&!isNaN(y.x)&&!isNaN(y.y)&&l.push([+y.x,+y.y])});var c=[],u=[];fromPoints(l,c,u);var d=this._min,f=this._max;u[0]-c[0]===0&&(c[0]=d?d[0]:c[0]-1,u[0]=f?f[0]:u[0]+1),u[1]-c[1]===0&&(c[1]=d?d[1]:c[1]-1,u[1]=f?f[1]:u[1]+1);var v=r.coordinateSystem=new View;v.zoomLimit=r.get("scaleLimit"),v.setBoundingRect(c[0],c[1],u[0]-c[0],u[1]-c[1]),v.setCenter(r.get("center"),o),v.setZoom(r.get("zoom")),this.group.attr({x:v.x,y:v.y,scaleX:v.scaleX,scaleY:v.scaleY}),this._min=c,this._max=u},n.prototype._updateController=function(r,o,s){var l=this,c=this._controller,u=this._controllerHost,d=this.group;c.setPointerChecker(function(f,v,g){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(v,g)&&!onIrrelevantElement(f,s,r)}),c.enable(r.get("roam")),u.zoomLimit=r.get("scaleLimit"),u.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(u,f.dx,f.dy),s.dispatchAction({seriesId:r.id,type:"treeRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(u,f.scale,f.originX,f.originY),s.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),l._updateNodeAndLinkScale(r),s.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(r){var o=r.getData(),s=this._getNodeGlobalScale(r);o.eachItemGraphicEl(function(l,c){l.setSymbolScale(s)})},n.prototype._getNodeGlobalScale=function(r){var o=r.coordinateSystem;if(o.type!=="view")return 1;var s=this._nodeScaleRatio,l=o.scaleX||1,c=o.getZoom(),u=(c-1)*s+1;return u/l},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n}(ChartView);function symbolNeedsDraw(a,n){var r=a.getItemLayout(n);return r&&!isNaN(r.x)&&!isNaN(r.y)}function updateNode(a,n,r,o,s){var l=!r,c=a.tree.getNodeByDataIndex(n),u=c.getModel(),d=c.getVisual("style").fill,f=c.isExpand===!1&&c.children.length!==0?d:"#fff",v=a.tree.root,g=c.parentNode===v?c:c.parentNode||c,y=a.getItemGraphicEl(g.dataIndex),_=g.getLayout(),S=y?{x:y.__oldX,y:y.__oldY,rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:_,x=c.getLayout();l?(r=new Symbol$1(a,n,null,{symbolInnerColor:f,useNameLabel:!0}),r.x=S.x,r.y=S.y):r.updateData(a,n,null,{symbolInnerColor:f,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=x.rawX,r.__radialRawY=x.rawY,o.add(r),a.setItemGraphicEl(n,r),r.__oldX=r.x,r.__oldY=r.y,updateProps$1(r,{x:x.x,y:x.y},s);var T=r.getSymbolPath();if(s.get("layout")==="radial"){var w=v.children[0],E=w.getLayout(),P=w.children.length,D=void 0,L=void 0;if(x.x===E.x&&c.isExpand===!0&&w.children.length){var $={x:(w.children[0].getLayout().x+w.children[P-1].getLayout().x)/2,y:(w.children[0].getLayout().y+w.children[P-1].getLayout().y)/2};D=Math.atan2($.y-E.y,$.x-E.x),D<0&&(D=Math.PI*2+D),L=$.x<E.x,L&&(D=D-Math.PI)}else D=Math.atan2(x.y-E.y,x.x-E.x),D<0&&(D=Math.PI*2+D),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(L=x.x<E.x,L&&(D=D-Math.PI)):(L=x.x>E.x,L||(D=D-Math.PI));var O=L?"left":"right",B=u.getModel("label"),V=B.get("rotate"),F=V*(Math.PI/180),U=T.getTextContent();U&&(T.setTextConfig({position:B.get("position")||O,rotation:V==null?-D:F,origin:"center"}),U.setStyle("verticalAlign","middle"))}var G=u.get(["emphasis","focus"]),W=G==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):G==="ancestor"?c.getAncestorsIndices():G==="descendant"?c.getDescendantIndices():null;W&&(getECData(r).focus=W),drawEdge(s,c,v,r,S,_,x,o),r.__edge&&(r.onHoverStateChange=function(j){if(j!=="blur"){var K=c.parentNode&&a.getItemGraphicEl(c.parentNode.dataIndex);K&&K.hoverState===HOVER_STATE_BLUR||setStatesFlag(r.__edge,j)}})}function drawEdge(a,n,r,o,s,l,c,u){var d=n.getModel(),f=a.get("edgeShape"),v=a.get("layout"),g=a.getOrient(),y=a.get(["lineStyle","curveness"]),_=a.get("edgeForkPosition"),S=d.getModel("lineStyle").getLineStyle(),x=o.__edge;if(f==="curve")n.parentNode&&n.parentNode!==r&&(x||(x=o.__edge=new BezierCurve({shape:getEdgeShape(v,g,y,s,s)})),updateProps$1(x,{shape:getEdgeShape(v,g,y,l,c)},a));else if(f==="polyline"&&v==="orthogonal"&&n!==r&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var T=n.children,w=[],E=0;E<T.length;E++){var P=T[E].getLayout();w.push([P.x,P.y])}x||(x=o.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:g,forkPosition:_}})),updateProps$1(x,{shape:{parentPoint:[c.x,c.y],childPoints:w}},a)}x&&!(f==="polyline"&&!n.isExpand)&&(x.useStyle(defaults({strokeNoScale:!0,fill:null},S)),setStatesStylesFromModel(x,d,"lineStyle"),setDefaultStateProxy(x),u.add(x))}function removeNodeEdge(a,n,r,o,s){var l=n.tree.root,c=getSourceNode(l,a),u=c.source,d=c.sourceLayout,f=n.getItemGraphicEl(a.dataIndex);if(f){var v=n.getItemGraphicEl(u.dataIndex),g=v.__edge,y=f.__edge||(u.isExpand===!1||u.children.length===1?g:void 0),_=o.get("edgeShape"),S=o.get("layout"),x=o.get("orient"),T=o.get(["lineStyle","curveness"]);y&&(_==="curve"?removeElement(y,{shape:getEdgeShape(S,x,T,d,d),style:{opacity:0}},o,{cb:function(){r.remove(y)},removeOpt:s}):_==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(y,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},o,{cb:function(){r.remove(y)},removeOpt:s}))}}function getSourceNode(a,n){for(var r=n.parentNode===a?n:n.parentNode||n,o;o=r.getLayout(),o==null;)r=r.parentNode===a?r:r.parentNode||r;return{source:r,sourceLayout:o}}function removeNode(a,n,r,o,s){var l=a.tree.getNodeByDataIndex(n),c=a.tree.root,u=getSourceNode(c,l).sourceLayout,d={duration:s.get("animationDurationUpdate"),easing:s.get("animationEasingUpdate")};removeElement(r,{x:u.x+1,y:u.y+1},s,{cb:function(){o.remove(r),a.setItemGraphicEl(n,null)},removeOpt:d}),r.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:d}),l.children.forEach(function(f){removeNodeEdge(f,a,o,s,d)}),removeNodeEdge(l,a,o,s,d)}function getEdgeShape(a,n,r,o,s){var l,c,u,d,f,v,g,y;if(a==="radial"){f=o.rawX,g=o.rawY,v=s.rawX,y=s.rawY;var _=radialCoordinate(f,g),S=radialCoordinate(f,g+(y-g)*r),x=radialCoordinate(v,y+(g-y)*r),T=radialCoordinate(v,y);return{x1:_.x||0,y1:_.y||0,x2:T.x||0,y2:T.y||0,cpx1:S.x||0,cpy1:S.y||0,cpx2:x.x||0,cpy2:x.y||0}}else f=o.x,g=o.y,v=s.x,y=s.y,(n==="LR"||n==="RL")&&(l=f+(v-f)*r,c=g,u=v+(f-v)*r,d=y),(n==="TB"||n==="BT")&&(l=f,c=g+(y-g)*r,u=v,d=y+(g-y)*r);return{x1:f,y1:g,x2:v,y2:y,cpx1:l,cpy1:c,cpx2:u,cpy2:d}}var inner$e=makeInner();function linkSeriesData(a){var n=a.mainData,r=a.datas;r||(r={main:n},a.datasAttr={main:"data"}),a.datas=a.mainData=null,linkAll(n,r,a),each$f(r,function(o){each$f(n.TRANSFERABLE_METHODS,function(s){o.wrapMethod(s,curry$1(transferInjection,a))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,a)),each$f(n.CHANGABLE_METHODS,function(o){n.wrapMethod(o,curry$1(changeInjection,a))}),assert(r[n.dataType]===n)}function transferInjection(a,n){if(isMainData(this)){var r=extend({},inner$e(this).datas);r[this.dataType]=n,linkAll(n,r,a)}else linkSingle(n,this.dataType,inner$e(this).mainData,a);return n}function changeInjection(a,n){return a.struct&&a.struct.update(),n}function cloneShallowInjection(a,n){return each$f(inner$e(n).datas,function(r,o){r!==n&&linkSingle(r.cloneShallow(),o,n,a)}),n}function getLinkedData(a){var n=inner$e(this).mainData;return a==null||n==null?n:inner$e(n).datas[a]}function getLinkedDataAll(){var a=inner$e(this).mainData;return a==null?[{data:a}]:map$1(keys(inner$e(a).datas),function(n){return{type:n,data:inner$e(a).datas[n]}})}function isMainData(a){return inner$e(a).mainData===a}function linkAll(a,n,r){inner$e(a).datas={},each$f(n,function(o,s){linkSingle(o,s,a,r)})}function linkSingle(a,n,r,o){inner$e(r).datas[n]=a,inner$e(a).mainData=r,a.dataType=n,o.struct&&(a[o.structAttr]=o.struct,o.struct[o.datasAttr[n]]=a),a.getLinkedData=getLinkedData,a.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function a(n,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=r}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(n,r,o){isFunction(n)&&(o=r,r=n,n=null),n=n||{},isString(n)&&(n={order:n});var s=n.order||"preorder",l=this[n.attr||"children"],c;s==="preorder"&&(c=r.call(o,this));for(var u=0;!c&&u<l.length;u++)l[u].eachNode(n,r,o);s==="postorder"&&r.call(o,this)},a.prototype.updateDepthAndHeight=function(n){var r=0;this.depth=n;for(var o=0;o<this.children.length;o++){var s=this.children[o];s.updateDepthAndHeight(n+1),s.height>r&&(r=s.height)}this.height=r+1},a.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var r=0,o=this.children,s=o.length;r<s;r++){var l=o[r].getNodeById(n);if(l)return l}},a.prototype.contains=function(n){if(n===this)return!0;for(var r=0,o=this.children,s=o.length;r<s;r++){var l=o[r].contains(n);if(l)return l}},a.prototype.getAncestors=function(n){for(var r=[],o=n?this:this.parentNode;o;)r.push(o),o=o.parentNode;return r.reverse(),r},a.prototype.getAncestorsIndices=function(){for(var n=[],r=this;r;)n.push(r.dataIndex),r=r.parentNode;return n.reverse(),n},a.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(r){n.push(r.dataIndex)}),n},a.prototype.getValue=function(n){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},a.prototype.setLayout=function(n,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,r)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostTree,o=r.data.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(n,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,r)},a.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,r=0;r<n.length;++r)if(n[r]===this)return r;return-1}return-1},a.prototype.isAncestorOf=function(n){for(var r=n.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},a.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},a}(),Tree=function(){function a(n){this.type="tree",this._nodes=[],this.hostModel=n}return a.prototype.eachNode=function(n,r,o){this.root.eachNode(n,r,o)},a.prototype.getNodeByDataIndex=function(n){var r=this.data.getRawIndex(n);return this._nodes[r]},a.prototype.getNodeById=function(n){return this.root.getNodeById(n)},a.prototype.update=function(){for(var n=this.data,r=this._nodes,o=0,s=r.length;o<s;o++)r[o].dataIndex=-1;for(var o=0,s=n.count();o<s;o++)r[n.getRawIndex(o)].dataIndex=o},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(n,r,o){var s=new a(r),l=[],c=1;u(n);function u(v,g){var y=v.value;c=Math.max(c,isArray$1(y)?y.length:1),l.push(v);var _=new TreeNode(convertOptionIdName(v.name,""),s);g?addChild(_,g):s.root=_,s._nodes.push(_);var S=v.children;if(S)for(var x=0;x<S.length;x++)u(S[x],_)}s.root.updateDepthAndHeight(0);var d=prepareSeriesDataSchema(l,{coordDimensions:["value"],dimensionsCount:c}).dimensions,f=new SeriesData(d,r);return f.initData(l),o&&o(f),linkSeriesData({mainData:f,struct:s,structAttr:"tree"}),s.update(),s},a}();function addChild(a,n){var r=n.children;a.parentNode!==n&&(r.push(a),a.parentNode=n)}function retrieveTargetInfo(a,n,r){if(a&&indexOf(n,a.type)>=0){var o=r.getData().tree.root,s=a.targetNode;if(isString(s)&&(s=o.getNodeById(s)),s&&o.contains(s))return{node:s};var l=a.targetNodeId;if(l!=null&&(s=o.getNodeById(l)))return{node:s}}}function getPathToRoot(a){for(var n=[];a;)a=a.parentNode,a&&n.push(a);return n.reverse()}function aboveViewRoot(a,n){var r=getPathToRoot(a);return indexOf(r,n)>=0}function wrapTreePathInfo(a,n){for(var r=[];a;){var o=a.dataIndex;r.push({name:a.name,dataIndex:o,value:n.getRawValue(o)}),a=a.parentNode}return r.reverse(),r}var TreeSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return n.prototype.getInitialData=function(r){var o={name:r.name,children:r.data},s=r.leaves||{},l=new Model(s,this,this.ecModel),c=Tree.createTree(o,this,u);function u(g){g.wrapMethod("getItemModel",function(y,_){var S=c.getNodeByDataIndex(_);return S&&S.children.length&&S.isExpand||(y.parentModel=l),y})}var d=0;c.eachNode("preorder",function(g){g.depth>d&&(d=g.depth)});var f=r.expandAndCollapse,v=f&&r.initialTreeDepth>=0?r.initialTreeDepth:d;return c.root.eachNode("preorder",function(g){var y=g.hostTree.data.getRawDataItem(g.dataIndex);g.isExpand=y&&y.collapsed!=null?!y.collapsed:g.depth<=v}),c.data},n.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.formatTooltip=function(r,o,s){for(var l=this.getData().tree,c=l.root.children[0],u=l.getNodeByDataIndex(r),d=u.getValue(),f=u.name;u&&u!==c;)f=u.parentNode.name+"."+f,u=u.parentNode;return createTooltipMarkup("nameValue",{name:f,value:d,noValue:isNaN(d)||d==null})},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(s,this),o.collapsed=!s.isExpand,o},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n}(SeriesModel);function eachAfter(a,n,r){for(var o=[a],s=[],l;l=o.pop();)if(s.push(l),l.isExpand){var c=l.children;if(c.length)for(var u=0;u<c.length;u++)o.push(c[u])}for(;l=s.pop();)n(l,r)}function eachBefore(a,n){for(var r=[a],o;o=r.pop();)if(n(o),o.isExpand){var s=o.children;if(s.length)for(var l=s.length-1;l>=0;l--)r.push(s[l])}}function treeLayout(a,n){a.eachSeriesByType("tree",function(r){commonLayout(r,n)})}function commonLayout(a,n){var r=getViewRect$4(a,n);a.layoutInfo=r;var o=a.get("layout"),s=0,l=0,c=null;o==="radial"?(s=2*Math.PI,l=Math.min(r.height,r.width)/2,c=separation(function(P,D){return(P.parentNode===D.parentNode?1:2)/P.depth})):(s=r.width,l=r.height,c=separation());var u=a.getData().tree.root,d=u.children[0];if(d){init(u),eachAfter(d,firstWalk,c),u.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var f=d,v=d,g=d;eachBefore(d,function(P){var D=P.getLayout().x;D<f.getLayout().x&&(f=P),D>v.getLayout().x&&(v=P),P.depth>g.depth&&(g=P)});var y=f===v?1:c(f,v)/2,_=y-f.getLayout().x,S=0,x=0,T=0,w=0;if(o==="radial")S=s/(v.getLayout().x+y+_),x=l/(g.depth-1||1),eachBefore(d,function(P){T=(P.getLayout().x+_)*S,w=(P.depth-1)*x;var D=radialCoordinate(T,w);P.setLayout({x:D.x,y:D.y,rawX:T,rawY:w},!0)});else{var E=a.getOrient();E==="RL"||E==="LR"?(x=l/(v.getLayout().x+y+_),S=s/(g.depth-1||1),eachBefore(d,function(P){w=(P.getLayout().x+_)*x,T=E==="LR"?(P.depth-1)*S:s-(P.depth-1)*S,P.setLayout({x:T,y:w},!0)})):(E==="TB"||E==="BT")&&(S=s/(v.getLayout().x+y+_),x=l/(g.depth-1||1),eachBefore(d,function(P){T=(P.getLayout().x+_)*S,w=E==="TB"?(P.depth-1)*x:l-(P.depth-1)*x,P.setLayout({x:T,y:w},!0)}))}}}function treeVisual(a){a.eachSeriesByType("tree",function(n){var r=n.getData(),o=r.tree;o.eachNode(function(s){var l=s.getModel(),c=l.getModel("itemStyle").getItemStyle(),u=r.ensureUniqueItemVisual(s.dataIndex,"style");extend(u,c)})})}function installTreeAction(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,r){r.eachComponent({mainType:"series",subType:"tree",query:n},function(o){var s=n.dataIndex,l=o.getData().tree,c=l.getNodeByDataIndex(s);c.isExpand=!c.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,r,o){r.eachComponent({mainType:"series",subType:"tree",query:n},function(s){var l=s.coordinateSystem,c=updateCenterAndZoom(l,n,void 0,o);s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom)})})}function install$H(a){a.registerChartView(TreeView),a.registerSeriesModel(TreeSeriesModel),a.registerLayout(treeLayout),a.registerVisual(treeVisual),installTreeAction(a)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(a){for(var n=0;n<actionTypes.length;n++)a.registerAction({type:actionTypes[n],update:"updateView"},noop);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,o){o.eachComponent({mainType:"series",subType:"treemap",query:r},s);function s(l,c){var u=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(r,u,l);if(d){var f=l.getViewRoot();f&&(r.direction=aboveViewRoot(f,d.node)?"rollUp":"drillDown"),l.resetViewRoot(d.node)}}})}function enableAriaDecalForTree(a){var n=a.getData(),r=n.tree,o={};r.eachNode(function(s){for(var l=s;l&&l.depth>1;)l=l.parentNode;var c=getDecalFromPalette(a.ecModel,l.name||l.dataIndex+"",o);s.setVisual("decal",c)})}var TreemapSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.preventUsingHoverLayer=!0,r}return n.prototype.getInitialData=function(r,o){var s={name:r.name,children:r.data};completeTreeValue$1(s);var l=r.levels||[],c=this.designatedVisualItemStyle={},u=new Model({itemStyle:c},this,o);l=r.levels=setDefault(l,o);var d=map$1(l||[],function(g){return new Model(g,u,o)},this),f=Tree.createTree(s,this,v);function v(g){g.wrapMethod("getItemModel",function(y,_){var S=f.getNodeByDataIndex(_),x=S?d[S.depth]:null;return y.parentModel=x||u,y})}return f.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(r,o,s){var l=this.getData(),c=this.getRawValue(r),u=l.getName(r);return createTooltipMarkup("nameValue",{name:u,value:c})},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(s,this),o.treePathInfo=o.treeAncestors,o},n.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,r)},n.prototype.mapIdToIndex=function(r){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var s=o.get(r);return s==null&&o.set(r,s=this._idIndexMapCount++),s},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n}(SeriesModel);function completeTreeValue$1(a){var n=0;each$f(a.children,function(o){completeTreeValue$1(o);var s=o.value;isArray$1(s)&&(s=s[0]),n+=s});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=n),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}function setDefault(a,n){var r=normalizeToArray(n.get("color")),o=normalizeToArray(n.get(["aria","decal","decals"]));if(r){a=a||[];var s,l;each$f(a,function(u){var d=new Model(u),f=d.get("color"),v=d.get("decal");(d.get(["itemStyle","color"])||f&&f!=="none")&&(s=!0),(d.get(["itemStyle","decal"])||v&&v!=="none")&&(l=!0)});var c=a[0]||(a[0]={});return s||(c.color=r.slice()),!l&&o&&(c.decal=o.slice()),a}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function a(n){this.group=new Group$4,n.add(this.group)}return a.prototype.render=function(n,r,o,s){var l=n.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!l.get("show")||!o)){var u=l.getModel("itemStyle"),d=l.getModel("emphasis"),f=u.getModel("textStyle"),v=d.getModel(["itemStyle","textStyle"]),g={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,g,f),this._renderContent(n,g,u,d,f,v,s),positionElement(c,g.pos,g.box)}},a.prototype._prepare=function(n,r,o){for(var s=n;s;s=s.parentNode){var l=convertOptionIdName(s.getModel().get("name"),""),c=o.getTextRect(l),u=Math.max(c.width+TEXT_PADDING*2,r.emptyItemWidth);r.totalWidth+=u+ITEM_GAP,r.renderList.push({node:s,text:l,width:u})}},a.prototype._renderContent=function(n,r,o,s,l,c,u){for(var d=0,f=r.emptyItemWidth,v=n.get(["breadcrumb","height"]),g=getAvailableSize(r.pos,r.box),y=r.totalWidth,_=r.renderList,S=s.getModel("itemStyle").getItemStyle(),x=_.length-1;x>=0;x--){var T=_[x],w=T.node,E=T.width,P=T.text;y>g.width&&(y-=E-f,E=f,P=null);var D=new Polygon({shape:{points:makeItemPoints(d,0,E,v,x===_.length-1,x===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle(l,{text:P})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(u,w)});D.disableLabelAnimation=!0,D.getTextContent().ensureState("emphasis").style=createTextStyle(c,{text:P}),D.ensureState("emphasis").style=S,toggleHoverEmphasis(D,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(D),packEventData(D,n,w),d+=E+ITEM_GAP}},a.prototype.remove=function(){this.group.removeAll()},a}();function makeItemPoints(a,n,r,o,s,l){var c=[[s?a:a-ARRAY_LENGTH,n],[a+r,n],[a+r,n+o],[s?a:a-ARRAY_LENGTH,n+o]];return!l&&c.splice(2,0,[a+r+ARRAY_LENGTH,n+o/2]),!s&&c.push([a,n+o/2]),c}function packEventData(a,n,r){getECData(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&wrapTreePathInfo(r,n)}}var AnimationWrap=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(n,r,o,s,l){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:r,duration:o,delay:s,easing:l}),!0)},a.prototype.finished=function(n){return this._finishedCallback=n,this},a.prototype.start=function(){for(var n=this,r=this._storage.length,o=function(){r--,r<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},s=0,l=this._storage.length;s<l;s++){var c=this._storage[s];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:o,aborted:o})}return this},a}();function createWrap(){return new AnimationWrap}var Group$3=Group$4,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(a){var n=getStateItemStyle(a);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._state="ready",r._storage=createStorage(),r}return n.prototype.render=function(r,o,s,l){var c=o.findComponents({mainType:"series",subType:"treemap",query:l});if(!(indexOf(c,r)<0)){this.seriesModel=r,this.api=s,this.ecModel=o;var u=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(l,u,r),f=l&&l.type,v=r.layoutInfo,g=!this._oldTree,y=this._storage,_=f==="treemapRootToNode"&&d&&y?{rootNodeGroup:y.nodeGroup[d.node.getRawIndex()],direction:l.direction}:null,S=this._giveContainerGroup(v),x=r.get("animation"),T=this._doRender(S,r,_);x&&!g&&(!f||f==="treemapZoomToNode"||f==="treemapRootToNode")?this._doAnimation(S,T,r,_):T.renderFinally(),this._resetController(s),this._renderBreadcrumb(r,s,d)}},n.prototype._giveContainerGroup=function(r){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$3,this._initEvents(o),this.group.add(o)),o.x=r.x,o.y=r.y,o},n.prototype._doRender=function(r,o,s){var l=o.getData().tree,c=this._oldTree,u=createStorage(),d=createStorage(),f=this._storage,v=[];function g(E,P,D,L){return renderNode(o,d,f,s,u,v,E,P,D,L)}x(l.root?[l.root]:[],c&&c.root?[c.root]:[],r,l===c||!c,0);var y=T(f);if(this._oldTree=l,this._storage=d,this._controllerHost){var _=this.seriesModel.layoutInfo,S=l.root.getLayout();S.width===_.width&&S.height===_.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:u,willDeleteEls:y,renderFinally:w};function x(E,P,D,L,$){L?(P=E,each$f(E,function(V,F){!V.isRemoved()&&B(F,F)})):new DataDiffer(P,E,O,O).add(B).update(B).remove(curry$1(B,null)).execute();function O(V){return V.getId()}function B(V,F){var U=V!=null?E[V]:null,G=F!=null?P[F]:null,W=g(U,G,D,$);W&&x(U&&U.viewChildren||[],G&&G.viewChildren||[],W,L,$+1)}}function T(E){var P=createStorage();return E&&each$f(E,function(D,L){var $=P[L];each$f(D,function(O){O&&($.push(O),inner$d(O).willDelete=!0)})}),P}function w(){each$f(y,function(E){each$f(E,function(P){P.parent&&P.parent.remove(P)})}),each$f(v,function(E){E.invisible=!0,E.dirty()})}},n.prototype._doAnimation=function(r,o,s,l){var c=s.get("animationDurationUpdate"),u=s.get("animationEasing"),d=(isFunction(c)?0:c)||0,f=(isFunction(u)?null:u)||"cubicOut",v=createWrap();each$f(o.willDeleteEls,function(g,y){each$f(g,function(_,S){if(!_.invisible){var x=_.parent,T,w=inner$d(x);if(l&&l.direction==="drillDown")T=x===l.rootNodeGroup?{shape:{x:0,y:0,width:w.nodeWidth,height:w.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var E=0,P=0;w.willDelete||(E=w.nodeWidth/2,P=w.nodeHeight/2),T=y==="nodeGroup"?{x:E,y:P,style:{opacity:0}}:{shape:{x:E,y:P,width:0,height:0},style:{opacity:0}}}T&&v.add(_,T,d,0,f)}})}),each$f(this._storage,function(g,y){each$f(g,function(_,S){var x=o.lastsForAnimation[y][S],T={};x&&(_ instanceof Group$4?x.oldX!=null&&(T.x=_.x,T.y=_.y,_.x=x.oldX,_.y=x.oldY):(x.oldShape&&(T.shape=extend({},_.shape),_.setShape(x.oldShape)),x.fadein?(_.setStyle("opacity",0),T.style={opacity:1}):_.style.opacity!==1&&(T.style={opacity:1})),v.add(_,T,d,0,f))})},this),this._state="animating",v.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},n.prototype._resetController=function(r){var o=this._controller,s=this._controllerHost;s||(this._controllerHost={target:this.group},s=this._controllerHost),o||(o=this._controller=new RoamController(r.getZr()),o.enable(this.seriesModel.get("roam")),s.zoomLimit=this.seriesModel.get("scaleLimit"),s.zoom=this.seriesModel.get("zoom"),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this)));var l=new BoundingRect(0,0,r.getWidth(),r.getHeight());o.setPointerChecker(function(c,u,d){return l.contain(u,d)})},n.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},n.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>DRAG_THRESHOLD||Math.abs(r.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x+r.dx,y:s.y+r.dy,width:s.width,height:s.height}})}},n.prototype._onZoom=function(r){var o=r.originX,s=r.originY,l=r.scale;if(this._state!=="animating"){var c=this.seriesModel.getData().tree.root;if(!c)return;var u=c.getLayout();if(!u)return;var d=new BoundingRect(u.x,u.y,u.width,u.height),f=null,v=this._controllerHost;f=v.zoomLimit;var g=v.zoom=v.zoom||1;if(g*=l,f){var y=f.min||0,_=f.max||1/0;g=Math.max(Math.min(_,g),y)}var S=g/v.zoom;v.zoom=g;var x=this.seriesModel.layoutInfo;o-=x.x,s-=x.y;var T=create$1();translate(T,T,[-o,-s]),scale$1(T,T,[S,S]),translate(T,T,[o,s]),d.applyTransform(T),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:d.x,y:d.y,width:d.width,height:d.height}})}},n.prototype._initEvents=function(r){var o=this;r.on("click",function(s){if(o._state==="ready"){var l=o.seriesModel.get("nodeClick",!0);if(l){var c=o.findTarget(s.offsetX,s.offsetY);if(c){var u=c.node;if(u.getLayout().isLeafRoot)o._rootToNode(c);else if(l==="zoomToNode")o._zoomToNode(c);else if(l==="link"){var d=u.hostTree.data.getItemModel(u.dataIndex),f=d.get("link",!0),v=d.get("target",!0)||"blank";f&&windowOpen(f,v)}}}}},this)},n.prototype._renderBreadcrumb=function(r,o,s){var l=this;s||(s=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),s||(s={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(r,o,s.node,function(c){l._state!=="animating"&&(aboveViewRoot(r.getViewRoot(),c)?l._rootToNode({node:c}):l._zoomToNode({node:c}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},n.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},n.prototype.findTarget=function(r,o){var s,l=this.seriesModel.getViewRoot();return l.eachNode({attr:"viewChildren",order:"preorder"},function(c){var u=this._storage.background[c.getRawIndex()];if(u){var d=u.transformCoordToLocal(r,o),f=u.shape;if(f.x<=d[0]&&d[0]<=f.x+f.width&&f.y<=d[1]&&d[1]<=f.y+f.height)s={node:c,offsetX:d[0],offsetY:d[1]};else return!1}},this),s},n.type="treemap",n}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(a,n,r,o,s,l,c,u,d,f){if(!c)return;var v=c.getLayout(),g=a.getData(),y=c.getModel();if(g.setItemGraphicEl(c.dataIndex,null),!v||!v.isInView)return;var _=v.width,S=v.height,x=v.borderWidth,T=v.invisible,w=c.getRawIndex(),E=u&&u.getRawIndex(),P=c.viewChildren,D=v.upperHeight,L=P&&P.length,$=y.getModel("itemStyle"),O=y.getModel(["emphasis","itemStyle"]),B=y.getModel(["blur","itemStyle"]),V=y.getModel(["select","itemStyle"]),F=$.get("borderRadius")||0,U=Se("nodeGroup",Group$3);if(!U)return;if(d.add(U),U.x=v.x||0,U.y=v.y||0,U.markRedraw(),inner$d(U).nodeWidth=_,inner$d(U).nodeHeight=S,v.isAboveViewRoot)return U;var G=Se("background",Rect$1,f,Z2_BG);G&&pe(U,G,L&&v.upperLabelHeight);var W=y.getModel("emphasis"),j=W.get("focus"),K=W.get("blurScope"),q=W.get("disabled"),ie=j==="ancestor"?c.getAncestorsIndices():j==="descendant"?c.getDescendantIndices():j;if(L)isHighDownDispatcher(U)&&setAsHighDownDispatcher(U,!1),G&&(setAsHighDownDispatcher(G,!q),g.setItemGraphicEl(c.dataIndex,G),enableHoverFocus(G,ie,K));else{var ee=Se("content",Rect$1,f,Z2_CONTENT);ee&&ce(U,ee),G.disableMorphing=!0,G&&isHighDownDispatcher(G)&&setAsHighDownDispatcher(G,!1),setAsHighDownDispatcher(U,!q),g.setItemGraphicEl(c.dataIndex,U);var he=y.getShallow("cursor");he&&ee.attr("cursor",he),enableHoverFocus(U,ie,K)}return U;function pe(me,_e,Te){var Le=getECData(_e);if(Le.dataIndex=c.dataIndex,Le.seriesIndex=a.seriesIndex,_e.setShape({x:0,y:0,width:_,height:S,r:F}),T)ye(_e);else{_e.invisible=!1;var Ge=c.getVisual("style"),se=Ge.stroke,J=getItemStyleNormal($);J.fill=se;var xe=getStateItemStyle(O);xe.fill=O.get("borderColor");var De=getStateItemStyle(B);De.fill=B.get("borderColor");var Ae=getStateItemStyle(V);if(Ae.fill=V.get("borderColor"),Te){var Ie=_-2*x;we(_e,se,Ge.opacity,{x,y:0,width:Ie,height:D})}else _e.removeTextContent();_e.setStyle(J),_e.ensureState("emphasis").style=xe,_e.ensureState("blur").style=De,_e.ensureState("select").style=Ae,setDefaultStateProxy(_e)}me.add(_e)}function ce(me,_e){var Te=getECData(_e);Te.dataIndex=c.dataIndex,Te.seriesIndex=a.seriesIndex;var Le=Math.max(_-2*x,0),Ge=Math.max(S-2*x,0);if(_e.culling=!0,_e.setShape({x,y:x,width:Le,height:Ge,r:F}),T)ye(_e);else{_e.invisible=!1;var se=c.getVisual("style"),J=se.fill,xe=getItemStyleNormal($);xe.fill=J,xe.decal=se.decal;var De=getStateItemStyle(O),Ae=getStateItemStyle(B),Ie=getStateItemStyle(V);we(_e,J,se.opacity,null),_e.setStyle(xe),_e.ensureState("emphasis").style=De,_e.ensureState("blur").style=Ae,_e.ensureState("select").style=Ie,setDefaultStateProxy(_e)}me.add(_e)}function ye(me){!me.invisible&&l.push(me)}function we(me,_e,Te,Le){var Ge=y.getModel(Le?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),se=convertOptionIdName(y.get("name"),null),J=Ge.getShallow("show");setLabelStyle(me,getLabelStatesModels(y,Le?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:J?se:null,inheritColor:_e,defaultOpacity:Te,labelFetcher:a,labelDataIndex:c.dataIndex});var xe=me.getTextContent();if(xe){var De=xe.style,Ae=normalizeCssArray$1(De.padding||0);Le&&(me.setTextConfig({layoutRect:Le}),xe.disableLabelLayout=!0),xe.beforeUpdate=function(){var ze=Math.max((Le?Le.width:me.shape.width)-Ae[1]-Ae[3],0),Fe=Math.max((Le?Le.height:me.shape.height)-Ae[0]-Ae[2],0);(De.width!==ze||De.height!==Fe)&&xe.setStyle({width:ze,height:Fe})},De.truncateMinChar=2,De.lineOverflow="truncate",ge(De,Le,v);var Ie=xe.getState("emphasis");ge(Ie?Ie.style:null,Le,v)}}function ge(me,_e,Te){var Le=me?me.text:null;if(!_e&&Te.isLeafRoot&&Le!=null){var Ge=a.get("drillDownIcon",!0);me.text=Ge?Ge+" "+Le:Le}}function Se(me,_e,Te,Le){var Ge=E!=null&&r[me][E],se=s[me];return Ge?(r[me][E]=null,$e(se,Ge)):T||(Ge=new _e,Ge instanceof Displayable&&(Ge.z2=calculateZ2(Te,Le)),oe(se,Ge)),n[me][w]=Ge}function $e(me,_e){var Te=me[w]={};_e instanceof Group$3?(Te.oldX=_e.x,Te.oldY=_e.y):Te.oldShape=extend({},_e.shape)}function oe(me,_e){var Te=me[w]={},Le=c.parentNode,Ge=_e instanceof Group$4;if(Le&&(!o||o.direction==="drillDown")){var se=0,J=0,xe=s.background[Le.getRawIndex()];!o&&xe&&xe.oldShape&&(se=xe.oldShape.width,J=xe.oldShape.height),Ge?(Te.oldX=0,Te.oldY=J):Te.oldShape={x:se,y:J,width:0,height:0}}Te.fadein=!Ge}}function calculateZ2(a,n){return a*Z2_BASE+n}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function a(n){var r=n.mappingMethod,o=n.type,s=this.option=clone$4(n);this.type=o,this.mappingMethod=r,this._normalizeData=normalizers[r];var l=a.visualHandlers[o];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[r],r==="piecewise"?(normalizeVisualRange(s),preprocessForPiecewise(s)):r==="category"?s.categories?preprocessForSpecifiedCategory(s):normalizeVisualRange(s,!0):(assert(r!=="linear"||s.dataExtent),normalizeVisualRange(s))}return a.prototype.mapValueToVisual=function(n){var r=this._normalizeData(n);return this._normalizedToVisual(r,n)},a.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},a.listVisualTypes=function(){return keys(a.visualHandlers)},a.isValidType=function(n){return a.visualHandlers.hasOwnProperty(n)},a.eachVisual=function(n,r,o){isObject$3(n)?each$f(n,r,o):r.call(o,n)},a.mapVisual=function(n,r,o){var s,l=isArray$1(n)?[]:isObject$3(n)?{}:(s=!0,null);return a.eachVisual(n,function(c,u){var d=r.call(o,c,u);s?l=d:l[u]=d}),l},a.retrieveVisuals=function(n){var r={},o;return n&&each$c(a.visualHandlers,function(s,l){n.hasOwnProperty(l)&&(r[l]=n[l],o=!0)}),o?r:null},a.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var r=[];each$c(n,function(o,s){r.push(s)}),n=r}else return[];return n.sort(function(o,s){return s==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),n},a.dependsOn=function(n,r){return r==="color"?!!(n&&n.indexOf(r)===0):n===r},a.findPieceIndex=function(n,r,o){for(var s,l=1/0,c=0,u=r.length;c<u;c++){var d=r[c].value;if(d!=null){if(d===n||isString(d)&&d===n+"")return c;o&&y(d,c)}}for(var c=0,u=r.length;c<u;c++){var f=r[c],v=f.interval,g=f.close;if(v){if(v[0]===-1/0){if(littleThan(g[1],n,v[1]))return c}else if(v[1]===1/0){if(littleThan(g[0],v[0],n))return c}else if(littleThan(g[0],v[0],n)&&littleThan(g[1],n,v[1]))return c;o&&y(v[0],c),o&&y(v[1],c)}}if(o)return n===1/0?r.length-1:n===-1/0?0:s;function y(_,S){var x=Math.abs(_-n);x<l&&(l=x,s=S)}},a.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(r,o){return!o&&(r=this._normalizeData(r)),doMapCategory.call(this,r)}:function(r,o,s){var l=!!s;return!o&&(r=this._normalizeData(r)),s=fastLerp(r,n.parsedVisual,s),l?s:stringify(s,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,r)}),colorSaturation:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,null,r)}),colorLightness:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,null,null,r)}),colorAlpha:makePartialColorVisualHandler(function(n,r){return modifyAlpha(n,r)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,r,o){var s=this.mapValueToVisual(n);o("symbol",s)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=doMapToArray.call(this,n)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},a}();function preprocessForPiecewise(a){var n=a.pieceList;a.hasSpecialVisual=!1,each$f(n,function(r,o){r.originIndex=o,r.visual!=null&&(a.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(a){var n=a.categories,r=a.categoryMap={},o=a.visual;if(each$c(n,function(c,u){r[c]=u}),!isArray$1(o)){var s=[];isObject$3(o)?each$c(o,function(c,u){var d=r[u];s[d??CATEGORY_DEFAULT_VISUAL_INDEX]=c}):s[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(a,s)}for(var l=n.length-1;l>=0;l--)o[l]==null&&(delete r[n[l]],n.pop())}function normalizeVisualRange(a,n){var r=a.visual,o=[];isObject$3(r)?each$c(r,function(l){o.push(l)}):r!=null&&o.push(r);var s={color:1,symbol:1};!n&&o.length===1&&!s.hasOwnProperty(a.type)&&(o[1]=o[0]),setVisualToOption(a,o)}function makePartialColorVisualHandler(a){return{applyVisual:function(n,r,o){var s=this.mapValueToVisual(n);o("color",a(r("color"),s))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(a){var n=this.option.visual;return n[Math.round(linearMap$2(a,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(a){return function(n,r,o){o(a,this.mapValueToVisual(n))}}function doMapCategory(a){var n=this.option.visual;return n[this.option.loop&&a!==CATEGORY_DEFAULT_VISUAL_INDEX?a%n.length:a]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(a){return{linear:function(n){return linearMap$2(n,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=linearMap$2(n,a,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(a){var n=this.option,r=n.pieceList;if(n.hasSpecialVisual){var o=VisualMapping.findPieceIndex(a,r),s=r[o];if(s&&s.visual)return s.visual[this.type]}}function setVisualToOption(a,n){return a.visual=n,a.type==="color"&&(a.parsedVisual=map$1(n,function(r){var o=parse(r);return o||[0,0,0,1]})),n}var normalizers={linear:function(a){return linearMap$2(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var n=this.option.pieceList,r=VisualMapping.findPieceIndex(a,n,!0);if(r!=null)return linearMap$2(r,[0,n.length-1],[0,1],!0)},category:function(a){var n=this.option.categories?this.option.categoryMap[a]:a;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(a,n,r){return a?n<=r:n<r}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(a){var n=a.getData().tree,r=n.root;r.isRemoved()||travelTree(r,{},a.getViewRoot().getAncestors(),a)}};function travelTree(a,n,r,o){var s=a.getModel(),l=a.getLayout(),c=a.hostTree.data;if(!(!l||l.invisible||!l.isInView)){var u=s.getModel(ITEM_STYLE_NORMAL),d=buildVisuals(u,n,o),f=c.ensureUniqueItemVisual(a.dataIndex,"style"),v=u.get("borderColor"),g=u.get("borderColorSaturation"),y;g!=null&&(y=calculateColor(d),v=calculateBorderColor(g,y)),f.stroke=v;var _=a.viewChildren;if(!_||!_.length)y=calculateColor(d),f.fill=y;else{var S=buildVisualMapping(a,s,l,u,d,_);each$f(_,function(x,T){if(x.depth>=r.length||x===r[x.depth]){var w=mapVisual$1(s,d,x,T,S,o);travelTree(x,w,r,o)}})}}}function buildVisuals(a,n,r){var o=extend({},n),s=r.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(l){s[l]=n[l];var c=a.get(l);s[l]=null,c!=null&&(o[l]=c)}),o}function calculateColor(a){var n=getValueVisualDefine(a,"color");if(n){var r=getValueVisualDefine(a,"colorAlpha"),o=getValueVisualDefine(a,"colorSaturation");return o&&(n=modifyHSL(n,null,null,o)),r&&(n=modifyAlpha(n,r)),n}}function calculateBorderColor(a,n){return n!=null?modifyHSL(n,null,null,a):null}function getValueVisualDefine(a,n){var r=a[n];if(r!=null&&r!=="none")return r}function buildVisualMapping(a,n,r,o,s,l){if(!(!l||!l.length)){var c=getRangeVisual(n,"color")||s.color!=null&&s.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(c){var u=n.get("visualMin"),d=n.get("visualMax"),f=r.dataExtent.slice();u!=null&&u<f[0]&&(f[0]=u),d!=null&&d>f[1]&&(f[1]=d);var v=n.get("colorMappingBy"),g={type:c.name,dataExtent:f,visual:c.range};g.type==="color"&&(v==="index"||v==="id")?(g.mappingMethod="category",g.loop=!0):g.mappingMethod="linear";var y=new VisualMapping(g);return inner$c(y).drColorMappingBy=v,y}}}function getRangeVisual(a,n){var r=a.get(n);return isArray$1(r)&&r.length?{name:n,range:r}:null}function mapVisual$1(a,n,r,o,s,l){var c=extend({},n);if(s){var u=s.type,d=u==="color"&&inner$c(s).drColorMappingBy,f=d==="index"?o:d==="id"?l.mapIdToIndex(r.getId()):r.getValue(a.get("visualDimension"));c[u]=s.mapValueToVisual(f)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(a,n,r,o){var s=r.getWidth(),l=r.getHeight(),c=a.option,u=getLayoutRect(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),d=c.size||[],f=parsePercent(retrieveValue(u.width,d[0]),s),v=parsePercent(retrieveValue(u.height,d[1]),l),g=o&&o.type,y=["treemapZoomToNode","treemapRootToNode"],_=retrieveTargetInfo(o,y,a),S=g==="treemapRender"||g==="treemapMove"?o.rootRect:null,x=a.getViewRoot(),T=getPathToRoot(x);if(g!=="treemapMove"){var w=g==="treemapZoomToNode"?estimateRootSize(a,_,x,f,v):S?[S.width,S.height]:[f,v],E=c.sort;E&&E!=="asc"&&E!=="desc"&&(E="desc");var P={squareRatio:c.squareRatio,sort:E,leafDepth:c.leafDepth};x.hostTree.clearLayouts();var D={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};x.setLayout(D),squarify(x,P,!1,0),D=x.getLayout(),each$b(T,function($,O){var B=(T[O+1]||x).getValue();$.setLayout(extend({dataExtent:[B,B],borderWidth:0,upperHeight:0},D))})}var L=a.getData().tree.root;L.setLayout(calculateRootPosition(u,S,_),!0),a.setLayoutInfo(u),prunning(L,new BoundingRect(-u.x,-u.y,s,l),T,x,0)}};function squarify(a,n,r,o){var s,l;if(!a.isRemoved()){var c=a.getLayout();s=c.width,l=c.height;var u=a.getModel(),d=u.get(PATH_BORDER_WIDTH),f=u.get(PATH_GAP_WIDTH)/2,v=getUpperLabelHeight(u),g=Math.max(d,v),y=d-f,_=g-f;a.setLayout({borderWidth:d,upperHeight:g,upperLabelHeight:v},!0),s=mathMax$3(s-2*y,0),l=mathMax$3(l-y-_,0);var S=s*l,x=initChildren$1(a,u,S,n,r,o);if(x.length){var T={x:y,y:_,width:s,height:l},w=mathMin$3(s,l),E=1/0,P=[];P.area=0;for(var D=0,L=x.length;D<L;){var $=x[D];P.push($),P.area+=$.getLayout().area;var O=worst(P,w,n.squareRatio);O<=E?(D++,E=O):(P.area-=P.pop().getLayout().area,position(P,w,T,f,!1),w=mathMin$3(T.width,T.height),P.length=P.area=0,E=1/0)}if(P.length&&position(P,w,T,f,!0),!r){var B=u.get("childrenVisibleMin");B!=null&&S<B&&(r=!0)}for(var D=0,L=x.length;D<L;D++)squarify(x[D],n,r,o+1)}}}function initChildren$1(a,n,r,o,s,l){var c=a.children||[],u=o.sort;u!=="asc"&&u!=="desc"&&(u=null);var d=o.leafDepth!=null&&o.leafDepth<=l;if(s&&!d)return a.viewChildren=[];c=filter(c,function(_){return!_.isRemoved()}),sort$1(c,u);var f=statistic(n,c,u);if(f.sum===0)return a.viewChildren=[];if(f.sum=filterByThreshold(n,r,f.sum,u,c),f.sum===0)return a.viewChildren=[];for(var v=0,g=c.length;v<g;v++){var y=c[v].getValue()/f.sum*r;c[v].setLayout({area:y})}return d&&(c.length&&a.setLayout({isLeafRoot:!0},!0),c.length=0),a.viewChildren=c,a.setLayout({dataExtent:f.dataExtent},!0),c}function filterByThreshold(a,n,r,o,s){if(!o)return r;for(var l=a.get("visibleMin"),c=s.length,u=c,d=c-1;d>=0;d--){var f=s[o==="asc"?c-d-1:d].getValue();f/r*n<l&&(u=d,r-=f)}return o==="asc"?s.splice(0,c-u):s.splice(u,c-u),r}function sort$1(a,n){return n&&a.sort(function(r,o){var s=n==="asc"?r.getValue()-o.getValue():o.getValue()-r.getValue();return s===0?n==="asc"?r.dataIndex-o.dataIndex:o.dataIndex-r.dataIndex:s}),a}function statistic(a,n,r){for(var o=0,s=0,l=n.length;s<l;s++)o+=n[s].getValue();var c=a.get("visualDimension"),u;return!n||!n.length?u=[NaN,NaN]:c==="value"&&r?(u=[n[n.length-1].getValue(),n[0].getValue()],r==="asc"&&u.reverse()):(u=[1/0,-1/0],each$b(n,function(d){var f=d.getValue(c);f<u[0]&&(u[0]=f),f>u[1]&&(u[1]=f)})),{sum:o,dataExtent:u}}function worst(a,n,r){for(var o=0,s=1/0,l=0,c=void 0,u=a.length;l<u;l++)c=a[l].getLayout().area,c&&(c<s&&(s=c),c>o&&(o=c));var d=a.area*a.area,f=n*n*r;return d?mathMax$3(f*o/d,d/(f*s)):1/0}function position(a,n,r,o,s){var l=n===r.width?0:1,c=1-l,u=["x","y"],d=["width","height"],f=r[u[l]],v=n?a.area/n:0;(s||v>r[d[c]])&&(v=r[d[c]]);for(var g=0,y=a.length;g<y;g++){var _=a[g],S={},x=v?_.getLayout().area/v:0,T=S[d[c]]=mathMax$3(v-2*o,0),w=r[u[l]]+r[d[l]]-f,E=g===y-1||w<x?w:x,P=S[d[l]]=mathMax$3(E-2*o,0);S[u[c]]=r[u[c]]+mathMin$3(o,T/2),S[u[l]]=f+mathMin$3(o,P/2),f+=E,_.setLayout(S,!0)}r[u[c]]+=v,r[d[c]]-=v}function estimateRootSize(a,n,r,o,s){var l=(n||{}).node,c=[o,s];if(!l||l===r)return c;for(var u,d=o*s,f=d*a.option.zoomToNodeRatio;u=l.parentNode;){for(var v=0,g=u.children,y=0,_=g.length;y<_;y++)v+=g[y].getValue();var S=l.getValue();if(S===0)return c;f*=v/S;var x=u.getModel(),T=x.get(PATH_BORDER_WIDTH),w=Math.max(T,getUpperLabelHeight(x));f+=4*T*T+(3*T+w)*Math.pow(f,.5),f>MAX_SAFE_INTEGER&&(f=MAX_SAFE_INTEGER),l=u}f<d&&(f=d);var E=Math.pow(f/d,.5);return[o*E,s*E]}function calculateRootPosition(a,n,r){if(n)return{x:n.x,y:n.y};var o={x:0,y:0};if(!r)return o;var s=r.node,l=s.getLayout();if(!l)return o;for(var c=[l.width/2,l.height/2],u=s;u;){var d=u.getLayout();c[0]+=d.x,c[1]+=d.y,u=u.parentNode}return{x:a.width/2-c[0],y:a.height/2-c[1]}}function prunning(a,n,r,o,s){var l=a.getLayout(),c=r[s],u=c&&c===a;if(!(c&&!u||s===r.length&&a!==o)){a.setLayout({isInView:!0,invisible:!u&&!n.intersect(l),isAboveViewRoot:u},!0);var d=new BoundingRect(n.x-l.x,n.y-l.y,n.width,n.height);each$b(a.viewChildren||[],function(f){prunning(f,d,r,o,s+1)})}}function getUpperLabelHeight(a){return a.get(PATH_UPPER_LABEL_SHOW)?a.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(a){a.registerSeriesModel(TreemapSeriesModel),a.registerChartView(TreemapView),a.registerVisual(treemapVisual),a.registerLayout(treemapLayout),installTreemapAction(a)}function categoryFilter(a){var n=a.findComponents({mainType:"legend"});!n||!n.length||a.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),s=r.getGraph(),l=s.data,c=o.mapArray(o.getName);l.filterSelf(function(u){var d=l.getItemModel(u),f=d.getShallow("category");if(f!=null){isNumber(f)&&(f=c[f]);for(var v=0;v<n.length;v++)if(!n[v].isSelected(f))return!1}return!0})})}function categoryVisual(a){var n={};a.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),s=r.getData(),l={};o.each(function(c){var u=o.getName(c);l["ec-"+u]=c;var d=o.getItemModel(c),f=d.getModel("itemStyle").getItemStyle();f.fill||(f.fill=r.getColorFromPalette(u,n)),o.setItemVisual(c,"style",f);for(var v=["symbol","symbolSize","symbolKeepAspect"],g=0;g<v.length;g++){var y=d.getShallow(v[g],!0);y!=null&&o.setItemVisual(c,v[g],y)}}),o.count()&&s.each(function(c){var u=s.getItemModel(c),d=u.getShallow("category");if(d!=null){isString(d)&&(d=l["ec-"+d]);var f=o.getItemVisual(d,"style"),v=s.ensureUniqueItemVisual(c,"style");extend(v,f);for(var g=["symbol","symbolSize","symbolKeepAspect"],y=0;y<g.length;y++)s.setItemVisual(c,g[y],o.getItemVisual(d,g[y]))}})})}function normalize$2(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(a){a.eachSeriesByType("graph",function(n){var r=n.getGraph(),o=n.getEdgeData(),s=normalize$2(n.get("edgeSymbol")),l=normalize$2(n.get("edgeSymbolSize"));o.setVisual("fromSymbol",s&&s[0]),o.setVisual("toSymbol",s&&s[1]),o.setVisual("fromSymbolSize",l&&l[0]),o.setVisual("toSymbolSize",l&&l[1]),o.setVisual("style",n.getModel("lineStyle").getLineStyle()),o.each(function(c){var u=o.getItemModel(c),d=r.getEdgeByIndex(c),f=normalize$2(u.getShallow("symbol",!0)),v=normalize$2(u.getShallow("symbolSize",!0)),g=u.getModel("lineStyle").getLineStyle(),y=o.ensureUniqueItemVisual(c,"style");switch(extend(y,g),y.stroke){case"source":{var _=d.node1.getVisual("style");y.stroke=_&&_.fill;break}case"target":{var _=d.node2.getVisual("style");y.stroke=_&&_.fill;break}}f[0]&&d.setVisual("fromSymbol",f[0]),f[1]&&d.setVisual("toSymbol",f[1]),v[0]&&d.setVisual("fromSymbolSize",v[0]),v[1]&&d.setVisual("toSymbolSize",v[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(a){return a.get("autoCurveness")||null},createCurveness=function(a,n){var r=getAutoCurvenessParams(a),o=20,s=[];if(isNumber(r))o=r;else if(isArray$1(r)){a.__curvenessList=r;return}n>o&&(o=n);var l=o%2?o+2:o+3;s=[];for(var c=0;c<l;c++)s.push((c%2?c+1:c)/10*(c%2?-1:1));a.__curvenessList=s},getKeyOfEdges=function(a,n,r){var o=[a.id,a.dataIndex].join("."),s=[n.id,n.dataIndex].join(".");return[r.uid,o,s].join(KEY_DELIMITER)},getOppositeKey=function(a){var n=a.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(a,n){var r=getKeyOfEdges(a.node1,a.node2,n);return n.__edgeMap[r]},getTotalLengthBetweenNodes=function(a,n){var r=getEdgeMapLengthWithKey(getKeyOfEdges(a.node1,a.node2,n),n),o=getEdgeMapLengthWithKey(getKeyOfEdges(a.node2,a.node1,n),n);return r+o},getEdgeMapLengthWithKey=function(a,n){var r=n.__edgeMap;return r[a]?r[a].length:0};function initCurvenessList(a){getAutoCurvenessParams(a)&&(a.__curvenessList=[],a.__edgeMap={},createCurveness(a))}function createEdgeMapForCurveness(a,n,r,o){if(getAutoCurvenessParams(r)){var s=getKeyOfEdges(a,n,r),l=r.__edgeMap,c=l[getOppositeKey(s)];l[s]&&!c?l[s].isForward=!0:c&&l[s]&&(c.isForward=!0,l[s].isForward=!1),l[s]=l[s]||[],l[s].push(o)}}function getCurvenessForEdge(a,n,r,o){var s=getAutoCurvenessParams(n),l=isArray$1(s);if(!s)return null;var c=getEdgeFromMap(a,n);if(!c)return null;for(var u=-1,d=0;d<c.length;d++)if(c[d]===r){u=d;break}var f=getTotalLengthBetweenNodes(a,n);createCurveness(n,f),a.lineStyle=a.lineStyle||{};var v=getKeyOfEdges(a.node1,a.node2,n),g=n.__curvenessList,y=l||f%2?0:1;if(c.isForward)return g[y+u];var _=getOppositeKey(v),S=getEdgeMapLengthWithKey(_,n),x=g[u+S+y];return o?l?s&&s[0]===0?(S+y)%2?x:-x:((S%2?0:1)+y)%2?x:-x:(S+y)%2?x:-x:g[u+S+y]}function simpleLayout(a){var n=a.coordinateSystem;if(!(n&&n.type!=="view")){var r=a.getGraph();r.eachNode(function(o){var s=o.getModel();o.setLayout([+s.get("x"),+s.get("y")])}),simpleLayoutEdge(r,a)}}function simpleLayoutEdge(a,n){a.eachEdge(function(r,o){var s=retrieve3(r.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(r,n,o,!0),0),l=clone$3(r.node1.getLayout()),c=clone$3(r.node2.getLayout()),u=[l,c];+s&&u.push([(l[0]+c[0])/2-(l[1]-c[1])*s,(l[1]+c[1])/2-(c[0]-l[0])*s]),r.setLayout(u)})}function graphSimpleLayout(a,n){a.eachSeriesByType("graph",function(r){var o=r.get("layout"),s=r.coordinateSystem;if(s&&s.type!=="view"){var l=r.getData(),c=[];each$f(s.dimensions,function(y){c=c.concat(l.mapDimensionsAll(y))});for(var u=0;u<l.count();u++){for(var d=[],f=!1,v=0;v<c.length;v++){var g=l.get(c[v],u);isNaN(g)||(f=!0),d.push(g)}f?l.setItemLayout(u,s.dataToPoint(d)):l.setItemLayout(u,[NaN,NaN])}simpleLayoutEdge(l.graph,r)}else(!o||o==="none")&&simpleLayout(r)})}function getNodeGlobalScale(a){var n=a.coordinateSystem;if(n.type!=="view")return 1;var r=a.option.nodeScaleRatio,o=n.scaleX,s=n.getZoom(),l=(s-1)*r+1;return l/o}function getSymbolSize(a){var n=a.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(a,n,r,o){var s=a.coordinateSystem;if(!(s&&s.type!=="view")){var l=s.getBoundingRect(),c=a.getData(),u=c.graph,d=l.width/2+l.x,f=l.height/2+l.y,v=Math.min(l.width,l.height)/2,g=c.count();if(c.setLayout({cx:d,cy:f}),!!g){if(r){var y=s.pointToData(o),_=y[0],S=y[1],x=[_-d,S-f];normalize$4(x,x),scale$2(x,x,v),r.setLayout([d+x[0],f+x[1]],!0);var T=a.get(["circular","rotateLabel"]);rotateNodeLabel(r,T,d,f)}_layoutNodesBasedOn[n](a,u,c,v,d,f,g),u.eachEdge(function(w,E){var P=retrieve3(w.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(w,a,E),0),D=clone$3(w.node1.getLayout()),L=clone$3(w.node2.getLayout()),$,O=(D[0]+L[0])/2,B=(D[1]+L[1])/2;+P&&(P*=3,$=[d*P+O*(1-P),f*P+B*(1-P)]),w.setLayout([D,L,$])})}}}var _layoutNodesBasedOn={value:function(a,n,r,o,s,l,c){var u=0,d=r.getSum("value"),f=Math.PI*2/(d||c);n.eachNode(function(v){var g=v.getValue("value"),y=f*(d?g:1)/2;u+=y,v.setLayout([o*Math.cos(u)+s,o*Math.sin(u)+l]),u+=y})},symbolSize:function(a,n,r,o,s,l,c){var u=0;_symbolRadiansHalf.length=c;var d=getNodeGlobalScale(a);n.eachNode(function(g){var y=getSymbolSize(g);isNaN(y)&&(y=2),y<0&&(y=0),y*=d;var _=Math.asin(y/2/o);isNaN(_)&&(_=PI$2/2),_symbolRadiansHalf[g.dataIndex]=_,u+=_*2});var f=(2*PI$2-u)/c/2,v=0;n.eachNode(function(g){var y=f+_symbolRadiansHalf[g.dataIndex];v+=y,(!g.getLayout()||!g.getLayout().fixed)&&g.setLayout([o*Math.cos(v)+s,o*Math.sin(v)+l]),v+=y})}};function rotateNodeLabel(a,n,r,o){var s=a.getGraphicEl();if(s){var l=a.getModel(),c=l.get(["label","rotate"])||0,u=s.getSymbolPath();if(n){var d=a.getLayout(),f=Math.atan2(d[1]-o,d[0]-r);f<0&&(f=Math.PI*2+f);var v=d[0]<r;v&&(f=f-Math.PI);var g=v?"left":"right";u.setTextConfig({rotation:-f,position:g,origin:"center"});var y=u.ensureState("emphasis");extend(y.textConfig||(y.textConfig={}),{position:g})}else u.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(a){a.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(a,n,r){for(var o=a,s=n,l=r.rect,c=l.width,u=l.height,d=[l.x+c/2,l.y+u/2],f=r.gravity==null?.1:r.gravity,v=0;v<o.length;v++){var g=o[v];g.p||(g.p=create$2(c*(Math.random()-.5)+d[0],u*(Math.random()-.5)+d[1])),g.pp=clone$3(g.p),g.edges=null}var y=r.friction==null?.6:r.friction,_=y,S,x;return{warmUp:function(){_=y*.8},setFixed:function(T){o[T].fixed=!0},setUnfixed:function(T){o[T].fixed=!1},beforeStep:function(T){S=T},afterStep:function(T){x=T},step:function(T){S&&S(o,s);for(var w=[],E=o.length,P=0;P<s.length;P++){var D=s[P];if(!D.ignoreForceLayout){var L=D.n1,$=D.n2;sub(w,$.p,L.p);var O=len(w)-D.d,B=$.w/(L.w+$.w);isNaN(B)&&(B=0),normalize$4(w,w),!L.fixed&&scaleAndAdd(L.p,L.p,w,B*O*_),!$.fixed&&scaleAndAdd($.p,$.p,w,-(1-B)*O*_)}}for(var P=0;P<E;P++){var V=o[P];V.fixed||(sub(w,d,V.p),scaleAndAdd(V.p,V.p,w,f*_))}for(var P=0;P<E;P++)for(var L=o[P],F=P+1;F<E;F++){var $=o[F];sub(w,$.p,L.p);var O=len(w);O===0&&(set$1(w,Math.random()-.5,Math.random()-.5),O=1);var U=(L.rep+$.rep)/O/O;!L.fixed&&scaleAndAdd(L.pp,L.pp,w,U),!$.fixed&&scaleAndAdd($.pp,$.pp,w,-U)}for(var G=[],P=0;P<E;P++){var V=o[P];V.fixed||(sub(G,V.p,V.pp),scaleAndAdd(V.p,V.p,G,_),copy$1(V.pp,V.p))}_=_*.992;var W=_<.01;x&&x(o,s,W),T&&T(W)}}}function graphForceLayout(a){a.eachSeriesByType("graph",function(n){var r=n.coordinateSystem;if(!(r&&r.type!=="view"))if(n.get("layout")==="force"){var o=n.preservedPoints||{},s=n.getGraph(),l=s.data,c=s.edgeData,u=n.getModel("force"),d=u.get("initLayout");n.preservedPoints?l.each(function(P){var D=l.getId(P);l.setItemLayout(P,o[D]||[NaN,NaN])}):!d||d==="none"?simpleLayout(n):d==="circular"&&circularLayout(n,"value");var f=l.getDataExtent("value"),v=c.getDataExtent("value"),g=u.get("repulsion"),y=u.get("edgeLength"),_=isArray$1(g)?g:[g,g],S=isArray$1(y)?y:[y,y];S=[S[1],S[0]];var x=l.mapArray("value",function(P,D){var L=l.getItemLayout(D),$=linearMap$2(P,f,_);return isNaN($)&&($=(_[0]+_[1])/2),{w:$,rep:$,fixed:l.getItemModel(D).get("fixed"),p:!L||isNaN(L[0])||isNaN(L[1])?null:L}}),T=c.mapArray("value",function(P,D){var L=s.getEdgeByIndex(D),$=linearMap$2(P,v,S);isNaN($)&&($=(S[0]+S[1])/2);var O=L.getModel(),B=retrieve3(L.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(L,n,D,!0),0);return{n1:x[L.node1.dataIndex],n2:x[L.node2.dataIndex],d:$,curveness:B,ignoreForceLayout:O.get("ignoreForceLayout")}}),w=r.getBoundingRect(),E=forceLayout(x,T,{rect:w,gravity:u.get("gravity"),friction:u.get("friction")});E.beforeStep(function(P,D){for(var L=0,$=P.length;L<$;L++)P[L].fixed&&copy$1(P[L].p,s.getNodeByIndex(L).getLayout())}),E.afterStep(function(P,D,L){for(var $=0,O=P.length;$<O;$++)P[$].fixed||s.getNodeByIndex($).setLayout(P[$].p),o[l.getId($)]=P[$].p;for(var $=0,O=D.length;$<O;$++){var B=D[$],V=s.getEdgeByIndex($),F=B.n1.p,U=B.n2.p,G=V.getLayout();G=G?G.slice():[],G[0]=G[0]||[],G[1]=G[1]||[],copy$1(G[0],F),copy$1(G[1],U),+B.curveness&&(G[2]=[(F[0]+U[0])/2-(F[1]-U[1])*B.curveness,(F[1]+U[1])/2-(U[0]-F[0])*B.curveness]),V.setLayout(G)}}),n.forceLayout=E,n.preservedPoints=o,E.step()}else n.forceLayout=null})}function getViewRect$3(a,n,r){var o=extend(a.getBoxLayoutParams(),{aspect:r});return getLayoutRect(o,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(a,n){var r=[];return a.eachSeriesByType("graph",function(o){var s=o.get("coordinateSystem");if(!s||s==="view"){var l=o.getData(),c=l.mapArray(function(T){var w=l.getItemModel(T);return[+w.get("x"),+w.get("y")]}),u=[],d=[];fromPoints(c,u,d),d[0]-u[0]===0&&(d[0]+=1,u[0]-=1),d[1]-u[1]===0&&(d[1]+=1,u[1]-=1);var f=(d[0]-u[0])/(d[1]-u[1]),v=getViewRect$3(o,n,f);isNaN(f)&&(u=[v.x,v.y],d=[v.x+v.width,v.y+v.height]);var g=d[0]-u[0],y=d[1]-u[1],_=v.width,S=v.height,x=o.coordinateSystem=new View;x.zoomLimit=o.get("scaleLimit"),x.setBoundingRect(u[0],u[1],g,y),x.setViewRect(v.x,v.y,_,S),x.setCenter(o.get("center"),n),x.setZoom(o.get("zoom")),r.push(x)}}),r}var straightLineProto=Line$2.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ECLinePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-line",o}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(r,o){isStraightLine(o)?straightLineProto.buildPath.call(this,r,o):bezierCurveProto.buildPath.call(this,r,o)},n.prototype.pointAt=function(r){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,r):bezierCurveProto.pointAt.call(this,r)},n.prototype.tangentAt=function(r){var o=this.shape,s=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,r);return normalize$4(s,s)},n}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(a){return"_"+a+"Type"}function makeSymbolTypeValue(a,n,r){var o=n.getItemVisual(r,a);if(!o||o==="none")return o;var s=n.getItemVisual(r,a+"Size"),l=n.getItemVisual(r,a+"Rotate"),c=n.getItemVisual(r,a+"Offset"),u=n.getItemVisual(r,a+"KeepAspect"),d=normalizeSymbolSize(s),f=normalizeSymbolOffset(c||0,d);return o+d+f+(l||"")+(u||"")}function createSymbol(a,n,r){var o=n.getItemVisual(r,a);if(!(!o||o==="none")){var s=n.getItemVisual(r,a+"Size"),l=n.getItemVisual(r,a+"Rotate"),c=n.getItemVisual(r,a+"Offset"),u=n.getItemVisual(r,a+"KeepAspect"),d=normalizeSymbolSize(s),f=normalizeSymbolOffset(c||0,d),v=createSymbol$1(o,-d[0]/2+f[0],-d[1]/2+f[1],d[0],d[1],null,u);return v.__specifiedRotation=l==null||isNaN(l)?void 0:+l*Math.PI/180||0,v.name=a,v}}function createLine(a){var n=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,a),n}function setLinePoints(a,n){a.x1=n[0][0],a.y1=n[0][1],a.x2=n[1][0],a.y2=n[1][1],a.percent=1;var r=n[2];r?(a.cpx1=r[0],a.cpy1=r[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Line$1=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this)||this;return l._createLine(r,o,s),l}return n.prototype._createLine=function(r,o,s){var l=r.hostModel,c=r.getItemLayout(o),u=createLine(c);u.shape.percent=0,initProps(u,{shape:{percent:1}},l,o),this.add(u),each$f(SYMBOL_CATEGORIES,function(d){var f=createSymbol(d,r,o);this.add(f),this[makeSymbolTypeKey(d)]=makeSymbolTypeValue(d,r,o)},this),this._updateCommonStl(r,o,s)},n.prototype.updateData=function(r,o,s){var l=r.hostModel,c=this.childOfName("line"),u=r.getItemLayout(o),d={shape:{}};setLinePoints(d.shape,u),updateProps$1(c,d,l,o),each$f(SYMBOL_CATEGORIES,function(f){var v=makeSymbolTypeValue(f,r,o),g=makeSymbolTypeKey(f);if(this[g]!==v){this.remove(this.childOfName(f));var y=createSymbol(f,r,o);this.add(y)}this[g]=v},this),this._updateCommonStl(r,o,s)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(r,o,s){var l=r.hostModel,c=this.childOfName("line"),u=s&&s.emphasisLineStyle,d=s&&s.blurLineStyle,f=s&&s.selectLineStyle,v=s&&s.labelStatesModels,g=s&&s.emphasisDisabled,y=s&&s.focus,_=s&&s.blurScope;if(!s||r.hasItemOption){var S=r.getItemModel(o),x=S.getModel("emphasis");u=x.getModel("lineStyle").getLineStyle(),d=S.getModel(["blur","lineStyle"]).getLineStyle(),f=S.getModel(["select","lineStyle"]).getLineStyle(),g=x.get("disabled"),y=x.get("focus"),_=x.get("blurScope"),v=getLabelStatesModels(S)}var T=r.getItemVisual(o,"style"),w=T.stroke;c.useStyle(T),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=u,c.ensureState("blur").style=d,c.ensureState("select").style=f,each$f(SYMBOL_CATEGORIES,function($){var O=this.childOfName($);if(O){O.setColor(w),O.style.opacity=T.opacity;for(var B=0;B<SPECIAL_STATES.length;B++){var V=SPECIAL_STATES[B],F=c.getState(V);if(F){var U=F.style||{},G=O.ensureState(V),W=G.style||(G.style={});U.stroke!=null&&(W[O.__isEmptyBrush?"stroke":"fill"]=U.stroke),U.opacity!=null&&(W.opacity=U.opacity)}}O.markRedraw()}},this);var E=l.getRawValue(o);setLabelStyle(this,v,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function($,O){return l.getFormattedLabel($,O,r.dataType)}},inheritColor:w||"#000",defaultOpacity:T.opacity,defaultText:(E==null?r.getName(o):isFinite(E)?round$3(E):E)+""});var P=this.getTextContent();if(P){var D=v.normal;P.__align=P.style.align,P.__verticalAlign=P.style.verticalAlign,P.__position=D.get("position")||"middle";var L=D.get("distance");isArray$1(L)||(L=[L,L]),P.__labelDistance=L}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,y,_,g)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(r,o){this.setLinePoints(r.getItemLayout(o))},n.prototype.setLinePoints=function(r){var o=this.childOfName("line");setLinePoints(o.shape,r),o.dirty()},n.prototype.beforeUpdate=function(){var r=this,o=r.childOfName("fromSymbol"),s=r.childOfName("toSymbol"),l=r.getTextContent();if(!o&&!s&&(!l||l.ignore))return;for(var c=1,u=this.parent;u;)u.scaleX&&(c/=u.scaleX),u=u.parent;var d=r.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var f=d.shape.percent,v=d.pointAt(0),g=d.pointAt(f),y=sub([],g,v);normalize$4(y,y);function _(F,U){var G=F.__specifiedRotation;if(G==null){var W=d.tangentAt(U);F.attr("rotation",(U===1?-1:1)*Math.PI/2-Math.atan2(W[1],W[0]))}else F.attr("rotation",G)}if(o&&(o.setPosition(v),_(o,0),o.scaleX=o.scaleY=c*f,o.markRedraw()),s&&(s.setPosition(g),_(s,1),s.scaleX=s.scaleY=c*f,s.markRedraw()),l&&!l.ignore){l.x=l.y=0,l.originX=l.originY=0;var S=void 0,x=void 0,T=l.__labelDistance,w=T[0]*c,E=T[1]*c,P=f/2,D=d.tangentAt(P),L=[D[1],-D[0]],$=d.pointAt(P);L[1]>0&&(L[0]=-L[0],L[1]=-L[1]);var O=D[0]<0?-1:1;if(l.__position!=="start"&&l.__position!=="end"){var B=-Math.atan2(D[1],D[0]);g[0]<v[0]&&(B=Math.PI+B),l.rotation=B}var V=void 0;switch(l.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":V=-E,x="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":V=E,x="top";break;default:V=0,x="middle"}switch(l.__position){case"end":l.x=y[0]*w+g[0],l.y=y[1]*E+g[1],S=y[0]>.8?"left":y[0]<-.8?"right":"center",x=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":l.x=-y[0]*w+v[0],l.y=-y[1]*E+v[1],S=y[0]>.8?"right":y[0]<-.8?"left":"center",x=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":l.x=w*O+v[0],l.y=v[1]+V,S=D[0]<0?"right":"left",l.originX=-w*O,l.originY=-V;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":l.x=$[0],l.y=$[1]+V,S="center",l.originY=-V;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":l.x=-w*O+g[0],l.y=g[1]+V,S=D[0]>=0?"right":"left",l.originX=w*O,l.originY=-V;break}l.scaleX=l.scaleY=c,l.setStyle({verticalAlign:l.__verticalAlign||x,align:l.__align||S})}},n}(Group$4),LineDraw=function(){function a(n){this.group=new Group$4,this._LineCtor=n||Line$1}return a.prototype.updateData=function(n){var r=this;this._progressiveEls=null;var o=this,s=o.group,l=o._lineData;o._lineData=n,l||s.removeAll();var c=makeSeriesScope$1(n);n.diff(l).add(function(u){r._doAdd(n,u,c)}).update(function(u,d){r._doUpdate(l,n,d,u,c)}).remove(function(u){s.remove(l.getItemGraphicEl(u))}).execute()},a.prototype.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(r,o){r.updateLayout(n,o)},this)},a.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(n,r){this._progressiveEls=[];function o(u){!u.isGroup&&!isEffectObject(u)&&(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var s=n.start;s<n.end;s++){var l=r.getItemLayout(s);if(lineNeedsDraw(l)){var c=new this._LineCtor(r,s,this._seriesScope);c.traverse(o),this.group.add(c),r.setItemGraphicEl(s,c),this._progressiveEls.push(c)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype._doAdd=function(n,r,o){var s=n.getItemLayout(r);if(lineNeedsDraw(s)){var l=new this._LineCtor(n,r,o);n.setItemGraphicEl(r,l),this.group.add(l)}},a.prototype._doUpdate=function(n,r,o,s,l){var c=n.getItemGraphicEl(o);if(!lineNeedsDraw(r.getItemLayout(s))){this.group.remove(c);return}c?c.updateData(r,s,l):c=new this._LineCtor(r,s,l),r.setItemGraphicEl(s,c),this.group.add(c)},a}();function isEffectObject(a){return a.animators&&a.animators.length>0}function makeSeriesScope$1(a){var n=a.hostModel,r=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return a&&!isPointNaN(a[0])&&!isPointNaN(a[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(a,n,r){for(var o=a[0],s=a[1],l=a[2],c=1/0,u,d=r*r,f=.1,v=.1;v<=.9;v+=.1){v1[0]=quadraticAt(o[0],s[0],l[0],v),v1[1]=quadraticAt(o[1],s[1],l[1],v);var g=mathAbs(v2DistSquare(v1,n)-d);g<c&&(c=g,u=v)}for(var y=0;y<32;y++){var _=u+f;v2[0]=quadraticAt(o[0],s[0],l[0],u),v2[1]=quadraticAt(o[1],s[1],l[1],u),v3[0]=quadraticAt(o[0],s[0],l[0],_),v3[1]=quadraticAt(o[1],s[1],l[1],_);var g=v2DistSquare(v2,n)-d;if(mathAbs(g)<.01)break;var S=v2DistSquare(v3,n)-d;f/=2,g<0?S>=0?u=u+f:u=u-f:S>=0?u=u-f:u=u+f}return u}function adjustEdge(a,n){var r=[],o=quadraticSubdivide,s=[[],[],[]],l=[[],[]],c=[];n/=2,a.eachEdge(function(u,d){var f=u.getLayout(),v=u.getVisual("fromSymbol"),g=u.getVisual("toSymbol");f.__original||(f.__original=[clone$3(f[0]),clone$3(f[1])],f[2]&&f.__original.push(clone$3(f[2])));var y=f.__original;if(f[2]!=null){if(copy$1(s[0],y[0]),copy$1(s[1],y[2]),copy$1(s[2],y[1]),v&&v!=="none"){var _=getSymbolSize(u.node1),S=intersectCurveCircle(s,y[0],_*n);o(s[0][0],s[1][0],s[2][0],S,r),s[0][0]=r[3],s[1][0]=r[4],o(s[0][1],s[1][1],s[2][1],S,r),s[0][1]=r[3],s[1][1]=r[4]}if(g&&g!=="none"){var _=getSymbolSize(u.node2),S=intersectCurveCircle(s,y[1],_*n);o(s[0][0],s[1][0],s[2][0],S,r),s[1][0]=r[1],s[2][0]=r[2],o(s[0][1],s[1][1],s[2][1],S,r),s[1][1]=r[1],s[2][1]=r[2]}copy$1(f[0],s[0]),copy$1(f[1],s[2]),copy$1(f[2],s[1])}else{if(copy$1(l[0],y[0]),copy$1(l[1],y[1]),sub(c,l[1],l[0]),normalize$4(c,c),v&&v!=="none"){var _=getSymbolSize(u.node1);scaleAndAdd$1(l[0],l[0],c,_*n)}if(g&&g!=="none"){var _=getSymbolSize(u.node2);scaleAndAdd$1(l[1],l[1],c,-_*n)}copy$1(f[0],l[0]),copy$1(f[1],l[1])}})}function isViewCoordSys(a){return a.type==="view"}var GraphView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){var s=new SymbolDraw,l=new LineDraw,c=this.group;this._controller=new RoamController(o.getZr()),this._controllerHost={target:c},c.add(s.group),c.add(l.group),this._symbolDraw=s,this._lineDraw=l,this._firstRender=!0},n.prototype.render=function(r,o,s){var l=this,c=r.coordinateSystem;this._model=r;var u=this._symbolDraw,d=this._lineDraw,f=this.group;if(isViewCoordSys(c)){var v={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?f.attr(v):updateProps$1(f,v,r)}adjustEdge(r.getGraph(),getNodeGlobalScale(r));var g=r.getData();u.updateData(g);var y=r.getEdgeData();d.updateData(y),this._updateNodeAndLinkScale(),this._updateController(r,o,s),clearTimeout(this._layoutTimeout);var _=r.forceLayout,S=r.get(["force","layoutAnimation"]);_&&this._startForceLayoutIteration(_,S);var x=r.get("layout");g.graph.eachNode(function(P){var D=P.dataIndex,L=P.getGraphicEl(),$=P.getModel();if(L){L.off("drag").off("dragend");var O=$.get("draggable");O&&L.on("drag",function(V){switch(x){case"force":_.warmUp(),!l._layouting&&l._startForceLayoutIteration(_,S),_.setFixed(D),g.setItemLayout(D,[L.x,L.y]);break;case"circular":g.setItemLayout(D,[L.x,L.y]),P.setLayout({fixed:!0},!0),circularLayout(r,"symbolSize",P,[V.offsetX,V.offsetY]),l.updateLayout(r);break;case"none":default:g.setItemLayout(D,[L.x,L.y]),simpleLayoutEdge(r.getGraph(),r),l.updateLayout(r);break}}).on("dragend",function(){_&&_.setUnfixed(D)}),L.setDraggable(O,!!$.get("cursor"));var B=$.get(["emphasis","focus"]);B==="adjacency"&&(getECData(L).focus=P.getAdjacentDataIndices())}}),g.graph.eachEdge(function(P){var D=P.getGraphicEl(),L=P.getModel().get(["emphasis","focus"]);D&&L==="adjacency"&&(getECData(D).focus={edge:[P.dataIndex],node:[P.node1.dataIndex,P.node2.dataIndex]})});var T=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),w=g.getLayout("cx"),E=g.getLayout("cy");g.graph.eachNode(function(P){rotateNodeLabel(P,T,w,E)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(r,o){var s=this;(function l(){r.step(function(c){s.updateLayout(s._model),(s._layouting=!c)&&(o?s._layoutTimeout=setTimeout(l,16):l())})})()},n.prototype._updateController=function(r,o,s){var l=this,c=this._controller,u=this._controllerHost,d=this.group;if(c.setPointerChecker(function(f,v,g){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(v,g)&&!onIrrelevantElement(f,s,r)}),!isViewCoordSys(r.coordinateSystem)){c.disable();return}c.enable(r.get("roam")),u.zoomLimit=r.get("scaleLimit"),u.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(u,f.dx,f.dy),s.dispatchAction({seriesId:r.id,type:"graphRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(u,f.scale,f.originX,f.originY),s.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),l._updateNodeAndLinkScale(),adjustEdge(r.getGraph(),getNodeGlobalScale(r)),l._lineDraw.updateLayout(),s.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var r=this._model,o=r.getData(),s=getNodeGlobalScale(r);o.eachItemGraphicEl(function(l,c){l&&l.setSymbolScale(s)})},n.prototype.updateLayout=function(r){adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(ChartView);function generateNodeKey(a){return"_EC_"+a}var Graph=function(){function a(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(n,r){n=n==null?""+r:""+n;var o=this._nodesMap;if(!o[generateNodeKey(n)]){var s=new GraphNode(n,r);return s.hostGraph=this,this.nodes.push(s),o[generateNodeKey(n)]=s,s}},a.prototype.getNodeByIndex=function(n){var r=this.data.getRawIndex(n);return this.nodes[r]},a.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},a.prototype.addEdge=function(n,r,o){var s=this._nodesMap,l=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(r)&&(r=this.nodes[r]),n instanceof GraphNode||(n=s[generateNodeKey(n)]),r instanceof GraphNode||(r=s[generateNodeKey(r)]),!(!n||!r)){var c=n.id+"-"+r.id,u=new GraphEdge(n,r,o);return u.hostGraph=this,this._directed&&(n.outEdges.push(u),r.inEdges.push(u)),n.edges.push(u),n!==r&&r.edges.push(u),this.edges.push(u),l[c]=u,u}},a.prototype.getEdgeByIndex=function(n){var r=this.edgeData.getRawIndex(n);return this.edges[r]},a.prototype.getEdge=function(n,r){n instanceof GraphNode&&(n=n.id),r instanceof GraphNode&&(r=r.id);var o=this._edgesMap;return this._directed?o[n+"-"+r]:o[n+"-"+r]||o[r+"-"+n]},a.prototype.eachNode=function(n,r){for(var o=this.nodes,s=o.length,l=0;l<s;l++)o[l].dataIndex>=0&&n.call(r,o[l],l)},a.prototype.eachEdge=function(n,r){for(var o=this.edges,s=o.length,l=0;l<s;l++)o[l].dataIndex>=0&&o[l].node1.dataIndex>=0&&o[l].node2.dataIndex>=0&&n.call(r,o[l],l)},a.prototype.breadthFirstTraverse=function(n,r,o,s){if(r instanceof GraphNode||(r=this._nodesMap[generateNodeKey(r)]),!!r){for(var l=o==="out"?"outEdges":o==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!n.call(s,r,null))for(var u=[r];u.length;)for(var d=u.shift(),f=d[l],c=0;c<f.length;c++){var v=f[c],g=v.node1===d?v.node2:v.node1;if(!g.__visited){if(n.call(s,g,d))return;u.push(g),g.__visited=!0}}}},a.prototype.update=function(){for(var n=this.data,r=this.edgeData,o=this.nodes,s=this.edges,l=0,c=o.length;l<c;l++)o[l].dataIndex=-1;for(var l=0,c=n.count();l<c;l++)o[n.getRawIndex(l)].dataIndex=l;r.filterSelf(function(u){var d=s[r.getRawIndex(u)];return d.node1.dataIndex>=0&&d.node2.dataIndex>=0});for(var l=0,c=s.length;l<c;l++)s[l].dataIndex=-1;for(var l=0,c=r.count();l<c;l++)s[r.getRawIndex(l)].dataIndex=l},a.prototype.clone=function(){for(var n=new a(this._directed),r=this.nodes,o=this.edges,s=0;s<r.length;s++)n.addNode(r[s].id,r[s].dataIndex);for(var s=0;s<o.length;s++){var l=o[s];n.addEdge(l.node1.id,l.node2.id,l.dataIndex)}return n},a}(),GraphNode=function(){function a(n,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n??"",this.dataIndex=r??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.data.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},r=0;r<this.edges.length;r++){var o=this.edges[r];o.dataIndex<0||(n.edge.push(o.dataIndex),n.node.push(o.node1.dataIndex,o.node2.dataIndex))}return n},a.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),r=createHashMap(),o=0;o<this.edges.length;o++){var s=this.edges[o];if(!(s.dataIndex<0)){n.set(s.dataIndex,!0);for(var l=[s.node1],c=[s.node2],u=0;u<l.length;){var d=l[u];u++,r.set(d.dataIndex,!0);for(var f=0;f<d.inEdges.length;f++)n.set(d.inEdges[f].dataIndex,!0),l.push(d.inEdges[f].node1)}for(u=0;u<c.length;){var v=c[u];u++,r.set(v.dataIndex,!0);for(var f=0;f<v.outEdges.length;f++)n.set(v.outEdges[f].dataIndex,!0),c.push(v.outEdges[f].node2)}}}return{edge:n.keys(),node:r.keys()}},a}(),GraphEdge=function(){function a(n,r,o){this.dataIndex=-1,this.node1=n,this.node2=r,this.dataIndex=o??-1}return a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.edgeData.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),r=createHashMap();n.set(this.dataIndex,!0);for(var o=[this.node1],s=[this.node2],l=0;l<o.length;){var c=o[l];l++,r.set(c.dataIndex,!0);for(var u=0;u<c.inEdges.length;u++)n.set(c.inEdges[u].dataIndex,!0),o.push(c.inEdges[u].node1)}for(l=0;l<s.length;){var d=s[l];l++,r.set(d.dataIndex,!0);for(var u=0;u<d.outEdges.length;u++)n.set(d.outEdges[u].dataIndex,!0),s.push(d.outEdges[u].node2)}return{edge:n.keys(),node:r.keys()}},a}();function createGraphDataProxyMixin(a,n){return{getValue:function(r){var o=this[a][n];return o.getStore().get(o.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,o){this.dataIndex>=0&&this[a][n].setItemVisual(this.dataIndex,r,o)},getVisual:function(r){return this[a][n].getItemVisual(this.dataIndex,r)},setLayout:function(r,o){this.dataIndex>=0&&this[a][n].setItemLayout(this.dataIndex,r,o)},getLayout:function(){return this[a][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(a,n,r,o,s){for(var l=new Graph(o),c=0;c<a.length;c++)l.addNode(retrieve(a[c].id,a[c].name,c),c);for(var u=[],d=[],f=0,c=0;c<n.length;c++){var v=n[c],g=v.source,y=v.target;l.addEdge(g,y,f)&&(d.push(v),u.push(retrieve(convertOptionIdName(v.id,null),g+" > "+y)),f++)}var _=r.get("coordinateSystem"),S;if(_==="cartesian2d"||_==="polar")S=createSeriesData(a,r);else{var x=CoordinateSystemManager.get(_),T=x?x.dimensions||[]:[];indexOf(T,"value")<0&&T.concat(["value"]);var w=prepareSeriesDataSchema(a,{coordDimensions:T,encodeDefine:r.getEncode()}).dimensions;S=new SeriesData(w,r),S.initData(a)}var E=new SeriesData(["value"],r);return E.initData(d,u),s&&s(S,E),linkSeriesData({mainData:S,struct:l,structAttr:"graph",datas:{node:S,edge:E},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}var GraphSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments);var o=this;function s(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider(s,s),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(r){a.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(r,"edgeLabel",["show"])},n.prototype.getInitialData=function(r,o){var s=r.edges||r.links||[],l=r.data||r.nodes||[],c=this;if(l&&s){initCurvenessList(this);var u=createGraphFromNodeEdge(l,s,this,!0,d);return each$f(u.edges,function(f){createEdgeMapForCurveness(f.node1,f.node2,this,f.dataIndex)},this),u.data}function d(f,v){f.wrapMethod("getItemModel",function(S){var x=c._categoriesModels,T=S.getShallow("category"),w=x[T];return w&&(w.parentModel=S.parentModel,S.parentModel=w),S});var g=Model.prototype.getModel;function y(S,x){var T=g.call(this,S,x);return T.resolveParentPath=_,T}v.wrapMethod("getItemModel",function(S){return S.resolveParentPath=_,S.getModel=y,S});function _(S){if(S&&(S[0]==="label"||S[1]==="label")){var x=S.slice();return S[0]==="label"?x[0]="edgeLabel":S[1]==="label"&&(x[1]="edgeLabel"),x}return S}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(r,o,s){if(s==="edge"){var l=this.getData(),c=this.getDataParams(r,s),u=l.graph.getEdgeByIndex(r),d=l.getName(u.node1.dataIndex),f=l.getName(u.node2.dataIndex),v=[];return d!=null&&v.push(d),f!=null&&v.push(f),createTooltipMarkup("nameValue",{name:v.join(" > "),value:c.value,noValue:c.value==null})}var g=defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o});return g},n.prototype._updateCategoriesData=function(){var r=map$1(this.option.categories||[],function(s){return s.value!=null?s:extend({value:0},s)}),o=new SeriesData(["value"],this);o.initData(r),this._categoriesData=o,this._categoriesModels=o.mapArray(function(s){return o.getItemModel(s)})},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(a){a.registerChartView(GraphView),a.registerSeriesModel(GraphSeriesModel),a.registerProcessor(categoryFilter),a.registerVisual(categoryVisual),a.registerVisual(graphEdgeVisual),a.registerLayout(graphSimpleLayout),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),a.registerLayout(graphForceLayout),a.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),a.registerAction(actionInfo$1,function(n,r,o){r.eachComponent({mainType:"series",query:n},function(s){var l=s.coordinateSystem,c=updateCenterAndZoom(l,n,void 0,o);s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom)})})}var PointerShape=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),PointerPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="pointer",o}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(r,o){var s=Math.cos,l=Math.sin,c=o.r,u=o.width,d=o.angle,f=o.x-s(d)*u*(u>=c/3?1:2),v=o.y-l(d)*u*(u>=c/3?1:2);d=o.angle-Math.PI/2,r.moveTo(f,v),r.lineTo(o.x+s(d)*u,o.y+l(d)*u),r.lineTo(o.x+s(o.angle)*c,o.y+l(o.angle)*c),r.lineTo(o.x-s(d)*u,o.y-l(d)*u),r.lineTo(f,v)},n}(Path);function parsePosition(a,n){var r=a.get("center"),o=n.getWidth(),s=n.getHeight(),l=Math.min(o,s),c=parsePercent(r[0],n.getWidth()),u=parsePercent(r[1],n.getHeight()),d=parsePercent(a.get("radius"),l/2);return{cx:c,cy:u,r:d}}function formatLabel(a,n){var r=a==null?"":a+"";return n&&(isString(n)?r=n.replace("{value}",r):isFunction(n)&&(r=n(a))),r}var GaugeView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){this.group.removeAll();var l=r.get(["axisLine","lineStyle","color"]),c=parsePosition(r,s);this._renderMain(r,o,s,l,c),this._data=r.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(r,o,s,l,c){var u=this.group,d=r.get("clockwise"),f=-r.get("startAngle")/180*Math.PI,v=-r.get("endAngle")/180*Math.PI,g=r.getModel("axisLine"),y=g.get("roundCap"),_=y?SausagePath:Sector,S=g.get("show"),x=g.getModel("lineStyle"),T=x.get("width"),w=[f,v];normalizeArcAngles(w,!d),f=w[0],v=w[1];for(var E=v-f,P=f,D=[],L=0;S&&L<l.length;L++){var $=Math.min(Math.max(l[L][0],0),1);v=f+E*$;var O=new _({shape:{startAngle:P,endAngle:v,cx:c.cx,cy:c.cy,clockwise:d,r0:c.r-T,r:c.r},silent:!0});O.setStyle({fill:l[L][1]}),O.setStyle(x.getLineStyle(["color","width"])),D.push(O),P=v}D.reverse(),each$f(D,function(V){return u.add(V)});var B=function(V){if(V<=0)return l[0][1];var F;for(F=0;F<l.length;F++)if(l[F][0]>=V&&(F===0?0:l[F-1][0])<V)return l[F][1];return l[F-1][1]};this._renderTicks(r,o,s,B,c,f,v,d,T),this._renderTitleAndDetail(r,o,s,B,c),this._renderAnchor(r,c),this._renderPointer(r,o,s,B,c,f,v,d,T)},n.prototype._renderTicks=function(r,o,s,l,c,u,d,f,v){for(var g=this.group,y=c.cx,_=c.cy,S=c.r,x=+r.get("min"),T=+r.get("max"),w=r.getModel("splitLine"),E=r.getModel("axisTick"),P=r.getModel("axisLabel"),D=r.get("splitNumber"),L=E.get("splitNumber"),$=parsePercent(w.get("length"),S),O=parsePercent(E.get("length"),S),B=u,V=(d-u)/D,F=V/L,U=w.getModel("lineStyle").getLineStyle(),G=E.getModel("lineStyle").getLineStyle(),W=w.get("distance"),j,K,q=0;q<=D;q++){if(j=Math.cos(B),K=Math.sin(B),w.get("show")){var ie=W?W+v:v,ee=new Line$2({shape:{x1:j*(S-ie)+y,y1:K*(S-ie)+_,x2:j*(S-$-ie)+y,y2:K*(S-$-ie)+_},style:U,silent:!0});U.stroke==="auto"&&ee.setStyle({stroke:l(q/D)}),g.add(ee)}if(P.get("show")){var ie=P.get("distance")+W,he=formatLabel(round$3(q/D*(T-x)+x),P.get("formatter")),pe=l(q/D),ce=j*(S-$-ie)+y,ye=K*(S-$-ie)+_,we=P.get("rotate"),ge=0;we==="radial"?(ge=-B+2*Math.PI,ge>Math.PI/2&&(ge+=Math.PI)):we==="tangential"?ge=-B-Math.PI/2:isNumber(we)&&(ge=we*Math.PI/180),ge===0?g.add(new ZRText({style:createTextStyle(P,{text:he,x:ce,y:ye,verticalAlign:K<-.8?"top":K>.8?"bottom":"middle",align:j<-.4?"left":j>.4?"right":"center"},{inheritColor:pe}),silent:!0})):g.add(new ZRText({style:createTextStyle(P,{text:he,x:ce,y:ye,verticalAlign:"middle",align:"center"},{inheritColor:pe}),silent:!0,originX:ce,originY:ye,rotation:ge}))}if(E.get("show")&&q!==D){var ie=E.get("distance");ie=ie?ie+v:v;for(var Se=0;Se<=L;Se++){j=Math.cos(B),K=Math.sin(B);var $e=new Line$2({shape:{x1:j*(S-ie)+y,y1:K*(S-ie)+_,x2:j*(S-O-ie)+y,y2:K*(S-O-ie)+_},silent:!0,style:G});G.stroke==="auto"&&$e.setStyle({stroke:l((q+Se/L)/D)}),g.add($e),B+=F}B-=F}else B+=V}},n.prototype._renderPointer=function(r,o,s,l,c,u,d,f,v){var g=this.group,y=this._data,_=this._progressEls,S=[],x=r.get(["pointer","show"]),T=r.getModel("progress"),w=T.get("show"),E=r.getData(),P=E.mapDimension("value"),D=+r.get("min"),L=+r.get("max"),$=[D,L],O=[u,d];function B(F,U){var G=E.getItemModel(F),W=G.getModel("pointer"),j=parsePercent(W.get("width"),c.r),K=parsePercent(W.get("length"),c.r),q=r.get(["pointer","icon"]),ie=W.get("offsetCenter"),ee=parsePercent(ie[0],c.r),he=parsePercent(ie[1],c.r),pe=W.get("keepAspect"),ce;return q?ce=createSymbol$1(q,ee-j/2,he-K,j,K,null,pe):ce=new PointerPath({shape:{angle:-Math.PI/2,width:j,r:K,x:ee,y:he}}),ce.rotation=-(U+Math.PI/2),ce.x=c.cx,ce.y=c.cy,ce}function V(F,U){var G=T.get("roundCap"),W=G?SausagePath:Sector,j=T.get("overlap"),K=j?T.get("width"):v/E.count(),q=j?c.r-K:c.r-(F+1)*K,ie=j?c.r:c.r-F*K,ee=new W({shape:{startAngle:u,endAngle:U,cx:c.cx,cy:c.cy,clockwise:f,r0:q,r:ie}});return j&&(ee.z2=linearMap$2(E.get(P,F),[D,L],[100,0],!0)),ee}(w||x)&&(E.diff(y).add(function(F){var U=E.get(P,F);if(x){var G=B(F,u);initProps(G,{rotation:-((isNaN(+U)?O[0]:linearMap$2(U,$,O,!0))+Math.PI/2)},r),g.add(G),E.setItemGraphicEl(F,G)}if(w){var W=V(F,u),j=T.get("clip");initProps(W,{shape:{endAngle:linearMap$2(U,$,O,j)}},r),g.add(W),setCommonECData(r.seriesIndex,E.dataType,F,W),S[F]=W}}).update(function(F,U){var G=E.get(P,F);if(x){var W=y.getItemGraphicEl(U),j=W?W.rotation:u,K=B(F,j);K.rotation=j,updateProps$1(K,{rotation:-((isNaN(+G)?O[0]:linearMap$2(G,$,O,!0))+Math.PI/2)},r),g.add(K),E.setItemGraphicEl(F,K)}if(w){var q=_[U],ie=q?q.shape.endAngle:u,ee=V(F,ie),he=T.get("clip");updateProps$1(ee,{shape:{endAngle:linearMap$2(G,$,O,he)}},r),g.add(ee),setCommonECData(r.seriesIndex,E.dataType,F,ee),S[F]=ee}}).execute(),E.each(function(F){var U=E.getItemModel(F),G=U.getModel("emphasis"),W=G.get("focus"),j=G.get("blurScope"),K=G.get("disabled");if(x){var q=E.getItemGraphicEl(F),ie=E.getItemVisual(F,"style"),ee=ie.fill;if(q instanceof ZRImage){var he=q.style;q.useStyle(extend({image:he.image,x:he.x,y:he.y,width:he.width,height:he.height},ie))}else q.useStyle(ie),q.type!=="pointer"&&q.setColor(ee);q.setStyle(U.getModel(["pointer","itemStyle"]).getItemStyle()),q.style.fill==="auto"&&q.setStyle("fill",l(linearMap$2(E.get(P,F),$,[0,1],!0))),q.z2EmphasisLift=0,setStatesStylesFromModel(q,U),toggleHoverEmphasis(q,W,j,K)}if(w){var pe=S[F];pe.useStyle(E.getItemVisual(F,"style")),pe.setStyle(U.getModel(["progress","itemStyle"]).getItemStyle()),pe.z2EmphasisLift=0,setStatesStylesFromModel(pe,U),toggleHoverEmphasis(pe,W,j,K)}}),this._progressEls=S)},n.prototype._renderAnchor=function(r,o){var s=r.getModel("anchor"),l=s.get("show");if(l){var c=s.get("size"),u=s.get("icon"),d=s.get("offsetCenter"),f=s.get("keepAspect"),v=createSymbol$1(u,o.cx-c/2+parsePercent(d[0],o.r),o.cy-c/2+parsePercent(d[1],o.r),c,c,null,f);v.z2=s.get("showAbove")?1:0,v.setStyle(s.getModel("itemStyle").getItemStyle()),this.group.add(v)}},n.prototype._renderTitleAndDetail=function(r,o,s,l,c){var u=this,d=r.getData(),f=d.mapDimension("value"),v=+r.get("min"),g=+r.get("max"),y=new Group$4,_=[],S=[],x=r.isAnimationEnabled(),T=r.get(["pointer","showAbove"]);d.diff(this._data).add(function(w){_[w]=new ZRText({silent:!0}),S[w]=new ZRText({silent:!0})}).update(function(w,E){_[w]=u._titleEls[E],S[w]=u._detailEls[E]}).execute(),d.each(function(w){var E=d.getItemModel(w),P=d.get(f,w),D=new Group$4,L=l(linearMap$2(P,[v,g],[0,1],!0)),$=E.getModel("title");if($.get("show")){var O=$.get("offsetCenter"),B=c.cx+parsePercent(O[0],c.r),V=c.cy+parsePercent(O[1],c.r),F=_[w];F.attr({z2:T?0:2,style:createTextStyle($,{x:B,y:V,text:d.getName(w),align:"center",verticalAlign:"middle"},{inheritColor:L})}),D.add(F)}var U=E.getModel("detail");if(U.get("show")){var G=U.get("offsetCenter"),W=c.cx+parsePercent(G[0],c.r),j=c.cy+parsePercent(G[1],c.r),K=parsePercent(U.get("width"),c.r),q=parsePercent(U.get("height"),c.r),ie=r.get(["progress","show"])?d.getItemVisual(w,"style").fill:L,F=S[w],ee=U.get("formatter");F.attr({z2:T?0:2,style:createTextStyle(U,{x:W,y:j,text:formatLabel(P,ee),width:isNaN(K)?null:K,height:isNaN(q)?null:q,align:"center",verticalAlign:"middle"},{inheritColor:ie})}),setLabelValueAnimation(F,{normal:U},P,function(pe){return formatLabel(pe,ee)}),x&&animateLabelValue(F,w,d,r,{getFormattedLabel:function(pe,ce,ye,we,ge,Se){return formatLabel(Se?Se.interpolatedValue:P,ee)}}),D.add(F)}y.add(D)}),this.group.add(y),this._titleEls=_,this._detailEls=S},n.type="gauge",n}(ChartView),GaugeSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="itemStyle",r}return n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n}(SeriesModel);function install$E(a){a.registerChartView(GaugeView),a.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(a){__extends(n,a);function n(r,o){var s=a.call(this)||this,l=s,c=new Polyline$1,u=new ZRText;return l.setTextContent(u),s.setTextGuideLine(c),s.updateData(r,o,!0),s}return n.prototype.updateData=function(r,o,s){var l=this,c=r.hostModel,u=r.getItemModel(o),d=r.getItemLayout(o),f=u.getModel("emphasis"),v=u.get(opacityAccessPath$1);v=v??1,s||saveOldStyle(l),l.useStyle(r.getItemVisual(o,"style")),l.style.lineJoin="round",s?(l.setShape({points:d.points}),l.style.opacity=0,initProps(l,{style:{opacity:v}},c,o)):updateProps$1(l,{style:{opacity:v},shape:{points:d.points}},c,o),setStatesStylesFromModel(l,u),this._updateLabel(r,o),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},n.prototype._updateLabel=function(r,o){var s=this,l=this.getTextGuideLine(),c=s.getTextContent(),u=r.hostModel,d=r.getItemModel(o),f=r.getItemLayout(o),v=f.label,g=r.getItemVisual(o,"style"),y=g.fill;setLabelStyle(c,getLabelStatesModels(d),{labelFetcher:r.hostModel,labelDataIndex:o,defaultOpacity:g.opacity,defaultText:r.getName(o)},{normal:{align:v.textAlign,verticalAlign:v.verticalAlign}}),s.setTextConfig({local:!0,inside:!!v.inside,insideStroke:y,outsideFill:y});var _=v.linePoints;l.setShape({points:_}),s.textGuideLineConfig={anchor:_?new Point(_[0][0],_[0][1]):null},updateProps$1(c,{style:{x:v.x,y:v.y}},u,o),c.attr({rotation:v.rotation,originX:v.x,originY:v.y,z2:10}),setLabelLineStyle(s,getLabelLineStatesModels(d),{stroke:y})},n}(Polygon),FunnelView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.ignoreLabelLineUpdate=!0,r}return n.prototype.render=function(r,o,s){var l=r.getData(),c=this._data,u=this.group;l.diff(c).add(function(d){var f=new FunnelPiece(l,d);l.setItemGraphicEl(d,f),u.add(f)}).update(function(d,f){var v=c.getItemGraphicEl(f);v.updateData(l,d),u.add(v),l.setItemGraphicEl(d,v)}).remove(function(d){var f=c.getItemGraphicEl(d);removeElementWithFadeOut(f,r,d)}).execute(),this._data=l},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n}(ChartView),FunnelSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,s=r.emphasis.labelLine;o.show=o.show&&r.label.show,s.show=s.show&&r.emphasis.label.show},n.prototype.getDataParams=function(r){var o=this.getData(),s=a.prototype.getDataParams.call(this,r),l=o.mapDimension("value"),c=o.getSum(l);return s.percent=c?+(o.get(l,r)/c*100).toFixed(2):0,s.$vars.push("percent"),s},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function getViewRect$2(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(a,n){for(var r=a.mapDimension("value"),o=a.mapArray(r,function(d){return d}),s=[],l=n==="ascending",c=0,u=a.count();c<u;c++)s[c]=c;return isFunction(n)?s.sort(n):n!=="none"&&s.sort(function(d,f){return l?o[d]-o[f]:o[f]-o[d]}),s}function labelLayout(a){var n=a.hostModel,r=n.get("orient");a.each(function(o){var s=a.getItemModel(o),l=s.getModel("label"),c=l.get("position"),u=s.getModel("labelLine"),d=a.getItemLayout(o),f=d.points,v=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",g,y,_,S;if(v)c==="insideLeft"?(y=(f[0][0]+f[3][0])/2+5,_=(f[0][1]+f[3][1])/2,g="left"):c==="insideRight"?(y=(f[1][0]+f[2][0])/2-5,_=(f[1][1]+f[2][1])/2,g="right"):(y=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,_=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,g="center"),S=[[y,_],[y,_]];else{var x=void 0,T=void 0,w=void 0,E=void 0,P=u.get("length");c==="left"?(x=(f[3][0]+f[0][0])/2,T=(f[3][1]+f[0][1])/2,w=x-P,y=w-5,g="right"):c==="right"?(x=(f[1][0]+f[2][0])/2,T=(f[1][1]+f[2][1])/2,w=x+P,y=w+5,g="left"):c==="top"?(x=(f[3][0]+f[0][0])/2,T=(f[3][1]+f[0][1])/2,E=T-P,_=E-5,g="center"):c==="bottom"?(x=(f[1][0]+f[2][0])/2,T=(f[1][1]+f[2][1])/2,E=T+P,_=E+5,g="center"):c==="rightTop"?(x=r==="horizontal"?f[3][0]:f[1][0],T=r==="horizontal"?f[3][1]:f[1][1],r==="horizontal"?(E=T-P,_=E-5,g="center"):(w=x+P,y=w+5,g="top")):c==="rightBottom"?(x=f[2][0],T=f[2][1],r==="horizontal"?(E=T+P,_=E+5,g="center"):(w=x+P,y=w+5,g="bottom")):c==="leftTop"?(x=f[0][0],T=r==="horizontal"?f[0][1]:f[1][1],r==="horizontal"?(E=T-P,_=E-5,g="center"):(w=x-P,y=w-5,g="right")):c==="leftBottom"?(x=r==="horizontal"?f[1][0]:f[3][0],T=r==="horizontal"?f[1][1]:f[2][1],r==="horizontal"?(E=T+P,_=E+5,g="center"):(w=x-P,y=w-5,g="right")):(x=(f[1][0]+f[2][0])/2,T=(f[1][1]+f[2][1])/2,r==="horizontal"?(E=T+P,_=E+5,g="center"):(w=x+P,y=w+5,g="left")),r==="horizontal"?(w=x,y=w):(E=T,_=E),S=[[x,T],[w,E]]}d.label={linePoints:S,x:y,y:_,verticalAlign:"middle",textAlign:g,inside:v}})}function funnelLayout(a,n){a.eachSeriesByType("funnel",function(r){var o=r.getData(),s=o.mapDimension("value"),l=r.get("sort"),c=getViewRect$2(r,n),u=r.get("orient"),d=c.width,f=c.height,v=getSortedIndices(o,l),g=c.x,y=c.y,_=u==="horizontal"?[parsePercent(r.get("minSize"),f),parsePercent(r.get("maxSize"),f)]:[parsePercent(r.get("minSize"),d),parsePercent(r.get("maxSize"),d)],S=o.getDataExtent(s),x=r.get("min"),T=r.get("max");x==null&&(x=Math.min(S[0],0)),T==null&&(T=S[1]);var w=r.get("funnelAlign"),E=r.get("gap"),P=u==="horizontal"?d:f,D=(P-E*(o.count()-1))/o.count(),L=function(j,K){if(u==="horizontal"){var q=o.get(s,j)||0,ie=linearMap$2(q,[x,T],_,!0),ee=void 0;switch(w){case"top":ee=y;break;case"center":ee=y+(f-ie)/2;break;case"bottom":ee=y+(f-ie);break}return[[K,ee],[K,ee+ie]]}var he=o.get(s,j)||0,pe=linearMap$2(he,[x,T],_,!0),ce;switch(w){case"left":ce=g;break;case"center":ce=g+(d-pe)/2;break;case"right":ce=g+d-pe;break}return[[ce,K],[ce+pe,K]]};l==="ascending"&&(D=-D,E=-E,u==="horizontal"?g+=d:y+=f,v=v.reverse());for(var $=0;$<v.length;$++){var O=v[$],B=v[$+1],V=o.getItemModel(O);if(u==="horizontal"){var F=V.get(["itemStyle","width"]);F==null?F=D:(F=parsePercent(F,d),l==="ascending"&&(F=-F));var U=L(O,g),G=L(B,g+F);g+=F+E,o.setItemLayout(O,{points:U.concat(G.slice().reverse())})}else{var W=V.get(["itemStyle","height"]);W==null?W=D:(W=parsePercent(W,f),l==="ascending"&&(W=-W));var U=L(O,y),G=L(B,y+W);y+=W+E,o.setItemLayout(O,{points:U.concat(G.slice().reverse())})}}labelLayout(o)})}function install$D(a){a.registerChartView(FunnelView),a.registerSeriesModel(FunnelSeriesModel),a.registerLayout(funnelLayout),a.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._dataGroup=new Group$4,r._initialized=!1,r}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(r,o,s,l){this._progressiveEls=null;var c=this._dataGroup,u=r.getData(),d=this._data,f=r.coordinateSystem,v=f.dimensions,g=makeSeriesScope(r);u.diff(d).add(y).update(_).remove(S).execute();function y(T){var w=addEl(u,c,T,v,f);updateElCommon(w,u,T,g)}function _(T,w){var E=d.getItemGraphicEl(w),P=createLinePoints(u,T,v,f);u.setItemGraphicEl(T,E),updateProps$1(E,{shape:{points:P}},r,T),saveOldStyle(E),updateElCommon(E,u,T,g)}function S(T){var w=d.getItemGraphicEl(T);c.remove(w)}if(!this._initialized){this._initialized=!0;var x=createGridClipShape$2(f,r,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(x)}this._data=u},n.prototype.incrementalPrepareRender=function(r,o,s){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(r,o,s){for(var l=o.getData(),c=o.coordinateSystem,u=c.dimensions,d=makeSeriesScope(o),f=this._progressiveEls=[],v=r.start;v<r.end;v++){var g=addEl(l,this._dataGroup,v,u,c);g.incremental=!0,updateElCommon(g,l,v,d),f.push(g)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n}(ChartView);function createGridClipShape$2(a,n,r){var o=a.model,s=a.getRect(),l=new Rect$2({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),c=o.get("layout")==="horizontal"?"width":"height";return l.setShape(c,0),initProps(l,{shape:{width:s.width,height:s.height}},n,r),l}function createLinePoints(a,n,r,o){for(var s=[],l=0;l<r.length;l++){var c=r[l],u=a.get(a.mapDimension(c),n);isEmptyValue(u,o.getAxis(c).type)||s.push(o.dataToPoint(u,c))}return s}function addEl(a,n,r,o,s){var l=createLinePoints(a,r,o,s),c=new Polyline$1({shape:{points:l},z2:10});return n.add(c),a.setItemGraphicEl(r,c),c}function makeSeriesScope(a){var n=a.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(a,n,r,o){a.useStyle(n.getItemVisual(r,"style")),a.style.fill=null,a.setShape("smooth",o.smooth);var s=n.getItemModel(r),l=s.getModel("emphasis");setStatesStylesFromModel(a,s,"lineStyle"),toggleHoverEmphasis(a,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function isEmptyValue(a,n){return n==="category"?a==null:a==null||isNaN(a)}var ParallelSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(r){var o=this.coordinateSystem,s=this.getData(),l=[];return o.eachActiveState(s,function(c,u){r===c&&l.push(s.getRawIndex(u))}),l},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n}(SeriesModel);function makeDefaultEncode(a){var n=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(n){var r={};return each$f(n.dimensions,function(o){var s=convertDimNameToNumber(o);r[o]=s}),r}}function convertDimNameToNumber(a){return+a.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(a,n){var r=a.coordinateSystem,o={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(s,l){r.eachActiveState(l,function(c,u){var d=o[c];if(c==="normal"&&l.hasItemOption){var f=l.getItemModel(u).get(opacityAccessPath,!0);f!=null&&(d=f)}var v=l.ensureUniqueItemVisual(u,"style");v.opacity=d},s.start,s.end)}}}};function parallelPreprocessor(a){createParallelIfNeeded(a),mergeAxisOptionFromParallel(a)}function createParallelIfNeeded(a){if(!a.parallel){var n=!1;each$f(a.series,function(r){r&&r.type==="parallel"&&(n=!0)}),n&&(a.parallel=[{}])}}function mergeAxisOptionFromParallel(a){var n=normalizeToArray(a.parallelAxis);each$f(n,function(r){if(isObject$3(r)){var o=r.parallelIndex||0,s=normalizeToArray(a.parallel)[o];s&&s.parallelAxisDefault&&merge(r,s.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){this._model=r,this._api=s,this._handlers||(this._handlers={},each$f(handlers$1,function(l,c){s.getZr().on(c,this._handlers[c]=bind$1(l,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(r,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(s,l){o.getZr().off(l,s)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},n.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},r))},n.type="parallel",n}(ComponentView),handlers$1={mousedown:function(a){checkTrigger(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var r=[a.offsetX,a.offsetY],o=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2);if(o>CLICK_THRESHOLD)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);s.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,r=n.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),o=r.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(a,n){var r=a._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===n}var ParallelModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(r){var o=this.option;r&&merge(o,r,!0),this._initDimensions()},n.prototype.contains=function(r,o){var s=r.get("parallelIndex");return s!=null&&o.getComponent("parallel",s)===this},n.prototype.setAxisExpand=function(r){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){r.hasOwnProperty(o)&&(this.option[o]=r[o])},this)},n.prototype._initDimensions=function(){var r=this.dimensions=[],o=this.parallelAxisIndex=[],s=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(l){return(l.get("parallelIndex")||0)===this.componentIndex},this);each$f(s,function(l){r.push("dim"+l.get("dim")),o.push(l.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n}(ComponentModel),ParallelAxis=function(a){__extends(n,a);function n(r,o,s,l,c){var u=a.call(this,r,o,s)||this;return u.type=l||"value",u.axisIndex=c,u}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n}(Axis);function sliderMove(a,n,r,o,s,l){a=a||0;var c=r[1]-r[0];if(s!=null&&(s=restrict$1(s,[0,c])),l!=null&&(l=Math.max(l,s??0)),o==="all"){var u=Math.abs(n[1]-n[0]);u=restrict$1(u,[0,c]),s=l=restrict$1(u,[s,l]),o=0}n[0]=restrict$1(n[0],r),n[1]=restrict$1(n[1],r);var d=getSpanSign(n,o);n[o]+=a;var f=s||0,v=r.slice();d.sign<0?v[0]+=f:v[1]-=f,n[o]=restrict$1(n[o],v);var g;return g=getSpanSign(n,o),s!=null&&(g.sign!==d.sign||g.span<s)&&(n[1-o]=n[o]+d.sign*s),g=getSpanSign(n,o),l!=null&&g.span>l&&(n[1-o]=n[o]+g.sign*l),n}function getSpanSign(a,n){var r=a[n]-a[1-n];return{span:Math.abs(r),sign:r>0?-1:r<0?1:n?-1:1}}function restrict$1(a,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,a))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function a(n,r,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,r,o)}return a.prototype._init=function(n,r,o){var s=n.dimensions,l=n.parallelAxisIndex;each$a(s,function(c,u){var d=l[u],f=r.getComponent("parallelAxis",d),v=this._axesMap.set(c,new ParallelAxis(c,createScaleByModel$1(f),[0,0],f.get("type"),d)),g=v.type==="category";v.onBand=g&&f.get("boundaryGap"),v.inverse=f.get("inverse"),f.axis=v,v.model=f,v.coordinateSystem=f.coordinateSystem=this},this)},a.prototype.update=function(n,r){this._updateAxesFromSeries(this._model,n)},a.prototype.containPoint=function(n){var r=this._makeLayoutInfo(),o=r.axisBase,s=r.layoutBase,l=r.pixelDimIndex,c=n[1-l],u=n[l];return c>=o&&c<=o+r.axisLength&&u>=s&&u<=s+r.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(n,r){r.eachSeries(function(o){if(n.contains(o,r)){var s=o.getData();each$a(this.dimensions,function(l){var c=this._axesMap.get(l);c.scale.unionExtentFromData(s,s.mapDimension(l)),niceScaleExtent(c.scale,c.model)},this)}},this)},a.prototype.resize=function(n,r){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var n=this._model,r=this._rect,o=["x","y"],s=["width","height"],l=n.get("layout"),c=l==="horizontal"?0:1,u=r[s[c]],d=[0,u],f=this.dimensions.length,v=restrict(n.get("axisExpandWidth"),d),g=restrict(n.get("axisExpandCount")||0,[0,f]),y=n.get("axisExpandable")&&f>3&&f>g&&g>1&&v>0&&u>0,_=n.get("axisExpandWindow"),S;if(_)S=restrict(_[1]-_[0],d),_[1]=_[0]+S;else{S=restrict(v*(g-1),d);var x=n.get("axisExpandCenter")||mathFloor(f/2);_=[v*x-S/2],_[1]=_[0]+S}var T=(u-S)/(f-g);T<3&&(T=0);var w=[mathFloor(round(_[0]/v,1))+1,mathCeil(round(_[1]/v,1))-1],E=T/v*_[0];return{layout:l,pixelDimIndex:c,layoutBase:r[o[c]],layoutLength:u,axisBase:r[o[1-c]],axisLength:r[s[1-c]],axisExpandable:y,axisExpandWidth:v,axisCollapseWidth:T,axisExpandWindow:_,axisCount:f,winInnerIndices:w,axisExpandWindow0Pos:E}},a.prototype._layoutAxes=function(){var n=this._rect,r=this._axesMap,o=this.dimensions,s=this._makeLayoutInfo(),l=s.layout;r.each(function(c){var u=[0,s.axisLength],d=c.inverse?1:0;c.setExtent(u[d],u[1-d])}),each$a(o,function(c,u){var d=(s.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(u,s),f={horizontal:{x:d.position,y:s.axisLength},vertical:{x:0,y:d.position}},v={horizontal:PI$1/2,vertical:0},g=[f[l].x+n.x,f[l].y+n.y],y=v[l],_=create$1();rotate(_,_,y),translate(_,_,g),this._axesLayout[c]={position:g,rotation:y,transform:_,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(n){return this._axesMap.get(n)},a.prototype.dataToPoint=function(n,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(n),r)},a.prototype.eachActiveState=function(n,r,o,s){o==null&&(o=0),s==null&&(s=n.count());var l=this._axesMap,c=this.dimensions,u=[],d=[];each$f(c,function(T){u.push(n.mapDimension(T)),d.push(l.get(T).model)});for(var f=this.hasAxisBrushed(),v=o;v<s;v++){var g=void 0;if(!f)g="normal";else{g="active";for(var y=n.getValues(u,v),_=0,S=c.length;_<S;_++){var x=d[_].getActiveState(y[_]);if(x==="inactive"){g="inactive";break}}}r(g,v)}},a.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,r=this._axesMap,o=!1,s=0,l=n.length;s<l;s++)r.get(n[s]).model.getActiveState()!=="normal"&&(o=!0);return o},a.prototype.axisCoordToPoint=function(n,r){var o=this._axesLayout[r];return applyTransform([n,0],o.transform)},a.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},a.prototype.getSlidedAxisExpandWindow=function(n){var r=this._makeLayoutInfo(),o=r.pixelDimIndex,s=r.axisExpandWindow.slice(),l=s[1]-s[0],c=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:s};var u=n[o]-r.layoutBase-r.axisExpandWindow0Pos,d,f="slide",v=r.axisCollapseWidth,g=this._model.get("axisExpandSlideTriggerArea"),y=g[0]!=null;if(v)y&&v&&u<l*g[0]?(f="jump",d=u-l*g[2]):y&&v&&u>l*(1-g[0])?(f="jump",d=u-l*(1-g[2])):(d=u-l*g[1])>=0&&(d=u-l*(1-g[1]))<=0&&(d=0),d*=r.axisExpandWidth/v,d?sliderMove(d,s,c,"all"):f="none";else{var _=s[1]-s[0],S=c[1]*u/_;s=[mathMax$2(0,S-_/2)],s[1]=mathMin$2(c[1],s[0]+_),s[0]=s[1]-_}return{axisExpandWindow:s,behavior:f}},a}();function restrict(a,n){return mathMin$2(mathMax$2(a,n[0]),n[1])}function layoutAxisWithoutExpand(a,n){var r=n.layoutLength/(n.axisCount-1);return{position:r*a,axisNameAvailableWidth:r,axisLabelShow:!0}}function layoutAxisWithExpand(a,n){var r=n.layoutLength,o=n.axisExpandWidth,s=n.axisCount,l=n.axisCollapseWidth,c=n.winInnerIndices,u,d=l,f=!1,v;return a<c[0]?(u=a*l,v=l):a<=c[1]?(u=n.axisExpandWindow0Pos+a*o-n.axisExpandWindow[0],d=o,f=!0):(u=r-(s-1-a)*l,v=l),{position:u,axisNameAvailableWidth:d,axisLabelShow:f,nameTruncateMaxWidth:v}}function createParallelCoordSys(a,n){var r=[];return a.eachComponent("parallel",function(o,s){var l=new Parallel(o,a,n);l.name="parallel_"+s,l.resize(o,n),o.coordinateSystem=l,l.model=o,r.push(l)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var s=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=s.coordinateSystem}}),r}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.activeIntervals=[],r}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(r){var o=this.activeIntervals=clone$4(r);if(o)for(var s=o.length-1;s>=0;s--)asc$2(o[s])},n.prototype.getActiveState=function(r){var o=this.activeIntervals;if(!o.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(o.length===1){var s=o[0];if(s[0]<=r&&r<=s[1])return"active"}else for(var l=0,c=o.length;l<c;l++)if(o[l][0]<=r&&r<=o[l][1])return"active";return"inactive"},n}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=r,o.group=new Group$4,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(s,l){this._handlers[l]=bind$1(s,this)},o),o}return n.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},n.prototype._doEnableBrush=function(r){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){o.on(l,s)}),this._brushType=r.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),r,!0)},n.prototype._doDisableBrush=function(){var r=this._zr;release(r,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,s){r.off(s,o)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(r){if(r&&r.length){var o=this._panels={};each$f(r,function(s){o[s.panelId]=clone$4(s)})}else this._panels=null;return this},n.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=o.getLocalTransform(),this},n.prototype.updateCovers=function(r){r=map$1(r,function(y){return merge(clone$4(DEFAULT_BRUSH_OPT),y,!0)});var o="\0-brush-index-",s=this._covers,l=this._covers=[],c=this,u=this._creatingCover;return new DataDiffer(s,r,f,d).add(v).update(v).remove(g).execute(),this;function d(y,_){return(y.id!=null?y.id:o+_)+"-"+y.brushType}function f(y,_){return d(y.__brushOption,_)}function v(y,_){var S=r[y];if(_!=null&&s[_]===u)l[y]=s[_];else{var x=l[y]=_!=null?(s[_].__brushOption=S,s[_]):endCreating(c,createCover(c,S));updateCoverAfterCreation(c,x)}}function g(y){s[y]!==u&&c.group.remove(s[y])}},n.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Eventful);function createCover(a,n){var r=coverRenderers[n.brushType].createCover(a,n);return r.__brushOption=n,updateZ$1(r,n),a.group.add(r),r}function endCreating(a,n){var r=getCoverRenderer(n);return r.endCreating&&(r.endCreating(a,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(a,n){var r=n.__brushOption;getCoverRenderer(n).updateCoverShape(a,n,r.range,r)}function updateZ$1(a,n){var r=n.z;r==null&&(r=COVER_Z),a.traverse(function(o){o.z=r,o.z2=r})}function updateCoverAfterCreation(a,n){getCoverRenderer(n).updateCommon(a,n),updateCoverShape(a,n)}function getCoverRenderer(a){return coverRenderers[a.__brushOption.brushType]}function getPanelByPoint(a,n,r){var o=a._panels;if(!o)return BRUSH_PANEL_GLOBAL;var s,l=a._transform;return each$f(o,function(c){c.isTargetByCursor(n,r,l)&&(s=c)}),s}function getPanelByCover(a,n){var r=a._panels;if(!r)return BRUSH_PANEL_GLOBAL;var o=n.__brushOption.panelId;return o!=null?r[o]:BRUSH_PANEL_GLOBAL}function clearCovers(a){var n=a._covers,r=n.length;return each$f(n,function(o){a.group.remove(o)},a),n.length=0,!!r}function trigger(a,n){var r=map$1(a._covers,function(o){var s=o.__brushOption,l=clone$4(s.range);return{brushType:s.brushType,panelId:s.panelId,range:l}});a.trigger("brush",{areas:r,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(a){var n=a._track;if(!n.length)return!1;var r=n[n.length-1],o=n[0],s=r[0]-o[0],l=r[1]-o[1],c=mathPow(s*s+l*l,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(a){var n=a.length-1;return n<0&&(n=0),[a[0],a[n]]}function createBaseRectCover(a,n,r,o){var s=new Group$4;return s.add(new Rect$2({name:"main",style:makeStyle(r),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,a,n,s,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(o,function(l){s.add(new Rect$2({name:l.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,a,n,s,l),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),s}function updateBaseRect(a,n,r,o){var s=o.brushStyle.lineWidth||0,l=mathMax$1(s,MIN_RESIZE_LINE_WIDTH),c=r[0][0],u=r[1][0],d=c-s/2,f=u-s/2,v=r[0][1],g=r[1][1],y=v-l+s/2,_=g-l+s/2,S=v-c,x=g-u,T=S+s,w=x+s;updateRectShape(a,n,"main",c,u,S,x),o.transformable&&(updateRectShape(a,n,"w",d,f,l,w),updateRectShape(a,n,"e",y,f,l,w),updateRectShape(a,n,"n",d,f,T,l),updateRectShape(a,n,"s",d,_,T,l),updateRectShape(a,n,"nw",d,f,l,l),updateRectShape(a,n,"ne",y,f,l,l),updateRectShape(a,n,"sw",d,_,l,l),updateRectShape(a,n,"se",y,_,l,l))}function updateCommon$1(a,n){var r=n.__brushOption,o=r.transformable,s=n.childAt(0);s.useStyle(makeStyle(r)),s.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(l){var c=n.childOfName(l.join("")),u=l.length===1?getGlobalDirection1(a,l[0]):getGlobalDirection2(a,l);c&&c.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[u]+"-resize":null})})}function updateRectShape(a,n,r,o,s,l,c){var u=n.childOfName(r);u&&u.setShape(pointsToRect(clipByPanel(a,n,[[o,s],[o+l,s+c]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(a,n,r,o){var s=[mathMin$1(a,r),mathMin$1(n,o)],l=[mathMax$1(a,r),mathMax$1(n,o)];return[[s[0],l[0]],[s[1],l[1]]]}function getTransform(a){return getTransform$1(a.group)}function getGlobalDirection1(a,n){var r={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},s=transformDirection(r[n],getTransform(a));return o[s]}function getGlobalDirection2(a,n){var r=[getGlobalDirection1(a,n[0]),getGlobalDirection1(a,n[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function driftRect(a,n,r,o,s,l){var c=r.__brushOption,u=a.toRectRange(c.range),d=toLocalDelta(n,s,l);each$f(o,function(f){var v=DIRECTION_MAP[f];u[v[0]][v[1]]+=d[v[0]]}),c.range=a.fromRectRange(formatRectRange(u[0][0],u[1][0],u[0][1],u[1][1])),updateCoverAfterCreation(n,r),trigger(n,{isEnd:!1})}function driftPolygon(a,n,r,o){var s=n.__brushOption.range,l=toLocalDelta(a,r,o);each$f(s,function(c){c[0]+=l[0],c[1]+=l[1]}),updateCoverAfterCreation(a,n),trigger(a,{isEnd:!1})}function toLocalDelta(a,n,r){var o=a.group,s=o.transformCoordToLocal(n,r),l=o.transformCoordToLocal(0,0);return[s[0]-l[0],s[1]-l[1]]}function clipByPanel(a,n,r){var o=getPanelByCover(a,n);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(r,a._transform):clone$4(r)}function pointsToRect(a){var n=mathMin$1(a[0][0],a[1][0]),r=mathMin$1(a[0][1],a[1][1]),o=mathMax$1(a[0][0],a[1][0]),s=mathMax$1(a[0][1],a[1][1]);return{x:n,y:r,width:o-n,height:s-r}}function resetCursor(a,n,r){if(!(!a._brushType||isOutsideZrArea(a,n.offsetX,n.offsetY))){var o=a._zr,s=a._covers,l=getPanelByPoint(a,n,r);if(!a._dragging)for(var c=0;c<s.length;c++){var u=s[c].__brushOption;if(l&&(l===BRUSH_PANEL_GLOBAL||u.panelId===l.panelId)&&coverRenderers[u.brushType].contain(s[c],r[0],r[1]))return}l&&o.setCursorStyle("crosshair")}}function preventDefault(a){var n=a.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(a,n,r){return a.childOfName("main").contain(n,r)}function updateCoverByMouse(a,n,r,o){var s=a._creatingCover,l=a._creatingPanel,c=a._brushOption,u;if(a._track.push(r.slice()),shouldShowCover(a)||s){if(l&&!s){c.brushMode==="single"&&clearCovers(a);var d=clone$4(c);d.brushType=determineBrushType(d.brushType,l),d.panelId=l===BRUSH_PANEL_GLOBAL?null:l.panelId,s=a._creatingCover=createCover(a,d),a._covers.push(s)}if(s){var f=coverRenderers[determineBrushType(a._brushType,l)],v=s.__brushOption;v.range=f.getCreatingRange(clipByPanel(a,s,a._track)),o&&(endCreating(a,s),f.updateCommon(a,s)),updateCoverShape(a,s),u={isEnd:o}}}else o&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(a,n,r)&&clearCovers(a)&&(u={isEnd:o,removeOnClick:!0});return u}function determineBrushType(a,n){return a==="auto"?n.defaultBrushType:a}var pointerHandlers={mousedown:function(a){if(this._dragging)handleDragEnd(this,a);else if(!a.target||!a.target.draggable){preventDefault(a);var n=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var r=this._creatingPanel=getPanelByPoint(this,a,n);r&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(a){var n=a.offsetX,r=a.offsetY,o=this.group.transformCoordToLocal(n,r);if(resetCursor(this,a,o),this._dragging){preventDefault(a);var s=updateCoverByMouse(this,a,o,!1);s&&trigger(this,s)}},mouseup:function(a){handleDragEnd(this,a)}};function handleDragEnd(a,n){if(a._dragging){preventDefault(n);var r=n.offsetX,o=n.offsetY,s=a.group.transformCoordToLocal(r,o),l=updateCoverByMouse(a,n,s,!0);a._dragging=!1,a._track=[],a._creatingCover=null,l&&trigger(a,l)}}function isOutsideZrArea(a,n,r){var o=a._zr;return n<0||n>o.getWidth()||r<0||r>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(a,n){function r(o){return o}return createBaseRectCover({toRectRange:r,fromRectRange:r},a,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var n=getTrackEnds(a);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(a,n,r,o){updateBaseRect(a,n,r,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(a,n){var r=new Group$4;return r.add(new Polyline$1({name:"main",style:makeStyle(n),silent:!0})),r},getCreatingRange:function(a){return a},endCreating:function(a,n){n.remove(n.childAt(0)),n.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,a,n),ondragend:curry$1(trigger,a,{isEnd:!0})}))},updateCoverShape:function(a,n,r,o){n.childAt(0).setShape({points:clipByPanel(a,n,r)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(a){return{createCover:function(n,r){return createBaseRectCover({toRectRange:function(o){var s=[o,[0,100]];return a&&s.reverse(),s},fromRectRange:function(o){return o[a]}},n,r,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(n){var r=getTrackEnds(n),o=mathMin$1(r[0][a],r[1][a]),s=mathMax$1(r[0][a],r[1][a]);return[o,s]},updateCoverShape:function(n,r,o,s){var l,c=getPanelByCover(n,r);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)l=c.getLinearBrushOtherExtent(a);else{var u=n._zr;l=[0,[u.getWidth(),u.getHeight()][1-a]]}var d=[o,l];a&&d.reverse(),updateBaseRect(n,r,d,s)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(a){return a=normalizeRect(a),function(n){return clipPointsByRect(n,a)}}function makeLinearBrushOtherExtent(a,n){return a=normalizeRect(a),function(r){var o=n??r,s=o?a.width:a.height,l=o?a.x:a.y;return[l,l+(s||0)]}}function makeRectIsTargetByCursor(a,n,r){var o=normalizeRect(a);return function(s,l){return o.contain(l[0],l[1])&&!onIrrelevantElement(s,n,r)}}function normalizeRect(a){return BoundingRect.create(a)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){a.prototype.init.apply(this,arguments),(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(r,o,s,l){if(!fromAxisAreaSelect(r,o,l)){this.axisModel=r,this.api=s,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var u=getCoordSysModel(r,o),d=u.coordinateSystem,f=r.getAreaSelectStyle(),v=f.width,g=r.axis.dim,y=d.getAxisLayout(g),_=extend({strokeContainThreshold:v},y),S=new AxisBuilder(r,_);each$f(elementList$1,S.add,S),this._axisGroup.add(S.getGroup()),this._refreshBrushController(_,f,r,u,v,s),groupTransition(c,this._axisGroup,r)}}},n.prototype._refreshBrushController=function(r,o,s,l,c,u){var d=s.axis.getExtent(),f=d[1]-d[0],v=Math.min(30,Math.abs(f)*.1),g=BoundingRect.create({x:d[0],y:-c/2,width:f,height:c});g.x-=v,g.width+=2*v,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(g),isTargetByCursor:makeRectIsTargetByCursor(g,u,l),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(g,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(s))},n.prototype._onBrush=function(r){var o=r.areas,s=this.axisModel,l=s.axis,c=map$1(o,function(u){return[l.coordToData(u.range[0],!0),l.coordToData(u.range[1],!0)]});(!s.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:s.id,intervals:c})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(ComponentView);function fromAxisAreaSelect(a,n,r){return r&&r.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:r})[0]===a}function getCoverInfoList(a){var n=a.axis;return map$1(a.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(r[0],!0),n.dataToCoord(r[1],!0)]}})}function getCoordSysModel(a,n){return n.getComponent("parallel",a.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(a){a.registerAction(actionInfo,function(n,r){r.eachComponent({mainType:"parallelAxis",query:n},function(o){o.axis.model.setActiveIntervals(n.intervals)})}),a.registerAction("parallelAxisExpand",function(n,r){r.eachComponent({mainType:"parallel",query:n},function(o){o.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(a){a.registerComponentView(ParallelView),a.registerComponentModel(ParallelModel),a.registerCoordinateSystem("parallel",parallelCoordSysCreator),a.registerPreprocessor(parallelPreprocessor),a.registerComponentModel(ParallelAxisModel),a.registerComponentView(ParallelAxisView),axisModelCreator(a,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(a)}function install$B(a){use(install$C),a.registerChartView(ParallelView$1),a.registerSeriesModel(ParallelSeriesModel),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),SankeyPath=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(r,o){var s=o.extent;r.moveTo(o.x1,o.y1),r.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(r.lineTo(o.x2+s,o.y2),r.bezierCurveTo(o.cpx2+s,o.cpy2,o.cpx1+s,o.cpy1,o.x1+s,o.y1)):(r.lineTo(o.x2,o.y2+s),r.bezierCurveTo(o.cpx2,o.cpy2+s,o.cpx1,o.cpy1+s,o.x1,o.y1+s)),r.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n}(Path),SankeyView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._focusAdjacencyDisabled=!1,r}return n.prototype.render=function(r,o,s){var l=this,c=r.getGraph(),u=this.group,d=r.layoutInfo,f=d.width,v=d.height,g=r.getData(),y=r.getData("edge"),_=r.get("orient");this._model=r,u.removeAll(),u.x=d.x,u.y=d.y,c.eachEdge(function(S){var x=new SankeyPath,T=getECData(x);T.dataIndex=S.dataIndex,T.seriesIndex=r.seriesIndex,T.dataType="edge";var w=S.getModel(),E=w.getModel("lineStyle"),P=E.get("curveness"),D=S.node1.getLayout(),L=S.node1.getModel(),$=L.get("localX"),O=L.get("localY"),B=S.node2.getLayout(),V=S.node2.getModel(),F=V.get("localX"),U=V.get("localY"),G=S.getLayout(),W,j,K,q,ie,ee,he,pe;x.shape.extent=Math.max(1,G.dy),x.shape.orient=_,_==="vertical"?(W=($!=null?$*f:D.x)+G.sy,j=(O!=null?O*v:D.y)+D.dy,K=(F!=null?F*f:B.x)+G.ty,q=U!=null?U*v:B.y,ie=W,ee=j*(1-P)+q*P,he=K,pe=j*P+q*(1-P)):(W=($!=null?$*f:D.x)+D.dx,j=(O!=null?O*v:D.y)+G.sy,K=F!=null?F*f:B.x,q=(U!=null?U*v:B.y)+G.ty,ie=W*(1-P)+K*P,ee=j,he=W*P+K*(1-P),pe=q),x.setShape({x1:W,y1:j,x2:K,y2:q,cpx1:ie,cpy1:ee,cpx2:he,cpy2:pe}),x.useStyle(E.getItemStyle()),applyCurveStyle(x.style,_,S);var ce=""+w.get("value"),ye=getLabelStatesModels(w,"edgeLabel");setLabelStyle(x,ye,{labelFetcher:{getFormattedLabel:function(Se,$e,oe,me,_e,Te){return r.getFormattedLabel(Se,$e,"edge",me,retrieve3(_e,ye.normal&&ye.normal.get("formatter"),ce),Te)}},labelDataIndex:S.dataIndex,defaultText:ce}),x.setTextConfig({position:"inside"});var we=w.getModel("emphasis");setStatesStylesFromModel(x,w,"lineStyle",function(Se){var $e=Se.getItemStyle();return applyCurveStyle($e,_,S),$e}),u.add(x),y.setItemGraphicEl(S.dataIndex,x);var ge=we.get("focus");toggleHoverEmphasis(x,ge==="adjacency"?S.getAdjacentDataIndices():ge==="trajectory"?S.getTrajectoryDataIndices():ge,we.get("blurScope"),we.get("disabled"))}),c.eachNode(function(S){var x=S.getLayout(),T=S.getModel(),w=T.get("localX"),E=T.get("localY"),P=T.getModel("emphasis"),D=T.get(["itemStyle","borderRadius"])||0,L=new Rect$2({shape:{x:w!=null?w*f:x.x,y:E!=null?E*v:x.y,width:x.dx,height:x.dy,r:D},style:T.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(L,getLabelStatesModels(T),{labelFetcher:{getFormattedLabel:function(O,B){return r.getFormattedLabel(O,B,"node")}},labelDataIndex:S.dataIndex,defaultText:S.id}),L.disableLabelAnimation=!0,L.setStyle("fill",S.getVisual("color")),L.setStyle("decal",S.getVisual("style").decal),setStatesStylesFromModel(L,T),u.add(L),g.setItemGraphicEl(S.dataIndex,L),getECData(L).dataType="node";var $=P.get("focus");toggleHoverEmphasis(L,$==="adjacency"?S.getAdjacentDataIndices():$==="trajectory"?S.getTrajectoryDataIndices():$,P.get("blurScope"),P.get("disabled"))}),g.eachItemGraphicEl(function(S,x){var T=g.getItemModel(x);T.get("draggable")&&(S.drift=function(w,E){l._focusAdjacencyDisabled=!0,this.shape.x+=w,this.shape.y+=E,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:g.getRawIndex(x),localX:this.shape.x/f,localY:this.shape.y/v})},S.ondragend=function(){l._focusAdjacencyDisabled=!1},S.draggable=!0,S.cursor="move")}),!this._data&&r.isAnimationEnabled()&&u.setClipPath(createGridClipShape$1(u.getBoundingRect(),r,function(){u.removeClipPath()})),this._data=r.getData()},n.prototype.dispose=function(){},n.type="sankey",n}(ChartView);function applyCurveStyle(a,n,r){switch(a.fill){case"source":a.fill=r.node1.getVisual("color"),a.decal=r.node1.getVisual("style").decal;break;case"target":a.fill=r.node2.getVisual("color"),a.decal=r.node2.getVisual("style").decal;break;case"gradient":var o=r.node1.getVisual("color"),s=r.node2.getVisual("color");isString(o)&&isString(s)&&(a.fill=new LinearGradient(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:o,offset:0},{color:s,offset:1}]))}}function createGridClipShape$1(a,n,r){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{width:a.width+20}},n,r),o}var SankeySeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){var s=r.edges||r.links||[],l=r.data||r.nodes||[],c=r.levels||[];this.levelModels=[];for(var u=this.levelModels,d=0;d<c.length;d++)c[d].depth!=null&&c[d].depth>=0&&(u[c[d].depth]=new Model(c[d],this,o));var f=createGraphFromNodeEdge(l,s,this,!0,v);return f.data;function v(g,y){g.wrapMethod("getItemModel",function(_,S){var x=_.parentModel,T=x.getData().getItemLayout(S);if(T){var w=T.depth,E=x.levelModels[w];E&&(_.parentModel=E)}return _}),y.wrapMethod("getItemModel",function(_,S){var x=_.parentModel,T=x.getGraph().getEdgeByIndex(S),w=T.node1.getLayout();if(w){var E=w.depth,P=x.levelModels[E];P&&(_.parentModel=P)}return _})}},n.prototype.setNodePosition=function(r,o){var s=this.option.data||this.option.nodes,l=s[r];l.localX=o[0],l.localY=o[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(r,o,s){function l(_){return isNaN(_)||_==null}if(s==="edge"){var c=this.getDataParams(r,s),u=c.data,d=c.value,f=u.source+" -- "+u.target;return createTooltipMarkup("nameValue",{name:f,value:d,noValue:l(d)})}else{var v=this.getGraph().getNodeByIndex(r),g=v.getLayout().value,y=this.getDataParams(r,s).data.name;return createTooltipMarkup("nameValue",{name:y!=null?y+"":null,value:g,noValue:l(g)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(r,o){var s=a.prototype.getDataParams.call(this,r,o);if(s.value==null&&o==="node"){var l=this.getGraph().getNodeByIndex(r),c=l.getLayout().value;s.value=c}return s},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n}(SeriesModel);function sankeyLayout(a,n){a.eachSeriesByType("sankey",function(r){var o=r.get("nodeWidth"),s=r.get("nodeGap"),l=getViewRect$1(r,n);r.layoutInfo=l;var c=l.width,u=l.height,d=r.getGraph(),f=d.nodes,v=d.edges;computeNodeValues(f);var g=filter(f,function(x){return x.getLayout().value===0}),y=g.length!==0?0:r.get("layoutIterations"),_=r.get("orient"),S=r.get("nodeAlign");layoutSankey(f,v,o,s,c,u,y,_,S)})}function getViewRect$1(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(a,n,r,o,s,l,c,u,d){computeNodeBreadths(a,n,r,s,l,u,d),computeNodeDepths(a,n,l,s,o,c,u),computeEdgeDepths(a,u)}function computeNodeValues(a){each$f(a,function(n){var r=sum(n.outEdges,getEdgeValue),o=sum(n.inEdges,getEdgeValue),s=n.getValue()||0,l=Math.max(r,o,s);n.setLayout({value:l},!0)})}function computeNodeBreadths(a,n,r,o,s,l,c){for(var u=[],d=[],f=[],v=[],g=0,y=0;y<n.length;y++)u[y]=1;for(var y=0;y<a.length;y++)d[y]=a[y].inEdges.length,d[y]===0&&f.push(a[y]);for(var _=-1;f.length;){for(var S=0;S<f.length;S++){var x=f[S],T=x.hostGraph.data.getRawDataItem(x.dataIndex),w=T.depth!=null&&T.depth>=0;w&&T.depth>_&&(_=T.depth),x.setLayout({depth:w?T.depth:g},!0),l==="vertical"?x.setLayout({dy:r},!0):x.setLayout({dx:r},!0);for(var E=0;E<x.outEdges.length;E++){var P=x.outEdges[E],D=n.indexOf(P);u[D]=0;var L=P.node2,$=a.indexOf(L);--d[$]===0&&v.indexOf(L)<0&&v.push(L)}}++g,f=v,v=[]}for(var y=0;y<u.length;y++)if(u[y]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var O=_>g-1?_:g-1;c&&c!=="left"&&adjustNodeWithNodeAlign(a,c,l,O);var B=l==="vertical"?(s-r)/O:(o-r)/O;scaleNodeBreadths(a,B,l)}function isNodeDepth(a){var n=a.hostGraph.data.getRawDataItem(a.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(a,n,r,o){if(n==="right"){for(var s=[],l=a,c=0;l.length;){for(var u=0;u<l.length;u++){var d=l[u];d.setLayout({skNodeHeight:c},!0);for(var f=0;f<d.inEdges.length;f++){var v=d.inEdges[f];s.indexOf(v.node1)<0&&s.push(v.node1)}}l=s,s=[],++c}each$f(a,function(g){isNodeDepth(g)||g.setLayout({depth:Math.max(0,o-g.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(a,o)}function moveSinksRight(a,n){each$f(a,function(r){!isNodeDepth(r)&&!r.outEdges.length&&r.setLayout({depth:n},!0)})}function scaleNodeBreadths(a,n,r){each$f(a,function(o){var s=o.getLayout().depth*n;r==="vertical"?o.setLayout({y:s},!0):o.setLayout({x:s},!0)})}function computeNodeDepths(a,n,r,o,s,l,c){var u=prepareNodesByBreadth(a,c);initializeNodeDepth(u,n,r,o,s,c),resolveCollisions(u,s,r,o,c);for(var d=1;l>0;l--)d*=.99,relaxRightToLeft(u,d,c),resolveCollisions(u,s,r,o,c),relaxLeftToRight(u,d,c),resolveCollisions(u,s,r,o,c)}function prepareNodesByBreadth(a,n){var r=[],o=n==="vertical"?"y":"x",s=groupData(a,function(l){return l.getLayout()[o]});return s.keys.sort(function(l,c){return l-c}),each$f(s.keys,function(l){r.push(s.buckets.get(l))}),r}function initializeNodeDepth(a,n,r,o,s,l){var c=1/0;each$f(a,function(u){var d=u.length,f=0;each$f(u,function(g){f+=g.getLayout().value});var v=l==="vertical"?(o-(d-1)*s)/f:(r-(d-1)*s)/f;v<c&&(c=v)}),each$f(a,function(u){each$f(u,function(d,f){var v=d.getLayout().value*c;l==="vertical"?(d.setLayout({x:f},!0),d.setLayout({dx:v},!0)):(d.setLayout({y:f},!0),d.setLayout({dy:v},!0))})}),each$f(n,function(u){var d=+u.getValue()*c;u.setLayout({dy:d},!0)})}function resolveCollisions(a,n,r,o,s){var l=s==="vertical"?"x":"y";each$f(a,function(c){c.sort(function(x,T){return x.getLayout()[l]-T.getLayout()[l]});for(var u,d,f,v=0,g=c.length,y=s==="vertical"?"dx":"dy",_=0;_<g;_++)d=c[_],f=v-d.getLayout()[l],f>0&&(u=d.getLayout()[l]+f,s==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0)),v=d.getLayout()[l]+d.getLayout()[y]+n;var S=s==="vertical"?o:r;if(f=v-n-S,f>0){u=d.getLayout()[l]-f,s==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0),v=u;for(var _=g-2;_>=0;--_)d=c[_],f=d.getLayout()[l]+d.getLayout()[y]+n-v,f>0&&(u=d.getLayout()[l]-f,s==="vertical"?d.setLayout({x:u},!0):d.setLayout({y:u},!0)),v=d.getLayout()[l]}})}function relaxRightToLeft(a,n,r){each$f(a.slice().reverse(),function(o){each$f(o,function(s){if(s.outEdges.length){var l=sum(s.outEdges,weightedTarget,r)/sum(s.outEdges,getEdgeValue);if(isNaN(l)){var c=s.outEdges.length;l=c?sum(s.outEdges,centerTarget,r)/c:0}if(r==="vertical"){var u=s.getLayout().x+(l-center(s,r))*n;s.setLayout({x:u},!0)}else{var d=s.getLayout().y+(l-center(s,r))*n;s.setLayout({y:d},!0)}}})})}function weightedTarget(a,n){return center(a.node2,n)*a.getValue()}function centerTarget(a,n){return center(a.node2,n)}function weightedSource(a,n){return center(a.node1,n)*a.getValue()}function centerSource(a,n){return center(a.node1,n)}function center(a,n){return n==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,n,r){for(var o=0,s=a.length,l=-1;++l<s;){var c=+n(a[l],r);isNaN(c)||(o+=c)}return o}function relaxLeftToRight(a,n,r){each$f(a,function(o){each$f(o,function(s){if(s.inEdges.length){var l=sum(s.inEdges,weightedSource,r)/sum(s.inEdges,getEdgeValue);if(isNaN(l)){var c=s.inEdges.length;l=c?sum(s.inEdges,centerSource,r)/c:0}if(r==="vertical"){var u=s.getLayout().x+(l-center(s,r))*n;s.setLayout({x:u},!0)}else{var d=s.getLayout().y+(l-center(s,r))*n;s.setLayout({y:d},!0)}}})})}function computeEdgeDepths(a,n){var r=n==="vertical"?"x":"y";each$f(a,function(o){o.outEdges.sort(function(s,l){return s.node2.getLayout()[r]-l.node2.getLayout()[r]}),o.inEdges.sort(function(s,l){return s.node1.getLayout()[r]-l.node1.getLayout()[r]})}),each$f(a,function(o){var s=0,l=0;each$f(o.outEdges,function(c){c.setLayout({sy:s},!0),s+=c.getLayout().dy}),each$f(o.inEdges,function(c){c.setLayout({ty:l},!0),l+=c.getLayout().dy})})}function sankeyVisual(a){a.eachSeriesByType("sankey",function(n){var r=n.getGraph(),o=r.nodes,s=r.edges;if(o.length){var l=1/0,c=-1/0;each$f(o,function(u){var d=u.getLayout().value;d<l&&(l=d),d>c&&(c=d)}),each$f(o,function(u){var d=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[l,c],visual:n.get("color")}),f=d.mapValueToVisual(u.getLayout().value),v=u.getModel().get(["itemStyle","color"]);v!=null?(u.setVisual("color",v),u.setVisual("style",{fill:v})):(u.setVisual("color",f),u.setVisual("style",{fill:f}))})}s.length&&each$f(s,function(u){var d=u.getModel().get("lineStyle");u.setVisual("style",d)})})}function install$A(a){a.registerChartView(SankeyView),a.registerSeriesModel(SankeySeriesModel),a.registerLayout(sankeyLayout),a.registerVisual(sankeyVisual),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,r){r.eachComponent({mainType:"series",subType:"sankey",query:n},function(o){o.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=function(){function a(){}return a.prototype._hasEncodeRule=function(n){var r=this.getEncode();return r&&r.get(n)!=null},a.prototype.getInitialData=function(n,r){var o,s=r.getComponent("xAxis",this.get("xAxisIndex")),l=r.getComponent("yAxis",this.get("yAxisIndex")),c=s.get("type"),u=l.get("type"),d;c==="category"?(n.layout="horizontal",o=s.getOrdinalMeta(),d=!this._hasEncodeRule("x")):u==="category"?(n.layout="vertical",o=l.getOrdinalMeta(),d=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var f=["x","y"],v=n.layout==="horizontal"?0:1,g=this._baseAxisDim=f[v],y=f[1-v],_=[s,l],S=_[v].get("type"),x=_[1-v].get("type"),T=n.data;if(T&&d){var w=[];each$f(T,function(D,L){var $;isArray$1(D)?($=D.slice(),D.unshift(L)):isArray$1(D.value)?($=extend({},D),$.value=$.value.slice(),D.value.unshift(L)):$=D,w.push($)}),n.data=w}var E=this.defaultValueDimensions,P=[{name:g,type:getDimensionTypeByAxis(S),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:y,type:getDimensionTypeByAxis(x),dimsDef:E.slice()}];return createSeriesDataSimply(this,{coordDimensions:P,dimensionsCount:E.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,P,this)})},a.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},a}(),BoxplotSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=r.getData(),c=this.group,u=this._data;this._data||c.removeAll();var d=r.get("layout")==="horizontal"?1:0;l.diff(u).add(function(f){if(l.hasValue(f)){var v=l.getItemLayout(f),g=createNormalBox$1(v,l,f,d,!0);l.setItemGraphicEl(f,g),c.add(g)}}).update(function(f,v){var g=u.getItemGraphicEl(v);if(!l.hasValue(f)){c.remove(g);return}var y=l.getItemLayout(f);g?(saveOldStyle(g),updateNormalBoxData(y,g,l,f)):g=createNormalBox$1(y,l,f,d),c.add(g),l.setItemGraphicEl(f,g)}).remove(function(f){var v=u.getItemGraphicEl(f);v&&c.remove(v)}).execute(),this._data=l},n.prototype.remove=function(r){var o=this.group,s=this._data;this._data=null,s&&s.eachItemGraphicEl(function(l){l&&o.remove(l)})},n.type="boxplot",n}(ChartView),BoxPathShape=function(){function a(){}return a}(),BoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="boxplotBoxPath",o}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(r,o){var s=o.points,l=0;for(r.moveTo(s[l][0],s[l][1]),l++;l<4;l++)r.lineTo(s[l][0],s[l][1]);for(r.closePath();l<s.length;l++)r.moveTo(s[l][0],s[l][1]),l++,r.lineTo(s[l][0],s[l][1])},n}(Path);function createNormalBox$1(a,n,r,o,s){var l=a.ends,c=new BoxPath({shape:{points:s?transInit$1(l,o,a):l}});return updateNormalBoxData(a,c,n,r,s),c}function updateNormalBoxData(a,n,r,o,s){var l=r.hostModel,c=graphic[s?"initProps":"updateProps"];c(n,{shape:{points:a.ends}},l,o),n.useStyle(r.getItemVisual(o,"style")),n.style.strokeNoScale=!0,n.z2=100;var u=r.getItemModel(o),d=u.getModel("emphasis");setStatesStylesFromModel(n,u),toggleHoverEmphasis(n,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function transInit$1(a,n,r){return map$1(a,function(o){return o=o.slice(),o[n]=r.initBaseline,o})}var each$9=each$f;function boxplotLayout(a){var n=groupSeriesByAxis(a);each$9(n,function(r){var o=r.seriesModels;o.length&&(calculateBase(r),each$9(o,function(s,l){layoutSingleSeries(s,r.boxOffsetList[l],r.boxWidthList[l])}))})}function groupSeriesByAxis(a){var n=[],r=[];return a.eachSeriesByType("boxplot",function(o){var s=o.getBaseAxis(),l=indexOf(r,s);l<0&&(l=r.length,r[l]=s,n[l]={axis:s,seriesModels:[]}),n[l].seriesModels.push(o)}),n}function calculateBase(a){var n=a.axis,r=a.seriesModels,o=r.length,s=a.boxWidthList=[],l=a.boxOffsetList=[],c=[],u;if(n.type==="category")u=n.getBandWidth();else{var d=0;each$9(r,function(S){d=Math.max(d,S.getData().count())});var f=n.getExtent();u=Math.abs(f[1]-f[0])/d}each$9(r,function(S){var x=S.get("boxWidth");isArray$1(x)||(x=[x,x]),c.push([parsePercent(x[0],u)||0,parsePercent(x[1],u)||0])});var v=u*.8-2,g=v/o*.3,y=(v-g*(o-1))/o,_=y/2-v/2;each$9(r,function(S,x){l.push(_),_+=g+y,s.push(Math.min(Math.max(y,c[x][0]),c[x][1]))})}function layoutSingleSeries(a,n,r){var o=a.coordinateSystem,s=a.getData(),l=r/2,c=a.get("layout")==="horizontal"?0:1,u=1-c,d=["x","y"],f=s.mapDimension(d[c]),v=s.mapDimensionsAll(d[u]);if(f==null||v.length<5)return;for(var g=0;g<s.count();g++){var y=s.get(f,g),_=P(y,v[2],g),S=P(y,v[0],g),x=P(y,v[1],g),T=P(y,v[3],g),w=P(y,v[4],g),E=[];D(E,x,!1),D(E,T,!0),E.push(S,x,w,T),L(E,S),L(E,w),L(E,_),s.setItemLayout(g,{initBaseline:_[u],ends:E})}function P($,O,B){var V=s.get(O,B),F=[];F[c]=$,F[u]=V;var U;return isNaN($)||isNaN(V)?U=[NaN,NaN]:(U=o.dataToPoint(F),U[c]+=n),U}function D($,O,B){var V=O.slice(),F=O.slice();V[c]+=l,F[c]-=l,B?$.push(V,F):$.push(F,V)}function L($,O){var B=O.slice(),V=O.slice();B[c]-=l,V[c]+=l,$.push(B,V)}}function prepareBoxplotData(a,n){n=n||{};for(var r=[],o=[],s=n.boundIQR,l=s==="none"||s===0,c=0;c<a.length;c++){var u=asc$2(a[c].slice()),d=quantile(u,.25),f=quantile(u,.5),v=quantile(u,.75),g=u[0],y=u[u.length-1],_=(s??1.5)*(v-d),S=l?g:Math.max(g,d-_),x=l?y:Math.min(y,v+_),T=n.itemNameFormatter,w=isFunction(T)?T({value:c}):isString(T)?T.replace("{value}",c+""):c+"";r.push([w,S,d,f,v,x]);for(var E=0;E<u.length;E++){var P=u[E];if(P<S||P>x){var D=[w,P];o.push(D)}}}return{boxData:r,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function(n){var r=n.upstream;if(r.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var o="";throwError(o)}var s=prepareBoxplotData(r.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:s.boxData},{data:s.outliers}]}};function install$z(a){a.registerSeriesModel(BoxplotSeriesModel),a.registerChartView(BoxplotView),a.registerLayout(boxplotLayout),a.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(a,n){return n.get(a>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(a,n){return n.get(a===0?dojiBorderColorQuery:a>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(a,n){if(!n.isSeriesFiltered(a)){var r=a.pipelineContext.large;return!r&&{progress:function(o,s){for(var l;(l=o.next())!=null;){var c=s.getItemModel(l),u=s.getItemLayout(l).sign,d=c.getItemStyle();d.fill=getColor(u,c),d.stroke=getBorderColor(u,c)||d.fill;var f=s.ensureUniqueItemVisual(l,"style");extend(f,d)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},n.prototype.incrementalPrepareRender=function(r,o,s){this._clear(),this._updateDrawMode(r)},n.prototype.incrementalRender=function(r,o,s,l){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,o):this._incrementalRenderNormal(r,o)},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},n.prototype._renderNormal=function(r){var o=r.getData(),s=this._data,l=this.group,c=o.getLayout("isSimpleBox"),u=r.get("clip",!0),d=r.coordinateSystem,f=d.getArea&&d.getArea();this._data||l.removeAll(),o.diff(s).add(function(v){if(o.hasValue(v)){var g=o.getItemLayout(v);if(u&&isNormalBoxClipped(f,g))return;var y=createNormalBox(g,v,!0);initProps(y,{shape:{points:g.ends}},r,v),setBoxCommon(y,o,v,c),l.add(y),o.setItemGraphicEl(v,y)}}).update(function(v,g){var y=s.getItemGraphicEl(g);if(!o.hasValue(v)){l.remove(y);return}var _=o.getItemLayout(v);if(u&&isNormalBoxClipped(f,_)){l.remove(y);return}y?(updateProps$1(y,{shape:{points:_.ends}},r,v),saveOldStyle(y)):y=createNormalBox(_),setBoxCommon(y,o,v,c),l.add(y),o.setItemGraphicEl(v,y)}).remove(function(v){var g=s.getItemGraphicEl(v);g&&l.remove(g)}).execute(),this._data=o},n.prototype._renderLarge=function(r){this._clear(),createLarge(r,this.group);var o=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;o?this.group.setClipPath(o):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(r,o){for(var s=o.getData(),l=s.getLayout("isSimpleBox"),c;(c=r.next())!=null;){var u=s.getItemLayout(c),d=createNormalBox(u);setBoxCommon(d,s,c,l),d.incremental=!0,this.group.add(d),this._progressiveEls.push(d)}},n.prototype._incrementalRenderLarge=function(r,o){createLarge(o,this.group,this._progressiveEls,!0)},n.prototype.remove=function(r){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n}(ChartView),NormalBoxPathShape=function(){function a(){}return a}(),NormalBoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="normalCandlestickBox",o}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(r,o){var s=o.points;this.__simpleBox?(r.moveTo(s[4][0],s[4][1]),r.lineTo(s[6][0],s[6][1])):(r.moveTo(s[0][0],s[0][1]),r.lineTo(s[1][0],s[1][1]),r.lineTo(s[2][0],s[2][1]),r.lineTo(s[3][0],s[3][1]),r.closePath(),r.moveTo(s[4][0],s[4][1]),r.lineTo(s[5][0],s[5][1]),r.moveTo(s[6][0],s[6][1]),r.lineTo(s[7][0],s[7][1]))},n}(Path);function createNormalBox(a,n,r){var o=a.ends;return new NormalBoxPath({shape:{points:r?transInit(o,a):o},z2:100})}function isNormalBoxClipped(a,n){for(var r=!0,o=0;o<n.ends.length;o++)if(a.contain(n.ends[o][0],n.ends[o][1])){r=!1;break}return r}function setBoxCommon(a,n,r,o){var s=n.getItemModel(r);a.useStyle(n.getItemVisual(r,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,setStatesStylesFromModel(a,s);var l=n.getItemLayout(r).sign;each$f(a.states,function(u,d){var f=s.getModel(d),v=getColor(l,f),g=getBorderColor(l,f)||v,y=u.style||(u.style={});v&&(y.fill=v),g&&(y.stroke=g)});var c=s.getModel("emphasis");toggleHoverEmphasis(a,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit(a,n){return map$1(a,function(r){return r=r.slice(),r[1]=n.initBaseline,r})}var LargeBoxPathShape=function(){function a(){}return a}(),LargeBoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="largeCandlestickBox",o}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(r,o){for(var s=o.points,l=0;l<s.length;)if(this.__sign===s[l++]){var c=s[l++];r.moveTo(c,s[l++]),r.lineTo(c,s[l++])}else l+=3},n}(Path);function createLarge(a,n,r,o){var s=a.getData(),l=s.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:l},__sign:1,ignoreCoarsePointer:!0});n.add(c);var u=new LargeBoxPath({shape:{points:l},__sign:-1,ignoreCoarsePointer:!0});n.add(u);var d=new LargeBoxPath({shape:{points:l},__sign:0,ignoreCoarsePointer:!0});n.add(d),setLargeStyle(1,c,a),setLargeStyle(-1,u,a),setLargeStyle(0,d,a),o&&(c.incremental=!0,u.incremental=!0),r&&r.push(c,u)}function setLargeStyle(a,n,r,o){var s=getBorderColor(a,r)||getColor(a,r),l=r.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(l),n.style.fill=null,n.style.stroke=s}var CandlestickSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(r,o,s){var l=o.getItemLayout(r);return l&&s.rect(l.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(a){!a||!isArray$1(a.series)||each$f(a.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(a){var n=a.coordinateSystem,r=a.getData(),o=calculateCandleWidth(a,r),s=0,l=1,c=["x","y"],u=r.getDimensionIndex(r.mapDimension(c[s])),d=map$1(r.mapDimensionsAll(c[l]),r.getDimensionIndex,r),f=d[0],v=d[1],g=d[2],y=d[3];if(r.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),u<0||d.length<4)return;return{progress:a.pipelineContext.large?S:_};function _(x,T){for(var w,E=T.getStore();(w=x.next())!=null;){var P=E.get(u,w),D=E.get(f,w),L=E.get(v,w),$=E.get(g,w),O=E.get(y,w),B=Math.min(D,L),V=Math.max(D,L),F=ie(B,P),U=ie(V,P),G=ie($,P),W=ie(O,P),j=[];ee(j,U,0),ee(j,F,1),j.push(pe(W),pe(U),pe(G),pe(F));var K=T.getItemModel(w),q=!!K.get(["itemStyle","borderColorDoji"]);T.setItemLayout(w,{sign:getSign(E,w,D,L,v,q),initBaseline:D>L?U[l]:F[l],ends:j,brushRect:he($,O,P)})}function ie(ce,ye){var we=[];return we[s]=ye,we[l]=ce,isNaN(ye)||isNaN(ce)?[NaN,NaN]:n.dataToPoint(we)}function ee(ce,ye,we){var ge=ye.slice(),Se=ye.slice();ge[s]=subPixelOptimize(ge[s]+o/2,1,!1),Se[s]=subPixelOptimize(Se[s]-o/2,1,!0),we?ce.push(ge,Se):ce.push(Se,ge)}function he(ce,ye,we){var ge=ie(ce,we),Se=ie(ye,we);return ge[s]-=o/2,Se[s]-=o/2,{x:ge[0],y:ge[1],width:o,height:Se[1]-ge[1]}}function pe(ce){return ce[s]=subPixelOptimize(ce[s],1),ce}}function S(x,T){for(var w=createFloat32Array(x.count*4),E=0,P,D=[],L=[],$,O=T.getStore(),B=!!a.get(["itemStyle","borderColorDoji"]);($=x.next())!=null;){var V=O.get(u,$),F=O.get(f,$),U=O.get(v,$),G=O.get(g,$),W=O.get(y,$);if(isNaN(V)||isNaN(G)||isNaN(W)){w[E++]=NaN,E+=3;continue}w[E++]=getSign(O,$,F,U,v,B),D[s]=V,D[l]=G,P=n.dataToPoint(D,null,L),w[E++]=P?P[0]:NaN,w[E++]=P?P[1]:NaN,D[l]=W,P=n.dataToPoint(D,null,L),w[E++]=P?P[1]:NaN}T.setLayout("largePoints",w)}}};function getSign(a,n,r,o,s,l){var c;return r>o?c=-1:r<o?c=1:c=l?0:n>0?a.get(s,n-1)<=o?1:-1:1,c}function calculateCandleWidth(a,n){var r=a.getBaseAxis(),o,s=r.type==="category"?r.getBandWidth():(o=r.getExtent(),Math.abs(o[1]-o[0])/n.count()),l=parsePercent(retrieve2(a.get("barMaxWidth"),s),s),c=parsePercent(retrieve2(a.get("barMinWidth"),1),s),u=a.get("barWidth");return u!=null?parsePercent(u,s):Math.max(Math.min(s/2,l),c)}function install$y(a){a.registerChartView(CandlestickView),a.registerSeriesModel(CandlestickSeriesModel),a.registerPreprocessor(candlestickPreprocessor),a.registerVisual(candlestickVisual),a.registerLayout(candlestickLayout)}function updateRipplePath(a,n){var r=n.rippleEffectColor||n.color;a.eachChild(function(o){o.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?r:null,fill:n.brushType==="fill"?r:null}})})}var EffectSymbol=function(a){__extends(n,a);function n(r,o){var s=a.call(this)||this,l=new Symbol$1(r,o),c=new Group$4;return s.add(l),s.add(c),s.updateData(r,o),s}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(r){for(var o=r.symbolType,s=r.color,l=r.rippleNumber,c=this.childAt(1),u=0;u<l;u++){var d=createSymbol$1(o,-1,-1,2,2,s);d.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var f=-u/l*r.period+r.effectOffset;d.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(f).start(),d.animateStyle(!0).when(r.period,{opacity:0}).delay(f).start(),c.add(d)}updateRipplePath(c,r)},n.prototype.updateEffectAnimation=function(r){for(var o=this._effectCfg,s=this.childAt(1),l=["symbolType","period","rippleScale","rippleNumber"],c=0;c<l.length;c++){var u=l[c];if(o[u]!==r[u]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}updateRipplePath(s,r)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},n.prototype.updateData=function(r,o){var s=this,l=r.hostModel;this.childAt(0).updateData(r,o);var c=this.childAt(1),u=r.getItemModel(o),d=r.getItemVisual(o,"symbol"),f=normalizeSymbolSize(r.getItemVisual(o,"symbolSize")),v=r.getItemVisual(o,"style"),g=v&&v.fill,y=u.getModel("emphasis");c.setScale(f),c.traverse(function(T){T.setStyle("fill",g)});var _=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),f);_&&(c.x=_[0],c.y=_[1]);var S=r.getItemVisual(o,"symbolRotate");c.rotation=(S||0)*Math.PI/180||0;var x={};x.showEffectOn=l.get("showEffectOn"),x.rippleScale=u.get(["rippleEffect","scale"]),x.brushType=u.get(["rippleEffect","brushType"]),x.period=u.get(["rippleEffect","period"])*1e3,x.effectOffset=o/r.count(),x.z=l.getShallow("z")||0,x.zlevel=l.getShallow("zlevel")||0,x.symbolType=d,x.color=g,x.rippleEffectColor=u.get(["rippleEffect","color"]),x.rippleNumber=u.get(["rippleEffect","number"]),x.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(x):this.startEffectAnimation(x),this._effectCfg=x):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(T){T==="emphasis"?x.showEffectOn!=="render"&&s.startEffectAnimation(x):T==="normal"&&x.showEffectOn!=="render"&&s.stopEffectAnimation()}),this._effectCfg=x,toggleHoverEmphasis(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},n.prototype.fadeOut=function(r){r&&r()},n}(Group$4),EffectScatterView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(r,o,s){var l=r.getData(),c=this._symbolDraw;c.updateData(l,{clipShape:this._getClipShape(r)}),this.group.add(c.group)},n.prototype._getClipShape=function(r){var o=r.coordinateSystem,s=o&&o.getArea&&o.getArea();return r.get("clip",!0)?s:null},n.prototype.updateTransform=function(r,o,s){var l=r.getData();this.group.dirty();var c=pointsLayout("").reset(r,o,s);c.progress&&c.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(r){var o=r.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(ChartView),EffectScatterSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(r,o,s){return s.point(o.getItemLayout(r))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(SeriesModel);function install$x(a){a.registerChartView(EffectScatterView),a.registerSeriesModel(EffectScatterSeriesModel),a.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this)||this;return l.add(l.createLine(r,o,s)),l._updateEffectSymbol(r,o),l}return n.prototype.createLine=function(r,o,s){return new Line$1(r,o,s)},n.prototype._updateEffectSymbol=function(r,o){var s=r.getItemModel(o),l=s.getModel("effect"),c=l.get("symbolSize"),u=l.get("symbol");isArray$1(c)||(c=[c,c]);var d=r.getItemVisual(o,"style"),f=l.get("color")||d&&d.stroke,v=this.childAt(1);this._symbolType!==u&&(this.remove(v),v=createSymbol$1(u,-.5,-.5,1,1,f),v.z2=100,v.culling=!0,this.add(v)),v&&(v.setStyle("shadowColor",f),v.setStyle(l.getItemStyle(["color"])),v.scaleX=c[0],v.scaleY=c[1],v.setColor(f),this._symbolType=u,this._symbolScale=c,this._updateEffectAnimation(r,l,o))},n.prototype._updateEffectAnimation=function(r,o,s){var l=this.childAt(1);if(l){var c=r.getItemLayout(s),u=o.get("period")*1e3,d=o.get("loop"),f=o.get("roundTrip"),v=o.get("constantSpeed"),g=retrieve(o.get("delay"),function(_){return _/r.count()*u/3});if(l.ignore=!0,this._updateAnimationPoints(l,c),v>0&&(u=this._getLineLength(l)/v*1e3),u!==this._period||d!==this._loop||f!==this._roundTrip){l.stopAnimation();var y=void 0;isFunction(g)?y=g(s):y=g,l.__t>0&&(y=-u*l.__t),this._animateSymbol(l,u,y,d,f)}this._period=u,this._loop=d,this._roundTrip=f}},n.prototype._animateSymbol=function(r,o,s,l,c){if(o>0){r.__t=0;var u=this,d=r.animate("",l).when(c?o*2:o,{__t:c?2:1}).delay(s).during(function(){u._updateSymbolPosition(r)});l||d.done(function(){u.remove(r)}),d.start()}},n.prototype._getLineLength=function(r){return dist$1(r.__p1,r.__cp1)+dist$1(r.__cp1,r.__p2)},n.prototype._updateAnimationPoints=function(r,o){r.__p1=o[0],r.__p2=o[1],r.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},n.prototype.updateData=function(r,o,s){this.childAt(0).updateData(r,o,s),this._updateEffectSymbol(r,o)},n.prototype._updateSymbolPosition=function(r){var o=r.__p1,s=r.__p2,l=r.__cp1,c=r.__t<1?r.__t:2-r.__t,u=[r.x,r.y],d=u.slice(),f=quadraticAt$1,v=quadraticDerivativeAt;u[0]=f(o[0],l[0],s[0],c),u[1]=f(o[1],l[1],s[1],c);var g=r.__t<1?v(o[0],l[0],s[0],c):v(s[0],l[0],o[0],1-c),y=r.__t<1?v(o[1],l[1],s[1],c):v(s[1],l[1],o[1],1-c);r.rotation=-Math.atan2(y,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=dist$1(d,u)*1.05,c===1&&(u[0]=d[0]+(u[0]-d[0])/2,u[1]=d[1]+(u[1]-d[1])/2)):r.__lastT===1?r.scaleY=2*dist$1(o,u):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=u[0],r.y=u[1]},n.prototype.updateLayout=function(r,o){this.childAt(0).updateLayout(r,o);var s=r.getItemModel(o).getModel("effect");this._updateEffectAnimation(r,s,o)},n}(Group$4),Polyline=function(a){__extends(n,a);function n(r,o,s){var l=a.call(this)||this;return l._createPolyline(r,o,s),l}return n.prototype._createPolyline=function(r,o,s){var l=r.getItemLayout(o),c=new Polyline$1({shape:{points:l}});this.add(c),this._updateCommonStl(r,o,s)},n.prototype.updateData=function(r,o,s){var l=r.hostModel,c=this.childAt(0),u={shape:{points:r.getItemLayout(o)}};updateProps$1(c,u,l,o),this._updateCommonStl(r,o,s)},n.prototype._updateCommonStl=function(r,o,s){var l=this.childAt(0),c=r.getItemModel(o),u=s&&s.emphasisLineStyle,d=s&&s.focus,f=s&&s.blurScope,v=s&&s.emphasisDisabled;if(!s||r.hasItemOption){var g=c.getModel("emphasis");u=g.getModel("lineStyle").getLineStyle(),v=g.get("disabled"),d=g.get("focus"),f=g.get("blurScope")}l.useStyle(r.getItemVisual(o,"style")),l.style.fill=null,l.style.strokeNoScale=!0;var y=l.ensureState("emphasis");y.style=u,toggleHoverEmphasis(this,d,f,v)},n.prototype.updateLayout=function(r,o){var s=this.childAt(0);s.setShape("points",r.getItemLayout(o))},n}(Group$4),EffectPolyline=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return n.prototype.createLine=function(r,o,s){return new Polyline(r,o,s)},n.prototype._updateAnimationPoints=function(r,o){this._points=o;for(var s=[0],l=0,c=1;c<o.length;c++){var u=o[c-1],d=o[c];l+=dist$1(u,d),s.push(l)}if(l===0){this._length=0;return}for(var c=0;c<s.length;c++)s[c]/=l;this._offsets=s,this._length=l},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(r){var o=r.__t<1?r.__t:2-r.__t,s=this._points,l=this._offsets,c=s.length;if(l){var u=this._lastFrame,d;if(o<this._lastFramePercent){var f=Math.min(u+1,c-1);for(d=f;d>=0&&!(l[d]<=o);d--);d=Math.min(d,c-2)}else{for(d=u;d<c&&!(l[d]>o);d++);d=Math.min(d-1,c-2)}var v=(o-l[d])/(l[d+1]-l[d]),g=s[d],y=s[d+1];r.x=g[0]*(1-v)+v*y[0],r.y=g[1]*(1-v)+v*y[1];var _=r.__t<1?y[0]-g[0]:g[0]-y[0],S=r.__t<1?y[1]-g[1]:g[1]-y[1];r.rotation=-Math.atan2(S,_)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=o,r.ignore=!1}},n}(EffectLine),LargeLinesPathShape=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),LargeLinesPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(r,o){var s=o.segs,l=o.curveness,c;if(o.polyline)for(c=this._off;c<s.length;){var u=s[c++];if(u>0){r.moveTo(s[c++],s[c++]);for(var d=1;d<u;d++)r.lineTo(s[c++],s[c++])}}else for(c=this._off;c<s.length;){var f=s[c++],v=s[c++],g=s[c++],y=s[c++];if(r.moveTo(f,v),l>0){var _=(f+g)/2-(v-y)*l,S=(v+y)/2-(g-f)*l;r.quadraticCurveTo(_,S,g,y)}else r.lineTo(g,y)}this.incremental&&(this._off=c,this.notClear=!0)},n.prototype.findDataIndex=function(r,o){var s=this.shape,l=s.segs,c=s.curveness,u=this.style.lineWidth;if(s.polyline)for(var d=0,f=0;f<l.length;){var v=l[f++];if(v>0)for(var g=l[f++],y=l[f++],_=1;_<v;_++){var S=l[f++],x=l[f++];if(containStroke$4(g,y,S,x,u,r,o))return d}d++}else for(var d=0,f=0;f<l.length;){var g=l[f++],y=l[f++],S=l[f++],x=l[f++];if(c>0){var T=(g+S)/2-(y-x)*c,w=(y+x)/2-(S-g)*c;if(containStroke$2(g,y,T,w,S,x,u,r,o))return d}else if(containStroke$4(g,y,S,x,u,r,o))return d;d++}return-1},n.prototype.contain=function(r,o){var s=this.transformCoordToLocal(r,o),l=this.getBoundingRect();if(r=s[0],o=s[1],l.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,s=o.segs,l=1/0,c=1/0,u=-1/0,d=-1/0,f=0;f<s.length;){var v=s[f++],g=s[f++];l=Math.min(v,l),u=Math.max(v,u),c=Math.min(g,c),d=Math.max(g,d)}r=this._rect=new BoundingRect(l,c,u,d)}return r},n}(Path),LargeLineDraw=function(){function a(){this.group=new Group$4}return a.prototype.updateData=function(n){this._clear();var r=this._create();r.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(r,n)},a.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(n,r){var o=this._newAdded[0],s=r.getLayout("linesPoints"),l=o&&o.shape.segs;if(l&&l.length<2e4){var c=l.length,u=new Float32Array(c+s.length);u.set(l),u.set(s,c),o.setShape({segs:u})}else{this._newAdded=[];var d=this._create();d.incremental=!0,d.setShape({segs:s}),this._setCommon(d,r),d.__startIndex=n.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},a.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},a.prototype._setCommon=function(n,r,o){var s=r.hostModel;n.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),n.useStyle(s.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var l=r.getVisual("style");l&&l.stroke&&n.setStyle("stroke",l.stroke),n.setStyle("fill",null);var c=getECData(n);c.seriesIndex=s.seriesIndex,n.on("mousemove",function(u){c.dataIndex=null;var d=n.hoverDataIdx;d>0&&(c.dataIndex=d+n.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(a){var n=a.coordinateSystem;if(n){var r=a.get("polyline"),o=a.pipelineContext.large;return{progress:function(s,l){var c=[];if(o){var u=void 0,d=s.end-s.start;if(r){for(var f=0,v=s.start;v<s.end;v++)f+=a.getLineCoordsCount(v);u=new Float32Array(d+f*2)}else u=new Float32Array(d*4);for(var g=0,y=[],v=s.start;v<s.end;v++){var _=a.getLineCoords(v,c);r&&(u[g++]=_);for(var S=0;S<_;S++)y=n.dataToPoint(c[S],!1,y),u[g++]=y[0],u[g++]=y[1]}l.setLayout("linesPoints",u)}else for(var v=s.start;v<s.end;v++){var x=l.getItemModel(v),_=a.getLineCoords(v,c),T=[];if(r)for(var w=0;w<_;w++)T.push(n.dataToPoint(c[w]));else{T[0]=n.dataToPoint(c[0]),T[1]=n.dataToPoint(c[1]);var E=x.get(["lineStyle","curveness"]);+E&&(T[2]=[(T[0][0]+T[1][0])/2-(T[0][1]-T[1][1])*E,(T[0][1]+T[1][1])/2-(T[1][0]-T[0][0])*E])}l.setItemLayout(v,T)}}}}}},LinesView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=r.getData(),c=this._updateLineDraw(l,r),u=r.get("zlevel"),d=r.get(["effect","trailLength"]),f=s.getZr(),v=f.painter.getType()==="svg";v||f.painter.getLayer(u).clear(!0),this._lastZlevel!=null&&!v&&f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&d>0&&(v||f.configLayer(u,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})),c.updateData(l);var g=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=u,this._finished=!0},n.prototype.incrementalPrepareRender=function(r,o,s){var l=r.getData(),c=this._updateLineDraw(l,r);c.incrementalPrepareUpdate(l),this._clearLayer(s),this._finished=!1},n.prototype.incrementalRender=function(r,o,s){this._lineDraw.incrementalUpdate(r,o.getData()),this._finished=r.end===o.getData().count()},n.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},n.prototype.updateTransform=function(r,o,s){var l=r.getData(),c=r.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var u=linesLayout.reset(r,o,s);u.progress&&u.progress({start:0,end:l.count(),count:l.count()},l),this._lineDraw.updateLayout(),this._clearLayer(s)},n.prototype._updateLineDraw=function(r,o){var s=this._lineDraw,l=this._showEffect(o),c=!!o.get("polyline"),u=o.pipelineContext,d=u.large;return(!s||l!==this._hasEffet||c!==this._isPolyline||d!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=d?new LargeLineDraw:new LineDraw(c?l?EffectPolyline:Polyline:l?EffectLine:Line$1),this._hasEffet=l,this._isPolyline=c,this._isLargeDraw=d),this.group.add(s.group),s},n.prototype._showEffect=function(r){return!!r.get(["effect","show"])},n.prototype._clearLayer=function(r){var o=r.getZr(),s=o.painter.getType()==="svg";!s&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(r,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},n.prototype.dispose=function(r,o){this.remove(r,o)},n.type="lines",n}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(a){var n=a.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(a.data=map$1(n,function(r){var o=[r[0].coord,r[1].coord],s={coords:o};return r[0].name&&(s.fromName=r[0].name),r[1].name&&(s.toName=r[1].name),mergeAll([s,r[0],r[1]])}))}var LinesSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return n.prototype.init=function(r){r.data=r.data||[],compatEc2(r);var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count)),a.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(r){if(compatEc2(r),r.data){var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count))}a.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(r){var o=this._processFlatCoordsArray(r.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),r.data=new Float32Array(o.count)),this.getRawData().appendData(r.data)},n.prototype._getCoordsFromItemModel=function(r){var o=this.getData().getItemModel(r),s=o.option instanceof Array?o.option:o.getShallow("coords");return s},n.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},n.prototype.getLineCoords=function(r,o){if(this._flatCoordsOffset){for(var s=this._flatCoordsOffset[r*2],l=this._flatCoordsOffset[r*2+1],c=0;c<l;c++)o[c]=o[c]||[],o[c][0]=this._flatCoords[s+c*2],o[c][1]=this._flatCoords[s+c*2+1];return l}else{for(var u=this._getCoordsFromItemModel(r),c=0;c<u.length;c++)o[c]=o[c]||[],o[c][0]=u[c][0],o[c][1]=u[c][1];return u.length}},n.prototype._processFlatCoordsArray=function(r){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber(r[0])){for(var s=r.length,l=new Uint32Arr(s),c=new Float64Arr(s),u=0,d=0,f=0,v=0;v<s;){f++;var g=r[v++];l[d++]=u+o,l[d++]=g;for(var y=0;y<g;y++){var _=r[v++],S=r[v++];c[u++]=_,c[u++]=S}}return{flatCoordsOffset:new Uint32Array(l.buffer,0,d),flatCoords:c,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},n.prototype.getInitialData=function(r,o){var s=new SeriesData(["value"],this);return s.hasItemOption=!1,s.initData(r.data,[],function(l,c,u,d){if(l instanceof Array)return NaN;s.hasItemOption=!0;var f=l.value;if(f!=null)return f instanceof Array?f[d]:f}),s},n.prototype.formatTooltip=function(r,o,s){var l=this.getData(),c=l.getItemModel(r),u=c.get("name");if(u)return u;var d=c.get("fromName"),f=c.get("toName"),v=[];return d!=null&&v.push(d),f!=null&&v.push(f),createTooltipMarkup("nameValue",{name:v.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},n.prototype.getZLevelKey=function(){var r=this.getModel("effect"),o=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&o>0?o+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n}(SeriesModel);function normalize$1(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(a){var n=normalize$1(a.get("symbol")),r=normalize$1(a.get("symbolSize")),o=a.getData();o.setVisual("fromSymbol",n&&n[0]),o.setVisual("toSymbol",n&&n[1]),o.setVisual("fromSymbolSize",r&&r[0]),o.setVisual("toSymbolSize",r&&r[1]);function s(l,c){var u=l.getItemModel(c),d=normalize$1(u.getShallow("symbol",!0)),f=normalize$1(u.getShallow("symbolSize",!0));d[0]&&l.setItemVisual(c,"fromSymbol",d[0]),d[1]&&l.setItemVisual(c,"toSymbol",d[1]),f[0]&&l.setItemVisual(c,"fromSymbolSize",f[0]),f[1]&&l.setItemVisual(c,"toSymbolSize",f[1])}return{dataEach:o.hasItemOption?s:null}}};function install$w(a){a.registerChartView(LinesView),a.registerSeriesModel(LinesSeriesModel),a.registerLayout(linesLayout),a.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return a.prototype.update=function(n,r,o,s,l,c){var u=this._getBrush(),d=this._getGradient(l,"inRange"),f=this._getGradient(l,"outOfRange"),v=this.pointSize+this.blurSize,g=this.canvas,y=g.getContext("2d"),_=n.length;g.width=r,g.height=o;for(var S=0;S<_;++S){var x=n[S],T=x[0],w=x[1],E=x[2],P=s(E);y.globalAlpha=P,y.drawImage(u,T-v,w-v)}if(!g.width||!g.height)return g;for(var D=y.getImageData(0,0,g.width,g.height),L=D.data,$=0,O=L.length,B=this.minOpacity,V=this.maxOpacity,F=V-B;$<O;){var P=L[$+3]/256,U=Math.floor(P*(GRADIENT_LEVELS-1))*4;if(P>0){var G=c(P)?d:f;P>0&&(P=P*F+B),L[$++]=G[U],L[$++]=G[U+1],L[$++]=G[U+2],L[$++]=G[U+3]*P*256}else $+=4}return y.putImageData(D,0,0),g},a.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,o=r*2;n.width=o,n.height=o;var s=n.getContext("2d");return s.clearRect(0,0,o,o),s.shadowOffsetX=o,s.shadowBlur=this.blurSize,s.shadowColor="#000",s.beginPath(),s.arc(-r,r,this.pointSize,0,Math.PI*2,!0),s.closePath(),s.fill(),n},a.prototype._getGradient=function(n,r){for(var o=this._gradientPixels,s=o[r]||(o[r]=new Uint8ClampedArray(256*4)),l=[0,0,0,0],c=0,u=0;u<256;u++)n[r](u/255,!0,l),s[c++]=l[0],s[c++]=l[1],s[c++]=l[2],s[c++]=l[3];return s},a}();function getIsInPiecewiseRange(a,n,r){var o=a[1]-a[0];n=map$1(n,function(c){return{interval:[(c.interval[0]-a[0])/o,(c.interval[1]-a[0])/o]}});var s=n.length,l=0;return function(c){var u;for(u=l;u<s;u++){var d=n[u].interval;if(d[0]<=c&&c<=d[1]){l=u;break}}if(u===s)for(u=l-1;u>=0;u--){var d=n[u].interval;if(d[0]<=c&&c<=d[1]){l=u;break}}return u>=0&&u<s&&r[u]}}function getIsInContinuousRange(a,n){var r=a[1]-a[0];return n=[(n[0]-a[0])/r,(n[1]-a[0])/r],function(o){return o>=n[0]&&o<=n[1]}}function isGeoCoordSys(a){var n=a.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l;o.eachComponent("visualMap",function(u){u.eachTargetSeries(function(d){d===r&&(l=u)})}),this._progressiveEls=null,this.group.removeAll();var c=r.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(r,s,0,r.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,r,l,s)},n.prototype.incrementalPrepareRender=function(r,o,s){this.group.removeAll()},n.prototype.incrementalRender=function(r,o,s,l){var c=o.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(o,s,l):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(o,l,r.start,r.end,!0)))},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._renderOnCartesianAndCalendar=function(r,o,s,l,c){var u=r.coordinateSystem,d=isCoordinateSystemType(u,"cartesian2d"),f,v,g,y;if(d){var _=u.getAxis("x"),S=u.getAxis("y");f=_.getBandWidth()+.5,v=S.getBandWidth()+.5,g=_.scale.getExtent(),y=S.scale.getExtent()}for(var x=this.group,T=r.getData(),w=r.getModel(["emphasis","itemStyle"]).getItemStyle(),E=r.getModel(["blur","itemStyle"]).getItemStyle(),P=r.getModel(["select","itemStyle"]).getItemStyle(),D=r.get(["itemStyle","borderRadius"]),L=getLabelStatesModels(r),$=r.getModel("emphasis"),O=$.get("focus"),B=$.get("blurScope"),V=$.get("disabled"),F=d?[T.mapDimension("x"),T.mapDimension("y"),T.mapDimension("value")]:[T.mapDimension("time"),T.mapDimension("value")],U=s;U<l;U++){var G=void 0,W=T.getItemVisual(U,"style");if(d){var j=T.get(F[0],U),K=T.get(F[1],U);if(isNaN(T.get(F[2],U))||isNaN(j)||isNaN(K)||j<g[0]||j>g[1]||K<y[0]||K>y[1])continue;var q=u.dataToPoint([j,K]);G=new Rect$2({shape:{x:q[0]-f/2,y:q[1]-v/2,width:f,height:v},style:W})}else{if(isNaN(T.get(F[1],U)))continue;G=new Rect$2({z2:1,shape:u.dataToRect([T.get(F[0],U)]).contentShape,style:W})}if(T.hasItemOption){var ie=T.getItemModel(U),ee=ie.getModel("emphasis");w=ee.getModel("itemStyle").getItemStyle(),E=ie.getModel(["blur","itemStyle"]).getItemStyle(),P=ie.getModel(["select","itemStyle"]).getItemStyle(),D=ie.get(["itemStyle","borderRadius"]),O=ee.get("focus"),B=ee.get("blurScope"),V=ee.get("disabled"),L=getLabelStatesModels(ie)}G.shape.r=D;var he=r.getRawValue(U),pe="-";he&&he[2]!=null&&(pe=he[2]+""),setLabelStyle(G,L,{labelFetcher:r,labelDataIndex:U,defaultOpacity:W.opacity,defaultText:pe}),G.ensureState("emphasis").style=w,G.ensureState("blur").style=E,G.ensureState("select").style=P,toggleHoverEmphasis(G,O,B,V),G.incremental=c,c&&(G.states.emphasis.hoverLayer=!0),x.add(G),T.setItemGraphicEl(U,G),this._progressiveEls&&this._progressiveEls.push(G)}},n.prototype._renderOnGeo=function(r,o,s,l){var c=s.targetVisuals.inRange,u=s.targetVisuals.outOfRange,d=o.getData(),f=this._hmLayer||this._hmLayer||new HeatmapLayer;f.blurSize=o.get("blurSize"),f.pointSize=o.get("pointSize"),f.minOpacity=o.get("minOpacity"),f.maxOpacity=o.get("maxOpacity");var v=r.getViewRect().clone(),g=r.getRoamTransform();v.applyTransform(g);var y=Math.max(v.x,0),_=Math.max(v.y,0),S=Math.min(v.width+v.x,l.getWidth()),x=Math.min(v.height+v.y,l.getHeight()),T=S-y,w=x-_,E=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],P=d.mapArray(E,function(O,B,V){var F=r.dataToPoint([O,B]);return F[0]-=y,F[1]-=_,F.push(V),F}),D=s.getExtent(),L=s.type==="visualMap.continuous"?getIsInContinuousRange(D,s.option.range):getIsInPiecewiseRange(D,s.getPieceList(),s.option.selected);f.update(P,T,w,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:u.color.getColorMapper()},L);var $=new ZRImage({style:{width:T,height:w,x:y,y:_,image:f.canvas},silent:!0});this.group.add($)},n.type="heatmap",n}(ChartView),HeatmapSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var r=CoordinateSystemManager.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel);function install$v(a){a.registerChartView(HeatmapView),a.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=this.group,c=r.getData(),u=this._data,d=r.coordinateSystem,f=d.getBaseAxis(),v=f.isHorizontal(),g=d.master.getRect(),y={ecSize:{width:s.getWidth(),height:s.getHeight()},seriesModel:r,coordSys:d,coordSysExtent:[[g.x,g.x+g.width],[g.y,g.y+g.height]],isHorizontal:v,valueDim:LAYOUT_ATTRS[+v],categoryDim:LAYOUT_ATTRS[1-+v]};c.diff(u).add(function(S){if(c.hasValue(S)){var x=getItemModel(c,S),T=getSymbolMeta(c,S,x,y),w=createBar(c,y,T);c.setItemGraphicEl(S,w),l.add(w),updateCommon(w,y,T)}}).update(function(S,x){var T=u.getItemGraphicEl(x);if(!c.hasValue(S)){l.remove(T);return}var w=getItemModel(c,S),E=getSymbolMeta(c,S,w,y),P=getShapeStr(c,E);T&&P!==T.__pictorialShapeStr&&(l.remove(T),c.setItemGraphicEl(S,null),T=null),T?updateBar(T,y,E):T=createBar(c,y,E,!0),c.setItemGraphicEl(S,T),T.__pictorialSymbolMeta=E,l.add(T),updateCommon(T,y,E)}).remove(function(S){var x=u.getItemGraphicEl(S);x&&removeBar(u,S,x.__pictorialSymbolMeta.animationModel,x)}).execute();var _=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;return _?l.setClipPath(_):l.removeClipPath(),this._data=c,this.group},n.prototype.remove=function(r,o){var s=this.group,l=this._data;r.get("animation")?l&&l.eachItemGraphicEl(function(c){removeBar(l,getECData(c).dataIndex,r,c)}):s.removeAll()},n.type="pictorialBar",n}(ChartView);function getSymbolMeta(a,n,r,o){var s=a.getItemLayout(n),l=r.get("symbolRepeat"),c=r.get("symbolClip"),u=r.get("symbolPosition")||"start",d=r.get("symbolRotate"),f=(d||0)*Math.PI/180||0,v=r.get("symbolPatternSize")||2,g=r.isAnimationEnabled(),y={dataIndex:n,layout:s,itemModel:r,symbolType:a.getItemVisual(n,"symbol")||"circle",style:a.getItemVisual(n,"style"),symbolClip:c,symbolRepeat:l,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:f,animationModel:g?r:null,hoverScale:g&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};prepareBarLength(r,l,s,o,y),prepareSymbolSize(a,n,s,l,c,y.boundingLength,y.pxSign,v,o,y),prepareLineWidth(r,y.symbolScale,f,o,y);var _=y.symbolSize,S=normalizeSymbolOffset(r.get("symbolOffset"),_);return prepareLayoutInfo(r,_,s,l,c,S,u,y.valueLineWidth,y.boundingLength,y.repeatCutLength,o,y),y}function prepareBarLength(a,n,r,o,s){var l=o.valueDim,c=a.get("symbolBoundingData"),u=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),d=u.toGlobalCoord(u.dataToCoord(0)),f=1-+(r[l.wh]<=0),v;if(isArray$1(c)){var g=[convertToCoordOnAxis(u,c[0])-d,convertToCoordOnAxis(u,c[1])-d];g[1]<g[0]&&g.reverse(),v=g[f]}else c!=null?v=convertToCoordOnAxis(u,c)-d:n?v=o.coordSysExtent[l.index][f]-d:v=r[l.wh];s.boundingLength=v,n&&(s.repeatCutLength=r[l.wh]);var y=l.xy==="x",_=u.inverse;s.pxSign=y&&!_||!y&&_?v>=0?1:-1:v>0?1:-1}function convertToCoordOnAxis(a,n){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(n)))}function prepareSymbolSize(a,n,r,o,s,l,c,u,d,f){var v=d.valueDim,g=d.categoryDim,y=Math.abs(r[g.wh]),_=a.getItemVisual(n,"symbolSize"),S;isArray$1(_)?S=_.slice():_==null?S=["100%","100%"]:S=[_,_],S[g.index]=parsePercent(S[g.index],y),S[v.index]=parsePercent(S[v.index],o?y:Math.abs(l)),f.symbolSize=S;var x=f.symbolScale=[S[0]/u,S[1]/u];x[v.index]*=(d.isHorizontal?-1:1)*c}function prepareLineWidth(a,n,r,o,s){var l=a.get(BAR_BORDER_WIDTH_QUERY)||0;l&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:r}),pathForLineWidth.updateTransform(),l/=pathForLineWidth.getLineScale(),l*=n[o.valueDim.index]),s.valueLineWidth=l||0}function prepareLayoutInfo(a,n,r,o,s,l,c,u,d,f,v,g){var y=v.categoryDim,_=v.valueDim,S=g.pxSign,x=Math.max(n[_.index]+u,0),T=x;if(o){var w=Math.abs(d),E=retrieve(a.get("symbolMargin"),"15%")+"",P=!1;E.lastIndexOf("!")===E.length-1&&(P=!0,E=E.slice(0,E.length-1));var D=parsePercent(E,n[_.index]),L=Math.max(x+D*2,0),$=P?0:D*2,O=isNumeric(o),B=O?o:toIntTimes((w+$)/L),V=w-B*x;D=V/2/(P?B:Math.max(B-1,1)),L=x+D*2,$=P?0:D*2,!O&&o!=="fixed"&&(B=f?toIntTimes((Math.abs(f)+$)/L):0),T=B*L-$,g.repeatTimes=B,g.symbolMargin=D}var F=S*(T/2),U=g.pathPosition=[];U[y.index]=r[y.wh]/2,U[_.index]=c==="start"?F:c==="end"?d-F:d/2,l&&(U[0]+=l[0],U[1]+=l[1]);var G=g.bundlePosition=[];G[y.index]=r[y.xy],G[_.index]=r[_.xy];var W=g.barRectShape=extend({},r);W[_.wh]=S*Math.max(Math.abs(r[_.wh]),Math.abs(U[_.index]+F)),W[y.wh]=r[y.wh];var j=g.clipShape={};j[y.xy]=-r[y.xy],j[y.wh]=v.ecSize[y.wh],j[_.xy]=0,j[_.wh]=r[_.wh]}function createPath(a){var n=a.symbolPatternSize,r=createSymbol$1(a.symbolType,-n/2,-n/2,n,n);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function createOrUpdateRepeatSymbols(a,n,r,o){var s=a.__pictorialBundle,l=r.symbolSize,c=r.valueLineWidth,u=r.pathPosition,d=n.valueDim,f=r.repeatTimes||0,v=0,g=l[n.valueDim.index]+c+r.symbolMargin*2;for(eachPath(a,function(x){x.__pictorialAnimationIndex=v,x.__pictorialRepeatTimes=f,v<f?updateAttr(x,null,S(v),r,o):updateAttr(x,null,{scaleX:0,scaleY:0},r,o,function(){s.remove(x)}),v++});v<f;v++){var y=createPath(r);y.__pictorialAnimationIndex=v,y.__pictorialRepeatTimes=f,s.add(y);var _=S(v);updateAttr(y,{x:_.x,y:_.y,scaleX:0,scaleY:0},{scaleX:_.scaleX,scaleY:_.scaleY,rotation:_.rotation},r,o)}function S(x){var T=u.slice(),w=r.pxSign,E=x;return(r.symbolRepeatDirection==="start"?w>0:w<0)&&(E=f-1-x),T[d.index]=g*(E-f/2+.5)+u[d.index],{x:T[0],y:T[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function createOrUpdateSingleSymbol(a,n,r,o){var s=a.__pictorialBundle,l=a.__pictorialMainPath;l?updateAttr(l,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,o):(l=a.__pictorialMainPath=createPath(r),s.add(l),updateAttr(l,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,o))}function createOrUpdateBarRect(a,n,r){var o=extend({},n.barRectShape),s=a.__pictorialBarRect;s?updateAttr(s,null,{shape:o},n,r):(s=a.__pictorialBarRect=new Rect$2({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),s.disableMorphing=!0,a.add(s))}function createOrUpdateClip(a,n,r,o){if(r.symbolClip){var s=a.__pictorialClipPath,l=extend({},r.clipShape),c=n.valueDim,u=r.animationModel,d=r.dataIndex;if(s)updateProps$1(s,{shape:l},u,d);else{l[c.wh]=0,s=new Rect$2({shape:l}),a.__pictorialBundle.setClipPath(s),a.__pictorialClipPath=s;var f={};f[c.wh]=r.clipShape[c.wh],graphic[o?"updateProps":"initProps"](s,{shape:f},u,d)}}}function getItemModel(a,n){var r=a.getItemModel(n);return r.getAnimationDelayParams=getAnimationDelayParams,r.isAnimationEnabled=isAnimationEnabled,r}function getAnimationDelayParams(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(a,n,r,o){var s=new Group$4,l=new Group$4;return s.add(l),s.__pictorialBundle=l,l.x=r.bundlePosition[0],l.y=r.bundlePosition[1],r.symbolRepeat?createOrUpdateRepeatSymbols(s,n,r):createOrUpdateSingleSymbol(s,n,r),createOrUpdateBarRect(s,r,o),createOrUpdateClip(s,n,r,o),s.__pictorialShapeStr=getShapeStr(a,r),s.__pictorialSymbolMeta=r,s}function updateBar(a,n,r){var o=r.animationModel,s=r.dataIndex,l=a.__pictorialBundle;updateProps$1(l,{x:r.bundlePosition[0],y:r.bundlePosition[1]},o,s),r.symbolRepeat?createOrUpdateRepeatSymbols(a,n,r,!0):createOrUpdateSingleSymbol(a,n,r,!0),createOrUpdateBarRect(a,r,!0),createOrUpdateClip(a,n,r,!0)}function removeBar(a,n,r,o){var s=o.__pictorialBarRect;s&&s.removeTextContent();var l=[];eachPath(o,function(c){l.push(c)}),o.__pictorialMainPath&&l.push(o.__pictorialMainPath),o.__pictorialClipPath&&(r=null),each$f(l,function(c){removeElement(c,{scaleX:0,scaleY:0},r,n,function(){o.parent&&o.parent.remove(o)})}),a.setItemGraphicEl(n,null)}function getShapeStr(a,n){return[a.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(a,n,r){each$f(a.__pictorialBundle.children(),function(o){o!==a.__pictorialBarRect&&n.call(r,o)})}function updateAttr(a,n,r,o,s,l){n&&a.attr(n),o.symbolClip&&!s?r&&a.attr(r):r&&graphic[s?"updateProps":"initProps"](a,r,o.animationModel,o.dataIndex,l)}function updateCommon(a,n,r){var o=r.dataIndex,s=r.itemModel,l=s.getModel("emphasis"),c=l.getModel("itemStyle").getItemStyle(),u=s.getModel(["blur","itemStyle"]).getItemStyle(),d=s.getModel(["select","itemStyle"]).getItemStyle(),f=s.getShallow("cursor"),v=l.get("focus"),g=l.get("blurScope"),y=l.get("scale");eachPath(a,function(x){if(x instanceof ZRImage){var T=x.style;x.useStyle(extend({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},r.style))}else x.useStyle(r.style);var w=x.ensureState("emphasis");w.style=c,y&&(w.scaleX=x.scaleX*1.1,w.scaleY=x.scaleY*1.1),x.ensureState("blur").style=u,x.ensureState("select").style=d,f&&(x.cursor=f),x.z2=r.z2});var _=n.valueDim.posDesc[+(r.boundingLength>0)],S=a.__pictorialBarRect;S.ignoreClip=!0,setLabelStyle(S,getLabelStatesModels(s),{labelFetcher:n.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(n.seriesModel.getData(),o),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:_}),toggleHoverEmphasis(a,v,g,l.get("disabled"))}function toIntTimes(a){var n=Math.round(a);return Math.abs(a-n)<1e-4?n:Math.ceil(a)}var PictorialBarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return n.prototype.getInitialData=function(r){return r.stack=null,a.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n}(BaseBarSeriesModel);function install$u(a){a.registerChartView(PictorialBarView),a.registerSeriesModel(PictorialBarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._layers=[],r}return n.prototype.render=function(r,o,s){var l=r.getData(),c=this,u=this.group,d=r.getLayerSeries(),f=l.getLayout("layoutInfo"),v=f.rect,g=f.boundaryGap;u.x=0,u.y=v.y+g[0];function y(T){return T.name}var _=new DataDiffer(this._layersSeries||[],d,y,y),S=[];_.add(bind$1(x,this,"add")).update(bind$1(x,this,"update")).remove(bind$1(x,this,"remove")).execute();function x(T,w,E){var P=c._layers;if(T==="remove"){u.remove(P[w]);return}for(var D=[],L=[],$,O=d[w].indices,B=0;B<O.length;B++){var V=l.getItemLayout(O[B]),F=V.x,U=V.y0,G=V.y;D.push(F,U),L.push(F,U+G),$=l.getItemVisual(O[B],"style")}var W,j=l.getItemLayout(O[0]),K=r.getModel("label"),q=K.get("margin"),ie=r.getModel("emphasis");if(T==="add"){var ee=S[w]=new Group$4;W=new ECPolygon({shape:{points:D,stackedOnPoints:L,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),ee.add(W),u.add(ee),r.isAnimationEnabled()&&W.setClipPath(createGridClipShape(W.getBoundingRect(),r,function(){W.removeClipPath()}))}else{var ee=P[E];W=ee.childAt(0),u.add(ee),S[w]=ee,updateProps$1(W,{shape:{points:D,stackedOnPoints:L}},r),saveOldStyle(W)}setLabelStyle(W,getLabelStatesModels(r),{labelDataIndex:O[B-1],defaultText:l.getName(O[B-1]),inheritColor:$.fill},{normal:{verticalAlign:"middle"}}),W.setTextConfig({position:null,local:!0});var he=W.getTextContent();he&&(he.x=j.x-q,he.y=j.y0+j.y/2),W.useStyle($),l.setItemGraphicEl(w,W),setStatesStylesFromModel(W,r),toggleHoverEmphasis(W,ie.get("focus"),ie.get("blurScope"),ie.get("disabled"))}this._layersSeries=d,this._layers=S},n.type="themeRiver",n}(ChartView);function createGridClipShape(a,n,r){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},n,r),o}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(r){var o=r.length,s={},l=groupData(r,function(y){return s.hasOwnProperty(y[0]+"")||(s[y[0]+""]=-1),y[2]}),c=[];l.buckets.each(function(y,_){c.push({name:_,dataList:y})});for(var u=c.length,d=0;d<u;++d){for(var f=c[d].name,v=0;v<c[d].dataList.length;++v){var g=c[d].dataList[v][0]+"";s[g]=d}for(var g in s)s.hasOwnProperty(g)&&s[g]!==d&&(s[g]=d,r[o]=[g,0,f],o++)}return r},n.prototype.getInitialData=function(r,o){for(var s=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],l=s.get("type"),c=filter(r.data,function(S){return S[2]!==void 0}),u=this.fixData(c||[]),d=[],f=this.nameMap=createHashMap(),v=0,g=0;g<u.length;++g)d.push(u[g][DATA_NAME_INDEX]),f.get(u[g][DATA_NAME_INDEX])||(f.set(u[g][DATA_NAME_INDEX],v),v++);var y=prepareSeriesDataSchema(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,_=new SeriesData(y,this);return _.initData(u),_},n.prototype.getLayerSeries=function(){for(var r=this.getData(),o=r.count(),s=[],l=0;l<o;++l)s[l]=l;var c=r.mapDimension("single"),u=groupData(s,function(f){return r.get("name",f)}),d=[];return u.buckets.each(function(f,v){f.sort(function(g,y){return r.get(c,g)-r.get(c,y)}),d.push({name:v,indices:f})}),d},n.prototype.getAxisTooltipData=function(r,o,s){isArray$1(r)||(r=r?[r]:[]);for(var l=this.getData(),c=this.getLayerSeries(),u=[],d=c.length,f,v=0;v<d;++v){for(var g=Number.MAX_VALUE,y=-1,_=c[v].indices.length,S=0;S<_;++S){var x=l.get(r[0],c[v].indices[S]),T=Math.abs(x-o);T<=g&&(f=x,g=T,y=c[v].indices[S])}u.push(y)}return{dataIndices:u,nestestValue:f}},n.prototype.formatTooltip=function(r,o,s){var l=this.getData(),c=l.getName(r),u=l.get(l.mapDimension("value"),r);return createTooltipMarkup("nameValue",{name:c,value:u})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n}(SeriesModel);function themeRiverLayout(a,n){a.eachSeriesByType("themeRiver",function(r){var o=r.getData(),s=r.coordinateSystem,l={},c=s.getRect();l.rect=c;var u=r.get("boundaryGap"),d=s.getAxis();if(l.boundaryGap=u,d.orient==="horizontal"){u[0]=parsePercent(u[0],c.height),u[1]=parsePercent(u[1],c.height);var f=c.height-u[0]-u[1];doThemeRiverLayout(o,r,f)}else{u[0]=parsePercent(u[0],c.width),u[1]=parsePercent(u[1],c.width);var v=c.width-u[0]-u[1];doThemeRiverLayout(o,r,v)}o.setLayout("layoutInfo",l)})}function doThemeRiverLayout(a,n,r){if(a.count())for(var o=n.coordinateSystem,s=n.getLayerSeries(),l=a.mapDimension("single"),c=a.mapDimension("value"),u=map$1(s,function(T){return map$1(T.indices,function(w){var E=o.dataToPoint(a.get(l,w));return E[1]=a.get(c,w),E})}),d=computeBaseline(u),f=d.y0,v=r/d.max,g=s.length,y=s[0].indices.length,_,S=0;S<y;++S){_=f[S]*v,a.setItemLayout(s[0].indices[S],{layerIndex:0,x:u[0][S][0],y0:_,y:u[0][S][1]*v});for(var x=1;x<g;++x)_+=u[x-1][S][1]*v,a.setItemLayout(s[x].indices[S],{layerIndex:x,x:u[x][S][0],y0:_,y:u[x][S][1]*v})}}function computeBaseline(a){for(var n=a.length,r=a[0].length,o=[],s=[],l=0,c=0;c<r;++c){for(var u=0,d=0;d<n;++d)u+=a[d][c][1];u>l&&(l=u),o.push(u)}for(var f=0;f<r;++f)s[f]=(l-o[f])/2;l=0;for(var v=0;v<r;++v){var g=o[v]+s[v];g>l&&(l=g)}return{y0:s,max:l}}function install$t(a){a.registerChartView(ThemeRiverView),a.registerSeriesModel(ThemeRiverSeriesModel),a.registerLayout(themeRiverLayout),a.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(a){__extends(n,a);function n(r,o,s,l){var c=a.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=o.seriesIndex;var u=new ZRText({z2:DEFAULT_TEXT_Z,silent:r.getModel().get(["label","silent"])});return c.setTextContent(u),c.updateData(!0,r,o,s,l),c}return n.prototype.updateData=function(r,o,s,l,c){this.node=o,o.piece=this,s=s||this._seriesModel,l=l||this._ecModel;var u=this;getECData(u).dataIndex=o.dataIndex;var d=o.getModel(),f=d.getModel("emphasis"),v=o.getLayout(),g=extend({},v);g.label=null;var y=o.getVisual("style");y.lineJoin="bevel";var _=o.getVisual("decal");_&&(y.decal=createOrUpdatePatternFromDecal(_,c));var S=getSectorCornerRadius(d.getModel("itemStyle"),g,!0);extend(g,S),each$f(SPECIAL_STATES,function(E){var P=u.ensureState(E),D=d.getModel([E,"itemStyle"]);P.style=D.getItemStyle();var L=getSectorCornerRadius(D,g);L&&(P.shape=L)}),r?(u.setShape(g),u.shape.r=v.r0,initProps(u,{shape:{r:v.r}},s,o.dataIndex)):(updateProps$1(u,{shape:g},s),saveOldStyle(u)),u.useStyle(y),this._updateLabel(s);var x=d.getShallow("cursor");x&&u.attr("cursor",x),this._seriesModel=s||this._seriesModel,this._ecModel=l||this._ecModel;var T=f.get("focus"),w=T==="relative"?concatArray(o.getAncestorsIndices(),o.getDescendantIndices()):T==="ancestor"?o.getAncestorsIndices():T==="descendant"?o.getDescendantIndices():T;toggleHoverEmphasis(this,w,f.get("blurScope"),f.get("disabled"))},n.prototype._updateLabel=function(r){var o=this,s=this.node.getModel(),l=s.getModel("label"),c=this.node.getLayout(),u=c.endAngle-c.startAngle,d=(c.startAngle+c.endAngle)/2,f=Math.cos(d),v=Math.sin(d),g=this,y=g.getTextContent(),_=this.node.dataIndex,S=l.get("minAngle")/180*Math.PI,x=l.get("show")&&!(S!=null&&Math.abs(u)<S);y.ignore=!x,each$f(DISPLAY_STATES,function(w){var E=w==="normal"?s.getModel("label"):s.getModel([w,"label"]),P=w==="normal",D=P?y:y.ensureState(w),L=r.getFormattedLabel(_,w);P&&(L=L||o.node.name),D.style=createTextStyle(E,{},null,w!=="normal",!0),L&&(D.style.text=L);var $=E.get("show");$!=null&&!P&&(D.ignore=!$);var O=T(E,"position"),B=P?g:g.states[w],V=B.style.fill;B.textConfig={outsideFill:E.get("color")==="inherit"?V:null,inside:O!=="outside"};var F,U=T(E,"distance")||0,G=T(E,"align"),W=T(E,"rotate"),j=Math.PI*.5,K=Math.PI*1.5,q=normalizeRadian(W==="tangential"?Math.PI/2-d:d),ie=q>j&&!isRadianAroundZero(q-j)&&q<K;O==="outside"?(F=c.r+U,G=ie?"right":"left"):!G||G==="center"?(u===2*Math.PI&&c.r0===0?F=0:F=(c.r+c.r0)/2,G="center"):G==="left"?(F=c.r0+U,G=ie?"right":"left"):G==="right"&&(F=c.r-U,G=ie?"left":"right"),D.style.align=G,D.style.verticalAlign=T(E,"verticalAlign")||"middle",D.x=F*f+c.cx,D.y=F*v+c.cy;var ee=0;W==="radial"?ee=normalizeRadian(-d)+(ie?Math.PI:0):W==="tangential"?ee=normalizeRadian(Math.PI/2-d)+(ie?Math.PI:0):isNumber(W)&&(ee=W*Math.PI/180),D.rotation=normalizeRadian(ee)});function T(w,E){var P=w.get(E);return P??l.get(E)}y.dirtyStyle()},n}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(a){a.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"sunburst",query:n},o);function o(s,l){var c=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],s);if(c){var u=s.getViewRoot();u&&(n.direction=aboveViewRoot(u,c.node)?"rollUp":"drillDown"),s.resetViewRoot(c.node)}}}),a.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,r,o){n=extend({},n),r.eachComponent({mainType:"series",subType:"sunburst",query:n},s);function s(l){var c=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],l);c&&(n.dataIndex=c.node.dataIndex)}o.dispatchAction(extend(n,{type:"highlight"}))}),a.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,r,o){n=extend({},n),o.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s,l){var c=this;this.seriesModel=r,this.api=s,this.ecModel=o;var u=r.getData(),d=u.tree.root,f=r.getViewRoot(),v=this.group,g=r.get("renderLabelForZeroData"),y=[];f.eachNode(function(E){y.push(E)});var _=this._oldChildren||[];S(y,_),w(d,f),this._initEvents(),this._oldChildren=y;function S(E,P){if(E.length===0&&P.length===0)return;new DataDiffer(P,E,D,D).add(L).update(L).remove(curry$1(L,null)).execute();function D($){return $.getId()}function L($,O){var B=$==null?null:E[$],V=O==null?null:P[O];x(B,V)}}function x(E,P){if(!g&&E&&!E.getValue()&&(E=null),E!==d&&P!==d){if(P&&P.piece)E?(P.piece.updateData(!1,E,r,o,s),u.setItemGraphicEl(E.dataIndex,P.piece)):T(P);else if(E){var D=new SunburstPiece(E,r,o,s);v.add(D),u.setItemGraphicEl(E.dataIndex,D)}}}function T(E){E&&E.piece&&(v.remove(E.piece),E.piece=null)}function w(E,P){P.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,E,r,o,s):(c.virtualPiece=new SunburstPiece(E,r,o,s),v.add(c.virtualPiece)),P.piece.off("click"),c.virtualPiece.on("click",function(D){c._rootToNode(P.parentNode)})):c.virtualPiece&&(v.remove(c.virtualPiece),c.virtualPiece=null)}},n.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(o){var s=!1,l=r.seriesModel.getViewRoot();l.eachNode(function(c){if(!s&&c.piece&&c.piece===o.target){var u=c.getModel().get("nodeClick");if(u==="rootToNode")r._rootToNode(c);else if(u==="link"){var d=c.getModel(),f=d.get("link");if(f){var v=d.get("target",!0)||"_blank";windowOpen(f,v)}}s=!0}})})},n.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},n.prototype.containPoint=function(r,o){var s=o.getData(),l=s.getItemLayout(0);if(l){var c=r[0]-l.cx,u=r[1]-l.cy,d=Math.sqrt(c*c+u*u);return d<=l.r&&d>=l.r0}},n.type="sunburst",n}(ChartView),SunburstSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.ignoreStyleOnData=!0,r}return n.prototype.getInitialData=function(r,o){var s={name:r.name,children:r.data};completeTreeValue(s);var l=this._levelModels=map$1(r.levels||[],function(d){return new Model(d,this,o)},this),c=Tree.createTree(s,this,u);function u(d){d.wrapMethod("getItemModel",function(f,v){var g=c.getNodeByDataIndex(v),y=l[g.depth];return y&&(f.parentModel=y),f})}return c.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(r);return o.treePathInfo=wrapTreePathInfo(s,this),o},n.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n}(SeriesModel);function completeTreeValue(a){var n=0;each$f(a.children,function(o){completeTreeValue(o);var s=o.value;isArray$1(s)&&(s=s[0]),n+=s});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=n),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}var RADIAN=Math.PI/180;function sunburstLayout(a,n,r){n.eachSeriesByType(a,function(o){var s=o.get("center"),l=o.get("radius");isArray$1(l)||(l=[0,l]),isArray$1(s)||(s=[s,s]);var c=r.getWidth(),u=r.getHeight(),d=Math.min(c,u),f=parsePercent(s[0],c),v=parsePercent(s[1],u),g=parsePercent(l[0],d/2),y=parsePercent(l[1],d/2),_=-o.get("startAngle")*RADIAN,S=o.get("minAngle")*RADIAN,x=o.getData().tree.root,T=o.getViewRoot(),w=T.depth,E=o.get("sort");E!=null&&initChildren(T,E);var P=0;each$f(T.children,function(q){!isNaN(q.getValue())&&P++});var D=T.getValue(),L=Math.PI/(D||P)*2,$=T.depth>0,O=T.height-($?-1:1),B=(y-g)/(O||1),V=o.get("clockwise"),F=o.get("stillShowZeroSum"),U=V?1:-1,G=function(q,ie){if(q){var ee=ie;if(q!==x){var he=q.getValue(),pe=D===0&&F?L:he*L;pe<S&&(pe=S),ee=ie+U*pe;var ce=q.depth-w-($?-1:1),ye=g+B*ce,we=g+B*(ce+1),ge=o.getLevelModel(q);if(ge){var Se=ge.get("r0",!0),$e=ge.get("r",!0),oe=ge.get("radius",!0);oe!=null&&(Se=oe[0],$e=oe[1]),Se!=null&&(ye=parsePercent(Se,d/2)),$e!=null&&(we=parsePercent($e,d/2))}q.setLayout({angle:pe,startAngle:ie,endAngle:ee,clockwise:V,cx:f,cy:v,r0:ye,r:we})}if(q.children&&q.children.length){var me=0;each$f(q.children,function(_e){me+=G(_e,ie+me)})}return ee-ie}};if($){var W=g,j=g+B,K=Math.PI*2;x.setLayout({angle:K,startAngle:_,endAngle:_+K,clockwise:V,cx:f,cy:v,r0:W,r:j})}G(T,_)})}function initChildren(a,n){var r=a.children||[];a.children=sort(r,n),r.length&&each$f(a.children,function(o){initChildren(o,n)})}function sort(a,n){if(isFunction(n)){var r=map$1(a,function(s,l){var c=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return c}},index:l}});return r.sort(function(s,l){return n(s.params,l.params)}),map$1(r,function(s){return a[s.index]})}else{var o=n==="asc";return a.sort(function(s,l){var c=(s.getValue()-l.getValue())*(o?1:-1);return c===0?(s.dataIndex-l.dataIndex)*(o?-1:1):c})}}function sunburstVisual(a){var n={};function r(o,s,l){for(var c=o;c&&c.depth>1;)c=c.parentNode;var u=s.getColorFromPalette(c.name||c.dataIndex+"",n);return o.depth>1&&isString(u)&&(u=lift(u,(o.depth-1)/(l-1)*.5)),u}a.eachSeriesByType("sunburst",function(o){var s=o.getData(),l=s.tree;l.eachNode(function(c){var u=c.getModel(),d=u.getModel("itemStyle").getItemStyle();d.fill||(d.fill=r(c,o,l.root.height));var f=s.ensureUniqueItemVisual(c.dataIndex,"style");extend(f,d)})})}function install$s(a){a.registerChartView(SunburstView),a.registerSeriesModel(SunburstSeriesModel),a.registerLayout(curry$1(sunburstLayout,"sunburst")),a.registerProcessor(curry$1(dataFilter$1,"sunburst")),a.registerVisual(sunburstVisual),installSunburstAction(a)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(r,o){return createSeriesData(null,this)},n.prototype.getDataParams=function(r,o,s){var l=a.prototype.getDataParams.call(this,r,o);return s&&(l.info=customInnerStore(s).info),l},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n}(SeriesModel);function dataToCoordSize$3(a,n){return n=n||[0,0],map$1(["x","y"],function(r,o){var s=this.getAxis(r),l=n[o],c=a[o]/2;return s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-c)-s.dataToCoord(l+c))},this)}function cartesianPrepareCustom(a){var n=a.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$3,a)}}}function dataToCoordSize$2(a,n){return n=n||[0,0],map$1([0,1],function(r){var o=n[r],s=a[r]/2,l=[],c=[];return l[r]=o-s,c[r]=o+s,l[1-r]=c[1-r]=n[1-r],Math.abs(this.dataToPoint(l)[r]-this.dataToPoint(c)[r])},this)}function geoPrepareCustom(a){var n=a.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:a.getZoom()},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$2,a)}}}function dataToCoordSize$1(a,n){var r=this.getAxis(),o=n instanceof Array?n[0]:n,s=(a instanceof Array?a[0]:a)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(o-s)-r.dataToCoord(o+s))}function singlePrepareCustom(a){var n=a.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$1,a)}}}function dataToCoordSize(a,n){return n=n||[0,0],map$1(["Radius","Angle"],function(r,o){var s="get"+r+"Axis",l=this[s](),c=n[o],u=a[o]/2,d=l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(c-u)-l.dataToCoord(c+u));return r==="Angle"&&(d=d*Math.PI/180),d},this)}function polarPrepareCustom(a){var n=a.getRadiusAxis(),r=a.getAngleAxis(),o=n.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:o[1],r0:o[0]},api:{coord:function(s){var l=n.dataToRadius(s[0]),c=r.dataToAngle(s[1]),u=a.coordToPoint([l,c]);return u.push(l,c*Math.PI/180),u},size:bind$1(dataToCoordSize,a)}}}function calendarPrepareCustom(a){var n=a.getRect(),r=a.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(o,s){return a.dataToPoint(o,s)}}}}function isEC4CompatibleStyle(a,n,r,o){return a&&(a.legacy||a.legacy!==!1&&!r&&!o&&n!=="tspan"&&(n==="text"||hasOwn(a,"text")))}function convertFromEC4CompatibleStyle(a,n,r){var o=a,s,l,c;if(n==="text")c=o;else{c={},hasOwn(o,"text")&&(c.text=o.text),hasOwn(o,"rich")&&(c.rich=o.rich),hasOwn(o,"textFill")&&(c.fill=o.textFill),hasOwn(o,"textStroke")&&(c.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(c.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(c.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(c.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(c.fontWeight=o.fontWeight),l={type:"text",style:c,silent:!0},s={};var u=hasOwn(o,"textPosition");r?s.position=u?o.textPosition:"inside":u&&(s.position=o.textPosition),hasOwn(o,"textPosition")&&(s.position=o.textPosition),hasOwn(o,"textOffset")&&(s.offset=o.textOffset),hasOwn(o,"textRotation")&&(s.rotation=o.textRotation),hasOwn(o,"textDistance")&&(s.distance=o.textDistance)}return convertEC4CompatibleRichItem(c,a),each$f(c.rich,function(d){convertEC4CompatibleRichItem(d,d)}),{textConfig:s,textContent:l}}function convertEC4CompatibleRichItem(a,n){n&&(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(a.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(a.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(a.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(a.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(a.width=n.textWidth),hasOwn(n,"textHeight")&&(a.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(a.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(a.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(a.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(a.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(a.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(a.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(a.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(a.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(a.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(a,n,r){var o=a;o.textPosition=o.textPosition||r.position||"inside",r.offset!=null&&(o.textOffset=r.offset),r.rotation!=null&&(o.textRotation=r.rotation),r.distance!=null&&(o.textDistance=r.distance);var s=o.textPosition.indexOf("inside")>=0,l=a.fill||"#000";convertToEC4RichItem(o,n);var c=o.textFill==null;return s?c&&(o.textFill=r.insideFill||"#fff",!o.textStroke&&r.insideStroke&&(o.textStroke=r.insideStroke),!o.textStroke&&(o.textStroke=l),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(c&&(o.textFill=a.fill||r.outsideFill||"#000"),!o.textStroke&&r.outsideStroke&&(o.textStroke=r.outsideStroke)),o.text=n.text,o.rich=n.rich,each$f(n.rich,function(u){convertToEC4RichItem(u,u)}),o}function convertToEC4RichItem(a,n){n&&(hasOwn(n,"fill")&&(a.textFill=n.fill),hasOwn(n,"stroke")&&(a.textStroke=n.fill),hasOwn(n,"lineWidth")&&(a.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(a.font=n.font),hasOwn(n,"fontStyle")&&(a.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(a.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(a.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(a.fontFamily=n.fontFamily),hasOwn(n,"align")&&(a.textAlign=n.align),hasOwn(n,"verticalAlign")&&(a.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(a.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(a.textWidth=n.width),hasOwn(n,"height")&&(a.textHeight=n.height),hasOwn(n,"backgroundColor")&&(a.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(a.textPadding=n.padding),hasOwn(n,"borderColor")&&(a.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(a.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(a.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(a.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(a.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(a.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(a.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(a.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(a.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(a.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(a.textShadowOffsetY=n.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(a,n){return a[n]=1,a},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(a,n,r,o,s){var l=a+"Animation",c=getAnimationConfig(a,o,s)||{},u=transitionInnerStore(n).userDuring;return c.duration>0&&(c.during=u?bind$1(duringCall,{el:n,userDuring:u}):null,c.setToFinal=!0,c.scope=a),extend(c,r[l]),c}function applyUpdateTransition(a,n,r,o){o=o||{};var s=o.dataIndex,l=o.isInit,c=o.clearStyle,u=r.isAnimationEnabled(),d=transitionInnerStore(a),f=n.style;d.userDuring=n.during;var v={},g={};if(prepareTransformAllPropsFinal(a,n,g),prepareShapeOrExtraAllPropsFinal("shape",n,g),prepareShapeOrExtraAllPropsFinal("extra",n,g),!l&&u&&(prepareTransformTransitionFrom(a,n,v),prepareShapeOrExtraTransitionFrom("shape",a,n,v),prepareShapeOrExtraTransitionFrom("extra",a,n,v),prepareStyleTransitionFrom(a,n,f,v)),g.style=f,applyPropsDirectly(a,g,c),applyMiscProps(a,n),u)if(l){var y={};each$f(ELEMENT_ANIMATABLE_PROPS,function(S){var x=S?n[S]:n;x&&x.enterFrom&&(S&&(y[S]=y[S]||{}),extend(S?y[S]:y,x.enterFrom))});var _=getElementAnimationConfig("enter",a,n,r,s);_.duration>0&&a.animateFrom(y,_)}else applyPropsTransition(a,n,s||0,r,v);updateLeaveTo(a,n),f?a.dirty():a.markRedraw()}function updateLeaveTo(a,n){for(var r=transitionInnerStore(a).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var s=ELEMENT_ANIMATABLE_PROPS[o],l=s?n[s]:n;l&&l.leaveTo&&(r||(r=transitionInnerStore(a).leaveToProps={}),s&&(r[s]=r[s]||{}),extend(s?r[s]:r,l.leaveTo))}}function applyLeaveTransition(a,n,r,o){if(a){var s=a.parent,l=transitionInnerStore(a).leaveToProps;if(l){var c=getElementAnimationConfig("update",a,n,r,0);c.done=function(){s.remove(a)},a.animateTo(l,c)}else s.remove(a)}}function isTransitionAll(a){return a==="all"}function applyPropsDirectly(a,n,r){var o=n.style;if(!a.isGroup&&o){if(r){a.useStyle({});for(var s=a.animators,l=0;l<s.length;l++){var c=s[l];c.targetName==="style"&&c.changeTarget(a.style)}}a.setStyle(o)}n&&(n.style=null,n&&a.attr(n),n.style=o)}function applyPropsTransition(a,n,r,o,s){if(s){var l=getElementAnimationConfig("update",a,n,o,r);l.duration>0&&a.animateFrom(s,l)}}function applyMiscProps(a,n){hasOwn(n,"silent")&&(a.silent=n.silent),hasOwn(n,"ignore")&&(a.ignore=n.ignore),a instanceof Displayable&&hasOwn(n,"invisible")&&(a.invisible=n.invisible),a instanceof Path&&hasOwn(n,"autoBatch")&&(a.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(a,n){return tmpDuringScope.el[a]=n,this},getTransform:function(a){return tmpDuringScope.el[a]},setShape:function(a,n){var r=tmpDuringScope.el,o=r.shape||(r.shape={});return o[a]=n,r.dirtyShape&&r.dirtyShape(),this},getShape:function(a){var n=tmpDuringScope.el.shape;if(n)return n[a]},setStyle:function(a,n){var r=tmpDuringScope.el,o=r.style;return o&&(o[a]=n,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(a){var n=tmpDuringScope.el.style;if(n)return n[a]},setExtra:function(a,n){var r=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return r[a]=n,this},getExtra:function(a){var n=tmpDuringScope.el.extra;if(n)return n[a]}};function duringCall(){var a=this,n=a.el;if(n){var r=transitionInnerStore(n).userDuring,o=a.userDuring;if(r!==o){a.el=a.userDuring=null;return}tmpDuringScope.el=n,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(a,n,r,o){var s=r[a];if(s){var l=n[a],c;if(l){var u=r.transition,d=s.transition;if(d)if(!c&&(c=o[a]={}),isTransitionAll(d))extend(c,l);else for(var f=normalizeToArray(d),v=0;v<f.length;v++){var g=f[v],y=l[g];c[g]=y}else if(isTransitionAll(u)||indexOf(u,a)>=0){!c&&(c=o[a]={});for(var _=keys(l),v=0;v<_.length;v++){var g=_[v],y=l[g];isNonStyleTransitionEnabled(s[g],y)&&(c[g]=y)}}}}}function prepareShapeOrExtraAllPropsFinal(a,n,r){var o=n[a];if(o)for(var s=r[a]={},l=keys(o),c=0;c<l.length;c++){var u=l[c];s[u]=cloneValue(o[u])}}function prepareTransformTransitionFrom(a,n,r){for(var o=n.transition,s=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),l=0;l<s.length;l++){var c=s[l];if(!(c==="style"||c==="shape"||c==="extra")){var u=a[c];r[c]=u}}}function prepareTransformAllPropsFinal(a,n,r){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var s=LEGACY_TRANSFORM_PROPS[o],l=LEGACY_TRANSFORM_PROPS_MAP[s],c=n[s];c&&(r[l[0]]=c[0],r[l[1]]=c[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var u=TRANSFORMABLE_PROPS[o];n[u]!=null&&(r[u]=n[u])}}function prepareStyleTransitionFrom(a,n,r,o){if(r){var s=a.style,l;if(s){var c=r.transition,u=n.transition;if(c&&!isTransitionAll(c)){var d=normalizeToArray(c);!l&&(l=o.style={});for(var f=0;f<d.length;f++){var v=d[f],g=s[v];l[v]=g}}else if(a.getAnimationStyleProps&&(isTransitionAll(u)||isTransitionAll(c)||indexOf(u,"style")>=0)){var y=a.getAnimationStyleProps(),_=y?y.style:null;if(_){!l&&(l=o.style={});for(var S=keys(r),f=0;f<S.length;f++){var v=S[f];if(_[v]){var g=s[v];l[v]=g}}}}}}}function isNonStyleTransitionEnabled(a,n){return isArrayLike(a)?a!==n:a!=null&&isFinite(a)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(a){a.stopAnimation("keyframe"),a.attr(getStateToRestore(a))}function applyKeyframeAnimation(a,n,r){if(!(!r.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(u){applyKeyframeAnimation(a,u,r)});return}var o=n.keyframes,s=n.duration;if(r&&s==null){var l=getAnimationConfig("enter",r,0);s=l&&l.duration}if(!(!o||!s)){var c=getStateToRestore(a);each$f(ELEMENT_ANIMATABLE_PROPS,function(u){if(!(u&&!a[u])){var d;o.sort(function(f,v){return f.percent-v.percent}),each$f(o,function(f){var v=a.animators,g=u?f[u]:f;if(g){var y=keys(g);if(u||(y=filter(y,function(x){return indexOf(KEYFRAME_EXCLUDE_KEYS,x)<0})),!!y.length){d||(d=a.animate(u,n.loop,!0),d.scope="keyframe");for(var _=0;_<v.length;_++)v[_]!==d&&v[_].targetName===d.targetName&&v[_].stopTracks(y);u&&(c[u]=c[u]||{});var S=u?c[u]:c;each$f(y,function(x){S[x]=((u?a[u]:a)||{})[x]}),d.whenWithKeys(s*f.percent,g,y,f.easing)}}}),d&&d.delay(n.delay||0).duration(s).start(n.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(a){return a instanceof Path}function isDisplayable(a){return a instanceof Displayable}function copyElement(a,n){n.copyTransform(a),isDisplayable(n)&&isDisplayable(a)&&(n.setStyle(a.style),n.z=a.z,n.z2=a.z2,n.zlevel=a.zlevel,n.invisible=a.invisible,n.ignore=a.ignore,isPath(n)&&isPath(a)&&n.setShape(a.shape))}var CustomChartView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s,l){this._progressiveEls=null;var c=this._data,u=r.getData(),d=this.group,f=makeRenderItem(r,u,o,s);c||d.removeAll(),u.diff(c).add(function(g){createOrUpdateItem(s,null,g,f(g,l),r,d,u)}).remove(function(g){var y=c.getItemGraphicEl(g);y&&applyLeaveTransition(y,customInnerStore(y).option,r)}).update(function(g,y){var _=c.getItemGraphicEl(y);createOrUpdateItem(s,_,g,f(g,l),r,d,u)}).execute();var v=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;v?d.setClipPath(v):d.removeClipPath(),this._data=u},n.prototype.incrementalPrepareRender=function(r,o,s){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(r,o,s,l,c){var u=o.getData(),d=makeRenderItem(o,u,s,l),f=this._progressiveEls=[];function v(_){_.isGroup||(_.incremental=!0,_.ensureState("emphasis").hoverLayer=!0)}for(var g=r.start;g<r.end;g++){var y=createOrUpdateItem(null,null,g,d(g,c),o,this.group,u);y&&(y.traverse(v),f.push(y))}},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype.filterForExposedEvent=function(r,o,s,l){var c=o.element;if(c==null||s.name===c)return!0;for(;(s=s.__hostTarget||s.parent)&&s!==this.group;)if(s.name===c)return!0;return!1},n.type="custom",n}(ChartView);function createEl$1(a){var n=a.type,r;if(n==="path"){var o=a.shape,s=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,l=getPathData(o);r=makePath(l,null,s,o.layout||"center"),customInnerStore(r).customPathData=l}else if(n==="image")r=new ZRImage({}),customInnerStore(r).customImagePath=a.style.image;else if(n==="text")r=new ZRText({});else if(n==="group")r=new Group$4;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(n);if(!c){var u="";throwError(u)}r=new c}return customInnerStore(r).customGraphicType=n,r.name=a.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function updateElNormal(a,n,r,o,s,l,c){stopPreviousKeyframeAnimationAndRestore(n);var u=s&&s.normal.cfg;u&&n.setTextConfig(u),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var d=o&&o.style;if(d){if(n.type==="text"){var f=d;hasOwn(f,"textFill")&&(f.fill=f.textFill),hasOwn(f,"textStroke")&&(f.stroke=f.textStroke)}var v=void 0,g=isPath(n)?d.decal:null;a&&g&&(g.dirty=!0,v=createOrUpdatePatternFromDecal(g,a)),d.__decalPattern=v}if(isDisplayable(n)&&d){var v=d.__decalPattern;v&&(d.decal=v)}applyUpdateTransition(n,o,l,{dataIndex:r,isInit:c,clearStyle:!0}),applyKeyframeAnimation(n,o.keyframeAnimation,l)}function updateElOnState(a,n,r,o,s){var l=n.isGroup?null:n,c=s&&s[a].cfg;if(l){var u=l.ensureState(a);if(o===!1){var d=l.getState(a);d&&(d.style=null)}else u.style=o||null;c&&(u.textConfig=c),setDefaultStateProxy(l)}}function updateZ(a,n,r){if(!a.isGroup){var o=a,s=r.currentZ,l=r.currentZLevel;o.z=s,o.zlevel=l;var c=n.z2;c!=null&&(o.z2=c||0);for(var u=0;u<STATES.length;u++)updateZForEachState(o,n,STATES[u])}}function updateZForEachState(a,n,r){var o=r===NORMAL,s=o?n:retrieveStateOption(n,r),l=s?s.z2:null,c;l!=null&&(c=o?a:a.ensureState(r),c.z2=l||0)}function makeRenderItem(a,n,r,o){var s=a.get("renderItem"),l=a.coordinateSystem,c={};l&&(c=l.prepareCustoms?l.prepareCustoms(l):prepareCustoms[l.type](l));for(var u=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:D,style:$,ordinalRawValue:L,styleEmphasis:O,visual:F,barLayout:U,currentSeriesIndices:G,font:W},c.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:c.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(a.getData())},f,v,g={},y={},_={},S={},x=0;x<STATES.length;x++){var T=STATES[x];_[T]=a.getModel(PATH_ITEM_STYLE[T]),S[T]=a.getModel(PATH_LABEL[T])}function w(j){return j===f?v||(v=n.getItemModel(j)):n.getItemModel(j)}function E(j,K){return n.hasItemOption?j===f?g[K]||(g[K]=w(j).getModel(PATH_ITEM_STYLE[K])):w(j).getModel(PATH_ITEM_STYLE[K]):_[K]}function P(j,K){return n.hasItemOption?j===f?y[K]||(y[K]=w(j).getModel(PATH_LABEL[K])):w(j).getModel(PATH_LABEL[K]):S[K]}return function(j,K){return f=j,v=null,g={},y={},s&&s(defaults({dataIndexInside:j,dataIndex:n.getRawIndex(j),actionType:K?K.type:null},d),u)};function D(j,K){return K==null&&(K=f),n.getStore().get(n.getDimensionIndex(j||0),K)}function L(j,K){K==null&&(K=f),j=j||0;var q=n.getDimensionInfo(j);if(!q){var ie=n.getDimensionIndex(j);return ie>=0?n.getStore().get(ie,K):void 0}var ee=n.get(q.name,K),he=q&&q.ordinalMeta;return he?he.categories[ee]:ee}function $(j,K){K==null&&(K=f);var q=n.getItemVisual(K,"style"),ie=q&&q.fill,ee=q&&q.opacity,he=E(K,NORMAL).getItemStyle();ie!=null&&(he.fill=ie),ee!=null&&(he.opacity=ee);var pe={inheritColor:isString(ie)?ie:"#000"},ce=P(K,NORMAL),ye=createTextStyle(ce,null,pe,!1,!0);ye.text=ce.getShallow("show")?retrieve2(a.getFormattedLabel(K,NORMAL),getDefaultLabel(n,K)):null;var we=createTextConfig(ce,pe,!1);return V(j,he),he=convertToEC4StyleForCustomSerise(he,ye,we),j&&B(he,j),he.legacy=!0,he}function O(j,K){K==null&&(K=f);var q=E(K,EMPHASIS).getItemStyle(),ie=P(K,EMPHASIS),ee=createTextStyle(ie,null,null,!0,!0);ee.text=ie.getShallow("show")?retrieve3(a.getFormattedLabel(K,EMPHASIS),a.getFormattedLabel(K,NORMAL),getDefaultLabel(n,K)):null;var he=createTextConfig(ie,null,!0);return V(j,q),q=convertToEC4StyleForCustomSerise(q,ee,he),j&&B(q,j),q.legacy=!0,q}function B(j,K){for(var q in K)hasOwn(K,q)&&(j[q]=K[q])}function V(j,K){j&&(j.textFill&&(K.textFill=j.textFill),j.textPosition&&(K.textPosition=j.textPosition))}function F(j,K){if(K==null&&(K=f),hasOwn(STYLE_VISUAL_TYPE,j)){var q=n.getItemVisual(K,"style");return q?q[STYLE_VISUAL_TYPE[j]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,j))return n.getItemVisual(K,j)}function U(j){if(l.type==="cartesian2d"){var K=l.getBaseAxis();return getLayoutOnAxis(defaults({axis:K},j))}}function G(){return r.getCurrentSeriesIndices()}function W(j){return getFont(j,r)}}function wrapEncodeDef(a){var n={};return each$f(a.dimensions,function(r){var o=a.getDimensionInfo(r);if(!o.isExtraCoord){var s=o.coordDim,l=n[s]=n[s]||[];l[o.coordDimIndex]=a.getDimensionIndex(r)}}),n}function createOrUpdateItem(a,n,r,o,s,l,c){if(!o){l.remove(n);return}var u=doCreateOrUpdateEl(a,n,r,o,s,l);return u&&c.setItemGraphicEl(r,u),u&&toggleHoverEmphasis(u,o.focus,o.blurScope,o.emphasisDisabled),u}function doCreateOrUpdateEl(a,n,r,o,s,l){var c=-1,u=n;n&&doesElNeedRecreate(n,o,s)&&(c=indexOf(l.childrenRef(),n),n=null);var d=!n,f=n;f?f.clearStates():(f=createEl$1(o),u&&copyElement(u,f)),o.morph===!1?f.disableMorphing=!0:f.disableMorphing&&(f.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(f,r,o,s,d,attachedTxInfoTmp),doCreateOrUpdateClipPath(f,r,o,s,d),updateElNormal(a,f,r,o,attachedTxInfoTmp,s,d),hasOwn(o,"info")&&(customInnerStore(f).info=o.info);for(var v=0;v<STATES.length;v++){var g=STATES[v];if(g!==NORMAL){var y=retrieveStateOption(o,g),_=retrieveStyleOptionOnState(o,y,g);updateElOnState(g,f,y,_,attachedTxInfoTmp)}}return updateZ(f,o,s),o.type==="group"&&mergeChildren(a,f,r,o,s),c>=0?l.replaceAt(f,c):l.add(f),f}function doesElNeedRecreate(a,n,r){var o=customInnerStore(a),s=n.type,l=n.shape,c=n.style;return r.isUniversalTransitionEnabled()||s!=null&&s!==o.customGraphicType||s==="path"&&hasOwnPathData(l)&&getPathData(l)!==o.customPathData||s==="image"&&hasOwn(c,"image")&&c.image!==o.customImagePath}function doCreateOrUpdateClipPath(a,n,r,o,s){var l=r.clipPath;if(l===!1)a&&a.getClipPath()&&a.removeClipPath();else if(l){var c=a.getClipPath();c&&doesElNeedRecreate(c,l,o)&&(c=null),c||(c=createEl$1(l),a.setClipPath(c)),updateElNormal(null,c,n,l,null,o,s)}}function doCreateOrUpdateAttachedTx(a,n,r,o,s,l){if(!a.isGroup){processTxInfo(r,null,l),processTxInfo(r,EMPHASIS,l);var c=l.normal.conOpt,u=l.emphasis.conOpt,d=l.blur.conOpt,f=l.select.conOpt;if(c!=null||u!=null||f!=null||d!=null){var v=a.getTextContent();if(c===!1)v&&a.removeTextContent();else{c=l.normal.conOpt=c||{type:"text"},v?v.clearStates():(v=createEl$1(c),a.setTextContent(v)),updateElNormal(null,v,n,c,null,o,s);for(var g=c&&c.style,y=0;y<STATES.length;y++){var _=STATES[y];if(_!==NORMAL){var S=l[_].conOpt;updateElOnState(_,v,S,retrieveStyleOptionOnState(c,S,_),null)}}g?v.dirty():v.markRedraw()}}}}function processTxInfo(a,n,r){var o=n?retrieveStateOption(a,n):a,s=n?retrieveStyleOptionOnState(a,o,EMPHASIS):a.style,l=a.type,c=o?o.textConfig:null,u=a.textContent,d=u?n?retrieveStateOption(u,n):u:null;if(s&&(r.isLegacy||isEC4CompatibleStyle(s,l,!!c,!!d))){r.isLegacy=!0;var f=convertFromEC4CompatibleStyle(s,l,!n);!c&&f.textConfig&&(c=f.textConfig),!d&&f.textContent&&(d=f.textContent)}if(!n&&d){var v=d;!v.type&&(v.type="text")}var g=n?r[n]:r.normal;g.cfg=c,g.conOpt=d}function retrieveStateOption(a,n){return n?a?a[n]:null:a}function retrieveStyleOptionOnState(a,n,r){var o=n&&n.style;return o==null&&r===EMPHASIS&&a&&(o=a.styleEmphasis),o}function mergeChildren(a,n,r,o,s){var l=o.children,c=l?l.length:0,u=o.$mergeChildren,d=u==="byName"||o.diffChildrenByName,f=u===!1;if(!(!c&&!d&&!f)){if(d){diffGroupChildren({api:a,oldChildren:n.children()||[],newChildren:l||[],dataIndex:r,seriesModel:s,group:n});return}f&&n.removeAll();for(var v=0;v<c;v++){var g=l[v],y=n.childAt(v);g?(g.ignore==null&&(g.ignore=!1),doCreateOrUpdateEl(a,y,r,g,s,n)):y.ignore=!0}for(var _=n.childCount()-1;_>=v;_--){var S=n.childAt(_);removeChildFromGroup(n,S,s)}}}function removeChildFromGroup(a,n,r){n&&applyLeaveTransition(n,customInnerStore(a).option,r)}function diffGroupChildren(a){new DataDiffer(a.oldChildren,a.newChildren,getKey,getKey,a).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,n){var r=a&&a.name;return r??GROUP_DIFF_PREFIX+n}function processAddUpdate(a,n){var r=this.context,o=a!=null?r.newChildren[a]:null,s=n!=null?r.oldChildren[n]:null;doCreateOrUpdateEl(r.api,s,r.dataIndex,o,r.seriesModel,r.group)}function processRemove(a){var n=this.context,r=n.oldChildren[a];r&&applyLeaveTransition(r,customInnerStore(r).option,n.seriesModel)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(hasOwn(a,"pathData")||hasOwn(a,"d"))}function install$r(a){a.registerChartView(CustomChartView),a.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(n,r,o,s){var l=r.get("value"),c=r.get("status");if(this._axisModel=n,this._axisPointerModel=r,this._api=o,!(!s&&this._lastValue===l&&this._lastStatus===c)){this._lastValue=l,this._lastStatus=c;var u=this._group,d=this._handle;if(!c||c==="hide"){u&&u.hide(),d&&d.hide();return}u&&u.show(),d&&d.show();var f={};this.makeElOption(f,l,n,r,o);var v=f.graphicKey;v!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=v;var g=this._moveAnimation=this.determineAnimation(n,r);if(!u)u=this._group=new Group$4,this.createPointerEl(u,f,n,r),this.createLabelEl(u,f,n,r),o.getZr().add(u);else{var y=curry$1(updateProps,r,g);this.updatePointerEl(u,f,y),this.updateLabelEl(u,f,y,r)}updateMandatoryProps(u,r,!0),this._renderHandle(l)}},a.prototype.remove=function(n){this.clear(n)},a.prototype.dispose=function(n){this.clear(n)},a.prototype.determineAnimation=function(n,r){var o=r.get("animation"),s=n.axis,l=s.type==="category",c=r.get("snap");if(!c&&!l)return!1;if(o==="auto"||o==null){var u=this.animationThreshold;if(l&&s.getBandWidth()>u)return!0;if(c){var d=getAxisInfo$1(n).seriesDataCount,f=s.getExtent();return Math.abs(f[0]-f[1])/d>u}return!1}return o===!0},a.prototype.makeElOption=function(n,r,o,s,l){},a.prototype.createPointerEl=function(n,r,o,s){var l=r.pointer;if(l){var c=inner$b(n).pointerEl=new graphic[l.type](clone$1(r.pointer));n.add(c)}},a.prototype.createLabelEl=function(n,r,o,s){if(r.label){var l=inner$b(n).labelEl=new ZRText(clone$1(r.label));n.add(l),updateLabelShowHide(l,s)}},a.prototype.updatePointerEl=function(n,r,o){var s=inner$b(n).pointerEl;s&&r.pointer&&(s.setStyle(r.pointer.style),o(s,{shape:r.pointer.shape}))},a.prototype.updateLabelEl=function(n,r,o,s){var l=inner$b(n).labelEl;l&&(l.setStyle(r.label.style),o(l,{x:r.label.x,y:r.label.y}),updateLabelShowHide(l,s))},a.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,o=this._api.getZr(),s=this._handle,l=r.getModel("handle"),c=r.get("status");if(!l.get("show")||!c||c==="hide"){s&&o.remove(s),this._handle=null;return}var u;this._handle||(u=!0,s=this._handle=createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){stop(f.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(s)),updateMandatoryProps(s,r,!1),s.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=l.get("size");isArray$1(d)||(d=[d,d]),s.scaleX=d[0]/2,s.scaleY=d[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,u)}},a.prototype._moveHandleToValue=function(n,r){updateProps(this._axisPointerModel,!r&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(n,r){var o=this._handle;if(o){this._dragging=!0;var s=this.updateHandleTransform(getHandleTransProps(o),[n,r],this._axisModel,this._axisPointerModel);this._payloadInfo=s,o.stopAnimation(),o.attr(getHandleTransProps(s)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var r=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var r=n.getZr(),o=this._group,s=this._handle;r&&o&&(this._lastGraphicKey=null,o&&r.remove(o),s&&r.remove(s),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(n,r,o){return o=o||0,{x:n[o],y:n[1-o],width:r[o],height:r[1-o]}},a}();function updateProps(a,n,r,o){propsEqual(inner$b(r).lastProp,o)||(inner$b(r).lastProp=o,n?updateProps$1(r,o,a):(r.stopAnimation(),r.attr(o)))}function propsEqual(a,n){if(isObject$3(a)&&isObject$3(n)){var r=!0;return each$f(n,function(o,s){r=r&&propsEqual(a[s],o)}),!!r}else return a===n}function updateLabelShowHide(a,n){a[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function updateMandatoryProps(a,n,r){var o=n.get("z"),s=n.get("zlevel");a&&a.traverse(function(l){l.type!=="group"&&(o!=null&&(l.z=o),s!=null&&(l.zlevel=s),l.silent=r)})}function buildElStyle(a){var n=a.get("type"),r=a.getModel(n+"Style"),o;return n==="line"?(o=r.getLineStyle(),o.fill=null):n==="shadow"&&(o=r.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(a,n,r,o,s){var l=r.get("value"),c=getValueLabel(l,n.axis,n.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),u=r.getModel("label"),d=normalizeCssArray(u.get("padding")||0),f=u.getFont(),v=getBoundingRect(c,f),g=s.position,y=v.width+d[1]+d[3],_=v.height+d[0]+d[2],S=s.align;S==="right"&&(g[0]-=y),S==="center"&&(g[0]-=y/2);var x=s.verticalAlign;x==="bottom"&&(g[1]-=_),x==="middle"&&(g[1]-=_/2),confineInContainer(g,y,_,o);var T=u.get("backgroundColor");(!T||T==="auto")&&(T=n.get(["axisLine","lineStyle","color"])),a.label={x:g[0],y:g[1],style:createTextStyle(u,{text:c,font:f,fill:u.getTextColor(),padding:d,backgroundColor:T}),z2:10}}function confineInContainer(a,n,r,o){var s=o.getWidth(),l=o.getHeight();a[0]=Math.min(a[0]+n,s)-n,a[1]=Math.min(a[1]+r,l)-r,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function getValueLabel(a,n,r,o,s){a=n.scale.parse(a);var l=n.scale.getLabel({value:a},{precision:s.precision}),c=s.formatter;if(c){var u={value:getAxisRawValue(n,{value:a}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(o,function(d){var f=r.getSeriesByIndex(d.seriesIndex),v=d.dataIndexInside,g=f&&f.getDataParams(v);g&&u.seriesData.push(g)}),isString(c)?l=c.replace("{value}",l):isFunction(c)&&(l=c(u))}return l}function getTransformedPosition(a,n,r){var o=create$1();return rotate(o,o,r.rotation),translate(o,o,r.position),applyTransform([a.dataToCoord(n),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(a,n,r,o,s,l){var c=AxisBuilder.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=s.get(["label","margin"]),buildLabelElOption(n,o,s,l,{position:getTransformedPosition(o.axis,a,r),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(a,n,r){return r=r||0,{x1:a[r],y1:a[1-r],x2:n[r],y2:n[1-r]}}function makeRectShape(a,n,r){return r=r||0,{x:a[r],y:a[1-r],width:n[r],height:n[1-r]}}function makeSectorShape(a,n,r,o,s,l){return{cx:a,cy:n,r0:r,r:o,startAngle:s,endAngle:l,clockwise:!0}}var CartesianAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,s,l,c){var u=s.axis,d=u.grid,f=l.get("type"),v=getCartesian(d,u).getOtherAxis(u).getGlobalExtent(),g=u.toGlobalCoord(u.dataToCoord(o,!0));if(f&&f!=="none"){var y=buildElStyle(l),_=pointerShapeBuilder$2[f](u,g,v);_.style=y,r.graphicKey=_.type,r.pointer=_}var S=layout$2(d.model,s);buildCartesianSingleLabelElOption(o,r,S,s,l,c)},n.prototype.getHandleTransform=function(r,o,s){var l=layout$2(o.axis.grid.model,o,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,l);return{x:c[0],y:c[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(r,o,s,l){var c=s.axis,u=c.grid,d=c.getGlobalExtent(!0),f=getCartesian(u,c).getOtherAxis(c).getGlobalExtent(),v=c.dim==="x"?0:1,g=[r.x,r.y];g[v]+=o[v],g[v]=Math.min(d[1],g[v]),g[v]=Math.max(d[0],g[v]);var y=(f[1]+f[0])/2,_=[y,y];_[v]=g[v];var S=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:r.rotation,cursorPoint:_,tooltipOption:S[v]}},n}(BaseAxisPointer);function getCartesian(a,n){var r={};return r[n.dim+"AxisIndex"]=n.index,a.getCartesian(r)}var pointerShapeBuilder$2={line:function(a,n,r){var o=makeLineShape([n,r[0]],[n,r[1]],getAxisDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,n,r){var o=Math.max(1,a.getBandWidth()),s=r[1]-r[0];return{type:"Rect",shape:makeRectShape([n-o/2,r[0]],[o,s],getAxisDimIndex(a))}}};function getAxisDimIndex(a){return a.dim==="x"?0:1}var AxisPointerModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register$1(a,n,r){if(!env.node){var o=n.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,n);var s=inner$a(o).records[a]||(inner$a(o).records[a]={});s.handler=r}}function initGlobalListeners(a,n){if(inner$a(a).initialized)return;inner$a(a).initialized=!0,r("click",curry$1(doEnter,"click")),r("mousemove",curry$1(doEnter,"mousemove")),r("globalout",onLeave);function r(o,s){a.on(o,function(l){var c=makeDispatchAction$1(n);each$8(inner$a(a).records,function(u){u&&s(u,l,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,n)})}}function dispatchTooltipFinally(a,n){var r=a.showTip.length,o=a.hideTip.length,s;r?s=a.showTip[r-1]:o&&(s=a.hideTip[o-1]),s&&(s.dispatchAction=null,n.dispatchAction(s))}function onLeave(a,n,r){a.handler("leave",null,r)}function doEnter(a,n,r,o){n.handler(a,r,o)}function makeDispatchAction$1(a){var n={showTip:[],hideTip:[]},r=function(o){var s=n[o.type];s?s.push(o):(o.dispatchAction=r,a.dispatchAction(o))};return{dispatchAction:r,pendings:n}}function unregister(a,n){if(!env.node){var r=n.getZr(),o=(inner$a(r).records||{})[a];o&&(inner$a(r).records[a]=null)}}var AxisPointerView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=o.getComponent("tooltip"),c=r.get("triggerOn")||l&&l.get("triggerOn")||"mousemove|click";register$1("axisPointer",s,function(u,d,f){c!=="none"&&(u==="leave"||c.indexOf(u)>=0)&&f({type:"updateAxisPointer",currTrigger:u,x:d&&d.offsetX,y:d&&d.offsetY})})},n.prototype.remove=function(r,o){unregister("axisPointer",o)},n.prototype.dispose=function(r,o){unregister("axisPointer",o)},n.type="axisPointer",n}(ComponentView);function findPointFromSeries(a,n){var r=[],o=a.seriesIndex,s;if(o==null||!(s=n.getSeriesByIndex(o)))return{point:[]};var l=s.getData(),c=queryDataIndex(l,a);if(c==null||c<0||isArray$1(c))return{point:[]};var u=l.getItemGraphicEl(c),d=s.coordinateSystem;if(s.getTooltipPosition)r=s.getTooltipPosition(c)||[];else if(d&&d.dataToPoint)if(a.isStacked){var f=d.getBaseAxis(),v=d.getOtherAxis(f),g=v.dim,y=f.dim,_=g==="x"||g==="radius"?1:0,S=l.mapDimension(y),x=[];x[_]=l.get(S,c),x[1-_]=l.get(l.getCalculationInfo("stackResultDimension"),c),r=d.dataToPoint(x)||[]}else r=d.dataToPoint(l.getValues(map$1(d.dimensions,function(w){return l.mapDimension(w)}),c))||[];else if(u){var T=u.getBoundingRect().clone();T.applyTransform(u.transform),r=[T.x+T.width/2,T.y+T.height/2]}return{point:r,el:u}}var inner$9=makeInner();function axisTrigger(a,n,r){var o=a.currTrigger,s=[a.x,a.y],l=a,c=a.dispatchAction||bind$1(r.dispatchAction,r),u=n.getComponent("axisPointer").coordSysAxesInfo;if(u){illegalPoint(s)&&(s=findPointFromSeries({seriesIndex:l.seriesIndex,dataIndex:l.dataIndex},n).point);var d=illegalPoint(s),f=l.axesInfo,v=u.axesInfo,g=o==="leave"||illegalPoint(s),y={},_={},S={list:[],map:{}},x={showPointer:curry$1(showPointer,_),showTooltip:curry$1(showTooltip,S)};each$f(u.coordSysMap,function(w,E){var P=d||w.containPoint(s);each$f(u.coordSysAxesInfo[E],function(D,L){var $=D.axis,O=findInputAxisInfo(f,D);if(!g&&P&&(!f||O)){var B=O&&O.value;B==null&&!d&&(B=$.pointToData(s)),B!=null&&processOnAxis(D,B,x,!1,y)}})});var T={};return each$f(v,function(w,E){var P=w.linkGroup;P&&!_[E]&&each$f(P.axesInfo,function(D,L){var $=_[L];if(D!==w&&$){var O=$.value;P.mapper&&(O=w.axis.scale.parse(P.mapper(O,makeMapperParam(D),makeMapperParam(w)))),T[w.key]=O}})}),each$f(T,function(w,E){processOnAxis(v[E],w,x,!0,y)}),updateModelActually(_,v,y),dispatchTooltipActually(S,s,a,c),dispatchHighDownActually(v,c,r),y}}function processOnAxis(a,n,r,o,s){var l=a.axis;if(!(l.scale.isBlank()||!l.containData(n))){if(!a.involveSeries){r.showPointer(a,n);return}var c=buildPayloadsBySeries(n,a),u=c.payloadBatch,d=c.snapToValue;u[0]&&s.seriesIndex==null&&extend(s,u[0]),!o&&a.snap&&l.containData(d)&&d!=null&&(n=d),r.showPointer(a,n,u),r.showTooltip(a,c,d)}}function buildPayloadsBySeries(a,n){var r=n.axis,o=r.dim,s=a,l=[],c=Number.MAX_VALUE,u=-1;return each$f(n.seriesModels,function(d,f){var v=d.getData().mapDimensionsAll(o),g,y;if(d.getAxisTooltipData){var _=d.getAxisTooltipData(v,a,r);y=_.dataIndices,g=_.nestestValue}else{if(y=d.getData().indicesOfNearest(v[0],a,r.type==="category"?.5:null),!y.length)return;g=d.getData().get(v[0],y[0])}if(!(g==null||!isFinite(g))){var S=a-g,x=Math.abs(S);x<=c&&((x<c||S>=0&&u<0)&&(c=x,u=S,s=g,l.length=0),each$f(y,function(T){l.push({seriesIndex:d.seriesIndex,dataIndexInside:T,dataIndex:d.getData().getRawIndex(T)})}))}}),{payloadBatch:l,snapToValue:s}}function showPointer(a,n,r,o){a[n.key]={value:r,payloadBatch:o}}function showTooltip(a,n,r,o){var s=r.payloadBatch,l=n.axis,c=l.model,u=n.axisPointerModel;if(!(!n.triggerTooltip||!s.length)){var d=n.coordSys.model,f=makeKey(d),v=a.map[f];v||(v=a.map[f]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},a.list.push(v)),v.dataByAxis.push({axisDim:l.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:o,valueLabelOpt:{precision:u.get(["label","precision"]),formatter:u.get(["label","formatter"])},seriesDataIndices:s.slice()})}}function updateModelActually(a,n,r){var o=r.axesInfo=[];each$f(n,function(s,l){var c=s.axisPointerModel.option,u=a[l];u?(!s.useHandle&&(c.status="show"),c.value=u.value,c.seriesDataIndices=(u.payloadBatch||[]).slice()):!s.useHandle&&(c.status="hide"),c.status==="show"&&o.push({axisDim:s.axis.dim,axisIndex:s.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(a,n,r,o){if(illegalPoint(n)||!a.list.length){o({type:"hideTip"});return}var s=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:s.dataIndexInside,dataIndex:s.dataIndex,seriesIndex:s.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(a,n,r){var o=r.getZr(),s="axisPointerLastHighlights",l=inner$9(o)[s]||{},c=inner$9(o)[s]={};each$f(a,function(f,v){var g=f.axisPointerModel.option;g.status==="show"&&f.triggerEmphasis&&each$f(g.seriesDataIndices,function(y){var _=y.seriesIndex+" | "+y.dataIndex;c[_]=y})});var u=[],d=[];each$f(l,function(f,v){!c[v]&&d.push(f)}),each$f(c,function(f,v){!l[v]&&u.push(f)}),d.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),u.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:u})}function findInputAxisInfo(a,n){for(var r=0;r<(a||[]).length;r++){var o=a[r];if(n.axis.dim===o.axisDim&&n.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(a){var n=a.axis.model,r={},o=r.axisDim=a.axis.dim;return r.axisIndex=r[o+"AxisIndex"]=n.componentIndex,r.axisName=r[o+"AxisName"]=n.name,r.axisId=r[o+"AxisId"]=n.id,r}function illegalPoint(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function install$q(a){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),a.registerComponentModel(AxisPointerModel),a.registerComponentView(AxisPointerView),a.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var r=n.axisPointer.link;r&&!isArray$1(r)&&(n.axisPointer.link=[r])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(n,r){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,r)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(a){use(install$N),use(install$q)}var PolarAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,s,l,c){var u=s.axis;u.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=u.polar,f=d.getOtherAxis(u),v=f.getExtent(),g=u.dataToCoord(o),y=l.get("type");if(y&&y!=="none"){var _=buildElStyle(l),S=pointerShapeBuilder$1[y](u,d,g,v);S.style=_,r.graphicKey=S.type,r.pointer=S}var x=l.get(["label","margin"]),T=getLabelPosition(o,s,l,d,x);buildLabelElOption(r,s,l,c,T)},n}(BaseAxisPointer);function getLabelPosition(a,n,r,o,s){var l=n.axis,c=l.dataToCoord(a),u=o.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var d=o.getRadiusAxis().getExtent(),f,v,g;if(l.dim==="radius"){var y=create$1();rotate(y,y,u),translate(y,y,[o.cx,o.cy]),f=applyTransform([c,-s],y);var _=n.getModel("axisLabel").get("rotate")||0,S=AxisBuilder.innerTextLayout(u,_*Math.PI/180,-1);v=S.textAlign,g=S.textVerticalAlign}else{var x=d[1];f=o.coordToPoint([x+s,c]);var T=o.cx,w=o.cy;v=Math.abs(f[0]-T)/x<.3?"center":f[0]>T?"left":"right",g=Math.abs(f[1]-w)/x<.3?"middle":f[1]>w?"top":"bottom"}return{position:f,align:v,verticalAlign:g}}var pointerShapeBuilder$1={line:function(a,n,r,o){return a.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([o[0],r]),n.coordToPoint([o[1],r]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r}}},shadow:function(a,n,r,o){var s=Math.max(1,a.getBandWidth()),l=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,o[0],o[1],(-r-s/2)*l,(-r+s/2)*l)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,r-s/2,r+s/2,0,Math.PI*2)}}},PolarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.findAxisModel=function(r){var o,s=this.ecModel;return s.eachComponent(r,function(l){l.getCoordSysModel()===this&&(o=l)},this),o},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n}(ComponentModel),PolarAxisModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="angleAxis",n}(PolarAxisModel),RadiusAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="radiusAxis",n}(PolarAxisModel),RadiusAxis=function(a){__extends(n,a);function n(r,o){return a.call(this,"radius",r,o)||this}return n.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},n}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(a){__extends(n,a);function n(r,o){return a.call(this,"angle",r,o||[0,360])||this}return n.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var r=this,o=r.getLabelModel(),s=r.scale,l=s.getExtent(),c=s.count();if(l[1]-l[0]<1)return 0;var u=l[0],d=r.dataToCoord(u+1)-r.dataToCoord(u),f=Math.abs(d),v=getBoundingRect(u==null?"":u+"",o.getFont(),"center","top"),g=Math.max(v.height,7),y=g/f;isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(y)),S=inner$8(r.model),x=S.lastAutoInterval,T=S.lastTickCount;return x!=null&&T!=null&&Math.abs(x-_)<=1&&Math.abs(T-c)<=1&&x>_?_=x:(S.lastTickCount=c,S.lastAutoInterval=_),_},n}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function a(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(n){var r=this.pointToCoord(n);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},a.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},a.prototype.getAxis=function(n){var r="_"+n+"Axis";return this[r]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(n){var r=[],o=this._angleAxis,s=this._radiusAxis;return o.scale.type===n&&r.push(o),s.scale.type===n&&r.push(s),r},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(n){var r=this._angleAxis;return n===r?this._radiusAxis:r},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(n){var r=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},a.prototype.dataToPoint=function(n,r){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],r),this._angleAxis.dataToAngle(n[1],r)])},a.prototype.pointToData=function(n,r){var o=this.pointToCoord(n);return[this._radiusAxis.radiusToData(o[0],r),this._angleAxis.angleToData(o[1],r)]},a.prototype.pointToCoord=function(n){var r=n[0]-this.cx,o=n[1]-this.cy,s=this.getAngleAxis(),l=s.getExtent(),c=Math.min(l[0],l[1]),u=Math.max(l[0],l[1]);s.inverse?c=u-360:u=c+360;var d=Math.sqrt(r*r+o*o);r/=d,o/=d;for(var f=Math.atan2(-o,r)/Math.PI*180,v=f<c?1:-1;f<c||f>u;)f+=v*360;return[d,f]},a.prototype.coordToPoint=function(n){var r=n[0],o=n[1]/180*Math.PI,s=Math.cos(o)*r+this.cx,l=-Math.sin(o)*r+this.cy;return[s,l]},a.prototype.getArea=function(){var n=this.getAngleAxis(),r=this.getRadiusAxis(),o=r.getExtent().slice();o[0]>o[1]&&o.reverse();var s=n.getExtent(),l=Math.PI/180,c=1e-4;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:n.inverse,contain:function(u,d){var f=u-this.cx,v=d-this.cy,g=f*f+v*v,y=this.r,_=this.r0;return y!==_&&g-c<=y*y&&g+c>=_*_}}},a.prototype.convertToPixel=function(n,r,o){var s=getCoordSys$2(r);return s===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var s=getCoordSys$2(r);return s===this?this.pointToData(o):null},a}();function getCoordSys$2(a){var n=a.seriesModel,r=a.polarModel;return r&&r.coordinateSystem||n&&n.coordinateSystem}function resizePolar(a,n,r){var o=n.get("center"),s=r.getWidth(),l=r.getHeight();a.cx=parsePercent(o[0],s),a.cy=parsePercent(o[1],l);var c=a.getRadiusAxis(),u=Math.min(s,l)/2,d=n.get("radius");d==null?d=[0,"100%"]:isArray$1(d)||(d=[0,d]);var f=[parsePercent(d[0],u),parsePercent(d[1],u)];c.inverse?c.setExtent(f[1],f[0]):c.setExtent(f[0],f[1])}function updatePolarScale(a,n){var r=this,o=r.getAngleAxis(),s=r.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),s.scale.setExtent(1/0,-1/0),a.eachSeries(function(u){if(u.coordinateSystem===r){var d=u.getData();each$f(getDataDimensionsOnAxis(d,"radius"),function(f){s.scale.unionExtentFromData(d,f)}),each$f(getDataDimensionsOnAxis(d,"angle"),function(f){o.scale.unionExtentFromData(d,f)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(s.scale,s.model),o.type==="category"&&!o.onBand){var l=o.getExtent(),c=360/o.scale.count();o.inverse?l[1]+=c:l[1]-=c,o.setExtent(l[0],l[1])}}function isAngleAxisModel(a){return a.mainType==="angleAxis"}function setAxis(a,n){var r;if(a.type=n.get("type"),a.scale=createScaleByModel$1(n),a.onBand=n.get("boundaryGap")&&a.type==="category",a.inverse=n.get("inverse"),isAngleAxisModel(n)){a.inverse=a.inverse!==n.get("clockwise");var o=n.get("startAngle"),s=(r=n.get("endAngle"))!==null&&r!==void 0?r:o+(a.inverse?-360:360);a.setExtent(o,s)}n.axis=a,a.model=n}var polarCreator={dimensions:polarDimensions,create:function(a,n){var r=[];return a.eachComponent("polar",function(o,s){var l=new Polar(s+"");l.update=updatePolarScale;var c=l.getRadiusAxis(),u=l.getAngleAxis(),d=o.findAxisModel("radiusAxis"),f=o.findAxisModel("angleAxis");setAxis(c,d),setAxis(u,f),resizePolar(l,o,n),r.push(l),o.coordinateSystem=l,l.model=o}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var s=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];o.coordinateSystem=s.coordinateSystem}}),r}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(a,n,r){n[1]>n[0]&&(n=n.slice().reverse());var o=a.coordToPoint([n[0],r]),s=a.coordToPoint([n[1],r]);return{x1:o[0],y1:o[1],x2:s[0],y2:s[1]}}function getRadiusIdx(a){var n=a.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(a){var n=a[0],r=a[a.length-1];n&&r&&Math.abs(Math.abs(n.coord-r.coord)-360)<1e-4&&a.pop()}var AngleAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="PolarAxisPointer",r}return n.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var s=r.axis,l=s.polar,c=l.getRadiusAxis().getExtent(),u=s.getTicksCoords(),d=s.getMinorTicksCoords(),f=map$1(s.getViewLabels(),function(v){v=clone$4(v);var g=s.scale,y=g.type==="ordinal"?g.getRawOrdinalNumber(v.tickValue):v.tickValue;return v.coord=s.dataToCoord(y),v});fixAngleOverlap(f),fixAngleOverlap(u),each$f(elementList,function(v){r.get([v,"show"])&&(!s.scale.isBlank()||v==="axisLine")&&angelAxisElementsBuilders[v](this.group,r,l,u,d,c,f)},this)}},n.type="angleAxis",n}(AxisView),angelAxisElementsBuilders={axisLine:function(a,n,r,o,s,l){var c=n.getModel(["axisLine","lineStyle"]),u=r.getAngleAxis(),d=Math.PI/180,f=u.getExtent(),v=getRadiusIdx(r),g=v?0:1,y,_=Math.abs(f[1]-f[0])===360?"Circle":"Arc";l[g]===0?y=new graphic[_]({shape:{cx:r.cx,cy:r.cy,r:l[v],startAngle:-f[0]*d,endAngle:-f[1]*d,clockwise:u.inverse},style:c.getLineStyle(),z2:1,silent:!0}):y=new Ring({shape:{cx:r.cx,cy:r.cy,r:l[v],r0:l[g]},style:c.getLineStyle(),z2:1,silent:!0}),y.style.fill=null,a.add(y)},axisTick:function(a,n,r,o,s,l){var c=n.getModel("axisTick"),u=(c.get("inside")?-1:1)*c.get("length"),d=l[getRadiusIdx(r)],f=map$1(o,function(v){return new Line$2({shape:getAxisLineShape(r,[d,d+u],v.coord)})});a.add(mergePath(f,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,n,r,o,s,l){if(s.length){for(var c=n.getModel("axisTick"),u=n.getModel("minorTick"),d=(c.get("inside")?-1:1)*u.get("length"),f=l[getRadiusIdx(r)],v=[],g=0;g<s.length;g++)for(var y=0;y<s[g].length;y++)v.push(new Line$2({shape:getAxisLineShape(r,[f,f+d],s[g][y].coord)}));a.add(mergePath(v,{style:defaults(u.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,n,r,o,s,l,c){var u=n.getCategories(!0),d=n.getModel("axisLabel"),f=d.get("margin"),v=n.get("triggerEvent");each$f(c,function(g,y){var _=d,S=g.tickValue,x=l[getRadiusIdx(r)],T=r.coordToPoint([x+f,g.coord]),w=r.cx,E=r.cy,P=Math.abs(T[0]-w)/x<.3?"center":T[0]>w?"left":"right",D=Math.abs(T[1]-E)/x<.3?"middle":T[1]>E?"top":"bottom";if(u&&u[S]){var L=u[S];isObject$3(L)&&L.textStyle&&(_=new Model(L.textStyle,d,d.ecModel))}var $=new ZRText({silent:AxisBuilder.isLabelSilent(n),style:createTextStyle(_,{x:T[0],y:T[1],fill:_.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:g.formattedLabel,align:P,verticalAlign:D})});if(a.add($),v){var O=AxisBuilder.makeAxisEventDataBase(n);O.targetType="axisLabel",O.value=g.rawLabel,getECData($).eventData=O}},this)},splitLine:function(a,n,r,o,s,l){var c=n.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color"),f=0;d=d instanceof Array?d:[d];for(var v=[],g=0;g<o.length;g++){var y=f++%d.length;v[y]=v[y]||[],v[y].push(new Line$2({shape:getAxisLineShape(r,l,o[g].coord)}))}for(var g=0;g<v.length;g++)a.add(mergePath(v[g],{style:defaults({stroke:d[g%d.length]},u.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(a,n,r,o,s,l){if(s.length){for(var c=n.getModel("minorSplitLine"),u=c.getModel("lineStyle"),d=[],f=0;f<s.length;f++)for(var v=0;v<s[f].length;v++)d.push(new Line$2({shape:getAxisLineShape(r,l,s[f][v].coord)}));a.add(mergePath(d,{style:u.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(a,n,r,o,s,l){if(o.length){var c=n.getModel("splitArea"),u=c.getModel("areaStyle"),d=u.get("color"),f=0;d=d instanceof Array?d:[d];for(var v=[],g=Math.PI/180,y=-o[0].coord*g,_=Math.min(l[0],l[1]),S=Math.max(l[0],l[1]),x=n.get("clockwise"),T=1,w=o.length;T<=w;T++){var E=T===w?o[0].coord:o[T].coord,P=f++%d.length;v[P]=v[P]||[],v[P].push(new Sector({shape:{cx:r.cx,cy:r.cy,r0:_,r:S,startAngle:y,endAngle:-E*g,clockwise:x},silent:!0})),y=-E*g}for(var T=0;T<v.length;T++)a.add(mergePath(v[T],{style:defaults({fill:d[T%d.length]},u.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="PolarAxisPointer",r}return n.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var s=this._axisGroup,l=this._axisGroup=new Group$4;this.group.add(l);var c=r.axis,u=c.polar,d=u.getAngleAxis(),f=c.getTicksCoords(),v=c.getMinorTicksCoords(),g=d.getExtent()[0],y=c.getExtent(),_=layoutAxis(u,r,g),S=new AxisBuilder(r,_);each$f(axisBuilderAttrs$1,S.add,S),l.add(S.getGroup()),groupTransition(s,l,r),each$f(selfBuilderAttrs$1,function(x){r.get([x,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[x](this.group,r,u,g,y,f,v)},this)}},n.type="radiusAxis",n}(AxisView),axisElementBuilders$1={splitLine:function(a,n,r,o,s,l){var c=n.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color"),f=0,v=r.getAngleAxis(),g=Math.PI/180,y=v.getExtent(),_=Math.abs(y[1]-y[0])===360?"Circle":"Arc";d=d instanceof Array?d:[d];for(var S=[],x=0;x<l.length;x++){var T=f++%d.length;S[T]=S[T]||[],S[T].push(new graphic[_]({shape:{cx:r.cx,cy:r.cy,r:Math.max(l[x].coord,0),startAngle:-y[0]*g,endAngle:-y[1]*g,clockwise:v.inverse}}))}for(var x=0;x<S.length;x++)a.add(mergePath(S[x],{style:defaults({stroke:d[x%d.length],fill:null},u.getLineStyle()),silent:!0}))},minorSplitLine:function(a,n,r,o,s,l,c){if(c.length){for(var u=n.getModel("minorSplitLine"),d=u.getModel("lineStyle"),f=[],v=0;v<c.length;v++)for(var g=0;g<c[v].length;g++)f.push(new Circle({shape:{cx:r.cx,cy:r.cy,r:c[v][g].coord}}));a.add(mergePath(f,{style:defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(a,n,r,o,s,l){if(l.length){var c=n.getModel("splitArea"),u=c.getModel("areaStyle"),d=u.get("color"),f=0;d=d instanceof Array?d:[d];for(var v=[],g=l[0].coord,y=1;y<l.length;y++){var _=f++%d.length;v[_]=v[_]||[],v[_].push(new Sector({shape:{cx:r.cx,cy:r.cy,r0:g,r:l[y].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),g=l[y].coord}for(var y=0;y<v.length;y++)a.add(mergePath(v[y],{style:defaults({fill:d[y%d.length]},u.getAreaStyle()),silent:!0}))}}};function layoutAxis(a,n,r){return{position:[a.cx,a.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function getAxisKey(a,n){return n.dim+a.model.componentIndex}function barLayoutPolar(a,n,r){var o={},s=calRadialBar(filter(n.getSeriesByType(a),function(l){return!n.isSeriesFiltered(l)&&l.coordinateSystem&&l.coordinateSystem.type==="polar"}));n.eachSeriesByType(a,function(l){if(l.coordinateSystem.type==="polar"){var c=l.getData(),u=l.coordinateSystem,d=u.getBaseAxis(),f=getAxisKey(u,d),v=getSeriesStackId(l),g=s[f][v],y=g.offset,_=g.width,S=u.getOtherAxis(d),x=l.coordinateSystem.cx,T=l.coordinateSystem.cy,w=l.get("barMinHeight")||0,E=l.get("barMinAngle")||0;o[v]=o[v]||[];for(var P=c.mapDimension(S.dim),D=c.mapDimension(d.dim),L=isDimensionStacked(c,P),$=d.dim!=="radius"||!l.get("roundCap",!0),O=S.model,B=O.get("startValue"),V=S.dataToCoord(B||0),F=0,U=c.count();F<U;F++){var G=c.get(P,F),W=c.get(D,F),j=G>=0?"p":"n",K=V;L&&(o[v][W]||(o[v][W]={p:V,n:V}),K=o[v][W][j]);var q=void 0,ie=void 0,ee=void 0,he=void 0;if(S.dim==="radius"){var pe=S.dataToCoord(G)-V,ce=d.dataToCoord(W);Math.abs(pe)<w&&(pe=(pe<0?-1:1)*w),q=K,ie=K+pe,ee=ce-y,he=ee-_,L&&(o[v][W][j]=ie)}else{var ye=S.dataToCoord(G,$)-V,we=d.dataToCoord(W);Math.abs(ye)<E&&(ye=(ye<0?-1:1)*E),q=we+y,ie=q+_,ee=K,he=K+ye,L&&(o[v][W][j]=he)}c.setItemLayout(F,{cx:x,cy:T,r0:q,r:ie,startAngle:-ee*Math.PI/180,endAngle:-he*Math.PI/180,clockwise:ee>=he})}}})}function calRadialBar(a){var n={};each$f(a,function(o,s){var l=o.getData(),c=o.coordinateSystem,u=c.getBaseAxis(),d=getAxisKey(c,u),f=u.getExtent(),v=u.type==="category"?u.getBandWidth():Math.abs(f[1]-f[0])/l.count(),g=n[d]||{bandWidth:v,remainedWidth:v,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},y=g.stacks;n[d]=g;var _=getSeriesStackId(o);y[_]||g.autoWidthCount++,y[_]=y[_]||{width:0,maxWidth:0};var S=parsePercent(o.get("barWidth"),v),x=parsePercent(o.get("barMaxWidth"),v),T=o.get("barGap"),w=o.get("barCategoryGap");S&&!y[_].width&&(S=Math.min(g.remainedWidth,S),y[_].width=S,g.remainedWidth-=S),x&&(y[_].maxWidth=x),T!=null&&(g.gap=T),w!=null&&(g.categoryGap=w)});var r={};return each$f(n,function(o,s){r[s]={};var l=o.stacks,c=o.bandWidth,u=parsePercent(o.categoryGap,c),d=parsePercent(o.gap,1),f=o.remainedWidth,v=o.autoWidthCount,g=(f-u)/(v+(v-1)*d);g=Math.max(g,0),each$f(l,function(x,T){var w=x.maxWidth;w&&w<g&&(w=Math.min(w,f),x.width&&(w=Math.min(w,x.width)),f-=w,x.width=w,v--)}),g=(f-u)/(v+(v-1)*d),g=Math.max(g,0);var y=0,_;each$f(l,function(x,T){x.width||(x.width=g),_=x,y+=x.width*(1+d)}),_&&(y-=_.width*d);var S=-y/2;each$f(l,function(x,T){r[s][T]=r[s][T]||{offset:S,width:x.width},S+=x.width*(1+d)})}),r}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="polar",n}(ComponentView);function install$o(a){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),a.registerCoordinateSystem("polar",polarCreator),a.registerComponentModel(PolarModel),a.registerComponentView(PolarView),axisModelCreator(a,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(a,"radius",RadiusAxisModel,radiusAxisExtraOption),a.registerComponentView(AngleAxisView),a.registerComponentView(RadiusAxisView),a.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(a,n){n=n||{};var r=a.coordinateSystem,o=a.axis,s={},l=o.position,c=o.orient,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],f={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};s.position=[c==="vertical"?f.vertical[l]:d[0],c==="horizontal"?f.horizontal[l]:d[3]];var v={horizontal:0,vertical:1};s.rotation=Math.PI/2*v[c];var g={top:-1,bottom:1,right:1,left:-1};s.labelDirection=s.tickDirection=s.nameDirection=g[l],a.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),retrieve(n.labelInside,a.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var y=n.rotate;return y==null&&(y=a.get(["axisLabel","rotate"])),s.labelRotation=l==="top"?-y:y,s.z2=1,s}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="SingleAxisPointer",r}return n.prototype.render=function(r,o,s,l){var c=this.group;c.removeAll();var u=this._axisGroup;this._axisGroup=new Group$4;var d=layout$1(r),f=new AxisBuilder(r,d);each$f(axisBuilderAttrs,f.add,f),c.add(this._axisGroup),c.add(f.getGroup()),each$f(selfBuilderAttrs,function(v){r.get([v,"show"])&&axisElementBuilders[v](this,this.group,this._axisGroup,r)},this),groupTransition(u,this._axisGroup,r),a.prototype.render.call(this,r,o,s,l)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n}(AxisView),axisElementBuilders={splitLine:function(a,n,r,o){var s=o.axis;if(!s.scale.isBlank()){var l=o.getModel("splitLine"),c=l.getModel("lineStyle"),u=c.get("color");u=u instanceof Array?u:[u];for(var d=c.get("width"),f=o.coordinateSystem.getRect(),v=s.isHorizontal(),g=[],y=0,_=s.getTicksCoords({tickModel:l}),S=[],x=[],T=0;T<_.length;++T){var w=s.toGlobalCoord(_[T].coord);v?(S[0]=w,S[1]=f.y,x[0]=w,x[1]=f.y+f.height):(S[0]=f.x,S[1]=w,x[0]=f.x+f.width,x[1]=w);var E=new Line$2({shape:{x1:S[0],y1:S[1],x2:x[0],y2:x[1]},silent:!0});subPixelOptimizeLine(E.shape,d);var P=y++%u.length;g[P]=g[P]||[],g[P].push(E)}for(var D=c.getLineStyle(["color"]),T=0;T<g.length;++T)n.add(mergePath(g[T],{style:defaults({stroke:u[T%u.length]},D),silent:!0}))}},splitArea:function(a,n,r,o){rectCoordAxisBuildSplitArea(a,r,o,o)}},SingleAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(a){__extends(n,a);function n(r,o,s,l,c){var u=a.call(this,r,o,s)||this;return u.type=l||"value",u.position=c||"bottom",u}return n.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},n.prototype.pointToData=function(r,o){return this.coordinateSystem.pointToData(r)[0]},n}(Axis),singleDimensions=["single"],Single=function(){function a(n,r,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,r,o)}return a.prototype._init=function(n,r,o){var s=this.dimension,l=new SingleAxis(s,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),c=l.type==="category";l.onBand=c&&n.get("boundaryGap"),l.inverse=n.get("inverse"),l.orient=n.get("orient"),n.axis=l,l.model=n,l.coordinateSystem=this,this._axis=l},a.prototype.update=function(n,r){n.eachSeries(function(o){if(o.coordinateSystem===this){var s=o.getData();each$f(s.mapDimensionsAll(this.dimension),function(l){this._axis.scale.unionExtentFromData(s,l)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(n,r){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var n=this._rect,r=this._axis,o=r.isHorizontal(),s=o?[0,n.width]:[0,n.height],l=r.inverse?1:0;r.setExtent(s[l],s[1-l]),this._updateAxisTransform(r,o?n.x:n.y)},a.prototype._updateAxisTransform=function(n,r){var o=n.getExtent(),s=o[0]+o[1],l=n.isHorizontal();n.toGlobalCoord=l?function(c){return c+r}:function(c){return s-c+r},n.toLocalCoord=l?function(c){return c-r}:function(c){return s-c+r}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(n){var r=this.getRect(),o=this.getAxis(),s=o.orient;return s==="horizontal"?o.contain(o.toLocalCoord(n[0]))&&n[1]>=r.y&&n[1]<=r.y+r.height:o.contain(o.toLocalCoord(n[1]))&&n[0]>=r.y&&n[0]<=r.y+r.height},a.prototype.pointToData=function(n){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(n[r.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(n){var r=this.getAxis(),o=this.getRect(),s=[],l=r.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),s[l]=r.toGlobalCoord(r.dataToCoord(+n)),s[1-l]=l===0?o.y+o.height/2:o.x+o.width/2,s},a.prototype.convertToPixel=function(n,r,o){var s=getCoordSys$1(r);return s===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var s=getCoordSys$1(r);return s===this?this.pointToData(o):null},a}();function getCoordSys$1(a){var n=a.seriesModel,r=a.singleAxisModel;return r&&r.coordinateSystem||n&&n.coordinateSystem}function create(a,n){var r=[];return a.eachComponent("singleAxis",function(o,s){var l=new Single(o,a,n);l.name="single_"+s,l.resize(o,n),o.coordinateSystem=l,r.push(l)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var s=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=s&&s.coordinateSystem}}),r}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,s,l,c){var u=s.axis,d=u.coordinateSystem,f=getGlobalExtent(d,1-getPointDimIndex(u)),v=d.dataToPoint(o)[0],g=l.get("type");if(g&&g!=="none"){var y=buildElStyle(l),_=pointerShapeBuilder[g](u,v,f);_.style=y,r.graphicKey=_.type,r.pointer=_}var S=layout$1(s);buildCartesianSingleLabelElOption(o,r,S,s,l,c)},n.prototype.getHandleTransform=function(r,o,s){var l=layout$1(o,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,l);return{x:c[0],y:c[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(r,o,s,l){var c=s.axis,u=c.coordinateSystem,d=getPointDimIndex(c),f=getGlobalExtent(u,d),v=[r.x,r.y];v[d]+=o[d],v[d]=Math.min(f[1],v[d]),v[d]=Math.max(f[0],v[d]);var g=getGlobalExtent(u,1-d),y=(g[1]+g[0])/2,_=[y,y];return _[d]=v[d],{x:v[0],y:v[1],rotation:r.rotation,cursorPoint:_,tooltipOption:{verticalAlign:"middle"}}},n}(BaseAxisPointer),pointerShapeBuilder={line:function(a,n,r){var o=makeLineShape([n,r[0]],[n,r[1]],getPointDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,n,r){var o=a.getBandWidth(),s=r[1]-r[0];return{type:"Rect",shape:makeRectShape([n-o/2,r[0]],[o,s],getPointDimIndex(a))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(a,n){var r=a.getRect();return[r[XY$1[n]],r[XY$1[n]]+r[WH$1[n]]]}var SingleView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="single",n}(ComponentView);function install$n(a){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),a.registerComponentView(SingleView),a.registerComponentView(SingleAxisView),a.registerComponentModel(SingleAxisModel),axisModelCreator(a,"single",SingleAxisModel,SingleAxisModel.defaultOption),a.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o,s){var l=getLayoutParams(r);a.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(r,l)},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,r)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n}(ComponentModel);function mergeAndNormalizeLayoutParams$1(a,n){var r=a.cellSize,o;isArray$1(r)?o=r:o=a.cellSize=[r,r],o.length===1&&(o[1]=o[0]);var s=map$1([0,1],function(l){return sizeCalculable(n,l)&&(o[l]="auto"),o[l]!=null&&o[l]!=="auto"});mergeLayoutParam(a,n,{type:"box",ignoreSize:s})}var CalendarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){var l=this.group;l.removeAll();var c=r.coordinateSystem,u=c.getRangeInfo(),d=c.getOrient(),f=o.getLocaleModel();this._renderDayRect(r,u,l),this._renderLines(r,u,d,l),this._renderYearText(r,u,d,l),this._renderMonthText(r,f,d,l),this._renderWeekText(r,f,u,d,l)},n.prototype._renderDayRect=function(r,o,s){for(var l=r.coordinateSystem,c=r.getModel("itemStyle").getItemStyle(),u=l.getCellWidth(),d=l.getCellHeight(),f=o.start.time;f<=o.end.time;f=l.getNextNDay(f,1).time){var v=l.dataToRect([f],!1).tl,g=new Rect$2({shape:{x:v[0],y:v[1],width:u,height:d},cursor:"default",style:c});s.add(g)}},n.prototype._renderLines=function(r,o,s,l){var c=this,u=r.coordinateSystem,d=r.getModel(["splitLine","lineStyle"]).getLineStyle(),f=r.get(["splitLine","show"]),v=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=o.start,y=0;g.time<=o.end.time;y++){S(g.formatedDate),y===0&&(g=u.getDateInfo(o.start.y+"-"+o.start.m));var _=g.date;_.setMonth(_.getMonth()+1),g=u.getDateInfo(_)}S(u.getNextNDay(o.end.time,1).formatedDate);function S(x){c._firstDayOfMonth.push(u.getDateInfo(x)),c._firstDayPoints.push(u.dataToRect([x],!1).tl);var T=c._getLinePointsOfOneWeek(r,x,s);c._tlpoints.push(T[0]),c._blpoints.push(T[T.length-1]),f&&c._drawSplitline(T,d,l)}f&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,v,s),d,l),f&&this._drawSplitline(c._getEdgesPoints(c._blpoints,v,s),d,l)},n.prototype._getEdgesPoints=function(r,o,s){var l=[r[0].slice(),r[r.length-1].slice()],c=s==="horizontal"?0:1;return l[0][c]=l[0][c]-o/2,l[1][c]=l[1][c]+o/2,l},n.prototype._drawSplitline=function(r,o,s){var l=new Polyline$1({z2:20,shape:{points:r},style:o});s.add(l)},n.prototype._getLinePointsOfOneWeek=function(r,o,s){for(var l=r.coordinateSystem,c=l.getDateInfo(o),u=[],d=0;d<7;d++){var f=l.getNextNDay(c.time,d),v=l.dataToRect([f.time],!1);u[2*f.day]=v.tl,u[2*f.day+1]=v[s==="horizontal"?"bl":"tr"]}return u},n.prototype._formatterLabel=function(r,o){return isString(r)&&r?formatTplSimple(r,o):isFunction(r)?r(o):o.nameMap},n.prototype._yearTextPositionControl=function(r,o,s,l,c){var u=o[0],d=o[1],f=["center","bottom"];l==="bottom"?(d+=c,f=["center","top"]):l==="left"?u-=c:l==="right"?(u+=c,f=["center","top"]):d-=c;var v=0;return(l==="left"||l==="right")&&(v=Math.PI/2),{rotation:v,x:u,y:d,style:{align:f[0],verticalAlign:f[1]}}},n.prototype._renderYearText=function(r,o,s,l){var c=r.getModel("yearLabel");if(c.get("show")){var u=c.get("margin"),d=c.get("position");d||(d=s!=="horizontal"?"top":"left");var f=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],v=(f[0][0]+f[1][0])/2,g=(f[0][1]+f[1][1])/2,y=s==="horizontal"?0:1,_={top:[v,f[y][1]],bottom:[v,f[1-y][1]],left:[f[1-y][0],g],right:[f[y][0],g]},S=o.start.y;+o.end.y>+o.start.y&&(S=S+"-"+o.end.y);var x=c.get("formatter"),T={start:o.start.y,end:o.end.y,nameMap:S},w=this._formatterLabel(x,T),E=new ZRText({z2:30,style:createTextStyle(c,{text:w}),silent:c.get("silent")});E.attr(this._yearTextPositionControl(E,_[d],s,d,u)),l.add(E)}},n.prototype._monthTextPositionControl=function(r,o,s,l,c){var u="left",d="top",f=r[0],v=r[1];return s==="horizontal"?(v=v+c,o&&(u="center"),l==="start"&&(d="bottom")):(f=f+c,o&&(d="middle"),l==="start"&&(u="right")),{x:f,y:v,align:u,verticalAlign:d}},n.prototype._renderMonthText=function(r,o,s,l){var c=r.getModel("monthLabel");if(c.get("show")){var u=c.get("nameMap"),d=c.get("margin"),f=c.get("position"),v=c.get("align"),g=[this._tlpoints,this._blpoints];(!u||isString(u))&&(u&&(o=getLocaleModel(u)||o),u=o.get(["time","monthAbbr"])||[]);var y=f==="start"?0:1,_=s==="horizontal"?0:1;d=f==="start"?-d:d;for(var S=v==="center",x=c.get("silent"),T=0;T<g[y].length-1;T++){var w=g[y][T].slice(),E=this._firstDayOfMonth[T];if(S){var P=this._firstDayPoints[T];w[_]=(P[_]+g[0][T+1][_])/2}var D=c.get("formatter"),L=u[+E.m-1],$={yyyy:E.y,yy:(E.y+"").slice(2),MM:E.m,M:+E.m,nameMap:L},O=this._formatterLabel(D,$),B=new ZRText({z2:30,style:extend(createTextStyle(c,{text:O}),this._monthTextPositionControl(w,S,s,f,d)),silent:x});l.add(B)}}},n.prototype._weekTextPositionControl=function(r,o,s,l,c){var u="center",d="middle",f=r[0],v=r[1],g=s==="start";return o==="horizontal"?(f=f+l+(g?1:-1)*c[0]/2,u=g?"right":"left"):(v=v+l+(g?1:-1)*c[1]/2,d=g?"bottom":"top"),{x:f,y:v,align:u,verticalAlign:d}},n.prototype._renderWeekText=function(r,o,s,l,c){var u=r.getModel("dayLabel");if(u.get("show")){var d=r.coordinateSystem,f=u.get("position"),v=u.get("nameMap"),g=u.get("margin"),y=d.getFirstDayOfWeek();if(!v||isString(v)){v&&(o=getLocaleModel(v)||o);var _=o.get(["time","dayOfWeekShort"]);v=_||map$1(o.get(["time","dayOfWeekAbbr"]),function($){return $[0]})}var S=d.getNextNDay(s.end.time,7-s.lweek).time,x=[d.getCellWidth(),d.getCellHeight()];g=parsePercent(g,Math.min(x[1],x[0])),f==="start"&&(S=d.getNextNDay(s.start.time,-(7+s.fweek)).time,g=-g);for(var T=u.get("silent"),w=0;w<7;w++){var E=d.getNextNDay(S,w),P=d.dataToRect([E.time],!1).center,D=w;D=Math.abs((w+y)%7);var L=new ZRText({z2:30,style:extend(createTextStyle(u,{text:v[D]}),this._weekTextPositionControl(P,l,f,g,x)),silent:T});c.add(L)}}},n.type="calendar",n}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function a(n,r,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=n}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(n){n=parseDate(n);var r=n.getFullYear(),o=n.getMonth()+1,s=o<10?"0"+o:""+o,l=n.getDate(),c=l<10?"0"+l:""+l,u=n.getDay();return u=Math.abs((u+7-this.getFirstDayOfWeek())%7),{y:r+"",m:s,d:c,day:u,time:n.getTime(),formatedDate:r+"-"+s+"-"+c,date:n}},a.prototype.getNextNDay=function(n,r){return r=r||0,r===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+r),this.getDateInfo(n))},a.prototype.update=function(n,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,s=["width","height"],l=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),u=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(g){v(l,g)&&(c[s[g]]=l[g]*u[g])});var d={width:r.getWidth(),height:r.getHeight()},f=this._rect=getLayoutRect(c,d);each$f([0,1],function(g){v(l,g)||(l[g]=f[s[g]]/u[g])});function v(g,y){return g[y]!=null&&g[y]!=="auto"}this._sw=l[0],this._sh=l[1]},a.prototype.dataToPoint=function(n,r){isArray$1(n)&&(n=n[0]),r==null&&(r=!0);var o=this.getDateInfo(n),s=this._rangeInfo,l=o.formatedDate;if(r&&!(o.time>=s.start.time&&o.time<s.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=o.day,u=this._getRangeInfo([s.start.time,l]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]:[this._rect.x+u*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},a.prototype.pointToData=function(n){var r=this.pointToDate(n);return r&&r.time},a.prototype.dataToRect=function(n,r){var o=this.dataToPoint(n,r);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(n){var r=Math.floor((n[0]-this._rect.x)/this._sw)+1,o=Math.floor((n[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,r-1,s):this._getDateByWeeksAndDay(r,o-1,s)},a.prototype.convertToPixel=function(n,r,o){var s=getCoordSys(r);return s===this?s.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var s=getCoordSys(r);return s===this?s.pointToData(o):null},a.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var n=this._model.get("range"),r;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))r=n;else{var o=n.toString();if(/^\d{4}$/.test(o)&&(r=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var s=this.getDateInfo(o),l=s.date;l.setMonth(l.getMonth()+1);var c=this.getNextNDay(l,-1);r=[s.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(r=[o,o])}if(!r)return n;var u=this._getRangeInfo(r);return u.start.time>u.end.time&&r.reverse(),r},a.prototype._getRangeInfo=function(n){var r=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],o;r[0].time>r[1].time&&(o=!0,r.reverse());var s=Math.floor(r[1].time/PROXIMATE_ONE_DAY)-Math.floor(r[0].time/PROXIMATE_ONE_DAY)+1,l=new Date(r[0].time),c=l.getDate(),u=r[1].date.getDate();l.setDate(c+s-1);var d=l.getDate();if(d!==u)for(var f=l.getTime()-r[1].time>0?1:-1;(d=l.getDate())!==u&&(l.getTime()-r[1].time)*f>0;)s-=f,l.setDate(d-f);var v=Math.floor((s+r[0].day+6)/7),g=o?-v+1:v-1;return o&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:s,weeks:v,nthWeek:g,fweek:r[0].day,lweek:r[1].day}},a.prototype._getDateByWeeksAndDay=function(n,r,o){var s=this._getRangeInfo(o);if(n>s.weeks||n===0&&r<s.fweek||n===s.weeks&&r>s.lweek)return null;var l=(n-1)*7-s.fweek+r,c=new Date(s.start.time);return c.setDate(+s.start.d+l),this.getDateInfo(c)},a.create=function(n,r){var o=[];return n.eachComponent("calendar",function(s){var l=new a(s);o.push(l),s.coordinateSystem=l}),n.eachSeries(function(s){s.get("coordinateSystem")==="calendar"&&(s.coordinateSystem=o[s.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function getCoordSys(a){var n=a.calendarModel,r=a.seriesModel,o=n?n.coordinateSystem:r?r.coordinateSystem:null;return o}function install$m(a){a.registerComponentModel(CalendarModel),a.registerComponentView(CalendarView),a.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(a,n){var r=a.existing;if(n.id=a.keyInfo.id,!n.type&&r&&(n.type=r.type),n.parentId==null){var o=n.parentOption;o?n.parentId=o.id:r&&(n.parentId=r.parentId)}n.parentOption=null}function isSetLoc(a,n){var r;return each$f(n,function(o){a[o]!=null&&a[o]!=="auto"&&(r=!0)}),r}function mergeNewElOptionToExist(a,n,r){var o=extend({},r),s=a[n],l=r.$action||"merge";l==="merge"?s?(merge(s,o,!0),mergeLayoutParam(s,o,{ignoreSize:!0}),copyLayoutParams(r,s),copyTransitionInfo(r,s),copyTransitionInfo(r,s,"shape"),copyTransitionInfo(r,s,"style"),copyTransitionInfo(r,s,"extra"),r.clipPath=s.clipPath):a[n]=o:l==="replace"?a[n]=o:l==="remove"&&s&&(a[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(a,n,r){if(r&&(!a[r]&&n[r]&&(a[r]={}),a=a[r],n=n[r]),!(!a||!n))for(var o=r?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,s=0;s<o.length;s++){var l=o[s];a[l]==null&&n[l]!=null&&(a[l]=n[l])}}function setLayoutInfoToExist(a,n){if(a&&(a.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],a.type==="group")){var r=a,o=n;r.width==null&&(r.width=o.width=0),r.height==null&&(r.height=o.height=0)}}var GraphicComponentModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.preventAutoZ=!0,r}return n.prototype.mergeOption=function(r,o){var s=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,r,o),this.option.elements=s},n.prototype.optionUpdated=function(r,o){var s=this.option,l=(o?s:r).elements,c=s.elements=o?[]:s.elements,u=[];this._flatten(l,u,null);var d=mappingToExists(c,u,"normalMerge"),f=this._elOptionsToUpdate=[];each$f(d,function(v,g){var y=v.newOption;y&&(f.push(y),setKeyInfoToNewElOption(v,y),mergeNewElOptionToExist(c,g,y),setLayoutInfoToExist(c[g],y))},this),s.elements=filter(c,function(v){return v&&delete v.$action,v!=null})},n.prototype._flatten=function(r,o,s){each$f(r,function(l){if(l){s&&(l.parentOption=s),o.push(l);var c=l.children;c&&c.length&&this._flatten(c,o,l),delete l.children}},this)},n.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},n.type="graphic",n.defaultOption={elements:[]},n}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$4,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(r,o,s){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,s)},n.prototype._updateElements=function(r){var o=r.useElOptionsToUpdate();if(o){var s=this._elMap,l=this.group,c=r.get("z"),u=r.get("zlevel");each$f(o,function(d){var f=convertOptionIdName(d.id,null),v=f!=null?s.get(f):null,g=convertOptionIdName(d.parentId,null),y=g!=null?s.get(g):l,_=d.type,S=d.style;_==="text"&&S&&d.hv&&d.hv[1]&&(S.textVerticalAlign=S.textBaseline=S.verticalAlign=S.align=null);var x=d.textContent,T=d.textConfig;if(S&&isEC4CompatibleStyle(S,_,!!T,!!x)){var w=convertFromEC4CompatibleStyle(S,_,!0);!T&&w.textConfig&&(T=d.textConfig=w.textConfig),!x&&w.textContent&&(x=w.textContent)}var E=getCleanedElOption(d),P=d.$action||"merge",D=P==="merge",L=P==="replace";if(D){var $=!v,O=v;$?O=createEl(f,y,d.type,s):(O&&(inner$7(O).isNew=!1),stopPreviousKeyframeAnimationAndRestore(O)),O&&(applyUpdateTransition(O,E,r,{isInit:$}),updateCommonAttrs(O,d,c,u))}else if(L){removeEl$1(v,d,s,r);var B=createEl(f,y,d.type,s);B&&(applyUpdateTransition(B,E,r,{isInit:!0}),updateCommonAttrs(B,d,c,u))}else P==="remove"&&(updateLeaveTo(v,d),removeEl$1(v,d,s,r));var V=s.get(f);if(V&&x)if(D){var F=V.getTextContent();F?F.attr(x):V.setTextContent(new ZRText(x))}else L&&V.setTextContent(new ZRText(x));if(V){var U=d.clipPath;if(U){var G=U.type,W=void 0,$=!1;if(D){var j=V.getClipPath();$=!j||inner$7(j).type!==G,W=$?newEl(G):j}else L&&($=!0,W=newEl(G));V.setClipPath(W),applyUpdateTransition(W,U,r,{isInit:$}),applyKeyframeAnimation(W,U.keyframeAnimation,r)}var K=inner$7(V);V.setTextConfig(T),K.option=d,setEventData(V,r,d),setTooltipConfig({el:V,componentModel:r,itemName:V.name,itemTooltipOption:d.tooltip}),applyKeyframeAnimation(V,d.keyframeAnimation,r)}})}},n.prototype._relocate=function(r,o){for(var s=r.option.elements,l=this.group,c=this._elMap,u=o.getWidth(),d=o.getHeight(),f=["x","y"],v=0;v<s.length;v++){var g=s[v],y=convertOptionIdName(g.id,null),_=y!=null?c.get(y):null;if(!(!_||!_.isGroup)){var S=_.parent,x=S===l,T=inner$7(_),w=inner$7(S);T.width=parsePercent(T.option.width,x?u:w.width)||0,T.height=parsePercent(T.option.height,x?d:w.height)||0}}for(var v=s.length-1;v>=0;v--){var g=s[v],y=convertOptionIdName(g.id,null),_=y!=null?c.get(y):null;if(_){var S=_.parent,w=inner$7(S),E=S===l?{width:u,height:d}:{width:w.width,height:w.height},P={},D=positionElement(_,g,E,null,{hv:g.hv,boundingMode:g.bounding},P);if(!inner$7(_).isNew&&D){for(var L=g.transition,$={},O=0;O<f.length;O++){var B=f[O],V=P[B];L&&(isTransitionAll(L)||indexOf(L,B)>=0)?$[B]=V:_[B]=V}updateProps$1(_,$,r,0)}else _.attr(P)}}},n.prototype._clear=function(){var r=this,o=this._elMap;o.each(function(s){removeEl$1(s,inner$7(s).option,o,r._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n}(ComponentView);function newEl(a){var n=hasOwn(nonShapeGraphicElements,a)?nonShapeGraphicElements[a]:getShapeClass(a),r=new n({});return inner$7(r).type=a,r}function createEl(a,n,r,o){var s=newEl(r);return n.add(s),o.set(a,s),inner$7(s).id=a,inner$7(s).isNew=!0,s}function removeEl$1(a,n,r,o){var s=a&&a.parent;s&&(a.type==="group"&&a.traverse(function(l){removeEl$1(l,n,r,o)}),applyLeaveTransition(a,n,o),r.removeKey(inner$7(a).id))}function updateCommonAttrs(a,n,r,o){a.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",o||0],["z",r||0],["z2",0]],function(s){var l=s[0];hasOwn(n,l)?a[l]=retrieve2(n[l],s[1]):a[l]==null&&(a[l]=s[1])}),each$f(keys(n),function(s){if(s.indexOf("on")===0){var l=n[s];a[s]=isFunction(l)?l:null}}),hasOwn(n,"draggable")&&(a.draggable=n.draggable),n.name!=null&&(a.name=n.name),n.id!=null&&(a.id=n.id)}function getCleanedElOption(a){return a=extend({},a),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete a[n]}),a}function setEventData(a,n,r){var o=getECData(a).eventData;!a.silent&&!a.ignore&&!o&&(o=getECData(a).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:a.name}),o&&(o.info=r.info)}function install$l(a){a.registerComponentModel(GraphicComponentModel),a.registerComponentView(GraphicComponentView),a.registerPreprocessor(function(n){var r=n.graphic;isArray$1(r)?!r[0]||!r[0].elements?n.graphic=[{elements:r}]:n.graphic=[n.graphic[0]]:r&&!r.elements&&(n.graphic=[{elements:[r]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(a){var n=a.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(a){return a+"Axis"}function findEffectedDataZooms(a,n){var r=createHashMap(),o=[],s=createHashMap();a.eachComponent({mainType:"dataZoom",query:n},function(v){s.get(v.uid)||u(v)});var l;do l=!1,a.eachComponent("dataZoom",c);while(l);function c(v){!s.get(v.uid)&&d(v)&&(u(v),l=!0)}function u(v){s.set(v.uid,!0),o.push(v),f(v)}function d(v){var g=!1;return v.eachTargetAxis(function(y,_){var S=r.get(y);S&&S[_]&&(g=!0)}),g}function f(v){v.eachTargetAxis(function(g,y){(r.get(g)||r.set(g,[]))[y]=!0})}return o}function collectReferCoordSysModelInfo(a){var n=a.ecModel,r={infoList:[],infoMap:createHashMap()};return a.eachTargetAxis(function(o,s){var l=n.getComponent(getAxisMainType(o),s);if(l){var c=l.getCoordSysModel();if(c){var u=c.uid,d=r.infoMap.get(u);d||(d={model:c,axisModels:[]},r.infoList.push(d),r.infoMap.set(u,d)),d.axisModels.push(l)}}}),r}var DataZoomAxisInfo=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},a}(),DataZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return n.prototype.init=function(r,o,s){var l=retrieveRawOption(r);this.settledOption=l,this.mergeDefaultAndTheme(r,s),this._doInit(l)},n.prototype.mergeOption=function(r){var o=retrieveRawOption(r);merge(this.option,r,!0),merge(this.settledOption,o,!0),this._doInit(o)},n.prototype._doInit=function(r){var o=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var s=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l,c){this._rangePropMode[c]==="value"&&(o[l[0]]=s[l[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var r=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),s=this._fillSpecifiedTargetAxis(o);s?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(l){l.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(r){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(s){var l=this.getReferringComponents(getAxisMainType(s),MULTIPLE_REFERRING);if(l.specified){o=!0;var c=new DataZoomAxisInfo;each$f(l.models,function(u){c.add(u.componentIndex)}),r.set(s,c)}},this),o},n.prototype._fillAutoTargetAxisByOrient=function(r,o){var s=this.ecModel,l=!0;if(l){var c=o==="vertical"?"y":"x",u=s.findComponents({mainType:c+"Axis"});d(u,c)}if(l){var u=s.findComponents({mainType:"singleAxis",filter:function(v){return v.get("orient",!0)===o}});d(u,"single")}function d(f,v){var g=f[0];if(g){var y=new DataZoomAxisInfo;if(y.add(g.componentIndex),r.set(v,y),l=!1,v==="x"||v==="y"){var _=g.getReferringComponents("grid",SINGLE_REFERRING).models[0];_&&each$f(f,function(S){g.componentIndex!==S.componentIndex&&_===S.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&y.add(S.componentIndex)})}}}l&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(f){if(l){var v=s.findComponents({mainType:getAxisMainType(f),filter:function(y){return y.get("type",!0)==="category"}});if(v[0]){var g=new DataZoomAxisInfo;g.add(v[0].componentIndex),r.set(f,g),l=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(o){!r&&(r=o)},this),r==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(r){var o=this._rangePropMode,s=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(l,c){var u=r[l[0]]!=null,d=r[l[1]]!=null;u&&!d?o[c]="percent":!u&&d?o[c]="value":s?o[c]=s[c]:u&&(o[c]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(o,s){r==null&&(r=this.ecModel.getComponent(getAxisMainType(o),s))},this),r},n.prototype.eachTargetAxis=function(r,o){this._targetAxisInfoMap.each(function(s,l){each$f(s.indexList,function(c){r.call(o,l,c)})})},n.prototype.getAxisProxy=function(r,o){var s=this.getAxisModel(r,o);if(s)return s.__dzAxisProxy},n.prototype.getAxisModel=function(r,o){var s=this._targetAxisInfoMap.get(r);if(s&&s.indexMap[o])return this.ecModel.getComponent(getAxisMainType(r),o)},n.prototype.setRawRange=function(r){var o=this.option,s=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(l){(r[l[0]]!=null||r[l[1]]!=null)&&(o[l[0]]=s[l[0]]=r[l[0]],o[l[1]]=s[l[1]]=r[l[1]])},this),this._updateRangeUse(r)},n.prototype.setCalculatedRange=function(r){var o=this.option;each$f(["start","startValue","end","endValue"],function(s){o[s]=r[s]})},n.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},n.prototype.getValueRange=function(r,o){if(r==null&&o==null){var s=this.findRepresentativeAxisProxy();if(s)return s.getDataValueWindow()}else return this.getAxisProxy(r,o).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var o,s=this._targetAxisInfoMap.keys(),l=0;l<s.length;l++)for(var c=s[l],u=this._targetAxisInfoMap.get(c),d=0;d<u.indexList.length;d++){var f=this.getAxisProxy(c,u.indexList[d]);if(f.hostedBy(this))return f;o||(o=f)}return o},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(ComponentModel);function retrieveRawOption(a){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(r){a.hasOwnProperty(r)&&(n[r]=a[r])}),n}var SelectDataZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.select",n}(DataZoomModel),DataZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s,l){this.dataZoomModel=r,this.ecModel=o,this.api=s},n.type="dataZoom",n}(ComponentView),SelectDataZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.select",n}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function a(n,r,o,s){this._dimName=n,this._axisIndex=r,this.ecModel=s,this._dataZoomModel=o}return a.prototype.hostedBy=function(n){return this._dataZoomModel===n},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(r){if(isCoordSupported(r)){var o=getAxisMainType(this._dimName),s=r.getReferringComponents(o,SINGLE_REFERRING).models[0];s&&this._axisIndex===s.componentIndex&&n.push(r)}},this),n},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},a.prototype.calculateDataWindow=function(n){var r=this._dataExtent,o=this.getAxisModel(),s=o.axis.scale,l=this._dataZoomModel.getRangePropMode(),c=[0,100],u=[],d=[],f;each$7(["start","end"],function(y,_){var S=n[y],x=n[y+"Value"];l[_]==="percent"?(S==null&&(S=c[_]),x=s.parse(linearMap$2(S,c,r))):(f=!0,x=x==null?r[_]:s.parse(x),S=linearMap$2(x,r,c)),d[_]=x==null||isNaN(x)?r[_]:x,u[_]=S==null||isNaN(S)?c[_]:S}),asc$1(d),asc$1(u);var v=this._minMaxSpan;f?g(d,u,r,c,!1):g(u,d,c,r,!0);function g(y,_,S,x,T){var w=T?"Span":"ValueSpan";sliderMove(0,y,S,"all",v["min"+w],v["max"+w]);for(var E=0;E<2;E++)_[E]=linearMap$2(y[E],S,x,!0),T&&(_[E]=s.parse(_[E]))}return{valueWindow:d,percentWindow:u}},a.prototype.reset=function(n){if(n===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,r),this._updateMinMaxSpan();var o=this.calculateDataWindow(n.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(n,r){if(n!==this._dataZoomModel)return;var o=this._dimName,s=this.getTargetSeriesModels(),l=n.get("filterMode"),c=this._valueWindow;if(l==="none")return;each$7(s,function(d){var f=d.getData(),v=f.mapDimensionsAll(o);if(v.length){if(l==="weakFilter"){var g=f.getStore(),y=map$1(v,function(_){return f.getDimensionIndex(_)},f);f.filterSelf(function(_){for(var S,x,T,w=0;w<v.length;w++){var E=g.get(y[w],_),P=!isNaN(E),D=E<c[0],L=E>c[1];if(P&&!D&&!L)return!0;P&&(T=!0),D&&(S=!0),L&&(x=!0)}return T&&S&&x})}else each$7(v,function(_){if(l==="empty")d.setData(f=f.map(_,function(x){return u(x)?x:NaN}));else{var S={};S[_]=c,f.selectRange(S)}});each$7(v,function(_){f.setApproximateExtent(c,_)})}});function u(d){return d>=c[0]&&d<=c[1]}},a.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},r=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(s){var l=r.get(s+"Span"),c=r.get(s+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?l=linearMap$2(o[0]+c,o,[0,100],!0):l!=null&&(c=linearMap$2(l,[0,100],o,!0)-o[0]),n[s+"Span"]=l,n[s+"ValueSpan"]=c},this)},a.prototype._setAxisModel=function(){var n=this.getAxisModel(),r=this._percentWindow,o=this._valueWindow;if(r){var s=getPixelPrecision(o,[0,500]);s=Math.min(s,20);var l=n.axis.scale.rawExtentInfo;r[0]!==0&&l.setDeterminedMinMax("min",+o[0].toFixed(s)),r[1]!==100&&l.setDeterminedMinMax("max",+o[1].toFixed(s)),l.freeze()}},a}();function calculateDataExtent(a,n,r){var o=[1/0,-1/0];each$7(r,function(c){unionAxisExtentFromData(o,c.getData(),n)});var s=a.getAxisModel(),l=ensureScaleRawExtentInfo(s.axis.scale,s,o).calculate();return[l.min,l.max]}var dataZoomProcessor={getTargetSeries:function(a){function n(s){a.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(c,u){var d=a.getComponent(getAxisMainType(c),u);s(c,u,d,l)})})}n(function(s,l,c,u){c.__dzAxisProxy=null});var r=[];n(function(s,l,c,u){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy(s,l,u,a),r.push(c.__dzAxisProxy))});var o=createHashMap();return each$f(r,function(s){each$f(s.getTargetSeriesModels(),function(l){o.set(l.uid,l)})}),o},overallReset:function(a,n){a.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(o,s){r.getAxisProxy(o,s).reset(r)}),r.eachTargetAxis(function(o,s){r.getAxisProxy(o,s).filterData(r,n)})}),a.eachComponent("dataZoom",function(r){var o=r.findRepresentativeAxisProxy();if(o){var s=o.getDataPercentWindow(),l=o.getDataValueWindow();r.setCalculatedRange({start:s[0],end:s[1],startValue:l[0],endValue:l[1]})}})}};function installDataZoomAction(a){a.registerAction("dataZoom",function(n,r){var o=findEffectedDataZooms(r,n);each$f(o,function(s){s.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(a){installed$1||(installed$1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(a){a.registerComponentModel(SelectDataZoomModel),a.registerComponentView(SelectDataZoomView),installCommon$1(a)}var ToolboxFeature=function(){function a(){}return a}(),features={};function registerFeature(a,n){features[a]=n}function getFeature(a){return features[a]}var ToolboxModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;each$f(this.option.feature,function(o,s){var l=getFeature(s);l&&(l.getDefaultOption&&(l.defaultOption=l.getDefaultOption(r)),merge(o,l.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(ComponentModel);function layout(a,n,r){var o=n.getBoxLayoutParams(),s=n.get("padding"),l={width:r.getWidth(),height:r.getHeight()},c=getLayoutRect(o,l,s);box(n.get("orient"),a,n.get("itemGap"),c.width,c.height),positionElement(a,o,l,s)}function makeBackground(a,n){var r=normalizeCssArray(n.get("padding")),o=n.getItemStyle(["color","opacity"]);return o.fill=n.get("backgroundColor"),a=new Rect$2({shape:{x:a.x-r[3],y:a.y-r[0],width:a.width+r[1]+r[3],height:a.height+r[0]+r[2],r:n.get("borderRadius")},style:o,silent:!0,z2:-1}),a}var ToolboxView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,s,l){var c=this.group;if(c.removeAll(),!r.get("show"))return;var u=+r.get("itemSize"),d=r.get("orient")==="vertical",f=r.get("feature")||{},v=this._features||(this._features={}),g=[];each$f(f,function(S,x){g.push(x)}),new DataDiffer(this._featureNames||[],g).add(y).update(y).remove(curry$1(y,null)).execute(),this._featureNames=g;function y(S,x){var T=g[S],w=g[x],E=f[T],P=new Model(E,r,r.ecModel),D;if(l&&l.newTitle!=null&&l.featureName===T&&(E.title=l.newTitle),T&&!w){if(isUserFeatureName(T))D={onclick:P.option.onclick,featureName:T};else{var L=getFeature(T);if(!L)return;D=new L}v[T]=D}else if(D=v[w],!D)return;D.uid=getUID("toolbox-feature"),D.model=P,D.ecModel=o,D.api=s;var $=D instanceof ToolboxFeature;if(!T&&w){$&&D.dispose&&D.dispose(o,s);return}if(!P.get("show")||$&&D.unusable){$&&D.remove&&D.remove(o,s);return}_(P,D,T),P.setIconStatus=function(O,B){var V=this.option,F=this.iconPaths;V.iconStatus=V.iconStatus||{},V.iconStatus[O]=B,F[O]&&(B==="emphasis"?enterEmphasis:leaveEmphasis)(F[O])},D instanceof ToolboxFeature&&D.render&&D.render(P,o,s,l)}function _(S,x,T){var w=S.getModel("iconStyle"),E=S.getModel(["emphasis","iconStyle"]),P=x instanceof ToolboxFeature&&x.getIcons?x.getIcons():S.get("icon"),D=S.get("title")||{},L,$;isString(P)?(L={},L[T]=P):L=P,isString(D)?($={},$[T]=D):$=D;var O=S.iconPaths={};each$f(L,function(B,V){var F=createIcon(B,{},{x:-u/2,y:-u/2,width:u,height:u});F.setStyle(w.getItemStyle());var U=F.ensureState("emphasis");U.style=E.getItemStyle();var G=new ZRText({style:{text:$[V],align:E.get("textAlign"),borderRadius:E.get("textBorderRadius"),padding:E.get("textPadding"),fill:null,font:getFont({fontStyle:E.get("textFontStyle"),fontFamily:E.get("textFontFamily"),fontSize:E.get("textFontSize"),fontWeight:E.get("textFontWeight")},o)},ignore:!0});F.setTextContent(G),setTooltipConfig({el:F,componentModel:r,itemName:V,formatterParamsExtra:{title:$[V]}}),F.__title=$[V],F.on("mouseover",function(){var W=E.getItemStyle(),j=d?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";G.setStyle({fill:E.get("textFill")||W.fill||W.stroke||"#000",backgroundColor:E.get("textBackgroundColor")}),F.setTextConfig({position:E.get("textPosition")||j}),G.ignore=!r.get("showTitle"),s.enterEmphasis(this)}).on("mouseout",function(){S.get(["iconStatus",V])!=="emphasis"&&s.leaveEmphasis(this),G.hide()}),(S.get(["iconStatus",V])==="emphasis"?enterEmphasis:leaveEmphasis)(F),c.add(F),F.on("click",bind$1(x.onclick,x,o,s,V)),O[V]=F})}layout(c,r,s),c.add(makeBackground(c.getBoundingRect(),r)),d||c.eachChild(function(S){var x=S.__title,T=S.ensureState("emphasis"),w=T.textConfig||(T.textConfig={}),E=S.getTextContent(),P=E&&E.ensureState("emphasis");if(P&&!isFunction(P)&&x){var D=P.style||(P.style={}),L=getBoundingRect(x,ZRText.makeFont(D)),$=S.x+c.x,O=S.y+c.y+u,B=!1;O+L.height>s.getHeight()&&(w.position="top",B=!0);var V=B?-5-L.height:u+10;$+L.width/2>s.getWidth()?(w.position=["100%",V],D.align="right"):$-L.width/2<0&&(w.position=[0,V],D.align="left")}})},n.prototype.updateView=function(r,o,s,l){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,o,s,l)})},n.prototype.remove=function(r,o){each$f(this._features,function(s){s instanceof ToolboxFeature&&s.remove&&s.remove(r,o)}),this.group.removeAll()},n.prototype.dispose=function(r,o){each$f(this._features,function(s){s instanceof ToolboxFeature&&s.dispose&&s.dispose(r,o)})},n.type="toolbox",n}(ComponentView);function isUserFeatureName(a){return a.indexOf("my")===0}var SaveAsImage=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){var s=this.model,l=s.get("name")||r.get("title.0.text")||"echarts",c=o.getZr().painter.getType()==="svg",u=c?"svg":s.get("type",!0)||"png",d=o.getConnectedDataURL({type:u,backgroundColor:s.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:s.get("connectedBackgroundColor"),excludeComponents:s.get("excludeComponents"),pixelRatio:s.get("pixelRatio")}),f=env.browser;if(typeof MouseEvent=="function"&&(f.newEdge||!f.ie&&!f.edge)){var v=document.createElement("a");v.download=l+"."+u,v.target="_blank",v.href=d;var g=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});v.dispatchEvent(g)}else if(window.navigator.msSaveOrOpenBlob||c){var y=d.split(","),_=y[0].indexOf("base64")>-1,S=c?decodeURIComponent(y[1]):y[1];_&&(S=window.atob(S));var x=l+"."+u;if(window.navigator.msSaveOrOpenBlob){for(var T=S.length,w=new Uint8Array(T);T--;)w[T]=S.charCodeAt(T);var E=new Blob([w]);window.navigator.msSaveOrOpenBlob(E,x)}else{var P=document.createElement("iframe");document.body.appendChild(P);var D=P.contentWindow,L=D.document;L.open("image/svg+xml","replace"),L.write(S),L.close(),D.focus(),L.execCommand("SaveAs",!0,x),document.body.removeChild(P)}}else{var $=s.get("lang"),O='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+($&&$[0]||"")+'" /></body>',B=window.open();B.document.write(O),B.document.title=l}},n.getDefaultOption=function(r){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},n}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getIcons=function(){var r=this.model,o=r.get("icon"),s={};return each$f(r.get("type"),function(l){o[l]&&(s[l]=o[l])}),s},n.getDefaultOption=function(r){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},n.prototype.onclick=function(r,o,s){var l=this.model,c=l.get(["seriesIndex",s]);if(seriesOptGenreator[s]){var u={series:[]},d=function(g){var y=g.subType,_=g.id,S=seriesOptGenreator[s](y,_,g,l);S&&(defaults(S,g.option),u.series.push(S));var x=g.coordinateSystem;if(x&&x.type==="cartesian2d"&&(s==="line"||s==="bar")){var T=x.getAxesByScale("ordinal")[0];if(T){var w=T.dim,E=w+"Axis",P=g.getReferringComponents(E,SINGLE_REFERRING).models[0],D=P.componentIndex;u[E]=u[E]||[];for(var L=0;L<=D;L++)u[E][D]=u[E][D]||{};u[E][D].boundaryGap=s==="bar"}}};each$f(radioTypes,function(g){indexOf(g,s)>=0&&each$f(g,function(y){l.setIconStatus(y,"normal")})}),l.setIconStatus(s,"emphasis"),r.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},d);var f,v=s;s==="stack"&&(f=merge({stack:l.option.title.tiled,tiled:l.option.title.stack},l.option.title),l.get(["iconStatus",s])!=="emphasis"&&(v="tiled")),o.dispatchAction({type:"changeMagicType",currentType:v,newOption:u,newTitle:f,featureName:"magicType"})}},n}(ToolboxFeature),seriesOptGenreator={line:function(a,n,r,o){if(a==="bar")return merge({id:n,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,n,r,o){if(a==="line")return merge({id:n,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,n,r,o){var s=r.get("stack")===INNER_STACK_KEYWORD;if(a==="line"||a==="bar")return o.setIconStatus("stack",s?"normal":"emphasis"),merge({id:n,stack:s?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,n){n.mergeOption(a.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(a){var n={},r=[],o=[];return a.eachRawSeries(function(s){var l=s.coordinateSystem;if(l&&(l.type==="cartesian2d"||l.type==="polar")){var c=l.getBaseAxis();if(c.type==="category"){var u=c.dim+"_"+c.index;n[u]||(n[u]={categoryAxis:c,valueAxis:l.getOtherAxis(c),series:[]},o.push({axisDim:c.dim,axisIndex:c.index})),n[u].series.push(s)}else r.push(s)}else r.push(s)}),{seriesGroupByCategoryAxis:n,other:r,meta:o}}function assembleSeriesWithCategoryAxis(a){var n=[];return each$f(a,function(r,o){var s=r.categoryAxis,l=r.valueAxis,c=l.dim,u=[" "].concat(map$1(r.series,function(_){return _.name})),d=[s.model.getCategories()];each$f(r.series,function(_){var S=_.getRawData();d.push(_.getRawData().mapArray(S.mapDimension(c),function(x){return x}))});for(var f=[u.join(ITEM_SPLITER)],v=0;v<d[0].length;v++){for(var g=[],y=0;y<d.length;y++)g.push(d[y][v]);f.push(g.join(ITEM_SPLITER))}n.push(f.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(a){return map$1(a,function(n){var r=n.getRawData(),o=[n.name],s=[];return r.each(r.dimensions,function(){for(var l=arguments.length,c=arguments[l-1],u=r.getName(c),d=0;d<l-1;d++)s[d]=arguments[d];o.push((u?u+ITEM_SPLITER:"")+s.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(a){var n=groupSeries(a);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(a){var n=a.slice(0,a.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(a){for(var n=a.split(/\n+/g),r=trim(n.shift()).split(itemSplitRegex),o=[],s=map$1(r,function(d){return{name:d,data:[]}}),l=0;l<n.length;l++){var c=trim(n[l]).split(itemSplitRegex);o.push(c.shift());for(var u=0;u<c.length;u++)s[u]&&(s[u].data[l]=c[u])}return{series:s,categories:o}}function parseListContents(a){for(var n=a.split(/\n+/g),r=trim(n.shift()),o=[],s=0;s<n.length;s++){var l=trim(n[s]);if(l){var c=l.split(itemSplitRegex),u="",d=void 0,f=!1;isNaN(c[0])?(f=!0,u=c[0],c=c.slice(1),o[s]={name:u,value:[]},d=o[s].value):d=o[s]=[];for(var v=0;v<c.length;v++)d.push(+c[v]);d.length===1&&(f?o[s].value=d[0]:o[s]=d[0])}}return{name:r,data:o}}function parseContents(a,n){var r=a.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(r,function(s,l){if(isTSVFormat(s)){var c=parseTSVContents(s),u=n[l],d=u.axisDim+"Axis";u&&(o[d]=o[d]||[],o[d][u.axisIndex]={data:c.categories},o.series=o.series.concat(c.series))}else{var c=parseListContents(s);o.series.push(c)}}),o}var DataView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var s=o.getDom(),l=this.model;this._dom&&s.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=l.get("backgroundColor")||"#fff";var u=document.createElement("h4"),d=l.get("lang")||[];u.innerHTML=d[0]||l.get("title"),u.style.cssText="margin:10px 20px",u.style.color=l.get("textColor");var f=document.createElement("div"),v=document.createElement("textarea");f.style.cssText="overflow:auto";var g=l.get("optionToContent"),y=l.get("contentToOption"),_=getContentFromModel(r);if(isFunction(g)){var S=g(o.getOption());isString(S)?f.innerHTML=S:isDom(S)&&f.appendChild(S)}else{v.readOnly=l.get("readOnly");var x=v.style;x.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",x.color=l.get("textColor"),x.borderColor=l.get("textareaBorderColor"),x.backgroundColor=l.get("textareaColor"),v.value=_.value,f.appendChild(v)}var T=_.meta,w=document.createElement("div");w.style.cssText="position:absolute;bottom:5px;left:0;right:0";var E="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",P=document.createElement("div"),D=document.createElement("div");E+=";background-color:"+l.get("buttonColor"),E+=";color:"+l.get("buttonTextColor");var L=this;function $(){s.removeChild(c),L._dom=null}addEventListener(P,"click",$),addEventListener(D,"click",function(){if(y==null&&g!=null||y!=null&&g==null){$();return}var O;try{isFunction(y)?O=y(f,o.getOption()):O=parseContents(v.value,T)}catch(B){throw $(),new Error("Data view format error "+B)}O&&o.dispatchAction({type:"changeDataView",newOption:O}),$()}),P.innerHTML=d[1],D.innerHTML=d[2],D.style.cssText=P.style.cssText=E,!l.get("readOnly")&&w.appendChild(D),w.appendChild(P),c.appendChild(u),c.appendChild(f),c.appendChild(w),f.style.height=s.clientHeight-80+"px",s.appendChild(c),this._dom=c},n.prototype.remove=function(r,o){this._dom&&o.getDom().removeChild(this._dom)},n.prototype.dispose=function(r,o){this.remove(r,o)},n.getDefaultOption=function(r){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},n}(ToolboxFeature);function tryMergeDataOption(a,n){return map$1(a,function(r,o){var s=n&&n[o];if(isObject$3(s)&&!isArray$1(s)){var l=isObject$3(r)&&!isArray$1(r);l||(r={value:r});var c=s.name!=null&&r.name==null;return r=defaults(r,s),c&&delete r.name,r}else return r})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,n){var r=[];each$f(a.newOption.series,function(o){var s=n.getSeriesByName(o.name)[0];if(!s)r.push(extend({type:"scatter"},o));else{var l=s.get("data");r.push({name:o.name,data:tryMergeDataOption(o.data,l)})}}),n.mergeOption(defaults({series:r},a.newOption))});var each$6=each$f,inner$6=makeInner();function push(a,n){var r=getStoreSnapshots(a);each$6(n,function(o,s){for(var l=r.length-1;l>=0;l--){var c=r[l];if(c[s])break}if(l<0){var u=a.queryComponents({mainType:"dataZoom",subType:"select",id:s})[0];if(u){var d=u.getPercentRange();r[0][s]={dataZoomId:s,start:d[0],end:d[1]}}}}),r.push(n)}function pop(a){var n=getStoreSnapshots(a),r=n[n.length-1];n.length>1&&n.pop();var o={};return each$6(r,function(s,l){for(var c=n.length-1;c>=0;c--)if(s=n[c][l],s){o[l]=s;break}}),o}function clear(a){inner$6(a).snapshots=null}function count(a){return getStoreSnapshots(a).length}function getStoreSnapshots(a){var n=inner$6(a);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){clear(r),o.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(r){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return o},n}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,n){n.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function a(n,r,o){var s=this;this._targetInfoList=[];var l=parseFinder(r,n);each$f(targetInfoBuilders,function(c,u){(!o||!o.include||indexOf(o.include,u)>=0)&&c(l,s._targetInfoList)})}return a.prototype.setOutputRanges=function(n,r){return this.matchOutputRanges(n,r,function(o,s,l){if((o.coordRanges||(o.coordRanges=[])).push(s),!o.coordRange){o.coordRange=s;var c=coordConvert[o.brushType](0,l,s);o.__rangeOffset={offset:diffProcessor[o.brushType](c.values,o.range,[1,1]),xyMinMax:c.xyMinMax}}}),n},a.prototype.matchOutputRanges=function(n,r,o){each$f(n,function(s){var l=this.findTargetInfo(s,r);l&&l!==!0&&each$f(l.coordSyses,function(c){var u=coordConvert[s.brushType](1,c,s.range,!0);o(s,u.values,c,r)})},this)},a.prototype.setInputRanges=function(n,r){each$f(n,function(o){var s=this.findTargetInfo(o,r);if(o.range=o.range||[],s&&s!==!0){o.panelId=s.panelId;var l=coordConvert[o.brushType](0,s.coordSys,o.coordRange),c=o.__rangeOffset;o.range=c?diffProcessor[o.brushType](l.values,c.offset,getScales(l.xyMinMax,c.xyMinMax)):l.values}},this)},a.prototype.makePanelOpts=function(n,r){return map$1(this._targetInfoList,function(o){var s=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:r?r(o):null,clipPath:makeRectPanelClipPath(s),isTargetByCursor:makeRectIsTargetByCursor(s,n,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(s)}})},a.prototype.controlSeries=function(n,r,o){var s=this.findTargetInfo(n,o);return s===!0||s&&indexOf(s.coordSyses,r.coordinateSystem)>=0},a.prototype.findTargetInfo=function(n,r){for(var o=this._targetInfoList,s=parseFinder(r,n),l=0;l<o.length;l++){var c=o[l],u=n.panelId;if(u){if(c.panelId===u)return c}else for(var d=0;d<targetInfoMatchers.length;d++)if(targetInfoMatchers[d](s,c))return c}return!0},a}();function formatMinMax(a){return a[0]>a[1]&&a.reverse(),a}function parseFinder(a,n){return parseFinder$1(a,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(a,n){var r=a.xAxisModels,o=a.yAxisModels,s=a.gridModels,l=createHashMap(),c={},u={};!r&&!o&&!s||(each$f(r,function(d){var f=d.axis.grid.model;l.set(f.id,f),c[f.id]=!0}),each$f(o,function(d){var f=d.axis.grid.model;l.set(f.id,f),u[f.id]=!0}),each$f(s,function(d){l.set(d.id,d),c[d.id]=!0,u[d.id]=!0}),l.each(function(d){var f=d.coordinateSystem,v=[];each$f(f.getCartesians(),function(g,y){(indexOf(r,g.getAxis("x").model)>=0||indexOf(o,g.getAxis("y").model)>=0)&&v.push(g)}),n.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:v[0],coordSyses:v,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[d.id],yAxisDeclared:u[d.id]})}))},geo:function(a,n){each$f(a.geoModels,function(r){var o=r.coordinateSystem;n.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(a,n){var r=a.xAxisModel,o=a.yAxisModel,s=a.gridModel;return!s&&r&&(s=r.axis.grid.model),!s&&o&&(s=o.axis.grid.model),s&&s===n.gridModel},function(a,n){var r=a.geoModel;return r&&r===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,n=a.getBoundingRect().clone();return n.applyTransform(getTransform$1(a)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(a,n,r,o){var s=a?n.pointToData([r[0][0],r[1][0]],o):n.dataToPoint([r[0][0],r[1][0]],o),l=a?n.pointToData([r[0][1],r[1][1]],o):n.dataToPoint([r[0][1],r[1][1]],o),c=[formatMinMax([s[0],l[0]]),formatMinMax([s[1],l[1]])];return{values:c,xyMinMax:c}},polygon:function(a,n,r,o){var s=[[1/0,-1/0],[1/0,-1/0]],l=map$1(r,function(c){var u=a?n.pointToData(c,o):n.dataToPoint(c,o);return s[0][0]=Math.min(s[0][0],u[0]),s[1][0]=Math.min(s[1][0],u[1]),s[0][1]=Math.max(s[0][1],u[0]),s[1][1]=Math.max(s[1][1],u[1]),u});return{values:l,xyMinMax:s}}};function axisConvert(a,n,r,o){var s=r.getAxis(["x","y"][a]),l=formatMinMax(map$1([0,1],function(u){return n?s.coordToData(s.toLocalCoord(o[u]),!0):s.toGlobalCoord(s.dataToCoord(o[u]))})),c=[];return c[a]=l,c[1-a]=[NaN,NaN],{values:l,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(a,n,r){return[[a[0][0]-r[0]*n[0][0],a[0][1]-r[0]*n[0][1]],[a[1][0]-r[1]*n[1][0],a[1][1]-r[1]*n[1][1]]]},polygon:function(a,n,r){return map$1(a,function(o,s){return[o[0]-r[0]*n[s][0],o[1]-r[1]*n[s][1]]})}};function axisDiffProcessor(a,n,r,o){return[n[0]-o[a]*r[0],n[1]-o[a]*r[1]]}function getScales(a,n){var r=getSize(a),o=getSize(n),s=[r[0]/o[0],r[1]/o[1]];return isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,s,l){this._brushController||(this._brushController=new BrushController(s.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(r,o,this,l,s),updateBackBtnStatus(r,o)},n.prototype.onclick=function(r,o,s){handlers[s].call(this)},n.prototype.remove=function(r,o){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(r,o){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(r){var o=r.areas;if(!r.isEnd||!o.length)return;var s={},l=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager(makeAxisFinder(this.model),l,{include:["grid"]});c.matchOutputRanges(o,l,function(f,v,g){if(g.type==="cartesian2d"){var y=f.brushType;y==="rect"?(u("x",g,v[0]),u("y",g,v[1])):u({lineX:"x",lineY:"y"}[y],g,v)}}),push(l,s),this._dispatchZoomAction(s);function u(f,v,g){var y=v.getAxis(f),_=y.model,S=d(f,_,l),x=S.findRepresentativeAxisProxy(_).getMinMaxSpan();(x.minValueSpan!=null||x.maxValueSpan!=null)&&(g=sliderMove(0,g.slice(),y.scale.getExtent(),0,x.minValueSpan,x.maxValueSpan)),S&&(s[S.id]={dataZoomId:S.id,startValue:g[0],endValue:g[1]})}function d(f,v,g){var y;return g.eachComponent({mainType:"dataZoom",subType:"select"},function(_){var S=_.getAxisModel(f,v.componentIndex);S&&(y=_)}),y}},n.prototype._dispatchZoomAction=function(r){var o=[];each$5(r,function(s,l){o.push(clone$4(s))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},n.getDefaultOption=function(r){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},n}(ToolboxFeature),handlers={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(a){var n={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(a,n){a.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(a,n,r,o,s){var l=r._isZoomActive;o&&o.type==="takeGlobalCursor"&&(l=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),r._isZoomActive=l,a.setIconStatus("zoom",l?"emphasis":"normal");var c=new BrushTargetManager(makeAxisFinder(a),n,{include:["grid"]}),u=c.makePanelOpts(s,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(u).enableBrush(l&&u.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(a){var n=a.getComponent("toolbox",0),r=["feature","dataZoom"];if(!n||n.get(r)==null)return;var o=n.getModel(r),s=[],l=makeAxisFinder(o),c=parseFinder$1(a,l);each$5(c.xAxisModels,function(d){return u(d,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(d){return u(d,"yAxis","yAxisIndex")});function u(d,f,v){var g=d.componentIndex,y={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+f+g};y[v]=g,s.push(y)}return s});function install$j(a){a.registerComponentModel(ToolboxModel),a.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n}(ComponentModel);function shouldTooltipConfine(a){var n=a.get("confine");return n!=null?!!n:a.get("renderMode")==="richText"}function testStyle(a){if(env.domSupported){for(var n=document.documentElement.style,r=0,o=a.length;r<o;r++)if(a[r]in n)return a[r]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(a,n){if(!a)return n;n=toCamelCase(n,!0);var r=a.indexOf(n);return a=r===-1?n:"-"+a.slice(0,r)+"-"+n,a.toLowerCase()}function getComputedStyle(a,n){var r=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return r?r[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function assembleArrow(a,n,r){if(!isString(r)||r==="inside")return"";var o=a.get("backgroundColor"),s=a.get("borderWidth");n=convertToColorString(n);var l=mirrorPos(r),c=Math.max(Math.round(s)*1.5,6),u="",d=CSS_TRANSFORM_VENDOR+":",f;indexOf(["left","right"],l)>-1?(u+="top:50%",d+="translateY(-50%) rotate("+(f=l==="left"?-225:-45)+"deg)"):(u+="left:50%",d+="translateX(-50%) rotate("+(f=l==="top"?225:45)+"deg)");var v=f*Math.PI/180,g=c+s,y=g*Math.abs(Math.cos(v))+g*Math.abs(Math.sin(v)),_=Math.round(((y-Math.SQRT2*s)/2+Math.SQRT2*s-(y-g)/2)*100)/100;u+=";"+l+":-"+_+"px";var S=n+" solid "+s+"px;",x=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",u+";"+d+";","border-bottom:"+S,"border-right:"+S,"background-color:"+o+";"];return'<div style="'+x.join("")+'"></div>'}function assembleTransition(a,n){var r="cubic-bezier(0.23,1,0.32,1)",o=" "+a/2+"s "+r,s="opacity"+o+",visibility"+o;return n||(o=" "+a+"s "+r,s+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o),CSS_TRANSITION_VENDOR+":"+s}function assembleTransform(a,n,r){var o=a.toFixed(0)+"px",s=n.toFixed(0)+"px";if(!env.transformSupported)return r?"top:"+s+";left:"+o+";":[["top",s],["left",o]];var l=env.transform3dSupported,c="translate"+(l?"3d":"")+"("+o+","+s+(l?",0":"")+")";return r?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(a){var n=[],r=a.get("fontSize"),o=a.getTextColor();o&&n.push("color:"+o),n.push("font:"+a.getFont());var s=retrieve2(a.get("lineHeight"),Math.round(r*3/2));r&&n.push("line-height:"+s+"px");var l=a.get("textShadowColor"),c=a.get("textShadowBlur")||0,u=a.get("textShadowOffsetX")||0,d=a.get("textShadowOffsetY")||0;return l&&c&&n.push("text-shadow:"+u+"px "+d+"px "+c+"px "+l),each$f(["decoration","align"],function(f){var v=a.get(f);v&&n.push("text-"+f+":"+v)}),n.join(";")}function assembleCssText(a,n,r){var o=[],s=a.get("transitionDuration"),l=a.get("backgroundColor"),c=a.get("shadowBlur"),u=a.get("shadowColor"),d=a.get("shadowOffsetX"),f=a.get("shadowOffsetY"),v=a.getModel("textStyle"),g=getPaddingFromTooltipModel(a,"html"),y=d+"px "+f+"px "+c+"px "+u;return o.push("box-shadow:"+y),n&&s&&o.push(assembleTransition(s,r)),l&&o.push("background-color:"+l),each$f(["width","color","radius"],function(_){var S="border-"+_,x=toCamelCase(S),T=a.get(x);T!=null&&o.push(S+":"+T+(_==="color"?"":"px"))}),o.push(assembleFont(v)),g!=null&&o.push("padding:"+normalizeCssArray(g).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(a,n,r,o,s){var l=n&&n.painter;if(r){var c=l&&l.getViewportRoot();c&&transformLocalCoord(a,c,r,o,s)}else{a[0]=o,a[1]=s;var u=l&&l.getViewportRootOffset();u&&(a[0]+=u.offsetLeft,a[1]+=u.offsetTop)}a[2]=a[0]/n.getWidth(),a[3]=a[1]/n.getHeight()}var TooltipHTMLContent=function(){function a(n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=n.getZr(),l=r.appendTo,c=l&&(isString(l)?document.querySelector(l):isDom(l)?l:isFunction(l)&&l(n.getDom()));makeStyleCoord$1(this._styleCoord,s,c,n.getWidth()/2,n.getHeight()/2),(c||n.getDom()).appendChild(o),this._api=n,this._container=c;var u=this;o.onmouseenter=function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0},o.onmousemove=function(d){if(d=d||window.event,!u._enterable){var f=s.handler,v=s.painter.getViewportRoot();normalizeEvent(v,d,!0),f.dispatch("mousemove",d)}},o.onmouseleave=function(){u._inContent=!1,u._enterable&&u._show&&u.hideLater(u._hideDelay)}}return a.prototype.update=function(n){if(!this._container){var r=this._api.getDom(),o=getComputedStyle(r,"position"),s=r.style;s.position!=="absolute"&&o!=="absolute"&&(s.position="relative")}var l=n.get("alwaysShowContent");l&&this._moveIfResized(),this._alwaysShowContent=l,this.el.className=n.get("className")||""},a.prototype.show=function(n,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,s=o.style,l=this._styleCoord;o.innerHTML?s.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(l[0],l[1],!0)+("border-color:"+convertToColorString(r)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):s.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(n,r,o,s,l){var c=this.el;if(n==null){c.innerHTML="";return}var u="";if(isString(l)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(u=assembleArrow(o,s,l)),isString(n))c.innerHTML=n+u;else if(n){c.innerHTML="",isArray$1(n)||(n=[n]);for(var d=0;d<n.length;d++)isDom(n[d])&&n[d].parentNode!==c&&c.appendChild(n[d]);if(u&&c.childNodes.length){var f=document.createElement("div");f.innerHTML=u,c.appendChild(f)}}},a.prototype.setEnterable=function(n){this._enterable=n},a.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},a.prototype.moveTo=function(n,r){if(this.el){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._container,n,r),o[0]!=null&&o[1]!=null){var s=this.el.style,l=assembleTransform(o[0],o[1]);each$f(l,function(c){s[c[0]]=c[1]})}}},a.prototype._moveIfResized=function(){var n=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){var n=this,r=this.el.style;r.visibility="hidden",r.opacity="0",env.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},a.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},a}(),TooltipRichContent=function(){function a(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return a.prototype.update=function(n){var r=n.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(n,r,o,s,l){var c=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var u=o.getModel("textStyle");this.el=new ZRText({style:{rich:r.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:s,textShadowColor:u.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(f){c.el.style[f]=o.get(f)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(f){c.el.style[f]=u.get(f)||0}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},a.prototype.setEnterable=function(n){this._enterable=n},a.prototype.getSize=function(){var n=this.el,r=this.el.getBoundingRect(),o=calcShadowOuterSize(n.style);return[r.width+o.left+o.right,r.height+o.top+o.bottom]},a.prototype.moveTo=function(n,r){var o=this.el;if(o){var s=this._styleCoord;makeStyleCoord(s,this._zr,n,r),n=s[0],r=s[1];var l=o.style,c=mathMaxWith0(l.borderWidth||0),u=calcShadowOuterSize(l);o.x=n+c+u.left,o.y=r+c+u.top,o.markRedraw()}},a.prototype._moveIfResized=function(){var n=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function mathMaxWith0(a){return Math.max(0,a)}function calcShadowOuterSize(a){var n=mathMaxWith0(a.shadowBlur||0),r=mathMaxWith0(a.shadowOffsetX||0),o=mathMaxWith0(a.shadowOffsetY||0);return{left:mathMaxWith0(n-r),right:mathMaxWith0(n+r),top:mathMaxWith0(n-o),bottom:mathMaxWith0(n+o)}}function makeStyleCoord(a,n,r,o){a[0]=r,a[1]=o,a[2]=a[0]/n.getWidth(),a[3]=a[1]/n.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){if(!(env.node||!o.getDom())){var s=r.getComponent("tooltip"),l=this._renderMode=getTooltipRenderMode(s.get("renderMode"));this._tooltipContent=l==="richText"?new TooltipRichContent(o):new TooltipHTMLContent(o,{appendTo:s.get("appendToBody",!0)?"body":s.get("appendTo",!0)})}},n.prototype.render=function(r,o,s){if(!(env.node||!s.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=o,this._api=s;var l=this._tooltipContent;l.update(r),l.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var r=this._tooltipModel,o=r.get("triggerOn");register$1("itemTooltip",this._api,bind$1(function(s,l,c){o!=="none"&&(o.indexOf(s)>=0?this._tryShow(l,c):s==="leave"&&this._hide(c))},this))},n.prototype._keepShow=function(){var r=this._tooltipModel,o=this._ecModel,s=this._api,l=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&l!=="none"&&l!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!s.isDisposed()&&c.manuallyShowTip(r,o,s,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(r,o,s,l){if(!(l.from===this.uid||env.node||!s.getDom())){var c=makeDispatchAction(l,s);this._ticket="";var u=l.dataByCoordSys,d=findComponentReference(l,o,s);if(d){var f=d.el.getBoundingRect().clone();f.applyTransform(d.el.transform),this._tryShow({offsetX:f.x+f.width/2,offsetY:f.y+f.height/2,target:d.el,position:l.position,positionDefault:"bottom"},c)}else if(l.tooltip&&l.x!=null&&l.y!=null){var v=proxyRect;v.x=l.x,v.y=l.y,v.update(),getECData(v).tooltipConfig={name:null,option:l.tooltip},this._tryShow({offsetX:l.x,offsetY:l.y,target:v},c)}else if(u)this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,dataByCoordSys:u,tooltipOption:l.tooltipOption},c);else if(l.seriesIndex!=null){if(this._manuallyAxisShowTip(r,o,s,l))return;var g=findPointFromSeries(l,o),y=g.point[0],_=g.point[1];y!=null&&_!=null&&this._tryShow({offsetX:y,offsetY:_,target:g.el,position:l.position,positionDefault:"bottom"},c)}else l.x!=null&&l.y!=null&&(s.dispatchAction({type:"updateAxisPointer",x:l.x,y:l.y}),this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,target:s.getZr().findHover(l.x,l.y).target},c))}},n.prototype.manuallyHideTip=function(r,o,s,l){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,l.from!==this.uid&&this._hide(makeDispatchAction(l,s))},n.prototype._manuallyAxisShowTip=function(r,o,s,l){var c=l.seriesIndex,u=l.dataIndex,d=o.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||u==null||d==null)){var f=o.getSeriesByIndex(c);if(f){var v=f.getData(),g=buildTooltipModel([v.getItemModel(u),f,(f.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return s.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:u,position:l.position}),!0}}},n.prototype._tryShow=function(r,o){var s=r.target,l=this._tooltipModel;if(l){this._lastX=r.offsetX,this._lastY=r.offsetY;var c=r.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,r);else if(s){var u=getECData(s);if(u.ssrType==="legend")return;this._lastDataByCoordSys=null;var d,f;findEventDispatcher(s,function(v){if(getECData(v).dataIndex!=null)return d=v,!0;if(getECData(v).tooltipConfig!=null)return f=v,!0},!0),d?this._showSeriesItemTooltip(r,d,o):f?this._showComponentItemTooltip(r,f,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},n.prototype._showOrMove=function(r,o){var s=r.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),s>0?this._showTimout=setTimeout(o,s):o()},n.prototype._showAxisTooltip=function(r,o){var s=this._ecModel,l=this._tooltipModel,c=[o.offsetX,o.offsetY],u=buildTooltipModel([o.tooltipOption],l),d=this._renderMode,f=[],v=createTooltipMarkup("section",{blocks:[],noHeader:!0}),g=[],y=new TooltipMarkupStyleCreator;each$f(r,function(E){each$f(E.dataByAxis,function(P){var D=s.getComponent(P.axisDim+"Axis",P.axisIndex),L=P.value;if(!(!D||L==null)){var $=getValueLabel(L,D.axis,s,P.seriesDataIndices,P.valueLabelOpt),O=createTooltipMarkup("section",{header:$,noHeader:!trim$1($),sortBlocks:!0,blocks:[]});v.blocks.push(O),each$f(P.seriesDataIndices,function(B){var V=s.getSeriesByIndex(B.seriesIndex),F=B.dataIndexInside,U=V.getDataParams(F);if(!(U.dataIndex<0)){U.axisDim=P.axisDim,U.axisIndex=P.axisIndex,U.axisType=P.axisType,U.axisId=P.axisId,U.axisValue=getAxisRawValue(D.axis,{value:L}),U.axisValueLabel=$,U.marker=y.makeTooltipMarker("item",convertToColorString(U.color),d);var G=normalizeTooltipFormatResult(V.formatTooltip(F,!0,null)),W=G.frag;if(W){var j=buildTooltipModel([V],l).get("valueFormatter");O.blocks.push(j?extend({valueFormatter:j},W):W)}G.text&&g.push(G.text),f.push(U)}})}})}),v.blocks.reverse(),g.reverse();var _=o.position,S=u.get("order"),x=buildTooltipMarkup(v,y,d,S,s.get("useUTC"),u.get("textStyle"));x&&g.unshift(x);var T=d==="richText"?`

`:"<br/>",w=g.join(T);this._showOrMove(u,function(){this._updateContentNotChangedOnAxis(r,f)?this._updatePosition(u,_,c[0],c[1],this._tooltipContent,f):this._showTooltipContent(u,w,f,Math.random()+"",c[0],c[1],_,null,y)})},n.prototype._showSeriesItemTooltip=function(r,o,s){var l=this._ecModel,c=getECData(o),u=c.seriesIndex,d=l.getSeriesByIndex(u),f=c.dataModel||d,v=c.dataIndex,g=c.dataType,y=f.getData(g),_=this._renderMode,S=r.positionDefault,x=buildTooltipModel([y.getItemModel(v),f,d&&(d.coordinateSystem||{}).model],this._tooltipModel,S?{position:S}:null),T=x.get("trigger");if(!(T!=null&&T!=="item")){var w=f.getDataParams(v,g),E=new TooltipMarkupStyleCreator;w.marker=E.makeTooltipMarker("item",convertToColorString(w.color),_);var P=normalizeTooltipFormatResult(f.formatTooltip(v,!1,g)),D=x.get("order"),L=x.get("valueFormatter"),$=P.frag,O=$?buildTooltipMarkup(L?extend({valueFormatter:L},$):$,E,_,D,l.get("useUTC"),x.get("textStyle")):P.text,B="item_"+f.name+"_"+v;this._showOrMove(x,function(){this._showTooltipContent(x,O,w,B,r.offsetX,r.offsetY,r.position,r.target,E)}),s({type:"showTip",dataIndexInside:v,dataIndex:y.getRawIndex(v),seriesIndex:u,from:this.uid})}},n.prototype._showComponentItemTooltip=function(r,o,s){var l=this._renderMode==="html",c=getECData(o),u=c.tooltipConfig,d=u.option||{},f=d.encodeHTMLContent;if(isString(d)){var v=d;d={content:v,formatter:v},f=!0}f&&l&&d.content&&(d=clone$4(d),d.content=encodeHTML(d.content));var g=[d],y=this._ecModel.getComponent(c.componentMainType,c.componentIndex);y&&g.push(y),g.push({formatter:d.content});var _=r.positionDefault,S=buildTooltipModel(g,this._tooltipModel,_?{position:_}:null),x=S.get("content"),T=Math.random()+"",w=new TooltipMarkupStyleCreator;this._showOrMove(S,function(){var E=clone$4(S.get("formatterParams")||{});this._showTooltipContent(S,x,E,T,r.offsetX,r.offsetY,r.position,o,w)}),s({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(r,o,s,l,c,u,d,f,v){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var g=this._tooltipContent;g.setEnterable(r.get("enterable"));var y=r.get("formatter");d=d||r.get("position");var _=o,S=this._getNearestPoint([c,u],s,r.get("trigger"),r.get("borderColor")),x=S.color;if(y)if(isString(y)){var T=r.ecModel.get("useUTC"),w=isArray$1(s)?s[0]:s,E=w&&w.axisType&&w.axisType.indexOf("time")>=0;_=y,E&&(_=format(w.axisValue,_,T)),_=formatTpl(_,s,!0)}else if(isFunction(y)){var P=bind$1(function(D,L){D===this._ticket&&(g.setContent(L,v,r,x,d),this._updatePosition(r,d,c,u,g,s,f))},this);this._ticket=l,_=y(s,l,P)}else _=y;g.setContent(_,v,r,x,d),g.show(r,x),this._updatePosition(r,d,c,u,g,s,f)}},n.prototype._getNearestPoint=function(r,o,s,l){if(s==="axis"||isArray$1(o))return{color:l||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(o))return{color:l||o.color||o.borderColor}},n.prototype._updatePosition=function(r,o,s,l,c,u,d){var f=this._api.getWidth(),v=this._api.getHeight();o=o||r.get("position");var g=c.getSize(),y=r.get("align"),_=r.get("verticalAlign"),S=d&&d.getBoundingRect().clone();if(d&&S.applyTransform(d.transform),isFunction(o)&&(o=o([s,l],u,c.el,S,{viewSize:[f,v],contentSize:g.slice()})),isArray$1(o))s=parsePercent(o[0],f),l=parsePercent(o[1],v);else if(isObject$3(o)){var x=o;x.width=g[0],x.height=g[1];var T=getLayoutRect(x,{width:f,height:v});s=T.x,l=T.y,y=null,_=null}else if(isString(o)&&d){var w=calcTooltipPosition(o,S,g,r.get("borderWidth"));s=w[0],l=w[1]}else{var w=refixTooltipPosition(s,l,c,f,v,y?null:20,_?null:20);s=w[0],l=w[1]}if(y&&(s-=isCenterAlign(y)?g[0]/2:y==="right"?g[0]:0),_&&(l-=isCenterAlign(_)?g[1]/2:_==="bottom"?g[1]:0),shouldTooltipConfine(r)){var w=confineTooltipPosition(s,l,c,f,v);s=w[0],l=w[1]}c.moveTo(s,l)},n.prototype._updateContentNotChangedOnAxis=function(r,o){var s=this._lastDataByCoordSys,l=this._cbParamsList,c=!!s&&s.length===r.length;return c&&each$f(s,function(u,d){var f=u.dataByAxis||[],v=r[d]||{},g=v.dataByAxis||[];c=c&&f.length===g.length,c&&each$f(f,function(y,_){var S=g[_]||{},x=y.seriesDataIndices||[],T=S.seriesDataIndices||[];c=c&&y.value===S.value&&y.axisType===S.axisType&&y.axisId===S.axisId&&x.length===T.length,c&&each$f(x,function(w,E){var P=T[E];c=c&&w.seriesIndex===P.seriesIndex&&w.dataIndex===P.dataIndex}),l&&each$f(y.seriesDataIndices,function(w){var E=w.seriesIndex,P=o[E],D=l[E];P&&D&&D.data!==P.data&&(c=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=o,!!c},n.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},n.prototype.dispose=function(r,o){env.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},n.type="tooltip",n}(ComponentView);function buildTooltipModel(a,n,r){var o=n.ecModel,s;r?(s=new Model(r,o,o),s=new Model(n.option,s,o)):s=n;for(var l=a.length-1;l>=0;l--){var c=a[l];c&&(c instanceof Model&&(c=c.get("tooltip",!0)),isString(c)&&(c={formatter:c}),c&&(s=new Model(c,s,o)))}return s}function makeDispatchAction(a,n){return a.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(a,n,r,o,s,l,c){var u=r.getSize(),d=u[0],f=u[1];return l!=null&&(a+d+l+2>o?a-=d+l:a+=l),c!=null&&(n+f+c>s?n-=f+c:n+=c),[a,n]}function confineTooltipPosition(a,n,r,o,s){var l=r.getSize(),c=l[0],u=l[1];return a=Math.min(a+c,o)-c,n=Math.min(n+u,s)-u,a=Math.max(a,0),n=Math.max(n,0),[a,n]}function calcTooltipPosition(a,n,r,o){var s=r[0],l=r[1],c=Math.ceil(Math.SQRT2*o)+8,u=0,d=0,f=n.width,v=n.height;switch(a){case"inside":u=n.x+f/2-s/2,d=n.y+v/2-l/2;break;case"top":u=n.x+f/2-s/2,d=n.y-l-c;break;case"bottom":u=n.x+f/2-s/2,d=n.y+v+c;break;case"left":u=n.x-s-c,d=n.y+v/2-l/2;break;case"right":u=n.x+f+c,d=n.y+v/2-l/2}return[u,d]}function isCenterAlign(a){return a==="center"||a==="middle"}function findComponentReference(a,n,r){var o=preParseFinder(a).queryOptionMap,s=o.keys()[0];if(!(!s||s==="series")){var l=queryReferringComponents(n,s,o.get(s),{useDefault:!1,enableAll:!1,enableNone:!1}),c=l.models[0];if(c){var u=r.getViewOfComponentModel(c),d;if(u.group.traverse(function(f){var v=getECData(f).tooltipConfig;if(v&&v.name===a.name)return d=f,!0}),d)return{componentMainType:s,componentIndex:c.componentIndex,el:d}}}}function install$i(a){use(install$q),a.registerComponentModel(TooltipModel),a.registerComponentView(TooltipView),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(a,n){var r=normalizeToArray(a?a.brush:[]);if(r.length){var o=[];each$f(r,function(d){var f=d.hasOwnProperty("toolbox")?d.toolbox:[];f instanceof Array&&(o=o.concat(f))});var s=a&&a.toolbox;isArray$1(s)&&(s=s[0]),s||(s={feature:{}},a.toolbox=[s]);var l=s.feature||(s.feature={}),c=l.brush||(l.brush={}),u=c.type||(c.type=[]);u.push.apply(u,o),removeDuplicate(u),n&&!u.length&&u.push.apply(u,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(a){var n={};each$f(a,function(r){n[r]=1}),a.length=0,each$f(n,function(r,o){a.push(o)})}var each$4=each$f;function hasKeys(a){if(a){for(var n in a)if(a.hasOwnProperty(n))return!0}}function createVisualMappings(a,n,r){var o={};return each$4(n,function(l){var c=o[l]=s();each$4(a[l],function(u,d){if(VisualMapping.isValidType(d)){var f={type:d,visual:u};r&&r(f,l),c[d]=new VisualMapping(f),d==="opacity"&&(f=clone$4(f),f.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping(f))}})}),o;function s(){var l=function(){};l.prototype.__hidden=l.prototype;var c=new l;return c}}function replaceVisualOption(a,n,r){var o;each$f(r,function(s){n.hasOwnProperty(s)&&hasKeys(n[s])&&(o=!0)}),o&&each$f(r,function(s){n.hasOwnProperty(s)&&hasKeys(n[s])?a[s]=clone$4(n[s]):delete a[s]})}function applyVisual(a,n,r,o,s,l){var c={};each$f(a,function(g){var y=VisualMapping.prepareVisualTypes(n[g]);c[g]=y});var u;function d(g){return getItemVisualFromData(r,u,g)}function f(g,y){setItemVisualFromData(r,u,g,y)}r.each(v);function v(g,y){u=g;var _=r.getRawDataItem(u);if(!(_&&_.visualMap===!1))for(var S=o.call(s,g),x=n[S],T=c[S],w=0,E=T.length;w<E;w++){var P=T[w];x[P]&&x[P].applyVisual(g,d,f)}}}function incrementalApplyVisual(a,n,r,o){var s={};return each$f(a,function(l){var c=VisualMapping.prepareVisualTypes(n[l]);s[l]=c}),{progress:function(c,u){var d;o!=null&&(d=u.getDimensionIndex(o));function f(L){return getItemVisualFromData(u,g,L)}function v(L,$){setItemVisualFromData(u,g,L,$)}for(var g,y=u.getStore();(g=c.next())!=null;){var _=u.getRawDataItem(g);if(!(_&&_.visualMap===!1))for(var S=o!=null?y.get(d,g):g,x=r(S),T=n[x],w=s[x],E=0,P=w.length;E<P;E++){var D=w[E];T[D]&&T[D].applyVisual(S,f,v)}}}}}function makeBrushCommonSelectorForSeries(a){var n=a.brushType,r={point:function(o){return selector[n].point(o,r,a)},rect:function(o){return selector[n].rect(o,r,a)}};return r}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,n,r){return a&&r.boundingRect.contain(a[0],a[1])},rect:function(a,n,r){return a&&r.boundingRect.intersect(a)}},polygon:{point:function(a,n,r){return a&&r.boundingRect.contain(a[0],a[1])&&contain(r.range,a[0],a[1])},rect:function(a,n,r){var o=r.range;if(!a||o.length<=1)return!1;var s=a.x,l=a.y,c=a.width,u=a.height,d=o[0];if(contain(o,s,l)||contain(o,s+c,l)||contain(o,s,l+u)||contain(o,s+c,l+u)||BoundingRect.create(a).contain(d[0],d[1])||linePolygonIntersect(s,l,s+c,l,o)||linePolygonIntersect(s,l,s,l+u,o)||linePolygonIntersect(s+c,l,s+c,l+u,o)||linePolygonIntersect(s,l+u,s+c,l+u,o))return!0}}};function getLineSelectors(a){var n=["x","y"],r=["width","height"];return{point:function(o,s,l){if(o){var c=l.range,u=o[a];return inLineRange(u,c)}},rect:function(o,s,l){if(o){var c=l.range,u=[o[n[a]],o[n[a]]+o[r[a]]];return u[1]<u[0]&&u.reverse(),inLineRange(u[0],c)||inLineRange(u[1],c)||inLineRange(c[0],u)||inLineRange(c[1],u)}}}}function inLineRange(a,n){return n[0]<=a&&a<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(a){a.eachComponent({mainType:"brush"},function(n){var r=n.brushTargetManager=new BrushTargetManager(n.option,a);r.setInputRanges(n.areas,a)})}function brushVisual(a,n,r){var o=[],s,l;a.eachComponent({mainType:"brush"},function(c){r&&r.type==="takeGlobalCursor"&&c.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),layoutCovers(a),a.eachComponent({mainType:"brush"},function(c,u){var d={brushId:c.id,brushIndex:u,brushName:c.name,areas:clone$4(c.areas),selected:[]};o.push(d);var f=c.option,v=f.brushLink,g=[],y=[],_=[],S=!1;u||(s=f.throttleType,l=f.throttleDelay);var x=map$1(c.areas,function(L){var $=boundingRectBuilders[L.brushType],O=defaults({boundingRect:$?$(L):void 0},L);return O.selectors=makeBrushCommonSelectorForSeries(O),O}),T=createVisualMappings(c.option,STATE_LIST,function(L){L.mappingMethod="fixed"});isArray$1(v)&&each$f(v,function(L){g[L]=1});function w(L){return v==="all"||!!g[L]}function E(L){return!!L.length}a.eachSeries(function(L,$){var O=_[$]=[];L.subType==="parallel"?P(L,$):D(L,$,O)});function P(L,$){var O=L.coordinateSystem;S=S||O.hasAxisBrushed(),w($)&&O.eachActiveState(L.getData(),function(B,V){B==="active"&&(y[V]=1)})}function D(L,$,O){if(!(!L.brushSelector||brushModelNotControll(c,$))&&(each$f(x,function(V){c.brushTargetManager.controlSeries(V,L,a)&&O.push(V),S=S||E(O)}),w($)&&E(O))){var B=L.getData();B.each(function(V){checkInRange(L,O,B,V)&&(y[V]=1)})}}a.eachSeries(function(L,$){var O={seriesId:L.id,seriesIndex:$,seriesName:L.name,dataIndex:[]};d.selected.push(O);var B=_[$],V=L.getData(),F=w($)?function(U){return y[U]?(O.dataIndex.push(V.getRawIndex(U)),"inBrush"):"outOfBrush"}:function(U){return checkInRange(L,B,V,U)?(O.dataIndex.push(V.getRawIndex(U)),"inBrush"):"outOfBrush"};(w($)?S:E(B))&&applyVisual(STATE_LIST,T,V,F)})}),dispatchAction$1(n,s,l,o,r)}function dispatchAction$1(a,n,r,o,s){if(s){var l=a.getZr();if(!l[DISPATCH_FLAG]){l[DISPATCH_METHOD]||(l[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(l,DISPATCH_METHOD,r,n);c(a,o)}}}function doDispatch(a,n){if(!a.isDisposed()){var r=a.getZr();r[DISPATCH_FLAG]=!0,a.dispatchAction({type:"brushSelect",batch:n}),r[DISPATCH_FLAG]=!1}}function checkInRange(a,n,r,o){for(var s=0,l=n.length;s<l;s++){var c=n[s];if(a.brushSelector(o,r,c.selectors,c))return!0}}function brushModelNotControll(a,n){var r=a.option.seriesIndex;return r!=null&&r!=="all"&&(isArray$1(r)?indexOf(r,n)<0:n!==r)}var boundingRectBuilders={rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(a){for(var n,r=a.range,o=0,s=r.length;o<s;o++){n=n||[[1/0,-1/0],[1/0,-1/0]];var l=r[o];l[0]<n[0][0]&&(n[0][0]=l[0]),l[0]>n[0][1]&&(n[0][1]=l[0]),l[1]<n[1][0]&&(n[1][0]=l[1]),l[1]>n[1][1]&&(n[1][1]=l[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var BrushView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){this.ecModel=r,this.api=o,this.model,(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(r,o,s,l){this.model=r,this._updateController(r,o,s,l)},n.prototype.updateTransform=function(r,o,s,l){layoutCovers(o),this._updateController(r,o,s,l)},n.prototype.updateVisual=function(r,o,s,l){this.updateTransform(r,o,s,l)},n.prototype.updateView=function(r,o,s,l){this._updateController(r,o,s,l)},n.prototype._updateController=function(r,o,s,l){(!l||l.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(s)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(r){var o=this.model.id,s=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(s),$from:o}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(s),$from:o})},n.type="brush",n}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.areas=[],r.brushOption={},r}return n.prototype.optionUpdated=function(r,o){var s=this.option;!o&&replaceVisualOption(s,r,["inBrush","outOfBrush"]);var l=s.inBrush=s.inBrush||{};s.outOfBrush=s.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},l.hasOwnProperty("liftZ")||(l.liftZ=5)},n.prototype.setAreas=function(r){r&&(this.areas=map$1(r,function(o){return generateBrushOption(this.option,o)},this))},n.prototype.setBrushOption=function(r){this.brushOption=generateBrushOption(this.option,r),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n}(ComponentModel);function generateBrushOption(a,n){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Model(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},n,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,s){var l,c,u;o.eachComponent({mainType:"brush"},function(d){l=d.brushType,c=d.brushOption.brushMode||"single",u=u||!!d.areas.length}),this._brushType=l,this._brushMode=c,each$f(r.get("type",!0),function(d){r.setIconStatus(d,(d==="keep"?c==="multiple":d==="clear"?u:d===l)?"emphasis":"normal")})},n.prototype.updateView=function(r,o,s){this.render(r,o,s)},n.prototype.getIcons=function(){var r=this.model,o=r.get("icon",!0),s={};return each$f(r.get("type",!0),function(l){o[l]&&(s[l]=o[l])}),s},n.prototype.onclick=function(r,o,s){var l=this._brushType,c=this._brushMode;s==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:s==="keep"?l:l===s?!1:s,brushMode:s==="keep"?c==="multiple"?"single":"multiple":c}})},n.getDefaultOption=function(r){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return o},n}(ToolboxFeature);function install$h(a){a.registerComponentView(BrushView),a.registerComponentModel(BrushModel),a.registerPreprocessor(brushPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,brushVisual),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,r){r.eachComponent({mainType:"brush",query:n},function(o){o.setAreas(n.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode={type:"box",ignoreSize:!0},r}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n}(ComponentModel),TitleView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,s){if(this.group.removeAll(),!!r.get("show")){var l=this.group,c=r.getModel("textStyle"),u=r.getModel("subtextStyle"),d=r.get("textAlign"),f=retrieve2(r.get("textBaseline"),r.get("textVerticalAlign")),v=new ZRText({style:createTextStyle(c,{text:r.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),g=v.getBoundingRect(),y=r.get("subtext"),_=new ZRText({style:createTextStyle(u,{text:y,fill:u.getTextColor(),y:g.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),S=r.get("link"),x=r.get("sublink"),T=r.get("triggerEvent",!0);v.silent=!S&&!T,_.silent=!x&&!T,S&&v.on("click",function(){windowOpen(S,"_"+r.get("target"))}),x&&_.on("click",function(){windowOpen(x,"_"+r.get("subtarget"))}),getECData(v).eventData=getECData(_).eventData=T?{componentType:"title",componentIndex:r.componentIndex}:null,l.add(v),y&&l.add(_);var w=l.getBoundingRect(),E=r.getBoxLayoutParams();E.width=w.width,E.height=w.height;var P=getLayoutRect(E,{width:s.getWidth(),height:s.getHeight()},r.get("padding"));d||(d=r.get("left")||r.get("right"),d==="middle"&&(d="center"),d==="right"?P.x+=P.width:d==="center"&&(P.x+=P.width/2)),f||(f=r.get("top")||r.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?P.y+=P.height:f==="middle"&&(P.y+=P.height/2),f=f||"top"),l.x=P.x,l.y=P.y,l.markRedraw();var D={align:d,verticalAlign:f};v.setStyle(D),_.setStyle(D),w=l.getBoundingRect();var L=P.margin,$=r.getItemStyle(["color","opacity"]);$.fill=r.get("backgroundColor");var O=new Rect$2({shape:{x:w.x-L[3],y:w.y-L[0],width:w.width+L[1]+L[3],height:w.height+L[0]+L[2],r:r.get("borderRadius")},style:$,subPixelOptimize:!0,silent:!0});l.add(O)}},n.type="title",n}(ComponentView);function install$g(a){a.registerComponentModel(TitleModel),a.registerComponentView(TitleView)}var TimelineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode="box",r}return n.prototype.init=function(r,o,s){this.mergeDefaultAndTheme(r,s),this._initData()},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var o=this._data.count();this.option.loop?r=(r%o+o)%o:(r>=o&&(r=o-1),r<0&&(r=0)),this.option.currentIndex=r},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(r){this.option.autoPlay=!!r},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var r=this.option,o=r.data||[],s=r.axisType,l=this._names=[],c;s==="category"?(c=[],each$f(o,function(f,v){var g=convertOptionIdName(getDataItemValue(f),""),y;isObject$3(f)?(y=clone$4(f),y.value=v):y=v,c.push(y),l.push(g)})):c=o;var u={category:"ordinal",time:"time",value:"number"}[s]||"number",d=this._data=new SeriesData([{name:"value",type:u}],this);d.initData(c,l)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n}(ComponentModel),SliderTimelineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="timeline",n}(ComponentView),TimelineAxis=function(a){__extends(n,a);function n(r,o,s,l){var c=a.call(this,r,o,s)||this;return c.type=l||"value",c}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){this.api=o},n.prototype.render=function(r,o,s){if(this.model=r,this.api=s,this.ecModel=o,this.group.removeAll(),r.get("show",!0)){var l=this._layout(r,s),c=this._createGroup("_mainGroup"),u=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(l,r);r.formatTooltip=function(f){var v=d.scale.getLabel({value:f});return createTooltipMarkup("nameValue",{noName:!0,value:v})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(f){this["_render"+f](l,c,d,r)},this),this._renderAxisLabel(l,u,d,r),this._position(l,r)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(r,o){var s=r.get(["label","position"]),l=r.get("orient"),c=getViewRect(r,o),u;s==null||s==="auto"?u=l==="horizontal"?c.y+c.height/2<o.getHeight()/2?"-":"+":c.x+c.width/2<o.getWidth()/2?"+":"-":isString(s)?u={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][s]:u=s;var d={horizontal:"center",vertical:u>=0||u==="+"?"left":"right"},f={horizontal:u>=0||u==="+"?"top":"bottom",vertical:"middle"},v={horizontal:0,vertical:PI/2},g=l==="vertical"?c.height:c.width,y=r.getModel("controlStyle"),_=y.get("show",!0),S=_?y.get("itemSize"):0,x=_?y.get("itemGap"):0,T=S+x,w=r.get(["label","rotate"])||0;w=w*PI/180;var E,P,D,L=y.get("position",!0),$=_&&y.get("showPlayBtn",!0),O=_&&y.get("showPrevBtn",!0),B=_&&y.get("showNextBtn",!0),V=0,F=g;L==="left"||L==="bottom"?($&&(E=[0,0],V+=T),O&&(P=[V,0],V+=T),B&&(D=[F-S,0],F-=T)):($&&(E=[F-S,0],F-=T),O&&(P=[0,0],V+=T),B&&(D=[F-S,0],F-=T));var U=[V,F];return r.get("inverse")&&U.reverse(),{viewRect:c,mainLength:g,orient:l,rotation:v[l],labelRotation:w,labelPosOpt:u,labelAlign:r.get(["label","align"])||d[l],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||f[l],playPosition:E,prevBtnPosition:P,nextBtnPosition:D,axisExtent:U,controlSize:S,controlGap:x}},n.prototype._position=function(r,o){var s=this._mainGroup,l=this._labelGroup,c=r.viewRect;if(r.orient==="vertical"){var u=create$1(),d=c.x,f=c.y+c.height;translate(u,u,[-d,-f]),rotate(u,u,-PI/2),translate(u,u,[d,f]),c=c.clone(),c.applyTransform(u)}var v=E(c),g=E(s.getBoundingRect()),y=E(l.getBoundingRect()),_=[s.x,s.y],S=[l.x,l.y];S[0]=_[0]=v[0][0];var x=r.labelPosOpt;if(x==null||isString(x)){var T=x==="+"?0:1;P(_,g,v,1,T),P(S,y,v,1,1-T)}else{var T=x>=0?0:1;P(_,g,v,1,T),S[1]=_[1]+x}s.setPosition(_),l.setPosition(S),s.rotation=l.rotation=r.rotation,w(s),w(l);function w(D){D.originX=v[0][0]-D.x,D.originY=v[1][0]-D.y}function E(D){return[[D.x,D.x+D.width],[D.y,D.y+D.height]]}function P(D,L,$,O,B){D[O]+=$[O][B]-L[O][B]}},n.prototype._createAxis=function(r,o){var s=o.getData(),l=o.get("axisType"),c=createScaleByModel(o,l);c.getTicks=function(){return s.mapArray(["value"],function(f){return{value:f}})};var u=s.getDataExtent("value");c.setExtent(u[0],u[1]),c.calcNiceTicks();var d=new TimelineAxis("value",c,r.axisExtent,l);return d.model=o,d},n.prototype._createGroup=function(r){var o=this[r]=new Group$4;return this.group.add(o),o},n.prototype._renderAxisLine=function(r,o,s,l){var c=s.getExtent();if(l.get(["lineStyle","show"])){var u=new Line$2({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},l.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(u);var d=this._progressLine=new Line$2({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:u.style.lineWidth},l.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(d)}},n.prototype._renderAxisTick=function(r,o,s,l){var c=this,u=l.getData(),d=s.scale.getTicks();this._tickSymbols=[],each$f(d,function(f){var v=s.dataToCoord(f.value),g=u.getItemModel(f.value),y=g.getModel("itemStyle"),_=g.getModel(["emphasis","itemStyle"]),S=g.getModel(["progress","itemStyle"]),x={x:v,y:0,onclick:bind$1(c._changeTimeline,c,f.value)},T=giveSymbol(g,y,o,x);T.ensureState("emphasis").style=_.getItemStyle(),T.ensureState("progress").style=S.getItemStyle(),enableHoverEmphasis(T);var w=getECData(T);g.get("tooltip")?(w.dataIndex=f.value,w.dataModel=l):w.dataIndex=w.dataModel=null,c._tickSymbols.push(T)})},n.prototype._renderAxisLabel=function(r,o,s,l){var c=this,u=s.getLabelModel();if(u.get("show")){var d=l.getData(),f=s.getViewLabels();this._tickLabels=[],each$f(f,function(v){var g=v.tickValue,y=d.getItemModel(g),_=y.getModel("label"),S=y.getModel(["emphasis","label"]),x=y.getModel(["progress","label"]),T=s.dataToCoord(v.tickValue),w=new ZRText({x:T,y:0,rotation:r.labelRotation-r.rotation,onclick:bind$1(c._changeTimeline,c,g),silent:!1,style:createTextStyle(_,{text:v.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});w.ensureState("emphasis").style=createTextStyle(S),w.ensureState("progress").style=createTextStyle(x),o.add(w),enableHoverEmphasis(w),labelDataIndexStore(w).dataIndex=g,c._tickLabels.push(w)})}},n.prototype._renderControl=function(r,o,s,l){var c=r.controlSize,u=r.rotation,d=l.getModel("controlStyle").getItemStyle(),f=l.getModel(["emphasis","controlStyle"]).getItemStyle(),v=l.getPlayState(),g=l.get("inverse",!0);y(r.nextBtnPosition,"next",bind$1(this._changeTimeline,this,g?"-":"+")),y(r.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,g?"+":"-")),y(r.playPosition,v?"stop":"play",bind$1(this._handlePlayClick,this,!v),!0);function y(_,S,x,T){if(_){var w=parsePercent$1(retrieve2(l.get(["controlStyle",S+"BtnSize"]),c),c),E=[0,-w/2,w,w],P=makeControlIcon(l,S+"Icon",E,{x:_[0],y:_[1],originX:c/2,originY:0,rotation:T?-u:0,rectHover:!0,style:d,onclick:x});P.ensureState("emphasis").style=f,o.add(P),enableHoverEmphasis(P)}}},n.prototype._renderCurrentPointer=function(r,o,s,l){var c=l.getData(),u=l.getCurrentIndex(),d=c.getItemModel(u).getModel("checkpointStyle"),f=this,v={onCreate:function(g){g.draggable=!0,g.drift=bind$1(f._handlePointerDrag,f),g.ondragend=bind$1(f._handlePointerDragend,f),pointerMoveTo(g,f._progressLine,u,s,l,!0)},onUpdate:function(g){pointerMoveTo(g,f._progressLine,u,s,l)}};this._currentPointer=giveSymbol(d,d,this._mainGroup,{},this._currentPointer,v)},n.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},n.prototype._handlePointerDrag=function(r,o,s){this._clearTimer(),this._pointerChangeTimeline([s.offsetX,s.offsetY])},n.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},n.prototype._pointerChangeTimeline=function(r,o){var s=this._toAxisCoord(r)[0],l=this._axis,c=asc$2(l.getExtent().slice());s>c[1]&&(s=c[1]),s<c[0]&&(s=c[0]),this._currentPointer.x=s,this._currentPointer.markRedraw();var u=this._progressLine;u&&(u.shape.x2=s,u.dirty());var d=this._findNearestTick(s),f=this.model;(o||d!==f.getCurrentIndex()&&f.get("realtime"))&&this._changeTimeline(d)},n.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=r.model;r._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(r){var o=this._mainGroup.getLocalTransform();return applyTransform(r,o,!0)},n.prototype._findNearestTick=function(r){var o=this.model.getData(),s=1/0,l,c=this._axis;return o.each(["value"],function(u,d){var f=c.dataToCoord(u),v=Math.abs(f-r);v<s&&(s=v,l=d)}),l},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(r){var o=this.model.getCurrentIndex();r==="+"?r=o+1:r==="-"&&(r=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},n.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),o=this._tickSymbols,s=this._tickLabels;if(o)for(var l=0;l<o.length;l++)o&&o[l]&&o[l].toggleState("progress",l<r);if(s)for(var l=0;l<s.length;l++)s&&s[l]&&s[l].toggleState("progress",labelDataIndexStore(s[l]).dataIndex<=r)},n.type="timeline.slider",n}(TimelineView);function createScaleByModel(a,n){if(n=n||a.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},a.get("padding"))}function makeControlIcon(a,n,r,o){var s=o.style,l=createIcon(a.get(["controlStyle",n]),o||{},new BoundingRect(r[0],r[1],r[2],r[3]));return s&&l.setStyle(s),l}function giveSymbol(a,n,r,o,s,l){var c=n.get("color");if(s)s.setColor(c),r.add(s),l&&l.onUpdate(s);else{var u=a.get("symbol");s=createSymbol$1(u,-1,-1,2,2,c),s.setStyle("strokeNoScale",!0),r.add(s),l&&l.onCreate(s)}var d=n.getItemStyle(["color"]);s.setStyle(d),o=merge({rectHover:!0,z2:100},o,!0);var f=normalizeSymbolSize(a.get("symbolSize"));o.scaleX=f[0]/2,o.scaleY=f[1]/2;var v=normalizeSymbolOffset(a.get("symbolOffset"),f);v&&(o.x=(o.x||0)+v[0],o.y=(o.y||0)+v[1]);var g=a.get("symbolRotate");return o.rotation=(g||0)*Math.PI/180||0,s.attr(o),s.updateTransform(),s}function pointerMoveTo(a,n,r,o,s,l){if(!a.dragging){var c=s.getModel("checkpointStyle"),u=o.dataToCoord(s.getData().get("value",r));if(l||!c.get("animation",!0))a.attr({x:u,y:0}),n&&n.attr({shape:{x2:u}});else{var d={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:u,y:0},d),n&&n.animateTo({shape:{x2:u}},d)}}}function installTimelineAction(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,r,o){var s=r.getComponent("timeline");return s&&n.currentIndex!=null&&(s.setCurrentIndex(n.currentIndex),!s.get("loop",!0)&&s.isIndexMax()&&s.getPlayState()&&(s.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),r.resetOption("timeline",{replaceMerge:s.get("replaceMerge",!0)}),defaults({currentIndex:s.option.currentIndex},n)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,r){var o=r.getComponent("timeline");o&&n.playState!=null&&o.setPlayState(n.playState)})}function timelinePreprocessor(a){var n=a&&a.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(r){r&&compatibleEC2(r)})}function compatibleEC2(a){var n=a.type,r={number:"value",time:"time"};if(r[n]&&(a.axisType=r[n],delete a.type),transferItem(a),has$1(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});has$1(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}each$f(a.data||[],function(s){isObject$3(s)&&!isArray$1(s)&&(!has$1(s,"value")&&has$1(s,"name")&&(s.value=s.name),transferItem(s))})}function transferItem(a){var n=a.itemStyle||(a.itemStyle={}),r=n.emphasis||(n.emphasis={}),o=a.label||a.label||{},s=o.normal||(o.normal={}),l={normal:1,emphasis:1};each$f(o,function(c,u){!l[u]&&!has$1(s,u)&&(s[u]=c)}),r.label&&!has$1(o,"emphasis")&&(o.emphasis=r.label,delete r.label)}function has$1(a,n){return a.hasOwnProperty(n)}function install$f(a){a.registerComponentModel(SliderTimelineModel),a.registerComponentView(SliderTimelineView),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(a),a.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(a,n){if(!a)return!1;for(var r=isArray$1(a)?a:[a],o=0;o<r.length;o++)if(r[o]&&r[o][n])return!0;return!1}function fillLabel(a){defaultEmphasis(a,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.createdBySelf=!1,r}return n.prototype.init=function(r,o,s){this.mergeDefaultAndTheme(r,s),this._mergeOption(r,s,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},n.prototype.mergeOption=function(r,o){this._mergeOption(r,o,!1,!1)},n.prototype._mergeOption=function(r,o,s,l){var c=this.mainType;s||o.eachSeries(function(u){var d=u.get(this.mainType,!0),f=inner$5(u)[c];if(!d||!d.data){inner$5(u)[c]=null;return}f?f._mergeOption(d,o,!0):(l&&fillLabel(d),each$f(d.data,function(v){v instanceof Array?(fillLabel(v[0]),fillLabel(v[1])):fillLabel(v)}),f=this.createMarkerModelFromSeries(d,this,o),extend(f,{mainType:this.mainType,seriesIndex:u.seriesIndex,name:u.name,createdBySelf:!0}),f.__hostSeries=u),inner$5(u)[c]=f},this)},n.prototype.formatTooltip=function(r,o,s){var l=this.getData(),c=this.getRawValue(r),u=l.getName(r);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:u,value:c,noName:!u,noValue:c==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(r){this._data=r},n.prototype.getDataParams=function(r,o){var s=DataFormatMixin.prototype.getDataParams.call(this,r,o),l=this.__hostSeries;return l&&(s.seriesId=l.id,s.seriesName=l.name,s.seriesType=l.subType),s},n.getMarkerModelFromSeries=function(r,o){return inner$5(r)[o]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,s){return new n(r,o,s)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(MarkerModel);function hasXOrY(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(a,n,r,o,s,l){var c=[],u=isDimensionStacked(n,o),d=u?n.getCalculationInfo("stackResultDimension"):o,f=numCalculate(n,d,a),v=n.indicesOfNearest(d,f)[0];c[s]=n.get(r,v),c[l]=n.get(d,v);var g=n.get(o,v),y=getPrecision(n.get(o,v));return y=Math.min(y,20),y>=0&&(c[l]=+c[l].toFixed(y)),[c,g]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(a,n){if(n){var r=a.getData(),o=a.coordinateSystem,s=o&&o.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(s)){var l=getAxisInfo(n,r,o,a);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&l.baseAxis&&l.valueAxis){var c=indexOf(s,l.baseAxis.dim),u=indexOf(s,l.valueAxis.dim),d=markerTypeCalculator[n.type](r,l.baseDataDim,l.valueDataDim,c,u);n.coord=d[0],n.value=d[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(s))n.coord=[];else for(var f=n.coord,v=0;v<2;v++)markerTypeCalculator[f[v]]&&(f[v]=numCalculate(r,r.mapDimension(s[v]),f[v]));return n}}function getAxisInfo(a,n,r,o){var s={};return a.valueIndex!=null||a.valueDim!=null?(s.valueDataDim=a.valueIndex!=null?n.getDimension(a.valueIndex):a.valueDim,s.valueAxis=r.getAxis(dataDimToCoordDim(o,s.valueDataDim)),s.baseAxis=r.getOtherAxis(s.valueAxis),s.baseDataDim=n.mapDimension(s.baseAxis.dim)):(s.baseAxis=o.getBaseAxis(),s.valueAxis=r.getOtherAxis(s.baseAxis),s.baseDataDim=n.mapDimension(s.baseAxis.dim),s.valueDataDim=n.mapDimension(s.valueAxis.dim)),s}function dataDimToCoordDim(a,n){var r=a.getData().getDimensionInfo(n);return r&&r.coordDim}function dataFilter(a,n){return a&&a.containData&&n.coord&&!hasXOrY(n)?a.containData(n.coord):!0}function zoneFilter(a,n,r){return a&&a.containZone&&n.coord&&r.coord&&!hasXOrY(n)&&!hasXOrY(r)?a.containZone(n.coord,r.coord):!0}function createMarkerDimValueGetter(a,n){return a?function(r,o,s,l){var c=l<2?r.coord&&r.coord[l]:r.value;return parseDataValue(c,n[l])}:function(r,o,s,l){return parseDataValue(r.value,n[l])}}function numCalculate(a,n,r){if(r==="average"){var o=0,s=0;return a.each(n,function(l,c){isNaN(l)||(o+=l,s++)}),o/s}else return r==="median"?a.getMedian(n):a.getDataExtent(n)[r==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(r,o,s){var l=this,c=this.markerGroupMap;c.each(function(u){inner$4(u).keep=!1}),o.eachSeries(function(u){var d=MarkerModel.getMarkerModelFromSeries(u,l.type);d&&l.renderSeries(u,d,o,s)}),c.each(function(u){!inner$4(u).keep&&l.group.remove(u.group)})},n.prototype.markKeep=function(r){inner$4(r).keep=!0},n.prototype.toggleBlurSeries=function(r,o){var s=this;each$f(r,function(l){var c=MarkerModel.getMarkerModelFromSeries(l,s.type);if(c){var u=c.getData();u.eachItemGraphicEl(function(d){d&&(o?enterBlur(d):leaveBlur(d))})}})},n.type="marker",n}(ComponentView);function updateMarkerLayout(a,n,r){var o=n.coordinateSystem;a.each(function(s){var l=a.getItemModel(s),c,u=parsePercent(l.get("x"),r.getWidth()),d=parsePercent(l.get("y"),r.getHeight());if(!isNaN(u)&&!isNaN(d))c=[u,d];else if(n.getMarkerPosition)c=n.getMarkerPosition(a.getValues(a.dimensions,s));else if(o){var f=a.get(o.dimensions[0],s),v=a.get(o.dimensions[1],s);c=o.dataToPoint([f,v])}isNaN(u)||(c[0]=u),isNaN(d)||(c[1]=d),a.setItemLayout(s,c)})}var MarkPointView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,s){o.eachSeries(function(l){var c=MarkerModel.getMarkerModelFromSeries(l,"markPoint");c&&(updateMarkerLayout(c.getData(),l,s),this.markerGroupMap.get(l.id).updateLayout())},this)},n.prototype.renderSeries=function(r,o,s,l){var c=r.coordinateSystem,u=r.id,d=r.getData(),f=this.markerGroupMap,v=f.get(u)||f.set(u,new SymbolDraw),g=createData(c,r,o);o.setData(g),updateMarkerLayout(o.getData(),r,l),g.each(function(y){var _=g.getItemModel(y),S=_.getShallow("symbol"),x=_.getShallow("symbolSize"),T=_.getShallow("symbolRotate"),w=_.getShallow("symbolOffset"),E=_.getShallow("symbolKeepAspect");if(isFunction(S)||isFunction(x)||isFunction(T)||isFunction(w)){var P=o.getRawValue(y),D=o.getDataParams(y);isFunction(S)&&(S=S(P,D)),isFunction(x)&&(x=x(P,D)),isFunction(T)&&(T=T(P,D)),isFunction(w)&&(w=w(P,D))}var L=_.getModel("itemStyle").getItemStyle(),$=getVisualFromData(d,"color");L.fill||(L.fill=$),g.setItemVisual(y,{symbol:S,symbolSize:x,symbolRotate:T,symbolOffset:w,symbolKeepAspect:E,style:L})}),v.updateData(g),this.group.add(v.group),g.eachItemGraphicEl(function(y){y.traverse(function(_){getECData(_).dataModel=o})}),this.markKeep(v),v.group.silent=o.get("silent")||r.get("silent")},n.type="markPoint",n}(MarkerView);function createData(a,n,r){var o;a?o=map$1(a&&a.dimensions,function(u){var d=n.getData().getDimensionInfo(n.getData().mapDimension(u))||{};return extend(extend({},d),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var s=new SeriesData(o,r),l=map$1(r.get("data"),curry$1(dataTransform,n));a&&(l=filter(l,curry$1(dataFilter,a)));var c=createMarkerDimValueGetter(!!a,o);return s.initData(l,null,c),s}function install$e(a){a.registerComponentModel(MarkPointModel),a.registerComponentView(MarkPointView),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,s){return new n(r,o,s)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n}(MarkerModel),inner$3=makeInner(),markLineTransform=function(a,n,r,o){var s=a.getData(),l;if(isArray$1(o))l=o;else{var c=o.type;if(c==="min"||c==="max"||c==="average"||c==="median"||o.xAxis!=null||o.yAxis!=null){var u=void 0,d=void 0;if(o.yAxis!=null||o.xAxis!=null)u=n.getAxis(o.yAxis!=null?"y":"x"),d=retrieve(o.yAxis,o.xAxis);else{var f=getAxisInfo(o,s,n,a);u=f.valueAxis;var v=getStackedDimension(s,f.valueDataDim);d=numCalculate(s,v,c)}var g=u.dim==="x"?0:1,y=1-g,_=clone$4(o),S={coord:[]};_.type=null,_.coord=[],_.coord[y]=-1/0,S.coord[y]=1/0;var x=r.get("precision");x>=0&&isNumber(d)&&(d=+d.toFixed(Math.min(x,20))),_.coord[g]=S.coord[g]=d,l=[_,S,{type:c,valueIndex:o.valueIndex,value:d}]}else l=[]}var T=[dataTransform(a,l[0]),dataTransform(a,l[1]),extend({},l[2])];return T[2].type=T[2].type||null,merge(T[2],T[0]),merge(T[2],T[1]),T};function isInfinity$1(a){return!isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,n,r,o){var s=1-a,l=o.dimensions[a];return isInfinity$1(n[s])&&isInfinity$1(r[s])&&n[a]===r[a]&&o.getAxis(l).containData(n[a])}function markLineFilter(a,n){if(a.type==="cartesian2d"){var r=n[0].coord,o=n[1].coord;if(r&&o&&(ifMarkLineHasOnlyDim(1,r,o,a)||ifMarkLineHasOnlyDim(0,r,o,a)))return!0}return dataFilter(a,n[0])&&dataFilter(a,n[1])}function updateSingleMarkerEndLayout(a,n,r,o,s){var l=o.coordinateSystem,c=a.getItemModel(n),u,d=parsePercent(c.get("x"),s.getWidth()),f=parsePercent(c.get("y"),s.getHeight());if(!isNaN(d)&&!isNaN(f))u=[d,f];else{if(o.getMarkerPosition)u=o.getMarkerPosition(a.getValues(a.dimensions,n));else{var v=l.dimensions,g=a.get(v[0],n),y=a.get(v[1],n);u=l.dataToPoint([g,y])}if(isCoordinateSystemType(l,"cartesian2d")){var _=l.getAxis("x"),S=l.getAxis("y"),v=l.dimensions;isInfinity$1(a.get(v[0],n))?u[0]=_.toGlobalCoord(_.getExtent()[r?0:1]):isInfinity$1(a.get(v[1],n))&&(u[1]=S.toGlobalCoord(S.getExtent()[r?0:1]))}isNaN(d)||(u[0]=d),isNaN(f)||(u[1]=f)}a.setItemLayout(n,u)}var MarkLineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,s){o.eachSeries(function(l){var c=MarkerModel.getMarkerModelFromSeries(l,"markLine");if(c){var u=c.getData(),d=inner$3(c).from,f=inner$3(c).to;d.each(function(v){updateSingleMarkerEndLayout(d,v,!0,l,s),updateSingleMarkerEndLayout(f,v,!1,l,s)}),u.each(function(v){u.setItemLayout(v,[d.getItemLayout(v),f.getItemLayout(v)])}),this.markerGroupMap.get(l.id).updateLayout()}},this)},n.prototype.renderSeries=function(r,o,s,l){var c=r.coordinateSystem,u=r.id,d=r.getData(),f=this.markerGroupMap,v=f.get(u)||f.set(u,new LineDraw);this.group.add(v.group);var g=createList$1(c,r,o),y=g.from,_=g.to,S=g.line;inner$3(o).from=y,inner$3(o).to=_,o.setData(S);var x=o.get("symbol"),T=o.get("symbolSize"),w=o.get("symbolRotate"),E=o.get("symbolOffset");isArray$1(x)||(x=[x,x]),isArray$1(T)||(T=[T,T]),isArray$1(w)||(w=[w,w]),isArray$1(E)||(E=[E,E]),g.from.each(function(D){P(y,D,!0),P(_,D,!1)}),S.each(function(D){var L=S.getItemModel(D).getModel("lineStyle").getLineStyle();S.setItemLayout(D,[y.getItemLayout(D),_.getItemLayout(D)]),L.stroke==null&&(L.stroke=y.getItemVisual(D,"style").fill),S.setItemVisual(D,{fromSymbolKeepAspect:y.getItemVisual(D,"symbolKeepAspect"),fromSymbolOffset:y.getItemVisual(D,"symbolOffset"),fromSymbolRotate:y.getItemVisual(D,"symbolRotate"),fromSymbolSize:y.getItemVisual(D,"symbolSize"),fromSymbol:y.getItemVisual(D,"symbol"),toSymbolKeepAspect:_.getItemVisual(D,"symbolKeepAspect"),toSymbolOffset:_.getItemVisual(D,"symbolOffset"),toSymbolRotate:_.getItemVisual(D,"symbolRotate"),toSymbolSize:_.getItemVisual(D,"symbolSize"),toSymbol:_.getItemVisual(D,"symbol"),style:L})}),v.updateData(S),g.line.eachItemGraphicEl(function(D){getECData(D).dataModel=o,D.traverse(function(L){getECData(L).dataModel=o})});function P(D,L,$){var O=D.getItemModel(L);updateSingleMarkerEndLayout(D,L,$,r,l);var B=O.getModel("itemStyle").getItemStyle();B.fill==null&&(B.fill=getVisualFromData(d,"color")),D.setItemVisual(L,{symbolKeepAspect:O.get("symbolKeepAspect"),symbolOffset:retrieve2(O.get("symbolOffset",!0),E[$?0:1]),symbolRotate:retrieve2(O.get("symbolRotate",!0),w[$?0:1]),symbolSize:retrieve2(O.get("symbolSize"),T[$?0:1]),symbol:retrieve2(O.get("symbol",!0),x[$?0:1]),style:B})}this.markKeep(v),v.group.silent=o.get("silent")||r.get("silent")},n.type="markLine",n}(MarkerView);function createList$1(a,n,r){var o;a?o=map$1(a&&a.dimensions,function(f){var v=n.getData().getDimensionInfo(n.getData().mapDimension(f))||{};return extend(extend({},v),{name:f,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var s=new SeriesData(o,r),l=new SeriesData(o,r),c=new SeriesData([],r),u=map$1(r.get("data"),curry$1(markLineTransform,n,a,r));a&&(u=filter(u,curry$1(markLineFilter,a)));var d=createMarkerDimValueGetter(!!a,o);return s.initData(map$1(u,function(f){return f[0]}),null,d),l.initData(map$1(u,function(f){return f[1]}),null,d),c.initData(map$1(u,function(f){return f[2]})),c.hasItemOption=!0,{from:s,to:l,line:c}}function install$d(a){a.registerComponentModel(MarkLineModel),a.registerComponentView(MarkLineView),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,s){return new n(r,o,s)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(a,n,r,o){var s=o[0],l=o[1];if(!(!s||!l)){var c=dataTransform(a,s),u=dataTransform(a,l),d=c.coord,f=u.coord;d[0]=retrieve(d[0],-1/0),d[1]=retrieve(d[1],-1/0),f[0]=retrieve(f[0],1/0),f[1]=retrieve(f[1],1/0);var v=mergeAll([{},c,u]);return v.coord=[c.coord,u.coord],v.x0=c.x,v.y0=c.y,v.x1=u.x,v.y1=u.y,v}};function isInfinity(a){return!isNaN(a)&&!isFinite(a)}function ifMarkAreaHasOnlyDim(a,n,r,o){var s=1-a;return isInfinity(n[s])&&isInfinity(r[s])}function markAreaFilter(a,n){var r=n.coord[0],o=n.coord[1],s={coord:r,x:n.x0,y:n.y0},l={coord:o,x:n.x1,y:n.y1};return isCoordinateSystemType(a,"cartesian2d")?r&&o&&(ifMarkAreaHasOnlyDim(1,r,o)||ifMarkAreaHasOnlyDim(0,r,o))?!0:zoneFilter(a,s,l):dataFilter(a,s)||dataFilter(a,l)}function getSingleMarkerEndPoint(a,n,r,o,s){var l=o.coordinateSystem,c=a.getItemModel(n),u,d=parsePercent(c.get(r[0]),s.getWidth()),f=parsePercent(c.get(r[1]),s.getHeight());if(!isNaN(d)&&!isNaN(f))u=[d,f];else{if(o.getMarkerPosition){var v=a.getValues(["x0","y0"],n),g=a.getValues(["x1","y1"],n),y=l.clampData(v),_=l.clampData(g),S=[];r[0]==="x0"?S[0]=y[0]>_[0]?g[0]:v[0]:S[0]=y[0]>_[0]?v[0]:g[0],r[1]==="y0"?S[1]=y[1]>_[1]?g[1]:v[1]:S[1]=y[1]>_[1]?v[1]:g[1],u=o.getMarkerPosition(S,r,!0)}else{var x=a.get(r[0],n),T=a.get(r[1],n),w=[x,T];l.clampData&&l.clampData(w,w),u=l.dataToPoint(w,!0)}if(isCoordinateSystemType(l,"cartesian2d")){var E=l.getAxis("x"),P=l.getAxis("y"),x=a.get(r[0],n),T=a.get(r[1],n);isInfinity(x)?u[0]=E.toGlobalCoord(E.getExtent()[r[0]==="x0"?0:1]):isInfinity(T)&&(u[1]=P.toGlobalCoord(P.getExtent()[r[1]==="y0"?0:1]))}isNaN(d)||(u[0]=d),isNaN(f)||(u[1]=f)}return u}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,s){o.eachSeries(function(l){var c=MarkerModel.getMarkerModelFromSeries(l,"markArea");if(c){var u=c.getData();u.each(function(d){var f=map$1(dimPermutations,function(g){return getSingleMarkerEndPoint(u,d,g,l,s)});u.setItemLayout(d,f);var v=u.getItemGraphicEl(d);v.setShape("points",f)})}},this)},n.prototype.renderSeries=function(r,o,s,l){var c=r.coordinateSystem,u=r.id,d=r.getData(),f=this.markerGroupMap,v=f.get(u)||f.set(u,{group:new Group$4});this.group.add(v.group),this.markKeep(v);var g=createList(c,r,o);o.setData(g),g.each(function(y){var _=map$1(dimPermutations,function(B){return getSingleMarkerEndPoint(g,y,B,r,l)}),S=c.getAxis("x").scale,x=c.getAxis("y").scale,T=S.getExtent(),w=x.getExtent(),E=[S.parse(g.get("x0",y)),S.parse(g.get("x1",y))],P=[x.parse(g.get("y0",y)),x.parse(g.get("y1",y))];asc$2(E),asc$2(P);var D=!(T[0]>E[1]||T[1]<E[0]||w[0]>P[1]||w[1]<P[0]),L=!D;g.setItemLayout(y,{points:_,allClipped:L});var $=g.getItemModel(y).getModel("itemStyle").getItemStyle(),O=getVisualFromData(d,"color");$.fill||($.fill=O,isString($.fill)&&($.fill=modifyAlpha($.fill,.4))),$.stroke||($.stroke=O),g.setItemVisual(y,"style",$)}),g.diff(inner$2(v).data).add(function(y){var _=g.getItemLayout(y);if(!_.allClipped){var S=new Polygon({shape:{points:_.points}});g.setItemGraphicEl(y,S),v.group.add(S)}}).update(function(y,_){var S=inner$2(v).data.getItemGraphicEl(_),x=g.getItemLayout(y);x.allClipped?S&&v.group.remove(S):(S?updateProps$1(S,{shape:{points:x.points}},o,y):S=new Polygon({shape:{points:x.points}}),g.setItemGraphicEl(y,S),v.group.add(S))}).remove(function(y){var _=inner$2(v).data.getItemGraphicEl(y);v.group.remove(_)}).execute(),g.eachItemGraphicEl(function(y,_){var S=g.getItemModel(_),x=g.getItemVisual(_,"style");y.useStyle(g.getItemVisual(_,"style")),setLabelStyle(y,getLabelStatesModels(S),{labelFetcher:o,labelDataIndex:_,defaultText:g.getName(_)||"",inheritColor:isString(x.fill)?modifyAlpha(x.fill,1):"#000"}),setStatesStylesFromModel(y,S),toggleHoverEmphasis(y,null,null,S.get(["emphasis","disabled"])),getECData(y).dataModel=o}),inner$2(v).data=g,v.group.silent=o.get("silent")||r.get("silent")},n.type="markArea",n}(MarkerView);function createList(a,n,r){var o,s,l=["x0","y0","x1","y1"];if(a){var c=map$1(a&&a.dimensions,function(f){var v=n.getData(),g=v.getDimensionInfo(v.mapDimension(f))||{};return extend(extend({},g),{name:f,ordinalMeta:null})});s=map$1(l,function(f,v){return{name:f,type:c[v%2].type}}),o=new SeriesData(s,r)}else s=[{name:"value",type:"float"}],o=new SeriesData(s,r);var u=map$1(r.get("data"),curry$1(markAreaTransform,n,a,r));a&&(u=filter(u,curry$1(markAreaFilter,a)));var d=a?function(f,v,g,y){var _=f.coord[Math.floor(y/2)][y%2];return parseDataValue(_,s[y])}:function(f,v,g,y){return parseDataValue(f.value,s[y])};return o.initData(u,null,d),o.hasItemOption=!0,o}function install$c(a){a.registerComponentModel(MarkAreaModel),a.registerComponentView(MarkAreaView),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(a,n){if(n==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode={type:"box",ignoreSize:!0},r}return n.prototype.init=function(r,o,s){this.mergeDefaultAndTheme(r,s),r.selected=r.selected||{},this._updateSelector(r)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),this._updateSelector(r)},n.prototype._updateSelector=function(r){var o=r.selector,s=this.ecModel;o===!0&&(o=r.selector=["all","inverse"]),isArray$1(o)&&each$f(o,function(l,c){isString(l)&&(l={type:l}),o[c]=merge(l,getDefaultSelectorOptions(s,l.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var o=!1,s=0;s<r.length;s++){var l=r[s].get("name");if(this.isSelected(l)){this.select(l),o=!0;break}}!o&&this.select(r[0].get("name"))}},n.prototype._updateData=function(r){var o=[],s=[];r.eachRawSeries(function(d){var f=d.name;s.push(f);var v;if(d.legendVisualProvider){var g=d.legendVisualProvider,y=g.getAllNames();r.isSeriesFiltered(d)||(s=s.concat(y)),y.length?o=o.concat(y):v=!0}else v=!0;v&&isNameSpecified(d)&&o.push(d.name)}),this._availableNames=s;var l=this.get("data")||o,c=createHashMap(),u=map$1(l,function(d){return(isString(d)||isNumber(d))&&(d={name:d}),c.get(d.name)?null:(c.set(d.name,!0),new Model(d,this,this.ecModel))},this);this._data=filter(u,function(d){return!!d})},n.prototype.getData=function(){return this._data},n.prototype.select=function(r){var o=this.option.selected,s=this.get("selectedMode");if(s==="single"){var l=this._data;each$f(l,function(c){o[c.get("name")]=!1})}o[r]=!0},n.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},n.prototype.toggleSelected=function(r){var o=this.option.selected;o.hasOwnProperty(r)||(o[r]=!0),this[o[r]?"unSelect":"select"](r)},n.prototype.allSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(s){o[s.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(s){var l=s.get("name",!0);o.hasOwnProperty(l)||(o[l]=!0),o[l]=!o[l]})},n.prototype.isSelected=function(r){var o=this.option.selected;return!(o.hasOwnProperty(r)&&!o[r])&&indexOf(this._availableNames,r)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(ComponentModel),curry=curry$1,each$3=each$f,Group$2=Group$4,LegendView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.newlineDisabled=!1,r}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$2),this.group.add(this._selectorGroup=new Group$2),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(r,o,s){var l=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var c=r.get("align"),u=r.get("orient");(!c||c==="auto")&&(c=r.get("left")==="right"&&u==="vertical"?"right":"left");var d=r.get("selector",!0),f=r.get("selectorPosition",!0);d&&(!f||f==="auto")&&(f=u==="horizontal"?"end":"start"),this.renderInner(c,r,o,s,d,u,f);var v=r.getBoxLayoutParams(),g={width:s.getWidth(),height:s.getHeight()},y=r.get("padding"),_=getLayoutRect(v,g,y),S=this.layoutInner(r,c,_,l,d,f),x=getLayoutRect(defaults({width:S.width,height:S.height},v),g,y);this.group.x=x.x-S.x,this.group.y=x.y-S.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(S,r))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(r,o,s,l,c,u,d){var f=this.getContentGroup(),v=createHashMap(),g=o.get("selectedMode"),y=[];s.eachRawSeries(function(_){!_.get("legendHoverLink")&&y.push(_.id)}),each$3(o.getData(),function(_,S){var x=_.get("name");if(!this.newlineDisabled&&(x===""||x===`
`)){var T=new Group$2;T.newline=!0,f.add(T);return}var w=s.getSeriesByName(x)[0];if(!v.get(x))if(w){var E=w.getData(),P=E.getVisual("legendLineStyle")||{},D=E.getVisual("legendIcon"),L=E.getVisual("style"),$=this._createItem(w,x,S,_,o,r,P,L,D,g,l);$.on("click",curry(dispatchSelectAction,x,null,l,y)).on("mouseover",curry(dispatchHighlightAction,w.name,null,l,y)).on("mouseout",curry(dispatchDownplayAction,w.name,null,l,y)),s.ssr&&$.eachChild(function(O){var B=getECData(O);B.seriesIndex=w.seriesIndex,B.dataIndex=S,B.ssrType="legend"}),v.set(x,!0)}else s.eachRawSeries(function(O){if(!v.get(x)&&O.legendVisualProvider){var B=O.legendVisualProvider;if(!B.containName(x))return;var V=B.indexOfName(x),F=B.getItemVisual(V,"style"),U=B.getItemVisual(V,"legendIcon"),G=parse(F.fill);G&&G[3]===0&&(G[3]=.2,F=extend(extend({},F),{fill:stringify(G,"rgba")}));var W=this._createItem(O,x,S,_,o,r,{},F,U,g,l);W.on("click",curry(dispatchSelectAction,null,x,l,y)).on("mouseover",curry(dispatchHighlightAction,null,x,l,y)).on("mouseout",curry(dispatchDownplayAction,null,x,l,y)),s.ssr&&W.eachChild(function(j){var K=getECData(j);K.seriesIndex=O.seriesIndex,K.dataIndex=S,K.ssrType="legend"}),v.set(x,!0)}},this)},this),c&&this._createSelector(c,o,l,u,d)},n.prototype._createSelector=function(r,o,s,l,c){var u=this.getSelectorGroup();each$3(r,function(f){var v=f.type,g=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:v==="all"?"legendAllSelect":"legendInverseSelect",legendId:o.id})}});u.add(g);var y=o.getModel("selectorLabel"),_=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(g,{normal:y,emphasis:_},{defaultText:f.title}),enableHoverEmphasis(g)})},n.prototype._createItem=function(r,o,s,l,c,u,d,f,v,g,y){var _=r.visualDrawType,S=c.get("itemWidth"),x=c.get("itemHeight"),T=c.isSelected(o),w=l.get("symbolRotate"),E=l.get("symbolKeepAspect"),P=l.get("icon");v=P||v||"roundRect";var D=getLegendStyle(v,l,d,f,_,T,y),L=new Group$2,$=l.getModel("textStyle");if(isFunction(r.getLegendIcon)&&(!P||P==="inherit"))L.add(r.getLegendIcon({itemWidth:S,itemHeight:x,icon:v,iconRotate:w,itemStyle:D.itemStyle,lineStyle:D.lineStyle,symbolKeepAspect:E}));else{var O=P==="inherit"&&r.getData().getVisual("symbol")?w==="inherit"?r.getData().getVisual("symbolRotate"):w:0;L.add(getDefaultLegendIcon({itemWidth:S,itemHeight:x,icon:v,iconRotate:O,itemStyle:D.itemStyle,lineStyle:D.lineStyle,symbolKeepAspect:E}))}var B=u==="left"?S+5:-5,V=u,F=c.get("formatter"),U=o;isString(F)&&F?U=F.replace("{name}",o??""):isFunction(F)&&(U=F(o));var G=T?$.getTextColor():l.get("inactiveColor");L.add(new ZRText({style:createTextStyle($,{text:U,x:B,y:x/2,fill:G,align:V,verticalAlign:"middle"},{inheritColor:G})}));var W=new Rect$2({shape:L.getBoundingRect(),style:{fill:"transparent"}}),j=l.getModel("tooltip");return j.get("show")&&setTooltipConfig({el:W,componentModel:c,itemName:o,itemTooltipOption:j.option}),L.add(W),L.eachChild(function(K){K.silent=!0}),W.silent=!g,this.getContentGroup().add(L),enableHoverEmphasis(L),L.__legendDataIndex=s,L},n.prototype.layoutInner=function(r,o,s,l,c,u){var d=this.getContentGroup(),f=this.getSelectorGroup();box(r.get("orient"),d,r.get("itemGap"),s.width,s.height);var v=d.getBoundingRect(),g=[-v.x,-v.y];if(f.markRedraw(),d.markRedraw(),c){box("horizontal",f,r.get("selectorItemGap",!0));var y=f.getBoundingRect(),_=[-y.x,-y.y],S=r.get("selectorButtonGap",!0),x=r.getOrient().index,T=x===0?"width":"height",w=x===0?"height":"width",E=x===0?"y":"x";u==="end"?_[x]+=v[T]+S:g[x]+=y[T]+S,_[1-x]+=v[w]/2-y[w]/2,f.x=_[0],f.y=_[1],d.x=g[0],d.y=g[1];var P={x:0,y:0};return P[T]=v[T]+S+y[T],P[w]=Math.max(v[w],y[w]),P[E]=Math.min(0,y[E]+_[1-x]),P}else return d.x=g[0],d.y=g[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(ComponentView);function getLegendStyle(a,n,r,o,s,l,c){function u(T,w){T.lineWidth==="auto"&&(T.lineWidth=w.lineWidth>0?2:0),each$3(T,function(E,P){T[P]==="inherit"&&(T[P]=w[P])})}var d=n.getModel("itemStyle"),f=d.getItemStyle(),v=a.lastIndexOf("empty",0)===0?"fill":"stroke",g=d.getShallow("decal");f.decal=!g||g==="inherit"?o.decal:createOrUpdatePatternFromDecal(g,c),f.fill==="inherit"&&(f.fill=o[s]),f.stroke==="inherit"&&(f.stroke=o[v]),f.opacity==="inherit"&&(f.opacity=(s==="fill"?o:r).opacity),u(f,o);var y=n.getModel("lineStyle"),_=y.getLineStyle();if(u(_,r),f.fill==="auto"&&(f.fill=o.fill),f.stroke==="auto"&&(f.stroke=o.fill),_.stroke==="auto"&&(_.stroke=o.fill),!l){var S=n.get("inactiveBorderWidth"),x=f[v];f.lineWidth=S==="auto"?o.lineWidth>0&&x?2:0:f.lineWidth,f.fill=n.get("inactiveColor"),f.stroke=n.get("inactiveBorderColor"),_.stroke=y.get("inactiveColor"),_.lineWidth=y.get("inactiveWidth")}return{itemStyle:f,lineStyle:_}}function getDefaultLegendIcon(a){var n=a.icon||"roundRect",r=createSymbol$1(n,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return r.setStyle(a.itemStyle),r.rotation=(a.iconRotate||0)*Math.PI/180,r.setOrigin([a.itemWidth/2,a.itemHeight/2]),n.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function dispatchSelectAction(a,n,r,o){dispatchDownplayAction(a,n,r,o),r.dispatchAction({type:"legendToggleSelect",name:a??n}),dispatchHighlightAction(a,n,r,o)}function isUseHoverLayer(a){for(var n=a.getZr().storage.getDisplayList(),r,o=0,s=n.length;o<s&&!(r=n[o].states.emphasis);)o++;return r&&r.hoverLayer}function dispatchHighlightAction(a,n,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"highlight",seriesName:a,name:n,excludeSeriesId:o})}function dispatchDownplayAction(a,n,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"downplay",seriesName:a,name:n,excludeSeriesId:o})}function legendFilter(a){var n=a.findComponents({mainType:"legend"});n&&n.length&&a.filterSeries(function(r){for(var o=0;o<n.length;o++)if(!n[o].isSelected(r.name))return!1;return!0})}function legendSelectActionHandler(a,n,r){var o=a==="allSelect"||a==="inverseSelect",s={},l=[];r.eachComponent({mainType:"legend",query:n},function(u){o?u[a]():u[a](n.name),makeSelectedMap(u,s),l.push(u.componentIndex)});var c={};return r.eachComponent("legend",function(u){each$f(s,function(d,f){u[d?"select":"unSelect"](f)}),makeSelectedMap(u,c)}),o?{selected:c,legendIndex:l}:{name:n.name,selected:c}}function makeSelectedMap(a,n){var r=n||{};return each$f(a.getData(),function(o){var s=o.get("name");if(!(s===`
`||s==="")){var l=a.isSelected(s);hasOwn(r,s)?r[s]=r[s]&&l:r[s]=l}}),r}function installLegendAction(a){a.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),a.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),a.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(a){a.registerComponentModel(LegendModel),a.registerComponentView(LegendView),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),a.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(a)}var ScrollableLegendModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},n.prototype.init=function(r,o,s){var l=getLayoutParams(r);a.prototype.init.call(this,r,o,s),mergeAndNormalizeLayoutParams(this,r,l)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),mergeAndNormalizeLayoutParams(this,this.option,r)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(LegendModel);function mergeAndNormalizeLayoutParams(a,n,r){var o=a.getOrient(),s=[1,1];s[o.index]=0,mergeLayoutParam(n,r,{type:"box",ignoreSize:!!s})}var Group$1=Group$4,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.newlineDisabled=!0,r._currentIndex=0,r}return n.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Group$1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group$1)},n.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(r,o,s,l,c,u,d){var f=this;a.prototype.renderInner.call(this,r,o,s,l,c,u,d);var v=this._controllerGroup,g=o.get("pageIconSize",!0),y=isArray$1(g)?g:[g,g];S("pagePrev",0);var _=o.getModel("pageTextStyle");v.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:_.getTextColor(),font:_.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),S("pageNext",1);function S(x,T){var w=x+"DataIndex",E=createIcon(o.get("pageIcons",!0)[o.getOrient().name][T],{onclick:bind$1(f._pageGo,f,w,o,l)},{x:-y[0]/2,y:-y[1]/2,width:y[0],height:y[1]});E.name=x,v.add(E)}},n.prototype.layoutInner=function(r,o,s,l,c,u){var d=this.getSelectorGroup(),f=r.getOrient().index,v=WH[f],g=XY[f],y=WH[1-f],_=XY[1-f];c&&box("horizontal",d,r.get("selectorItemGap",!0));var S=r.get("selectorButtonGap",!0),x=d.getBoundingRect(),T=[-x.x,-x.y],w=clone$4(s);c&&(w[v]=s[v]-x[v]-S);var E=this._layoutContentAndController(r,l,w,f,v,y,_,g);if(c){if(u==="end")T[f]+=E[v]+S;else{var P=x[v]+S;T[f]-=P,E[g]-=P}E[v]+=x[v]+S,T[1-f]+=E[_]+E[y]/2-x[y]/2,E[y]=Math.max(E[y],x[y]),E[_]=Math.min(E[_],x[_]+T[1-f]),d.x=T[0],d.y=T[1],d.markRedraw()}return E},n.prototype._layoutContentAndController=function(r,o,s,l,c,u,d,f){var v=this.getContentGroup(),g=this._containerGroup,y=this._controllerGroup;box(r.get("orient"),v,r.get("itemGap"),l?s.width:null,l?null:s.height),box("horizontal",y,r.get("pageButtonItemGap",!0));var _=v.getBoundingRect(),S=y.getBoundingRect(),x=this._showController=_[c]>s[c],T=[-_.x,-_.y];o||(T[l]=v[f]);var w=[0,0],E=[-S.x,-S.y],P=retrieve2(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(x){var D=r.get("pageButtonPosition",!0);D==="end"?E[l]+=s[c]-S[c]:w[l]+=S[c]+P}E[1-l]+=_[u]/2-S[u]/2,v.setPosition(T),g.setPosition(w),y.setPosition(E);var L={x:0,y:0};if(L[c]=x?s[c]:_[c],L[u]=Math.max(_[u],S[u]),L[d]=Math.min(0,S[d]+E[1-l]),g.__rectSize=s[c],x){var $={x:0,y:0};$[c]=Math.max(s[c]-S[c]-P,0),$[u]=L[u],g.setClipPath(new Rect$2({shape:$})),g.__rectSize=$[c]}else y.eachChild(function(B){B.attr({invisible:!0,silent:!0})});var O=this._getPageInfo(r);return O.pageIndex!=null&&updateProps$1(v,{x:O.contentPosition[0],y:O.contentPosition[1]},x?r:null),this._updatePageInfoView(r,O),L},n.prototype._pageGo=function(r,o,s){var l=this._getPageInfo(o)[r];l!=null&&s.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:o.id})},n.prototype._updatePageInfoView=function(r,o){var s=this._controllerGroup;each$f(["pagePrev","pageNext"],function(v){var g=v+"DataIndex",y=o[g]!=null,_=s.childOfName(v);_&&(_.setStyle("fill",y?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),_.cursor=y?"pointer":"default")});var l=s.childOfName("pageText"),c=r.get("pageFormatter"),u=o.pageIndex,d=u!=null?u+1:0,f=o.pageCount;l&&c&&l.setStyle("text",isString(c)?c.replace("{current}",d==null?"":d+"").replace("{total}",f==null?"":f+""):c({current:d,total:f}))},n.prototype._getPageInfo=function(r){var o=r.get("scrollDataIndex",!0),s=this.getContentGroup(),l=this._containerGroup.__rectSize,c=r.getOrient().index,u=WH[c],d=XY[c],f=this._findTargetItemIndex(o),v=s.children(),g=v[f],y=v.length,_=y?1:0,S={contentPosition:[s.x,s.y],pageCount:_,pageIndex:_-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return S;var x=D(g);S.contentPosition[c]=-x.s;for(var T=f+1,w=x,E=x,P=null;T<=y;++T)P=D(v[T]),(!P&&E.e>w.s+l||P&&!L(P,w.s))&&(E.i>w.i?w=E:w=P,w&&(S.pageNextDataIndex==null&&(S.pageNextDataIndex=w.i),++S.pageCount)),E=P;for(var T=f-1,w=x,E=x,P=null;T>=-1;--T)P=D(v[T]),(!P||!L(E,P.s))&&w.i<E.i&&(E=w,S.pagePrevDataIndex==null&&(S.pagePrevDataIndex=w.i),++S.pageCount,++S.pageIndex),w=P;return S;function D($){if($){var O=$.getBoundingRect(),B=O[d]+$[d];return{s:B,e:B+O[u],i:$.__legendDataIndex}}}function L($,O){return $.e>=O&&$.s<=O+l}},n.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var o,s=this.getContentGroup(),l;return s.eachChild(function(c,u){var d=c.__legendDataIndex;l==null&&d!=null&&(l=u),d===r&&(o=u)}),o??l},n.type="legend.scroll",n}(LegendView);function installScrollableLegendAction(a){a.registerAction("legendScroll","legendscroll",function(n,r){var o=n.scrollDataIndex;o!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:n},function(s){s.setScrollDataIndex(o)})})}function install$a(a){use(install$b),a.registerComponentModel(ScrollableLegendModel),a.registerComponentView(ScrollableLegendView),installScrollableLegendAction(a)}function install$9(a){use(install$b),use(install$a)}var InsideZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(a,n,r){inner$1(a).coordSysRecordMap.each(function(o){var s=o.dataZoomInfoMap.get(n.uid);s&&(s.getRange=r)})}function disposeCoordSysRecordIfNeeded(a,n){for(var r=inner$1(a).coordSysRecordMap,o=r.keys(),s=0;s<o.length;s++){var l=o[s],c=r.get(l),u=c.dataZoomInfoMap;if(u){var d=n.uid,f=u.get(d);f&&(u.removeKey(d),u.keys().length||disposeCoordSysRecord(r,c))}}}function disposeCoordSysRecord(a,n){if(n){a.removeKey(n.model.uid);var r=n.controller;r&&r.dispose()}}function createCoordSysRecord(a,n){var r={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,a),dataZoomInfoMap:null,controller:null},o=r.controller=new RoamController(a.getZr());return each$f(["pan","zoom","scrollMove"],function(s){o.on(s,function(l){var c=[];r.dataZoomInfoMap.each(function(u){if(l.isAvailableBehavior(u.model.option)){var d=(u.getRange||{})[s],f=d&&d(u.dzReferCoordSysInfo,r.model.mainType,r.controller,l);!u.model.get("disabled",!0)&&f&&c.push({dataZoomId:u.model.id,start:f[0],end:f[1]})}}),c.length&&r.dispatchAction(c)})}),r}function dispatchAction(a,n){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(a,n,r,o){return a.coordinateSystem.containPoint([r,o])}function mergeControllerParams(a){var n,r="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},s=!0;return a.each(function(l){var c=l.model,u=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;o[r+u]>o[r+n]&&(n=u),s=s&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!s}}}function installDataZoomRoamProcessor(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(n,r){var o=inner$1(r),s=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());s.each(function(l){l.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(l){var c=collectReferCoordSysModelInfo(l);each$f(c.infoList,function(u){var d=u.model.uid,f=s.get(d)||s.set(d,createCoordSysRecord(r,u.model)),v=f.dataZoomInfoMap||(f.dataZoomInfoMap=createHashMap());v.set(l.uid,{dzReferCoordSysInfo:u,model:l,getRange:null})})}),s.each(function(l){var c=l.controller,u,d=l.dataZoomInfoMap;if(d){var f=d.keys()[0];f!=null&&(u=d.get(f))}if(!u){disposeCoordSysRecord(s,l);return}var v=mergeControllerParams(d);c.enable(v.controlType,v.opt),c.setPointerChecker(l.containsPoint),createOrUpdate(l,"dispatchAction",u.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return n.prototype.render=function(r,o,s){if(a.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),setViewInfoToCoordSysRecord(s,r,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n}(DataZoomView),getRangeHandlers={zoom:function(a,n,r,o){var s=this.range,l=s.slice(),c=a.axisModels[0];if(c){var u=getDirectionInfo[n](null,[o.originX,o.originY],c,r,a),d=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(l[1]-l[0])+l[0],f=Math.max(1/o.scale,0);l[0]=(l[0]-d)*f+d,l[1]=(l[1]-d)*f+d;var v=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,l,[0,100],0,v.minSpan,v.maxSpan),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}},pan:makeMover(function(a,n,r,o,s,l){var c=getDirectionInfo[o]([l.oldX,l.oldY],[l.newX,l.newY],n,s,r);return c.signal*(a[1]-a[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(a,n,r,o,s,l){var c=getDirectionInfo[o]([0,0],[l.scrollDelta,l.scrollDelta],n,s,r);return c.signal*(a[1]-a[0])*l.scrollDelta})};function makeMover(a){return function(n,r,o,s){var l=this.range,c=l.slice(),u=n.axisModels[0];if(u){var d=a(c,u,n,r,o,s);if(sliderMove(d,c,[0,100],"all"),this.range=c,l[0]!==c[0]||l[1]!==c[1])return c}}}var getDirectionInfo={grid:function(a,n,r,o,s){var l=r.axis,c={},u=s.model.coordinateSystem.getRect();return a=a||[0,0],l.dim==="x"?(c.pixel=n[0]-a[0],c.pixelLength=u.width,c.pixelStart=u.x,c.signal=l.inverse?1:-1):(c.pixel=n[1]-a[1],c.pixelLength=u.height,c.pixelStart=u.y,c.signal=l.inverse?-1:1),c},polar:function(a,n,r,o,s){var l=r.axis,c={},u=s.model.coordinateSystem,d=u.getRadiusAxis().getExtent(),f=u.getAngleAxis().getExtent();return a=a?u.pointToCoord(a):[0,0],n=u.pointToCoord(n),r.mainType==="radiusAxis"?(c.pixel=n[0]-a[0],c.pixelLength=d[1]-d[0],c.pixelStart=d[0],c.signal=l.inverse?1:-1):(c.pixel=n[1]-a[1],c.pixelLength=f[1]-f[0],c.pixelStart=f[0],c.signal=l.inverse?-1:1),c},singleAxis:function(a,n,r,o,s){var l=r.axis,c=s.model.coordinateSystem.getRect(),u={};return a=a||[0,0],l.orient==="horizontal"?(u.pixel=n[0]-a[0],u.pixelLength=c.width,u.pixelStart=c.x,u.signal=l.inverse?1:-1):(u.pixel=n[1]-a[1],u.pixelLength=c.height,u.pixelStart=c.y,u.signal=l.inverse?-1:1),u}};function install$8(a){installCommon$1(a),a.registerComponentModel(InsideZoomModel),a.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(a)}var SliderZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._displayables={},r}return n.prototype.init=function(r,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(r,o,s,l){if(a.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!l||l.type!=="dataZoom"||l.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$4;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(o),this._positionGroup()},n.prototype._resetLocation=function(){var r=this.dataZoomModel,o=this.api,s=r.get("brushSelect"),l=s?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),u={width:o.getWidth(),height:o.getHeight()},d=this._orient===HORIZONTAL?{right:u.width-c.x-c.width,top:u.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-l,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},f=getLayoutParams(r.option);each$f(["right","top","width","height"],function(g){f[g]==="ph"&&(f[g]=d[g])});var v=getLayoutRect(f,u);this._location={x:v.x,y:v.y},this._size=[v.width,v.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var r=this.group,o=this._location,s=this._orient,l=this.dataZoomModel.getFirstTargetAxisModel(),c=l&&l.get("inverse"),u=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;u.attr(s===HORIZONTAL&&!c?{scaleY:d?1:-1,scaleX:1}:s===HORIZONTAL&&c?{scaleY:d?1:-1,scaleX:-1}:s===VERTICAL&&!c?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var f=r.getBoundingRect([u]);r.x=o.x-f.x,r.y=o.y-f.y,r.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var r=this.dataZoomModel,o=this._size,s=this._displayables.sliderGroup,l=r.get("brushSelect");s.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),u=this.api.getZr();l?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",u.on("mousemove",this._onBrush),u.on("mouseup",this._onBrushEnd)):(u.off("mousemove",this._onBrush),u.off("mouseup",this._onBrushEnd)),s.add(c)},n.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var o=this._size,s=this._shadowSize||[],l=r.series,c=l.getRawData(),u=l.getShadowDim&&l.getShadowDim(),d=u&&c.getDimensionInfo(u)?l.getShadowDim():r.otherDim;if(d==null)return;var f=this._shadowPolygonPts,v=this._shadowPolylinePts;if(c!==this._shadowData||d!==this._shadowDim||o[0]!==s[0]||o[1]!==s[1]){var g=c.getDataExtent(d),y=(g[1]-g[0])*.3;g=[g[0]-y,g[1]+y];var _=[0,o[1]],S=[0,o[0]],x=[[o[0],0],[0,0]],T=[],w=S[1]/(c.count()-1),E=0,P=Math.round(c.count()/o[0]),D;c.each([d],function(V,F){if(P>0&&F%P){E+=w;return}var U=V==null||isNaN(V)||V==="",G=U?0:linearMap$2(V,g,_,!0);U&&!D&&F?(x.push([x[x.length-1][0],0]),T.push([T[T.length-1][0],0])):!U&&D&&(x.push([E,0]),T.push([E,0])),x.push([E,G]),T.push([E,G]),E+=w,D=U}),f=this._shadowPolygonPts=x,v=this._shadowPolylinePts=T}this._shadowData=c,this._shadowDim=d,this._shadowSize=[o[0],o[1]];var L=this.dataZoomModel;function $(V){var F=L.getModel(V?"selectedDataBackground":"dataBackground"),U=new Group$4,G=new Polygon({shape:{points:f},segmentIgnoreThreshold:1,style:F.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),W=new Polyline$1({shape:{points:v},segmentIgnoreThreshold:1,style:F.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return U.add(G),U.add(W),U}for(var O=0;O<3;O++){var B=$(O===1);this._displayables.sliderGroup.add(B),this._displayables.dataShadowSegs.push(B)}},n.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,o=r.get("showDataShadow");if(o!==!1){var s,l=this.ecModel;return r.eachTargetAxis(function(c,u){var d=r.getAxisProxy(c,u).getTargetSeriesModels();each$f(d,function(f){if(!s&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,f.get("type"))<0)){var v=l.getComponent(getAxisMainType(c),u).axis,g=getOtherDim(c),y,_=f.coordinateSystem;g!=null&&_.getOtherAxis&&(y=_.getOtherAxis(v).inverse),g=f.getData().mapDimension(g),s={thisAxis:v,series:f,thisDim:c,otherDim:g,otherAxisInverse:y}}},this)},this),s}},n.prototype._renderHandle=function(){var r=this.group,o=this._displayables,s=o.handles=[null,null],l=o.handleLabels=[null,null],c=this._displayables.sliderGroup,u=this._size,d=this.dataZoomModel,f=this.api,v=d.get("borderRadius")||0,g=d.get("brushSelect"),y=o.filler=new Rect({silent:g,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});c.add(y),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:u[0],height:u[1],r:v},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(P){var D=d.get("handleIcon");!symbolBuildProxies[D]&&D.indexOf("path://")<0&&D.indexOf("image://")<0&&(D="path://"+D);var L=createSymbol$1(D,-1,0,2,2,null,!0);L.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,P),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var $=L.getBoundingRect(),O=d.get("handleSize");this._handleHeight=parsePercent(O,this._size[1]),this._handleWidth=$.width/$.height*this._handleHeight,L.setStyle(d.getModel("handleStyle").getItemStyle()),L.style.strokeNoScale=!0,L.rectHover=!0,L.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(L);var B=d.get("handleColor");B!=null&&(L.style.fill=B),c.add(s[P]=L);var V=d.getModel("textStyle"),F=d.get("handleLabel")||{},U=F.show||!1;r.add(l[P]=new ZRText({silent:!0,invisible:!U,style:createTextStyle(V,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:V.getTextColor(),font:V.getFont()}),z2:10}))},this);var _=y;if(g){var S=parsePercent(d.get("moveHandleSize"),u[1]),x=o.moveHandle=new Rect$2({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:u[1]-.5,height:S}}),T=S*.8,w=o.moveHandleIcon=createSymbol$1(d.get("moveHandleIcon"),-T/2,-T/2,T,T,"#fff",!0);w.silent=!0,w.y=u[1]+S/2-.5,x.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var E=Math.min(u[1]/2,Math.max(S,10));_=o.moveZone=new Rect$2({invisible:!0,shape:{y:u[1]-E,height:S+E}}),_.on("mouseover",function(){f.enterEmphasis(x)}).on("mouseout",function(){f.leaveEmphasis(x)}),c.add(x),c.add(w),c.add(_)}_.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(r[0],[0,100],o,!0),linearMap$2(r[1],[0,100],o,!0)]},n.prototype._updateInterval=function(r,o){var s=this.dataZoomModel,l=this._handleEnds,c=this._getViewExtent(),u=s.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];sliderMove(o,l,c,s.get("zoomLock")?"all":r,u.minSpan!=null?linearMap$2(u.minSpan,d,c,!0):null,u.maxSpan!=null?linearMap$2(u.maxSpan,d,c,!0):null);var f=this._range,v=this._range=asc$2([linearMap$2(l[0],c,d,!0),linearMap$2(l[1],c,d,!0)]);return!f||f[0]!==v[0]||f[1]!==v[1]},n.prototype._updateView=function(r){var o=this._displayables,s=this._handleEnds,l=asc$2(s.slice()),c=this._size;each$f([0,1],function(_){var S=o.handles[_],x=this._handleHeight;S.attr({scaleX:x/2,scaleY:x/2,x:s[_]+(_?-1:1),y:c[1]/2-x/2})},this),o.filler.setShape({x:l[0],y:0,width:l[1]-l[0],height:c[1]});var u={x:l[0],width:l[1]-l[0]};o.moveHandle&&(o.moveHandle.setShape(u),o.moveZone.setShape(u),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",u.x+u.width/2));for(var d=o.dataShadowSegs,f=[0,l[0],l[1],c[0]],v=0;v<d.length;v++){var g=d[v],y=g.getClipPath();y||(y=new Rect$2,g.setClipPath(y)),y.setShape({x:f[v],y:0,width:f[v+1]-f[v],height:c[1]})}this._updateDataInfo(r)},n.prototype._updateDataInfo=function(r){var o=this.dataZoomModel,s=this._displayables,l=s.handleLabels,c=this._orient,u=["",""];if(o.get("showDetail")){var d=o.findRepresentativeAxisProxy();if(d){var f=d.getAxisModel().axis,v=this._range,g=r?d.calculateDataWindow({start:v[0],end:v[1]}).valueWindow:d.getDataValueWindow();u=[this._formatLabel(g[0],f),this._formatLabel(g[1],f)]}}var y=asc$2(this._handleEnds.slice());_.call(this,0),_.call(this,1);function _(S){var x=getTransform$1(s.handles[S].parent,this.group),T=transformDirection(S===0?"right":"left",x),w=this._handleWidth/2+LABEL_GAP,E=applyTransform([y[S]+(S===0?-w:w),this._size[1]/2],x);l[S].setStyle({x:E[0],y:E[1],verticalAlign:c===HORIZONTAL?"middle":T,align:c===HORIZONTAL?T:"center",text:u[S]})}},n.prototype._formatLabel=function(r,o){var s=this.dataZoomModel,l=s.get("labelFormatter"),c=s.get("labelPrecision");(c==null||c==="auto")&&(c=o.getPixelPrecision());var u=r==null||isNaN(r)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(c,20));return isFunction(l)?l(r,u):isString(l)?l.replace("{value}",u):u},n.prototype._showDataInfo=function(r){var o=this.dataZoomModel.get("handleLabel")||{},s=o.show||!1,l=this.dataZoomModel.getModel(["emphasis","handleLabel"]),c=l.get("show")||!1,u=r||this._dragging?c:s,d=this._displayables,f=d.handleLabels;f[0].attr("invisible",!u),f[1].attr("invisible",!u),d.moveHandle&&this.api[u?"enterEmphasis":"leaveEmphasis"](d.moveHandle,1)},n.prototype._onDragMove=function(r,o,s,l){this._dragging=!0,stop(l.event);var c=this._displayables.sliderGroup.getLocalTransform(),u=applyTransform([o,s],c,!0),d=this._updateInterval(r,u[0]),f=this.dataZoomModel.get("realtime");this._updateView(!f),d&&f&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(r){var o=this._size,s=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(s[0]<0||s[0]>o[0]||s[1]<0||s[1]>o[1])){var l=this._handleEnds,c=(l[0]+l[1])/2,u=this._updateInterval("all",s[0]-c);this._updateView(),u&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(r){var o=r.offsetX,s=r.offsetY;this._brushStart=new Point(o,s),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(r){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var s=o.shape,l=+new Date;if(!(l-this._brushStartTime<200&&Math.abs(s.width)<5)){var c=this._getViewExtent(),u=[0,100];this._range=asc$2([linearMap$2(s.x,c,u,!0),linearMap$2(s.x+s.width,c,u,!0)]),this._handleEnds=[s.x,s.x+s.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(r){this._brushing&&(stop(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},n.prototype._updateBrushRect=function(r,o){var s=this._displayables,l=this.dataZoomModel,c=s.brushRect;c||(c=s.brushRect=new Rect({silent:!0,style:l.getModel("brushStyle").getItemStyle()}),s.sliderGroup.add(c)),c.attr("ignore",!1);var u=this._brushStart,d=this._displayables.sliderGroup,f=d.transformCoordToLocal(r,o),v=d.transformCoordToLocal(u.x,u.y),g=this._size;f[0]=Math.max(Math.min(g[0],f[0]),0),c.setShape({x:v[0],y:0,width:f[0]-v[0],height:g[1]})},n.prototype._dispatchZoomAction=function(r){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},n.prototype._findCoordRect=function(){var r,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!r&&o.length){var s=o[0].model.coordinateSystem;r=s.getRect&&s.getRect()}if(!r){var l=this.api.getWidth(),c=this.api.getHeight();r={x:l*.2,y:c*.2,width:l*.6,height:c*.6}}return r},n.type="dataZoom.slider",n}(DataZoomView);function getOtherDim(a){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[a]}function getCursor$1(a){return a==="vertical"?"ns-resize":"ew-resize"}function install$7(a){a.registerComponentModel(SliderZoomModel),a.registerComponentView(SliderZoomView),installCommon$1(a)}function install$6(a){use(install$8),use(install$7)}var visualDefault={get:function(a,n,r){var o=clone$4((defaultOption[a]||{})[n]);return r&&isArray$1(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return n.prototype.init=function(r,o,s){this.mergeDefaultAndTheme(r,s)},n.prototype.optionUpdated=function(r,o){var s=this.option;!o&&replaceVisualOption(s,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(r){var o=this.stateList;r=bind$1(r,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,r),this.targetVisuals=createVisualMappings(this.option.target,o,r)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,o=[];return r==null||r==="all"?this.ecModel.eachSeries(function(s,l){o.push(l)}):o=normalizeToArray(r),o},n.prototype.eachTargetSeries=function(r,o){each$f(this.getTargetSeriesIndices(),function(s){var l=this.ecModel.getSeriesByIndex(s);l&&r.call(o,l)},this)},n.prototype.isTargetSeries=function(r){var o=!1;return this.eachTargetSeries(function(s){s===r&&(o=!0)}),o},n.prototype.formatValueText=function(r,o,s){var l=this.option,c=l.precision,u=this.dataBound,d=l.formatter,f;s=s||["<",">"],isArray$1(r)&&(r=r.slice(),f=!0);var v=o?r:f?[g(r[0]),g(r[1])]:g(r);if(isString(d))return d.replace("{value}",f?v[0]:v).replace("{value2}",f?v[1]:v);if(isFunction(d))return f?d(r[0],r[1]):d(r);if(f)return r[0]===u[0]?s[0]+" "+v[1]:r[1]===u[1]?s[1]+" "+v[0]:v[0]+" - "+v[1];return v;function g(y){return y===u[0]?"min":y===u[1]?"max":(+y).toFixed(Math.min(c,20))}},n.prototype.resetExtent=function(){var r=this.option,o=asc([r.min,r.max]);this._dataExtent=o},n.prototype.getDataDimensionIndex=function(r){var o=this.option.dimension;if(o!=null)return r.getDimensionIndex(o);for(var s=r.dimensions,l=s.length-1;l>=0;l--){var c=s[l],u=r.getDimensionInfo(c);if(!u.isCalculationCoord)return u.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var r=this.ecModel,o=this.option,s={inRange:o.inRange,outOfRange:o.outOfRange},l=o.target||(o.target={}),c=o.controller||(o.controller={});merge(l,s),merge(c,s);var u=this.isCategory();d.call(this,l),d.call(this,c),f.call(this,l,"inRange","outOfRange"),v.call(this,c);function d(g){isArray(o.color)&&!g.inRange&&(g.inRange={color:o.color.slice().reverse()}),g.inRange=g.inRange||{color:r.get("gradientColor")}}function f(g,y,_){var S=g[y],x=g[_];S&&!x&&(x=g[_]={},each$2(S,function(T,w){if(VisualMapping.isValidType(w)){var E=visualDefault.get(w,"inactive",u);E!=null&&(x[w]=E,w==="color"&&!x.hasOwnProperty("opacity")&&!x.hasOwnProperty("colorAlpha")&&(x.opacity=[0,0]))}}))}function v(g){var y=(g.inRange||{}).symbol||(g.outOfRange||{}).symbol,_=(g.inRange||{}).symbolSize||(g.outOfRange||{}).symbolSize,S=this.get("inactiveColor"),x=this.getItemSymbol(),T=x||"roundRect";each$2(this.stateList,function(w){var E=this.itemSize,P=g[w];P||(P=g[w]={color:u?S:[S]}),P.symbol==null&&(P.symbol=y&&clone$4(y)||(u?T:[T])),P.symbolSize==null&&(P.symbolSize=_&&clone$4(_)||(u?E[0]:[E[0],E[0]])),P.symbol=mapVisual(P.symbol,function($){return $==="none"?T:$});var D=P.symbolSize;if(D!=null){var L=-1/0;eachVisual(D,function($){$>L&&(L=$)}),P.symbolSize=mapVisual(D,function($){return linearMap$1($,[0,L],[0,E[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(r){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(r){return null},n.prototype.getVisualMeta=function(r){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(r,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(s){s.mappingMethod="linear",s.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=DEFAULT_BAR_BOUND[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var r=this.getExtent(),o=this.option.range;!o||o.auto?(r.auto=1,this.option.range=r):isArray$1(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],r[0]),o[1]=Math.min(o[1],r[1]))},n.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(r){var o=this.option.controller[r].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},n.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},n.prototype.getSelected=function(){var r=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>r[1]&&(o[0]=r[1]),o[1]>r[1]&&(o[1]=r[1]),o[0]<r[0]&&(o[0]=r[0]),o[1]<r[0]&&(o[1]=r[0]),o},n.prototype.getValueState=function(r){var o=this.option.range,s=this.getExtent();return(o[0]<=s[0]||o[0]<=r)&&(o[1]>=s[1]||r<=o[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(r){var o=[];return this.eachTargetSeries(function(s){var l=[],c=s.getData();c.each(this.getDataDimensionIndex(c),function(u,d){r[0]<=u&&u<=r[1]&&l.push(d)},this),o.push({seriesId:s.id,dataIndex:l})},this),o},n.prototype.getVisualMeta=function(r){var o=getColorStopValues(this,"outOfRange",this.getExtent()),s=getColorStopValues(this,"inRange",this.option.range.slice()),l=[];function c(_,S){l.push({value:_,color:r(_,S)})}for(var u=0,d=0,f=s.length,v=o.length;d<v&&(!s.length||o[d]<=s[0]);d++)o[d]<s[u]&&c(o[d],"outOfRange");for(var g=1;u<f;u++,g=0)g&&l.length&&c(s[u],"outOfRange"),c(s[u],"inRange");for(var g=1;d<v;d++)(!s.length||s[s.length-1]<o[d])&&(g&&(l.length&&c(l[l.length-1].value,"outOfRange"),g=0),c(o[d],"outOfRange"));var y=l.length;return{stops:l,outerColors:[y?l[0].color:"transparent",y?l[y-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(VisualMapModel);function getColorStopValues(a,n,r){if(r[0]===r[1])return r.slice();for(var o=200,s=(r[1]-r[0])/o,l=r[0],c=[],u=0;u<=o&&l<r[1];u++)c.push(l),l+=s;return c.push(r[1]),c}var VisualMapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return n.prototype.init=function(r,o){this.ecModel=r,this.api=o},n.prototype.render=function(r,o,s,l){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,o,s,l)},n.prototype.renderBackground=function(r){var o=this.visualMapModel,s=normalizeCssArray(o.get("padding")||0),l=r.getBoundingRect();r.add(new Rect$2({z2:-1,silent:!0,shape:{x:l.x-s[3],y:l.y-s[0],width:l.width+s[3]+s[1],height:l.height+s[0]+s[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},n.prototype.getControllerVisual=function(r,o,s){s=s||{};var l=s.forceState,c=this.visualMapModel,u={};if(o==="color"){var d=c.get("contentColor");u.color=d}function f(_){return u[_]}function v(_,S){u[_]=S}var g=c.controllerVisuals[l||c.getValueState(r)],y=VisualMapping.prepareVisualTypes(g);return each$f(y,function(_){var S=g[_];s.convertOpacityToAlpha&&_==="opacity"&&(_="colorAlpha",S=g.__alphaForOpacity),VisualMapping.dependsOn(_,o)&&S&&S.applyVisual(r,f,v)}),u[o]},n.prototype.positionGroup=function(r){var o=this.visualMapModel,s=this.api;positionElement(r,o.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})},n.prototype.doRender=function(r,o,s,l){},n.type="visualMap",n}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(a,n,r){var o=a.option,s=o.align;if(s!=null&&s!=="auto")return s;for(var l={width:n.getWidth(),height:n.getHeight()},c=o.orient==="horizontal"?1:0,u=paramsSet[c],d=[0,null,10],f={},v=0;v<3;v++)f[paramsSet[1-c][v]]=d[v],f[u[v]]=v===2?r[0]:o[u[v]];var g=[["x","width",3],["y","height",0]][c],y=getLayoutRect(f,l,o.padding);return u[(y.margin[g[2]]||0)+y[g[0]]+y[g[1]]*.5<l[g[1]]*.5?0:1]}function makeHighDownBatch(a,n){return each$f(a||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(n?n.componentIndex:"")}),a}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return n.prototype.init=function(r,o){a.prototype.init.call(this,r,o),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(r,o,s,l){(!l||l.type!=="selectDataRange"||l.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,o=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(o);var s=r.get("text");this._renderEndsText(o,s,0),this._renderEndsText(o,s,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},n.prototype._renderEndsText=function(r,o,s){if(o){var l=o[1-s];l=l!=null?l+"":"";var c=this.visualMapModel,u=c.get("textGap"),d=c.itemSize,f=this._shapes.mainGroup,v=this._applyTransform([d[0]/2,s===0?-u:d[1]+u],f),g=this._applyTransform(s===0?"bottom":"top",f),y=this._orient,_=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(_,{x:v[0],y:v[1],verticalAlign:y==="horizontal"?"middle":g,align:y==="horizontal"?g:"center",text:l})}))}},n.prototype._renderBar=function(r){var o=this.visualMapModel,s=this._shapes,l=o.itemSize,c=this._orient,u=this._useHandle,d=getItemAlign(o,this.api,l),f=s.mainGroup=this._createBarGroup(d),v=new Group$4;f.add(v),v.add(s.outOfRange=createPolygon()),v.add(s.inRange=createPolygon(null,u?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),v.setClipPath(new Rect$2({shape:{x:0,y:0,width:l[0],height:l[1],r:3}}));var g=o.textStyleModel.getTextRect("国"),y=mathMax(g.width,g.height);u&&(s.handleThumbs=[],s.handleLabels=[],s.handleLabelPoints=[],this._createHandle(o,f,0,l,y,c),this._createHandle(o,f,1,l,y,c)),this._createIndicator(o,f,l,y,c),r.add(f)},n.prototype._createHandle=function(r,o,s,l,c,u){var d=bind$1(this._dragHandle,this,s,!1),f=bind$1(this._dragHandle,this,s,!0),v=parsePercent$1(r.get("handleSize"),l[0]),g=createSymbol$1(r.get("handleIcon"),-v/2,-v/2,v,v,null,!0),y=getCursor(this._orient);g.attr({cursor:y,draggable:!0,drift:d,ondragend:f,onmousemove:function(w){stop(w.event)}}),g.x=l[0]/2,g.useStyle(r.getModel("handleStyle").getItemStyle()),g.setStyle({strokeNoScale:!0,strokeFirst:!0}),g.style.lineWidth*=2,g.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(g,!0),o.add(g);var _=this.visualMapModel.textStyleModel,S=new ZRText({cursor:y,draggable:!0,drift:d,onmousemove:function(w){stop(w.event)},ondragend:f,style:createTextStyle(_,{x:0,y:0,text:""})});S.ensureState("blur").style={opacity:.1},S.stateTransition={duration:200},this.group.add(S);var x=[v,0],T=this._shapes;T.handleThumbs[s]=g,T.handleLabelPoints[s]=x,T.handleLabels[s]=S},n.prototype._createIndicator=function(r,o,s,l,c){var u=parsePercent$1(r.get("indicatorSize"),s[0]),d=createSymbol$1(r.get("indicatorIcon"),-u/2,-u/2,u,u,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:s[0]/2});var f=r.getModel("indicatorStyle").getItemStyle();if(d instanceof ZRImage){var v=d.style;d.useStyle(extend({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},f))}else d.useStyle(f);o.add(d);var g=this.visualMapModel.textStyleModel,y=new ZRText({silent:!0,invisible:!0,style:createTextStyle(g,{x:0,y:0,text:""})});this.group.add(y);var _=[(c==="horizontal"?l/2:HOVER_LINK_OUT)+s[0]/2,0],S=this._shapes;S.indicator=d,S.indicatorLabel=y,S.indicatorLabelPoint=_,this._firstShowIndicator=!0},n.prototype._dragHandle=function(r,o,s,l){if(this._useHandle){if(this._dragging=!o,!o){var c=this._applyTransform([s,l],this._shapes.mainGroup,!0);this._updateInterval(r,c[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},n.prototype._resetInterval=function(){var r=this.visualMapModel,o=this._dataInterval=r.getSelected(),s=r.getExtent(),l=[0,r.itemSize[1]];this._handleEnds=[linearMap(o[0],s,l,!0),linearMap(o[1],s,l,!0)]},n.prototype._updateInterval=function(r,o){o=o||0;var s=this.visualMapModel,l=this._handleEnds,c=[0,s.itemSize[1]];sliderMove(o,l,c,r,0);var u=s.getExtent();this._dataInterval=[linearMap(l[0],c,u,!0),linearMap(l[1],c,u,!0)]},n.prototype._updateView=function(r){var o=this.visualMapModel,s=o.getExtent(),l=this._shapes,c=[0,o.itemSize[1]],u=r?c:this._handleEnds,d=this._createBarVisual(this._dataInterval,s,u,"inRange"),f=this._createBarVisual(s,s,c,"outOfRange");l.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),l.outOfRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),this._updateHandle(u,d)},n.prototype._createBarVisual=function(r,o,s,l){var c={forceState:l,convertOpacityToAlpha:!0},u=this._makeColorGradient(r,c),d=[this.getControllerVisual(r[0],"symbolSize",c),this.getControllerVisual(r[1],"symbolSize",c)],f=this._createBarPoints(s,d);return{barColor:new LinearGradient(0,0,0,1,u),barPoints:f,handlesColor:[u[0].color,u[u.length-1].color]}},n.prototype._makeColorGradient=function(r,o){var s=100,l=[],c=(r[1]-r[0])/s;l.push({color:this.getControllerVisual(r[0],"color",o),offset:0});for(var u=1;u<s;u++){var d=r[0]+c*u;if(d>r[1])break;l.push({color:this.getControllerVisual(d,"color",o),offset:u/s})}return l.push({color:this.getControllerVisual(r[1],"color",o),offset:1}),l},n.prototype._createBarPoints=function(r,o){var s=this.visualMapModel.itemSize;return[[s[0]-o[0],r[0]],[s[0],r[0]],[s[0],r[1]],[s[0]-o[1],r[1]]]},n.prototype._createBarGroup=function(r){var o=this._orient,s=this.visualMapModel.get("inverse");return new Group$4(o==="horizontal"&&!s?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&s?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!s?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},n.prototype._updateHandle=function(r,o){if(this._useHandle){var s=this._shapes,l=this.visualMapModel,c=s.handleThumbs,u=s.handleLabels,d=l.itemSize,f=l.getExtent(),v=this._applyTransform("left",s.mainGroup);each$1([0,1],function(g){var y=c[g];y.setStyle("fill",o.handlesColor[g]),y.y=r[g];var _=linearMap(r[g],[0,d[1]],f,!0),S=this.getControllerVisual(_,"symbolSize");y.scaleX=y.scaleY=S/d[0],y.x=d[0]-S/2;var x=applyTransform(s.handleLabelPoints[g],getTransform$1(y,this.group));if(this._orient==="horizontal"){var T=v==="left"||v==="top"?(d[0]-S)/2:(d[0]-S)/-2;x[1]+=T}u[g].setStyle({x:x[0],y:x[1],text:l.formatValueText(this._dataInterval[g]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",s.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(r,o,s,l){var c=this.visualMapModel,u=c.getExtent(),d=c.itemSize,f=[0,d[1]],v=this._shapes,g=v.indicator;if(g){g.attr("invisible",!1);var y={convertOpacityToAlpha:!0},_=this.getControllerVisual(r,"color",y),S=this.getControllerVisual(r,"symbolSize"),x=linearMap(r,u,f,!0),T=d[0]-S/2,w={x:g.x,y:g.y};g.y=x,g.x=T;var E=applyTransform(v.indicatorLabelPoint,getTransform$1(g,this.group)),P=v.indicatorLabel;P.attr("invisible",!1);var D=this._applyTransform("left",v.mainGroup),L=this._orient,$=L==="horizontal";P.setStyle({text:(s||"")+c.formatValueText(o),verticalAlign:$?D:"middle",align:$?"center":D});var O={x:T,y:x,style:{fill:_}},B={style:{x:E[0],y:E[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var V={duration:100,easing:"cubicInOut",additive:!0};g.x=w.x,g.y=w.y,g.animateTo(O,V),P.animateTo(B,V)}else g.attr(O),P.attr(B);this._firstShowIndicator=!1;var F=this._shapes.handleLabels;if(F)for(var U=0;U<F.length;U++)this.api.enterBlur(F[U])}},n.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(o){if(r._hovering=!0,!r._dragging){var s=r.visualMapModel.itemSize,l=r._applyTransform([o.offsetX,o.offsetY],r._shapes.mainGroup,!0,!0);l[1]=mathMin(mathMax(0,l[1]),s[1]),r._doHoverLinkToSeries(l[1],0<=l[0]&&l[0]<=s[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(r,o){var s=this.visualMapModel,l=s.itemSize;if(s.option.hoverLink){var c=[0,l[1]],u=s.getExtent();r=mathMin(mathMax(c[0],r),c[1]);var d=getHalfHoverLinkSize(s,u,c),f=[r-d,r+d],v=linearMap(r,c,u,!0),g=[linearMap(f[0],c,u,!0),linearMap(f[1],c,u,!0)];f[0]<c[0]&&(g[0]=-1/0),f[1]>c[1]&&(g[1]=1/0),o&&(g[0]===-1/0?this._showIndicator(v,g[1],"< ",d):g[1]===1/0?this._showIndicator(v,g[0],"> ",d):this._showIndicator(v,v,"≈ ",d));var y=this._hoverLinkDataIndices,_=[];(o||useHoverLinkOnHandle(s))&&(_=this._hoverLinkDataIndices=s.findTargetDataIndices(g));var S=compressBatches(y,_);this._dispatchHighDown("downplay",makeHighDownBatch(S[0],s)),this._dispatchHighDown("highlight",makeHighDownBatch(S[1],s))}},n.prototype._hoverLinkFromSeriesMouseOver=function(r){var o;if(findEventDispatcher(r.target,function(d){var f=getECData(d);if(f.dataIndex!=null)return o=f,!0},!0),!!o){var s=this.ecModel.getSeriesByIndex(o.seriesIndex),l=this.visualMapModel;if(l.isTargetSeries(s)){var c=s.getData(o.dataType),u=c.getStore().get(l.getDataDimensionIndex(c),o.dataIndex);isNaN(u)||this._showIndicator(u,u)}}},n.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var s=0;s<o.length;s++)this.api.leaveBlur(o[s])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(r,this.visualMapModel)),r.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(r,o,s,l){var c=getTransform$1(o,l?null:this.group);return isArray$1(r)?applyTransform(r,c,s):transformDirection(r,c,s)},n.prototype._dispatchHighDown=function(r,o){o&&o.length&&this.api.dispatchAction({type:r,batch:o})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(VisualMapView);function createPolygon(a,n,r,o){return new Polygon({shape:{points:a},draggable:!!r,cursor:n,drift:r,onmousemove:function(s){stop(s.event)},ondragend:o})}function getHalfHoverLinkSize(a,n,r){var o=HOVER_LINK_SIZE/2,s=a.get("hoverLinkDataSize");return s&&(o=linearMap(s,n,r,!0)/2),o}function useHoverLinkOnHandle(a){var n=a.get("hoverLinkOnHandle");return!!(n??a.get("realtime"))}function getCursor(a){return a==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(a,n){n.eachComponent({mainType:"visualMap",query:a},function(r){r.setSelected(a.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(a,n){var r=[];return n.eachComponent("visualMap",function(o){var s=a.pipelineContext;!o.isTargetSeries(a)||s&&s.large||r.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(a.getData())))}),r}},{createOnAllSeries:!0,reset:function(a,n){var r=a.getData(),o=[];n.eachComponent("visualMap",function(s){if(s.isTargetSeries(a)){var l=s.getVisualMeta(bind$1(getColorVisual,null,a,s))||{stops:[],outerColors:[]},c=s.getDataDimensionIndex(r);c>=0&&(l.dimension=c,o.push(l))}}),a.getData().setVisual("visualMeta",o)}}];function getColorVisual(a,n,r,o){for(var s=n.targetVisuals[o],l=VisualMapping.prepareVisualTypes(s),c={color:getVisualFromData(a.getData(),"color")},u=0,d=l.length;u<d;u++){var f=l[u],v=s[f==="opacity"?"__alphaForOpacity":f];v&&v.applyVisual(r,g,y)}return c.color;function g(_){return c[_]}function y(_,S){c[_]=S}}var each=each$f;function visualMapPreprocessor(a){var n=a&&a.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(r){if(r){has(r,"splitList")&&!has(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var o=r.pieces;o&&isArray$1(o)&&each(o,function(s){isObject$3(s)&&(has(s,"start")&&!has(s,"min")&&(s.min=s.start),has(s,"end")&&!has(s,"max")&&(s.max=s.end))})}})}function has(a,n){return a&&a.hasOwnProperty&&a.hasOwnProperty(n)}var installed=!1;function installCommon(a){installed||(installed=!0,a.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),a.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,n)}),a.registerPreprocessor(visualMapPreprocessor))}function install$5(a){a.registerComponentModel(ContinuousModel),a.registerComponentView(ContinuousView),installCommon(a)}var PiecewiseModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._pieceList=[],r}return n.prototype.optionUpdated=function(r,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(r,o);var l=this.option.categories;this.resetVisual(function(c,u){s==="categories"?(c.mappingMethod="category",c.categories=clone$4(l)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(d){return d=clone$4(d),u!=="inRange"&&(d.visual=null),d}))})},n.prototype.completeVisualOption=function(){var r=this.option,o={},s=VisualMapping.listVisualTypes(),l=this.isCategory();each$f(r.pieces,function(u){each$f(s,function(d){u.hasOwnProperty(d)&&(o[d]=1)})}),each$f(o,function(u,d){var f=!1;each$f(this.stateList,function(v){f=f||c(r,v,d)||c(r.target,v,d)},this),!f&&each$f(this.stateList,function(v){(r[v]||(r[v]={}))[d]=visualDefault.get(d,v==="inRange"?"active":"inactive",l)})},this);function c(u,d,f){return u&&u[d]&&u[d].hasOwnProperty(f)}a.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(r,o){var s=this.option,l=this._pieceList,c=(o?s:r).selected||{};if(s.selected=c,each$f(l,function(d,f){var v=this.getSelectedMapKey(d);c.hasOwnProperty(v)||(c[v]=!0)},this),s.selectedMode==="single"){var u=!1;each$f(l,function(d,f){var v=this.getSelectedMapKey(d);c[v]&&(u?c[v]=!1:u=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(r){this.option.selected=clone$4(r)},n.prototype.getValueState=function(r){var o=VisualMapping.findPieceIndex(r,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(r){var o=[],s=this._pieceList;return this.eachTargetSeries(function(l){var c=[],u=l.getData();u.each(this.getDataDimensionIndex(u),function(d,f){var v=VisualMapping.findPieceIndex(d,s);v===r&&c.push(f)},this),o.push({seriesId:l.id,dataIndex:c})},this),o},n.prototype.getRepresentValue=function(r){var o;if(this.isCategory())o=r.value;else if(r.value!=null)o=r.value;else{var s=r.interval||[];o=s[0]===-1/0&&s[1]===1/0?0:(s[0]+s[1])/2}return o},n.prototype.getVisualMeta=function(r){if(this.isCategory())return;var o=[],s=["",""],l=this;function c(v,g){var y=l.getRepresentValue({interval:v});g||(g=l.getValueState(y));var _=r(y,g);v[0]===-1/0?s[0]=_:v[1]===1/0?s[1]=_:o.push({value:v[0],color:_},{value:v[1],color:_})}var u=this._pieceList.slice();if(!u.length)u.push({interval:[-1/0,1/0]});else{var d=u[0].interval[0];d!==-1/0&&u.unshift({interval:[-1/0,d]}),d=u[u.length-1].interval[1],d!==1/0&&u.push({interval:[d,1/0]})}var f=-1/0;return each$f(u,function(v){var g=v.interval;g&&(g[0]>f&&c([f,g[0]],"outOfRange"),c(g.slice()),f=g[1])},this),{stops:o,outerColors:s}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(VisualMapModel),resetMethods={splitNumber:function(a){var n=this.option,r=Math.min(n.precision,20),o=this.getExtent(),s=n.splitNumber;s=Math.max(parseInt(s,10),1),n.splitNumber=s;for(var l=(o[1]-o[0])/s;+l.toFixed(r)!==l&&r<5;)r++;n.precision=r,l=+l.toFixed(r),n.minOpen&&a.push({interval:[-1/0,o[0]],close:[0,0]});for(var c=0,u=o[0];c<s;u+=l,c++){var d=c===s-1?o[1]:u+l;a.push({interval:[u,d],close:[1,1]})}n.maxOpen&&a.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(a),each$f(a,function(f,v){f.index=v,f.text=this.formatValueText(f.interval)},this)},categories:function(a){var n=this.option;each$f(n.categories,function(r){a.push({text:this.formatValueText(r,!0),value:r})},this),normalizeReverse(n,a)},pieces:function(a){var n=this.option;each$f(n.pieces,function(r,o){isObject$3(r)||(r={value:r});var s={text:"",index:o};if(r.label!=null&&(s.text=r.label),r.hasOwnProperty("value")){var l=s.value=r.value;s.interval=[l,l],s.close=[1,1]}else{for(var c=s.interval=[],u=s.close=[0,0],d=[1,0,1],f=[-1/0,1/0],v=[],g=0;g<2;g++){for(var y=[["gte","gt","min"],["lte","lt","max"]][g],_=0;_<3&&c[g]==null;_++)c[g]=r[y[_]],u[g]=d[_],v[g]=_===2;c[g]==null&&(c[g]=f[g])}v[0]&&c[1]===1/0&&(u[0]=0),v[1]&&c[0]===-1/0&&(u[1]=0),c[0]===c[1]&&u[0]&&u[1]&&(s.value=c[0])}s.visual=VisualMapping.retrieveVisuals(r),a.push(s)},this),normalizeReverse(n,a),reformIntervals(a),each$f(a,function(r){var o=r.close,s=[["<","≤"][o[1]],[">","≥"][o[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,s)},this)}};function normalizeReverse(a,n){var r=a.inverse;(a.orient==="vertical"?!r:r)&&n.reverse()}var PiecewiseVisualMapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.doRender=function(){var r=this.group;r.removeAll();var o=this.visualMapModel,s=o.get("textGap"),l=o.textStyleModel,c=l.getFont(),u=l.getTextColor(),d=this._getItemAlign(),f=o.itemSize,v=this._getViewData(),g=v.endsText,y=retrieve(o.get("showLabel",!0),!g),_=!o.get("selectedMode");g&&this._renderEndsText(r,g[0],f,y,d),each$f(v.viewPieceList,function(S){var x=S.piece,T=new Group$4;T.onclick=bind$1(this._onItemClick,this,x),this._enableHoverLink(T,S.indexInModelPieceList);var w=o.getRepresentValue(x);if(this._createItemSymbol(T,w,[0,0,f[0],f[1]],_),y){var E=this.visualMapModel.getValueState(w);T.add(new ZRText({style:{x:d==="right"?-s:f[0]+s,y:f[1]/2,text:x.text,verticalAlign:"middle",align:d,font:c,fill:u,opacity:E==="outOfRange"?.5:1},silent:_}))}r.add(T)},this),g&&this._renderEndsText(r,g[1],f,y,d),box(o.get("orient"),r,o.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},n.prototype._enableHoverLink=function(r,o){var s=this;r.on("mouseover",function(){return l("highlight")}).on("mouseout",function(){return l("downplay")});var l=function(c){var u=s.visualMapModel;u.option.hoverLink&&s.api.dispatchAction({type:c,batch:makeHighDownBatch(u.findTargetDataIndices(o),u)})}},n.prototype._getItemAlign=function(){var r=this.visualMapModel,o=r.option;if(o.orient==="vertical")return getItemAlign(r,this.api,r.itemSize);var s=o.align;return(!s||s==="auto")&&(s="left"),s},n.prototype._renderEndsText=function(r,o,s,l,c){if(o){var u=new Group$4,d=this.visualMapModel.textStyleModel;u.add(new ZRText({style:createTextStyle(d,{x:l?c==="right"?s[0]:0:s[0]/2,y:s[1]/2,verticalAlign:"middle",align:l?c:"center",text:o})})),r.add(u)}},n.prototype._getViewData=function(){var r=this.visualMapModel,o=map$1(r.getPieceList(),function(u,d){return{piece:u,indexInModelPieceList:d}}),s=r.get("text"),l=r.get("orient"),c=r.get("inverse");return(l==="horizontal"?c:!c)?o.reverse():s&&(s=s.slice().reverse()),{viewPieceList:o,endsText:s}},n.prototype._createItemSymbol=function(r,o,s,l){var c=createSymbol$1(this.getControllerVisual(o,"symbol"),s[0],s[1],s[2],s[3],this.getControllerVisual(o,"color"));c.silent=l,r.add(c)},n.prototype._onItemClick=function(r){var o=this.visualMapModel,s=o.option,l=s.selectedMode;if(l){var c=clone$4(s.selected),u=o.getSelectedMapKey(r);l==="single"||l===!0?(c[u]=!0,each$f(c,function(d,f){c[f]=f===u})):c[u]=!c[u],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},n.type="visualMap.piecewise",n}(VisualMapView);function install$4(a){a.registerComponentModel(PiecewiseModel),a.registerComponentView(PiecewiseVisualMapView),installCommon(a)}function install$3(a){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(a,n){var r=a.getModel("aria");if(!r.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,a.getLocaleModel().get("aria"),!1),merge(r.option,o,!1),s(),l();function s(){var f=r.getModel("decal"),v=f.get("show");if(v){var g=createHashMap();a.eachSeries(function(y){if(!y.isColorBySeries()){var _=g.get(y.type);_||(_={},g.set(y.type,_)),inner(y).scope=_}}),a.eachRawSeries(function(y){if(a.isSeriesFiltered(y))return;if(isFunction(y.enableAriaDecal)){y.enableAriaDecal();return}var _=y.getData();if(y.isColorBySeries()){var E=getDecalFromPalette(y.ecModel,y.name,decalPaletteScope,a.getSeriesCount()),P=_.getVisual("decal");_.setVisual("decal",D(P,E))}else{var S=y.getRawData(),x={},T=inner(y).scope;_.each(function(L){var $=_.getRawIndex(L);x[$]=L});var w=S.count();S.each(function(L){var $=x[L],O=S.getName(L)||L+"",B=getDecalFromPalette(y.ecModel,O,T,w),V=_.getItemVisual($,"decal");_.setItemVisual($,"decal",D(V,B))})}function D(L,$){var O=L?extend(extend({},$),L):$;return O.dirty=!0,O}})}}function l(){var f=n.getZr().dom;if(f){var v=a.getLocaleModel().get("aria"),g=r.getModel("label");if(g.option=defaults(g.option,v),!!g.get("enabled")){if(f.setAttribute("role","img"),g.get("description")){f.setAttribute("aria-label",g.get("description"));return}var y=a.getSeriesCount(),_=g.get(["data","maxCount"])||10,S=g.get(["series","maxCount"])||10,x=Math.min(y,S),T;if(!(y<1)){var w=u();if(w){var E=g.get(["general","withTitle"]);T=c(E,{title:w})}else T=g.get(["general","withoutTitle"]);var P=[],D=y>1?g.get(["series","multiple","prefix"]):g.get(["series","single","prefix"]);T+=c(D,{seriesCount:y}),a.eachSeries(function(B,V){if(V<x){var F=void 0,U=B.get("name"),G=U?"withName":"withoutName";F=y>1?g.get(["series","multiple",G]):g.get(["series","single",G]),F=c(F,{seriesId:B.seriesIndex,seriesName:B.get("name"),seriesType:d(B.subType)});var W=B.getData();if(W.count()>_){var j=g.get(["data","partialData"]);F+=c(j,{displayCnt:_})}else F+=g.get(["data","allData"]);for(var K=g.get(["data","separator","middle"]),q=g.get(["data","separator","end"]),ie=g.get(["data","excludeDimensionId"]),ee=[],he=0;he<W.count();he++)if(he<_){var pe=W.getName(he),ce=ie?filter(W.getValues(he),function(we,ge){return indexOf(ie,ge)===-1}):W.getValues(he),ye=g.get(["data",pe?"withName":"withoutName"]);ee.push(c(ye,{name:pe,value:ce.join(K)}))}F+=ee.join(K)+q,P.push(F)}});var L=g.getModel(["series","multiple","separator"]),$=L.get("middle"),O=L.get("end");T+=P.join($)+O,f.setAttribute("aria-label",T)}}}}function c(f,v){if(!isString(f))return f;var g=f;return each$f(v,function(y,_){g=g.replace(new RegExp("\\{\\s*"+_+"\\s*\\}","g"),y)}),g}function u(){var f=a.get("title");return f&&f.length&&(f=f[0]),f&&f.text}function d(f){var v=a.getLocaleModel().get(["series","typeNames"]);return v[f]||v.chart}}function ariaPreprocessor(a){if(!(!a||!a.aria)){var n=a.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(r){n[r]!=null&&(n.label[r]=n[r])})}}function install$2(a){a.registerPreprocessor(ariaPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function a(n){var r=this._condVal=isString(n)?new RegExp(n):isRegExp(n)?n:null;if(r==null){var o="";throwError(o)}}return a.prototype.evaluate=function(n){var r=typeof n;return isString(r)?this._condVal.test(n):isNumber(r)?this._condVal.test(n+""):!1},a}(),ConstConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),AndConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=this.children,r=0;r<n.length;r++)if(!n[r].evaluate())return!1;return!0},a}(),OrConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=this.children,r=0;r<n.length;r++)if(n[r].evaluate())return!0;return!1},a}(),NotConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),RelationalConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=!!this.valueParser,r=this.getValue,o=r(this.valueGetterParam),s=n?this.valueParser(o):null,l=0;l<this.subCondList.length;l++)if(!this.subCondList[l].evaluate(n?s:o))return!1;return!0},a}();function parseOption(a,n){if(a===!0||a===!1){var r=new ConstConditionInternal;return r.value=a,r}var o="";return isObjectNotArray(a)||throwError(o),a.and?parseAndOrOption("and",a,n):a.or?parseAndOrOption("or",a,n):a.not?parseNotOption(a,n):parseRelationalOption(a,n)}function parseAndOrOption(a,n,r){var o=n[a],s="";isArray$1(o)||throwError(s),o.length||throwError(s);var l=a==="and"?new AndConditionInternal:new OrConditionInternal;return l.children=map$1(o,function(c){return parseOption(c,r)}),l.children.length||throwError(s),l}function parseNotOption(a,n){var r=a.not,o="";isObjectNotArray(r)||throwError(o);var s=new NotConditionInternal;return s.child=parseOption(r,n),s.child||throwError(o),s}function parseRelationalOption(a,n){for(var r="",o=n.prepareGetValue(a),s=[],l=keys(a),c=a.parser,u=c?getRawValueParser(c):null,d=0;d<l.length;d++){var f=l[d];if(!(f==="parser"||n.valueGetterAttrMap.get(f))){var v=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,f)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[f]:f,g=a[f],y=u?u(g):g,_=createFilterComparator(v,y)||v==="reg"&&new RegExpEvaluator(y);_||throwError(r),s.push(_)}}s.length||throwError(r);var S=new RelationalConditionInternal;return S.valueGetterParam=o,S.valueParser=u,S.getValue=n.getValue,S.subCondList=s,S}function isObjectNotArray(a){return isObject$3(a)&&!isArrayLike(a)}var ConditionalExpressionParsed=function(){function a(n,r){this._cond=parseOption(n,r)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function parseConditionalExpression(a,n){return new ConditionalExpressionParsed(a,n)}var filterTransform={type:"echarts:filter",transform:function(a){for(var n=a.upstream,r,o=parseConditionalExpression(a.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(u){var d="",f=u.dimension;hasOwn(u,"dimension")||throwError(d);var v=n.getDimensionInfo(f);return v||throwError(d),{dimIdx:v.index}},getValue:function(u){return n.retrieveValueFromItem(r,u.dimIdx)}}),s=[],l=0,c=n.count();l<c;l++)r=n.getRawDataItem(l),o.evaluate()&&s.push(r);return{data:s}}},sortTransform={type:"echarts:sort",transform:function(a){var n=a.upstream,r=a.config,o="",s=normalizeToArray(r);s.length||throwError(o);var l=[];each$f(s,function(v){var g=v.dimension,y=v.order,_=v.parser,S=v.incomparable;if(g==null&&throwError(o),y!=="asc"&&y!=="desc"&&throwError(o),S&&S!=="min"&&S!=="max"){var x="";throwError(x)}if(y!=="asc"&&y!=="desc"){var T="";throwError(T)}var w=n.getDimensionInfo(g);w||throwError(o);var E=_?getRawValueParser(_):null;_&&!E&&throwError(o),l.push({dimIdx:w.index,parser:E,comparator:new SortOrderComparator(y,S)})});var c=n.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(o);for(var u=[],d=0,f=n.count();d<f;d++)u.push(n.getRawDataItem(d));return u.sort(function(v,g){for(var y=0;y<l.length;y++){var _=l[y],S=n.retrieveValueFromItem(v,_.dimIdx),x=n.retrieveValueFromItem(g,_.dimIdx);_.parser&&(S=_.parser(S),x=_.parser(x));var T=_.comparator.evaluate(S,x);if(T!==0)return T}return 0}),{data:u}}};function install$1(a){a.registerTransform(filterTransform),a.registerTransform(sortTransform)}var DatasetModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return n.prototype.init=function(r,o,s){a.prototype.init.call(this,r,o,s),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n}(ComponentModel),DatasetView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return n.type="dataset",n}(ComponentView);function install(a){a.registerComponentModel(DatasetModel),a.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(a,n){return Math.abs(a-n)<1e-5}function pathToBezierCurves(a){var n=a.data,r=a.len(),o=[],s,l=0,c=0,u=0,d=0;function f(W,j){s&&s.length>2&&o.push(s),s=[W,j]}function v(W,j,K,q){aroundEqual(W,K)&&aroundEqual(j,q)||s.push(W,j,K,q,K,q)}function g(W,j,K,q,ie,ee){var he=Math.abs(j-W),pe=Math.tan(he/4)*4/3,ce=j<W?-1:1,ye=Math.cos(W),we=Math.sin(W),ge=Math.cos(j),Se=Math.sin(j),$e=ye*ie+K,oe=we*ee+q,me=ge*ie+K,_e=Se*ee+q,Te=ie*pe*ce,Le=ee*pe*ce;s.push($e-Te*we,oe+Le*ye,me+Te*Se,_e-Le*ge,me,_e)}for(var y,_,S,x,T=0;T<r;){var w=n[T++],E=T===1;switch(E&&(l=n[T],c=n[T+1],u=l,d=c,(w===CMD.L||w===CMD.C||w===CMD.Q)&&(s=[u,d])),w){case CMD.M:l=u=n[T++],c=d=n[T++],f(u,d);break;case CMD.L:y=n[T++],_=n[T++],v(l,c,y,_),l=y,c=_;break;case CMD.C:s.push(n[T++],n[T++],n[T++],n[T++],l=n[T++],c=n[T++]);break;case CMD.Q:y=n[T++],_=n[T++],S=n[T++],x=n[T++],s.push(l+2/3*(y-l),c+2/3*(_-c),S+2/3*(y-S),x+2/3*(_-x),S,x),l=S,c=x;break;case CMD.A:var P=n[T++],D=n[T++],L=n[T++],$=n[T++],O=n[T++],B=n[T++]+O;T+=1;var V=!n[T++];y=Math.cos(O)*L+P,_=Math.sin(O)*$+D,E?(u=y,d=_,f(u,d)):v(l,c,y,_),l=Math.cos(B)*L+P,c=Math.sin(B)*$+D;for(var F=(V?-1:1)*Math.PI/2,U=O;V?U>B:U<B;U+=F){var G=V?Math.max(U+F,B):Math.min(U+F,B);g(U,G,P,D,L,$)}break;case CMD.R:u=l=n[T++],d=c=n[T++],y=u+n[T++],_=d+n[T++],f(y,d),v(y,d,y,_),v(y,_,u,_),v(u,_,u,d),v(u,d,y,d);break;case CMD.Z:s&&v(l,c,u,d),l=u,c=d;break}}return s&&s.length>2&&o.push(s),o}function adpativeBezier(a,n,r,o,s,l,c,u,d,f){if(aroundEqual(a,r)&&aroundEqual(n,o)&&aroundEqual(s,c)&&aroundEqual(l,u)){d.push(c,u);return}var v=2/f,g=v*v,y=c-a,_=u-n,S=Math.sqrt(y*y+_*_);y/=S,_/=S;var x=r-a,T=o-n,w=s-c,E=l-u,P=x*x+T*T,D=w*w+E*E;if(P<g&&D<g){d.push(c,u);return}var L=y*x+_*T,$=-y*w-_*E,O=P-L*L,B=D-$*$;if(O<g&&L>=0&&B<g&&$>=0){d.push(c,u);return}var V=[],F=[];cubicSubdivide(a,r,s,c,.5,V),cubicSubdivide(n,o,l,u,.5,F),adpativeBezier(V[0],F[0],V[1],F[1],V[2],F[2],V[3],F[3],d,f),adpativeBezier(V[4],F[4],V[5],F[5],V[6],F[6],V[7],F[7],d,f)}function pathToPolygons(a,n){var r=pathToBezierCurves(a),o=[];n=n||1;for(var s=0;s<r.length;s++){var l=r[s],c=[],u=l[0],d=l[1];c.push(u,d);for(var f=2;f<l.length;){var v=l[f++],g=l[f++],y=l[f++],_=l[f++],S=l[f++],x=l[f++];adpativeBezier(u,d,v,g,y,_,S,x,c,n),u=S,d=x}o.push(c)}return o}function getDividingGrids(a,n,r){var o=a[n],s=a[1-n],l=Math.abs(o/s),c=Math.ceil(Math.sqrt(l*r)),u=Math.floor(r/c);u===0&&(u=1,c=r);for(var d=[],f=0;f<c;f++)d.push(u);var v=c*u,g=r-v;if(g>0)for(var f=0;f<g;f++)d[f%c]+=1;return d}function divideSector(a,n,r){for(var o=a.r0,s=a.r,l=a.startAngle,c=a.endAngle,u=Math.abs(c-l),d=u*s,f=s-o,v=d>Math.abs(f),g=getDividingGrids([d,f],v?0:1,n),y=(v?u:f)/g.length,_=0;_<g.length;_++)for(var S=(v?f:u)/g[_],x=0;x<g[_];x++){var T={};v?(T.startAngle=l+y*_,T.endAngle=l+y*(_+1),T.r0=o+S*x,T.r=o+S*(x+1)):(T.startAngle=l+S*x,T.endAngle=l+S*(x+1),T.r0=o+y*_,T.r=o+y*(_+1)),T.clockwise=a.clockwise,T.cx=a.cx,T.cy=a.cy,r.push(T)}}function divideRect(a,n,r){for(var o=a.width,s=a.height,l=o>s,c=getDividingGrids([o,s],l?0:1,n),u=l?"width":"height",d=l?"height":"width",f=l?"x":"y",v=l?"y":"x",g=a[u]/c.length,y=0;y<c.length;y++)for(var _=a[d]/c[y],S=0;S<c[y];S++){var x={};x[f]=y*g,x[v]=S*_,x[u]=g,x[d]=_,x.x+=a.x,x.y+=a.y,r.push(x)}}function crossProduct2d(a,n,r,o){return a*o-r*n}function lineLineIntersect(a,n,r,o,s,l,c,u){var d=r-a,f=o-n,v=c-s,g=u-l,y=crossProduct2d(v,g,d,f);if(Math.abs(y)<1e-6)return null;var _=a-s,S=n-l,x=crossProduct2d(_,S,v,g)/y;return x<0||x>1?null:new Point(x*d+a,x*f+n)}function projPtOnLine(a,n,r){var o=new Point;Point.sub(o,r,n),o.normalize();var s=new Point;Point.sub(s,a,n);var l=s.dot(o);return l}function addToPoly(a,n){var r=a[a.length-1];r&&r[0]===n[0]&&r[1]===n[1]||a.push(n)}function splitPolygonByLine(a,n,r){for(var o=a.length,s=[],l=0;l<o;l++){var c=a[l],u=a[(l+1)%o],d=lineLineIntersect(c[0],c[1],u[0],u[1],n.x,n.y,r.x,r.y);d&&s.push({projPt:projPtOnLine(d,n,r),pt:d,idx:l})}if(s.length<2)return[{points:a},{points:a}];s.sort(function(T,w){return T.projPt-w.projPt});var f=s[0],v=s[s.length-1];if(v.idx<f.idx){var g=f;f=v,v=g}for(var y=[f.pt.x,f.pt.y],_=[v.pt.x,v.pt.y],S=[y],x=[_],l=f.idx+1;l<=v.idx;l++)addToPoly(S,a[l].slice());addToPoly(S,_),addToPoly(S,y);for(var l=v.idx+1;l<=f.idx+o;l++)addToPoly(x,a[l%o].slice());return addToPoly(x,y),addToPoly(x,_),[{points:S},{points:x}]}function binaryDividePolygon(a){var n=a.points,r=[],o=[];fromPoints(n,r,o);var s=new BoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),l=s.width,c=s.height,u=s.x,d=s.y,f=new Point,v=new Point;return l>c?(f.x=v.x=u+l/2,f.y=d,v.y=d+c):(f.y=v.y=d+c/2,f.x=u,v.x=u+l),splitPolygonByLine(n,f,v)}function binaryDivideRecursive(a,n,r,o){if(r===1)o.push(n);else{var s=Math.floor(r/2),l=a(n);binaryDivideRecursive(a,l[0],s,o),binaryDivideRecursive(a,l[1],r-s,o)}return o}function clone(a,n){for(var r=[],o=0;o<n;o++)r.push(clonePath(a));return r}function copyPathProps(a,n){n.setStyle(a.style),n.z=a.z,n.z2=a.z2,n.zlevel=a.zlevel}function polygonConvert(a){for(var n=[],r=0;r<a.length;)n.push([a[r++],a[r++]]);return n}function split(a,n){var r=[],o=a.shape,s;switch(a.type){case"rect":divideRect(o,n,r),s=Rect$2;break;case"sector":divideSector(o,n,r),s=Sector;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},n,r),s=Sector;break;default:var l=a.getComputedTransform(),c=l?Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1],l[2]*l[2]+l[3]*l[3])):1,u=map$1(pathToPolygons(a.getUpdatedPathProxy(),c),function(w){return polygonConvert(w)}),d=u.length;if(d===0)binaryDivideRecursive(binaryDividePolygon,{points:u[0]},n,r);else if(d===n)for(var f=0;f<d;f++)r.push({points:u[f]});else{var v=0,g=map$1(u,function(w){var E=[],P=[];fromPoints(w,E,P);var D=(P[1]-E[1])*(P[0]-E[0]);return v+=D,{poly:w,area:D}});g.sort(function(w,E){return E.area-w.area});for(var y=n,f=0;f<d;f++){var _=g[f];if(y<=0)break;var S=f===d-1?y:Math.ceil(_.area/v*n);S<0||(binaryDivideRecursive(binaryDividePolygon,{points:_.poly},S,r),y-=S)}}s=Polygon;break}if(!s)return clone(a,n);for(var x=[],f=0;f<r.length;f++){var T=new s;T.setShape(r[f]),copyPathProps(a,T),x.push(T)}return x}function alignSubpath(a,n){var r=a.length,o=n.length;if(r===o)return[a,n];for(var s=[],l=[],c=r<o?a:n,u=Math.min(r,o),d=Math.abs(o-r)/6,f=(u-2)/6,v=Math.ceil(d/f)+1,g=[c[0],c[1]],y=d,_=2;_<u;){var S=c[_-2],x=c[_-1],T=c[_++],w=c[_++],E=c[_++],P=c[_++],D=c[_++],L=c[_++];if(y<=0){g.push(T,w,E,P,D,L);continue}for(var $=Math.min(y,v-1)+1,O=1;O<=$;O++){var B=O/$;cubicSubdivide(S,T,E,D,B,s),cubicSubdivide(x,w,P,L,B,l),S=s[3],x=l[3],g.push(s[1],l[1],s[2],l[2],S,x),T=s[5],w=l[5],E=s[6],P=l[6]}y-=$-1}return c===a?[g,n]:[a,g]}function createSubpath(a,n){for(var r=a.length,o=a[r-2],s=a[r-1],l=[],c=0;c<n.length;)l[c++]=o,l[c++]=s;return l}function alignBezierCurves(a,n){for(var r,o,s,l=[],c=[],u=0;u<Math.max(a.length,n.length);u++){var d=a[u],f=n[u],v=void 0,g=void 0;d?f?(r=alignSubpath(d,f),v=r[0],g=r[1],o=v,s=g):(g=createSubpath(s||d,d),v=d):(v=createSubpath(o||f,f),g=f),l.push(v),c.push(g)}return[l,c]}function centroid(a){for(var n=0,r=0,o=0,s=a.length,l=0,c=s-2;l<s;c=l,l+=2){var u=a[c],d=a[c+1],f=a[l],v=a[l+1],g=u*v-f*d;n+=g,r+=(u+f)*g,o+=(d+v)*g}return n===0?[a[0]||0,a[1]||0]:[r/n/3,o/n/3,n]}function findBestRingOffset(a,n,r,o){for(var s=(a.length-2)/6,l=1/0,c=0,u=a.length,d=u-2,f=0;f<s;f++){for(var v=f*6,g=0,y=0;y<u;y+=2){var _=y===0?v:(v+y-2)%d+2,S=a[_]-r[0],x=a[_+1]-r[1],T=n[y]-o[0],w=n[y+1]-o[1],E=T-S,P=w-x;g+=E*E+P*P}g<l&&(l=g,c=f)}return c}function reverse(a){for(var n=[],r=a.length,o=0;o<r;o+=2)n[o]=a[r-o-2],n[o+1]=a[r-o-1];return n}function findBestMorphingRotation(a,n,r,o){for(var s=[],l,c=0;c<a.length;c++){var u=a[c],d=n[c],f=centroid(u),v=centroid(d);l==null&&(l=f[2]<0!=v[2]<0);var g=[],y=[],_=0,S=1/0,x=[],T=u.length;l&&(u=reverse(u));for(var w=findBestRingOffset(u,d,f,v)*6,E=T-2,P=0;P<E;P+=2){var D=(w+P)%E+2;g[P+2]=u[D]-f[0],g[P+3]=u[D+1]-f[1]}g[0]=u[w]-f[0],g[1]=u[w+1]-f[1];for(var L=o/r,$=-o/2;$<=o/2;$+=L){for(var O=Math.sin($),B=Math.cos($),V=0,P=0;P<u.length;P+=2){var F=g[P],U=g[P+1],G=d[P]-v[0],W=d[P+1]-v[1],j=G*B-W*O,K=G*O+W*B;x[P]=j,x[P+1]=K;var q=j-F,ie=K-U;V+=q*q+ie*ie}if(V<S){S=V,_=$;for(var ee=0;ee<x.length;ee++)y[ee]=x[ee]}}s.push({from:g,to:y,fromCp:f,toCp:v,rotation:-_})}return s}function isCombineMorphing(a){return a.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(a,n,r){var o=SAVED_METHOD_PREFIX+n,s=a[o]||a[n];a[o]||(a[o]=a[n]);var l=r.replace,c=r.after,u=r.before;a[n]=function(){var d=arguments,f;return u&&u.apply(this,d),l?f=l.apply(this,d):f=s.apply(this,d),c&&c.apply(this,d),f}}function restoreMethod(a,n){var r=SAVED_METHOD_PREFIX+n;a[r]&&(a[n]=a[r],a[r]=null)}function applyTransformOnBeziers(a,n){for(var r=0;r<a.length;r++)for(var o=a[r],s=0;s<o.length;){var l=o[s],c=o[s+1];o[s++]=n[0]*l+n[2]*c+n[4],o[s++]=n[1]*l+n[3]*c+n[5]}}function prepareMorphPath(a,n){var r=a.getUpdatedPathProxy(),o=n.getUpdatedPathProxy(),s=alignBezierCurves(pathToBezierCurves(r),pathToBezierCurves(o)),l=s[0],c=s[1],u=a.getComputedTransform(),d=n.getComputedTransform();function f(){this.transform=null}u&&applyTransformOnBeziers(l,u),d&&applyTransformOnBeziers(c,d),saveAndModifyMethod(n,"updateTransform",{replace:f}),n.transform=null;var v=findBestMorphingRotation(l,c,10,Math.PI),g=[];saveAndModifyMethod(n,"buildPath",{replace:function(y){for(var _=n.__morphT,S=1-_,x=[],T=0;T<v.length;T++){var w=v[T],E=w.from,P=w.to,D=w.rotation*_,L=w.fromCp,$=w.toCp,O=Math.sin(D),B=Math.cos(D);lerp$2(x,L,$,_);for(var V=0;V<E.length;V+=2){var F=E[V],U=E[V+1],G=P[V],W=P[V+1],j=F*S+G*_,K=U*S+W*_;g[V]=j*B-K*O+x[0],g[V+1]=j*O+K*B+x[1]}var q=g[0],ie=g[1];y.moveTo(q,ie);for(var V=2;V<E.length;){var G=g[V++],W=g[V++],ee=g[V++],he=g[V++],pe=g[V++],ce=g[V++];q===G&&ie===W&&ee===pe&&he===ce?y.lineTo(pe,ce):y.bezierCurveTo(G,W,ee,he,pe,ce),q=pe,ie=ce}}}})}function morphPath(a,n,r){if(!a||!n)return n;var o=r.done,s=r.during;prepareMorphPath(a,n),n.__morphT=0;function l(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(c){n.dirtyShape(),s&&s(c)},done:function(){l(),o&&o()}},r)),n}function hilbert(a,n,r,o,s,l){var c=16;a=s===r?0:Math.round(32767*(a-r)/(s-r)),n=l===o?0:Math.round(32767*(n-o)/(l-o));for(var u=0,d,f=(1<<c)/2;f>0;f/=2){var v=0,g=0;(a&f)>0&&(v=1),(n&f)>0&&(g=1),u+=f*f*(3*v^g),g===0&&(v===1&&(a=f-1-a,n=f-1-n),d=a,a=n,n=d)}return u}function sortPaths(a){var n=1/0,r=1/0,o=-1/0,s=-1/0,l=map$1(a,function(u){var d=u.getBoundingRect(),f=u.getComputedTransform(),v=d.x+d.width/2+(f?f[4]:0),g=d.y+d.height/2+(f?f[5]:0);return n=Math.min(v,n),r=Math.min(g,r),o=Math.max(v,o),s=Math.max(g,s),[v,g]}),c=map$1(l,function(u,d){return{cp:u,z:hilbert(u[0],u[1],n,r,o,s),path:a[d]}});return c.sort(function(u,d){return u.z-d.z}).map(function(u){return u.path})}function defaultDividePath(a){return split(a.path,a.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(a,n,r){var o=[];function s(L){for(var $=0;$<L.length;$++){var O=L[$];isCombineMorphing(O)?s(O.childrenRef()):O instanceof Path&&o.push(O)}}s(a);var l=o.length;if(!l)return createEmptyReturn();var c=r.dividePath||defaultDividePath,u=c({path:n,count:l});if(u.length!==l)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),u=sortPaths(u);for(var d=r.done,f=r.during,v=r.individualDelay,g=new Transformable,y=0;y<l;y++){var _=o[y],S=u[y];S.parent=n,S.copyTransform(g),v||prepareMorphPath(_,S)}n.__isCombineMorphing=!0,n.childrenRef=function(){return u};function x(L){for(var $=0;$<u.length;$++)u[$].addSelfToZr(L)}saveAndModifyMethod(n,"addSelfToZr",{after:function(L){x(L)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(L){for(var $=0;$<u.length;$++)u[$].removeSelfFromZr(L)}});function T(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var w=u.length;if(v)for(var E=w,P=function(){E--,E===0&&(T(),d&&d())},y=0;y<w;y++){var D=v?defaults({delay:(r.delay||0)+v(y,w,o[y],u[y]),done:P},r):r;morphPath(o[y],u[y],D)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(L){for(var $=0;$<w;$++){var O=u[$];O.__morphT=n.__morphT,O.dirtyShape()}f&&f(L)},done:function(){T();for(var L=0;L<a.length;L++)restoreMethod(a[L],"updateTransform");d&&d()}},r));return n.__zr&&x(n.__zr),{fromIndividuals:o,toIndividuals:u,count:w}}function separateMorph(a,n,r){var o=n.length,s=[],l=r.dividePath||defaultDividePath;function c(_){for(var S=0;S<_.length;S++){var x=_[S];isCombineMorphing(x)?c(x.childrenRef()):x instanceof Path&&s.push(x)}}if(isCombineMorphing(a)){c(a.childrenRef());var u=s.length;if(u<o)for(var d=0,f=u;f<o;f++)s.push(clonePath(s[d++%u]));s.length=o}else{s=l({path:a,count:o});for(var v=a.getComputedTransform(),f=0;f<s.length;f++)s[f].setLocalTransform(v);if(s.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}s=sortPaths(s),n=sortPaths(n);for(var g=r.individualDelay,f=0;f<o;f++){var y=g?defaults({delay:(r.delay||0)+g(f,o,s[f],n[f])},r):r;morphPath(s[f],n[f],y)}return{fromIndividuals:s,toIndividuals:n,count:n.length}}function isMultiple(a){return isArray$1(a[0])}function prepareMorphBatches(a,n){for(var r=[],o=a.length,s=0;s<o;s++)r.push({one:a[s],many:[]});for(var s=0;s<n.length;s++){var l=n[s].length,c=void 0;for(c=0;c<l;c++)r[c%o].many.push(n[s][c])}for(var u=0,s=o-1;s>=0;s--)if(!r[s].many.length){var d=r[u].many;if(d.length<=1)if(u)u=0;else return r;var l=d.length,f=Math.ceil(l/2);r[s].many=d.slice(f,l),r[u].many=d.slice(0,f),u++}return r}var pathDividers={clone:function(a){for(var n=[],r=1-Math.pow(1-a.path.style.opacity,1/a.count),o=0;o<a.count;o++){var s=clonePath(a.path);s.setStyle("opacity",r),n.push(s)}return n},split:null};function applyMorphAnimation(a,n,r,o,s,l){if(!a.length||!n.length)return;var c=getAnimationConfig("update",o,s);if(!(c&&c.duration>0))return;var u=o.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},c),f,v;isMultiple(a)&&(f=a,v=n),isMultiple(n)&&(f=n,v=a);function g(w,E,P,D,L){var $=w.many,O=w.one;if($.length===1&&!L){var B=E?$[0]:O,V=E?O:$[0];if(isCombineMorphing(B))g({many:[B],one:V},!0,P,D,!0);else{var F=u?defaults({delay:u(P,D)},d):d;morphPath(B,V,F),l(B,V,B,V,F)}}else for(var U=defaults({dividePath:pathDividers[r],individualDelay:u&&function(ie,ee,he,pe){return u(ie+P,D)}},d),G=E?combineMorph($,O,U):separateMorph(O,$,U),W=G.fromIndividuals,j=G.toIndividuals,K=W.length,q=0;q<K;q++){var F=u?defaults({delay:u(q,K)},d):d;l(W[q],j[q],E?$[q]:w.one,E?w.one:$[q],F)}}for(var y=f?f===a:a.length>n.length,_=f?prepareMorphBatches(v,f):prepareMorphBatches(y?n:a,[y?a:n]),S=0,x=0;x<_.length;x++)S+=_[x].many.length;for(var T=0,x=0;x<_.length;x++)g(_[x],y,T,S),T+=_[x].many.length}function getPathList(a){if(!a)return[];if(isArray$1(a)){for(var n=[],r=0;r<a.length;r++)n.push(getPathList(a[r]));return n}var o=[];return a.traverse(function(s){s instanceof Path&&!s.disableMorphing&&!s.invisible&&!s.ignore&&o.push(s)}),o}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(a,n){for(var r=a.dimensions,o=0;o<r.length;o++){var s=a.getDimensionInfo(r[o]);if(s&&s.otherDims[n]===0)return r[o]}}function getValueByDimension(a,n,r){var o=a.getDimensionInfo(r),s=o&&o.ordinalMeta;if(o){var l=a.get(o.name,n);return s&&s.categories[l]||l+""}}function getGroupId(a,n,r,o){var s=o?"itemChildGroupId":"itemGroupId",l=getDimension(a,s);if(l){var c=getValueByDimension(a,n,l);return c}var u=a.getRawDataItem(n),d=o?"childGroupId":"groupId";if(u&&u[d])return u[d]+"";if(!o)return r||a.getId(n)}function flattenDataDiffItems(a){var n=[];return each$f(a,function(r){var o=r.data,s=r.dataGroupId;if(!(o.count()>DATA_COUNT_THRESHOLD))for(var l=o.getIndices(),c=0;c<l.length;c++)n.push({data:o,groupId:getGroupId(o,c,s,!1),childGroupId:getGroupId(o,c,s,!0),divide:r.divide,dataIndex:c})}),n}function fadeInElement(a,n,r){a.traverse(function(o){o instanceof Path&&initProps(o,{style:{opacity:0}},n,{dataIndex:r,isFrom:!0})})}function removeEl(a){if(a.parent){var n=a.getComputedTransform();a.setLocalTransform(n),a.parent.remove(a)}}function stopAnimation(a){a.stopAnimation(),a.isGroup&&a.traverse(function(n){n.stopAnimation()})}function animateElementStyles(a,n,r){var o=getAnimationConfig("update",r,n);o&&a.traverse(function(s){if(s instanceof Displayable){var l=getOldStyle(s);l&&s.animateFrom({style:l},o)}})}function isAllIdSame(a,n){var r=a.length;if(r!==n.length)return!1;for(var o=0;o<r;o++){var s=a[o],l=n[o];if(s.data.getId(s.dataIndex)!==l.data.getId(l.dataIndex))return!1}return!0}function transitionBetween(a,n,r){var o=flattenDataDiffItems(a),s=flattenDataDiffItems(n);function l(P,D,L,$,O){(L||P)&&D.animateFrom({style:L&&L!==P?extend(extend({},L.style),P.style):P.style},O)}var c=!1,u=TRANSITION_NONE,d=createHashMap(),f=createHashMap();o.forEach(function(P){P.groupId&&d.set(P.groupId,!0),P.childGroupId&&f.set(P.childGroupId,!0)});for(var v=0;v<s.length;v++){var g=s[v].groupId;if(f.get(g)){u=TRANSITION_P2C;break}var y=s[v].childGroupId;if(y&&d.get(y)){u=TRANSITION_C2P;break}}function _(P,D){return function(L){var $=L.data,O=L.dataIndex;return D?$.getId(O):P?u===TRANSITION_P2C?L.childGroupId:L.groupId:u===TRANSITION_C2P?L.childGroupId:L.groupId}}var S=isAllIdSame(o,s),x={};if(!S)for(var v=0;v<s.length;v++){var T=s[v],w=T.data.getItemGraphicEl(T.dataIndex);w&&(x[w.id]=!0)}function E(P,D){var L=o[D],$=s[P],O=$.data.hostModel,B=L.data.getItemGraphicEl(L.dataIndex),V=$.data.getItemGraphicEl($.dataIndex);if(B===V){V&&animateElementStyles(V,$.dataIndex,O);return}B&&x[B.id]||V&&(stopAnimation(V),B?(stopAnimation(B),removeEl(B),c=!0,applyMorphAnimation(getPathList(B),getPathList(V),$.divide,O,P,l)):fadeInElement(V,O,P))}new DataDiffer(o,s,_(!0,S),_(!1,S),null,"multiple").update(E).updateManyToOne(function(P,D){var L=s[P],$=L.data,O=$.hostModel,B=$.getItemGraphicEl(L.dataIndex),V=filter(map$1(D,function(F){return o[F].data.getItemGraphicEl(o[F].dataIndex)}),function(F){return F&&F!==B&&!x[F.id]});B&&(stopAnimation(B),V.length?(each$f(V,function(F){stopAnimation(F),removeEl(F)}),c=!0,applyMorphAnimation(getPathList(V),getPathList(B),L.divide,O,P,l)):fadeInElement(B,O,L.dataIndex))}).updateOneToMany(function(P,D){var L=o[D],$=L.data.getItemGraphicEl(L.dataIndex);if(!($&&x[$.id])){var O=filter(map$1(P,function(V){return s[V].data.getItemGraphicEl(s[V].dataIndex)}),function(V){return V&&V!==$}),B=s[P[0]].data.hostModel;O.length&&(each$f(O,function(V){return stopAnimation(V)}),$?(stopAnimation($),removeEl($),c=!0,applyMorphAnimation(getPathList($),getPathList(O),L.divide,B,P[0],l)):each$f(O,function(V){return fadeInElement(V,B,P[0])}))}}).updateManyToMany(function(P,D){new DataDiffer(D,P,function(L){return o[L].data.getId(o[L].dataIndex)},function(L){return s[L].data.getId(s[L].dataIndex)}).update(function(L,$){E(P[L],D[$])}).execute()}).execute(),c&&each$f(n,function(P){var D=P.data,L=D.hostModel,$=L&&r.getViewOfSeriesModel(L),O=getAnimationConfig("update",L,0);$&&L.isAnimationEnabled()&&O&&O.duration>0&&$.group.traverse(function(B){B instanceof Path&&!B.animators.length&&B.animateFrom({style:{opacity:0}},O)})})}function getSeriesTransitionKey(a){var n=a.getModel("universalTransition").get("seriesKey");return n||a.id}function convertArraySeriesKeyToString(a){return isArray$1(a)?a.sort().join(","):a}function getDivideShapeFromData(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(a,n){var r=createHashMap(),o=createHashMap(),s=createHashMap();return each$f(a.oldSeries,function(l,c){var u=a.oldDataGroupIds[c],d=a.oldData[c],f=getSeriesTransitionKey(l),v=convertArraySeriesKeyToString(f);o.set(v,{dataGroupId:u,data:d}),isArray$1(f)&&each$f(f,function(g){s.set(g,{key:v,dataGroupId:u,data:d})})}),each$f(n.updatedSeries,function(l){if(l.isUniversalTransitionEnabled()&&l.isAnimationEnabled()){var c=l.get("dataGroupId"),u=l.getData(),d=getSeriesTransitionKey(l),f=convertArraySeriesKeyToString(d),v=o.get(f);if(v)r.set(f,{oldSeries:[{dataGroupId:v.dataGroupId,divide:getDivideShapeFromData(v.data),data:v.data}],newSeries:[{dataGroupId:c,divide:getDivideShapeFromData(u),data:u}]});else if(isArray$1(d)){var g=[];each$f(d,function(S){var x=o.get(S);x.data&&g.push({dataGroupId:x.dataGroupId,divide:getDivideShapeFromData(x.data),data:x.data})}),g.length&&r.set(f,{oldSeries:g,newSeries:[{dataGroupId:c,data:u,divide:getDivideShapeFromData(u)}]})}else{var y=s.get(d);if(y){var _=r.get(y.key);_||(_={oldSeries:[{dataGroupId:y.dataGroupId,data:y.data,divide:getDivideShapeFromData(y.data)}],newSeries:[]},r.set(y.key,_)),_.newSeries.push({dataGroupId:c,data:u,divide:getDivideShapeFromData(u)})}}}}),r}function querySeries(a,n){for(var r=0;r<a.length;r++){var o=n.seriesIndex!=null&&n.seriesIndex===a[r].seriesIndex||n.seriesId!=null&&n.seriesId===a[r].id;if(o)return r}}function transitionSeriesFromOpt(a,n,r,o){var s=[],l=[];each$f(normalizeToArray(a.from),function(c){var u=querySeries(n.oldSeries,c);u>=0&&s.push({dataGroupId:n.oldDataGroupIds[u],data:n.oldData[u],divide:getDivideShapeFromData(n.oldData[u]),groupIdDim:c.dimension})}),each$f(normalizeToArray(a.to),function(c){var u=querySeries(r.updatedSeries,c);if(u>=0){var d=r.updatedSeries[u].getData();l.push({dataGroupId:n.oldDataGroupIds[u],data:d,divide:getDivideShapeFromData(d),groupIdDim:c.dimension})}}),s.length>0&&l.length>0&&transitionBetween(s,l,o)}function installUniversalTransition(a){a.registerUpdateLifecycle("series:beforeupdate",function(n,r,o){each$f(normalizeToArray(o.seriesTransition),function(s){each$f(normalizeToArray(s.to),function(l){for(var c=o.updatedSeries,u=0;u<c.length;u++)(l.seriesIndex!=null&&l.seriesIndex===c[u].seriesIndex||l.seriesId!=null&&l.seriesId===c[u].id)&&(c[u][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(n,r,o){var s=getUniversalTransitionGlobalStore(r);if(s.oldSeries&&o.updatedSeries&&o.optionChanged){var l=o.seriesTransition;if(l)each$f(normalizeToArray(l),function(_){transitionSeriesFromOpt(_,s,o,r)});else{var c=findTransitionSeriesBatches(s,o);each$f(c.keys(),function(_){var S=c.get(_);transitionBetween(S.oldSeries,S.newSeries,r)})}each$f(o.updatedSeries,function(_){_[SERIES_UNIVERSAL_TRANSITION_PROP]&&(_[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var u=n.getSeries(),d=s.oldSeries=[],f=s.oldDataGroupIds=[],v=s.oldData=[],g=0;g<u.length;g++){var y=u[g].getData();y.count()<DATA_COUNT_THRESHOLD&&(d.push(u[g]),f.push(u[g].get("dataGroupId")),v.push(y))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var chart={exports:{}};/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */(function(a,n){(function(r,o){a.exports=o()})(commonjsGlobal,function(){function r(){}const o=function(){let C=0;return function(){return C++}}();function s(C){return C===null||typeof C>"u"}function l(C){if(Array.isArray&&Array.isArray(C))return!0;const b=Object.prototype.toString.call(C);return b.slice(0,7)==="[object"&&b.slice(-6)==="Array]"}function c(C){return C!==null&&Object.prototype.toString.call(C)==="[object Object]"}const u=C=>(typeof C=="number"||C instanceof Number)&&isFinite(+C);function d(C,b){return u(C)?C:b}function f(C,b){return typeof C>"u"?b:C}const v=(C,b)=>typeof C=="string"&&C.endsWith("%")?parseFloat(C)/100:C/b,g=(C,b)=>typeof C=="string"&&C.endsWith("%")?parseFloat(C)/100*b:+C;function y(C,b,A){if(C&&typeof C.call=="function")return C.apply(A,b)}function _(C,b,A,M){let R,I,N;if(l(C))if(I=C.length,M)for(R=I-1;R>=0;R--)b.call(A,C[R],R);else for(R=0;R<I;R++)b.call(A,C[R],R);else if(c(C))for(N=Object.keys(C),I=N.length,R=0;R<I;R++)b.call(A,C[N[R]],N[R])}function S(C,b){let A,M,R,I;if(!C||!b||C.length!==b.length)return!1;for(A=0,M=C.length;A<M;++A)if(R=C[A],I=b[A],R.datasetIndex!==I.datasetIndex||R.index!==I.index)return!1;return!0}function x(C){if(l(C))return C.map(x);if(c(C)){const b=Object.create(null),A=Object.keys(C),M=A.length;let R=0;for(;R<M;++R)b[A[R]]=x(C[A[R]]);return b}return C}function T(C){return["__proto__","prototype","constructor"].indexOf(C)===-1}function w(C,b,A,M){if(!T(C))return;const R=b[C],I=A[C];c(R)&&c(I)?E(R,I,M):b[C]=x(I)}function E(C,b,A){const M=l(b)?b:[b],R=M.length;if(!c(C))return C;A=A||{};const I=A.merger||w;for(let N=0;N<R;++N){if(b=M[N],!c(b))continue;const z=Object.keys(b);for(let H=0,Y=z.length;H<Y;++H)I(z[H],C,b,A)}return C}function P(C,b){return E(C,b,{merger:D})}function D(C,b,A){if(!T(C))return;const M=b[C],R=A[C];c(M)&&c(R)?P(M,R):Object.prototype.hasOwnProperty.call(b,C)||(b[C]=x(R))}function L(C,b,A,M){b!==void 0&&console.warn(C+': "'+A+'" is deprecated. Please use "'+M+'" instead')}const $={"":C=>C,x:C=>C.x,y:C=>C.y};function O(C,b){return($[b]||($[b]=B(b)))(C)}function B(C){const b=V(C);return A=>{for(const M of b){if(M==="")break;A=A&&A[M]}return A}}function V(C){const b=C.split("."),A=[];let M="";for(const R of b)M+=R,M.endsWith("\\")?M=M.slice(0,-1)+".":(A.push(M),M="");return A}function F(C){return C.charAt(0).toUpperCase()+C.slice(1)}const U=C=>typeof C<"u",G=C=>typeof C=="function",W=(C,b)=>{if(C.size!==b.size)return!1;for(const A of C)if(!b.has(A))return!1;return!0};function j(C){return C.type==="mouseup"||C.type==="click"||C.type==="contextmenu"}const K=Math.PI,q=2*K,ie=q+K,ee=Number.POSITIVE_INFINITY,he=K/180,pe=K/2,ce=K/4,ye=K*2/3,we=Math.log10,ge=Math.sign;function Se(C){const b=Math.round(C);C=me(C,b,C/1e3)?b:C;const A=Math.pow(10,Math.floor(we(C))),M=C/A;return(M<=1?1:M<=2?2:M<=5?5:10)*A}function $e(C){const b=[],A=Math.sqrt(C);let M;for(M=1;M<A;M++)C%M===0&&(b.push(M),b.push(C/M));return A===(A|0)&&b.push(A),b.sort((R,I)=>R-I).pop(),b}function oe(C){return!isNaN(parseFloat(C))&&isFinite(C)}function me(C,b,A){return Math.abs(C-b)<A}function _e(C,b){const A=Math.round(C);return A-b<=C&&A+b>=C}function Te(C,b,A){let M,R,I;for(M=0,R=C.length;M<R;M++)I=C[M][A],isNaN(I)||(b.min=Math.min(b.min,I),b.max=Math.max(b.max,I))}function Le(C){return C*(K/180)}function Ge(C){return C*(180/K)}function se(C){if(!u(C))return;let b=1,A=0;for(;Math.round(C*b)/b!==C;)b*=10,A++;return A}function J(C,b){const A=b.x-C.x,M=b.y-C.y,R=Math.sqrt(A*A+M*M);let I=Math.atan2(M,A);return I<-.5*K&&(I+=q),{angle:I,distance:R}}function xe(C,b){return Math.sqrt(Math.pow(b.x-C.x,2)+Math.pow(b.y-C.y,2))}function De(C,b){return(C-b+ie)%q-K}function Ae(C){return(C%q+q)%q}function Ie(C,b,A,M){const R=Ae(C),I=Ae(b),N=Ae(A),z=Ae(I-R),H=Ae(N-R),Y=Ae(R-I),Z=Ae(R-N);return R===I||R===N||M&&I===N||z>H&&Y<Z}function ze(C,b,A){return Math.max(b,Math.min(A,C))}function Fe(C){return ze(C,-32768,32767)}function ae(C,b,A,M=1e-6){return C>=Math.min(b,A)-M&&C<=Math.max(b,A)+M}function Q(C,b,A){A=A||(N=>C[N]<b);let M=C.length-1,R=0,I;for(;M-R>1;)I=R+M>>1,A(I)?R=I:M=I;return{lo:R,hi:M}}const be=(C,b,A,M)=>Q(C,A,M?R=>C[R][b]<=A:R=>C[R][b]<A),Ee=(C,b,A)=>Q(C,A,M=>C[M][b]>=A);function ke(C,b,A){let M=0,R=C.length;for(;M<R&&C[M]<b;)M++;for(;R>M&&C[R-1]>A;)R--;return M>0||R<C.length?C.slice(M,R):C}const Ne=["push","pop","shift","splice","unshift"];function Je(C,b){if(C._chartjs){C._chartjs.listeners.push(b);return}Object.defineProperty(C,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[b]}}),Ne.forEach(A=>{const M="_onData"+F(A),R=C[A];Object.defineProperty(C,A,{configurable:!0,enumerable:!1,value(...I){const N=R.apply(this,I);return C._chartjs.listeners.forEach(z=>{typeof z[M]=="function"&&z[M](...I)}),N}})})}function qe(C,b){const A=C._chartjs;if(!A)return;const M=A.listeners,R=M.indexOf(b);R!==-1&&M.splice(R,1),!(M.length>0)&&(Ne.forEach(I=>{delete C[I]}),delete C._chartjs)}function Ze(C){const b=new Set;let A,M;for(A=0,M=C.length;A<M;++A)b.add(C[A]);return b.size===M?C:Array.from(b)}function Pt(C,b,A){return b+" "+C+"px "+A}const je=function(){return typeof window>"u"?function(C){return C()}:window.requestAnimationFrame}();function ct(C,b,A){const M=A||(N=>Array.prototype.slice.call(N));let R=!1,I=[];return function(...N){I=M(N),R||(R=!0,je.call(window,()=>{R=!1,C.apply(b,I)}))}}function gt(C,b){let A;return function(...M){return b?(clearTimeout(A),A=setTimeout(C,b,M)):C.apply(this,M),b}}const St=C=>C==="start"?"left":C==="end"?"right":"center",at=(C,b,A)=>C==="start"?b:C==="end"?A:(b+A)/2,Ct=(C,b,A,M)=>C===(M?"left":"right")?A:C==="center"?(b+A)/2:b;function bt(C,b,A){const M=b.length;let R=0,I=M;if(C._sorted){const{iScale:N,_parsed:z}=C,H=N.axis,{min:Y,max:Z,minDefined:ne,maxDefined:ue}=N.getUserBounds();ne&&(R=ze(Math.min(be(z,N.axis,Y).lo,A?M:be(b,H,N.getPixelForValue(Y)).lo),0,M-1)),ue?I=ze(Math.max(be(z,N.axis,Z,!0).hi+1,A?0:be(b,H,N.getPixelForValue(Z),!0).hi+1),R,M)-R:I=M-R}return{start:R,count:I}}function Bt(C){const{xScale:b,yScale:A,_scaleRanges:M}=C,R={xmin:b.min,xmax:b.max,ymin:A.min,ymax:A.max};if(!M)return C._scaleRanges=R,!0;const I=M.xmin!==b.min||M.xmax!==b.max||M.ymin!==A.min||M.ymax!==A.max;return Object.assign(M,R),I}class Ce{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(b,A,M,R){const I=A.listeners[R],N=A.duration;I.forEach(z=>z({chart:b,initial:A.initial,numSteps:N,currentStep:Math.min(M-A.start,N)}))}_refresh(){this._request||(this._running=!0,this._request=je.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(b=Date.now()){let A=0;this._charts.forEach((M,R)=>{if(!M.running||!M.items.length)return;const I=M.items;let N=I.length-1,z=!1,H;for(;N>=0;--N)H=I[N],H._active?(H._total>M.duration&&(M.duration=H._total),H.tick(b),z=!0):(I[N]=I[I.length-1],I.pop());z&&(R.draw(),this._notify(R,M,b,"progress")),I.length||(M.running=!1,this._notify(R,M,b,"complete"),M.initial=!1),A+=I.length}),this._lastDate=b,A===0&&(this._running=!1)}_getAnims(b){const A=this._charts;let M=A.get(b);return M||(M={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},A.set(b,M)),M}listen(b,A,M){this._getAnims(b).listeners[A].push(M)}add(b,A){!A||!A.length||this._getAnims(b).items.push(...A)}has(b){return this._getAnims(b).items.length>0}start(b){const A=this._charts.get(b);A&&(A.running=!0,A.start=Date.now(),A.duration=A.items.reduce((M,R)=>Math.max(M,R._duration),0),this._refresh())}running(b){if(!this._running)return!1;const A=this._charts.get(b);return!(!A||!A.running||!A.items.length)}stop(b){const A=this._charts.get(b);if(!A||!A.items.length)return;const M=A.items;let R=M.length-1;for(;R>=0;--R)M[R].cancel();A.items=[],this._notify(b,A,Date.now(),"complete")}remove(b){return this._charts.delete(b)}}var ot=new Ce;/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function He(C){return C+.5|0}const Xe=(C,b,A)=>Math.max(Math.min(C,A),b);function ut(C){return Xe(He(C*2.55),0,255)}function st(C){return Xe(He(C*255),0,255)}function At(C){return Xe(He(C/2.55)/100,0,1)}function Gt(C){return Xe(He(C*100),0,100)}const Ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},it=[..."0123456789ABCDEF"],Jt=C=>it[C&15],hn=C=>it[(C&240)>>4]+it[C&15],Pn=C=>(C&240)>>4===(C&15),hr=C=>Pn(C.r)&&Pn(C.g)&&Pn(C.b)&&Pn(C.a);function vn(C){var b=C.length,A;return C[0]==="#"&&(b===4||b===5?A={r:255&Ut[C[1]]*17,g:255&Ut[C[2]]*17,b:255&Ut[C[3]]*17,a:b===5?Ut[C[4]]*17:255}:(b===7||b===9)&&(A={r:Ut[C[1]]<<4|Ut[C[2]],g:Ut[C[3]]<<4|Ut[C[4]],b:Ut[C[5]]<<4|Ut[C[6]],a:b===9?Ut[C[7]]<<4|Ut[C[8]]:255})),A}const Bn=(C,b)=>C<255?b(C):"";function Zn(C){var b=hr(C)?Jt:hn;return C?"#"+b(C.r)+b(C.g)+b(C.b)+Bn(C.a,b):void 0}const dr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rn(C,b,A){const M=b*Math.min(A,1-A),R=(I,N=(I+C/30)%12)=>A-M*Math.max(Math.min(N-3,9-N,1),-1);return[R(0),R(8),R(4)]}function fr(C,b,A){const M=(R,I=(R+C/60)%6)=>A-A*b*Math.max(Math.min(I,4-I,1),0);return[M(5),M(3),M(1)]}function Vn(C,b,A){const M=Rn(C,1,.5);let R;for(b+A>1&&(R=1/(b+A),b*=R,A*=R),R=0;R<3;R++)M[R]*=1-b-A,M[R]+=b;return M}function pr(C,b,A,M,R){return C===R?(b-A)/M+(b<A?6:0):b===R?(A-C)/M+2:(C-b)/M+4}function Fn(C){const A=C.r/255,M=C.g/255,R=C.b/255,I=Math.max(A,M,R),N=Math.min(A,M,R),z=(I+N)/2;let H,Y,Z;return I!==N&&(Z=I-N,Y=z>.5?Z/(2-I-N):Z/(I+N),H=pr(A,M,R,Z,I),H=H*60+.5),[H|0,Y||0,z]}function Jn(C,b,A,M){return(Array.isArray(b)?C(b[0],b[1],b[2]):C(b,A,M)).map(st)}function Dn(C,b,A){return Jn(Rn,C,b,A)}function Qn(C,b,A){return Jn(Vn,C,b,A)}function Cr(C,b,A){return Jn(fr,C,b,A)}function vr(C){return(C%360+360)%360}function gr(C){const b=dr.exec(C);let A=255,M;if(!b)return;b[5]!==M&&(A=b[6]?ut(+b[5]):st(+b[5]));const R=vr(+b[2]),I=+b[3]/100,N=+b[4]/100;return b[1]==="hwb"?M=Qn(R,I,N):b[1]==="hsv"?M=Cr(R,I,N):M=Dn(R,I,N),{r:M[0],g:M[1],b:M[2],a:A}}function le(C,b){var A=Fn(C);A[0]=vr(A[0]+b),A=Dn(A),C.r=A[0],C.g=A[1],C.b=A[2]}function Pe(C){if(!C)return;const b=Fn(C),A=b[0],M=Gt(b[1]),R=Gt(b[2]);return C.a<255?`hsla(${A}, ${M}%, ${R}%, ${At(C.a)})`:`hsl(${A}, ${M}%, ${R}%)`}const Ve={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ue={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Re(){const C={},b=Object.keys(Ue),A=Object.keys(Ve);let M,R,I,N,z;for(M=0;M<b.length;M++){for(N=z=b[M],R=0;R<A.length;R++)I=A[R],z=z.replace(I,Ve[I]);I=parseInt(Ue[N],16),C[z]=[I>>16&255,I>>8&255,I&255]}return C}let Qe;function dt(C){Qe||(Qe=Re(),Qe.transparent=[0,0,0,0]);const b=Qe[C.toLowerCase()];return b&&{r:b[0],g:b[1],b:b[2],a:b.length===4?b[3]:255}}const vt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mt(C){const b=vt.exec(C);let A=255,M,R,I;if(b){if(b[7]!==M){const N=+b[7];A=b[8]?ut(N):Xe(N*255,0,255)}return M=+b[1],R=+b[3],I=+b[5],M=255&(b[2]?ut(M):Xe(M,0,255)),R=255&(b[4]?ut(R):Xe(R,0,255)),I=255&(b[6]?ut(I):Xe(I,0,255)),{r:M,g:R,b:I,a:A}}}function Dt(C){return C&&(C.a<255?`rgba(${C.r}, ${C.g}, ${C.b}, ${At(C.a)})`:`rgb(${C.r}, ${C.g}, ${C.b})`)}const Rt=C=>C<=.0031308?C*12.92:Math.pow(C,1/2.4)*1.055-.055,_t=C=>C<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4);function Lt(C,b,A){const M=_t(At(C.r)),R=_t(At(C.g)),I=_t(At(C.b));return{r:st(Rt(M+A*(_t(At(b.r))-M))),g:st(Rt(R+A*(_t(At(b.g))-R))),b:st(Rt(I+A*(_t(At(b.b))-I))),a:C.a+A*(b.a-C.a)}}function $t(C,b,A){if(C){let M=Fn(C);M[b]=Math.max(0,Math.min(M[b]+M[b]*A,b===0?360:1)),M=Dn(M),C.r=M[0],C.g=M[1],C.b=M[2]}}function Yt(C,b){return C&&Object.assign(b||{},C)}function Wt(C){var b={r:0,g:0,b:0,a:255};return Array.isArray(C)?C.length>=3&&(b={r:C[0],g:C[1],b:C[2],a:255},C.length>3&&(b.a=st(C[3]))):(b=Yt(C,{r:0,g:0,b:0,a:1}),b.a=st(b.a)),b}function Ot(C){return C.charAt(0)==="r"?mt(C):gr(C)}class xt{constructor(b){if(b instanceof xt)return b;const A=typeof b;let M;A==="object"?M=Wt(b):A==="string"&&(M=vn(b)||dt(b)||Ot(b)),this._rgb=M,this._valid=!!M}get valid(){return this._valid}get rgb(){var b=Yt(this._rgb);return b&&(b.a=At(b.a)),b}set rgb(b){this._rgb=Wt(b)}rgbString(){return this._valid?Dt(this._rgb):void 0}hexString(){return this._valid?Zn(this._rgb):void 0}hslString(){return this._valid?Pe(this._rgb):void 0}mix(b,A){if(b){const M=this.rgb,R=b.rgb;let I;const N=A===I?.5:A,z=2*N-1,H=M.a-R.a,Y=((z*H===-1?z:(z+H)/(1+z*H))+1)/2;I=1-Y,M.r=255&Y*M.r+I*R.r+.5,M.g=255&Y*M.g+I*R.g+.5,M.b=255&Y*M.b+I*R.b+.5,M.a=N*M.a+(1-N)*R.a,this.rgb=M}return this}interpolate(b,A){return b&&(this._rgb=Lt(this._rgb,b._rgb,A)),this}clone(){return new xt(this.rgb)}alpha(b){return this._rgb.a=st(b),this}clearer(b){const A=this._rgb;return A.a*=1-b,this}greyscale(){const b=this._rgb,A=He(b.r*.3+b.g*.59+b.b*.11);return b.r=b.g=b.b=A,this}opaquer(b){const A=this._rgb;return A.a*=1+b,this}negate(){const b=this._rgb;return b.r=255-b.r,b.g=255-b.g,b.b=255-b.b,this}lighten(b){return $t(this._rgb,2,b),this}darken(b){return $t(this._rgb,2,-b),this}saturate(b){return $t(this._rgb,1,b),this}desaturate(b){return $t(this._rgb,1,-b),this}rotate(b){return le(this._rgb,b),this}}function jt(C){return new xt(C)}function kt(C){if(C&&typeof C=="object"){const b=C.toString();return b==="[object CanvasPattern]"||b==="[object CanvasGradient]"}return!1}function an(C){return kt(C)?C:jt(C)}function dn(C){return kt(C)?C:jt(C).saturate(.5).darken(.1).hexString()}const Xt=Object.create(null),gn=Object.create(null);function Ft(C,b){if(!b)return C;const A=b.split(".");for(let M=0,R=A.length;M<R;++M){const I=A[M];C=C[I]||(C[I]=Object.create(null))}return C}function rn(C,b,A){return typeof b=="string"?E(Ft(C,b),A):E(Ft(C,""),b)}class sn{constructor(b){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=A=>A.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(A,M)=>dn(M.backgroundColor),this.hoverBorderColor=(A,M)=>dn(M.borderColor),this.hoverColor=(A,M)=>dn(M.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(b)}set(b,A){return rn(this,b,A)}get(b){return Ft(this,b)}describe(b,A){return rn(gn,b,A)}override(b,A){return rn(Xt,b,A)}route(b,A,M,R){const I=Ft(this,b),N=Ft(this,M),z="_"+A;Object.defineProperties(I,{[z]:{value:I[A],writable:!0},[A]:{enumerable:!0,get(){const H=this[z],Y=N[R];return c(H)?Object.assign({},Y,H):f(H,Y)},set(H){this[z]=H}}})}}var Mt=new sn({_scriptable:C=>!C.startsWith("on"),_indexable:C=>C!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Qt(){return typeof window<"u"&&typeof document<"u"}function Sn(C){let b=C.parentNode;return b&&b.toString()==="[object ShadowRoot]"&&(b=b.host),b}function ln(C,b,A){let M;return typeof C=="string"?(M=parseInt(C,10),C.indexOf("%")!==-1&&(M=M/100*b.parentNode[A])):M=C,M}const mr=C=>window.getComputedStyle(C,null);function ei(C,b){return mr(C).getPropertyValue(b)}const ji=["top","right","bottom","left"];function In(C,b,A){const M={};A=A?"-"+A:"";for(let R=0;R<4;R++){const I=ji[R];M[I]=parseFloat(C[b+"-"+I+A])||0}return M.width=M.left+M.right,M.height=M.top+M.bottom,M}const qi=(C,b,A)=>(C>0||b>0)&&(!A||!A.shadowRoot);function Ki(C,b){const A=C.touches,M=A&&A.length?A[0]:C,{offsetX:R,offsetY:I}=M;let N=!1,z,H;if(qi(R,I,C.target))z=R,H=I;else{const Y=b.getBoundingClientRect();z=M.clientX-Y.left,H=M.clientY-Y.top,N=!0}return{x:z,y:H,box:N}}function bn(C,b){if("native"in C)return C;const{canvas:A,currentDevicePixelRatio:M}=b,R=mr(A),I=R.boxSizing==="border-box",N=In(R,"padding"),z=In(R,"border","width"),{x:H,y:Y,box:Z}=Ki(C,A),ne=N.left+(Z&&z.left),ue=N.top+(Z&&z.top);let{width:fe,height:ve}=b;return I&&(fe-=N.width+z.width,ve-=N.height+z.height),{x:Math.round((H-ne)/fe*A.width/M),y:Math.round((Y-ue)/ve*A.height/M)}}function Zi(C,b,A){let M,R;if(b===void 0||A===void 0){const I=Sn(C);if(!I)b=C.clientWidth,A=C.clientHeight;else{const N=I.getBoundingClientRect(),z=mr(I),H=In(z,"border","width"),Y=In(z,"padding");b=N.width-Y.width-H.width,A=N.height-Y.height-H.height,M=ln(z.maxWidth,I,"clientWidth"),R=ln(z.maxHeight,I,"clientHeight")}}return{width:b,height:A,maxWidth:M||ee,maxHeight:R||ee}}const Mr=C=>Math.round(C*10)/10;function ti(C,b,A,M){const R=mr(C),I=In(R,"margin"),N=ln(R.maxWidth,C,"clientWidth")||ee,z=ln(R.maxHeight,C,"clientHeight")||ee,H=Zi(C,b,A);let{width:Y,height:Z}=H;if(R.boxSizing==="content-box"){const ne=In(R,"border","width"),ue=In(R,"padding");Y-=ue.width+ne.width,Z-=ue.height+ne.height}return Y=Math.max(0,Y-I.width),Z=Math.max(0,M?Math.floor(Y/M):Z-I.height),Y=Mr(Math.min(Y,N,H.maxWidth)),Z=Mr(Math.min(Z,z,H.maxHeight)),Y&&!Z&&(Z=Mr(Y/2)),{width:Y,height:Z}}function Er(C,b,A){const M=b||1,R=Math.floor(C.height*M),I=Math.floor(C.width*M);C.height=R/M,C.width=I/M;const N=C.canvas;return N.style&&(A||!N.style.height&&!N.style.width)&&(N.style.height=`${C.height}px`,N.style.width=`${C.width}px`),C.currentDevicePixelRatio!==M||N.height!==R||N.width!==I?(C.currentDevicePixelRatio=M,N.height=R,N.width=I,C.ctx.setTransform(M,0,0,M,0,0),!0):!1}const ni=function(){let C=!1;try{const b={get passive(){return C=!0,!1}};window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch{}return C}();function Pr(C,b){const A=ei(C,b),M=A&&A.match(/^(\d+)(\.\d+)?px$/);return M?+M[1]:void 0}function ri(C){return!C||s(C.size)||s(C.family)?null:(C.style?C.style+" ":"")+(C.weight?C.weight+" ":"")+C.size+"px "+C.family}function er(C,b,A,M,R){let I=b[R];return I||(I=b[R]=C.measureText(R).width,A.push(R)),I>M&&(M=I),M}function yr(C,b,A,M){M=M||{};let R=M.data=M.data||{},I=M.garbageCollect=M.garbageCollect||[];M.font!==b&&(R=M.data={},I=M.garbageCollect=[],M.font=b),C.save(),C.font=b;let N=0;const z=A.length;let H,Y,Z,ne,ue;for(H=0;H<z;H++)if(ne=A[H],ne!=null&&l(ne)!==!0)N=er(C,R,I,N,ne);else if(l(ne))for(Y=0,Z=ne.length;Y<Z;Y++)ue=ne[Y],ue!=null&&!l(ue)&&(N=er(C,R,I,N,ue));C.restore();const fe=I.length/2;if(fe>A.length){for(H=0;H<fe;H++)delete R[I[H]];I.splice(0,fe)}return N}function xn(C,b,A){const M=C.currentDevicePixelRatio,R=A!==0?Math.max(A/2,.5):0;return Math.round((b-R)*M)/M+R}function Rr(C,b){b=b||C.getContext("2d"),b.save(),b.resetTransform(),b.clearRect(0,0,C.width,C.height),b.restore()}function _r(C,b,A,M){Dr(C,b,A,M,null)}function Dr(C,b,A,M,R){let I,N,z,H,Y,Z;const ne=b.pointStyle,ue=b.rotation,fe=b.radius;let ve=(ue||0)*he;if(ne&&typeof ne=="object"&&(I=ne.toString(),I==="[object HTMLImageElement]"||I==="[object HTMLCanvasElement]")){C.save(),C.translate(A,M),C.rotate(ve),C.drawImage(ne,-ne.width/2,-ne.height/2,ne.width,ne.height),C.restore();return}if(!(isNaN(fe)||fe<=0)){switch(C.beginPath(),ne){default:R?C.ellipse(A,M,R/2,fe,0,0,q):C.arc(A,M,fe,0,q),C.closePath();break;case"triangle":C.moveTo(A+Math.sin(ve)*fe,M-Math.cos(ve)*fe),ve+=ye,C.lineTo(A+Math.sin(ve)*fe,M-Math.cos(ve)*fe),ve+=ye,C.lineTo(A+Math.sin(ve)*fe,M-Math.cos(ve)*fe),C.closePath();break;case"rectRounded":Y=fe*.516,H=fe-Y,N=Math.cos(ve+ce)*H,z=Math.sin(ve+ce)*H,C.arc(A-N,M-z,Y,ve-K,ve-pe),C.arc(A+z,M-N,Y,ve-pe,ve),C.arc(A+N,M+z,Y,ve,ve+pe),C.arc(A-z,M+N,Y,ve+pe,ve+K),C.closePath();break;case"rect":if(!ue){H=Math.SQRT1_2*fe,Z=R?R/2:H,C.rect(A-Z,M-H,2*Z,2*H);break}ve+=ce;case"rectRot":N=Math.cos(ve)*fe,z=Math.sin(ve)*fe,C.moveTo(A-N,M-z),C.lineTo(A+z,M-N),C.lineTo(A+N,M+z),C.lineTo(A-z,M+N),C.closePath();break;case"crossRot":ve+=ce;case"cross":N=Math.cos(ve)*fe,z=Math.sin(ve)*fe,C.moveTo(A-N,M-z),C.lineTo(A+N,M+z),C.moveTo(A+z,M-N),C.lineTo(A-z,M+N);break;case"star":N=Math.cos(ve)*fe,z=Math.sin(ve)*fe,C.moveTo(A-N,M-z),C.lineTo(A+N,M+z),C.moveTo(A+z,M-N),C.lineTo(A-z,M+N),ve+=ce,N=Math.cos(ve)*fe,z=Math.sin(ve)*fe,C.moveTo(A-N,M-z),C.lineTo(A+N,M+z),C.moveTo(A+z,M-N),C.lineTo(A-z,M+N);break;case"line":N=R?R/2:Math.cos(ve)*fe,z=Math.sin(ve)*fe,C.moveTo(A-N,M-z),C.lineTo(A+N,M+z);break;case"dash":C.moveTo(A,M),C.lineTo(A+Math.cos(ve)*fe,M+Math.sin(ve)*fe);break}C.fill(),b.borderWidth>0&&C.stroke()}}function Un(C,b,A){return A=A||.5,!b||C&&C.x>b.left-A&&C.x<b.right+A&&C.y>b.top-A&&C.y<b.bottom+A}function tr(C,b){C.save(),C.beginPath(),C.rect(b.left,b.top,b.right-b.left,b.bottom-b.top),C.clip()}function Tn(C){C.restore()}function Ir(C,b,A,M,R){if(!b)return C.lineTo(A.x,A.y);if(R==="middle"){const I=(b.x+A.x)/2;C.lineTo(I,b.y),C.lineTo(I,A.y)}else R==="after"!=!!M?C.lineTo(b.x,A.y):C.lineTo(A.x,b.y);C.lineTo(A.x,A.y)}function ii(C,b,A,M){if(!b)return C.lineTo(A.x,A.y);C.bezierCurveTo(M?b.cp1x:b.cp2x,M?b.cp1y:b.cp2y,M?A.cp2x:A.cp1x,M?A.cp2y:A.cp1y,A.x,A.y)}function An(C,b,A,M,R,I={}){const N=l(b)?b:[b],z=I.strokeWidth>0&&I.strokeColor!=="";let H,Y;for(C.save(),C.font=R.string,ai(C,I),H=0;H<N.length;++H)Y=N[H],z&&(I.strokeColor&&(C.strokeStyle=I.strokeColor),s(I.strokeWidth)||(C.lineWidth=I.strokeWidth),C.strokeText(Y,A,M,I.maxWidth)),C.fillText(Y,A,M,I.maxWidth),Ji(C,A,M,Y,I),M+=R.lineHeight;C.restore()}function ai(C,b){b.translation&&C.translate(b.translation[0],b.translation[1]),s(b.rotation)||C.rotate(b.rotation),b.color&&(C.fillStyle=b.color),b.textAlign&&(C.textAlign=b.textAlign),b.textBaseline&&(C.textBaseline=b.textBaseline)}function Ji(C,b,A,M,R){if(R.strikethrough||R.underline){const I=C.measureText(M),N=b-I.actualBoundingBoxLeft,z=b+I.actualBoundingBoxRight,H=A-I.actualBoundingBoxAscent,Y=A+I.actualBoundingBoxDescent,Z=R.strikethrough?(H+Y)/2:Y;C.strokeStyle=C.fillStyle,C.beginPath(),C.lineWidth=R.decorationWidth||2,C.moveTo(N,Z),C.lineTo(z,Z),C.stroke()}}function zn(C,b){const{x:A,y:M,w:R,h:I,radius:N}=b;C.arc(A+N.topLeft,M+N.topLeft,N.topLeft,-pe,K,!0),C.lineTo(A,M+I-N.bottomLeft),C.arc(A+N.bottomLeft,M+I-N.bottomLeft,N.bottomLeft,K,pe,!0),C.lineTo(A+R-N.bottomRight,M+I),C.arc(A+R-N.bottomRight,M+I-N.bottomRight,N.bottomRight,pe,0,!0),C.lineTo(A+R,M+N.topRight),C.arc(A+R-N.topRight,M+N.topRight,N.topRight,0,-pe,!0),C.lineTo(A+N.topLeft,M)}function nr(C,b=[""],A=C,M,R=()=>C[0]){U(M)||(M=hi("_fallback",C));const I={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:C,_rootScopes:A,_fallback:M,_getTarget:R,override:N=>nr([N,...C],b,A,M)};return new Proxy(I,{deleteProperty(N,z){return delete N[z],delete N._keys,delete C[0][z],!0},get(N,z){return si(N,z,()=>ui(z,b,C,N))},getOwnPropertyDescriptor(N,z){return Reflect.getOwnPropertyDescriptor(N._scopes[0],z)},getPrototypeOf(){return Reflect.getPrototypeOf(C[0])},has(N,z){return di(N).includes(z)},ownKeys(N){return di(N)},set(N,z,H){const Y=N._storage||(N._storage=R());return N[z]=Y[z]=H,delete N._keys,!0}})}function Ln(C,b,A,M){const R={_cacheable:!1,_proxy:C,_context:b,_subProxy:A,_stack:new Set,_descriptors:Lr(C,M),setContext:I=>Ln(C,I,A,M),override:I=>Ln(C.override(I),b,A,M)};return new Proxy(R,{deleteProperty(I,N){return delete I[N],delete C[N],!0},get(I,N,z){return si(I,N,()=>li(I,N,z))},getOwnPropertyDescriptor(I,N){return I._descriptors.allKeys?Reflect.has(C,N)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(C,N)},getPrototypeOf(){return Reflect.getPrototypeOf(C)},has(I,N){return Reflect.has(C,N)},ownKeys(){return Reflect.ownKeys(C)},set(I,N,z){return C[N]=z,delete I[N],!0}})}function Lr(C,b={scriptable:!0,indexable:!0}){const{_scriptable:A=b.scriptable,_indexable:M=b.indexable,_allKeys:R=b.allKeys}=C;return{allKeys:R,scriptable:A,indexable:M,isScriptable:G(A)?A:()=>A,isIndexable:G(M)?M:()=>M}}const oi=(C,b)=>C?C+F(b):b,$r=(C,b)=>c(b)&&C!=="adapters"&&(Object.getPrototypeOf(b)===null||b.constructor===Object);function si(C,b,A){if(Object.prototype.hasOwnProperty.call(C,b))return C[b];const M=A();return C[b]=M,M}function li(C,b,A){const{_proxy:M,_context:R,_subProxy:I,_descriptors:N}=C;let z=M[b];return G(z)&&N.isScriptable(b)&&(z=Qi(b,z,C,A)),l(z)&&z.length&&(z=ea(b,z,C,N.isIndexable)),$r(b,z)&&(z=Ln(z,R,I&&I[b],N)),z}function Qi(C,b,A,M){const{_proxy:R,_context:I,_subProxy:N,_stack:z}=A;if(z.has(C))throw new Error("Recursion detected: "+Array.from(z).join("->")+"->"+C);return z.add(C),b=b(I,N||M),z.delete(C),$r(C,b)&&(b=Sr(R._scopes,R,C,b)),b}function ea(C,b,A,M){const{_proxy:R,_context:I,_subProxy:N,_descriptors:z}=A;if(U(I.index)&&M(C))b=b[I.index%b.length];else if(c(b[0])){const H=b,Y=R._scopes.filter(Z=>Z!==H);b=[];for(const Z of H){const ne=Sr(Y,R,C,Z);b.push(Ln(ne,I,N&&N[C],z))}}return b}function Nr(C,b,A){return G(C)?C(b,A):C}const ta=(C,b)=>C===!0?b:typeof C=="string"?O(b,C):void 0;function na(C,b,A,M,R){for(const I of b){const N=ta(A,I);if(N){C.add(N);const z=Nr(N._fallback,A,R);if(U(z)&&z!==A&&z!==M)return z}else if(N===!1&&U(M)&&A!==M)return null}return!1}function Sr(C,b,A,M){const R=b._rootScopes,I=Nr(b._fallback,A,M),N=[...C,...R],z=new Set;z.add(M);let H=ci(z,N,A,I||A,M);return H===null||U(I)&&I!==A&&(H=ci(z,N,I,H,M),H===null)?!1:nr(Array.from(z),[""],R,I,()=>ra(b,A,M))}function ci(C,b,A,M,R){for(;A;)A=na(C,b,A,M,R);return A}function ra(C,b,A){const M=C._getTarget();b in M||(M[b]={});const R=M[b];return l(R)&&c(A)?A:R}function ui(C,b,A,M){let R;for(const I of b)if(R=hi(oi(I,C),A),U(R))return $r(C,R)?Sr(A,M,C,R):R}function hi(C,b){for(const A of b){if(!A)continue;const M=A[C];if(U(M))return M}}function di(C){let b=C._keys;return b||(b=C._keys=fi(C._scopes)),b}function fi(C){const b=new Set;for(const A of C)for(const M of Object.keys(A).filter(R=>!R.startsWith("_")))b.add(M);return Array.from(b)}function Or(C,b,A,M){const{iScale:R}=C,{key:I="r"}=this._parsing,N=new Array(M);let z,H,Y,Z;for(z=0,H=M;z<H;++z)Y=z+A,Z=b[Y],N[z]={r:R.parse(O(Z,I),Y)};return N}const ia=Number.EPSILON||1e-14,$n=(C,b)=>b<C.length&&!C[b].skip&&C[b],pi=C=>C==="x"?"y":"x";function vi(C,b,A,M){const R=C.skip?b:C,I=b,N=A.skip?b:A,z=xe(I,R),H=xe(N,I);let Y=z/(z+H),Z=H/(z+H);Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z;const ne=M*Y,ue=M*Z;return{previous:{x:I.x-ne*(N.x-R.x),y:I.y-ne*(N.y-R.y)},next:{x:I.x+ue*(N.x-R.x),y:I.y+ue*(N.y-R.y)}}}function gi(C,b,A){const M=C.length;let R,I,N,z,H,Y=$n(C,0);for(let Z=0;Z<M-1;++Z)if(H=Y,Y=$n(C,Z+1),!(!H||!Y)){if(me(b[Z],0,ia)){A[Z]=A[Z+1]=0;continue}R=A[Z]/b[Z],I=A[Z+1]/b[Z],z=Math.pow(R,2)+Math.pow(I,2),!(z<=9)&&(N=3/Math.sqrt(z),A[Z]=R*N*b[Z],A[Z+1]=I*N*b[Z])}}function aa(C,b,A="x"){const M=pi(A),R=C.length;let I,N,z,H=$n(C,0);for(let Y=0;Y<R;++Y){if(N=z,z=H,H=$n(C,Y+1),!z)continue;const Z=z[A],ne=z[M];N&&(I=(Z-N[A])/3,z[`cp1${A}`]=Z-I,z[`cp1${M}`]=ne-I*b[Y]),H&&(I=(H[A]-Z)/3,z[`cp2${A}`]=Z+I,z[`cp2${M}`]=ne+I*b[Y])}}function mi(C,b="x"){const A=pi(b),M=C.length,R=Array(M).fill(0),I=Array(M);let N,z,H,Y=$n(C,0);for(N=0;N<M;++N)if(z=H,H=Y,Y=$n(C,N+1),!!H){if(Y){const Z=Y[b]-H[b];R[N]=Z!==0?(Y[A]-H[A])/Z:0}I[N]=z?Y?ge(R[N-1])!==ge(R[N])?0:(R[N-1]+R[N])/2:R[N-1]:R[N]}gi(C,R,I),aa(C,I,b)}function rr(C,b,A){return Math.max(Math.min(C,A),b)}function oa(C,b){let A,M,R,I,N,z=Un(C[0],b);for(A=0,M=C.length;A<M;++A)N=I,I=z,z=A<M-1&&Un(C[A+1],b),I&&(R=C[A],N&&(R.cp1x=rr(R.cp1x,b.left,b.right),R.cp1y=rr(R.cp1y,b.top,b.bottom)),z&&(R.cp2x=rr(R.cp2x,b.left,b.right),R.cp2y=rr(R.cp2y,b.top,b.bottom)))}function yi(C,b,A,M,R){let I,N,z,H;if(b.spanGaps&&(C=C.filter(Y=>!Y.skip)),b.cubicInterpolationMode==="monotone")mi(C,R);else{let Y=M?C[C.length-1]:C[0];for(I=0,N=C.length;I<N;++I)z=C[I],H=vi(Y,z,C[Math.min(I+1,N-(M?0:1))%N],b.tension),z.cp1x=H.previous.x,z.cp1y=H.previous.y,z.cp2x=H.next.x,z.cp2y=H.next.y,Y=z}b.capBezierPoints&&oa(C,A)}const ir=C=>C===0||C===1,_i=(C,b,A)=>-(Math.pow(2,10*(C-=1))*Math.sin((C-b)*q/A)),Si=(C,b,A)=>Math.pow(2,-10*C)*Math.sin((C-b)*q/A)+1,Nn={linear:C=>C,easeInQuad:C=>C*C,easeOutQuad:C=>-C*(C-2),easeInOutQuad:C=>(C/=.5)<1?.5*C*C:-.5*(--C*(C-2)-1),easeInCubic:C=>C*C*C,easeOutCubic:C=>(C-=1)*C*C+1,easeInOutCubic:C=>(C/=.5)<1?.5*C*C*C:.5*((C-=2)*C*C+2),easeInQuart:C=>C*C*C*C,easeOutQuart:C=>-((C-=1)*C*C*C-1),easeInOutQuart:C=>(C/=.5)<1?.5*C*C*C*C:-.5*((C-=2)*C*C*C-2),easeInQuint:C=>C*C*C*C*C,easeOutQuint:C=>(C-=1)*C*C*C*C+1,easeInOutQuint:C=>(C/=.5)<1?.5*C*C*C*C*C:.5*((C-=2)*C*C*C*C+2),easeInSine:C=>-Math.cos(C*pe)+1,easeOutSine:C=>Math.sin(C*pe),easeInOutSine:C=>-.5*(Math.cos(K*C)-1),easeInExpo:C=>C===0?0:Math.pow(2,10*(C-1)),easeOutExpo:C=>C===1?1:-Math.pow(2,-10*C)+1,easeInOutExpo:C=>ir(C)?C:C<.5?.5*Math.pow(2,10*(C*2-1)):.5*(-Math.pow(2,-10*(C*2-1))+2),easeInCirc:C=>C>=1?C:-(Math.sqrt(1-C*C)-1),easeOutCirc:C=>Math.sqrt(1-(C-=1)*C),easeInOutCirc:C=>(C/=.5)<1?-.5*(Math.sqrt(1-C*C)-1):.5*(Math.sqrt(1-(C-=2)*C)+1),easeInElastic:C=>ir(C)?C:_i(C,.075,.3),easeOutElastic:C=>ir(C)?C:Si(C,.075,.3),easeInOutElastic(C){return ir(C)?C:C<.5?.5*_i(C*2,.1125,.45):.5+.5*Si(C*2-1,.1125,.45)},easeInBack(C){return C*C*((1.70158+1)*C-1.70158)},easeOutBack(C){return(C-=1)*C*((1.70158+1)*C+1.70158)+1},easeInOutBack(C){let b=1.70158;return(C/=.5)<1?.5*(C*C*(((b*=1.525)+1)*C-b)):.5*((C-=2)*C*(((b*=1.525)+1)*C+b)+2)},easeInBounce:C=>1-Nn.easeOutBounce(1-C),easeOutBounce(C){return C<1/2.75?7.5625*C*C:C<2/2.75?7.5625*(C-=1.5/2.75)*C+.75:C<2.5/2.75?7.5625*(C-=2.25/2.75)*C+.9375:7.5625*(C-=2.625/2.75)*C+.984375},easeInOutBounce:C=>C<.5?Nn.easeInBounce(C*2)*.5:Nn.easeOutBounce(C*2-1)*.5+.5};function wn(C,b,A,M){return{x:C.x+A*(b.x-C.x),y:C.y+A*(b.y-C.y)}}function kr(C,b,A,M){return{x:C.x+A*(b.x-C.x),y:M==="middle"?A<.5?C.y:b.y:M==="after"?A<1?C.y:b.y:A>0?b.y:C.y}}function bi(C,b,A,M){const R={x:C.cp2x,y:C.cp2y},I={x:b.cp1x,y:b.cp1y},N=wn(C,R,A),z=wn(R,I,A),H=wn(I,b,A),Y=wn(N,z,A),Z=wn(z,H,A);return wn(Y,Z,A)}const Br=new Map;function xi(C,b){b=b||{};const A=C+JSON.stringify(b);let M=Br.get(A);return M||(M=new Intl.NumberFormat(C,b),Br.set(A,M)),M}function Hn(C,b,A){return xi(b,A).format(C)}const sa=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),la=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ar(C,b){const A=(""+C).match(sa);if(!A||A[1]==="normal")return b*1.2;switch(C=+A[2],A[3]){case"px":return C;case"%":C/=100;break}return b*C}const Ti=C=>+C||0;function or(C,b){const A={},M=c(b),R=M?Object.keys(b):b,I=c(C)?M?N=>f(C[N],C[b[N]]):N=>C[N]:()=>C;for(const N of R)A[N]=Ti(I(N));return A}function br(C){return or(C,{top:"y",right:"x",bottom:"y",left:"x"})}function Cn(C){return or(C,["topLeft","topRight","bottomLeft","bottomRight"])}function en(C){const b=br(C);return b.width=b.left+b.right,b.height=b.top+b.bottom,b}function qt(C,b){C=C||{},b=b||Mt.font;let A=f(C.size,b.size);typeof A=="string"&&(A=parseInt(A,10));let M=f(C.style,b.style);M&&!(""+M).match(la)&&(console.warn('Invalid font style specified: "'+M+'"'),M="");const R={family:f(C.family,b.family),lineHeight:ar(f(C.lineHeight,b.lineHeight),A),size:A,style:M,weight:f(C.weight,b.weight),string:""};return R.string=ri(R),R}function mn(C,b,A,M){let R=!0,I,N,z;for(I=0,N=C.length;I<N;++I)if(z=C[I],z!==void 0&&(b!==void 0&&typeof z=="function"&&(z=z(b),R=!1),A!==void 0&&l(z)&&(z=z[A%z.length],R=!1),z!==void 0))return M&&!R&&(M.cacheable=!1),z}function sr(C,b,A){const{min:M,max:R}=C,I=g(b,(R-M)/2),N=(z,H)=>A&&z===0?0:z+H;return{min:N(M,-Math.abs(I)),max:N(R,I)}}function yn(C,b){return Object.assign(Object.create(C),b)}const Ai=function(C,b){return{x(A){return C+C+b-A},setWidth(A){b=A},textAlign(A){return A==="center"?A:A==="right"?"left":"right"},xPlus(A,M){return A-M},leftForLtr(A,M){return A-M}}},ca=function(){return{x(C){return C},setWidth(C){},textAlign(C){return C},xPlus(C,b){return C+b},leftForLtr(C,b){return C}}};function On(C,b,A){return C?Ai(b,A):ca()}function Vr(C,b){let A,M;(b==="ltr"||b==="rtl")&&(A=C.canvas.style,M=[A.getPropertyValue("direction"),A.getPropertyPriority("direction")],A.setProperty("direction",b,"important"),C.prevTextDirection=M)}function de(C,b){b!==void 0&&(delete C.prevTextDirection,C.canvas.style.setProperty("direction",b[0],b[1]))}function wt(C){return C==="angle"?{between:Ie,compare:De,normalize:Ae}:{between:ae,compare:(b,A)=>b-A,normalize:b=>b}}function Gn({start:C,end:b,count:A,loop:M,style:R}){return{start:C%A,end:b%A,loop:M&&(b-C+1)%A===0,style:R}}function Fr(C,b,A){const{property:M,start:R,end:I}=A,{between:N,normalize:z}=wt(M),H=b.length;let{start:Y,end:Z,loop:ne}=C,ue,fe;if(ne){for(Y+=H,Z+=H,ue=0,fe=H;ue<fe&&N(z(b[Y%H][M]),R,I);++ue)Y--,Z--;Y%=H,Z%=H}return Z<Y&&(Z+=H),{start:Y,end:Z,loop:ne,style:C.style}}function Wn(C,b,A){if(!A)return[C];const{property:M,start:R,end:I}=A,N=b.length,{compare:z,between:H,normalize:Y}=wt(M),{start:Z,end:ne,loop:ue,style:fe}=Fr(C,b,A),ve=[];let Me=!1,Oe=null,Be,Ye,nt;const et=()=>H(R,nt,Be)&&z(R,nt)!==0,Ke=()=>z(I,Be)===0||H(I,nt,Be),ft=()=>Me||et(),pt=()=>!Me||Ke();for(let Et=Z,Tt=Z;Et<=ne;++Et)Ye=b[Et%N],!Ye.skip&&(Be=Y(Ye[M]),Be!==nt&&(Me=H(Be,R,I),Oe===null&&ft()&&(Oe=z(Be,R)===0?Et:Tt),Oe!==null&&pt()&&(ve.push(Gn({start:Oe,end:Et,loop:ue,count:N,style:fe})),Oe=null),Tt=Et,nt=Be));return Oe!==null&&ve.push(Gn({start:Oe,end:ne,loop:ue,count:N,style:fe})),ve}function Yn(C,b){const A=[],M=C.segments;for(let R=0;R<M.length;R++){const I=Wn(M[R],C.points,b);I.length&&A.push(...I)}return A}function ht(C,b,A,M){let R=0,I=b-1;if(A&&!M)for(;R<b&&!C[R].skip;)R++;for(;R<b&&C[R].skip;)R++;for(R%=b,A&&(I+=R);I>R&&C[I%b].skip;)I--;return I%=b,{start:R,end:I}}function X(C,b,A,M){const R=C.length,I=[];let N=b,z=C[b],H;for(H=b+1;H<=A;++H){const Y=C[H%R];Y.skip||Y.stop?z.skip||(M=!1,I.push({start:b%R,end:(H-1)%R,loop:M}),b=N=Y.stop?H:null):(N=H,z.skip&&(b=H)),z=Y}return N!==null&&I.push({start:b%R,end:N%R,loop:M}),I}function te(C,b){const A=C.points,M=C.options.spanGaps,R=A.length;if(!R)return[];const I=!!C._loop,{start:N,end:z}=ht(A,R,I,M);if(M===!0)return We(C,[{start:N,end:z,loop:I}],A,b);const H=z<N?z+R:z,Y=!!C._fullLoop&&N===0&&z===R-1;return We(C,X(A,N,H,Y),A,b)}function We(C,b,A,M){return!M||!M.setContext||!A?b:yt(C,b,A,M)}function yt(C,b,A,M){const R=C._chart.getContext(),I=Nt(C.options),{_datasetIndex:N,options:{spanGaps:z}}=C,H=A.length,Y=[];let Z=I,ne=b[0].start,ue=ne;function fe(ve,Me,Oe,Be){const Ye=z?-1:1;if(ve!==Me){for(ve+=H;A[ve%H].skip;)ve-=Ye;for(;A[Me%H].skip;)Me+=Ye;ve%H!==Me%H&&(Y.push({start:ve%H,end:Me%H,loop:Oe,style:Be}),Z=Be,ne=Me%H)}}for(const ve of b){ne=z?ne:ve.start;let Me=A[ne%H],Oe;for(ue=ne+1;ue<=ve.end;ue++){const Be=A[ue%H];Oe=Nt(M.setContext(yn(R,{type:"segment",p0:Me,p1:Be,p0DataIndex:(ue-1)%H,p1DataIndex:ue%H,datasetIndex:N}))),Mn(Oe,Z)&&fe(ne,ue-1,ve.loop,Z),Me=Be,Z=Oe}ne<ue-1&&fe(ne,ue-1,ve.loop,Z)}return Y}function Nt(C){return{backgroundColor:C.backgroundColor,borderCapStyle:C.borderCapStyle,borderDash:C.borderDash,borderDashOffset:C.borderDashOffset,borderJoinStyle:C.borderJoinStyle,borderWidth:C.borderWidth,borderColor:C.borderColor}}function Mn(C,b){return b&&JSON.stringify(C)!==JSON.stringify(b)}var lr=Object.freeze({__proto__:null,easingEffects:Nn,isPatternOrGradient:kt,color:an,getHoverColor:dn,noop:r,uid:o,isNullOrUndef:s,isArray:l,isObject:c,isFinite:u,finiteOrDefault:d,valueOrDefault:f,toPercentage:v,toDimension:g,callback:y,each:_,_elementsEqual:S,clone:x,_merger:w,merge:E,mergeIf:P,_mergerIf:D,_deprecated:L,resolveObjectKey:O,_splitKey:V,_capitalize:F,defined:U,isFunction:G,setsEqual:W,_isClickEvent:j,toFontString:ri,_measureText:er,_longestText:yr,_alignPixel:xn,clearCanvas:Rr,drawPoint:_r,drawPointLegend:Dr,_isPointInArea:Un,clipArea:tr,unclipArea:Tn,_steppedLineTo:Ir,_bezierCurveTo:ii,renderText:An,addRoundedRectPath:zn,_lookup:Q,_lookupByKey:be,_rlookupByKey:Ee,_filterBetween:ke,listenArrayEvents:Je,unlistenArrayEvents:qe,_arrayUnique:Ze,_createResolver:nr,_attachContext:Ln,_descriptors:Lr,_parseObjectDataRadialScale:Or,splineCurve:vi,splineCurveMonotone:mi,_updateBezierControlPoints:yi,_isDomSupported:Qt,_getParentNode:Sn,getStyle:ei,getRelativePosition:bn,getMaximumSize:ti,retinaScale:Er,supportsEventListenerOptions:ni,readUsedSize:Pr,fontString:Pt,requestAnimFrame:je,throttled:ct,debounce:gt,_toLeftRightCenter:St,_alignStartEnd:at,_textX:Ct,_getStartAndCountOfVisiblePoints:bt,_scaleRangesChanged:Bt,_pointInLine:wn,_steppedInterpolation:kr,_bezierInterpolation:bi,formatNumber:Hn,toLineHeight:ar,_readValueToProps:or,toTRBL:br,toTRBLCorners:Cn,toPadding:en,toFont:qt,resolve:mn,_addGrace:sr,createContext:yn,PI:K,TAU:q,PITAU:ie,INFINITY:ee,RAD_PER_DEG:he,HALF_PI:pe,QUARTER_PI:ce,TWO_THIRDS_PI:ye,log10:we,sign:ge,niceNum:Se,_factorize:$e,isNumber:oe,almostEquals:me,almostWhole:_e,_setMinAndMaxByKey:Te,toRadians:Le,toDegrees:Ge,_decimalPlaces:se,getAngleFromPoint:J,distanceBetweenPoints:xe,_angleDiff:De,_normalizeAngle:Ae,_angleBetween:Ie,_limitValue:ze,_int16Range:Fe,_isBetween:ae,getRtlAdapter:On,overrideTextDirection:Vr,restoreTextDirection:de,_boundSegment:Wn,_boundSegments:Yn,_computeSegments:te});function us(C,b,A,M){const{controller:R,data:I,_sorted:N}=C,z=R._cachedMeta.iScale;if(z&&b===z.axis&&b!=="r"&&N&&I.length){const H=z._reversePixels?Ee:be;if(M){if(R._sharedOptions){const Y=I[0],Z=typeof Y.getRange=="function"&&Y.getRange(b);if(Z){const ne=H(I,b,A-Z),ue=H(I,b,A+Z);return{lo:ne.lo,hi:ue.hi}}}}else return H(I,b,A)}return{lo:0,hi:I.length-1}}function Ur(C,b,A,M,R){const I=C.getSortedVisibleDatasetMetas(),N=A[b];for(let z=0,H=I.length;z<H;++z){const{index:Y,data:Z}=I[z],{lo:ne,hi:ue}=us(I[z],b,N,R);for(let fe=ne;fe<=ue;++fe){const ve=Z[fe];ve.skip||M(ve,Y,fe)}}}function hs(C){const b=C.indexOf("x")!==-1,A=C.indexOf("y")!==-1;return function(M,R){const I=b?Math.abs(M.x-R.x):0,N=A?Math.abs(M.y-R.y):0;return Math.sqrt(Math.pow(I,2)+Math.pow(N,2))}}function ua(C,b,A,M,R){const I=[];return!R&&!C.isPointInArea(b)||Ur(C,A,b,function(z,H,Y){!R&&!Un(z,C.chartArea,0)||z.inRange(b.x,b.y,M)&&I.push({element:z,datasetIndex:H,index:Y})},!0),I}function ds(C,b,A,M){let R=[];function I(N,z,H){const{startAngle:Y,endAngle:Z}=N.getProps(["startAngle","endAngle"],M),{angle:ne}=J(N,{x:b.x,y:b.y});Ie(ne,Y,Z)&&R.push({element:N,datasetIndex:z,index:H})}return Ur(C,A,b,I),R}function fs(C,b,A,M,R,I){let N=[];const z=hs(A);let H=Number.POSITIVE_INFINITY;function Y(Z,ne,ue){const fe=Z.inRange(b.x,b.y,R);if(M&&!fe)return;const ve=Z.getCenterPoint(R);if(!(!!I||C.isPointInArea(ve))&&!fe)return;const Oe=z(b,ve);Oe<H?(N=[{element:Z,datasetIndex:ne,index:ue}],H=Oe):Oe===H&&N.push({element:Z,datasetIndex:ne,index:ue})}return Ur(C,A,b,Y),N}function ha(C,b,A,M,R,I){return!I&&!C.isPointInArea(b)?[]:A==="r"&&!M?ds(C,b,A,R):fs(C,b,A,M,R,I)}function Ua(C,b,A,M,R){const I=[],N=A==="x"?"inXRange":"inYRange";let z=!1;return Ur(C,A,b,(H,Y,Z)=>{H[N](b[A],R)&&(I.push({element:H,datasetIndex:Y,index:Z}),z=z||H.inRange(b.x,b.y,R))}),M&&!z?[]:I}var za={evaluateInteractionItems:Ur,modes:{index(C,b,A,M){const R=bn(b,C),I=A.axis||"x",N=A.includeInvisible||!1,z=A.intersect?ua(C,R,I,M,N):ha(C,R,I,!1,M,N),H=[];return z.length?(C.getSortedVisibleDatasetMetas().forEach(Y=>{const Z=z[0].index,ne=Y.data[Z];ne&&!ne.skip&&H.push({element:ne,datasetIndex:Y.index,index:Z})}),H):[]},dataset(C,b,A,M){const R=bn(b,C),I=A.axis||"xy",N=A.includeInvisible||!1;let z=A.intersect?ua(C,R,I,M,N):ha(C,R,I,!1,M,N);if(z.length>0){const H=z[0].datasetIndex,Y=C.getDatasetMeta(H).data;z=[];for(let Z=0;Z<Y.length;++Z)z.push({element:Y[Z],datasetIndex:H,index:Z})}return z},point(C,b,A,M){const R=bn(b,C),I=A.axis||"xy",N=A.includeInvisible||!1;return ua(C,R,I,M,N)},nearest(C,b,A,M){const R=bn(b,C),I=A.axis||"xy",N=A.includeInvisible||!1;return ha(C,R,I,A.intersect,M,N)},x(C,b,A,M){const R=bn(b,C);return Ua(C,R,"x",A.intersect,M)},y(C,b,A,M){const R=bn(b,C);return Ua(C,R,"y",A.intersect,M)}}};const Ha=["left","top","right","bottom"];function zr(C,b){return C.filter(A=>A.pos===b)}function Ga(C,b){return C.filter(A=>Ha.indexOf(A.pos)===-1&&A.box.axis===b)}function Hr(C,b){return C.sort((A,M)=>{const R=b?M:A,I=b?A:M;return R.weight===I.weight?R.index-I.index:R.weight-I.weight})}function ps(C){const b=[];let A,M,R,I,N,z;for(A=0,M=(C||[]).length;A<M;++A)R=C[A],{position:I,options:{stack:N,stackWeight:z=1}}=R,b.push({index:A,box:R,pos:I,horizontal:R.isHorizontal(),weight:R.weight,stack:N&&I+N,stackWeight:z});return b}function vs(C){const b={};for(const A of C){const{stack:M,pos:R,stackWeight:I}=A;if(!M||!Ha.includes(R))continue;const N=b[M]||(b[M]={count:0,placed:0,weight:0,size:0});N.count++,N.weight+=I}return b}function gs(C,b){const A=vs(C),{vBoxMaxWidth:M,hBoxMaxHeight:R}=b;let I,N,z;for(I=0,N=C.length;I<N;++I){z=C[I];const{fullSize:H}=z.box,Y=A[z.stack],Z=Y&&z.stackWeight/Y.weight;z.horizontal?(z.width=Z?Z*M:H&&b.availableWidth,z.height=R):(z.width=M,z.height=Z?Z*R:H&&b.availableHeight)}return A}function ms(C){const b=ps(C),A=Hr(b.filter(Y=>Y.box.fullSize),!0),M=Hr(zr(b,"left"),!0),R=Hr(zr(b,"right")),I=Hr(zr(b,"top"),!0),N=Hr(zr(b,"bottom")),z=Ga(b,"x"),H=Ga(b,"y");return{fullSize:A,leftAndTop:M.concat(I),rightAndBottom:R.concat(H).concat(N).concat(z),chartArea:zr(b,"chartArea"),vertical:M.concat(R).concat(H),horizontal:I.concat(N).concat(z)}}function Wa(C,b,A,M){return Math.max(C[A],b[A])+Math.max(C[M],b[M])}function Ya(C,b){C.top=Math.max(C.top,b.top),C.left=Math.max(C.left,b.left),C.bottom=Math.max(C.bottom,b.bottom),C.right=Math.max(C.right,b.right)}function ys(C,b,A,M){const{pos:R,box:I}=A,N=C.maxPadding;if(!c(R)){A.size&&(C[R]-=A.size);const ne=M[A.stack]||{size:0,count:1};ne.size=Math.max(ne.size,A.horizontal?I.height:I.width),A.size=ne.size/ne.count,C[R]+=A.size}I.getPadding&&Ya(N,I.getPadding());const z=Math.max(0,b.outerWidth-Wa(N,C,"left","right")),H=Math.max(0,b.outerHeight-Wa(N,C,"top","bottom")),Y=z!==C.w,Z=H!==C.h;return C.w=z,C.h=H,A.horizontal?{same:Y,other:Z}:{same:Z,other:Y}}function _s(C){const b=C.maxPadding;function A(M){const R=Math.max(b[M]-C[M],0);return C[M]+=R,R}C.y+=A("top"),C.x+=A("left"),A("right"),A("bottom")}function Ss(C,b){const A=b.maxPadding;function M(R){const I={left:0,top:0,right:0,bottom:0};return R.forEach(N=>{I[N]=Math.max(b[N],A[N])}),I}return M(C?["left","right"]:["top","bottom"])}function Gr(C,b,A,M){const R=[];let I,N,z,H,Y,Z;for(I=0,N=C.length,Y=0;I<N;++I){z=C[I],H=z.box,H.update(z.width||b.w,z.height||b.h,Ss(z.horizontal,b));const{same:ne,other:ue}=ys(b,A,z,M);Y|=ne&&R.length,Z=Z||ue,H.fullSize||R.push(z)}return Y&&Gr(R,b,A,M)||Z}function wi(C,b,A,M,R){C.top=A,C.left=b,C.right=b+M,C.bottom=A+R,C.width=M,C.height=R}function Xa(C,b,A,M){const R=A.padding;let{x:I,y:N}=b;for(const z of C){const H=z.box,Y=M[z.stack]||{count:1,placed:0,weight:1},Z=z.stackWeight/Y.weight||1;if(z.horizontal){const ne=b.w*Z,ue=Y.size||H.height;U(Y.start)&&(N=Y.start),H.fullSize?wi(H,R.left,N,A.outerWidth-R.right-R.left,ue):wi(H,b.left+Y.placed,N,ne,ue),Y.start=N,Y.placed+=ne,N=H.bottom}else{const ne=b.h*Z,ue=Y.size||H.width;U(Y.start)&&(I=Y.start),H.fullSize?wi(H,I,R.top,ue,A.outerHeight-R.bottom-R.top):wi(H,I,b.top+Y.placed,ue,ne),Y.start=I,Y.placed+=ne,I=H.right}}b.x=I,b.y=N}Mt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var on={addBox(C,b){C.boxes||(C.boxes=[]),b.fullSize=b.fullSize||!1,b.position=b.position||"top",b.weight=b.weight||0,b._layers=b._layers||function(){return[{z:0,draw(A){b.draw(A)}}]},C.boxes.push(b)},removeBox(C,b){const A=C.boxes?C.boxes.indexOf(b):-1;A!==-1&&C.boxes.splice(A,1)},configure(C,b,A){b.fullSize=A.fullSize,b.position=A.position,b.weight=A.weight},update(C,b,A,M){if(!C)return;const R=en(C.options.layout.padding),I=Math.max(b-R.width,0),N=Math.max(A-R.height,0),z=ms(C.boxes),H=z.vertical,Y=z.horizontal;_(C.boxes,Me=>{typeof Me.beforeLayout=="function"&&Me.beforeLayout()});const Z=H.reduce((Me,Oe)=>Oe.box.options&&Oe.box.options.display===!1?Me:Me+1,0)||1,ne=Object.freeze({outerWidth:b,outerHeight:A,padding:R,availableWidth:I,availableHeight:N,vBoxMaxWidth:I/2/Z,hBoxMaxHeight:N/2}),ue=Object.assign({},R);Ya(ue,en(M));const fe=Object.assign({maxPadding:ue,w:I,h:N,x:R.left,y:R.top},R),ve=gs(H.concat(Y),ne);Gr(z.fullSize,fe,ne,ve),Gr(H,fe,ne,ve),Gr(Y,fe,ne,ve)&&Gr(H,fe,ne,ve),_s(fe),Xa(z.leftAndTop,fe,ne,ve),fe.x+=fe.w,fe.y+=fe.h,Xa(z.rightAndBottom,fe,ne,ve),C.chartArea={left:fe.left,top:fe.top,right:fe.left+fe.w,bottom:fe.top+fe.h,height:fe.h,width:fe.w},_(z.chartArea,Me=>{const Oe=Me.box;Object.assign(Oe,C.chartArea),Oe.update(fe.w,fe.h,{left:0,top:0,right:0,bottom:0})})}};class da{acquireContext(b,A){}releaseContext(b){return!1}addEventListener(b,A,M){}removeEventListener(b,A,M){}getDevicePixelRatio(){return 1}getMaximumSize(b,A,M,R){return A=Math.max(0,A||b.width),M=M||b.height,{width:A,height:Math.max(0,R?Math.floor(A/R):M)}}isAttached(b){return!0}updateConfig(b){}}class ja extends da{acquireContext(b){return b&&b.getContext&&b.getContext("2d")||null}updateConfig(b){b.options.animation=!1}}const Ci="$chartjs",bs={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qa=C=>C===null||C==="";function xs(C,b){const A=C.style,M=C.getAttribute("height"),R=C.getAttribute("width");if(C[Ci]={initial:{height:M,width:R,style:{display:A.display,height:A.height,width:A.width}}},A.display=A.display||"block",A.boxSizing=A.boxSizing||"border-box",qa(R)){const I=Pr(C,"width");I!==void 0&&(C.width=I)}if(qa(M))if(C.style.height==="")C.height=C.width/(b||2);else{const I=Pr(C,"height");I!==void 0&&(C.height=I)}return C}const Ka=ni?{passive:!0}:!1;function Ts(C,b,A){C.addEventListener(b,A,Ka)}function As(C,b,A){C.canvas.removeEventListener(b,A,Ka)}function ws(C,b){const A=bs[C.type]||C.type,{x:M,y:R}=bn(C,b);return{type:A,chart:b,native:C,x:M!==void 0?M:null,y:R!==void 0?R:null}}function Mi(C,b){for(const A of C)if(A===b||A.contains(b))return!0}function Cs(C,b,A){const M=C.canvas,R=new MutationObserver(I=>{let N=!1;for(const z of I)N=N||Mi(z.addedNodes,M),N=N&&!Mi(z.removedNodes,M);N&&A()});return R.observe(document,{childList:!0,subtree:!0}),R}function Ms(C,b,A){const M=C.canvas,R=new MutationObserver(I=>{let N=!1;for(const z of I)N=N||Mi(z.removedNodes,M),N=N&&!Mi(z.addedNodes,M);N&&A()});return R.observe(document,{childList:!0,subtree:!0}),R}const Wr=new Map;let Za=0;function Ja(){const C=window.devicePixelRatio;C!==Za&&(Za=C,Wr.forEach((b,A)=>{A.currentDevicePixelRatio!==C&&b()}))}function Es(C,b){Wr.size||window.addEventListener("resize",Ja),Wr.set(C,b)}function Ps(C){Wr.delete(C),Wr.size||window.removeEventListener("resize",Ja)}function Rs(C,b,A){const M=C.canvas,R=M&&Sn(M);if(!R)return;const I=ct((z,H)=>{const Y=R.clientWidth;A(z,H),Y<R.clientWidth&&A()},window),N=new ResizeObserver(z=>{const H=z[0],Y=H.contentRect.width,Z=H.contentRect.height;Y===0&&Z===0||I(Y,Z)});return N.observe(R),Es(C,I),N}function fa(C,b,A){A&&A.disconnect(),b==="resize"&&Ps(C)}function Ds(C,b,A){const M=C.canvas,R=ct(I=>{C.ctx!==null&&A(ws(I,C))},C,I=>{const N=I[0];return[N,N.offsetX,N.offsetY]});return Ts(M,b,R),R}class Qa extends da{acquireContext(b,A){const M=b&&b.getContext&&b.getContext("2d");return M&&M.canvas===b?(xs(b,A),M):null}releaseContext(b){const A=b.canvas;if(!A[Ci])return!1;const M=A[Ci].initial;["height","width"].forEach(I=>{const N=M[I];s(N)?A.removeAttribute(I):A.setAttribute(I,N)});const R=M.style||{};return Object.keys(R).forEach(I=>{A.style[I]=R[I]}),A.width=A.width,delete A[Ci],!0}addEventListener(b,A,M){this.removeEventListener(b,A);const R=b.$proxies||(b.$proxies={}),N={attach:Cs,detach:Ms,resize:Rs}[A]||Ds;R[A]=N(b,A,M)}removeEventListener(b,A){const M=b.$proxies||(b.$proxies={}),R=M[A];if(!R)return;({attach:fa,detach:fa,resize:fa}[A]||As)(b,A,R),M[A]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(b,A,M,R){return ti(b,A,M,R)}isAttached(b){const A=Sn(b);return!!(A&&A.isConnected)}}function eo(C){return!Qt()||typeof OffscreenCanvas<"u"&&C instanceof OffscreenCanvas?ja:Qa}var to=Object.freeze({__proto__:null,_detectPlatform:eo,BasePlatform:da,BasicPlatform:ja,DomPlatform:Qa});const no="transparent",Is={boolean(C,b,A){return A>.5?b:C},color(C,b,A){const M=an(C||no),R=M.valid&&an(b||no);return R&&R.valid?R.mix(M,A).hexString():b},number(C,b,A){return C+(b-C)*A}};class ro{constructor(b,A,M,R){const I=A[M];R=mn([b.to,R,I,b.from]);const N=mn([b.from,I,R]);this._active=!0,this._fn=b.fn||Is[b.type||typeof N],this._easing=Nn[b.easing]||Nn.linear,this._start=Math.floor(Date.now()+(b.delay||0)),this._duration=this._total=Math.floor(b.duration),this._loop=!!b.loop,this._target=A,this._prop=M,this._from=N,this._to=R,this._promises=void 0}active(){return this._active}update(b,A,M){if(this._active){this._notify(!1);const R=this._target[this._prop],I=M-this._start,N=this._duration-I;this._start=M,this._duration=Math.floor(Math.max(N,b.duration)),this._total+=I,this._loop=!!b.loop,this._to=mn([b.to,A,R,b.from]),this._from=mn([b.from,R,A])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(b){const A=b-this._start,M=this._duration,R=this._prop,I=this._from,N=this._loop,z=this._to;let H;if(this._active=I!==z&&(N||A<M),!this._active){this._target[R]=z,this._notify(!0);return}if(A<0){this._target[R]=I;return}H=A/M%2,H=N&&H>1?2-H:H,H=this._easing(Math.min(1,Math.max(0,H))),this._target[R]=this._fn(I,z,H)}wait(){const b=this._promises||(this._promises=[]);return new Promise((A,M)=>{b.push({res:A,rej:M})})}_notify(b){const A=b?"res":"rej",M=this._promises||[];for(let R=0;R<M.length;R++)M[R][A]()}}const Ls=["x","y","borderWidth","radius","tension"],$s=["color","borderColor","backgroundColor"];Mt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Ns=Object.keys(Mt.animation);Mt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:C=>C!=="onProgress"&&C!=="onComplete"&&C!=="fn"}),Mt.set("animations",{colors:{type:"color",properties:$s},numbers:{type:"number",properties:Ls}}),Mt.describe("animations",{_fallback:"animation"}),Mt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:C=>C|0}}}});class pa{constructor(b,A){this._chart=b,this._properties=new Map,this.configure(A)}configure(b){if(!c(b))return;const A=this._properties;Object.getOwnPropertyNames(b).forEach(M=>{const R=b[M];if(!c(R))return;const I={};for(const N of Ns)I[N]=R[N];(l(R.properties)&&R.properties||[M]).forEach(N=>{(N===M||!A.has(N))&&A.set(N,I)})})}_animateOptions(b,A){const M=A.options,R=ks(b,M);if(!R)return[];const I=this._createAnimations(R,M);return M.$shared&&Os(b.options.$animations,M).then(()=>{b.options=M},()=>{}),I}_createAnimations(b,A){const M=this._properties,R=[],I=b.$animations||(b.$animations={}),N=Object.keys(A),z=Date.now();let H;for(H=N.length-1;H>=0;--H){const Y=N[H];if(Y.charAt(0)==="$")continue;if(Y==="options"){R.push(...this._animateOptions(b,A));continue}const Z=A[Y];let ne=I[Y];const ue=M.get(Y);if(ne)if(ue&&ne.active()){ne.update(ue,Z,z);continue}else ne.cancel();if(!ue||!ue.duration){b[Y]=Z;continue}I[Y]=ne=new ro(ue,b,Y,Z),R.push(ne)}return R}update(b,A){if(this._properties.size===0){Object.assign(b,A);return}const M=this._createAnimations(b,A);if(M.length)return ot.add(this._chart,M),!0}}function Os(C,b){const A=[],M=Object.keys(b);for(let R=0;R<M.length;R++){const I=C[M[R]];I&&I.active()&&A.push(I.wait())}return Promise.all(A)}function ks(C,b){if(!b)return;let A=C.options;if(!A){C.options=b;return}return A.$shared&&(C.options=A=Object.assign({},A,{$shared:!1,$animations:{}})),A}function io(C,b){const A=C&&C.options||{},M=A.reverse,R=A.min===void 0?b:0,I=A.max===void 0?b:0;return{start:M?I:R,end:M?R:I}}function Bs(C,b,A){if(A===!1)return!1;const M=io(C,A),R=io(b,A);return{top:R.end,right:M.end,bottom:R.start,left:M.start}}function Vs(C){let b,A,M,R;return c(C)?(b=C.top,A=C.right,M=C.bottom,R=C.left):b=A=M=R=C,{top:b,right:A,bottom:M,left:R,disabled:C===!1}}function ao(C,b){const A=[],M=C._getSortedDatasetMetas(b);let R,I;for(R=0,I=M.length;R<I;++R)A.push(M[R].index);return A}function oo(C,b,A,M={}){const R=C.keys,I=M.mode==="single";let N,z,H,Y;if(b!==null){for(N=0,z=R.length;N<z;++N){if(H=+R[N],H===A){if(M.all)continue;break}Y=C.values[H],u(Y)&&(I||b===0||ge(b)===ge(Y))&&(b+=Y)}return b}}function Fs(C){const b=Object.keys(C),A=new Array(b.length);let M,R,I;for(M=0,R=b.length;M<R;++M)I=b[M],A[M]={x:I,y:C[I]};return A}function so(C,b){const A=C&&C.options.stacked;return A||A===void 0&&b.stack!==void 0}function Us(C,b,A){return`${C.id}.${b.id}.${A.stack||A.type}`}function zs(C){const{min:b,max:A,minDefined:M,maxDefined:R}=C.getUserBounds();return{min:M?b:Number.NEGATIVE_INFINITY,max:R?A:Number.POSITIVE_INFINITY}}function Hs(C,b,A){const M=C[b]||(C[b]={});return M[A]||(M[A]={})}function lo(C,b,A,M){for(const R of b.getMatchingVisibleMetas(M).reverse()){const I=C[R.index];if(A&&I>0||!A&&I<0)return R.index}return null}function co(C,b){const{chart:A,_cachedMeta:M}=C,R=A._stacks||(A._stacks={}),{iScale:I,vScale:N,index:z}=M,H=I.axis,Y=N.axis,Z=Us(I,N,M),ne=b.length;let ue;for(let fe=0;fe<ne;++fe){const ve=b[fe],{[H]:Me,[Y]:Oe}=ve,Be=ve._stacks||(ve._stacks={});ue=Be[Y]=Hs(R,Z,Me),ue[z]=Oe,ue._top=lo(ue,N,!0,M.type),ue._bottom=lo(ue,N,!1,M.type)}}function va(C,b){const A=C.scales;return Object.keys(A).filter(M=>A[M].axis===b).shift()}function Gs(C,b){return yn(C,{active:!1,dataset:void 0,datasetIndex:b,index:b,mode:"default",type:"dataset"})}function Ws(C,b,A){return yn(C,{active:!1,dataIndex:b,parsed:void 0,raw:void 0,element:A,index:b,mode:"default",type:"data"})}function Yr(C,b){const A=C.controller.index,M=C.vScale&&C.vScale.axis;if(M){b=b||C._parsed;for(const R of b){const I=R._stacks;if(!I||I[M]===void 0||I[M][A]===void 0)return;delete I[M][A]}}}const ga=C=>C==="reset"||C==="none",uo=(C,b)=>b?C:Object.assign({},C),Ys=(C,b,A)=>C&&!b.hidden&&b._stacked&&{keys:ao(A,!0),values:null};class fn{constructor(b,A){this.chart=b,this._ctx=b.ctx,this.index=A,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const b=this._cachedMeta;this.configure(),this.linkScales(),b._stacked=so(b.vScale,b),this.addElements()}updateIndex(b){this.index!==b&&Yr(this._cachedMeta),this.index=b}linkScales(){const b=this.chart,A=this._cachedMeta,M=this.getDataset(),R=(ne,ue,fe,ve)=>ne==="x"?ue:ne==="r"?ve:fe,I=A.xAxisID=f(M.xAxisID,va(b,"x")),N=A.yAxisID=f(M.yAxisID,va(b,"y")),z=A.rAxisID=f(M.rAxisID,va(b,"r")),H=A.indexAxis,Y=A.iAxisID=R(H,I,N,z),Z=A.vAxisID=R(H,N,I,z);A.xScale=this.getScaleForId(I),A.yScale=this.getScaleForId(N),A.rScale=this.getScaleForId(z),A.iScale=this.getScaleForId(Y),A.vScale=this.getScaleForId(Z)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(b){return this.chart.scales[b]}_getOtherScale(b){const A=this._cachedMeta;return b===A.iScale?A.vScale:A.iScale}reset(){this._update("reset")}_destroy(){const b=this._cachedMeta;this._data&&qe(this._data,this),b._stacked&&Yr(b)}_dataCheck(){const b=this.getDataset(),A=b.data||(b.data=[]),M=this._data;if(c(A))this._data=Fs(A);else if(M!==A){if(M){qe(M,this);const R=this._cachedMeta;Yr(R),R._parsed=[]}A&&Object.isExtensible(A)&&Je(A,this),this._syncList=[],this._data=A}}addElements(){const b=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(b.dataset=new this.datasetElementType)}buildOrUpdateElements(b){const A=this._cachedMeta,M=this.getDataset();let R=!1;this._dataCheck();const I=A._stacked;A._stacked=so(A.vScale,A),A.stack!==M.stack&&(R=!0,Yr(A),A.stack=M.stack),this._resyncElements(b),(R||I!==A._stacked)&&co(this,A._parsed)}configure(){const b=this.chart.config,A=b.datasetScopeKeys(this._type),M=b.getOptionScopes(this.getDataset(),A,!0);this.options=b.createResolver(M,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(b,A){const{_cachedMeta:M,_data:R}=this,{iScale:I,_stacked:N}=M,z=I.axis;let H=b===0&&A===R.length?!0:M._sorted,Y=b>0&&M._parsed[b-1],Z,ne,ue;if(this._parsing===!1)M._parsed=R,M._sorted=!0,ue=R;else{l(R[b])?ue=this.parseArrayData(M,R,b,A):c(R[b])?ue=this.parseObjectData(M,R,b,A):ue=this.parsePrimitiveData(M,R,b,A);const fe=()=>ne[z]===null||Y&&ne[z]<Y[z];for(Z=0;Z<A;++Z)M._parsed[Z+b]=ne=ue[Z],H&&(fe()&&(H=!1),Y=ne);M._sorted=H}N&&co(this,ue)}parsePrimitiveData(b,A,M,R){const{iScale:I,vScale:N}=b,z=I.axis,H=N.axis,Y=I.getLabels(),Z=I===N,ne=new Array(R);let ue,fe,ve;for(ue=0,fe=R;ue<fe;++ue)ve=ue+M,ne[ue]={[z]:Z||I.parse(Y[ve],ve),[H]:N.parse(A[ve],ve)};return ne}parseArrayData(b,A,M,R){const{xScale:I,yScale:N}=b,z=new Array(R);let H,Y,Z,ne;for(H=0,Y=R;H<Y;++H)Z=H+M,ne=A[Z],z[H]={x:I.parse(ne[0],Z),y:N.parse(ne[1],Z)};return z}parseObjectData(b,A,M,R){const{xScale:I,yScale:N}=b,{xAxisKey:z="x",yAxisKey:H="y"}=this._parsing,Y=new Array(R);let Z,ne,ue,fe;for(Z=0,ne=R;Z<ne;++Z)ue=Z+M,fe=A[ue],Y[Z]={x:I.parse(O(fe,z),ue),y:N.parse(O(fe,H),ue)};return Y}getParsed(b){return this._cachedMeta._parsed[b]}getDataElement(b){return this._cachedMeta.data[b]}applyStack(b,A,M){const R=this.chart,I=this._cachedMeta,N=A[b.axis],z={keys:ao(R,!0),values:A._stacks[b.axis]};return oo(z,N,I.index,{mode:M})}updateRangeFromParsed(b,A,M,R){const I=M[A.axis];let N=I===null?NaN:I;const z=R&&M._stacks[A.axis];R&&z&&(R.values=z,N=oo(R,I,this._cachedMeta.index)),b.min=Math.min(b.min,N),b.max=Math.max(b.max,N)}getMinMax(b,A){const M=this._cachedMeta,R=M._parsed,I=M._sorted&&b===M.iScale,N=R.length,z=this._getOtherScale(b),H=Ys(A,M,this.chart),Y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:Z,max:ne}=zs(z);let ue,fe;function ve(){fe=R[ue];const Me=fe[z.axis];return!u(fe[b.axis])||Z>Me||ne<Me}for(ue=0;ue<N&&!(!ve()&&(this.updateRangeFromParsed(Y,b,fe,H),I));++ue);if(I){for(ue=N-1;ue>=0;--ue)if(!ve()){this.updateRangeFromParsed(Y,b,fe,H);break}}return Y}getAllParsedValues(b){const A=this._cachedMeta._parsed,M=[];let R,I,N;for(R=0,I=A.length;R<I;++R)N=A[R][b.axis],u(N)&&M.push(N);return M}getMaxOverflow(){return!1}getLabelAndValue(b){const A=this._cachedMeta,M=A.iScale,R=A.vScale,I=this.getParsed(b);return{label:M?""+M.getLabelForValue(I[M.axis]):"",value:R?""+R.getLabelForValue(I[R.axis]):""}}_update(b){const A=this._cachedMeta;this.update(b||"default"),A._clip=Vs(f(this.options.clip,Bs(A.xScale,A.yScale,this.getMaxOverflow())))}update(b){}draw(){const b=this._ctx,A=this.chart,M=this._cachedMeta,R=M.data||[],I=A.chartArea,N=[],z=this._drawStart||0,H=this._drawCount||R.length-z,Y=this.options.drawActiveElementsOnTop;let Z;for(M.dataset&&M.dataset.draw(b,I,z,H),Z=z;Z<z+H;++Z){const ne=R[Z];ne.hidden||(ne.active&&Y?N.push(ne):ne.draw(b,I))}for(Z=0;Z<N.length;++Z)N[Z].draw(b,I)}getStyle(b,A){const M=A?"active":"default";return b===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(M):this.resolveDataElementOptions(b||0,M)}getContext(b,A,M){const R=this.getDataset();let I;if(b>=0&&b<this._cachedMeta.data.length){const N=this._cachedMeta.data[b];I=N.$context||(N.$context=Ws(this.getContext(),b,N)),I.parsed=this.getParsed(b),I.raw=R.data[b],I.index=I.dataIndex=b}else I=this.$context||(this.$context=Gs(this.chart.getContext(),this.index)),I.dataset=R,I.index=I.datasetIndex=this.index;return I.active=!!A,I.mode=M,I}resolveDatasetElementOptions(b){return this._resolveElementOptions(this.datasetElementType.id,b)}resolveDataElementOptions(b,A){return this._resolveElementOptions(this.dataElementType.id,A,b)}_resolveElementOptions(b,A="default",M){const R=A==="active",I=this._cachedDataOpts,N=b+"-"+A,z=I[N],H=this.enableOptionSharing&&U(M);if(z)return uo(z,H);const Y=this.chart.config,Z=Y.datasetElementScopeKeys(this._type,b),ne=R?[`${b}Hover`,"hover",b,""]:[b,""],ue=Y.getOptionScopes(this.getDataset(),Z),fe=Object.keys(Mt.elements[b]),ve=()=>this.getContext(M,R),Me=Y.resolveNamedOptions(ue,fe,ve,ne);return Me.$shared&&(Me.$shared=H,I[N]=Object.freeze(uo(Me,H))),Me}_resolveAnimations(b,A,M){const R=this.chart,I=this._cachedDataOpts,N=`animation-${A}`,z=I[N];if(z)return z;let H;if(R.options.animation!==!1){const Z=this.chart.config,ne=Z.datasetAnimationScopeKeys(this._type,A),ue=Z.getOptionScopes(this.getDataset(),ne);H=Z.createResolver(ue,this.getContext(b,M,A))}const Y=new pa(R,H&&H.animations);return H&&H._cacheable&&(I[N]=Object.freeze(Y)),Y}getSharedOptions(b){if(b.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},b))}includeOptions(b,A){return!A||ga(b)||this.chart._animationsDisabled}_getSharedOptions(b,A){const M=this.resolveDataElementOptions(b,A),R=this._sharedOptions,I=this.getSharedOptions(M),N=this.includeOptions(A,I)||I!==R;return this.updateSharedOptions(I,A,M),{sharedOptions:I,includeOptions:N}}updateElement(b,A,M,R){ga(R)?Object.assign(b,M):this._resolveAnimations(A,R).update(b,M)}updateSharedOptions(b,A,M){b&&!ga(A)&&this._resolveAnimations(void 0,A).update(b,M)}_setStyle(b,A,M,R){b.active=R;const I=this.getStyle(A,R);this._resolveAnimations(A,M,R).update(b,{options:!R&&this.getSharedOptions(I)||I})}removeHoverStyle(b,A,M){this._setStyle(b,M,"active",!1)}setHoverStyle(b,A,M){this._setStyle(b,M,"active",!0)}_removeDatasetHoverStyle(){const b=this._cachedMeta.dataset;b&&this._setStyle(b,void 0,"active",!1)}_setDatasetHoverStyle(){const b=this._cachedMeta.dataset;b&&this._setStyle(b,void 0,"active",!0)}_resyncElements(b){const A=this._data,M=this._cachedMeta.data;for(const[z,H,Y]of this._syncList)this[z](H,Y);this._syncList=[];const R=M.length,I=A.length,N=Math.min(I,R);N&&this.parse(0,N),I>R?this._insertElements(R,I-R,b):I<R&&this._removeElements(I,R-I)}_insertElements(b,A,M=!0){const R=this._cachedMeta,I=R.data,N=b+A;let z;const H=Y=>{for(Y.length+=A,z=Y.length-1;z>=N;z--)Y[z]=Y[z-A]};for(H(I),z=b;z<N;++z)I[z]=new this.dataElementType;this._parsing&&H(R._parsed),this.parse(b,A),M&&this.updateElements(I,b,A,"reset")}updateElements(b,A,M,R){}_removeElements(b,A){const M=this._cachedMeta;if(this._parsing){const R=M._parsed.splice(b,A);M._stacked&&Yr(M,R)}M.data.splice(b,A)}_sync(b){if(this._parsing)this._syncList.push(b);else{const[A,M,R]=b;this[A](M,R)}this.chart._dataChanges.push([this.index,...b])}_onDataPush(){const b=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-b,b])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(b,A){A&&this._sync(["_removeElements",b,A]);const M=arguments.length-2;M&&this._sync(["_insertElements",b,M])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fn.defaults={},fn.prototype.datasetElementType=null,fn.prototype.dataElementType=null;class pn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(b){const{x:A,y:M}=this.getProps(["x","y"],b);return{x:A,y:M}}hasValue(){return oe(this.x)&&oe(this.y)}getProps(b,A){const M=this.$animations;if(!A||!M)return this;const R={};return b.forEach(I=>{R[I]=M[I]&&M[I].active()?M[I]._to:this[I]}),R}}pn.defaults={},pn.defaultRoutes=void 0;const ho={values(C){return l(C)?C:""+C},numeric(C,b,A){if(C===0)return"0";const M=this.chart.options.locale;let R,I=C;if(A.length>1){const Y=Math.max(Math.abs(A[0].value),Math.abs(A[A.length-1].value));(Y<1e-4||Y>1e15)&&(R="scientific"),I=Xs(C,A)}const N=we(Math.abs(I)),z=Math.max(Math.min(-1*Math.floor(N),20),0),H={notation:R,minimumFractionDigits:z,maximumFractionDigits:z};return Object.assign(H,this.options.ticks.format),Hn(C,M,H)},logarithmic(C,b,A){if(C===0)return"0";const M=C/Math.pow(10,Math.floor(we(C)));return M===1||M===2||M===5?ho.numeric.call(this,C,b,A):""}};function Xs(C,b){let A=b.length>3?b[2].value-b[1].value:b[1].value-b[0].value;return Math.abs(A)>=1&&C!==Math.floor(C)&&(A=C-Math.floor(C)),A}var Xr={formatters:ho};Mt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(C,b)=>b.lineWidth,tickColor:(C,b)=>b.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Mt.route("scale.ticks","color","","color"),Mt.route("scale.grid","color","","borderColor"),Mt.route("scale.grid","borderColor","","borderColor"),Mt.route("scale.title","color","","color"),Mt.describe("scale",{_fallback:!1,_scriptable:C=>!C.startsWith("before")&&!C.startsWith("after")&&C!=="callback"&&C!=="parser",_indexable:C=>C!=="borderDash"&&C!=="tickBorderDash"}),Mt.describe("scales",{_fallback:"scale"}),Mt.describe("scale.ticks",{_scriptable:C=>C!=="backdropPadding"&&C!=="callback",_indexable:C=>C!=="backdropPadding"});function js(C,b){const A=C.options.ticks,M=A.maxTicksLimit||qs(C),R=A.major.enabled?Zs(b):[],I=R.length,N=R[0],z=R[I-1],H=[];if(I>M)return Js(b,H,R,I/M),H;const Y=Ks(R,b,M);if(I>0){let Z,ne;const ue=I>1?Math.round((z-N)/(I-1)):null;for(Ei(b,H,Y,s(ue)?0:N-ue,N),Z=0,ne=I-1;Z<ne;Z++)Ei(b,H,Y,R[Z],R[Z+1]);return Ei(b,H,Y,z,s(ue)?b.length:z+ue),H}return Ei(b,H,Y),H}function qs(C){const b=C.options.offset,A=C._tickSize(),M=C._length/A+(b?0:1),R=C._maxLength/A;return Math.floor(Math.min(M,R))}function Ks(C,b,A){const M=Qs(C),R=b.length/A;if(!M)return Math.max(R,1);const I=$e(M);for(let N=0,z=I.length-1;N<z;N++){const H=I[N];if(H>R)return H}return Math.max(R,1)}function Zs(C){const b=[];let A,M;for(A=0,M=C.length;A<M;A++)C[A].major&&b.push(A);return b}function Js(C,b,A,M){let R=0,I=A[0],N;for(M=Math.ceil(M),N=0;N<C.length;N++)N===I&&(b.push(C[N]),R++,I=A[R*M])}function Ei(C,b,A,M,R){const I=f(M,0),N=Math.min(f(R,C.length),C.length);let z=0,H,Y,Z;for(A=Math.ceil(A),R&&(H=R-M,A=H/Math.floor(H/A)),Z=I;Z<0;)z++,Z=Math.round(I+z*A);for(Y=Math.max(I,0);Y<N;Y++)Y===Z&&(b.push(C[Y]),z++,Z=Math.round(I+z*A))}function Qs(C){const b=C.length;let A,M;if(b<2)return!1;for(M=C[0],A=1;A<b;++A)if(C[A]-C[A-1]!==M)return!1;return M}const el=C=>C==="left"?"right":C==="right"?"left":C,fo=(C,b,A)=>b==="top"||b==="left"?C[b]+A:C[b]-A;function po(C,b){const A=[],M=C.length/b,R=C.length;let I=0;for(;I<R;I+=M)A.push(C[Math.floor(I)]);return A}function tl(C,b,A){const M=C.ticks.length,R=Math.min(b,M-1),I=C._startPixel,N=C._endPixel,z=1e-6;let H=C.getPixelForTick(R),Y;if(!(A&&(M===1?Y=Math.max(H-I,N-H):b===0?Y=(C.getPixelForTick(1)-H)/2:Y=(H-C.getPixelForTick(R-1))/2,H+=R<b?Y:-Y,H<I-z||H>N+z)))return H}function nl(C,b){_(C,A=>{const M=A.gc,R=M.length/2;let I;if(R>b){for(I=0;I<R;++I)delete A.data[M[I]];M.splice(0,R)}})}function jr(C){return C.drawTicks?C.tickLength:0}function vo(C,b){if(!C.display)return 0;const A=qt(C.font,b),M=en(C.padding);return(l(C.text)?C.text.length:1)*A.lineHeight+M.height}function rl(C,b){return yn(C,{scale:b,type:"scale"})}function il(C,b,A){return yn(C,{tick:A,index:b,type:"tick"})}function al(C,b,A){let M=St(C);return(A&&b!=="right"||!A&&b==="right")&&(M=el(M)),M}function ol(C,b,A,M){const{top:R,left:I,bottom:N,right:z,chart:H}=C,{chartArea:Y,scales:Z}=H;let ne=0,ue,fe,ve;const Me=N-R,Oe=z-I;if(C.isHorizontal()){if(fe=at(M,I,z),c(A)){const Be=Object.keys(A)[0],Ye=A[Be];ve=Z[Be].getPixelForValue(Ye)+Me-b}else A==="center"?ve=(Y.bottom+Y.top)/2+Me-b:ve=fo(C,A,b);ue=z-I}else{if(c(A)){const Be=Object.keys(A)[0],Ye=A[Be];fe=Z[Be].getPixelForValue(Ye)-Oe+b}else A==="center"?fe=(Y.left+Y.right)/2-Oe+b:fe=fo(C,A,b);ve=at(M,N,R),ne=A==="left"?-pe:pe}return{titleX:fe,titleY:ve,maxWidth:ue,rotation:ne}}class Xn extends pn{constructor(b){super(),this.id=b.id,this.type=b.type,this.options=void 0,this.ctx=b.ctx,this.chart=b.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(b){this.options=b.setContext(this.getContext()),this.axis=b.axis,this._userMin=this.parse(b.min),this._userMax=this.parse(b.max),this._suggestedMin=this.parse(b.suggestedMin),this._suggestedMax=this.parse(b.suggestedMax)}parse(b,A){return b}getUserBounds(){let{_userMin:b,_userMax:A,_suggestedMin:M,_suggestedMax:R}=this;return b=d(b,Number.POSITIVE_INFINITY),A=d(A,Number.NEGATIVE_INFINITY),M=d(M,Number.POSITIVE_INFINITY),R=d(R,Number.NEGATIVE_INFINITY),{min:d(b,M),max:d(A,R),minDefined:u(b),maxDefined:u(A)}}getMinMax(b){let{min:A,max:M,minDefined:R,maxDefined:I}=this.getUserBounds(),N;if(R&&I)return{min:A,max:M};const z=this.getMatchingVisibleMetas();for(let H=0,Y=z.length;H<Y;++H)N=z[H].controller.getMinMax(this,b),R||(A=Math.min(A,N.min)),I||(M=Math.max(M,N.max));return A=I&&A>M?M:A,M=R&&A>M?A:M,{min:d(A,d(M,A)),max:d(M,d(A,M))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const b=this.chart.data;return this.options.labels||(this.isHorizontal()?b.xLabels:b.yLabels)||b.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){y(this.options.beforeUpdate,[this])}update(b,A,M){const{beginAtZero:R,grace:I,ticks:N}=this.options,z=N.sampleSize;this.beforeUpdate(),this.maxWidth=b,this.maxHeight=A,this._margins=M=Object.assign({left:0,right:0,top:0,bottom:0},M),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+M.left+M.right:this.height+M.top+M.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=sr(this,I,R),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const H=z<this.ticks.length;this._convertTicksToLabels(H?po(this.ticks,z):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),N.display&&(N.autoSkip||N.source==="auto")&&(this.ticks=js(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),H&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let b=this.options.reverse,A,M;this.isHorizontal()?(A=this.left,M=this.right):(A=this.top,M=this.bottom,b=!b),this._startPixel=A,this._endPixel=M,this._reversePixels=b,this._length=M-A,this._alignToPixels=this.options.alignToPixels}afterUpdate(){y(this.options.afterUpdate,[this])}beforeSetDimensions(){y(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){y(this.options.afterSetDimensions,[this])}_callHooks(b){this.chart.notifyPlugins(b,this.getContext()),y(this.options[b],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){y(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(b){const A=this.options.ticks;let M,R,I;for(M=0,R=b.length;M<R;M++)I=b[M],I.label=y(A.callback,[I.value,M,b],this)}afterTickToLabelConversion(){y(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){y(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const b=this.options,A=b.ticks,M=this.ticks.length,R=A.minRotation||0,I=A.maxRotation;let N=R,z,H,Y;if(!this._isVisible()||!A.display||R>=I||M<=1||!this.isHorizontal()){this.labelRotation=R;return}const Z=this._getLabelSizes(),ne=Z.widest.width,ue=Z.highest.height,fe=ze(this.chart.width-ne,0,this.maxWidth);z=b.offset?this.maxWidth/M:fe/(M-1),ne+6>z&&(z=fe/(M-(b.offset?.5:1)),H=this.maxHeight-jr(b.grid)-A.padding-vo(b.title,this.chart.options.font),Y=Math.sqrt(ne*ne+ue*ue),N=Ge(Math.min(Math.asin(ze((Z.highest.height+6)/z,-1,1)),Math.asin(ze(H/Y,-1,1))-Math.asin(ze(ue/Y,-1,1)))),N=Math.max(R,Math.min(I,N))),this.labelRotation=N}afterCalculateLabelRotation(){y(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){y(this.options.beforeFit,[this])}fit(){const b={width:0,height:0},{chart:A,options:{ticks:M,title:R,grid:I}}=this,N=this._isVisible(),z=this.isHorizontal();if(N){const H=vo(R,A.options.font);if(z?(b.width=this.maxWidth,b.height=jr(I)+H):(b.height=this.maxHeight,b.width=jr(I)+H),M.display&&this.ticks.length){const{first:Y,last:Z,widest:ne,highest:ue}=this._getLabelSizes(),fe=M.padding*2,ve=Le(this.labelRotation),Me=Math.cos(ve),Oe=Math.sin(ve);if(z){const Be=M.mirror?0:Oe*ne.width+Me*ue.height;b.height=Math.min(this.maxHeight,b.height+Be+fe)}else{const Be=M.mirror?0:Me*ne.width+Oe*ue.height;b.width=Math.min(this.maxWidth,b.width+Be+fe)}this._calculatePadding(Y,Z,Oe,Me)}}this._handleMargins(),z?(this.width=this._length=A.width-this._margins.left-this._margins.right,this.height=b.height):(this.width=b.width,this.height=this._length=A.height-this._margins.top-this._margins.bottom)}_calculatePadding(b,A,M,R){const{ticks:{align:I,padding:N},position:z}=this.options,H=this.labelRotation!==0,Y=z!=="top"&&this.axis==="x";if(this.isHorizontal()){const Z=this.getPixelForTick(0)-this.left,ne=this.right-this.getPixelForTick(this.ticks.length-1);let ue=0,fe=0;H?Y?(ue=R*b.width,fe=M*A.height):(ue=M*b.height,fe=R*A.width):I==="start"?fe=A.width:I==="end"?ue=b.width:I!=="inner"&&(ue=b.width/2,fe=A.width/2),this.paddingLeft=Math.max((ue-Z+N)*this.width/(this.width-Z),0),this.paddingRight=Math.max((fe-ne+N)*this.width/(this.width-ne),0)}else{let Z=A.height/2,ne=b.height/2;I==="start"?(Z=0,ne=b.height):I==="end"&&(Z=A.height,ne=0),this.paddingTop=Z+N,this.paddingBottom=ne+N}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){y(this.options.afterFit,[this])}isHorizontal(){const{axis:b,position:A}=this.options;return A==="top"||A==="bottom"||b==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(b){this.beforeTickToLabelConversion(),this.generateTickLabels(b);let A,M;for(A=0,M=b.length;A<M;A++)s(b[A].label)&&(b.splice(A,1),M--,A--);this.afterTickToLabelConversion()}_getLabelSizes(){let b=this._labelSizes;if(!b){const A=this.options.ticks.sampleSize;let M=this.ticks;A<M.length&&(M=po(M,A)),this._labelSizes=b=this._computeLabelSizes(M,M.length)}return b}_computeLabelSizes(b,A){const{ctx:M,_longestTextCache:R}=this,I=[],N=[];let z=0,H=0,Y,Z,ne,ue,fe,ve,Me,Oe,Be,Ye,nt;for(Y=0;Y<A;++Y){if(ue=b[Y].label,fe=this._resolveTickFontOptions(Y),M.font=ve=fe.string,Me=R[ve]=R[ve]||{data:{},gc:[]},Oe=fe.lineHeight,Be=Ye=0,!s(ue)&&!l(ue))Be=er(M,Me.data,Me.gc,Be,ue),Ye=Oe;else if(l(ue))for(Z=0,ne=ue.length;Z<ne;++Z)nt=ue[Z],!s(nt)&&!l(nt)&&(Be=er(M,Me.data,Me.gc,Be,nt),Ye+=Oe);I.push(Be),N.push(Ye),z=Math.max(Be,z),H=Math.max(Ye,H)}nl(R,A);const et=I.indexOf(z),Ke=N.indexOf(H),ft=pt=>({width:I[pt]||0,height:N[pt]||0});return{first:ft(0),last:ft(A-1),widest:ft(et),highest:ft(Ke),widths:I,heights:N}}getLabelForValue(b){return b}getPixelForValue(b,A){return NaN}getValueForPixel(b){}getPixelForTick(b){const A=this.ticks;return b<0||b>A.length-1?null:this.getPixelForValue(A[b].value)}getPixelForDecimal(b){this._reversePixels&&(b=1-b);const A=this._startPixel+b*this._length;return Fe(this._alignToPixels?xn(this.chart,A,0):A)}getDecimalForPixel(b){const A=(b-this._startPixel)/this._length;return this._reversePixels?1-A:A}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:b,max:A}=this;return b<0&&A<0?A:b>0&&A>0?b:0}getContext(b){const A=this.ticks||[];if(b>=0&&b<A.length){const M=A[b];return M.$context||(M.$context=il(this.getContext(),b,M))}return this.$context||(this.$context=rl(this.chart.getContext(),this))}_tickSize(){const b=this.options.ticks,A=Le(this.labelRotation),M=Math.abs(Math.cos(A)),R=Math.abs(Math.sin(A)),I=this._getLabelSizes(),N=b.autoSkipPadding||0,z=I?I.widest.width+N:0,H=I?I.highest.height+N:0;return this.isHorizontal()?H*M>z*R?z/M:H/R:H*R<z*M?H/M:z/R}_isVisible(){const b=this.options.display;return b!=="auto"?!!b:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(b){const A=this.axis,M=this.chart,R=this.options,{grid:I,position:N}=R,z=I.offset,H=this.isHorizontal(),Z=this.ticks.length+(z?1:0),ne=jr(I),ue=[],fe=I.setContext(this.getContext()),ve=fe.drawBorder?fe.borderWidth:0,Me=ve/2,Oe=function(It){return xn(M,It,ve)};let Be,Ye,nt,et,Ke,ft,pt,Et,Tt,zt,Ht,Vt;if(N==="top")Be=Oe(this.bottom),ft=this.bottom-ne,Et=Be-Me,zt=Oe(b.top)+Me,Vt=b.bottom;else if(N==="bottom")Be=Oe(this.top),zt=b.top,Vt=Oe(b.bottom)-Me,ft=Be+Me,Et=this.top+ne;else if(N==="left")Be=Oe(this.right),Ke=this.right-ne,pt=Be-Me,Tt=Oe(b.left)+Me,Ht=b.right;else if(N==="right")Be=Oe(this.left),Tt=b.left,Ht=Oe(b.right)-Me,Ke=Be+Me,pt=this.left+ne;else if(A==="x"){if(N==="center")Be=Oe((b.top+b.bottom)/2+.5);else if(c(N)){const It=Object.keys(N)[0],nn=N[It];Be=Oe(this.chart.scales[It].getPixelForValue(nn))}zt=b.top,Vt=b.bottom,ft=Be+Me,Et=ft+ne}else if(A==="y"){if(N==="center")Be=Oe((b.left+b.right)/2);else if(c(N)){const It=Object.keys(N)[0],nn=N[It];Be=Oe(this.chart.scales[It].getPixelForValue(nn))}Ke=Be-Me,pt=Ke-ne,Tt=b.left,Ht=b.right}const tn=f(R.ticks.maxTicksLimit,Z),cn=Math.max(1,Math.ceil(Z/tn));for(Ye=0;Ye<Z;Ye+=cn){const It=I.setContext(this.getContext(Ye)),nn=It.lineWidth,Zt=It.color,ur=It.borderDash||[],ka=It.borderDashOffset,Ar=It.tickWidth,Xi=It.tickColor,wr=It.tickBorderDash||[],Qr=It.tickBorderDashOffset;nt=tl(this,Ye,z),nt!==void 0&&(et=xn(M,nt,nn),H?Ke=pt=Tt=Ht=et:ft=Et=zt=Vt=et,ue.push({tx1:Ke,ty1:ft,tx2:pt,ty2:Et,x1:Tt,y1:zt,x2:Ht,y2:Vt,width:nn,color:Zt,borderDash:ur,borderDashOffset:ka,tickWidth:Ar,tickColor:Xi,tickBorderDash:wr,tickBorderDashOffset:Qr}))}return this._ticksLength=Z,this._borderValue=Be,ue}_computeLabelItems(b){const A=this.axis,M=this.options,{position:R,ticks:I}=M,N=this.isHorizontal(),z=this.ticks,{align:H,crossAlign:Y,padding:Z,mirror:ne}=I,ue=jr(M.grid),fe=ue+Z,ve=ne?-Z:fe,Me=-Le(this.labelRotation),Oe=[];let Be,Ye,nt,et,Ke,ft,pt,Et,Tt,zt,Ht,Vt,tn="middle";if(R==="top")ft=this.bottom-ve,pt=this._getXAxisLabelAlignment();else if(R==="bottom")ft=this.top+ve,pt=this._getXAxisLabelAlignment();else if(R==="left"){const It=this._getYAxisLabelAlignment(ue);pt=It.textAlign,Ke=It.x}else if(R==="right"){const It=this._getYAxisLabelAlignment(ue);pt=It.textAlign,Ke=It.x}else if(A==="x"){if(R==="center")ft=(b.top+b.bottom)/2+fe;else if(c(R)){const It=Object.keys(R)[0],nn=R[It];ft=this.chart.scales[It].getPixelForValue(nn)+fe}pt=this._getXAxisLabelAlignment()}else if(A==="y"){if(R==="center")Ke=(b.left+b.right)/2-fe;else if(c(R)){const It=Object.keys(R)[0],nn=R[It];Ke=this.chart.scales[It].getPixelForValue(nn)}pt=this._getYAxisLabelAlignment(ue).textAlign}A==="y"&&(H==="start"?tn="top":H==="end"&&(tn="bottom"));const cn=this._getLabelSizes();for(Be=0,Ye=z.length;Be<Ye;++Be){nt=z[Be],et=nt.label;const It=I.setContext(this.getContext(Be));Et=this.getPixelForTick(Be)+I.labelOffset,Tt=this._resolveTickFontOptions(Be),zt=Tt.lineHeight,Ht=l(et)?et.length:1;const nn=Ht/2,Zt=It.color,ur=It.textStrokeColor,ka=It.textStrokeWidth;let Ar=pt;N?(Ke=Et,pt==="inner"&&(Be===Ye-1?Ar=this.options.reverse?"left":"right":Be===0?Ar=this.options.reverse?"right":"left":Ar="center"),R==="top"?Y==="near"||Me!==0?Vt=-Ht*zt+zt/2:Y==="center"?Vt=-cn.highest.height/2-nn*zt+zt:Vt=-cn.highest.height+zt/2:Y==="near"||Me!==0?Vt=zt/2:Y==="center"?Vt=cn.highest.height/2-nn*zt:Vt=cn.highest.height-Ht*zt,ne&&(Vt*=-1)):(ft=Et,Vt=(1-Ht)*zt/2);let Xi;if(It.showLabelBackdrop){const wr=en(It.backdropPadding),Qr=cn.heights[Be],Ba=cn.widths[Be];let Va=ft+Vt-wr.top,Fa=Ke-wr.left;switch(tn){case"middle":Va-=Qr/2;break;case"bottom":Va-=Qr;break}switch(pt){case"center":Fa-=Ba/2;break;case"right":Fa-=Ba;break}Xi={left:Fa,top:Va,width:Ba+wr.width,height:Qr+wr.height,color:It.backdropColor}}Oe.push({rotation:Me,label:et,font:Tt,color:Zt,strokeColor:ur,strokeWidth:ka,textOffset:Vt,textAlign:Ar,textBaseline:tn,translation:[Ke,ft],backdrop:Xi})}return Oe}_getXAxisLabelAlignment(){const{position:b,ticks:A}=this.options;if(-Le(this.labelRotation))return b==="top"?"left":"right";let R="center";return A.align==="start"?R="left":A.align==="end"?R="right":A.align==="inner"&&(R="inner"),R}_getYAxisLabelAlignment(b){const{position:A,ticks:{crossAlign:M,mirror:R,padding:I}}=this.options,N=this._getLabelSizes(),z=b+I,H=N.widest.width;let Y,Z;return A==="left"?R?(Z=this.right+I,M==="near"?Y="left":M==="center"?(Y="center",Z+=H/2):(Y="right",Z+=H)):(Z=this.right-z,M==="near"?Y="right":M==="center"?(Y="center",Z-=H/2):(Y="left",Z=this.left)):A==="right"?R?(Z=this.left+I,M==="near"?Y="right":M==="center"?(Y="center",Z-=H/2):(Y="left",Z-=H)):(Z=this.left+z,M==="near"?Y="left":M==="center"?(Y="center",Z+=H/2):(Y="right",Z=this.right)):Y="right",{textAlign:Y,x:Z}}_computeLabelArea(){if(this.options.ticks.mirror)return;const b=this.chart,A=this.options.position;if(A==="left"||A==="right")return{top:0,left:this.left,bottom:b.height,right:this.right};if(A==="top"||A==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:b.width}}drawBackground(){const{ctx:b,options:{backgroundColor:A},left:M,top:R,width:I,height:N}=this;A&&(b.save(),b.fillStyle=A,b.fillRect(M,R,I,N),b.restore())}getLineWidthForValue(b){const A=this.options.grid;if(!this._isVisible()||!A.display)return 0;const R=this.ticks.findIndex(I=>I.value===b);return R>=0?A.setContext(this.getContext(R)).lineWidth:0}drawGrid(b){const A=this.options.grid,M=this.ctx,R=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(b));let I,N;const z=(H,Y,Z)=>{!Z.width||!Z.color||(M.save(),M.lineWidth=Z.width,M.strokeStyle=Z.color,M.setLineDash(Z.borderDash||[]),M.lineDashOffset=Z.borderDashOffset,M.beginPath(),M.moveTo(H.x,H.y),M.lineTo(Y.x,Y.y),M.stroke(),M.restore())};if(A.display)for(I=0,N=R.length;I<N;++I){const H=R[I];A.drawOnChartArea&&z({x:H.x1,y:H.y1},{x:H.x2,y:H.y2},H),A.drawTicks&&z({x:H.tx1,y:H.ty1},{x:H.tx2,y:H.ty2},{color:H.tickColor,width:H.tickWidth,borderDash:H.tickBorderDash,borderDashOffset:H.tickBorderDashOffset})}}drawBorder(){const{chart:b,ctx:A,options:{grid:M}}=this,R=M.setContext(this.getContext()),I=M.drawBorder?R.borderWidth:0;if(!I)return;const N=M.setContext(this.getContext(0)).lineWidth,z=this._borderValue;let H,Y,Z,ne;this.isHorizontal()?(H=xn(b,this.left,I)-I/2,Y=xn(b,this.right,N)+N/2,Z=ne=z):(Z=xn(b,this.top,I)-I/2,ne=xn(b,this.bottom,N)+N/2,H=Y=z),A.save(),A.lineWidth=R.borderWidth,A.strokeStyle=R.borderColor,A.beginPath(),A.moveTo(H,Z),A.lineTo(Y,ne),A.stroke(),A.restore()}drawLabels(b){if(!this.options.ticks.display)return;const M=this.ctx,R=this._computeLabelArea();R&&tr(M,R);const I=this._labelItems||(this._labelItems=this._computeLabelItems(b));let N,z;for(N=0,z=I.length;N<z;++N){const H=I[N],Y=H.font,Z=H.label;H.backdrop&&(M.fillStyle=H.backdrop.color,M.fillRect(H.backdrop.left,H.backdrop.top,H.backdrop.width,H.backdrop.height));let ne=H.textOffset;An(M,Z,0,ne,Y,H)}R&&Tn(M)}drawTitle(){const{ctx:b,options:{position:A,title:M,reverse:R}}=this;if(!M.display)return;const I=qt(M.font),N=en(M.padding),z=M.align;let H=I.lineHeight/2;A==="bottom"||A==="center"||c(A)?(H+=N.bottom,l(M.text)&&(H+=I.lineHeight*(M.text.length-1))):H+=N.top;const{titleX:Y,titleY:Z,maxWidth:ne,rotation:ue}=ol(this,H,A,z);An(b,M.text,0,0,I,{color:M.color,maxWidth:ne,rotation:ue,textAlign:al(z,A,R),textBaseline:"middle",translation:[Y,Z]})}draw(b){this._isVisible()&&(this.drawBackground(),this.drawGrid(b),this.drawBorder(),this.drawTitle(),this.drawLabels(b))}_layers(){const b=this.options,A=b.ticks&&b.ticks.z||0,M=f(b.grid&&b.grid.z,-1);return!this._isVisible()||this.draw!==Xn.prototype.draw?[{z:A,draw:R=>{this.draw(R)}}]:[{z:M,draw:R=>{this.drawBackground(),this.drawGrid(R),this.drawTitle()}},{z:M+1,draw:()=>{this.drawBorder()}},{z:A,draw:R=>{this.drawLabels(R)}}]}getMatchingVisibleMetas(b){const A=this.chart.getSortedVisibleDatasetMetas(),M=this.axis+"AxisID",R=[];let I,N;for(I=0,N=A.length;I<N;++I){const z=A[I];z[M]===this.id&&(!b||z.type===b)&&R.push(z)}return R}_resolveTickFontOptions(b){const A=this.options.ticks.setContext(this.getContext(b));return qt(A.font)}_maxDigits(){const b=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/b}}class Pi{constructor(b,A,M){this.type=b,this.scope=A,this.override=M,this.items=Object.create(null)}isForType(b){return Object.prototype.isPrototypeOf.call(this.type.prototype,b.prototype)}register(b){const A=Object.getPrototypeOf(b);let M;cl(A)&&(M=this.register(A));const R=this.items,I=b.id,N=this.scope+"."+I;if(!I)throw new Error("class does not have id: "+b);return I in R||(R[I]=b,sl(b,N,M),this.override&&Mt.override(b.id,b.overrides)),N}get(b){return this.items[b]}unregister(b){const A=this.items,M=b.id,R=this.scope;M in A&&delete A[M],R&&M in Mt[R]&&(delete Mt[R][M],this.override&&delete Xt[M])}}function sl(C,b,A){const M=E(Object.create(null),[A?Mt.get(A):{},Mt.get(b),C.defaults]);Mt.set(b,M),C.defaultRoutes&&ll(b,C.defaultRoutes),C.descriptors&&Mt.describe(b,C.descriptors)}function ll(C,b){Object.keys(b).forEach(A=>{const M=A.split("."),R=M.pop(),I=[C].concat(M).join("."),N=b[A].split("."),z=N.pop(),H=N.join(".");Mt.route(I,R,H,z)})}function cl(C){return"id"in C&&"defaults"in C}class ul{constructor(){this.controllers=new Pi(fn,"datasets",!0),this.elements=new Pi(pn,"elements"),this.plugins=new Pi(Object,"plugins"),this.scales=new Pi(Xn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...b){this._each("register",b)}remove(...b){this._each("unregister",b)}addControllers(...b){this._each("register",b,this.controllers)}addElements(...b){this._each("register",b,this.elements)}addPlugins(...b){this._each("register",b,this.plugins)}addScales(...b){this._each("register",b,this.scales)}getController(b){return this._get(b,this.controllers,"controller")}getElement(b){return this._get(b,this.elements,"element")}getPlugin(b){return this._get(b,this.plugins,"plugin")}getScale(b){return this._get(b,this.scales,"scale")}removeControllers(...b){this._each("unregister",b,this.controllers)}removeElements(...b){this._each("unregister",b,this.elements)}removePlugins(...b){this._each("unregister",b,this.plugins)}removeScales(...b){this._each("unregister",b,this.scales)}_each(b,A,M){[...A].forEach(R=>{const I=M||this._getRegistryForType(R);M||I.isForType(R)||I===this.plugins&&R.id?this._exec(b,I,R):_(R,N=>{const z=M||this._getRegistryForType(N);this._exec(b,z,N)})})}_exec(b,A,M){const R=F(b);y(M["before"+R],[],M),A[b](M),y(M["after"+R],[],M)}_getRegistryForType(b){for(let A=0;A<this._typedRegistries.length;A++){const M=this._typedRegistries[A];if(M.isForType(b))return M}return this.plugins}_get(b,A,M){const R=A.get(b);if(R===void 0)throw new Error('"'+b+'" is not a registered '+M+".");return R}}var _n=new ul;class hl{constructor(){this._init=[]}notify(b,A,M,R){A==="beforeInit"&&(this._init=this._createDescriptors(b,!0),this._notify(this._init,b,"install"));const I=R?this._descriptors(b).filter(R):this._descriptors(b),N=this._notify(I,b,A,M);return A==="afterDestroy"&&(this._notify(I,b,"stop"),this._notify(this._init,b,"uninstall")),N}_notify(b,A,M,R){R=R||{};for(const I of b){const N=I.plugin,z=N[M],H=[A,R,I.options];if(y(z,H,N)===!1&&R.cancelable)return!1}return!0}invalidate(){s(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(b){if(this._cache)return this._cache;const A=this._cache=this._createDescriptors(b);return this._notifyStateChanges(b),A}_createDescriptors(b,A){const M=b&&b.config,R=f(M.options&&M.options.plugins,{}),I=dl(M);return R===!1&&!A?[]:pl(b,I,R,A)}_notifyStateChanges(b){const A=this._oldCache||[],M=this._cache,R=(I,N)=>I.filter(z=>!N.some(H=>z.plugin.id===H.plugin.id));this._notify(R(A,M),b,"stop"),this._notify(R(M,A),b,"start")}}function dl(C){const b={},A=[],M=Object.keys(_n.plugins.items);for(let I=0;I<M.length;I++)A.push(_n.getPlugin(M[I]));const R=C.plugins||[];for(let I=0;I<R.length;I++){const N=R[I];A.indexOf(N)===-1&&(A.push(N),b[N.id]=!0)}return{plugins:A,localIds:b}}function fl(C,b){return!b&&C===!1?null:C===!0?{}:C}function pl(C,{plugins:b,localIds:A},M,R){const I=[],N=C.getContext();for(const z of b){const H=z.id,Y=fl(M[H],R);Y!==null&&I.push({plugin:z,options:vl(C.config,{plugin:z,local:A[H]},Y,N)})}return I}function vl(C,{plugin:b,local:A},M,R){const I=C.pluginScopeKeys(b),N=C.getOptionScopes(M,I);return A&&b.defaults&&N.push(b.defaults),C.createResolver(N,R,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ma(C,b){const A=Mt.datasets[C]||{};return((b.datasets||{})[C]||{}).indexAxis||b.indexAxis||A.indexAxis||"x"}function gl(C,b){let A=C;return C==="_index_"?A=b:C==="_value_"&&(A=b==="x"?"y":"x"),A}function ml(C,b){return C===b?"_index_":"_value_"}function yl(C){if(C==="top"||C==="bottom")return"x";if(C==="left"||C==="right")return"y"}function ya(C,b){return C==="x"||C==="y"?C:b.axis||yl(b.position)||C.charAt(0).toLowerCase()}function _l(C,b){const A=Xt[C.type]||{scales:{}},M=b.scales||{},R=ma(C.type,b),I=Object.create(null),N=Object.create(null);return Object.keys(M).forEach(z=>{const H=M[z];if(!c(H))return console.error(`Invalid scale configuration for scale: ${z}`);if(H._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${z}`);const Y=ya(z,H),Z=ml(Y,R),ne=A.scales||{};I[Y]=I[Y]||z,N[z]=P(Object.create(null),[{axis:Y},H,ne[Y],ne[Z]])}),C.data.datasets.forEach(z=>{const H=z.type||C.type,Y=z.indexAxis||ma(H,b),ne=(Xt[H]||{}).scales||{};Object.keys(ne).forEach(ue=>{const fe=gl(ue,Y),ve=z[fe+"AxisID"]||I[fe]||fe;N[ve]=N[ve]||Object.create(null),P(N[ve],[{axis:fe},M[ve],ne[ue]])})}),Object.keys(N).forEach(z=>{const H=N[z];P(H,[Mt.scales[H.type],Mt.scale])}),N}function go(C){const b=C.options||(C.options={});b.plugins=f(b.plugins,{}),b.scales=_l(C,b)}function mo(C){return C=C||{},C.datasets=C.datasets||[],C.labels=C.labels||[],C}function Sl(C){return C=C||{},C.data=mo(C.data),go(C),C}const yo=new Map,_o=new Set;function Ri(C,b){let A=yo.get(C);return A||(A=b(),yo.set(C,A),_o.add(A)),A}const qr=(C,b,A)=>{const M=O(b,A);M!==void 0&&C.add(M)};class bl{constructor(b){this._config=Sl(b),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(b){this._config.type=b}get data(){return this._config.data}set data(b){this._config.data=mo(b)}get options(){return this._config.options}set options(b){this._config.options=b}get plugins(){return this._config.plugins}update(){const b=this._config;this.clearCache(),go(b)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(b){return Ri(b,()=>[[`datasets.${b}`,""]])}datasetAnimationScopeKeys(b,A){return Ri(`${b}.transition.${A}`,()=>[[`datasets.${b}.transitions.${A}`,`transitions.${A}`],[`datasets.${b}`,""]])}datasetElementScopeKeys(b,A){return Ri(`${b}-${A}`,()=>[[`datasets.${b}.elements.${A}`,`datasets.${b}`,`elements.${A}`,""]])}pluginScopeKeys(b){const A=b.id,M=this.type;return Ri(`${M}-plugin-${A}`,()=>[[`plugins.${A}`,...b.additionalOptionScopes||[]]])}_cachedScopes(b,A){const M=this._scopeCache;let R=M.get(b);return(!R||A)&&(R=new Map,M.set(b,R)),R}getOptionScopes(b,A,M){const{options:R,type:I}=this,N=this._cachedScopes(b,M),z=N.get(A);if(z)return z;const H=new Set;A.forEach(Z=>{b&&(H.add(b),Z.forEach(ne=>qr(H,b,ne))),Z.forEach(ne=>qr(H,R,ne)),Z.forEach(ne=>qr(H,Xt[I]||{},ne)),Z.forEach(ne=>qr(H,Mt,ne)),Z.forEach(ne=>qr(H,gn,ne))});const Y=Array.from(H);return Y.length===0&&Y.push(Object.create(null)),_o.has(A)&&N.set(A,Y),Y}chartOptionScopes(){const{options:b,type:A}=this;return[b,Xt[A]||{},Mt.datasets[A]||{},{type:A},Mt,gn]}resolveNamedOptions(b,A,M,R=[""]){const I={$shared:!0},{resolver:N,subPrefixes:z}=So(this._resolverCache,b,R);let H=N;if(Tl(N,A)){I.$shared=!1,M=G(M)?M():M;const Y=this.createResolver(b,M,z);H=Ln(N,M,Y)}for(const Y of A)I[Y]=H[Y];return I}createResolver(b,A,M=[""],R){const{resolver:I}=So(this._resolverCache,b,M);return c(A)?Ln(I,A,void 0,R):I}}function So(C,b,A){let M=C.get(b);M||(M=new Map,C.set(b,M));const R=A.join();let I=M.get(R);return I||(I={resolver:nr(b,A),subPrefixes:A.filter(z=>!z.toLowerCase().includes("hover"))},M.set(R,I)),I}const xl=C=>c(C)&&Object.getOwnPropertyNames(C).reduce((b,A)=>b||G(C[A]),!1);function Tl(C,b){const{isScriptable:A,isIndexable:M}=Lr(C);for(const R of b){const I=A(R),N=M(R),z=(N||I)&&C[R];if(I&&(G(z)||xl(z))||N&&l(z))return!0}return!1}var Al="3.9.1";const wl=["top","bottom","left","right","chartArea"];function bo(C,b){return C==="top"||C==="bottom"||wl.indexOf(C)===-1&&b==="x"}function xo(C,b){return function(A,M){return A[C]===M[C]?A[b]-M[b]:A[C]-M[C]}}function To(C){const b=C.chart,A=b.options.animation;b.notifyPlugins("afterRender"),y(A&&A.onComplete,[C],b)}function Cl(C){const b=C.chart,A=b.options.animation;y(A&&A.onProgress,[C],b)}function Ao(C){return Qt()&&typeof C=="string"?C=document.getElementById(C):C&&C.length&&(C=C[0]),C&&C.canvas&&(C=C.canvas),C}const Di={},wo=C=>{const b=Ao(C);return Object.values(Di).filter(A=>A.canvas===b).pop()};function Ml(C,b,A){const M=Object.keys(C);for(const R of M){const I=+R;if(I>=b){const N=C[R];delete C[R],(A>0||I>b)&&(C[I+A]=N)}}}function El(C,b,A,M){return!A||C.type==="mouseout"?null:M?b:C}class Kt{constructor(b,A){const M=this.config=new bl(A),R=Ao(b),I=wo(R);if(I)throw new Error("Canvas is already in use. Chart with ID '"+I.id+"' must be destroyed before the canvas with ID '"+I.canvas.id+"' can be reused.");const N=M.createResolver(M.chartOptionScopes(),this.getContext());this.platform=new(M.platform||eo(R)),this.platform.updateConfig(M);const z=this.platform.acquireContext(R,N.aspectRatio),H=z&&z.canvas,Y=H&&H.height,Z=H&&H.width;if(this.id=o(),this.ctx=z,this.canvas=H,this.width=Z,this.height=Y,this._options=N,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new hl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gt(ne=>this.update(ne),N.resizeDelay||0),this._dataChanges=[],Di[this.id]=this,!z||!H){console.error("Failed to create chart: can't acquire context from the given item");return}ot.listen(this,"complete",To),ot.listen(this,"progress",Cl),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:b,maintainAspectRatio:A},width:M,height:R,_aspectRatio:I}=this;return s(b)?A&&I?I:R?M/R:null:b}get data(){return this.config.data}set data(b){this.config.data=b}get options(){return this._options}set options(b){this.config.options=b}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Er(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rr(this.canvas,this.ctx),this}stop(){return ot.stop(this),this}resize(b,A){ot.running(this)?this._resizeBeforeDraw={width:b,height:A}:this._resize(b,A)}_resize(b,A){const M=this.options,R=this.canvas,I=M.maintainAspectRatio&&this.aspectRatio,N=this.platform.getMaximumSize(R,b,A,I),z=M.devicePixelRatio||this.platform.getDevicePixelRatio(),H=this.width?"resize":"attach";this.width=N.width,this.height=N.height,this._aspectRatio=this.aspectRatio,Er(this,z,!0)&&(this.notifyPlugins("resize",{size:N}),y(M.onResize,[this,N],this),this.attached&&this._doResize(H)&&this.render())}ensureScalesHaveIDs(){const A=this.options.scales||{};_(A,(M,R)=>{M.id=R})}buildOrUpdateScales(){const b=this.options,A=b.scales,M=this.scales,R=Object.keys(M).reduce((N,z)=>(N[z]=!1,N),{});let I=[];A&&(I=I.concat(Object.keys(A).map(N=>{const z=A[N],H=ya(N,z),Y=H==="r",Z=H==="x";return{options:z,dposition:Y?"chartArea":Z?"bottom":"left",dtype:Y?"radialLinear":Z?"category":"linear"}}))),_(I,N=>{const z=N.options,H=z.id,Y=ya(H,z),Z=f(z.type,N.dtype);(z.position===void 0||bo(z.position,Y)!==bo(N.dposition))&&(z.position=N.dposition),R[H]=!0;let ne=null;if(H in M&&M[H].type===Z)ne=M[H];else{const ue=_n.getScale(Z);ne=new ue({id:H,type:Z,ctx:this.ctx,chart:this}),M[ne.id]=ne}ne.init(z,b)}),_(R,(N,z)=>{N||delete M[z]}),_(M,N=>{on.configure(this,N,N.options),on.addBox(this,N)})}_updateMetasets(){const b=this._metasets,A=this.data.datasets.length,M=b.length;if(b.sort((R,I)=>R.index-I.index),M>A){for(let R=A;R<M;++R)this._destroyDatasetMeta(R);b.splice(A,M-A)}this._sortedMetasets=b.slice(0).sort(xo("order","index"))}_removeUnreferencedMetasets(){const{_metasets:b,data:{datasets:A}}=this;b.length>A.length&&delete this._stacks,b.forEach((M,R)=>{A.filter(I=>I===M._dataset).length===0&&this._destroyDatasetMeta(R)})}buildOrUpdateControllers(){const b=[],A=this.data.datasets;let M,R;for(this._removeUnreferencedMetasets(),M=0,R=A.length;M<R;M++){const I=A[M];let N=this.getDatasetMeta(M);const z=I.type||this.config.type;if(N.type&&N.type!==z&&(this._destroyDatasetMeta(M),N=this.getDatasetMeta(M)),N.type=z,N.indexAxis=I.indexAxis||ma(z,this.options),N.order=I.order||0,N.index=M,N.label=""+I.label,N.visible=this.isDatasetVisible(M),N.controller)N.controller.updateIndex(M),N.controller.linkScales();else{const H=_n.getController(z),{datasetElementType:Y,dataElementType:Z}=Mt.datasets[z];Object.assign(H.prototype,{dataElementType:_n.getElement(Z),datasetElementType:Y&&_n.getElement(Y)}),N.controller=new H(this,M),b.push(N.controller)}}return this._updateMetasets(),b}_resetElements(){_(this.data.datasets,(b,A)=>{this.getDatasetMeta(A).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(b){const A=this.config;A.update();const M=this._options=A.createResolver(A.chartOptionScopes(),this.getContext()),R=this._animationsDisabled=!M.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:b,cancelable:!0})===!1)return;const I=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let N=0;for(let Y=0,Z=this.data.datasets.length;Y<Z;Y++){const{controller:ne}=this.getDatasetMeta(Y),ue=!R&&I.indexOf(ne)===-1;ne.buildOrUpdateElements(ue),N=Math.max(+ne.getMaxOverflow(),N)}N=this._minPadding=M.layout.autoPadding?N:0,this._updateLayout(N),R||_(I,Y=>{Y.reset()}),this._updateDatasets(b),this.notifyPlugins("afterUpdate",{mode:b}),this._layers.sort(xo("z","_idx"));const{_active:z,_lastEvent:H}=this;H?this._eventHandler(H,!0):z.length&&this._updateHoverStyles(z,z,!0),this.render()}_updateScales(){_(this.scales,b=>{on.removeBox(this,b)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const b=this.options,A=new Set(Object.keys(this._listeners)),M=new Set(b.events);(!W(A,M)||!!this._responsiveListeners!==b.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:b}=this,A=this._getUniformDataChanges()||[];for(const{method:M,start:R,count:I}of A){const N=M==="_removeElements"?-I:I;Ml(b,R,N)}}_getUniformDataChanges(){const b=this._dataChanges;if(!b||!b.length)return;this._dataChanges=[];const A=this.data.datasets.length,M=I=>new Set(b.filter(N=>N[0]===I).map((N,z)=>z+","+N.splice(1).join(","))),R=M(0);for(let I=1;I<A;I++)if(!W(R,M(I)))return;return Array.from(R).map(I=>I.split(",")).map(I=>({method:I[1],start:+I[2],count:+I[3]}))}_updateLayout(b){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,b);const A=this.chartArea,M=A.width<=0||A.height<=0;this._layers=[],_(this.boxes,R=>{M&&R.position==="chartArea"||(R.configure&&R.configure(),this._layers.push(...R._layers()))},this),this._layers.forEach((R,I)=>{R._idx=I}),this.notifyPlugins("afterLayout")}_updateDatasets(b){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:b,cancelable:!0})!==!1){for(let A=0,M=this.data.datasets.length;A<M;++A)this.getDatasetMeta(A).controller.configure();for(let A=0,M=this.data.datasets.length;A<M;++A)this._updateDataset(A,G(b)?b({datasetIndex:A}):b);this.notifyPlugins("afterDatasetsUpdate",{mode:b})}}_updateDataset(b,A){const M=this.getDatasetMeta(b),R={meta:M,index:b,mode:A,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",R)!==!1&&(M.controller._update(A),R.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",R))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ot.has(this)?this.attached&&!ot.running(this)&&ot.start(this):(this.draw(),To({chart:this})))}draw(){let b;if(this._resizeBeforeDraw){const{width:M,height:R}=this._resizeBeforeDraw;this._resize(M,R),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const A=this._layers;for(b=0;b<A.length&&A[b].z<=0;++b)A[b].draw(this.chartArea);for(this._drawDatasets();b<A.length;++b)A[b].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(b){const A=this._sortedMetasets,M=[];let R,I;for(R=0,I=A.length;R<I;++R){const N=A[R];(!b||N.visible)&&M.push(N)}return M}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const b=this.getSortedVisibleDatasetMetas();for(let A=b.length-1;A>=0;--A)this._drawDataset(b[A]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(b){const A=this.ctx,M=b._clip,R=!M.disabled,I=this.chartArea,N={meta:b,index:b.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",N)!==!1&&(R&&tr(A,{left:M.left===!1?0:I.left-M.left,right:M.right===!1?this.width:I.right+M.right,top:M.top===!1?0:I.top-M.top,bottom:M.bottom===!1?this.height:I.bottom+M.bottom}),b.controller.draw(),R&&Tn(A),N.cancelable=!1,this.notifyPlugins("afterDatasetDraw",N))}isPointInArea(b){return Un(b,this.chartArea,this._minPadding)}getElementsAtEventForMode(b,A,M,R){const I=za.modes[A];return typeof I=="function"?I(this,b,M,R):[]}getDatasetMeta(b){const A=this.data.datasets[b],M=this._metasets;let R=M.filter(I=>I&&I._dataset===A).pop();return R||(R={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:A&&A.order||0,index:b,_dataset:A,_parsed:[],_sorted:!1},M.push(R)),R}getContext(){return this.$context||(this.$context=yn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(b){const A=this.data.datasets[b];if(!A)return!1;const M=this.getDatasetMeta(b);return typeof M.hidden=="boolean"?!M.hidden:!A.hidden}setDatasetVisibility(b,A){const M=this.getDatasetMeta(b);M.hidden=!A}toggleDataVisibility(b){this._hiddenIndices[b]=!this._hiddenIndices[b]}getDataVisibility(b){return!this._hiddenIndices[b]}_updateVisibility(b,A,M){const R=M?"show":"hide",I=this.getDatasetMeta(b),N=I.controller._resolveAnimations(void 0,R);U(A)?(I.data[A].hidden=!M,this.update()):(this.setDatasetVisibility(b,M),N.update(I,{visible:M}),this.update(z=>z.datasetIndex===b?R:void 0))}hide(b,A){this._updateVisibility(b,A,!1)}show(b,A){this._updateVisibility(b,A,!0)}_destroyDatasetMeta(b){const A=this._metasets[b];A&&A.controller&&A.controller._destroy(),delete this._metasets[b]}_stop(){let b,A;for(this.stop(),ot.remove(this),b=0,A=this.data.datasets.length;b<A;++b)this._destroyDatasetMeta(b)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:b,ctx:A}=this;this._stop(),this.config.clearCache(),b&&(this.unbindEvents(),Rr(b,A),this.platform.releaseContext(A),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Di[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...b){return this.canvas.toDataURL(...b)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const b=this._listeners,A=this.platform,M=(I,N)=>{A.addEventListener(this,I,N),b[I]=N},R=(I,N,z)=>{I.offsetX=N,I.offsetY=z,this._eventHandler(I)};_(this.options.events,I=>M(I,R))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const b=this._responsiveListeners,A=this.platform,M=(H,Y)=>{A.addEventListener(this,H,Y),b[H]=Y},R=(H,Y)=>{b[H]&&(A.removeEventListener(this,H,Y),delete b[H])},I=(H,Y)=>{this.canvas&&this.resize(H,Y)};let N;const z=()=>{R("attach",z),this.attached=!0,this.resize(),M("resize",I),M("detach",N)};N=()=>{this.attached=!1,R("resize",I),this._stop(),this._resize(0,0),M("attach",z)},A.isAttached(this.canvas)?z():N()}unbindEvents(){_(this._listeners,(b,A)=>{this.platform.removeEventListener(this,A,b)}),this._listeners={},_(this._responsiveListeners,(b,A)=>{this.platform.removeEventListener(this,A,b)}),this._responsiveListeners=void 0}updateHoverStyle(b,A,M){const R=M?"set":"remove";let I,N,z,H;for(A==="dataset"&&(I=this.getDatasetMeta(b[0].datasetIndex),I.controller["_"+R+"DatasetHoverStyle"]()),z=0,H=b.length;z<H;++z){N=b[z];const Y=N&&this.getDatasetMeta(N.datasetIndex).controller;Y&&Y[R+"HoverStyle"](N.element,N.datasetIndex,N.index)}}getActiveElements(){return this._active||[]}setActiveElements(b){const A=this._active||[],M=b.map(({datasetIndex:I,index:N})=>{const z=this.getDatasetMeta(I);if(!z)throw new Error("No dataset found at index "+I);return{datasetIndex:I,element:z.data[N],index:N}});!S(M,A)&&(this._active=M,this._lastEvent=null,this._updateHoverStyles(M,A))}notifyPlugins(b,A,M){return this._plugins.notify(this,b,A,M)}_updateHoverStyles(b,A,M){const R=this.options.hover,I=(H,Y)=>H.filter(Z=>!Y.some(ne=>Z.datasetIndex===ne.datasetIndex&&Z.index===ne.index)),N=I(A,b),z=M?b:I(b,A);N.length&&this.updateHoverStyle(N,R.mode,!1),z.length&&R.mode&&this.updateHoverStyle(z,R.mode,!0)}_eventHandler(b,A){const M={event:b,replay:A,cancelable:!0,inChartArea:this.isPointInArea(b)},R=N=>(N.options.events||this.options.events).includes(b.native.type);if(this.notifyPlugins("beforeEvent",M,R)===!1)return;const I=this._handleEvent(b,A,M.inChartArea);return M.cancelable=!1,this.notifyPlugins("afterEvent",M,R),(I||M.changed)&&this.render(),this}_handleEvent(b,A,M){const{_active:R=[],options:I}=this,N=A,z=this._getActiveElements(b,R,M,N),H=j(b),Y=El(b,this._lastEvent,M,H);M&&(this._lastEvent=null,y(I.onHover,[b,z,this],this),H&&y(I.onClick,[b,z,this],this));const Z=!S(z,R);return(Z||A)&&(this._active=z,this._updateHoverStyles(z,R,A)),this._lastEvent=Y,Z}_getActiveElements(b,A,M,R){if(b.type==="mouseout")return[];if(!M)return A;const I=this.options.hover;return this.getElementsAtEventForMode(b,I.mode,I,R)}}const Co=()=>_(Kt.instances,C=>C._plugins.invalidate()),jn=!0;Object.defineProperties(Kt,{defaults:{enumerable:jn,value:Mt},instances:{enumerable:jn,value:Di},overrides:{enumerable:jn,value:Xt},registry:{enumerable:jn,value:_n},version:{enumerable:jn,value:Al},getChart:{enumerable:jn,value:wo},register:{enumerable:jn,value:(...C)=>{_n.add(...C),Co()}},unregister:{enumerable:jn,value:(...C)=>{_n.remove(...C),Co()}}});function cr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sa{constructor(b){this.options=b||{}}init(b){}formats(){return cr()}parse(b,A){return cr()}format(b,A){return cr()}add(b,A,M){return cr()}diff(b,A,M){return cr()}startOf(b,A,M){return cr()}endOf(b,A){return cr()}}Sa.override=function(C){Object.assign(Sa.prototype,C)};var Mo={_date:Sa};function Pl(C,b){if(!C._cache.$bar){const A=C.getMatchingVisibleMetas(b);let M=[];for(let R=0,I=A.length;R<I;R++)M=M.concat(A[R].controller.getAllParsedValues(C));C._cache.$bar=Ze(M.sort((R,I)=>R-I))}return C._cache.$bar}function Rl(C){const b=C.iScale,A=Pl(b,C.type);let M=b._length,R,I,N,z;const H=()=>{N===32767||N===-32768||(U(z)&&(M=Math.min(M,Math.abs(N-z)||M)),z=N)};for(R=0,I=A.length;R<I;++R)N=b.getPixelForValue(A[R]),H();for(z=void 0,R=0,I=b.ticks.length;R<I;++R)N=b.getPixelForTick(R),H();return M}function Dl(C,b,A,M){const R=A.barThickness;let I,N;return s(R)?(I=b.min*A.categoryPercentage,N=A.barPercentage):(I=R*M,N=1),{chunk:I/M,ratio:N,start:b.pixels[C]-I/2}}function Il(C,b,A,M){const R=b.pixels,I=R[C];let N=C>0?R[C-1]:null,z=C<R.length-1?R[C+1]:null;const H=A.categoryPercentage;N===null&&(N=I-(z===null?b.end-b.start:z-I)),z===null&&(z=I+I-N);const Y=I-(I-Math.min(N,z))/2*H;return{chunk:Math.abs(z-N)/2*H/M,ratio:A.barPercentage,start:Y}}function Ll(C,b,A,M){const R=A.parse(C[0],M),I=A.parse(C[1],M),N=Math.min(R,I),z=Math.max(R,I);let H=N,Y=z;Math.abs(N)>Math.abs(z)&&(H=z,Y=N),b[A.axis]=Y,b._custom={barStart:H,barEnd:Y,start:R,end:I,min:N,max:z}}function Eo(C,b,A,M){return l(C)?Ll(C,b,A,M):b[A.axis]=A.parse(C,M),b}function Po(C,b,A,M){const R=C.iScale,I=C.vScale,N=R.getLabels(),z=R===I,H=[];let Y,Z,ne,ue;for(Y=A,Z=A+M;Y<Z;++Y)ue=b[Y],ne={},ne[R.axis]=z||R.parse(N[Y],Y),H.push(Eo(ue,ne,I,Y));return H}function ba(C){return C&&C.barStart!==void 0&&C.barEnd!==void 0}function $l(C,b,A){return C!==0?ge(C):(b.isHorizontal()?1:-1)*(b.min>=A?1:-1)}function Nl(C){let b,A,M,R,I;return C.horizontal?(b=C.base>C.x,A="left",M="right"):(b=C.base<C.y,A="bottom",M="top"),b?(R="end",I="start"):(R="start",I="end"),{start:A,end:M,reverse:b,top:R,bottom:I}}function Ol(C,b,A,M){let R=b.borderSkipped;const I={};if(!R){C.borderSkipped=I;return}if(R===!0){C.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:N,end:z,reverse:H,top:Y,bottom:Z}=Nl(C);R==="middle"&&A&&(C.enableBorderRadius=!0,(A._top||0)===M?R=Y:(A._bottom||0)===M?R=Z:(I[Ro(Z,N,z,H)]=!0,R=Y)),I[Ro(R,N,z,H)]=!0,C.borderSkipped=I}function Ro(C,b,A,M){return M?(C=kl(C,b,A),C=Do(C,A,b)):C=Do(C,b,A),C}function kl(C,b,A){return C===b?A:C===A?b:C}function Do(C,b,A){return C==="start"?b:C==="end"?A:C}function Bl(C,{inflateAmount:b},A){C.inflateAmount=b==="auto"?A===1?.33:0:b}class Ii extends fn{parsePrimitiveData(b,A,M,R){return Po(b,A,M,R)}parseArrayData(b,A,M,R){return Po(b,A,M,R)}parseObjectData(b,A,M,R){const{iScale:I,vScale:N}=b,{xAxisKey:z="x",yAxisKey:H="y"}=this._parsing,Y=I.axis==="x"?z:H,Z=N.axis==="x"?z:H,ne=[];let ue,fe,ve,Me;for(ue=M,fe=M+R;ue<fe;++ue)Me=A[ue],ve={},ve[I.axis]=I.parse(O(Me,Y),ue),ne.push(Eo(O(Me,Z),ve,N,ue));return ne}updateRangeFromParsed(b,A,M,R){super.updateRangeFromParsed(b,A,M,R);const I=M._custom;I&&A===this._cachedMeta.vScale&&(b.min=Math.min(b.min,I.min),b.max=Math.max(b.max,I.max))}getMaxOverflow(){return 0}getLabelAndValue(b){const A=this._cachedMeta,{iScale:M,vScale:R}=A,I=this.getParsed(b),N=I._custom,z=ba(N)?"["+N.start+", "+N.end+"]":""+R.getLabelForValue(I[R.axis]);return{label:""+M.getLabelForValue(I[M.axis]),value:z}}initialize(){this.enableOptionSharing=!0,super.initialize();const b=this._cachedMeta;b.stack=this.getDataset().stack}update(b){const A=this._cachedMeta;this.updateElements(A.data,0,A.data.length,b)}updateElements(b,A,M,R){const I=R==="reset",{index:N,_cachedMeta:{vScale:z}}=this,H=z.getBasePixel(),Y=z.isHorizontal(),Z=this._getRuler(),{sharedOptions:ne,includeOptions:ue}=this._getSharedOptions(A,R);for(let fe=A;fe<A+M;fe++){const ve=this.getParsed(fe),Me=I||s(ve[z.axis])?{base:H,head:H}:this._calculateBarValuePixels(fe),Oe=this._calculateBarIndexPixels(fe,Z),Be=(ve._stacks||{})[z.axis],Ye={horizontal:Y,base:Me.base,enableBorderRadius:!Be||ba(ve._custom)||N===Be._top||N===Be._bottom,x:Y?Me.head:Oe.center,y:Y?Oe.center:Me.head,height:Y?Oe.size:Math.abs(Me.size),width:Y?Math.abs(Me.size):Oe.size};ue&&(Ye.options=ne||this.resolveDataElementOptions(fe,b[fe].active?"active":R));const nt=Ye.options||b[fe].options;Ol(Ye,nt,Be,N),Bl(Ye,nt,Z.ratio),this.updateElement(b[fe],fe,Ye,R)}}_getStacks(b,A){const{iScale:M}=this._cachedMeta,R=M.getMatchingVisibleMetas(this._type).filter(H=>H.controller.options.grouped),I=M.options.stacked,N=[],z=H=>{const Y=H.controller.getParsed(A),Z=Y&&Y[H.vScale.axis];if(s(Z)||isNaN(Z))return!0};for(const H of R)if(!(A!==void 0&&z(H))&&((I===!1||N.indexOf(H.stack)===-1||I===void 0&&H.stack===void 0)&&N.push(H.stack),H.index===b))break;return N.length||N.push(void 0),N}_getStackCount(b){return this._getStacks(void 0,b).length}_getStackIndex(b,A,M){const R=this._getStacks(b,M),I=A!==void 0?R.indexOf(A):-1;return I===-1?R.length-1:I}_getRuler(){const b=this.options,A=this._cachedMeta,M=A.iScale,R=[];let I,N;for(I=0,N=A.data.length;I<N;++I)R.push(M.getPixelForValue(this.getParsed(I)[M.axis],I));const z=b.barThickness;return{min:z||Rl(A),pixels:R,start:M._startPixel,end:M._endPixel,stackCount:this._getStackCount(),scale:M,grouped:b.grouped,ratio:z?1:b.categoryPercentage*b.barPercentage}}_calculateBarValuePixels(b){const{_cachedMeta:{vScale:A,_stacked:M},options:{base:R,minBarLength:I}}=this,N=R||0,z=this.getParsed(b),H=z._custom,Y=ba(H);let Z=z[A.axis],ne=0,ue=M?this.applyStack(A,z,M):Z,fe,ve;ue!==Z&&(ne=ue-Z,ue=Z),Y&&(Z=H.barStart,ue=H.barEnd-H.barStart,Z!==0&&ge(Z)!==ge(H.barEnd)&&(ne=0),ne+=Z);const Me=!s(R)&&!Y?R:ne;let Oe=A.getPixelForValue(Me);if(this.chart.getDataVisibility(b)?fe=A.getPixelForValue(ne+ue):fe=Oe,ve=fe-Oe,Math.abs(ve)<I){ve=$l(ve,A,N)*I,Z===N&&(Oe-=ve/2);const Be=A.getPixelForDecimal(0),Ye=A.getPixelForDecimal(1),nt=Math.min(Be,Ye),et=Math.max(Be,Ye);Oe=Math.max(Math.min(Oe,et),nt),fe=Oe+ve}if(Oe===A.getPixelForValue(N)){const Be=ge(ve)*A.getLineWidthForValue(N)/2;Oe+=Be,ve-=Be}return{size:ve,base:Oe,head:fe,center:fe+ve/2}}_calculateBarIndexPixels(b,A){const M=A.scale,R=this.options,I=R.skipNull,N=f(R.maxBarThickness,1/0);let z,H;if(A.grouped){const Y=I?this._getStackCount(b):A.stackCount,Z=R.barThickness==="flex"?Il(b,A,R,Y):Dl(b,A,R,Y),ne=this._getStackIndex(this.index,this._cachedMeta.stack,I?b:void 0);z=Z.start+Z.chunk*ne+Z.chunk/2,H=Math.min(N,Z.chunk*Z.ratio)}else z=M.getPixelForValue(this.getParsed(b)[M.axis],b),H=Math.min(N,A.min*A.ratio);return{base:z-H/2,head:z+H/2,center:z,size:H}}draw(){const b=this._cachedMeta,A=b.vScale,M=b.data,R=M.length;let I=0;for(;I<R;++I)this.getParsed(I)[A.axis]!==null&&M[I].draw(this._ctx)}}Ii.id="bar",Ii.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Ii.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Li extends fn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(b,A,M,R){const I=super.parsePrimitiveData(b,A,M,R);for(let N=0;N<I.length;N++)I[N]._custom=this.resolveDataElementOptions(N+M).radius;return I}parseArrayData(b,A,M,R){const I=super.parseArrayData(b,A,M,R);for(let N=0;N<I.length;N++){const z=A[M+N];I[N]._custom=f(z[2],this.resolveDataElementOptions(N+M).radius)}return I}parseObjectData(b,A,M,R){const I=super.parseObjectData(b,A,M,R);for(let N=0;N<I.length;N++){const z=A[M+N];I[N]._custom=f(z&&z.r&&+z.r,this.resolveDataElementOptions(N+M).radius)}return I}getMaxOverflow(){const b=this._cachedMeta.data;let A=0;for(let M=b.length-1;M>=0;--M)A=Math.max(A,b[M].size(this.resolveDataElementOptions(M))/2);return A>0&&A}getLabelAndValue(b){const A=this._cachedMeta,{xScale:M,yScale:R}=A,I=this.getParsed(b),N=M.getLabelForValue(I.x),z=R.getLabelForValue(I.y),H=I._custom;return{label:A.label,value:"("+N+", "+z+(H?", "+H:"")+")"}}update(b){const A=this._cachedMeta.data;this.updateElements(A,0,A.length,b)}updateElements(b,A,M,R){const I=R==="reset",{iScale:N,vScale:z}=this._cachedMeta,{sharedOptions:H,includeOptions:Y}=this._getSharedOptions(A,R),Z=N.axis,ne=z.axis;for(let ue=A;ue<A+M;ue++){const fe=b[ue],ve=!I&&this.getParsed(ue),Me={},Oe=Me[Z]=I?N.getPixelForDecimal(.5):N.getPixelForValue(ve[Z]),Be=Me[ne]=I?z.getBasePixel():z.getPixelForValue(ve[ne]);Me.skip=isNaN(Oe)||isNaN(Be),Y&&(Me.options=H||this.resolveDataElementOptions(ue,fe.active?"active":R),I&&(Me.options.radius=0)),this.updateElement(fe,ue,Me,R)}}resolveDataElementOptions(b,A){const M=this.getParsed(b);let R=super.resolveDataElementOptions(b,A);R.$shared&&(R=Object.assign({},R,{$shared:!1}));const I=R.radius;return A!=="active"&&(R.radius=0),R.radius+=f(M&&M._custom,I),R}}Li.id="bubble",Li.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Li.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function Vl(C,b,A){let M=1,R=1,I=0,N=0;if(b<q){const z=C,H=z+b,Y=Math.cos(z),Z=Math.sin(z),ne=Math.cos(H),ue=Math.sin(H),fe=(nt,et,Ke)=>Ie(nt,z,H,!0)?1:Math.max(et,et*A,Ke,Ke*A),ve=(nt,et,Ke)=>Ie(nt,z,H,!0)?-1:Math.min(et,et*A,Ke,Ke*A),Me=fe(0,Y,ne),Oe=fe(pe,Z,ue),Be=ve(K,Y,ne),Ye=ve(K+pe,Z,ue);M=(Me-Be)/2,R=(Oe-Ye)/2,I=-(Me+Be)/2,N=-(Oe+Ye)/2}return{ratioX:M,ratioY:R,offsetX:I,offsetY:N}}class xr extends fn{constructor(b,A){super(b,A),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(b,A){const M=this.getDataset().data,R=this._cachedMeta;if(this._parsing===!1)R._parsed=M;else{let I=H=>+M[H];if(c(M[b])){const{key:H="value"}=this._parsing;I=Y=>+O(M[Y],H)}let N,z;for(N=b,z=b+A;N<z;++N)R._parsed[N]=I(N)}}_getRotation(){return Le(this.options.rotation-90)}_getCircumference(){return Le(this.options.circumference)}_getRotationExtents(){let b=q,A=-q;for(let M=0;M<this.chart.data.datasets.length;++M)if(this.chart.isDatasetVisible(M)){const R=this.chart.getDatasetMeta(M).controller,I=R._getRotation(),N=R._getCircumference();b=Math.min(b,I),A=Math.max(A,I+N)}return{rotation:b,circumference:A-b}}update(b){const A=this.chart,{chartArea:M}=A,R=this._cachedMeta,I=R.data,N=this.getMaxBorderWidth()+this.getMaxOffset(I)+this.options.spacing,z=Math.max((Math.min(M.width,M.height)-N)/2,0),H=Math.min(v(this.options.cutout,z),1),Y=this._getRingWeight(this.index),{circumference:Z,rotation:ne}=this._getRotationExtents(),{ratioX:ue,ratioY:fe,offsetX:ve,offsetY:Me}=Vl(ne,Z,H),Oe=(M.width-N)/ue,Be=(M.height-N)/fe,Ye=Math.max(Math.min(Oe,Be)/2,0),nt=g(this.options.radius,Ye),et=Math.max(nt*H,0),Ke=(nt-et)/this._getVisibleDatasetWeightTotal();this.offsetX=ve*nt,this.offsetY=Me*nt,R.total=this.calculateTotal(),this.outerRadius=nt-Ke*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Ke*Y,0),this.updateElements(I,0,I.length,b)}_circumference(b,A){const M=this.options,R=this._cachedMeta,I=this._getCircumference();return A&&M.animation.animateRotate||!this.chart.getDataVisibility(b)||R._parsed[b]===null||R.data[b].hidden?0:this.calculateCircumference(R._parsed[b]*I/q)}updateElements(b,A,M,R){const I=R==="reset",N=this.chart,z=N.chartArea,Y=N.options.animation,Z=(z.left+z.right)/2,ne=(z.top+z.bottom)/2,ue=I&&Y.animateScale,fe=ue?0:this.innerRadius,ve=ue?0:this.outerRadius,{sharedOptions:Me,includeOptions:Oe}=this._getSharedOptions(A,R);let Be=this._getRotation(),Ye;for(Ye=0;Ye<A;++Ye)Be+=this._circumference(Ye,I);for(Ye=A;Ye<A+M;++Ye){const nt=this._circumference(Ye,I),et=b[Ye],Ke={x:Z+this.offsetX,y:ne+this.offsetY,startAngle:Be,endAngle:Be+nt,circumference:nt,outerRadius:ve,innerRadius:fe};Oe&&(Ke.options=Me||this.resolveDataElementOptions(Ye,et.active?"active":R)),Be+=nt,this.updateElement(et,Ye,Ke,R)}}calculateTotal(){const b=this._cachedMeta,A=b.data;let M=0,R;for(R=0;R<A.length;R++){const I=b._parsed[R];I!==null&&!isNaN(I)&&this.chart.getDataVisibility(R)&&!A[R].hidden&&(M+=Math.abs(I))}return M}calculateCircumference(b){const A=this._cachedMeta.total;return A>0&&!isNaN(b)?q*(Math.abs(b)/A):0}getLabelAndValue(b){const A=this._cachedMeta,M=this.chart,R=M.data.labels||[],I=Hn(A._parsed[b],M.options.locale);return{label:R[b]||"",value:I}}getMaxBorderWidth(b){let A=0;const M=this.chart;let R,I,N,z,H;if(!b){for(R=0,I=M.data.datasets.length;R<I;++R)if(M.isDatasetVisible(R)){N=M.getDatasetMeta(R),b=N.data,z=N.controller;break}}if(!b)return 0;for(R=0,I=b.length;R<I;++R)H=z.resolveDataElementOptions(R),H.borderAlign!=="inner"&&(A=Math.max(A,H.borderWidth||0,H.hoverBorderWidth||0));return A}getMaxOffset(b){let A=0;for(let M=0,R=b.length;M<R;++M){const I=this.resolveDataElementOptions(M);A=Math.max(A,I.offset||0,I.hoverOffset||0)}return A}_getRingWeightOffset(b){let A=0;for(let M=0;M<b;++M)this.chart.isDatasetVisible(M)&&(A+=this._getRingWeight(M));return A}_getRingWeight(b){return Math.max(f(this.chart.data.datasets[b].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}xr.id="doughnut",xr.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},xr.descriptors={_scriptable:C=>C!=="spacing",_indexable:C=>C!=="spacing"},xr.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(C){const b=C.data;if(b.labels.length&&b.datasets.length){const{labels:{pointStyle:A}}=C.legend.options;return b.labels.map((M,R)=>{const N=C.getDatasetMeta(0).controller.getStyle(R);return{text:M,fillStyle:N.backgroundColor,strokeStyle:N.borderColor,lineWidth:N.borderWidth,pointStyle:A,hidden:!C.getDataVisibility(R),index:R}})}return[]}},onClick(C,b,A){A.chart.toggleDataVisibility(b.index),A.chart.update()}},tooltip:{callbacks:{title(){return""},label(C){let b=C.label;const A=": "+C.formattedValue;return l(b)?(b=b.slice(),b[0]+=A):b+=A,b}}}}};class $i extends fn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(b){const A=this._cachedMeta,{dataset:M,data:R=[],_dataset:I}=A,N=this.chart._animationsDisabled;let{start:z,count:H}=bt(A,R,N);this._drawStart=z,this._drawCount=H,Bt(A)&&(z=0,H=R.length),M._chart=this.chart,M._datasetIndex=this.index,M._decimated=!!I._decimated,M.points=R;const Y=this.resolveDatasetElementOptions(b);this.options.showLine||(Y.borderWidth=0),Y.segment=this.options.segment,this.updateElement(M,void 0,{animated:!N,options:Y},b),this.updateElements(R,z,H,b)}updateElements(b,A,M,R){const I=R==="reset",{iScale:N,vScale:z,_stacked:H,_dataset:Y}=this._cachedMeta,{sharedOptions:Z,includeOptions:ne}=this._getSharedOptions(A,R),ue=N.axis,fe=z.axis,{spanGaps:ve,segment:Me}=this.options,Oe=oe(ve)?ve:Number.POSITIVE_INFINITY,Be=this.chart._animationsDisabled||I||R==="none";let Ye=A>0&&this.getParsed(A-1);for(let nt=A;nt<A+M;++nt){const et=b[nt],Ke=this.getParsed(nt),ft=Be?et:{},pt=s(Ke[fe]),Et=ft[ue]=N.getPixelForValue(Ke[ue],nt),Tt=ft[fe]=I||pt?z.getBasePixel():z.getPixelForValue(H?this.applyStack(z,Ke,H):Ke[fe],nt);ft.skip=isNaN(Et)||isNaN(Tt)||pt,ft.stop=nt>0&&Math.abs(Ke[ue]-Ye[ue])>Oe,Me&&(ft.parsed=Ke,ft.raw=Y.data[nt]),ne&&(ft.options=Z||this.resolveDataElementOptions(nt,et.active?"active":R)),Be||this.updateElement(et,nt,ft,R),Ye=Ke}}getMaxOverflow(){const b=this._cachedMeta,A=b.dataset,M=A.options&&A.options.borderWidth||0,R=b.data||[];if(!R.length)return M;const I=R[0].size(this.resolveDataElementOptions(0)),N=R[R.length-1].size(this.resolveDataElementOptions(R.length-1));return Math.max(M,I,N)/2}draw(){const b=this._cachedMeta;b.dataset.updateControlPoints(this.chart.chartArea,b.iScale.axis),super.draw()}}$i.id="line",$i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},$i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Ni extends fn{constructor(b,A){super(b,A),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(b){const A=this._cachedMeta,M=this.chart,R=M.data.labels||[],I=Hn(A._parsed[b].r,M.options.locale);return{label:R[b]||"",value:I}}parseObjectData(b,A,M,R){return Or.bind(this)(b,A,M,R)}update(b){const A=this._cachedMeta.data;this._updateRadius(),this.updateElements(A,0,A.length,b)}getMinMax(){const b=this._cachedMeta,A={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return b.data.forEach((M,R)=>{const I=this.getParsed(R).r;!isNaN(I)&&this.chart.getDataVisibility(R)&&(I<A.min&&(A.min=I),I>A.max&&(A.max=I))}),A}_updateRadius(){const b=this.chart,A=b.chartArea,M=b.options,R=Math.min(A.right-A.left,A.bottom-A.top),I=Math.max(R/2,0),N=Math.max(M.cutoutPercentage?I/100*M.cutoutPercentage:1,0),z=(I-N)/b.getVisibleDatasetCount();this.outerRadius=I-z*this.index,this.innerRadius=this.outerRadius-z}updateElements(b,A,M,R){const I=R==="reset",N=this.chart,H=N.options.animation,Y=this._cachedMeta.rScale,Z=Y.xCenter,ne=Y.yCenter,ue=Y.getIndexAngle(0)-.5*K;let fe=ue,ve;const Me=360/this.countVisibleElements();for(ve=0;ve<A;++ve)fe+=this._computeAngle(ve,R,Me);for(ve=A;ve<A+M;ve++){const Oe=b[ve];let Be=fe,Ye=fe+this._computeAngle(ve,R,Me),nt=N.getDataVisibility(ve)?Y.getDistanceFromCenterForValue(this.getParsed(ve).r):0;fe=Ye,I&&(H.animateScale&&(nt=0),H.animateRotate&&(Be=Ye=ue));const et={x:Z,y:ne,innerRadius:0,outerRadius:nt,startAngle:Be,endAngle:Ye,options:this.resolveDataElementOptions(ve,Oe.active?"active":R)};this.updateElement(Oe,ve,et,R)}}countVisibleElements(){const b=this._cachedMeta;let A=0;return b.data.forEach((M,R)=>{!isNaN(this.getParsed(R).r)&&this.chart.getDataVisibility(R)&&A++}),A}_computeAngle(b,A,M){return this.chart.getDataVisibility(b)?Le(this.resolveDataElementOptions(b,A).angle||M):0}}Ni.id="polarArea",Ni.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Ni.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(C){const b=C.data;if(b.labels.length&&b.datasets.length){const{labels:{pointStyle:A}}=C.legend.options;return b.labels.map((M,R)=>{const N=C.getDatasetMeta(0).controller.getStyle(R);return{text:M,fillStyle:N.backgroundColor,strokeStyle:N.borderColor,lineWidth:N.borderWidth,pointStyle:A,hidden:!C.getDataVisibility(R),index:R}})}return[]}},onClick(C,b,A){A.chart.toggleDataVisibility(b.index),A.chart.update()}},tooltip:{callbacks:{title(){return""},label(C){return C.chart.data.labels[C.dataIndex]+": "+C.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class xa extends xr{}xa.id="pie",xa.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Oi extends fn{getLabelAndValue(b){const A=this._cachedMeta.vScale,M=this.getParsed(b);return{label:A.getLabels()[b],value:""+A.getLabelForValue(M[A.axis])}}parseObjectData(b,A,M,R){return Or.bind(this)(b,A,M,R)}update(b){const A=this._cachedMeta,M=A.dataset,R=A.data||[],I=A.iScale.getLabels();if(M.points=R,b!=="resize"){const N=this.resolveDatasetElementOptions(b);this.options.showLine||(N.borderWidth=0);const z={_loop:!0,_fullLoop:I.length===R.length,options:N};this.updateElement(M,void 0,z,b)}this.updateElements(R,0,R.length,b)}updateElements(b,A,M,R){const I=this._cachedMeta.rScale,N=R==="reset";for(let z=A;z<A+M;z++){const H=b[z],Y=this.resolveDataElementOptions(z,H.active?"active":R),Z=I.getPointPositionForValue(z,this.getParsed(z).r),ne=N?I.xCenter:Z.x,ue=N?I.yCenter:Z.y,fe={x:ne,y:ue,angle:Z.angle,skip:isNaN(ne)||isNaN(ue),options:Y};this.updateElement(H,z,fe,R)}}}Oi.id="radar",Oi.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Oi.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class ki extends fn{update(b){const A=this._cachedMeta,{data:M=[]}=A,R=this.chart._animationsDisabled;let{start:I,count:N}=bt(A,M,R);if(this._drawStart=I,this._drawCount=N,Bt(A)&&(I=0,N=M.length),this.options.showLine){const{dataset:z,_dataset:H}=A;z._chart=this.chart,z._datasetIndex=this.index,z._decimated=!!H._decimated,z.points=M;const Y=this.resolveDatasetElementOptions(b);Y.segment=this.options.segment,this.updateElement(z,void 0,{animated:!R,options:Y},b)}this.updateElements(M,I,N,b)}addElements(){const{showLine:b}=this.options;!this.datasetElementType&&b&&(this.datasetElementType=_n.getElement("line")),super.addElements()}updateElements(b,A,M,R){const I=R==="reset",{iScale:N,vScale:z,_stacked:H,_dataset:Y}=this._cachedMeta,Z=this.resolveDataElementOptions(A,R),ne=this.getSharedOptions(Z),ue=this.includeOptions(R,ne),fe=N.axis,ve=z.axis,{spanGaps:Me,segment:Oe}=this.options,Be=oe(Me)?Me:Number.POSITIVE_INFINITY,Ye=this.chart._animationsDisabled||I||R==="none";let nt=A>0&&this.getParsed(A-1);for(let et=A;et<A+M;++et){const Ke=b[et],ft=this.getParsed(et),pt=Ye?Ke:{},Et=s(ft[ve]),Tt=pt[fe]=N.getPixelForValue(ft[fe],et),zt=pt[ve]=I||Et?z.getBasePixel():z.getPixelForValue(H?this.applyStack(z,ft,H):ft[ve],et);pt.skip=isNaN(Tt)||isNaN(zt)||Et,pt.stop=et>0&&Math.abs(ft[fe]-nt[fe])>Be,Oe&&(pt.parsed=ft,pt.raw=Y.data[et]),ue&&(pt.options=ne||this.resolveDataElementOptions(et,Ke.active?"active":R)),Ye||this.updateElement(Ke,et,pt,R),nt=ft}this.updateSharedOptions(ne,R,Z)}getMaxOverflow(){const b=this._cachedMeta,A=b.data||[];if(!this.options.showLine){let z=0;for(let H=A.length-1;H>=0;--H)z=Math.max(z,A[H].size(this.resolveDataElementOptions(H))/2);return z>0&&z}const M=b.dataset,R=M.options&&M.options.borderWidth||0;if(!A.length)return R;const I=A[0].size(this.resolveDataElementOptions(0)),N=A[A.length-1].size(this.resolveDataElementOptions(A.length-1));return Math.max(R,I,N)/2}}ki.id="scatter",ki.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},ki.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(C){return"("+C.label+", "+C.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Io=Object.freeze({__proto__:null,BarController:Ii,BubbleController:Li,DoughnutController:xr,LineController:$i,PolarAreaController:Ni,PieController:xa,RadarController:Oi,ScatterController:ki});function Lo(C,b,A){const{startAngle:M,pixelMargin:R,x:I,y:N,outerRadius:z,innerRadius:H}=b;let Y=R/z;C.beginPath(),C.arc(I,N,z,M-Y,A+Y),H>R?(Y=R/H,C.arc(I,N,H,A+Y,M-Y,!0)):C.arc(I,N,R,A+pe,M-pe),C.closePath(),C.clip()}function Fl(C){return or(C,["outerStart","outerEnd","innerStart","innerEnd"])}function Ul(C,b,A,M){const R=Fl(C.options.borderRadius),I=(A-b)/2,N=Math.min(I,M*b/2),z=H=>{const Y=(A-Math.min(I,H))*M/2;return ze(H,0,Math.min(I,Y))};return{outerStart:z(R.outerStart),outerEnd:z(R.outerEnd),innerStart:ze(R.innerStart,0,N),innerEnd:ze(R.innerEnd,0,N)}}function Tr(C,b,A,M){return{x:A+C*Math.cos(b),y:M+C*Math.sin(b)}}function Ta(C,b,A,M,R,I){const{x:N,y:z,startAngle:H,pixelMargin:Y,innerRadius:Z}=b,ne=Math.max(b.outerRadius+M+A-Y,0),ue=Z>0?Z+M+A+Y:0;let fe=0;const ve=R-H;if(M){const It=Z>0?Z-M:0,nn=ne>0?ne-M:0,Zt=(It+nn)/2,ur=Zt!==0?ve*Zt/(Zt+M):ve;fe=(ve-ur)/2}const Me=Math.max(.001,ve*ne-A/K)/ne,Oe=(ve-Me)/2,Be=H+Oe+fe,Ye=R-Oe-fe,{outerStart:nt,outerEnd:et,innerStart:Ke,innerEnd:ft}=Ul(b,ue,ne,Ye-Be),pt=ne-nt,Et=ne-et,Tt=Be+nt/pt,zt=Ye-et/Et,Ht=ue+Ke,Vt=ue+ft,tn=Be+Ke/Ht,cn=Ye-ft/Vt;if(C.beginPath(),I){if(C.arc(N,z,ne,Tt,zt),et>0){const Zt=Tr(Et,zt,N,z);C.arc(Zt.x,Zt.y,et,zt,Ye+pe)}const It=Tr(Vt,Ye,N,z);if(C.lineTo(It.x,It.y),ft>0){const Zt=Tr(Vt,cn,N,z);C.arc(Zt.x,Zt.y,ft,Ye+pe,cn+Math.PI)}if(C.arc(N,z,ue,Ye-ft/ue,Be+Ke/ue,!0),Ke>0){const Zt=Tr(Ht,tn,N,z);C.arc(Zt.x,Zt.y,Ke,tn+Math.PI,Be-pe)}const nn=Tr(pt,Be,N,z);if(C.lineTo(nn.x,nn.y),nt>0){const Zt=Tr(pt,Tt,N,z);C.arc(Zt.x,Zt.y,nt,Be-pe,Tt)}}else{C.moveTo(N,z);const It=Math.cos(Tt)*ne+N,nn=Math.sin(Tt)*ne+z;C.lineTo(It,nn);const Zt=Math.cos(zt)*ne+N,ur=Math.sin(zt)*ne+z;C.lineTo(Zt,ur)}C.closePath()}function zl(C,b,A,M,R){const{fullCircles:I,startAngle:N,circumference:z}=b;let H=b.endAngle;if(I){Ta(C,b,A,M,N+q,R);for(let Y=0;Y<I;++Y)C.fill();isNaN(z)||(H=N+z%q,z%q===0&&(H+=q))}return Ta(C,b,A,M,H,R),C.fill(),H}function Hl(C,b,A){const{x:M,y:R,startAngle:I,pixelMargin:N,fullCircles:z}=b,H=Math.max(b.outerRadius-N,0),Y=b.innerRadius+N;let Z;for(A&&Lo(C,b,I+q),C.beginPath(),C.arc(M,R,Y,I+q,I,!0),Z=0;Z<z;++Z)C.stroke();for(C.beginPath(),C.arc(M,R,H,I,I+q),Z=0;Z<z;++Z)C.stroke()}function Gl(C,b,A,M,R,I){const{options:N}=b,{borderWidth:z,borderJoinStyle:H}=N,Y=N.borderAlign==="inner";z&&(Y?(C.lineWidth=z*2,C.lineJoin=H||"round"):(C.lineWidth=z,C.lineJoin=H||"bevel"),b.fullCircles&&Hl(C,b,Y),Y&&Lo(C,b,R),Ta(C,b,A,M,R,I),C.stroke())}class Bi extends pn{constructor(b){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,b&&Object.assign(this,b)}inRange(b,A,M){const R=this.getProps(["x","y"],M),{angle:I,distance:N}=J(R,{x:b,y:A}),{startAngle:z,endAngle:H,innerRadius:Y,outerRadius:Z,circumference:ne}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],M),ue=this.options.spacing/2,ve=f(ne,H-z)>=q||Ie(I,z,H),Me=ae(N,Y+ue,Z+ue);return ve&&Me}getCenterPoint(b){const{x:A,y:M,startAngle:R,endAngle:I,innerRadius:N,outerRadius:z}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],b),{offset:H,spacing:Y}=this.options,Z=(R+I)/2,ne=(N+z+Y+H)/2;return{x:A+Math.cos(Z)*ne,y:M+Math.sin(Z)*ne}}tooltipPosition(b){return this.getCenterPoint(b)}draw(b){const{options:A,circumference:M}=this,R=(A.offset||0)/2,I=(A.spacing||0)/2,N=A.circular;if(this.pixelMargin=A.borderAlign==="inner"?.33:0,this.fullCircles=M>q?Math.floor(M/q):0,M===0||this.innerRadius<0||this.outerRadius<0)return;b.save();let z=0;if(R){z=R/2;const Y=(this.startAngle+this.endAngle)/2;b.translate(Math.cos(Y)*z,Math.sin(Y)*z),this.circumference>=K&&(z=R)}b.fillStyle=A.backgroundColor,b.strokeStyle=A.borderColor;const H=zl(b,this,z,I,N);Gl(b,this,z,I,H,N),b.restore()}}Bi.id="arc",Bi.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Bi.defaultRoutes={backgroundColor:"backgroundColor"};function $o(C,b,A=b){C.lineCap=f(A.borderCapStyle,b.borderCapStyle),C.setLineDash(f(A.borderDash,b.borderDash)),C.lineDashOffset=f(A.borderDashOffset,b.borderDashOffset),C.lineJoin=f(A.borderJoinStyle,b.borderJoinStyle),C.lineWidth=f(A.borderWidth,b.borderWidth),C.strokeStyle=f(A.borderColor,b.borderColor)}function Wl(C,b,A){C.lineTo(A.x,A.y)}function Yl(C){return C.stepped?Ir:C.tension||C.cubicInterpolationMode==="monotone"?ii:Wl}function No(C,b,A={}){const M=C.length,{start:R=0,end:I=M-1}=A,{start:N,end:z}=b,H=Math.max(R,N),Y=Math.min(I,z),Z=R<N&&I<N||R>z&&I>z;return{count:M,start:H,loop:b.loop,ilen:Y<H&&!Z?M+Y-H:Y-H}}function Xl(C,b,A,M){const{points:R,options:I}=b,{count:N,start:z,loop:H,ilen:Y}=No(R,A,M),Z=Yl(I);let{move:ne=!0,reverse:ue}=M||{},fe,ve,Me;for(fe=0;fe<=Y;++fe)ve=R[(z+(ue?Y-fe:fe))%N],!ve.skip&&(ne?(C.moveTo(ve.x,ve.y),ne=!1):Z(C,Me,ve,ue,I.stepped),Me=ve);return H&&(ve=R[(z+(ue?Y:0))%N],Z(C,Me,ve,ue,I.stepped)),!!H}function jl(C,b,A,M){const R=b.points,{count:I,start:N,ilen:z}=No(R,A,M),{move:H=!0,reverse:Y}=M||{};let Z=0,ne=0,ue,fe,ve,Me,Oe,Be;const Ye=et=>(N+(Y?z-et:et))%I,nt=()=>{Me!==Oe&&(C.lineTo(Z,Oe),C.lineTo(Z,Me),C.lineTo(Z,Be))};for(H&&(fe=R[Ye(0)],C.moveTo(fe.x,fe.y)),ue=0;ue<=z;++ue){if(fe=R[Ye(ue)],fe.skip)continue;const et=fe.x,Ke=fe.y,ft=et|0;ft===ve?(Ke<Me?Me=Ke:Ke>Oe&&(Oe=Ke),Z=(ne*Z+et)/++ne):(nt(),C.lineTo(et,Ke),ve=ft,ne=0,Me=Oe=Ke),Be=Ke}nt()}function Aa(C){const b=C.options,A=b.borderDash&&b.borderDash.length;return!C._decimated&&!C._loop&&!b.tension&&b.cubicInterpolationMode!=="monotone"&&!b.stepped&&!A?jl:Xl}function ql(C){return C.stepped?kr:C.tension||C.cubicInterpolationMode==="monotone"?bi:wn}function Kl(C,b,A,M){let R=b._path;R||(R=b._path=new Path2D,b.path(R,A,M)&&R.closePath()),$o(C,b.options),C.stroke(R)}function Zl(C,b,A,M){const{segments:R,options:I}=b,N=Aa(b);for(const z of R)$o(C,I,z.style),C.beginPath(),N(C,b,z,{start:A,end:A+M-1})&&C.closePath(),C.stroke()}const Jl=typeof Path2D=="function";function Ql(C,b,A,M){Jl&&!b.options.segment?Kl(C,b,A,M):Zl(C,b,A,M)}class qn extends pn{constructor(b){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,b&&Object.assign(this,b)}updateControlPoints(b,A){const M=this.options;if((M.tension||M.cubicInterpolationMode==="monotone")&&!M.stepped&&!this._pointsUpdated){const R=M.spanGaps?this._loop:this._fullLoop;yi(this._points,M,b,R,A),this._pointsUpdated=!0}}set points(b){this._points=b,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=te(this,this.options.segment))}first(){const b=this.segments,A=this.points;return b.length&&A[b[0].start]}last(){const b=this.segments,A=this.points,M=b.length;return M&&A[b[M-1].end]}interpolate(b,A){const M=this.options,R=b[A],I=this.points,N=Yn(this,{property:A,start:R,end:R});if(!N.length)return;const z=[],H=ql(M);let Y,Z;for(Y=0,Z=N.length;Y<Z;++Y){const{start:ne,end:ue}=N[Y],fe=I[ne],ve=I[ue];if(fe===ve){z.push(fe);continue}const Me=Math.abs((R-fe[A])/(ve[A]-fe[A])),Oe=H(fe,ve,Me,M.stepped);Oe[A]=b[A],z.push(Oe)}return z.length===1?z[0]:z}pathSegment(b,A,M){return Aa(this)(b,this,A,M)}path(b,A,M){const R=this.segments,I=Aa(this);let N=this._loop;A=A||0,M=M||this.points.length-A;for(const z of R)N&=I(b,this,z,{start:A,end:A+M-1});return!!N}draw(b,A,M,R){const I=this.options||{};(this.points||[]).length&&I.borderWidth&&(b.save(),Ql(b,this,M,R),b.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}qn.id="line",qn.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},qn.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},qn.descriptors={_scriptable:!0,_indexable:C=>C!=="borderDash"&&C!=="fill"};function Oo(C,b,A,M){const R=C.options,{[A]:I}=C.getProps([A],M);return Math.abs(b-I)<R.radius+R.hitRadius}class Vi extends pn{constructor(b){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,b&&Object.assign(this,b)}inRange(b,A,M){const R=this.options,{x:I,y:N}=this.getProps(["x","y"],M);return Math.pow(b-I,2)+Math.pow(A-N,2)<Math.pow(R.hitRadius+R.radius,2)}inXRange(b,A){return Oo(this,b,"x",A)}inYRange(b,A){return Oo(this,b,"y",A)}getCenterPoint(b){const{x:A,y:M}=this.getProps(["x","y"],b);return{x:A,y:M}}size(b){b=b||this.options||{};let A=b.radius||0;A=Math.max(A,A&&b.hoverRadius||0);const M=A&&b.borderWidth||0;return(A+M)*2}draw(b,A){const M=this.options;this.skip||M.radius<.1||!Un(this,A,this.size(M)/2)||(b.strokeStyle=M.borderColor,b.lineWidth=M.borderWidth,b.fillStyle=M.backgroundColor,_r(b,M,this.x,this.y))}getRange(){const b=this.options||{};return b.radius+b.hitRadius}}Vi.id="point",Vi.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Vi.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function ko(C,b){const{x:A,y:M,base:R,width:I,height:N}=C.getProps(["x","y","base","width","height"],b);let z,H,Y,Z,ne;return C.horizontal?(ne=N/2,z=Math.min(A,R),H=Math.max(A,R),Y=M-ne,Z=M+ne):(ne=I/2,z=A-ne,H=A+ne,Y=Math.min(M,R),Z=Math.max(M,R)),{left:z,top:Y,right:H,bottom:Z}}function Kn(C,b,A,M){return C?0:ze(b,A,M)}function ec(C,b,A){const M=C.options.borderWidth,R=C.borderSkipped,I=br(M);return{t:Kn(R.top,I.top,0,A),r:Kn(R.right,I.right,0,b),b:Kn(R.bottom,I.bottom,0,A),l:Kn(R.left,I.left,0,b)}}function tc(C,b,A){const{enableBorderRadius:M}=C.getProps(["enableBorderRadius"]),R=C.options.borderRadius,I=Cn(R),N=Math.min(b,A),z=C.borderSkipped,H=M||c(R);return{topLeft:Kn(!H||z.top||z.left,I.topLeft,0,N),topRight:Kn(!H||z.top||z.right,I.topRight,0,N),bottomLeft:Kn(!H||z.bottom||z.left,I.bottomLeft,0,N),bottomRight:Kn(!H||z.bottom||z.right,I.bottomRight,0,N)}}function nc(C){const b=ko(C),A=b.right-b.left,M=b.bottom-b.top,R=ec(C,A/2,M/2),I=tc(C,A/2,M/2);return{outer:{x:b.left,y:b.top,w:A,h:M,radius:I},inner:{x:b.left+R.l,y:b.top+R.t,w:A-R.l-R.r,h:M-R.t-R.b,radius:{topLeft:Math.max(0,I.topLeft-Math.max(R.t,R.l)),topRight:Math.max(0,I.topRight-Math.max(R.t,R.r)),bottomLeft:Math.max(0,I.bottomLeft-Math.max(R.b,R.l)),bottomRight:Math.max(0,I.bottomRight-Math.max(R.b,R.r))}}}}function wa(C,b,A,M){const R=b===null,I=A===null,z=C&&!(R&&I)&&ko(C,M);return z&&(R||ae(b,z.left,z.right))&&(I||ae(A,z.top,z.bottom))}function rc(C){return C.topLeft||C.topRight||C.bottomLeft||C.bottomRight}function ic(C,b){C.rect(b.x,b.y,b.w,b.h)}function Ca(C,b,A={}){const M=C.x!==A.x?-b:0,R=C.y!==A.y?-b:0,I=(C.x+C.w!==A.x+A.w?b:0)-M,N=(C.y+C.h!==A.y+A.h?b:0)-R;return{x:C.x+M,y:C.y+R,w:C.w+I,h:C.h+N,radius:C.radius}}class Fi extends pn{constructor(b){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,b&&Object.assign(this,b)}draw(b){const{inflateAmount:A,options:{borderColor:M,backgroundColor:R}}=this,{inner:I,outer:N}=nc(this),z=rc(N.radius)?zn:ic;b.save(),(N.w!==I.w||N.h!==I.h)&&(b.beginPath(),z(b,Ca(N,A,I)),b.clip(),z(b,Ca(I,-A,N)),b.fillStyle=M,b.fill("evenodd")),b.beginPath(),z(b,Ca(I,A)),b.fillStyle=R,b.fill(),b.restore()}inRange(b,A,M){return wa(this,b,A,M)}inXRange(b,A){return wa(this,b,null,A)}inYRange(b,A){return wa(this,null,b,A)}getCenterPoint(b){const{x:A,y:M,base:R,horizontal:I}=this.getProps(["x","y","base","horizontal"],b);return{x:I?(A+R)/2:A,y:I?M:(M+R)/2}}getRange(b){return b==="x"?this.width/2:this.height/2}}Fi.id="bar",Fi.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Fi.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ma=Object.freeze({__proto__:null,ArcElement:Bi,LineElement:qn,PointElement:Vi,BarElement:Fi});function ac(C,b,A,M,R){const I=R.samples||M;if(I>=A)return C.slice(b,b+A);const N=[],z=(A-2)/(I-2);let H=0;const Y=b+A-1;let Z=b,ne,ue,fe,ve,Me;for(N[H++]=C[Z],ne=0;ne<I-2;ne++){let Oe=0,Be=0,Ye;const nt=Math.floor((ne+1)*z)+1+b,et=Math.min(Math.floor((ne+2)*z)+1,A)+b,Ke=et-nt;for(Ye=nt;Ye<et;Ye++)Oe+=C[Ye].x,Be+=C[Ye].y;Oe/=Ke,Be/=Ke;const ft=Math.floor(ne*z)+1+b,pt=Math.min(Math.floor((ne+1)*z)+1,A)+b,{x:Et,y:Tt}=C[Z];for(fe=ve=-1,Ye=ft;Ye<pt;Ye++)ve=.5*Math.abs((Et-Oe)*(C[Ye].y-Tt)-(Et-C[Ye].x)*(Be-Tt)),ve>fe&&(fe=ve,ue=C[Ye],Me=Ye);N[H++]=ue,Z=Me}return N[H++]=C[Y],N}function oc(C,b,A,M){let R=0,I=0,N,z,H,Y,Z,ne,ue,fe,ve,Me;const Oe=[],Be=b+A-1,Ye=C[b].x,et=C[Be].x-Ye;for(N=b;N<b+A;++N){z=C[N],H=(z.x-Ye)/et*M,Y=z.y;const Ke=H|0;if(Ke===Z)Y<ve?(ve=Y,ne=N):Y>Me&&(Me=Y,ue=N),R=(I*R+z.x)/++I;else{const ft=N-1;if(!s(ne)&&!s(ue)){const pt=Math.min(ne,ue),Et=Math.max(ne,ue);pt!==fe&&pt!==ft&&Oe.push({...C[pt],x:R}),Et!==fe&&Et!==ft&&Oe.push({...C[Et],x:R})}N>0&&ft!==fe&&Oe.push(C[ft]),Oe.push(z),Z=Ke,I=0,ve=Me=Y,ne=ue=fe=N}}return Oe}function Bo(C){if(C._decimated){const b=C._data;delete C._decimated,delete C._data,Object.defineProperty(C,"data",{value:b})}}function Vo(C){C.data.datasets.forEach(b=>{Bo(b)})}function sc(C,b){const A=b.length;let M=0,R;const{iScale:I}=C,{min:N,max:z,minDefined:H,maxDefined:Y}=I.getUserBounds();return H&&(M=ze(be(b,I.axis,N).lo,0,A-1)),Y?R=ze(be(b,I.axis,z).hi+1,M,A)-M:R=A-M,{start:M,count:R}}var lc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(C,b,A)=>{if(!A.enabled){Vo(C);return}const M=C.width;C.data.datasets.forEach((R,I)=>{const{_data:N,indexAxis:z}=R,H=C.getDatasetMeta(I),Y=N||R.data;if(mn([z,C.options.indexAxis])==="y"||!H.controller.supportsDecimation)return;const Z=C.scales[H.xAxisID];if(Z.type!=="linear"&&Z.type!=="time"||C.options.parsing)return;let{start:ne,count:ue}=sc(H,Y);const fe=A.threshold||4*M;if(ue<=fe){Bo(R);return}s(N)&&(R._data=Y,delete R.data,Object.defineProperty(R,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(Me){this._data=Me}}));let ve;switch(A.algorithm){case"lttb":ve=ac(Y,ne,ue,M,A);break;case"min-max":ve=oc(Y,ne,ue,M);break;default:throw new Error(`Unsupported decimation algorithm '${A.algorithm}'`)}R._decimated=ve})},destroy(C){Vo(C)}};function cc(C,b,A){const M=C.segments,R=C.points,I=b.points,N=[];for(const z of M){let{start:H,end:Y}=z;Y=Pa(H,Y,R);const Z=Ea(A,R[H],R[Y],z.loop);if(!b.segments){N.push({source:z,target:Z,start:R[H],end:R[Y]});continue}const ne=Yn(b,Z);for(const ue of ne){const fe=Ea(A,I[ue.start],I[ue.end],ue.loop),ve=Wn(z,R,fe);for(const Me of ve)N.push({source:Me,target:ue,start:{[A]:Fo(Z,fe,"start",Math.max)},end:{[A]:Fo(Z,fe,"end",Math.min)}})}}return N}function Ea(C,b,A,M){if(M)return;let R=b[C],I=A[C];return C==="angle"&&(R=Ae(R),I=Ae(I)),{property:C,start:R,end:I}}function uc(C,b){const{x:A=null,y:M=null}=C||{},R=b.points,I=[];return b.segments.forEach(({start:N,end:z})=>{z=Pa(N,z,R);const H=R[N],Y=R[z];M!==null?(I.push({x:H.x,y:M}),I.push({x:Y.x,y:M})):A!==null&&(I.push({x:A,y:H.y}),I.push({x:A,y:Y.y}))}),I}function Pa(C,b,A){for(;b>C;b--){const M=A[b];if(!isNaN(M.x)&&!isNaN(M.y))break}return b}function Fo(C,b,A,M){return C&&b?M(C[A],b[A]):C?C[A]:b?b[A]:0}function Uo(C,b){let A=[],M=!1;return l(C)?(M=!0,A=C):A=uc(C,b),A.length?new qn({points:A,options:{tension:0},_loop:M,_fullLoop:M}):null}function zo(C){return C&&C.fill!==!1}function hc(C,b,A){let R=C[b].fill;const I=[b];let N;if(!A)return R;for(;R!==!1&&I.indexOf(R)===-1;){if(!u(R))return R;if(N=C[R],!N)return!1;if(N.visible)return R;I.push(R),R=N.fill}return!1}function dc(C,b,A){const M=gc(C);if(c(M))return isNaN(M.value)?!1:M;let R=parseFloat(M);return u(R)&&Math.floor(R)===R?fc(M[0],b,R,A):["origin","start","end","stack","shape"].indexOf(M)>=0&&M}function fc(C,b,A,M){return(C==="-"||C==="+")&&(A=b+A),A===b||A<0||A>=M?!1:A}function pc(C,b){let A=null;return C==="start"?A=b.bottom:C==="end"?A=b.top:c(C)?A=b.getPixelForValue(C.value):b.getBasePixel&&(A=b.getBasePixel()),A}function vc(C,b,A){let M;return C==="start"?M=A:C==="end"?M=b.options.reverse?b.min:b.max:c(C)?M=C.value:M=b.getBaseValue(),M}function gc(C){const b=C.options,A=b.fill;let M=f(A&&A.target,A);return M===void 0&&(M=!!b.backgroundColor),M===!1||M===null?!1:M===!0?"origin":M}function mc(C){const{scale:b,index:A,line:M}=C,R=[],I=M.segments,N=M.points,z=yc(b,A);z.push(Uo({x:null,y:b.bottom},M));for(let H=0;H<I.length;H++){const Y=I[H];for(let Z=Y.start;Z<=Y.end;Z++)Sc(R,N[Z],z)}return new qn({points:R,options:{}})}function yc(C,b){const A=[],M=C.getMatchingVisibleMetas("line");for(let R=0;R<M.length;R++){const I=M[R];if(I.index===b)break;I.hidden||A.unshift(I.dataset)}return A}function Sc(C,b,A){const M=[];for(let R=0;R<A.length;R++){const I=A[R],{first:N,last:z,point:H}=bc(I,b,"x");if(!(!H||N&&z)){if(N)M.unshift(H);else if(C.push(H),!z)break}}C.push(...M)}function bc(C,b,A){const M=C.interpolate(b,A);if(!M)return{};const R=M[A],I=C.segments,N=C.points;let z=!1,H=!1;for(let Y=0;Y<I.length;Y++){const Z=I[Y],ne=N[Z.start][A],ue=N[Z.end][A];if(ae(R,ne,ue)){z=R===ne,H=R===ue;break}}return{first:z,last:H,point:M}}class Ho{constructor(b){this.x=b.x,this.y=b.y,this.radius=b.radius}pathSegment(b,A,M){const{x:R,y:I,radius:N}=this;return A=A||{start:0,end:q},b.arc(R,I,N,A.end,A.start,!0),!M.bounds}interpolate(b){const{x:A,y:M,radius:R}=this,I=b.angle;return{x:A+Math.cos(I)*R,y:M+Math.sin(I)*R,angle:I}}}function xc(C){const{chart:b,fill:A,line:M}=C;if(u(A))return Tc(b,A);if(A==="stack")return mc(C);if(A==="shape")return!0;const R=Ac(C);return R instanceof Ho?R:Uo(R,M)}function Tc(C,b){const A=C.getDatasetMeta(b);return A&&C.isDatasetVisible(b)?A.dataset:null}function Ac(C){return(C.scale||{}).getPointPositionForValue?Cc(C):wc(C)}function wc(C){const{scale:b={},fill:A}=C,M=pc(A,b);if(u(M)){const R=b.isHorizontal();return{x:R?M:null,y:R?null:M}}return null}function Cc(C){const{scale:b,fill:A}=C,M=b.options,R=b.getLabels().length,I=M.reverse?b.max:b.min,N=vc(A,b,I),z=[];if(M.grid.circular){const H=b.getPointPositionForValue(0,I);return new Ho({x:H.x,y:H.y,radius:b.getDistanceFromCenterForValue(N)})}for(let H=0;H<R;++H)z.push(b.getPointPositionForValue(H,N));return z}function Ra(C,b,A){const M=xc(b),{line:R,scale:I,axis:N}=b,z=R.options,H=z.fill,Y=z.backgroundColor,{above:Z=Y,below:ne=Y}=H||{};M&&R.points.length&&(tr(C,A),Mc(C,{line:R,target:M,above:Z,below:ne,area:A,scale:I,axis:N}),Tn(C))}function Mc(C,b){const{line:A,target:M,above:R,below:I,area:N,scale:z}=b,H=A._loop?"angle":b.axis;C.save(),H==="x"&&I!==R&&(Go(C,M,N.top),Wo(C,{line:A,target:M,color:R,scale:z,property:H}),C.restore(),C.save(),Go(C,M,N.bottom)),Wo(C,{line:A,target:M,color:I,scale:z,property:H}),C.restore()}function Go(C,b,A){const{segments:M,points:R}=b;let I=!0,N=!1;C.beginPath();for(const z of M){const{start:H,end:Y}=z,Z=R[H],ne=R[Pa(H,Y,R)];I?(C.moveTo(Z.x,Z.y),I=!1):(C.lineTo(Z.x,A),C.lineTo(Z.x,Z.y)),N=!!b.pathSegment(C,z,{move:N}),N?C.closePath():C.lineTo(ne.x,A)}C.lineTo(b.first().x,A),C.closePath(),C.clip()}function Wo(C,b){const{line:A,target:M,property:R,color:I,scale:N}=b,z=cc(A,M,R);for(const{source:H,target:Y,start:Z,end:ne}of z){const{style:{backgroundColor:ue=I}={}}=H,fe=M!==!0;C.save(),C.fillStyle=ue,Ec(C,N,fe&&Ea(R,Z,ne)),C.beginPath();const ve=!!A.pathSegment(C,H);let Me;if(fe){ve?C.closePath():Yo(C,M,ne,R);const Oe=!!M.pathSegment(C,Y,{move:ve,reverse:!0});Me=ve&&Oe,Me||Yo(C,M,Z,R)}C.closePath(),C.fill(Me?"evenodd":"nonzero"),C.restore()}}function Ec(C,b,A){const{top:M,bottom:R}=b.chart.chartArea,{property:I,start:N,end:z}=A||{};I==="x"&&(C.beginPath(),C.rect(N,M,z-N,R-M),C.clip())}function Yo(C,b,A,M){const R=b.interpolate(A,M);R&&C.lineTo(R.x,R.y)}var Pc={id:"filler",afterDatasetsUpdate(C,b,A){const M=(C.data.datasets||[]).length,R=[];let I,N,z,H;for(N=0;N<M;++N)I=C.getDatasetMeta(N),z=I.dataset,H=null,z&&z.options&&z instanceof qn&&(H={visible:C.isDatasetVisible(N),index:N,fill:dc(z,N,M),chart:C,axis:I.controller.options.indexAxis,scale:I.vScale,line:z}),I.$filler=H,R.push(H);for(N=0;N<M;++N)H=R[N],!(!H||H.fill===!1)&&(H.fill=hc(R,N,A.propagate))},beforeDraw(C,b,A){const M=A.drawTime==="beforeDraw",R=C.getSortedVisibleDatasetMetas(),I=C.chartArea;for(let N=R.length-1;N>=0;--N){const z=R[N].$filler;z&&(z.line.updateControlPoints(I,z.axis),M&&z.fill&&Ra(C.ctx,z,I))}},beforeDatasetsDraw(C,b,A){if(A.drawTime!=="beforeDatasetsDraw")return;const M=C.getSortedVisibleDatasetMetas();for(let R=M.length-1;R>=0;--R){const I=M[R].$filler;zo(I)&&Ra(C.ctx,I,C.chartArea)}},beforeDatasetDraw(C,b,A){const M=b.meta.$filler;!zo(M)||A.drawTime!=="beforeDatasetDraw"||Ra(C.ctx,M,C.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Xo=(C,b)=>{let{boxHeight:A=b,boxWidth:M=b}=C;return C.usePointStyle&&(A=Math.min(A,b),M=C.pointStyleWidth||Math.min(M,b)),{boxWidth:M,boxHeight:A,itemHeight:Math.max(b,A)}},Rc=(C,b)=>C!==null&&b!==null&&C.datasetIndex===b.datasetIndex&&C.index===b.index;class jo extends pn{constructor(b){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=b.chart,this.options=b.options,this.ctx=b.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(b,A,M){this.maxWidth=b,this.maxHeight=A,this._margins=M,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const b=this.options.labels||{};let A=y(b.generateLabels,[this.chart],this)||[];b.filter&&(A=A.filter(M=>b.filter(M,this.chart.data))),b.sort&&(A=A.sort((M,R)=>b.sort(M,R,this.chart.data))),this.options.reverse&&A.reverse(),this.legendItems=A}fit(){const{options:b,ctx:A}=this;if(!b.display){this.width=this.height=0;return}const M=b.labels,R=qt(M.font),I=R.size,N=this._computeTitleHeight(),{boxWidth:z,itemHeight:H}=Xo(M,I);let Y,Z;A.font=R.string,this.isHorizontal()?(Y=this.maxWidth,Z=this._fitRows(N,I,z,H)+10):(Z=this.maxHeight,Y=this._fitCols(N,I,z,H)+10),this.width=Math.min(Y,b.maxWidth||this.maxWidth),this.height=Math.min(Z,b.maxHeight||this.maxHeight)}_fitRows(b,A,M,R){const{ctx:I,maxWidth:N,options:{labels:{padding:z}}}=this,H=this.legendHitBoxes=[],Y=this.lineWidths=[0],Z=R+z;let ne=b;I.textAlign="left",I.textBaseline="middle";let ue=-1,fe=-Z;return this.legendItems.forEach((ve,Me)=>{const Oe=M+A/2+I.measureText(ve.text).width;(Me===0||Y[Y.length-1]+Oe+2*z>N)&&(ne+=Z,Y[Y.length-(Me>0?0:1)]=0,fe+=Z,ue++),H[Me]={left:0,top:fe,row:ue,width:Oe,height:R},Y[Y.length-1]+=Oe+z}),ne}_fitCols(b,A,M,R){const{ctx:I,maxHeight:N,options:{labels:{padding:z}}}=this,H=this.legendHitBoxes=[],Y=this.columnSizes=[],Z=N-b;let ne=z,ue=0,fe=0,ve=0,Me=0;return this.legendItems.forEach((Oe,Be)=>{const Ye=M+A/2+I.measureText(Oe.text).width;Be>0&&fe+R+2*z>Z&&(ne+=ue+z,Y.push({width:ue,height:fe}),ve+=ue+z,Me++,ue=fe=0),H[Be]={left:ve,top:fe,col:Me,width:Ye,height:R},ue=Math.max(ue,Ye),fe+=R+z}),ne+=ue,Y.push({width:ue,height:fe}),ne}adjustHitBoxes(){if(!this.options.display)return;const b=this._computeTitleHeight(),{legendHitBoxes:A,options:{align:M,labels:{padding:R},rtl:I}}=this,N=On(I,this.left,this.width);if(this.isHorizontal()){let z=0,H=at(M,this.left+R,this.right-this.lineWidths[z]);for(const Y of A)z!==Y.row&&(z=Y.row,H=at(M,this.left+R,this.right-this.lineWidths[z])),Y.top+=this.top+b+R,Y.left=N.leftForLtr(N.x(H),Y.width),H+=Y.width+R}else{let z=0,H=at(M,this.top+b+R,this.bottom-this.columnSizes[z].height);for(const Y of A)Y.col!==z&&(z=Y.col,H=at(M,this.top+b+R,this.bottom-this.columnSizes[z].height)),Y.top=H,Y.left+=this.left+R,Y.left=N.leftForLtr(N.x(Y.left),Y.width),H+=Y.height+R}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const b=this.ctx;tr(b,this),this._draw(),Tn(b)}}_draw(){const{options:b,columnSizes:A,lineWidths:M,ctx:R}=this,{align:I,labels:N}=b,z=Mt.color,H=On(b.rtl,this.left,this.width),Y=qt(N.font),{color:Z,padding:ne}=N,ue=Y.size,fe=ue/2;let ve;this.drawTitle(),R.textAlign=H.textAlign("left"),R.textBaseline="middle",R.lineWidth=.5,R.font=Y.string;const{boxWidth:Me,boxHeight:Oe,itemHeight:Be}=Xo(N,ue),Ye=function(pt,Et,Tt){if(isNaN(Me)||Me<=0||isNaN(Oe)||Oe<0)return;R.save();const zt=f(Tt.lineWidth,1);if(R.fillStyle=f(Tt.fillStyle,z),R.lineCap=f(Tt.lineCap,"butt"),R.lineDashOffset=f(Tt.lineDashOffset,0),R.lineJoin=f(Tt.lineJoin,"miter"),R.lineWidth=zt,R.strokeStyle=f(Tt.strokeStyle,z),R.setLineDash(f(Tt.lineDash,[])),N.usePointStyle){const Ht={radius:Oe*Math.SQRT2/2,pointStyle:Tt.pointStyle,rotation:Tt.rotation,borderWidth:zt},Vt=H.xPlus(pt,Me/2),tn=Et+fe;Dr(R,Ht,Vt,tn,N.pointStyleWidth&&Me)}else{const Ht=Et+Math.max((ue-Oe)/2,0),Vt=H.leftForLtr(pt,Me),tn=Cn(Tt.borderRadius);R.beginPath(),Object.values(tn).some(cn=>cn!==0)?zn(R,{x:Vt,y:Ht,w:Me,h:Oe,radius:tn}):R.rect(Vt,Ht,Me,Oe),R.fill(),zt!==0&&R.stroke()}R.restore()},nt=function(pt,Et,Tt){An(R,Tt.text,pt,Et+Be/2,Y,{strikethrough:Tt.hidden,textAlign:H.textAlign(Tt.textAlign)})},et=this.isHorizontal(),Ke=this._computeTitleHeight();et?ve={x:at(I,this.left+ne,this.right-M[0]),y:this.top+ne+Ke,line:0}:ve={x:this.left+ne,y:at(I,this.top+Ke+ne,this.bottom-A[0].height),line:0},Vr(this.ctx,b.textDirection);const ft=Be+ne;this.legendItems.forEach((pt,Et)=>{R.strokeStyle=pt.fontColor||Z,R.fillStyle=pt.fontColor||Z;const Tt=R.measureText(pt.text).width,zt=H.textAlign(pt.textAlign||(pt.textAlign=N.textAlign)),Ht=Me+fe+Tt;let Vt=ve.x,tn=ve.y;H.setWidth(this.width),et?Et>0&&Vt+Ht+ne>this.right&&(tn=ve.y+=ft,ve.line++,Vt=ve.x=at(I,this.left+ne,this.right-M[ve.line])):Et>0&&tn+ft>this.bottom&&(Vt=ve.x=Vt+A[ve.line].width+ne,ve.line++,tn=ve.y=at(I,this.top+Ke+ne,this.bottom-A[ve.line].height));const cn=H.x(Vt);Ye(cn,tn,pt),Vt=Ct(zt,Vt+Me+fe,et?Vt+Ht:this.right,b.rtl),nt(H.x(Vt),tn,pt),et?ve.x+=Ht+ne:ve.y+=ft}),de(this.ctx,b.textDirection)}drawTitle(){const b=this.options,A=b.title,M=qt(A.font),R=en(A.padding);if(!A.display)return;const I=On(b.rtl,this.left,this.width),N=this.ctx,z=A.position,H=M.size/2,Y=R.top+H;let Z,ne=this.left,ue=this.width;if(this.isHorizontal())ue=Math.max(...this.lineWidths),Z=this.top+Y,ne=at(b.align,ne,this.right-ue);else{const ve=this.columnSizes.reduce((Me,Oe)=>Math.max(Me,Oe.height),0);Z=Y+at(b.align,this.top,this.bottom-ve-b.labels.padding-this._computeTitleHeight())}const fe=at(z,ne,ne+ue);N.textAlign=I.textAlign(St(z)),N.textBaseline="middle",N.strokeStyle=A.color,N.fillStyle=A.color,N.font=M.string,An(N,A.text,fe,Z,M)}_computeTitleHeight(){const b=this.options.title,A=qt(b.font),M=en(b.padding);return b.display?A.lineHeight+M.height:0}_getLegendItemAt(b,A){let M,R,I;if(ae(b,this.left,this.right)&&ae(A,this.top,this.bottom)){for(I=this.legendHitBoxes,M=0;M<I.length;++M)if(R=I[M],ae(b,R.left,R.left+R.width)&&ae(A,R.top,R.top+R.height))return this.legendItems[M]}return null}handleEvent(b){const A=this.options;if(!Dc(b.type,A))return;const M=this._getLegendItemAt(b.x,b.y);if(b.type==="mousemove"||b.type==="mouseout"){const R=this._hoveredItem,I=Rc(R,M);R&&!I&&y(A.onLeave,[b,R,this],this),this._hoveredItem=M,M&&!I&&y(A.onHover,[b,M,this],this)}else M&&y(A.onClick,[b,M,this],this)}}function Dc(C,b){return!!((C==="mousemove"||C==="mouseout")&&(b.onHover||b.onLeave)||b.onClick&&(C==="click"||C==="mouseup"))}var Ic={id:"legend",_element:jo,start(C,b,A){const M=C.legend=new jo({ctx:C.ctx,options:A,chart:C});on.configure(C,M,A),on.addBox(C,M)},stop(C){on.removeBox(C,C.legend),delete C.legend},beforeUpdate(C,b,A){const M=C.legend;on.configure(C,M,A),M.options=A},afterUpdate(C){const b=C.legend;b.buildLabels(),b.adjustHitBoxes()},afterEvent(C,b){b.replay||C.legend.handleEvent(b.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(C,b,A){const M=b.datasetIndex,R=A.chart;R.isDatasetVisible(M)?(R.hide(M),b.hidden=!0):(R.show(M),b.hidden=!1)},onHover:null,onLeave:null,labels:{color:C=>C.chart.options.color,boxWidth:40,padding:10,generateLabels(C){const b=C.data.datasets,{labels:{usePointStyle:A,pointStyle:M,textAlign:R,color:I}}=C.legend.options;return C._getSortedDatasetMetas().map(N=>{const z=N.controller.getStyle(A?0:void 0),H=en(z.borderWidth);return{text:b[N.index].label,fillStyle:z.backgroundColor,fontColor:I,hidden:!N.visible,lineCap:z.borderCapStyle,lineDash:z.borderDash,lineDashOffset:z.borderDashOffset,lineJoin:z.borderJoinStyle,lineWidth:(H.width+H.height)/4,strokeStyle:z.borderColor,pointStyle:M||z.pointStyle,rotation:z.rotation,textAlign:R||z.textAlign,borderRadius:0,datasetIndex:N.index}},this)}},title:{color:C=>C.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:C=>!C.startsWith("on"),labels:{_scriptable:C=>!["generateLabels","filter","sort"].includes(C)}}};class Da extends pn{constructor(b){super(),this.chart=b.chart,this.options=b.options,this.ctx=b.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(b,A){const M=this.options;if(this.left=0,this.top=0,!M.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=b,this.height=this.bottom=A;const R=l(M.text)?M.text.length:1;this._padding=en(M.padding);const I=R*qt(M.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=I:this.width=I}isHorizontal(){const b=this.options.position;return b==="top"||b==="bottom"}_drawArgs(b){const{top:A,left:M,bottom:R,right:I,options:N}=this,z=N.align;let H=0,Y,Z,ne;return this.isHorizontal()?(Z=at(z,M,I),ne=A+b,Y=I-M):(N.position==="left"?(Z=M+b,ne=at(z,R,A),H=K*-.5):(Z=I-b,ne=at(z,A,R),H=K*.5),Y=R-A),{titleX:Z,titleY:ne,maxWidth:Y,rotation:H}}draw(){const b=this.ctx,A=this.options;if(!A.display)return;const M=qt(A.font),I=M.lineHeight/2+this._padding.top,{titleX:N,titleY:z,maxWidth:H,rotation:Y}=this._drawArgs(I);An(b,A.text,0,0,M,{color:A.color,maxWidth:H,rotation:Y,textAlign:St(A.align),textBaseline:"middle",translation:[N,z]})}}function Lc(C,b){const A=new Da({ctx:C.ctx,options:b,chart:C});on.configure(C,A,b),on.addBox(C,A),C.titleBlock=A}var $c={id:"title",_element:Da,start(C,b,A){Lc(C,A)},stop(C){const b=C.titleBlock;on.removeBox(C,b),delete C.titleBlock},beforeUpdate(C,b,A){const M=C.titleBlock;on.configure(C,M,A),M.options=A},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ui=new WeakMap;var Nc={id:"subtitle",start(C,b,A){const M=new Da({ctx:C.ctx,options:A,chart:C});on.configure(C,M,A),on.addBox(C,M),Ui.set(C,M)},stop(C){on.removeBox(C,Ui.get(C)),Ui.delete(C)},beforeUpdate(C,b,A){const M=Ui.get(C);on.configure(C,M,A),M.options=A},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Kr={average(C){if(!C.length)return!1;let b,A,M=0,R=0,I=0;for(b=0,A=C.length;b<A;++b){const N=C[b].element;if(N&&N.hasValue()){const z=N.tooltipPosition();M+=z.x,R+=z.y,++I}}return{x:M/I,y:R/I}},nearest(C,b){if(!C.length)return!1;let A=b.x,M=b.y,R=Number.POSITIVE_INFINITY,I,N,z;for(I=0,N=C.length;I<N;++I){const H=C[I].element;if(H&&H.hasValue()){const Y=H.getCenterPoint(),Z=xe(b,Y);Z<R&&(R=Z,z=H)}}if(z){const H=z.tooltipPosition();A=H.x,M=H.y}return{x:A,y:M}}};function En(C,b){return b&&(l(b)?Array.prototype.push.apply(C,b):C.push(b)),C}function kn(C){return(typeof C=="string"||C instanceof String)&&C.indexOf(`
`)>-1?C.split(`
`):C}function Oc(C,b){const{element:A,datasetIndex:M,index:R}=b,I=C.getDatasetMeta(M).controller,{label:N,value:z}=I.getLabelAndValue(R);return{chart:C,label:N,parsed:I.getParsed(R),raw:C.data.datasets[M].data[R],formattedValue:z,dataset:I.getDataset(),dataIndex:R,datasetIndex:M,element:A}}function qo(C,b){const A=C.chart.ctx,{body:M,footer:R,title:I}=C,{boxWidth:N,boxHeight:z}=b,H=qt(b.bodyFont),Y=qt(b.titleFont),Z=qt(b.footerFont),ne=I.length,ue=R.length,fe=M.length,ve=en(b.padding);let Me=ve.height,Oe=0,Be=M.reduce((et,Ke)=>et+Ke.before.length+Ke.lines.length+Ke.after.length,0);if(Be+=C.beforeBody.length+C.afterBody.length,ne&&(Me+=ne*Y.lineHeight+(ne-1)*b.titleSpacing+b.titleMarginBottom),Be){const et=b.displayColors?Math.max(z,H.lineHeight):H.lineHeight;Me+=fe*et+(Be-fe)*H.lineHeight+(Be-1)*b.bodySpacing}ue&&(Me+=b.footerMarginTop+ue*Z.lineHeight+(ue-1)*b.footerSpacing);let Ye=0;const nt=function(et){Oe=Math.max(Oe,A.measureText(et).width+Ye)};return A.save(),A.font=Y.string,_(C.title,nt),A.font=H.string,_(C.beforeBody.concat(C.afterBody),nt),Ye=b.displayColors?N+2+b.boxPadding:0,_(M,et=>{_(et.before,nt),_(et.lines,nt),_(et.after,nt)}),Ye=0,A.font=Z.string,_(C.footer,nt),A.restore(),Oe+=ve.width,{width:Oe,height:Me}}function kc(C,b){const{y:A,height:M}=b;return A<M/2?"top":A>C.height-M/2?"bottom":"center"}function Bc(C,b,A,M){const{x:R,width:I}=M,N=A.caretSize+A.caretPadding;if(C==="left"&&R+I+N>b.width||C==="right"&&R-I-N<0)return!0}function Vc(C,b,A,M){const{x:R,width:I}=A,{width:N,chartArea:{left:z,right:H}}=C;let Y="center";return M==="center"?Y=R<=(z+H)/2?"left":"right":R<=I/2?Y="left":R>=N-I/2&&(Y="right"),Bc(Y,C,b,A)&&(Y="center"),Y}function Ko(C,b,A){const M=A.yAlign||b.yAlign||kc(C,A);return{xAlign:A.xAlign||b.xAlign||Vc(C,b,A,M),yAlign:M}}function Fc(C,b){let{x:A,width:M}=C;return b==="right"?A-=M:b==="center"&&(A-=M/2),A}function Uc(C,b,A){let{y:M,height:R}=C;return b==="top"?M+=A:b==="bottom"?M-=R+A:M-=R/2,M}function Zo(C,b,A,M){const{caretSize:R,caretPadding:I,cornerRadius:N}=C,{xAlign:z,yAlign:H}=A,Y=R+I,{topLeft:Z,topRight:ne,bottomLeft:ue,bottomRight:fe}=Cn(N);let ve=Fc(b,z);const Me=Uc(b,H,Y);return H==="center"?z==="left"?ve+=Y:z==="right"&&(ve-=Y):z==="left"?ve-=Math.max(Z,ue)+R:z==="right"&&(ve+=Math.max(ne,fe)+R),{x:ze(ve,0,M.width-b.width),y:ze(Me,0,M.height-b.height)}}function zi(C,b,A){const M=en(A.padding);return b==="center"?C.x+C.width/2:b==="right"?C.x+C.width-M.right:C.x+M.left}function Jo(C){return En([],kn(C))}function zc(C,b,A){return yn(C,{tooltip:b,tooltipItems:A,type:"tooltip"})}function Qo(C,b){const A=b&&b.dataset&&b.dataset.tooltip&&b.dataset.tooltip.callbacks;return A?C.override(A):C}class Ia extends pn{constructor(b){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=b.chart||b._chart,this._chart=this.chart,this.options=b.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(b){this.options=b,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const b=this._cachedAnimations;if(b)return b;const A=this.chart,M=this.options.setContext(this.getContext()),R=M.enabled&&A.options.animation&&M.animations,I=new pa(this.chart,R);return R._cacheable&&(this._cachedAnimations=Object.freeze(I)),I}getContext(){return this.$context||(this.$context=zc(this.chart.getContext(),this,this._tooltipItems))}getTitle(b,A){const{callbacks:M}=A,R=M.beforeTitle.apply(this,[b]),I=M.title.apply(this,[b]),N=M.afterTitle.apply(this,[b]);let z=[];return z=En(z,kn(R)),z=En(z,kn(I)),z=En(z,kn(N)),z}getBeforeBody(b,A){return Jo(A.callbacks.beforeBody.apply(this,[b]))}getBody(b,A){const{callbacks:M}=A,R=[];return _(b,I=>{const N={before:[],lines:[],after:[]},z=Qo(M,I);En(N.before,kn(z.beforeLabel.call(this,I))),En(N.lines,z.label.call(this,I)),En(N.after,kn(z.afterLabel.call(this,I))),R.push(N)}),R}getAfterBody(b,A){return Jo(A.callbacks.afterBody.apply(this,[b]))}getFooter(b,A){const{callbacks:M}=A,R=M.beforeFooter.apply(this,[b]),I=M.footer.apply(this,[b]),N=M.afterFooter.apply(this,[b]);let z=[];return z=En(z,kn(R)),z=En(z,kn(I)),z=En(z,kn(N)),z}_createItems(b){const A=this._active,M=this.chart.data,R=[],I=[],N=[];let z=[],H,Y;for(H=0,Y=A.length;H<Y;++H)z.push(Oc(this.chart,A[H]));return b.filter&&(z=z.filter((Z,ne,ue)=>b.filter(Z,ne,ue,M))),b.itemSort&&(z=z.sort((Z,ne)=>b.itemSort(Z,ne,M))),_(z,Z=>{const ne=Qo(b.callbacks,Z);R.push(ne.labelColor.call(this,Z)),I.push(ne.labelPointStyle.call(this,Z)),N.push(ne.labelTextColor.call(this,Z))}),this.labelColors=R,this.labelPointStyles=I,this.labelTextColors=N,this.dataPoints=z,z}update(b,A){const M=this.options.setContext(this.getContext()),R=this._active;let I,N=[];if(!R.length)this.opacity!==0&&(I={opacity:0});else{const z=Kr[M.position].call(this,R,this._eventPosition);N=this._createItems(M),this.title=this.getTitle(N,M),this.beforeBody=this.getBeforeBody(N,M),this.body=this.getBody(N,M),this.afterBody=this.getAfterBody(N,M),this.footer=this.getFooter(N,M);const H=this._size=qo(this,M),Y=Object.assign({},z,H),Z=Ko(this.chart,M,Y),ne=Zo(M,Y,Z,this.chart);this.xAlign=Z.xAlign,this.yAlign=Z.yAlign,I={opacity:1,x:ne.x,y:ne.y,width:H.width,height:H.height,caretX:z.x,caretY:z.y}}this._tooltipItems=N,this.$context=void 0,I&&this._resolveAnimations().update(this,I),b&&M.external&&M.external.call(this,{chart:this.chart,tooltip:this,replay:A})}drawCaret(b,A,M,R){const I=this.getCaretPosition(b,M,R);A.lineTo(I.x1,I.y1),A.lineTo(I.x2,I.y2),A.lineTo(I.x3,I.y3)}getCaretPosition(b,A,M){const{xAlign:R,yAlign:I}=this,{caretSize:N,cornerRadius:z}=M,{topLeft:H,topRight:Y,bottomLeft:Z,bottomRight:ne}=Cn(z),{x:ue,y:fe}=b,{width:ve,height:Me}=A;let Oe,Be,Ye,nt,et,Ke;return I==="center"?(et=fe+Me/2,R==="left"?(Oe=ue,Be=Oe-N,nt=et+N,Ke=et-N):(Oe=ue+ve,Be=Oe+N,nt=et-N,Ke=et+N),Ye=Oe):(R==="left"?Be=ue+Math.max(H,Z)+N:R==="right"?Be=ue+ve-Math.max(Y,ne)-N:Be=this.caretX,I==="top"?(nt=fe,et=nt-N,Oe=Be-N,Ye=Be+N):(nt=fe+Me,et=nt+N,Oe=Be+N,Ye=Be-N),Ke=nt),{x1:Oe,x2:Be,x3:Ye,y1:nt,y2:et,y3:Ke}}drawTitle(b,A,M){const R=this.title,I=R.length;let N,z,H;if(I){const Y=On(M.rtl,this.x,this.width);for(b.x=zi(this,M.titleAlign,M),A.textAlign=Y.textAlign(M.titleAlign),A.textBaseline="middle",N=qt(M.titleFont),z=M.titleSpacing,A.fillStyle=M.titleColor,A.font=N.string,H=0;H<I;++H)A.fillText(R[H],Y.x(b.x),b.y+N.lineHeight/2),b.y+=N.lineHeight+z,H+1===I&&(b.y+=M.titleMarginBottom-z)}}_drawColorBox(b,A,M,R,I){const N=this.labelColors[M],z=this.labelPointStyles[M],{boxHeight:H,boxWidth:Y,boxPadding:Z}=I,ne=qt(I.bodyFont),ue=zi(this,"left",I),fe=R.x(ue),ve=H<ne.lineHeight?(ne.lineHeight-H)/2:0,Me=A.y+ve;if(I.usePointStyle){const Oe={radius:Math.min(Y,H)/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:1},Be=R.leftForLtr(fe,Y)+Y/2,Ye=Me+H/2;b.strokeStyle=I.multiKeyBackground,b.fillStyle=I.multiKeyBackground,_r(b,Oe,Be,Ye),b.strokeStyle=N.borderColor,b.fillStyle=N.backgroundColor,_r(b,Oe,Be,Ye)}else{b.lineWidth=c(N.borderWidth)?Math.max(...Object.values(N.borderWidth)):N.borderWidth||1,b.strokeStyle=N.borderColor,b.setLineDash(N.borderDash||[]),b.lineDashOffset=N.borderDashOffset||0;const Oe=R.leftForLtr(fe,Y-Z),Be=R.leftForLtr(R.xPlus(fe,1),Y-Z-2),Ye=Cn(N.borderRadius);Object.values(Ye).some(nt=>nt!==0)?(b.beginPath(),b.fillStyle=I.multiKeyBackground,zn(b,{x:Oe,y:Me,w:Y,h:H,radius:Ye}),b.fill(),b.stroke(),b.fillStyle=N.backgroundColor,b.beginPath(),zn(b,{x:Be,y:Me+1,w:Y-2,h:H-2,radius:Ye}),b.fill()):(b.fillStyle=I.multiKeyBackground,b.fillRect(Oe,Me,Y,H),b.strokeRect(Oe,Me,Y,H),b.fillStyle=N.backgroundColor,b.fillRect(Be,Me+1,Y-2,H-2))}b.fillStyle=this.labelTextColors[M]}drawBody(b,A,M){const{body:R}=this,{bodySpacing:I,bodyAlign:N,displayColors:z,boxHeight:H,boxWidth:Y,boxPadding:Z}=M,ne=qt(M.bodyFont);let ue=ne.lineHeight,fe=0;const ve=On(M.rtl,this.x,this.width),Me=function(Et){A.fillText(Et,ve.x(b.x+fe),b.y+ue/2),b.y+=ue+I},Oe=ve.textAlign(N);let Be,Ye,nt,et,Ke,ft,pt;for(A.textAlign=N,A.textBaseline="middle",A.font=ne.string,b.x=zi(this,Oe,M),A.fillStyle=M.bodyColor,_(this.beforeBody,Me),fe=z&&Oe!=="right"?N==="center"?Y/2+Z:Y+2+Z:0,et=0,ft=R.length;et<ft;++et){for(Be=R[et],Ye=this.labelTextColors[et],A.fillStyle=Ye,_(Be.before,Me),nt=Be.lines,z&&nt.length&&(this._drawColorBox(A,b,et,ve,M),ue=Math.max(ne.lineHeight,H)),Ke=0,pt=nt.length;Ke<pt;++Ke)Me(nt[Ke]),ue=ne.lineHeight;_(Be.after,Me)}fe=0,ue=ne.lineHeight,_(this.afterBody,Me),b.y-=I}drawFooter(b,A,M){const R=this.footer,I=R.length;let N,z;if(I){const H=On(M.rtl,this.x,this.width);for(b.x=zi(this,M.footerAlign,M),b.y+=M.footerMarginTop,A.textAlign=H.textAlign(M.footerAlign),A.textBaseline="middle",N=qt(M.footerFont),A.fillStyle=M.footerColor,A.font=N.string,z=0;z<I;++z)A.fillText(R[z],H.x(b.x),b.y+N.lineHeight/2),b.y+=N.lineHeight+M.footerSpacing}}drawBackground(b,A,M,R){const{xAlign:I,yAlign:N}=this,{x:z,y:H}=b,{width:Y,height:Z}=M,{topLeft:ne,topRight:ue,bottomLeft:fe,bottomRight:ve}=Cn(R.cornerRadius);A.fillStyle=R.backgroundColor,A.strokeStyle=R.borderColor,A.lineWidth=R.borderWidth,A.beginPath(),A.moveTo(z+ne,H),N==="top"&&this.drawCaret(b,A,M,R),A.lineTo(z+Y-ue,H),A.quadraticCurveTo(z+Y,H,z+Y,H+ue),N==="center"&&I==="right"&&this.drawCaret(b,A,M,R),A.lineTo(z+Y,H+Z-ve),A.quadraticCurveTo(z+Y,H+Z,z+Y-ve,H+Z),N==="bottom"&&this.drawCaret(b,A,M,R),A.lineTo(z+fe,H+Z),A.quadraticCurveTo(z,H+Z,z,H+Z-fe),N==="center"&&I==="left"&&this.drawCaret(b,A,M,R),A.lineTo(z,H+ne),A.quadraticCurveTo(z,H,z+ne,H),A.closePath(),A.fill(),R.borderWidth>0&&A.stroke()}_updateAnimationTarget(b){const A=this.chart,M=this.$animations,R=M&&M.x,I=M&&M.y;if(R||I){const N=Kr[b.position].call(this,this._active,this._eventPosition);if(!N)return;const z=this._size=qo(this,b),H=Object.assign({},N,this._size),Y=Ko(A,b,H),Z=Zo(b,H,Y,A);(R._to!==Z.x||I._to!==Z.y)&&(this.xAlign=Y.xAlign,this.yAlign=Y.yAlign,this.width=z.width,this.height=z.height,this.caretX=N.x,this.caretY=N.y,this._resolveAnimations().update(this,Z))}}_willRender(){return!!this.opacity}draw(b){const A=this.options.setContext(this.getContext());let M=this.opacity;if(!M)return;this._updateAnimationTarget(A);const R={width:this.width,height:this.height},I={x:this.x,y:this.y};M=Math.abs(M)<.001?0:M;const N=en(A.padding),z=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;A.enabled&&z&&(b.save(),b.globalAlpha=M,this.drawBackground(I,b,R,A),Vr(b,A.textDirection),I.y+=N.top,this.drawTitle(I,b,A),this.drawBody(I,b,A),this.drawFooter(I,b,A),de(b,A.textDirection),b.restore())}getActiveElements(){return this._active||[]}setActiveElements(b,A){const M=this._active,R=b.map(({datasetIndex:z,index:H})=>{const Y=this.chart.getDatasetMeta(z);if(!Y)throw new Error("Cannot find a dataset at index "+z);return{datasetIndex:z,element:Y.data[H],index:H}}),I=!S(M,R),N=this._positionChanged(R,A);(I||N)&&(this._active=R,this._eventPosition=A,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(b,A,M=!0){if(A&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const R=this.options,I=this._active||[],N=this._getActiveElements(b,I,A,M),z=this._positionChanged(N,b),H=A||!S(N,I)||z;return H&&(this._active=N,(R.enabled||R.external)&&(this._eventPosition={x:b.x,y:b.y},this.update(!0,A))),H}_getActiveElements(b,A,M,R){const I=this.options;if(b.type==="mouseout")return[];if(!R)return A;const N=this.chart.getElementsAtEventForMode(b,I.mode,I,M);return I.reverse&&N.reverse(),N}_positionChanged(b,A){const{caretX:M,caretY:R,options:I}=this,N=Kr[I.position].call(this,b,A);return N!==!1&&(M!==N.x||R!==N.y)}}Ia.positioners=Kr;var Hc={id:"tooltip",_element:Ia,positioners:Kr,afterInit(C,b,A){A&&(C.tooltip=new Ia({chart:C,options:A}))},beforeUpdate(C,b,A){C.tooltip&&C.tooltip.initialize(A)},reset(C,b,A){C.tooltip&&C.tooltip.initialize(A)},afterDraw(C){const b=C.tooltip;if(b&&b._willRender()){const A={tooltip:b};if(C.notifyPlugins("beforeTooltipDraw",A)===!1)return;b.draw(C.ctx),C.notifyPlugins("afterTooltipDraw",A)}},afterEvent(C,b){if(C.tooltip){const A=b.replay;C.tooltip.handleEvent(b.event,A,b.inChartArea)&&(b.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(C,b)=>b.bodyFont.size,boxWidth:(C,b)=>b.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:r,title(C){if(C.length>0){const b=C[0],A=b.chart.data.labels,M=A?A.length:0;if(this&&this.options&&this.options.mode==="dataset")return b.dataset.label||"";if(b.label)return b.label;if(M>0&&b.dataIndex<M)return A[b.dataIndex]}return""},afterTitle:r,beforeBody:r,beforeLabel:r,label(C){if(this&&this.options&&this.options.mode==="dataset")return C.label+": "+C.formattedValue||C.formattedValue;let b=C.dataset.label||"";b&&(b+=": ");const A=C.formattedValue;return s(A)||(b+=A),b},labelColor(C){const A=C.chart.getDatasetMeta(C.datasetIndex).controller.getStyle(C.dataIndex);return{borderColor:A.borderColor,backgroundColor:A.backgroundColor,borderWidth:A.borderWidth,borderDash:A.borderDash,borderDashOffset:A.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(C){const A=C.chart.getDatasetMeta(C.datasetIndex).controller.getStyle(C.dataIndex);return{pointStyle:A.pointStyle,rotation:A.rotation}},afterLabel:r,afterBody:r,beforeFooter:r,footer:r,afterFooter:r}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:C=>C!=="filter"&&C!=="itemSort"&&C!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},es=Object.freeze({__proto__:null,Decimation:lc,Filler:Pc,Legend:Ic,SubTitle:Nc,Title:$c,Tooltip:Hc});const Gc=(C,b,A,M)=>(typeof b=="string"?(A=C.push(b)-1,M.unshift({index:A,label:b})):isNaN(b)&&(A=null),A);function Wc(C,b,A,M){const R=C.indexOf(b);if(R===-1)return Gc(C,b,A,M);const I=C.lastIndexOf(b);return R!==I?A:R}const Yc=(C,b)=>C===null?null:ze(Math.round(C),0,b);class Hi extends Xn{constructor(b){super(b),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(b){const A=this._addedLabels;if(A.length){const M=this.getLabels();for(const{index:R,label:I}of A)M[R]===I&&M.splice(R,1);this._addedLabels=[]}super.init(b)}parse(b,A){if(s(b))return null;const M=this.getLabels();return A=isFinite(A)&&M[A]===b?A:Wc(M,b,f(A,b),this._addedLabels),Yc(A,M.length-1)}determineDataLimits(){const{minDefined:b,maxDefined:A}=this.getUserBounds();let{min:M,max:R}=this.getMinMax(!0);this.options.bounds==="ticks"&&(b||(M=0),A||(R=this.getLabels().length-1)),this.min=M,this.max=R}buildTicks(){const b=this.min,A=this.max,M=this.options.offset,R=[];let I=this.getLabels();I=b===0&&A===I.length-1?I:I.slice(b,A+1),this._valueRange=Math.max(I.length-(M?0:1),1),this._startValue=this.min-(M?.5:0);for(let N=b;N<=A;N++)R.push({value:N});return R}getLabelForValue(b){const A=this.getLabels();return b>=0&&b<A.length?A[b]:b}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(b){return typeof b!="number"&&(b=this.parse(b)),b===null?NaN:this.getPixelForDecimal((b-this._startValue)/this._valueRange)}getPixelForTick(b){const A=this.ticks;return b<0||b>A.length-1?null:this.getPixelForValue(A[b].value)}getValueForPixel(b){return Math.round(this._startValue+this.getDecimalForPixel(b)*this._valueRange)}getBasePixel(){return this.bottom}}Hi.id="category",Hi.defaults={ticks:{callback:Hi.prototype.getLabelForValue}};function Xc(C,b){const A=[],{bounds:R,step:I,min:N,max:z,precision:H,count:Y,maxTicks:Z,maxDigits:ne,includeBounds:ue}=C,fe=I||1,ve=Z-1,{min:Me,max:Oe}=b,Be=!s(N),Ye=!s(z),nt=!s(Y),et=(Oe-Me)/(ne+1);let Ke=Se((Oe-Me)/ve/fe)*fe,ft,pt,Et,Tt;if(Ke<1e-14&&!Be&&!Ye)return[{value:Me},{value:Oe}];Tt=Math.ceil(Oe/Ke)-Math.floor(Me/Ke),Tt>ve&&(Ke=Se(Tt*Ke/ve/fe)*fe),s(H)||(ft=Math.pow(10,H),Ke=Math.ceil(Ke*ft)/ft),R==="ticks"?(pt=Math.floor(Me/Ke)*Ke,Et=Math.ceil(Oe/Ke)*Ke):(pt=Me,Et=Oe),Be&&Ye&&I&&_e((z-N)/I,Ke/1e3)?(Tt=Math.round(Math.min((z-N)/Ke,Z)),Ke=(z-N)/Tt,pt=N,Et=z):nt?(pt=Be?N:pt,Et=Ye?z:Et,Tt=Y-1,Ke=(Et-pt)/Tt):(Tt=(Et-pt)/Ke,me(Tt,Math.round(Tt),Ke/1e3)?Tt=Math.round(Tt):Tt=Math.ceil(Tt));const zt=Math.max(se(Ke),se(pt));ft=Math.pow(10,s(H)?zt:H),pt=Math.round(pt*ft)/ft,Et=Math.round(Et*ft)/ft;let Ht=0;for(Be&&(ue&&pt!==N?(A.push({value:N}),pt<N&&Ht++,me(Math.round((pt+Ht*Ke)*ft)/ft,N,ts(N,et,C))&&Ht++):pt<N&&Ht++);Ht<Tt;++Ht)A.push({value:Math.round((pt+Ht*Ke)*ft)/ft});return Ye&&ue&&Et!==z?A.length&&me(A[A.length-1].value,z,ts(z,et,C))?A[A.length-1].value=z:A.push({value:z}):(!Ye||Et===z)&&A.push({value:Et}),A}function ts(C,b,{horizontal:A,minRotation:M}){const R=Le(M),I=(A?Math.sin(R):Math.cos(R))||.001,N=.75*b*(""+C).length;return Math.min(b/I,N)}class Gi extends Xn{constructor(b){super(b),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(b,A){return s(b)||(typeof b=="number"||b instanceof Number)&&!isFinite(+b)?null:+b}handleTickRangeOptions(){const{beginAtZero:b}=this.options,{minDefined:A,maxDefined:M}=this.getUserBounds();let{min:R,max:I}=this;const N=H=>R=A?R:H,z=H=>I=M?I:H;if(b){const H=ge(R),Y=ge(I);H<0&&Y<0?z(0):H>0&&Y>0&&N(0)}if(R===I){let H=1;(I>=Number.MAX_SAFE_INTEGER||R<=Number.MIN_SAFE_INTEGER)&&(H=Math.abs(I*.05)),z(I+H),b||N(R-H)}this.min=R,this.max=I}getTickLimit(){const b=this.options.ticks;let{maxTicksLimit:A,stepSize:M}=b,R;return M?(R=Math.ceil(this.max/M)-Math.floor(this.min/M)+1,R>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${M} would result generating up to ${R} ticks. Limiting to 1000.`),R=1e3)):(R=this.computeTickLimit(),A=A||11),A&&(R=Math.min(A,R)),R}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const b=this.options,A=b.ticks;let M=this.getTickLimit();M=Math.max(2,M);const R={maxTicks:M,bounds:b.bounds,min:b.min,max:b.max,precision:A.precision,step:A.stepSize,count:A.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:A.minRotation||0,includeBounds:A.includeBounds!==!1},I=this._range||this,N=Xc(R,I);return b.bounds==="ticks"&&Te(N,this,"value"),b.reverse?(N.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),N}configure(){const b=this.ticks;let A=this.min,M=this.max;if(super.configure(),this.options.offset&&b.length){const R=(M-A)/Math.max(b.length-1,1)/2;A-=R,M+=R}this._startValue=A,this._endValue=M,this._valueRange=M-A}getLabelForValue(b){return Hn(b,this.chart.options.locale,this.options.ticks.format)}}class La extends Gi{determineDataLimits(){const{min:b,max:A}=this.getMinMax(!0);this.min=u(b)?b:0,this.max=u(A)?A:1,this.handleTickRangeOptions()}computeTickLimit(){const b=this.isHorizontal(),A=b?this.width:this.height,M=Le(this.options.ticks.minRotation),R=(b?Math.sin(M):Math.cos(M))||.001,I=this._resolveTickFontOptions(0);return Math.ceil(A/Math.min(40,I.lineHeight/R))}getPixelForValue(b){return b===null?NaN:this.getPixelForDecimal((b-this._startValue)/this._valueRange)}getValueForPixel(b){return this._startValue+this.getDecimalForPixel(b)*this._valueRange}}La.id="linear",La.defaults={ticks:{callback:Xr.formatters.numeric}};function ns(C){return C/Math.pow(10,Math.floor(we(C)))===1}function jc(C,b){const A=Math.floor(we(b.max)),M=Math.ceil(b.max/Math.pow(10,A)),R=[];let I=d(C.min,Math.pow(10,Math.floor(we(b.min)))),N=Math.floor(we(I)),z=Math.floor(I/Math.pow(10,N)),H=N<0?Math.pow(10,Math.abs(N)):1;do R.push({value:I,major:ns(I)}),++z,z===10&&(z=1,++N,H=N>=0?1:H),I=Math.round(z*Math.pow(10,N)*H)/H;while(N<A||N===A&&z<M);const Y=d(C.max,I);return R.push({value:Y,major:ns(I)}),R}class $a extends Xn{constructor(b){super(b),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(b,A){const M=Gi.prototype.parse.apply(this,[b,A]);if(M===0){this._zero=!0;return}return u(M)&&M>0?M:null}determineDataLimits(){const{min:b,max:A}=this.getMinMax(!0);this.min=u(b)?Math.max(0,b):null,this.max=u(A)?Math.max(0,A):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:b,maxDefined:A}=this.getUserBounds();let M=this.min,R=this.max;const I=H=>M=b?M:H,N=H=>R=A?R:H,z=(H,Y)=>Math.pow(10,Math.floor(we(H))+Y);M===R&&(M<=0?(I(1),N(10)):(I(z(M,-1)),N(z(R,1)))),M<=0&&I(z(R,-1)),R<=0&&N(z(M,1)),this._zero&&this.min!==this._suggestedMin&&M===z(this.min,0)&&I(z(M,-1)),this.min=M,this.max=R}buildTicks(){const b=this.options,A={min:this._userMin,max:this._userMax},M=jc(A,this);return b.bounds==="ticks"&&Te(M,this,"value"),b.reverse?(M.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),M}getLabelForValue(b){return b===void 0?"0":Hn(b,this.chart.options.locale,this.options.ticks.format)}configure(){const b=this.min;super.configure(),this._startValue=we(b),this._valueRange=we(this.max)-we(b)}getPixelForValue(b){return(b===void 0||b===0)&&(b=this.min),b===null||isNaN(b)?NaN:this.getPixelForDecimal(b===this.min?0:(we(b)-this._startValue)/this._valueRange)}getValueForPixel(b){const A=this.getDecimalForPixel(b);return Math.pow(10,this._startValue+A*this._valueRange)}}$a.id="logarithmic",$a.defaults={ticks:{callback:Xr.formatters.logarithmic,major:{enabled:!0}}};function Na(C){const b=C.ticks;if(b.display&&C.display){const A=en(b.backdropPadding);return f(b.font&&b.font.size,Mt.font.size)+A.height}return 0}function qc(C,b,A){return A=l(A)?A:[A],{w:yr(C,b.string,A),h:A.length*b.lineHeight}}function rs(C,b,A,M,R){return C===M||C===R?{start:b-A/2,end:b+A/2}:C<M||C>R?{start:b-A,end:b}:{start:b,end:b+A}}function Kc(C){const b={l:C.left+C._padding.left,r:C.right-C._padding.right,t:C.top+C._padding.top,b:C.bottom-C._padding.bottom},A=Object.assign({},b),M=[],R=[],I=C._pointLabels.length,N=C.options.pointLabels,z=N.centerPointLabels?K/I:0;for(let H=0;H<I;H++){const Y=N.setContext(C.getPointLabelContext(H));R[H]=Y.padding;const Z=C.getPointPosition(H,C.drawingArea+R[H],z),ne=qt(Y.font),ue=qc(C.ctx,ne,C._pointLabels[H]);M[H]=ue;const fe=Ae(C.getIndexAngle(H)+z),ve=Math.round(Ge(fe)),Me=rs(ve,Z.x,ue.w,0,180),Oe=rs(ve,Z.y,ue.h,90,270);Zc(A,b,fe,Me,Oe)}C.setCenterPoint(b.l-A.l,A.r-b.r,b.t-A.t,A.b-b.b),C._pointLabelItems=Jc(C,M,R)}function Zc(C,b,A,M,R){const I=Math.abs(Math.sin(A)),N=Math.abs(Math.cos(A));let z=0,H=0;M.start<b.l?(z=(b.l-M.start)/I,C.l=Math.min(C.l,b.l-z)):M.end>b.r&&(z=(M.end-b.r)/I,C.r=Math.max(C.r,b.r+z)),R.start<b.t?(H=(b.t-R.start)/N,C.t=Math.min(C.t,b.t-H)):R.end>b.b&&(H=(R.end-b.b)/N,C.b=Math.max(C.b,b.b+H))}function Jc(C,b,A){const M=[],R=C._pointLabels.length,I=C.options,N=Na(I)/2,z=C.drawingArea,H=I.pointLabels.centerPointLabels?K/R:0;for(let Y=0;Y<R;Y++){const Z=C.getPointPosition(Y,z+N+A[Y],H),ne=Math.round(Ge(Ae(Z.angle+pe))),ue=b[Y],fe=tu(Z.y,ue.h,ne),ve=Qc(ne),Me=eu(Z.x,ue.w,ve);M.push({x:Z.x,y:fe,textAlign:ve,left:Me,top:fe,right:Me+ue.w,bottom:fe+ue.h})}return M}function Qc(C){return C===0||C===180?"center":C<180?"left":"right"}function eu(C,b,A){return A==="right"?C-=b:A==="center"&&(C-=b/2),C}function tu(C,b,A){return A===90||A===270?C-=b/2:(A>270||A<90)&&(C-=b),C}function nu(C,b){const{ctx:A,options:{pointLabels:M}}=C;for(let R=b-1;R>=0;R--){const I=M.setContext(C.getPointLabelContext(R)),N=qt(I.font),{x:z,y:H,textAlign:Y,left:Z,top:ne,right:ue,bottom:fe}=C._pointLabelItems[R],{backdropColor:ve}=I;if(!s(ve)){const Me=Cn(I.borderRadius),Oe=en(I.backdropPadding);A.fillStyle=ve;const Be=Z-Oe.left,Ye=ne-Oe.top,nt=ue-Z+Oe.width,et=fe-ne+Oe.height;Object.values(Me).some(Ke=>Ke!==0)?(A.beginPath(),zn(A,{x:Be,y:Ye,w:nt,h:et,radius:Me}),A.fill()):A.fillRect(Be,Ye,nt,et)}An(A,C._pointLabels[R],z,H+N.lineHeight/2,N,{color:I.color,textAlign:Y,textBaseline:"middle"})}}function is(C,b,A,M){const{ctx:R}=C;if(A)R.arc(C.xCenter,C.yCenter,b,0,q);else{let I=C.getPointPosition(0,b);R.moveTo(I.x,I.y);for(let N=1;N<M;N++)I=C.getPointPosition(N,b),R.lineTo(I.x,I.y)}}function ru(C,b,A,M){const R=C.ctx,I=b.circular,{color:N,lineWidth:z}=b;!I&&!M||!N||!z||A<0||(R.save(),R.strokeStyle=N,R.lineWidth=z,R.setLineDash(b.borderDash),R.lineDashOffset=b.borderDashOffset,R.beginPath(),is(C,A,I,M),R.closePath(),R.stroke(),R.restore())}function iu(C,b,A){return yn(C,{label:A,index:b,type:"pointLabel"})}class Zr extends Gi{constructor(b){super(b),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const b=this._padding=en(Na(this.options)/2),A=this.width=this.maxWidth-b.width,M=this.height=this.maxHeight-b.height;this.xCenter=Math.floor(this.left+A/2+b.left),this.yCenter=Math.floor(this.top+M/2+b.top),this.drawingArea=Math.floor(Math.min(A,M)/2)}determineDataLimits(){const{min:b,max:A}=this.getMinMax(!1);this.min=u(b)&&!isNaN(b)?b:0,this.max=u(A)&&!isNaN(A)?A:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Na(this.options))}generateTickLabels(b){Gi.prototype.generateTickLabels.call(this,b),this._pointLabels=this.getLabels().map((A,M)=>{const R=y(this.options.pointLabels.callback,[A,M],this);return R||R===0?R:""}).filter((A,M)=>this.chart.getDataVisibility(M))}fit(){const b=this.options;b.display&&b.pointLabels.display?Kc(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(b,A,M,R){this.xCenter+=Math.floor((b-A)/2),this.yCenter+=Math.floor((M-R)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(b,A,M,R))}getIndexAngle(b){const A=q/(this._pointLabels.length||1),M=this.options.startAngle||0;return Ae(b*A+Le(M))}getDistanceFromCenterForValue(b){if(s(b))return NaN;const A=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-b)*A:(b-this.min)*A}getValueForDistanceFromCenter(b){if(s(b))return NaN;const A=b/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-A:this.min+A}getPointLabelContext(b){const A=this._pointLabels||[];if(b>=0&&b<A.length){const M=A[b];return iu(this.getContext(),b,M)}}getPointPosition(b,A,M=0){const R=this.getIndexAngle(b)-pe+M;return{x:Math.cos(R)*A+this.xCenter,y:Math.sin(R)*A+this.yCenter,angle:R}}getPointPositionForValue(b,A){return this.getPointPosition(b,this.getDistanceFromCenterForValue(A))}getBasePosition(b){return this.getPointPositionForValue(b||0,this.getBaseValue())}getPointLabelPosition(b){const{left:A,top:M,right:R,bottom:I}=this._pointLabelItems[b];return{left:A,top:M,right:R,bottom:I}}drawBackground(){const{backgroundColor:b,grid:{circular:A}}=this.options;if(b){const M=this.ctx;M.save(),M.beginPath(),is(this,this.getDistanceFromCenterForValue(this._endValue),A,this._pointLabels.length),M.closePath(),M.fillStyle=b,M.fill(),M.restore()}}drawGrid(){const b=this.ctx,A=this.options,{angleLines:M,grid:R}=A,I=this._pointLabels.length;let N,z,H;if(A.pointLabels.display&&nu(this,I),R.display&&this.ticks.forEach((Y,Z)=>{if(Z!==0){z=this.getDistanceFromCenterForValue(Y.value);const ne=R.setContext(this.getContext(Z-1));ru(this,ne,z,I)}}),M.display){for(b.save(),N=I-1;N>=0;N--){const Y=M.setContext(this.getPointLabelContext(N)),{color:Z,lineWidth:ne}=Y;!ne||!Z||(b.lineWidth=ne,b.strokeStyle=Z,b.setLineDash(Y.borderDash),b.lineDashOffset=Y.borderDashOffset,z=this.getDistanceFromCenterForValue(A.ticks.reverse?this.min:this.max),H=this.getPointPosition(N,z),b.beginPath(),b.moveTo(this.xCenter,this.yCenter),b.lineTo(H.x,H.y),b.stroke())}b.restore()}}drawBorder(){}drawLabels(){const b=this.ctx,A=this.options,M=A.ticks;if(!M.display)return;const R=this.getIndexAngle(0);let I,N;b.save(),b.translate(this.xCenter,this.yCenter),b.rotate(R),b.textAlign="center",b.textBaseline="middle",this.ticks.forEach((z,H)=>{if(H===0&&!A.reverse)return;const Y=M.setContext(this.getContext(H)),Z=qt(Y.font);if(I=this.getDistanceFromCenterForValue(this.ticks[H].value),Y.showLabelBackdrop){b.font=Z.string,N=b.measureText(z.label).width,b.fillStyle=Y.backdropColor;const ne=en(Y.backdropPadding);b.fillRect(-N/2-ne.left,-I-Z.size/2-ne.top,N+ne.width,Z.size+ne.height)}An(b,z.label,0,-I,Z,{color:Y.color})}),b.restore()}drawTitle(){}}Zr.id="radialLinear",Zr.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(C){return C},padding:5,centerPointLabels:!1}},Zr.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Zr.descriptors={angleLines:{_fallback:"grid"}};const Wi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},un=Object.keys(Wi);function au(C,b){return C-b}function as(C,b){if(s(b))return null;const A=C._adapter,{parser:M,round:R,isoWeekday:I}=C._parseOpts;let N=b;return typeof M=="function"&&(N=M(N)),u(N)||(N=typeof M=="string"?A.parse(N,M):A.parse(N)),N===null?null:(R&&(N=R==="week"&&(oe(I)||I===!0)?A.startOf(N,"isoWeek",I):A.startOf(N,R)),+N)}function os(C,b,A,M){const R=un.length;for(let I=un.indexOf(C);I<R-1;++I){const N=Wi[un[I]],z=N.steps?N.steps:Number.MAX_SAFE_INTEGER;if(N.common&&Math.ceil((A-b)/(z*N.size))<=M)return un[I]}return un[R-1]}function ou(C,b,A,M,R){for(let I=un.length-1;I>=un.indexOf(A);I--){const N=un[I];if(Wi[N].common&&C._adapter.diff(R,M,N)>=b-1)return N}return un[A?un.indexOf(A):0]}function su(C){for(let b=un.indexOf(C)+1,A=un.length;b<A;++b)if(Wi[un[b]].common)return un[b]}function ss(C,b,A){if(!A)C[b]=!0;else if(A.length){const{lo:M,hi:R}=Q(A,b),I=A[M]>=b?A[M]:A[R];C[I]=!0}}function lu(C,b,A,M){const R=C._adapter,I=+R.startOf(b[0].value,M),N=b[b.length-1].value;let z,H;for(z=I;z<=N;z=+R.add(z,1,M))H=A[z],H>=0&&(b[H].major=!0);return b}function ls(C,b,A){const M=[],R={},I=b.length;let N,z;for(N=0;N<I;++N)z=b[N],R[z]=N,M.push({value:z,major:!1});return I===0||!A?M:lu(C,M,R,A)}class Jr extends Xn{constructor(b){super(b),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(b,A){const M=b.time||(b.time={}),R=this._adapter=new Mo._date(b.adapters.date);R.init(A),P(M.displayFormats,R.formats()),this._parseOpts={parser:M.parser,round:M.round,isoWeekday:M.isoWeekday},super.init(b),this._normalized=A.normalized}parse(b,A){return b===void 0?null:as(this,b)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const b=this.options,A=this._adapter,M=b.time.unit||"day";let{min:R,max:I,minDefined:N,maxDefined:z}=this.getUserBounds();function H(Y){!N&&!isNaN(Y.min)&&(R=Math.min(R,Y.min)),!z&&!isNaN(Y.max)&&(I=Math.max(I,Y.max))}(!N||!z)&&(H(this._getLabelBounds()),(b.bounds!=="ticks"||b.ticks.source!=="labels")&&H(this.getMinMax(!1))),R=u(R)&&!isNaN(R)?R:+A.startOf(Date.now(),M),I=u(I)&&!isNaN(I)?I:+A.endOf(Date.now(),M)+1,this.min=Math.min(R,I-1),this.max=Math.max(R+1,I)}_getLabelBounds(){const b=this.getLabelTimestamps();let A=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY;return b.length&&(A=b[0],M=b[b.length-1]),{min:A,max:M}}buildTicks(){const b=this.options,A=b.time,M=b.ticks,R=M.source==="labels"?this.getLabelTimestamps():this._generate();b.bounds==="ticks"&&R.length&&(this.min=this._userMin||R[0],this.max=this._userMax||R[R.length-1]);const I=this.min,N=this.max,z=ke(R,I,N);return this._unit=A.unit||(M.autoSkip?os(A.minUnit,this.min,this.max,this._getLabelCapacity(I)):ou(this,z.length,A.minUnit,this.min,this.max)),this._majorUnit=!M.major.enabled||this._unit==="year"?void 0:su(this._unit),this.initOffsets(R),b.reverse&&z.reverse(),ls(this,z,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(b=>+b.value))}initOffsets(b){let A=0,M=0,R,I;this.options.offset&&b.length&&(R=this.getDecimalForValue(b[0]),b.length===1?A=1-R:A=(this.getDecimalForValue(b[1])-R)/2,I=this.getDecimalForValue(b[b.length-1]),b.length===1?M=I:M=(I-this.getDecimalForValue(b[b.length-2]))/2);const N=b.length<3?.5:.25;A=ze(A,0,N),M=ze(M,0,N),this._offsets={start:A,end:M,factor:1/(A+1+M)}}_generate(){const b=this._adapter,A=this.min,M=this.max,R=this.options,I=R.time,N=I.unit||os(I.minUnit,A,M,this._getLabelCapacity(A)),z=f(I.stepSize,1),H=N==="week"?I.isoWeekday:!1,Y=oe(H)||H===!0,Z={};let ne=A,ue,fe;if(Y&&(ne=+b.startOf(ne,"isoWeek",H)),ne=+b.startOf(ne,Y?"day":N),b.diff(M,A,N)>1e5*z)throw new Error(A+" and "+M+" are too far apart with stepSize of "+z+" "+N);const ve=R.ticks.source==="data"&&this.getDataTimestamps();for(ue=ne,fe=0;ue<M;ue=+b.add(ue,z,N),fe++)ss(Z,ue,ve);return(ue===M||R.bounds==="ticks"||fe===1)&&ss(Z,ue,ve),Object.keys(Z).sort((Me,Oe)=>Me-Oe).map(Me=>+Me)}getLabelForValue(b){const A=this._adapter,M=this.options.time;return M.tooltipFormat?A.format(b,M.tooltipFormat):A.format(b,M.displayFormats.datetime)}_tickFormatFunction(b,A,M,R){const I=this.options,N=I.time.displayFormats,z=this._unit,H=this._majorUnit,Y=z&&N[z],Z=H&&N[H],ne=M[A],ue=H&&Z&&ne&&ne.major,fe=this._adapter.format(b,R||(ue?Z:Y)),ve=I.ticks.callback;return ve?y(ve,[fe,A,M],this):fe}generateTickLabels(b){let A,M,R;for(A=0,M=b.length;A<M;++A)R=b[A],R.label=this._tickFormatFunction(R.value,A,b)}getDecimalForValue(b){return b===null?NaN:(b-this.min)/(this.max-this.min)}getPixelForValue(b){const A=this._offsets,M=this.getDecimalForValue(b);return this.getPixelForDecimal((A.start+M)*A.factor)}getValueForPixel(b){const A=this._offsets,M=this.getDecimalForPixel(b)/A.factor-A.end;return this.min+M*(this.max-this.min)}_getLabelSize(b){const A=this.options.ticks,M=this.ctx.measureText(b).width,R=Le(this.isHorizontal()?A.maxRotation:A.minRotation),I=Math.cos(R),N=Math.sin(R),z=this._resolveTickFontOptions(0).size;return{w:M*I+z*N,h:M*N+z*I}}_getLabelCapacity(b){const A=this.options.time,M=A.displayFormats,R=M[A.unit]||M.millisecond,I=this._tickFormatFunction(b,0,ls(this,[b],this._majorUnit),R),N=this._getLabelSize(I),z=Math.floor(this.isHorizontal()?this.width/N.w:this.height/N.h)-1;return z>0?z:1}getDataTimestamps(){let b=this._cache.data||[],A,M;if(b.length)return b;const R=this.getMatchingVisibleMetas();if(this._normalized&&R.length)return this._cache.data=R[0].controller.getAllParsedValues(this);for(A=0,M=R.length;A<M;++A)b=b.concat(R[A].controller.getAllParsedValues(this));return this._cache.data=this.normalize(b)}getLabelTimestamps(){const b=this._cache.labels||[];let A,M;if(b.length)return b;const R=this.getLabels();for(A=0,M=R.length;A<M;++A)b.push(as(this,R[A]));return this._cache.labels=this._normalized?b:this.normalize(b)}normalize(b){return Ze(b.sort(au))}}Jr.id="time",Jr.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function Yi(C,b,A){let M=0,R=C.length-1,I,N,z,H;A?(b>=C[M].pos&&b<=C[R].pos&&({lo:M,hi:R}=be(C,"pos",b)),{pos:I,time:z}=C[M],{pos:N,time:H}=C[R]):(b>=C[M].time&&b<=C[R].time&&({lo:M,hi:R}=be(C,"time",b)),{time:I,pos:z}=C[M],{time:N,pos:H}=C[R]);const Y=N-I;return Y?z+(H-z)*(b-I)/Y:z}class Oa extends Jr{constructor(b){super(b),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const b=this._getTimestampsForTable(),A=this._table=this.buildLookupTable(b);this._minPos=Yi(A,this.min),this._tableRange=Yi(A,this.max)-this._minPos,super.initOffsets(b)}buildLookupTable(b){const{min:A,max:M}=this,R=[],I=[];let N,z,H,Y,Z;for(N=0,z=b.length;N<z;++N)Y=b[N],Y>=A&&Y<=M&&R.push(Y);if(R.length<2)return[{time:A,pos:0},{time:M,pos:1}];for(N=0,z=R.length;N<z;++N)Z=R[N+1],H=R[N-1],Y=R[N],Math.round((Z+H)/2)!==Y&&I.push({time:Y,pos:N/(z-1)});return I}_getTimestampsForTable(){let b=this._cache.all||[];if(b.length)return b;const A=this.getDataTimestamps(),M=this.getLabelTimestamps();return A.length&&M.length?b=this.normalize(A.concat(M)):b=A.length?A:M,b=this._cache.all=b,b}getDecimalForValue(b){return(Yi(this._table,b)-this._minPos)/this._tableRange}getValueForPixel(b){const A=this._offsets,M=this.getDecimalForPixel(b)/A.factor-A.end;return Yi(this._table,M*this._tableRange+this._minPos,!0)}}Oa.id="timeseries",Oa.defaults=Jr.defaults;var cs=Object.freeze({__proto__:null,CategoryScale:Hi,LinearScale:La,LogarithmicScale:$a,RadialLinearScale:Zr,TimeScale:Jr,TimeSeriesScale:Oa});return Kt.register(Io,cs,Ma,es),Kt.helpers={...lr},Kt._adapters=Mo,Kt.Animation=ro,Kt.Animations=pa,Kt.animator=ot,Kt.controllers=_n.controllers.items,Kt.DatasetController=fn,Kt.Element=pn,Kt.elements=Ma,Kt.Interaction=za,Kt.layouts=on,Kt.platforms=to,Kt.Scale=Xn,Kt.Ticks=Xr,Object.assign(Kt,Io,cs,Ma,es,to),Kt.Chart=Kt,typeof window<"u"&&(window.Chart=Kt),Kt})})(chart);var chartExports=chart.exports;const _hoisted_1$e={class:"progress"},_hoisted_2$e={class:"info-card chart-container"},_hoisted_3$d={class:"info-card chart-container"},_hoisted_4$c={class:"progress-chart2"},_sfc_main$e=defineComponent({__name:"ProgressPage",setup(a){const n=reactive({progressData:[15,28,36,45,52,68]}),r=useRouter(),o=()=>{r.push("/")},s=ref(null);let l=null;const c=ref(null);let u=null;const d=()=>{if(!s.value)return;l=init$1(s.value);const f={xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六"]},yAxis:{type:"value",name:"进度（米）"},series:[{data:n.progressData,type:"line",smooth:!0,areaStyle:{}}]};l.setOption(f)};return onMounted(()=>{d(),window.addEventListener("resize",()=>l==null?void 0:l.resize())}),onMounted(()=>{if(c.value){const f=c.value.getContext("2d");f&&(u=new chartExports.Chart(f,{type:"bar",data:{labels:["周一","周二","周三","周四","周五"],datasets:[{label:"日推进环数",data:[14,16,12,15,13],backgroundColor:"#2E86C1",borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"环数"}}}}}))}}),onUnmounted(()=>{u&&u.destroy()}),(f,v)=>{const g=resolveComponent("van-nav-bar");return openBlock(),createElementBlock("div",_hoisted_1$e,[createVNode$1(g,{class:"fixed-nav-bar",title:"进度汇总","left-text":"返回","left-arrow":"",onClickLeft:o}),createBaseVNode("div",_hoisted_2$e,[v[0]||(v[0]=createBaseVNode("h3",null,"施工进度",-1)),createBaseVNode("div",{ref_key:"chartEl",ref:s,class:"progress-chart"},null,512)]),createBaseVNode("div",_hoisted_3$d,[v[1]||(v[1]=createBaseVNode("h3",null,"日拼装数量",-1)),createBaseVNode("div",_hoisted_4$c,[createBaseVNode("canvas",{ref_key:"chartCanvas",ref:c},null,512)])])])}}}),ProgressPage=_export_sfc(_sfc_main$e,[["__scopeId","data-v-c37fbbc0"]]),METHOD_NAMES=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function usePublicAPI(a){function n(o){return(...s)=>{if(!a.value)throw new Error("ECharts is not initialized yet.");return a.value[o].apply(a.value,s)}}function r(){const o=Object.create(null);return METHOD_NAMES.forEach(s=>{o[s]=n(s)}),o}return r()}function useAutoresize(a,n,r){watch([r,a,n],([o,s,l],c,u)=>{let d=null;if(o&&s&&l){const{offsetWidth:f,offsetHeight:v}=o,g=l===!0?{}:l,{throttle:y=100,onResize:_}=g;let S=!1;const x=()=>{s.resize(),_==null||_()},T=y?throttle(x,y):x;d=new ResizeObserver(()=>{!S&&(S=!0,o.offsetWidth===f&&o.offsetHeight===v)||T()}),d.observe(o)}u(()=>{d&&(d.disconnect(),d=null)})})}const autoresizeProps={autoresize:[Boolean,Object]},onRE=/^on[^a-z]/,isOn=a=>onRE.test(a);function omitOn(a){const n={};for(const r in a)isOn(r)||(n[r]=a[r]);return n}function unwrapInjected(a,n){const r=isRef(a)?unref(a):a;return r&&typeof r=="object"&&"value"in r?r.value||n:r||n}const LOADING_OPTIONS_KEY="ecLoadingOptions";function useLoading(a,n,r){const o=inject(LOADING_OPTIONS_KEY,{}),s=computed(()=>({...unwrapInjected(o,{}),...r==null?void 0:r.value}));watchEffect(()=>{const l=a.value;l&&(n.value?l.showLoading(s.value):l.hideLoading())})}const loadingProps={loading:Boolean,loadingOptions:Object};let registered=null;const TAG_NAME="x-vue-echarts";function register(){if(registered!=null)return registered;if(typeof HTMLElement>"u"||typeof customElements>"u")return registered=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(TAG_NAME)}catch{return registered=!1}return registered=!0}document.head.appendChild(document.createElement("style")).textContent=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
`;const wcRegistered=register(),THEME_KEY="ecTheme",INIT_OPTIONS_KEY="ecInitOptions",UPDATE_OPTIONS_KEY="ecUpdateOptions",NATIVE_EVENT_RE=/(^&?~?!?)native:/;var ECharts=defineComponent({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...autoresizeProps,...loadingProps},emits:{},inheritAttrs:!1,setup(a,{attrs:n}){const r=shallowRef(),o=shallowRef(),s=shallowRef(),l=inject(THEME_KEY,null),c=inject(INIT_OPTIONS_KEY,null),u=inject(UPDATE_OPTIONS_KEY,null),{autoresize:d,manualUpdate:f,loading:v,loadingOptions:g}=toRefs(a),y=computed(()=>s.value||a.option||null),_=computed(()=>a.theme||unwrapInjected(l,{})),S=computed(()=>a.initOptions||unwrapInjected(c,{})),x=computed(()=>a.updateOptions||unwrapInjected(u,{})),T=computed(()=>omitOn(n)),w={},E=getCurrentInstance().proxy.$listeners,P={};E?Object.keys(E).forEach(V=>{NATIVE_EVENT_RE.test(V)?w[V.replace(NATIVE_EVENT_RE,"$1")]=E[V]:P[V]=E[V]}):Object.keys(n).filter(V=>isOn(V)).forEach(V=>{let F=V.charAt(2).toLowerCase()+V.slice(3);if(F.indexOf("native:")===0){const U=`on${F.charAt(7).toUpperCase()}${F.slice(8)}`;w[U]=n[V];return}F.substring(F.length-4)==="Once"&&(F=`~${F.substring(0,F.length-4)}`),P[F]=n[V]});function D(V){if(!r.value)return;const F=o.value=init$1(r.value,_.value,S.value);a.group&&(F.group=a.group),Object.keys(P).forEach(W=>{let j=P[W];if(!j)return;let K=W.toLowerCase();K.charAt(0)==="~"&&(K=K.substring(1),j.__once__=!0);let q=F;if(K.indexOf("zr:")===0&&(q=F.getZr(),K=K.substring(3)),j.__once__){delete j.__once__;const ie=j;j=(...ee)=>{ie(...ee),q.off(K,j)}}q.on(K,j)});function U(){F&&!F.isDisposed()&&F.resize()}function G(){const W=V||y.value;W&&F.setOption(W,x.value)}d.value?nextTick(()=>{U(),G()}):G()}function L(V,F){a.manualUpdate&&(s.value=V),o.value?o.value.setOption(V,F||{}):D(V)}function $(){o.value&&(o.value.dispose(),o.value=void 0)}let O=null;watch(f,V=>{typeof O=="function"&&(O(),O=null),V||(O=watch(()=>a.option,(F,U)=>{F&&(o.value?o.value.setOption(F,{notMerge:F!==U,...x.value}):D())},{deep:!0}))},{immediate:!0}),watch([_,S],()=>{$(),D()},{deep:!0}),watchEffect(()=>{a.group&&o.value&&(o.value.group=a.group)});const B=usePublicAPI(o);return useLoading(o,v,g),useAutoresize(o,d,r),onMounted(()=>{D()}),onBeforeUnmount(()=>{wcRegistered&&r.value?r.value.__dispose=$:$()}),{chart:o,root:r,setOption:L,nonEventAttrs:T,nativeListeners:w,...B}},render(){const a={...this.nonEventAttrs,...this.nativeListeners};return a.ref="root",a.class=a.class?["echarts"].concat(a.class):"echarts",h(TAG_NAME,a)}}),mock={exports:{}};(function(module,exports){(function(n,r){module.exports=r()})(commonjsGlobal,function(){return function(a){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return a[o].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=a,r.c=n,r.p="",r(0)}([function(a,n,r){var o=r(1),s=r(3),l=r(5),c=r(20),u=r(23),d=r(25),f;typeof window<"u"&&(f=r(27));/*!
    Mock - 模拟请求 & 模拟数据
    https://github.com/nuysoft/Mock
    墨智 mozhi.gyy@taobao.com nuysoft@gmail.com
*/var v={Handler:o,Random:l,Util:s,XHR:f,RE:c,toJSONSchema:u,valid:d,heredoc:s.heredoc,setup:function(g){return f.setup(g)},_mocked:{}};v.version="1.0.1-beta3",f&&(f.Mock=v),v.mock=function(g,y,_){return arguments.length===1?o.gen(g):(arguments.length===2&&(_=y,y=void 0),f&&(window.XMLHttpRequest=f),v._mocked[g+(y||"")]={rurl:g,rtype:y,template:_},v)},a.exports=v},function(module,exports,__webpack_require__){var Constant=__webpack_require__(2),Util=__webpack_require__(3),Parser=__webpack_require__(4),Random=__webpack_require__(5),RE=__webpack_require__(20),Handler={extend:Util.extend};Handler.gen=function(a,n,r){n=n==null?"":n+"",r=r||{},r={path:r.path||[Constant.GUID],templatePath:r.templatePath||[Constant.GUID++],currentContext:r.currentContext,templateCurrentContext:r.templateCurrentContext||a,root:r.root||r.currentContext,templateRoot:r.templateRoot||r.templateCurrentContext||a};var o=Parser.parse(n),s=Util.type(a),l;return Handler[s]?(l=Handler[s]({type:s,template:a,name:n,parsedName:n&&n.replace(Constant.RE_KEY,"$1"),rule:o,context:r}),r.root||(r.root=l),l):a},Handler.extend({array:function(a){var n=[],r,o;if(a.template.length===0)return n;if(a.rule.parameters)if(a.rule.min===1&&a.rule.max===void 0)a.context.path.push(a.name),a.context.templatePath.push(a.name),n=Random.pick(Handler.gen(a.template,void 0,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template})),a.context.path.pop(),a.context.templatePath.pop();else if(a.rule.parameters[2])a.template.__order_index=a.template.__order_index||0,a.context.path.push(a.name),a.context.templatePath.push(a.name),n=Handler.gen(a.template,void 0,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template})[a.template.__order_index%a.template.length],a.template.__order_index+=+a.rule.parameters[2],a.context.path.pop(),a.context.templatePath.pop();else for(r=0;r<a.rule.count;r++)for(o=0;o<a.template.length;o++)a.context.path.push(n.length),a.context.templatePath.push(o),n.push(Handler.gen(a.template[o],n.length,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template})),a.context.path.pop(),a.context.templatePath.pop();else for(r=0;r<a.template.length;r++)a.context.path.push(r),a.context.templatePath.push(r),n.push(Handler.gen(a.template[r],r,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template})),a.context.path.pop(),a.context.templatePath.pop();return n},object:function(a){var n={},r,o,s,l,c,u;if(a.rule.min!=null)for(r=Util.keys(a.template),r=Random.shuffle(r),r=r.slice(0,a.rule.count),u=0;u<r.length;u++)s=r[u],l=s.replace(Constant.RE_KEY,"$1"),a.context.path.push(l),a.context.templatePath.push(s),n[l]=Handler.gen(a.template[s],s,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template}),a.context.path.pop(),a.context.templatePath.pop();else{r=[],o=[];for(s in a.template)(typeof a.template[s]=="function"?o:r).push(s);for(r=r.concat(o),u=0;u<r.length;u++)s=r[u],l=s.replace(Constant.RE_KEY,"$1"),a.context.path.push(l),a.context.templatePath.push(s),n[l]=Handler.gen(a.template[s],s,{path:a.context.path,templatePath:a.context.templatePath,currentContext:n,templateCurrentContext:a.template,root:a.context.root||n,templateRoot:a.context.templateRoot||a.template}),a.context.path.pop(),a.context.templatePath.pop(),c=s.match(Constant.RE_KEY),c&&c[2]&&Util.type(a.template[s])==="number"&&(a.template[s]+=parseInt(c[2],10))}return n},number:function(a){var n,r;if(a.rule.decimal){for(a.template+="",r=a.template.split("."),r[0]=a.rule.range?a.rule.count:r[0],r[1]=(r[1]||"").slice(0,a.rule.dcount);r[1].length<a.rule.dcount;)r[1]+=r[1].length<a.rule.dcount-1?Random.character("number"):Random.character("123456789");n=parseFloat(r.join("."),10)}else n=a.rule.range&&!a.rule.parameters[2]?a.rule.count:a.template;return n},boolean:function(a){var n;return n=a.rule.parameters?Random.bool(a.rule.min,a.rule.max,a.template):a.template,n},string:function(a){var n="",r,o,s,l;if(a.template.length){for(a.rule.count==null&&(n+=a.template),r=0;r<a.rule.count;r++)n+=a.template;for(o=n.match(Constant.RE_PLACEHOLDER)||[],r=0;r<o.length;r++){if(s=o[r],/^\\/.test(s)){o.splice(r--,1);continue}if(l=Handler.placeholder(s,a.context.currentContext,a.context.templateCurrentContext,a),o.length===1&&s===n&&typeof l!=typeof n){n=l;break}n=n.replace(s,l)}}else n=a.rule.range?Random.string(a.rule.count):a.template;return n},function:function(a){return a.template.call(a.context.currentContext,a)},regexp:function(a){var n="";a.rule.count==null&&(n+=a.template.source);for(var r=0;r<a.rule.count;r++)n+=a.template.source;return RE.Handler.gen(RE.Parser.parse(n))}}),Handler.extend({_all:function(){var a={};for(var n in Random)a[n.toLowerCase()]=n;return a},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(a){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if(key.charAt(0)==="/"||pathParts.length>1)return this.getValueByKeyPath(key,options);if(templateContext&&typeof templateContext=="object"&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random)&&!(lkey in Random)&&!(okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return re===void 0&&(re=""),delete handle.options,re}},getValueByKeyPath:function(a,n){var r=a,o=this.splitPathToArray(a),s=[];a.charAt(0)==="/"?s=[n.context.path[0]].concat(this.normalizePath(o)):o.length>1&&(s=n.context.path.slice(0),s.pop(),s=this.normalizePath(s.concat(o)));try{a=o[o.length-1];for(var l=n.context.root,c=n.context.templateRoot,u=1;u<s.length-1;u++)l=l[s[u]],c=c[s[u]];if(l&&a in l)return l[a];if(c&&typeof c=="object"&&a in c&&r!==c[a])return c[a]=Handler.gen(c[a],a,{currentContext:l,templateCurrentContext:c}),c[a]}catch{}return"@"+o.join("/")},normalizePath:function(a){for(var n=[],r=0;r<a.length;r++)switch(a[r]){case"..":n.pop();break;case".":break;default:n.push(a[r])}return n},splitPathToArray:function(a){var n=a.split(/\/+/);return n[n.length-1]||(n=n.slice(0,-1)),n[0]||(n=n.slice(1)),n}}),module.exports=Handler},function(a,n){a.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(a,n){var r={};r.extend=function(){var s=arguments[0]||{},l=1,c=arguments.length,u,d,f,v,g;for(c===1&&(s=this,l=0);l<c;l++)if(u=arguments[l],!!u)for(d in u)f=s[d],v=u[d],s!==v&&v!==void 0&&(r.isArray(v)||r.isObject(v)?(r.isArray(v)&&(g=f&&r.isArray(f)?f:[]),r.isObject(v)&&(g=f&&r.isObject(f)?f:{}),s[d]=r.extend(g,v)):s[d]=v);return s},r.each=function(s,l,c){var u,d;if(this.type(s)==="number")for(u=0;u<s;u++)l(u,u);else if(s.length===+s.length)for(u=0;u<s.length&&l.call(c,s[u],u,s)!==!1;u++);else for(d in s)if(l.call(c,s[d],d,s)===!1)break},r.type=function(s){return s==null?String(s):Object.prototype.toString.call(s).match(/\[object (\w+)\]/)[1].toLowerCase()},r.each("String Object Array RegExp Function".split(" "),function(o){r["is"+o]=function(s){return r.type(s)===o.toLowerCase()}}),r.isObjectOrArray=function(o){return r.isObject(o)||r.isArray(o)},r.isNumeric=function(o){return!isNaN(parseFloat(o))&&isFinite(o)},r.keys=function(o){var s=[];for(var l in o)o.hasOwnProperty(l)&&s.push(l);return s},r.values=function(o){var s=[];for(var l in o)o.hasOwnProperty(l)&&s.push(o[l]);return s},r.heredoc=function(s){return s.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},r.noop=function(){},a.exports=r},function(a,n,r){var o=r(2),s=r(5);a.exports={parse:function(l){l=l==null?"":l+"";var c=(l||"").match(o.RE_KEY),u=c&&c[3]&&c[3].match(o.RE_RANGE),d=u&&u[1]&&parseInt(u[1],10),f=u&&u[2]&&parseInt(u[2],10),v=u?u[2]?s.integer(d,f):parseInt(u[1],10):void 0,g=c&&c[4]&&c[4].match(o.RE_RANGE),y=g&&g[1]&&parseInt(g[1],10),_=g&&g[2]&&parseInt(g[2],10),S=g?!g[2]&&parseInt(g[1],10)||s.integer(y,_):void 0,x={parameters:c,range:u,min:d,max:f,count:v,decimal:g,dmin:y,dmax:_,dcount:S};for(var T in x)if(x[T]!=null)return x;return{}}}},function(a,n,r){var o=r(3),s={extend:o.extend};s.extend(r(6)),s.extend(r(7)),s.extend(r(8)),s.extend(r(10)),s.extend(r(13)),s.extend(r(15)),s.extend(r(16)),s.extend(r(17)),s.extend(r(14)),s.extend(r(19)),a.exports=s},function(a,n){a.exports={boolean:function(r,o,s){return s!==void 0?(r=typeof r<"u"&&!isNaN(r)?parseInt(r,10):1,o=typeof o<"u"&&!isNaN(o)?parseInt(o,10):1,Math.random()>1/(r+o)*r?!s:s):Math.random()>=.5},bool:function(r,o,s){return this.boolean(r,o,s)},natural:function(r,o){return r=typeof r<"u"?parseInt(r,10):0,o=typeof o<"u"?parseInt(o,10):9007199254740992,Math.round(Math.random()*(o-r))+r},integer:function(r,o){return r=typeof r<"u"?parseInt(r,10):-9007199254740992,o=typeof o<"u"?parseInt(o,10):9007199254740992,Math.round(Math.random()*(o-r))+r},int:function(r,o){return this.integer(r,o)},float:function(r,o,s,l){s=s===void 0?0:s,s=Math.max(Math.min(s,17),0),l=l===void 0?17:l,l=Math.max(Math.min(l,17),0);for(var c=this.integer(r,o)+".",u=0,d=this.natural(s,l);u<d;u++)c+=u<d-1?this.character("number"):this.character("123456789");return parseFloat(c,10)},character:function(r){var o={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return o.alpha=o.lower+o.upper,o.undefined=o.lower+o.upper+o.number+o.symbol,r=o[(""+r).toLowerCase()]||r,r.charAt(this.natural(0,r.length-1))},char:function(r){return this.character(r)},string:function(r,o,s){var l;switch(arguments.length){case 0:l=this.natural(3,7);break;case 1:l=r,r=void 0;break;case 2:typeof arguments[0]=="string"?l=o:(l=this.natural(r,o),r=void 0);break;case 3:l=this.natural(o,s);break}for(var c="",u=0;u<l;u++)c+=this.character(r);return c},str:function(){return this.string.apply(this,arguments)},range:function(r,o,s){arguments.length<=1&&(o=r||0,r=0),s=arguments[2]||1,r=+r,o=+o,s=+s;for(var l=Math.max(Math.ceil((o-r)/s),0),c=0,u=new Array(l);c<l;)u[c++]=r,r+=s;return u}}},function(a,n){var r={yyyy:"getFullYear",yy:function(o){return(""+o.getFullYear()).slice(2)},y:"yy",MM:function(o){var s=o.getMonth()+1;return s<10?"0"+s:s},M:function(o){return o.getMonth()+1},dd:function(o){var s=o.getDate();return s<10?"0"+s:s},d:"getDate",HH:function(o){var s=o.getHours();return s<10?"0"+s:s},H:"getHours",hh:function(o){var s=o.getHours()%12;return s<10?"0"+s:s},h:function(o){return o.getHours()%12},mm:function(o){var s=o.getMinutes();return s<10?"0"+s:s},m:"getMinutes",ss:function(o){var s=o.getSeconds();return s<10?"0"+s:s},s:"getSeconds",SS:function(o){var s=o.getMilliseconds();return s<10&&"00"+s||s<100&&"0"+s||s},S:"getMilliseconds",A:function(o){return o.getHours()<12?"AM":"PM"},a:function(o){return o.getHours()<12?"am":"pm"},T:"getTime"};a.exports={_patternLetters:r,_rformat:new RegExp(function(){var o=[];for(var s in r)o.push(s);return"("+o.join("|")+")"}(),"g"),_formatDate:function(o,s){return s.replace(this._rformat,function l(c,u){return typeof r[u]=="function"?r[u](o):r[u]in r?l(c,r[u]):o[r[u]]()})},_randomDate:function(o,s){return o=o===void 0?new Date(0):o,s=s===void 0?new Date:s,new Date(Math.random()*(s.getTime()-o.getTime()))},date:function(o){return o=o||"yyyy-MM-dd",this._formatDate(this._randomDate(),o)},time:function(o){return o=o||"HH:mm:ss",this._formatDate(this._randomDate(),o)},datetime:function(o){return o=o||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),o)},now:function(o,s){arguments.length===1&&(/year|month|day|hour|minute|second|week/.test(o)||(s=o,o="")),o=(o||"").toLowerCase(),s=s||"yyyy-MM-dd HH:mm:ss";var l=new Date;switch(o){case"year":l.setMonth(0);case"month":l.setDate(1);case"week":case"day":l.setHours(0);case"hour":l.setMinutes(0);case"minute":l.setSeconds(0);case"second":l.setMilliseconds(0)}switch(o){case"week":l.setDate(l.getDate()-l.getDay())}return this._formatDate(l,s)}}},function(a,n,r){(function(o){o.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(s,l,c,u,d){return arguments.length===4&&(d=u,u=void 0),arguments.length===3&&(d=c,c=void 0),s||(s=this.pick(this._adSize)),l&&~l.indexOf("#")&&(l=l.slice(1)),c&&~c.indexOf("#")&&(c=c.slice(1)),"http://dummyimage.com/"+s+(l?"/"+l:"")+(c?"/"+c:"")+(u?"."+u:"")+(d?"&text="+d:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var s=[];for(var l in this._brandColors)s.push(l);return s},dataImage:function(s,l){var c;if(typeof document<"u")c=document.createElement("canvas");else{var u=o.require("canvas");c=new u}var d=c&&c.getContext&&c.getContext("2d");if(!c||!d)return"";s||(s=this.pick(this._adSize)),l=l!==void 0?l:s,s=s.split("x");var f=parseInt(s[0],10),v=parseInt(s[1],10),g=this._brandColors[this.pick(this._brandNames())],y="#FFF",_=14,S="sans-serif";return c.width=f,c.height=v,d.textAlign="center",d.textBaseline="middle",d.fillStyle=g,d.fillRect(0,0,f,v),d.fillStyle=y,d.font="bold "+_+"px "+S,d.fillText(l,f/2,v/2,f),c.toDataURL("image/png")}}}).call(n,r(9)(a))},function(a,n){a.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children=[],r.webpackPolyfill=1),r}},function(a,n,r){var o=r(11),s=r(12);a.exports={color:function(l){return l||s[l]?s[l].nicer:this.hex()},hex:function(){var l=this._goldenRatioColor(),c=o.hsv2rgb(l),u=o.rgb2hex(c[0],c[1],c[2]);return u},rgb:function(){var l=this._goldenRatioColor(),c=o.hsv2rgb(l);return"rgb("+parseInt(c[0],10)+", "+parseInt(c[1],10)+", "+parseInt(c[2],10)+")"},rgba:function(){var l=this._goldenRatioColor(),c=o.hsv2rgb(l);return"rgba("+parseInt(c[0],10)+", "+parseInt(c[1],10)+", "+parseInt(c[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var l=this._goldenRatioColor(),c=o.hsv2hsl(l);return"hsl("+parseInt(c[0],10)+", "+parseInt(c[1],10)+", "+parseInt(c[2],10)+")"},_goldenRatioColor:function(l,c){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,typeof l!="number"&&(l=.5),typeof c!="number"&&(c=.95),[this._hue*360,l*100,c*100]}}},function(a,n){a.exports={rgb2hsl:function(o){var s=o[0]/255,l=o[1]/255,c=o[2]/255,u=Math.min(s,l,c),d=Math.max(s,l,c),f=d-u,v,g,y;return d==u?v=0:s==d?v=(l-c)/f:l==d?v=2+(c-s)/f:c==d&&(v=4+(s-l)/f),v=Math.min(v*60,360),v<0&&(v+=360),y=(u+d)/2,d==u?g=0:y<=.5?g=f/(d+u):g=f/(2-d-u),[v,g*100,y*100]},rgb2hsv:function(o){var s=o[0],l=o[1],c=o[2],u=Math.min(s,l,c),d=Math.max(s,l,c),f=d-u,v,g,y;return d===0?g=0:g=f/d*1e3/10,d==u?v=0:s==d?v=(l-c)/f:l==d?v=2+(c-s)/f:c==d&&(v=4+(s-l)/f),v=Math.min(v*60,360),v<0&&(v+=360),y=d/255*1e3/10,[v,g,y]},hsl2rgb:function(o){var s=o[0]/360,l=o[1]/100,c=o[2]/100,u,d,f,v,g;if(l===0)return g=c*255,[g,g,g];c<.5?d=c*(1+l):d=c+l-c*l,u=2*c-d,v=[0,0,0];for(var y=0;y<3;y++)f=s+1/3*-(y-1),f<0&&f++,f>1&&f--,6*f<1?g=u+(d-u)*6*f:2*f<1?g=d:3*f<2?g=u+(d-u)*(2/3-f)*6:g=u,v[y]=g*255;return v},hsl2hsv:function(o){var s=o[0],l=o[1]/100,c=o[2]/100,u,d;return c*=2,l*=c<=1?c:2-c,d=(c+l)/2,u=2*l/(c+l),[s,u*100,d*100]},hsv2rgb:function(o){var s=o[0]/60,l=o[1]/100,c=o[2]/100,u=Math.floor(s)%6,d=s-Math.floor(s),f=255*c*(1-l),v=255*c*(1-l*d),g=255*c*(1-l*(1-d));switch(c=255*c,u){case 0:return[c,g,f];case 1:return[v,c,f];case 2:return[f,c,g];case 3:return[f,v,c];case 4:return[g,f,c];case 5:return[c,f,v]}},hsv2hsl:function(o){var s=o[0],l=o[1]/100,c=o[2]/100,u,d;return d=(2-l)*c,u=l*c,u/=d<=1?d:2-d,d/=2,[s,u*100,d*100]},rgb2hex:function(r,o,s){return"#"+((256+r<<8|o)<<8|s).toString(16).slice(1)},hex2rgb:function(r){return r="0x"+r.slice(1).replace(r.length>4?r:/./g,"$&$&")|0,[r>>16,r>>8&255,r&255]}}},function(a,n){a.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(a,n,r){var o=r(6),s=r(14);function l(c,u,d,f){return d===void 0?o.natural(c,u):f===void 0?d:o.natural(parseInt(d,10),parseInt(f,10))}a.exports={paragraph:function(c,u){for(var d=l(3,7,c,u),f=[],v=0;v<d;v++)f.push(this.sentence());return f.join(" ")},cparagraph:function(c,u){for(var d=l(3,7,c,u),f=[],v=0;v<d;v++)f.push(this.csentence());return f.join("")},sentence:function(c,u){for(var d=l(12,18,c,u),f=[],v=0;v<d;v++)f.push(this.word());return s.capitalize(f.join(" "))+"."},csentence:function(c,u){for(var d=l(12,18,c,u),f=[],v=0;v<d;v++)f.push(this.cword());return f.join("")+"。"},word:function(c,u){for(var d=l(3,10,c,u),f="",v=0;v<d;v++)f+=o.character("lower");return f},cword:function(c,u,d){var f="的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进着等部度家电力里如水化高自二理起小物现实加量都两体制机当使点从业本去把性好应开它合还因由其些然前外天政四日那社义事平形相全表间样与关各重新线内数正心反你明看原又么利比或但质气第向道命此变条只没结解问意建月公无系军很情者最立代想已通并提直题党程展五果料象员革位入常文总次品式活设及管特件长求老头基资边流路级少图山统接知较将组见计别她手角期根论运农指几九区强放决西被干做必战先回则任取据处队南给色光门即保治北造百规热领七海口东导器压志世金增争济阶油思术极交受联什认六共权收证改清己美再采转更单风切打白教速花带安场身车例真务具万每目至达走积示议声报斗完类八离华名确才科张信马节话米整空元况今集温传土许步群广石记需段研界拉林律叫且究观越织装影算低持音众书布复容儿须际商非验连断深难近矿千周委素技备半办青省列习响约支般史感劳便团往酸历市克何除消构府称太准精值号率族维划选标写存候毛亲快效斯院查江型眼王按格养易置派层片始却专状育厂京识适属圆包火住调满县局照参红细引听该铁价严龙飞",v;switch(arguments.length){case 0:c=f,v=1;break;case 1:typeof arguments[0]=="string"?v=1:(v=c,c=f);break;case 2:typeof arguments[0]=="string"?v=u:(v=this.natural(c,u),c=f);break;case 3:v=this.natural(u,d);break}for(var g="",y=0;y<v;y++)g+=c.charAt(this.natural(0,c.length-1));return g},title:function(c,u){for(var d=l(3,7,c,u),f=[],v=0;v<d;v++)f.push(this.capitalize(this.word()));return f.join(" ")},ctitle:function(c,u){for(var d=l(3,7,c,u),f=[],v=0;v<d;v++)f.push(this.cword());return f.join("")}}},function(a,n,r){var o=r(3);a.exports={capitalize:function(s){return(s+"").charAt(0).toUpperCase()+(s+"").substr(1)},upper:function(s){return(s+"").toUpperCase()},lower:function(s){return(s+"").toLowerCase()},pick:function(l,c,u){return o.isArray(l)?(c===void 0&&(c=1),u===void 0&&(u=c)):(l=[].slice.call(arguments),c=1,u=1),c===1&&u===1?l[this.natural(0,l.length-1)]:this.shuffle(l,c,u)},shuffle:function(l,c,u){l=l||[];for(var d=l.slice(0),f=[],v=0,g=d.length,y=0;y<g;y++)v=this.natural(0,d.length-1),f.push(d[v]),d.splice(v,1);switch(arguments.length){case 0:case 1:return f;case 2:u=c;case 3:return c=parseInt(c,10),u=parseInt(u,10),f.slice(0,this.natural(c,u))}},order:function s(l){s.cache=s.cache||{},arguments.length>1&&(l=[].slice.call(arguments,0));var c=s.options,u=c.context.templatePath.join("."),d=s.cache[u]=s.cache[u]||{index:0,array:l};return d.array[d.index++%d.array.length]}}},function(a,n){a.exports={first:function(){var r=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(r)},last:function(){var r=["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"];return this.pick(r)},name:function(r){return this.first()+" "+(r?this.first()+" ":"")+this.last()},cfirst:function(){var r="王 李 张 刘 陈 杨 赵 黄 周 吴 徐 孙 胡 朱 高 林 何 郭 马 罗 梁 宋 郑 谢 韩 唐 冯 于 董 萧 程 曹 袁 邓 许 傅 沈 曾 彭 吕 苏 卢 蒋 蔡 贾 丁 魏 薛 叶 阎 余 潘 杜 戴 夏 锺 汪 田 任 姜 范 方 石 姚 谭 廖 邹 熊 金 陆 郝 孔 白 崔 康 毛 邱 秦 江 史 顾 侯 邵 孟 龙 万 段 雷 钱 汤 尹 黎 易 常 武 乔 贺 赖 龚 文".split(" ");return this.pick(r)},clast:function(){var r="伟 芳 娜 秀英 敏 静 丽 强 磊 军 洋 勇 艳 杰 娟 涛 明 超 秀兰 霞 平 刚 桂英".split(" ");return this.pick(r)},cname:function(){return this.cfirst()+this.clast()}}},function(a,n){a.exports={url:function(r,o){return(r||this.protocol())+"://"+(o||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(r){return this.word()+"."+(r||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn 中国 中国互联.公司 中国互联.网络 tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(r){return this.character("lower")+"."+this.word()+"@"+(r||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(a,n,r){var o=r(18),s=["东北","华北","华东","华中","华南","西南","西北"];a.exports={region:function(){return this.pick(s)},province:function(){return this.pick(o).name},city:function(l){var c=this.pick(o),u=this.pick(c.children);return l?[c.name,u.name].join(" "):u.name},county:function(l){var c=this.pick(o),u=this.pick(c.children),d=this.pick(u.children)||{name:"-"};return l?[c.name,u.name,d.name].join(" "):d.name},zip:function(l){for(var c="",u=0;u<(l||6);u++)c+=this.natural(0,9);return c}}},function(a,n){var r={11e4:"北京",110100:"北京市",110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110228:"密云县",110229:"延庆县",110230:"其它区",12e4:"天津",120100:"天津市",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120221:"宁河县",120223:"静海县",120225:"蓟县",120226:"其它区",13e4:"河北省",130100:"石家庄市",130102:"长安区",130103:"桥东区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130121:"井陉县",130123:"正定县",130124:"栾城县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130181:"辛集市",130182:"藁城市",130183:"晋州市",130184:"新乐市",130185:"鹿泉市",130186:"其它区",130200:"唐山市",130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130230:"曹妃甸区",130281:"遵化市",130283:"迁安市",130284:"其它区",130300:"秦皇岛市",130302:"海港区",130303:"山海关区",130304:"北戴河区",130321:"青龙满族自治县",130322:"昌黎县",130323:"抚宁县",130324:"卢龙县",130398:"其它区",130400:"邯郸市",130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市",130482:"其它区",130500:"邢台市",130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市",130583:"其它区",130600:"保定市",130602:"新市区",130603:"北市区",130604:"南市区",130621:"满城县",130622:"清苑县",130623:"涞水县",130624:"阜平县",130625:"徐水县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130682:"定州市",130683:"安国市",130684:"高碑店市",130699:"其它区",130700:"张家口市",130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130721:"宣化县",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130729:"万全县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县",130733:"崇礼县",130734:"其它区",130800:"承德市",130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县",130829:"其它区",130900:"沧州市",130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市",130985:"其它区",131e3:"廊坊市",131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市",131083:"其它区",131100:"衡水市",131102:"桃城区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131181:"冀州市",131182:"深州市",131183:"其它区",14e4:"山西省",140100:"太原市",140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市",140182:"其它区",140200:"大同市",140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县",140228:"其它区",140300:"阳泉市",140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县",140323:"其它区",140400:"长治市",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市",140482:"城区",140483:"郊区",140485:"其它区",140500:"晋城市",140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市",140582:"其它区",140600:"朔州市",140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县",140625:"其它区",140700:"晋中市",140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市",140782:"其它区",140800:"运城市",140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市",140883:"其它区",140900:"忻州市",140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市",140982:"其它区",141e3:"临汾市",141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市",141083:"其它区",141100:"吕梁市",141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市",141183:"其它区",15e4:"内蒙古自治区",150100:"呼和浩特市",150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县",150126:"其它区",150200:"包头市",150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗",150224:"其它区",150300:"乌海市",150302:"海勃湾区",150303:"海南区",150304:"乌达区",150305:"其它区",150400:"赤峰市",150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗",150431:"其它区",150500:"通辽市",150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市",150582:"其它区",150600:"鄂尔多斯市",150602:"东胜区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗",150628:"其它区",150700:"呼伦贝尔市",150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市",150786:"其它区",150800:"巴彦淖尔市",150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗",150827:"其它区",150900:"乌兰察布市",150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市",150982:"其它区",152200:"兴安盟",152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县",152225:"其它区",152500:"锡林郭勒盟",152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县",152532:"其它区",152900:"阿拉善盟",152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗",152924:"其它区",21e4:"辽宁省",210100:"沈阳市",210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"东陵区",210113:"新城子区",210114:"于洪区",210122:"辽中县",210123:"康平县",210124:"法库县",210181:"新民市",210184:"沈北新区",210185:"其它区",210200:"大连市",210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210224:"长海县",210281:"瓦房店市",210282:"普兰店市",210283:"庄河市",210298:"其它区",210300:"鞍山市",210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市",210382:"其它区",210400:"抚顺市",210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县",210424:"其它区",210500:"本溪市",210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县",210523:"其它区",210600:"丹东市",210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市",210683:"其它区",210700:"锦州市",210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市",210783:"其它区",210800:"营口市",210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市",210883:"其它区",210900:"阜新市",210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县",210923:"其它区",211e3:"辽阳市",211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市",211082:"其它区",211100:"盘锦市",211102:"双台子区",211103:"兴隆台区",211121:"大洼县",211122:"盘山县",211123:"其它区",211200:"铁岭市",211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市",211283:"其它区",211300:"朝阳市",211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市",211383:"其它区",211400:"葫芦岛市",211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市",211482:"其它区",22e4:"吉林省",220100:"长春市",220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220122:"农安县",220181:"九台市",220182:"榆树市",220183:"德惠市",220188:"其它区",220200:"吉林市",220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市",220285:"其它区",220300:"四平市",220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市",220383:"其它区",220400:"辽源市",220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县",220423:"其它区",220500:"通化市",220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市",220583:"其它区",220600:"白山市",220602:"浑江区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220625:"江源区",220681:"临江市",220682:"其它区",220700:"松原市",220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220724:"扶余市",220725:"其它区",220800:"白城市",220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市",220883:"其它区",222400:"延边朝鲜族自治州",222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县",222427:"其它区",23e4:"黑龙江省",230100:"哈尔滨市",230102:"道里区",230103:"南岗区",230104:"道外区",230106:"香坊区",230108:"平房区",230109:"松北区",230111:"呼兰区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230181:"阿城区",230182:"双城市",230183:"尚志市",230184:"五常市",230186:"其它区",230200:"齐齐哈尔市",230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市",230282:"其它区",230300:"鸡西市",230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市",230383:"其它区",230400:"鹤岗市",230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县",230423:"其它区",230500:"双鸭山市",230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县",230525:"其它区",230600:"大庆市",230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县",230625:"其它区",230700:"伊春市",230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市",230782:"其它区",230800:"佳木斯市",230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230833:"抚远县",230881:"同江市",230882:"富锦市",230883:"其它区",230900:"七台河市",230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县",230922:"其它区",231e3:"牡丹江市",231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231024:"东宁县",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"其它区",231100:"黑河市",231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市",231183:"其它区",231200:"绥化市",231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市",231284:"其它区",232700:"大兴安岭地区",232702:"松岭区",232703:"新林区",232704:"呼中区",232721:"呼玛县",232722:"塔河县",232723:"漠河县",232724:"加格达奇区",232725:"其它区",31e4:"上海",310100:"上海市",310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310108:"闸北区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310230:"崇明县",310231:"其它区",32e4:"江苏省",320100:"南京市",320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320124:"溧水区",320125:"高淳区",320126:"其它区",320200:"无锡市",320202:"崇安区",320203:"南长区",320204:"北塘区",320205:"锡山区",320206:"惠山区",320211:"滨湖区",320281:"江阴市",320282:"宜兴市",320297:"其它区",320300:"徐州市",320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320321:"丰县",320322:"沛县",320323:"铜山区",320324:"睢宁县",320381:"新沂市",320382:"邳州市",320383:"其它区",320400:"常州市",320402:"天宁区",320404:"钟楼区",320405:"戚墅堰区",320411:"新北区",320412:"武进区",320481:"溧阳市",320482:"金坛市",320483:"其它区",320500:"苏州市",320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320584:"吴江区",320585:"太仓市",320596:"其它区",320600:"南通市",320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市",320694:"其它区",320700:"连云港市",320703:"连云区",320705:"新浦区",320706:"海州区",320721:"赣榆县",320722:"东海县",320723:"灌云县",320724:"灌南县",320725:"其它区",320800:"淮安市",320802:"清河区",320803:"淮安区",320804:"淮阴区",320811:"清浦区",320826:"涟水县",320829:"洪泽县",320830:"盱眙县",320831:"金湖县",320832:"其它区",320900:"盐城市",320902:"亭湖区",320903:"盐都区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市",320982:"大丰市",320983:"其它区",321e3:"扬州市",321002:"广陵区",321003:"邗江区",321023:"宝应县",321081:"仪征市",321084:"高邮市",321088:"江都区",321093:"其它区",321100:"镇江市",321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市",321184:"其它区",321200:"泰州市",321202:"海陵区",321203:"高港区",321281:"兴化市",321282:"靖江市",321283:"泰兴市",321284:"姜堰区",321285:"其它区",321300:"宿迁市",321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县",321325:"其它区",33e4:"浙江省",330100:"杭州市",330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330183:"富阳市",330185:"临安市",330186:"其它区",330200:"宁波市",330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市",330284:"其它区",330300:"温州市",330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330322:"洞头县",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市",330383:"其它区",330400:"嘉兴市",330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市",330484:"其它区",330500:"湖州市",330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县",330524:"其它区",330600:"绍兴市",330602:"越城区",330621:"绍兴县",330624:"新昌县",330681:"诸暨市",330682:"上虞市",330683:"嵊州市",330684:"其它区",330700:"金华市",330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市",330785:"其它区",330800:"衢州市",330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市",330882:"其它区",330900:"舟山市",330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县",330923:"其它区",331e3:"台州市",331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市",331083:"其它区",331100:"丽水市",331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市",331182:"其它区",34e4:"安徽省",340100:"合肥市",340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340192:"其它区",340200:"芜湖市",340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340224:"其它区",340300:"蚌埠市",340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县",340324:"其它区",340400:"淮南市",340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"其它区",340500:"马鞍山市",340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"其它区",340600:"淮北市",340602:"杜集区",340603:"相山区",340604:"烈山区",340621:"濉溪县",340622:"其它区",340700:"铜陵市",340702:"铜官山区",340703:"狮子山区",340711:"郊区",340721:"铜陵县",340722:"其它区",340800:"安庆市",340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340823:"枞阳县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市",340882:"其它区",341e3:"黄山市",341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县",341025:"其它区",341100:"滁州市",341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市",341183:"其它区",341200:"阜阳市",341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市",341283:"其它区",341300:"宿州市",341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县",341325:"其它区",341400:"巢湖市",341421:"庐江县",341422:"无为县",341423:"含山县",341424:"和县",341500:"六安市",341502:"金安区",341503:"裕安区",341521:"寿县",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县",341526:"其它区",341600:"亳州市",341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县",341624:"其它区",341700:"池州市",341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县",341724:"其它区",341800:"宣城市",341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市",341882:"其它区",35e4:"福建省",350100:"福州市",350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市",350183:"其它区",350200:"厦门市",350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区",350214:"其它区",350300:"莆田市",350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县",350323:"其它区",350400:"三明市",350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市",350482:"其它区",350500:"泉州市",350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市",350584:"其它区",350600:"漳州市",350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市",350682:"其它区",350700:"南平市",350702:"延平区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市",350784:"建阳市",350785:"其它区",350800:"龙岩市",350802:"新罗区",350821:"长汀县",350822:"永定县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市",350882:"其它区",350900:"宁德市",350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市",350983:"其它区",36e4:"江西省",360100:"南昌市",360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360121:"南昌县",360122:"新建县",360123:"安义县",360124:"进贤县",360128:"其它区",360200:"景德镇市",360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市",360282:"其它区",360300:"萍乡市",360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县",360324:"其它区",360400:"九江市",360402:"庐山区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360427:"星子县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"其它区",360483:"共青城市",360500:"新余市",360502:"渝水区",360521:"分宜县",360522:"其它区",360600:"鹰潭市",360602:"月湖区",360622:"余江县",360681:"贵溪市",360682:"其它区",360700:"赣州市",360702:"章贡区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市",360782:"南康市",360783:"其它区",360800:"吉安市",360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市",360882:"其它区",360900:"宜春市",360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市",360984:"其它区",361e3:"抚州市",361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县",361031:"其它区",361100:"上饶市",361102:"信州区",361121:"上饶县",361122:"广丰县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市",361182:"其它区",37e4:"山东省",370100:"济南市",370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市",370182:"其它区",370200:"青岛市",370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市",370286:"其它区",370300:"淄博市",370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县",370324:"其它区",370400:"枣庄市",370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市",370482:"其它区",370500:"东营市",370502:"东营区",370503:"河口区",370521:"垦利县",370522:"利津县",370523:"广饶县",370591:"其它区",370600:"烟台市",370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市",370688:"其它区",370700:"潍坊市",370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市",370787:"其它区",370800:"济宁市",370802:"市中区",370811:"任城区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370882:"兖州市",370883:"邹城市",370884:"其它区",370900:"泰安市",370902:"泰山区",370903:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市",370984:"其它区",371e3:"威海市",371002:"环翠区",371081:"文登市",371082:"荣成市",371083:"乳山市",371084:"其它区",371100:"日照市",371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县",371123:"其它区",371200:"莱芜市",371202:"莱城区",371203:"钢城区",371204:"其它区",371300:"临沂市",371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"苍山县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县",371330:"其它区",371400:"德州市",371402:"德城区",371421:"陵县",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市",371483:"其它区",371500:"聊城市",371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市",371582:"其它区",371600:"滨州市",371602:"滨城区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371624:"沾化县",371625:"博兴县",371626:"邹平县",371627:"其它区",371700:"菏泽市",371702:"牡丹区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371727:"定陶县",371728:"东明县",371729:"其它区",41e4:"河南省",410100:"郑州市",410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市",410188:"其它区",410200:"开封市",410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410211:"金明区",410221:"杞县",410222:"通许县",410223:"尉氏县",410224:"开封县",410225:"兰考县",410226:"其它区",410300:"洛阳市",410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410307:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市",410400:"平顶山市",410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市",410483:"其它区",410500:"安阳市",410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市",410582:"其它区",410600:"鹤壁市",410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县",410623:"其它区",410700:"新乡市",410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市",410783:"其它区",410800:"焦作市",410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410881:"济源市",410882:"沁阳市",410883:"孟州市",410884:"其它区",410900:"濮阳市",410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县",410929:"其它区",411e3:"许昌市",411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市",411083:"其它区",411100:"漯河市",411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县",411123:"其它区",411200:"三门峡市",411202:"湖滨区",411221:"渑池县",411222:"陕县",411224:"卢氏县",411281:"义马市",411282:"灵宝市",411283:"其它区",411300:"南阳市",411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市",411382:"其它区",411400:"商丘市",411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市",411482:"其它区",411500:"信阳市",411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县",411529:"其它区",411600:"周口市",411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市",411682:"其它区",411700:"驻马店市",411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县",411730:"其它区",42e4:"湖北省",420100:"武汉市",420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区",420118:"其它区",420200:"黄石市",420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市",420282:"其它区",420300:"十堰市",420302:"茅箭区",420303:"张湾区",420321:"郧县",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市",420383:"其它区",420500:"宜昌市",420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市",420584:"其它区",420600:"襄阳市",420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市",420685:"其它区",420700:"鄂州市",420702:"梁子湖区",420703:"华容区",420704:"鄂城区",420705:"其它区",420800:"荆门市",420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市",420882:"其它区",420900:"孝感市",420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市",420985:"其它区",421e3:"荆州市",421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市",421088:"其它区",421100:"黄冈市",421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市",421183:"其它区",421200:"咸宁市",421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市",421283:"其它区",421300:"随州市",421302:"曾都区",421321:"随县",421381:"广水市",421382:"其它区",422800:"恩施土家族苗族自治州",422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县",422829:"其它区",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区",43e4:"湖南省",430100:"长沙市",430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430121:"长沙县",430122:"望城区",430124:"宁乡县",430181:"浏阳市",430182:"其它区",430200:"株洲市",430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市",430282:"其它区",430300:"湘潭市",430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市",430383:"其它区",430400:"衡阳市",430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市",430483:"其它区",430500:"邵阳市",430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市",430582:"其它区",430600:"岳阳市",430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市",430683:"其它区",430700:"常德市",430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市",430782:"其它区",430800:"张家界市",430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县",430823:"其它区",430900:"益阳市",430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市",430982:"其它区",431e3:"郴州市",431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市",431082:"其它区",431100:"永州市",431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县",431130:"其它区",431200:"怀化市",431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市",431282:"其它区",431300:"娄底市",431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市",431383:"其它区",433100:"湘西土家族苗族自治州",433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县",433131:"其它区",44e4:"广东省",440100:"广州市",440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440116:"萝岗区",440183:"增城市",440184:"从化市",440189:"其它区",440200:"韶关市",440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市",440283:"其它区",440300:"深圳市",440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区",440309:"其它区",440320:"光明新区",440321:"坪山新区",440322:"大鹏新区",440323:"龙华新区",440400:"珠海市",440402:"香洲区",440403:"斗门区",440404:"金湾区",440488:"其它区",440500:"汕头市",440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县",440524:"其它区",440600:"佛山市",440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区",440609:"其它区",440700:"江门市",440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市",440786:"其它区",440800:"湛江市",440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市",440884:"其它区",440900:"茂名市",440902:"茂南区",440903:"茂港区",440923:"电白县",440981:"高州市",440982:"化州市",440983:"信宜市",440984:"其它区",441200:"肇庆市",441202:"端州区",441203:"鼎湖区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441283:"高要市",441284:"四会市",441285:"其它区",441300:"惠州市",441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县",441325:"其它区",441400:"梅州市",441402:"梅江区",441421:"梅县",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市",441482:"其它区",441500:"汕尾市",441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市",441582:"其它区",441600:"河源市",441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县",441626:"其它区",441700:"阳江市",441702:"江城区",441721:"阳西县",441723:"阳东县",441781:"阳春市",441782:"其它区",441800:"清远市",441802:"清城区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441827:"清新区",441881:"英德市",441882:"连州市",441883:"其它区",441900:"东莞市",442e3:"中山市",442101:"东沙群岛",445100:"潮州市",445102:"湘桥区",445121:"潮安区",445122:"饶平县",445186:"其它区",445200:"揭阳市",445202:"榕城区",445221:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市",445285:"其它区",445300:"云浮市",445302:"云城区",445321:"新兴县",445322:"郁南县",445323:"云安县",445381:"罗定市",445382:"其它区",45e4:"广西壮族自治区",450100:"南宁市",450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450122:"武鸣县",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县",450128:"其它区",450200:"柳州市",450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450221:"柳江县",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县",450227:"其它区",450300:"桂林市",450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450321:"阳朔县",450322:"临桂区",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县",450333:"其它区",450400:"梧州市",450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市",450482:"其它区",450500:"北海市",450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县",450522:"其它区",450600:"防城港市",450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市",450682:"其它区",450700:"钦州市",450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县",450723:"其它区",450800:"贵港市",450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市",450882:"其它区",450900:"玉林市",450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市",450982:"其它区",451e3:"百色市",451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451025:"靖西县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451032:"其它区",451100:"贺州市",451102:"八步区",451119:"平桂管理区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县",451124:"其它区",451200:"河池市",451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市",451282:"其它区",451300:"来宾市",451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市",451382:"其它区",451400:"崇左市",451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市",451482:"其它区",46e4:"海南省",460100:"海口市",460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区",460109:"其它区",460200:"三亚市",460300:"三沙市",460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域",469001:"五指山市",469002:"琼海市",469003:"儋州市",469005:"文昌市",469006:"万宁市",469007:"东方市",469025:"定安县",469026:"屯昌县",469027:"澄迈县",469028:"临高县",469030:"白沙黎族自治县",469031:"昌江黎族自治县",469033:"乐东黎族自治县",469034:"陵水黎族自治县",469035:"保亭黎族苗族自治县",469036:"琼中黎族苗族自治县",471005:"其它区",5e5:"重庆",500100:"重庆市",500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"万盛区",500111:"双桥区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500222:"綦江区",500223:"潼南县",500224:"铜梁县",500225:"大足区",500226:"荣昌县",500227:"璧山县",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500234:"开县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县",500381:"江津区",500382:"合川区",500383:"永川区",500384:"南川区",500385:"其它区",51e4:"四川省",510100:"成都市",510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510121:"金堂县",510122:"双流县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市",510185:"其它区",510300:"自贡市",510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县",510323:"其它区",510400:"攀枝花市",510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县",510423:"其它区",510500:"泸州市",510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县",510526:"其它区",510600:"德阳市",510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市",510684:"其它区",510700:"绵阳市",510703:"涪城区",510704:"游仙区",510722:"三台县",510723:"盐亭县",510724:"安县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市",510782:"其它区",510800:"广元市",510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县",510825:"其它区",510900:"遂宁市",510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县",510924:"其它区",511e3:"内江市",511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县",511029:"其它区",511100:"乐山市",511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市",511182:"其它区",511300:"南充市",511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市",511382:"其它区",511400:"眉山市",511402:"东坡区",511421:"仁寿县",511422:"彭山县",511423:"洪雅县",511424:"丹棱县",511425:"青神县",511426:"其它区",511500:"宜宾市",511502:"翠屏区",511521:"宜宾县",511522:"南溪区",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县",511530:"其它区",511600:"广安市",511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市",511683:"其它区",511700:"达州市",511702:"通川区",511721:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市",511782:"其它区",511800:"雅安市",511802:"雨城区",511821:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县",511828:"其它区",511900:"巴中市",511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县",511924:"其它区",512e3:"资阳市",512002:"雁江区",512021:"安岳县",512022:"乐至县",512081:"简阳市",512082:"其它区",513200:"阿坝藏族羌族自治州",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513229:"马尔康县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县",513234:"其它区",513300:"甘孜藏族自治州",513321:"康定县",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县",513339:"其它区",513400:"凉山彝族自治州",513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县",513438:"其它区",52e4:"贵州省",520100:"贵阳市",520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520121:"开阳县",520122:"息烽县",520123:"修文县",520151:"观山湖区",520181:"清镇市",520182:"其它区",520200:"六盘水市",520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县",520223:"其它区",520300:"遵义市",520302:"红花岗区",520303:"汇川区",520321:"遵义县",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市",520383:"其它区",520400:"安顺市",520402:"西秀区",520421:"平坝县",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县",520426:"其它区",522200:"铜仁市",522201:"碧江区",522222:"江口县",522223:"玉屏侗族自治县",522224:"石阡县",522225:"思南县",522226:"印江土家族苗族自治县",522227:"德江县",522228:"沿河土家族自治县",522229:"松桃苗族自治县",522230:"万山区",522231:"其它区",522300:"黔西南布依族苗族自治州",522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县",522329:"其它区",522400:"毕节市",522401:"七星关区",522422:"大方县",522423:"黔西县",522424:"金沙县",522425:"织金县",522426:"纳雍县",522427:"威宁彝族回族苗族自治县",522428:"赫章县",522429:"其它区",522600:"黔东南苗族侗族自治州",522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县",522637:"其它区",522700:"黔南布依族苗族自治州",522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县",522733:"其它区",53e4:"云南省",530100:"昆明市",530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530121:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市",530182:"其它区",530300:"曲靖市",530302:"麒麟区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530328:"沾益县",530381:"宣威市",530382:"其它区",530400:"玉溪市",530402:"红塔区",530421:"江川县",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县",530429:"其它区",530500:"保山市",530502:"隆阳区",530521:"施甸县",530522:"腾冲县",530523:"龙陵县",530524:"昌宁县",530525:"其它区",530600:"昭通市",530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县",530631:"其它区",530700:"丽江市",530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县",530725:"其它区",530800:"普洱市",530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县",530830:"其它区",530900:"临沧市",530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县",530928:"其它区",532300:"楚雄彝族自治州",532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县",532332:"其它区",532500:"红河哈尼族彝族自治州",532501:"个旧市",532502:"开远市",532522:"蒙自市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532526:"弥勒市",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县",532533:"其它区",532600:"文山壮族苗族自治州",532621:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县",532629:"其它区",532800:"西双版纳傣族自治州",532801:"景洪市",532822:"勐海县",532823:"勐腊县",532824:"其它区",532900:"大理白族自治州",532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县",532933:"其它区",533100:"德宏傣族景颇族自治州",533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县",533125:"其它区",533300:"怒江傈僳族自治州",533321:"泸水县",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县",533326:"其它区",533400:"迪庆藏族自治州",533421:"香格里拉县",533422:"德钦县",533423:"维西傈僳族自治县",533424:"其它区",54e4:"西藏自治区",540100:"拉萨市",540102:"城关区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540125:"堆龙德庆县",540126:"达孜县",540127:"墨竹工卡县",540128:"其它区",542100:"昌都地区",542121:"昌都县",542122:"江达县",542123:"贡觉县",542124:"类乌齐县",542125:"丁青县",542126:"察雅县",542127:"八宿县",542128:"左贡县",542129:"芒康县",542132:"洛隆县",542133:"边坝县",542134:"其它区",542200:"山南地区",542221:"乃东县",542222:"扎囊县",542223:"贡嘎县",542224:"桑日县",542225:"琼结县",542226:"曲松县",542227:"措美县",542228:"洛扎县",542229:"加查县",542231:"隆子县",542232:"错那县",542233:"浪卡子县",542234:"其它区",542300:"日喀则地区",542301:"日喀则市",542322:"南木林县",542323:"江孜县",542324:"定日县",542325:"萨迦县",542326:"拉孜县",542327:"昂仁县",542328:"谢通门县",542329:"白朗县",542330:"仁布县",542331:"康马县",542332:"定结县",542333:"仲巴县",542334:"亚东县",542335:"吉隆县",542336:"聂拉木县",542337:"萨嘎县",542338:"岗巴县",542339:"其它区",542400:"那曲地区",542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"其它区",542432:"双湖县",542500:"阿里地区",542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县",542528:"其它区",542600:"林芝地区",542621:"林芝县",542622:"工布江达县",542623:"米林县",542624:"墨脱县",542625:"波密县",542626:"察隅县",542627:"朗县",542628:"其它区",61e4:"陕西省",610100:"西安市",610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610122:"蓝田县",610124:"周至县",610125:"户县",610126:"高陵县",610127:"其它区",610200:"铜川市",610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县",610223:"其它区",610300:"宝鸡市",610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县",610332:"其它区",610400:"咸阳市",610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市",610482:"其它区",610500:"渭南市",610502:"临渭区",610521:"华县",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市",610583:"其它区",610600:"延安市",610602:"宝塔区",610621:"延长县",610622:"延川县",610623:"子长县",610624:"安塞县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县",610633:"其它区",610700:"汉中市",610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县",610731:"其它区",610800:"榆林市",610802:"榆阳区",610821:"神木县",610822:"府谷县",610823:"横山县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县",610832:"其它区",610900:"安康市",610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县",610930:"其它区",611e3:"商洛市",611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县",611027:"其它区",62e4:"甘肃省",620100:"兰州市",620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县",620124:"其它区",620200:"嘉峪关市",620300:"金昌市",620302:"金川区",620321:"永昌县",620322:"其它区",620400:"白银市",620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县",620424:"其它区",620500:"天水市",620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县",620526:"其它区",620600:"武威市",620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县",620624:"其它区",620700:"张掖市",620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县",620726:"其它区",620800:"平凉市",620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县",620827:"其它区",620900:"酒泉市",620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市",620983:"其它区",621e3:"庆阳市",621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县",621028:"其它区",621100:"定西市",621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县",621127:"其它区",621200:"陇南市",621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县",621229:"其它区",622900:"临夏回族自治州",622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县",622928:"其它区",623e3:"甘南藏族自治州",623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县",623028:"其它区",63e4:"青海省",630100:"西宁市",630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县",630124:"其它区",632100:"海东市",632121:"平安县",632122:"民和回族土族自治县",632123:"乐都区",632126:"互助土族自治县",632127:"化隆回族自治县",632128:"循化撒拉族自治县",632129:"其它区",632200:"海北藏族自治州",632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县",632225:"其它区",632300:"黄南藏族自治州",632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县",632325:"其它区",632500:"海南藏族自治州",632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县",632526:"其它区",632600:"果洛藏族自治州",632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县",632627:"其它区",632700:"玉树藏族自治州",632721:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县",632727:"其它区",632800:"海西蒙古族藏族自治州",632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县",632824:"其它区",64e4:"宁夏回族自治区",640100:"银川市",640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市",640182:"其它区",640200:"石嘴山市",640202:"大武口区",640205:"惠农区",640221:"平罗县",640222:"其它区",640300:"吴忠市",640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市",640382:"其它区",640400:"固原市",640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县",640426:"其它区",640500:"中卫市",640502:"沙坡头区",640521:"中宁县",640522:"海原县",640523:"其它区",65e4:"新疆维吾尔自治区",650100:"乌鲁木齐市",650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县",650122:"其它区",650200:"克拉玛依市",650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区",650206:"其它区",652100:"吐鲁番地区",652101:"吐鲁番市",652122:"鄯善县",652123:"托克逊县",652124:"其它区",652200:"哈密地区",652201:"哈密市",652222:"巴里坤哈萨克自治县",652223:"伊吾县",652224:"其它区",652300:"昌吉回族自治州",652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县",652329:"其它区",652700:"博尔塔拉蒙古自治州",652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县",652724:"其它区",652800:"巴音郭楞蒙古自治州",652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县",652830:"其它区",652900:"阿克苏地区",652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县",652930:"其它区",653e3:"克孜勒苏柯尔克孜自治州",653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县",653025:"其它区",653100:"喀什地区",653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县",653132:"其它区",653200:"和田地区",653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县",653228:"其它区",654e3:"伊犁哈萨克自治州",654002:"伊宁市",654003:"奎屯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县",654029:"其它区",654200:"塔城地区",654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县",654227:"其它区",654300:"阿勒泰地区",654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县",654327:"其它区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",71e4:"台湾",710100:"台北市",710101:"中正区",710102:"大同区",710103:"中山区",710104:"松山区",710105:"大安区",710106:"万华区",710107:"信义区",710108:"士林区",710109:"北投区",710110:"内湖区",710111:"南港区",710112:"文山区",710113:"其它区",710200:"高雄市",710201:"新兴区",710202:"前金区",710203:"芩雅区",710204:"盐埕区",710205:"鼓山区",710206:"旗津区",710207:"前镇区",710208:"三民区",710209:"左营区",710210:"楠梓区",710211:"小港区",710212:"其它区",710241:"苓雅区",710242:"仁武区",710243:"大社区",710244:"冈山区",710245:"路竹区",710246:"阿莲区",710247:"田寮区",710248:"燕巢区",710249:"桥头区",710250:"梓官区",710251:"弥陀区",710252:"永安区",710253:"湖内区",710254:"凤山区",710255:"大寮区",710256:"林园区",710257:"鸟松区",710258:"大树区",710259:"旗山区",710260:"美浓区",710261:"六龟区",710262:"内门区",710263:"杉林区",710264:"甲仙区",710265:"桃源区",710266:"那玛夏区",710267:"茂林区",710268:"茄萣区",710300:"台南市",710301:"中西区",710302:"东区",710303:"南区",710304:"北区",710305:"安平区",710306:"安南区",710307:"其它区",710339:"永康区",710340:"归仁区",710341:"新化区",710342:"左镇区",710343:"玉井区",710344:"楠西区",710345:"南化区",710346:"仁德区",710347:"关庙区",710348:"龙崎区",710349:"官田区",710350:"麻豆区",710351:"佳里区",710352:"西港区",710353:"七股区",710354:"将军区",710355:"学甲区",710356:"北门区",710357:"新营区",710358:"后壁区",710359:"白河区",710360:"东山区",710361:"六甲区",710362:"下营区",710363:"柳营区",710364:"盐水区",710365:"善化区",710366:"大内区",710367:"山上区",710368:"新市区",710369:"安定区",710400:"台中市",710401:"中区",710402:"东区",710403:"南区",710404:"西区",710405:"北区",710406:"北屯区",710407:"西屯区",710408:"南屯区",710409:"其它区",710431:"太平区",710432:"大里区",710433:"雾峰区",710434:"乌日区",710435:"丰原区",710436:"后里区",710437:"石冈区",710438:"东势区",710439:"和平区",710440:"新社区",710441:"潭子区",710442:"大雅区",710443:"神冈区",710444:"大肚区",710445:"沙鹿区",710446:"龙井区",710447:"梧栖区",710448:"清水区",710449:"大甲区",710450:"外埔区",710451:"大安区",710500:"金门县",710507:"金沙镇",710508:"金湖镇",710509:"金宁乡",710510:"金城镇",710511:"烈屿乡",710512:"乌坵乡",710600:"南投县",710614:"南投市",710615:"中寮乡",710616:"草屯镇",710617:"国姓乡",710618:"埔里镇",710619:"仁爱乡",710620:"名间乡",710621:"集集镇",710622:"水里乡",710623:"鱼池乡",710624:"信义乡",710625:"竹山镇",710626:"鹿谷乡",710700:"基隆市",710701:"仁爱区",710702:"信义区",710703:"中正区",710704:"中山区",710705:"安乐区",710706:"暖暖区",710707:"七堵区",710708:"其它区",710800:"新竹市",710801:"东区",710802:"北区",710803:"香山区",710804:"其它区",710900:"嘉义市",710901:"东区",710902:"西区",710903:"其它区",711100:"新北市",711130:"万里区",711131:"金山区",711132:"板桥区",711133:"汐止区",711134:"深坑区",711135:"石碇区",711136:"瑞芳区",711137:"平溪区",711138:"双溪区",711139:"贡寮区",711140:"新店区",711141:"坪林区",711142:"乌来区",711143:"永和区",711144:"中和区",711145:"土城区",711146:"三峡区",711147:"树林区",711148:"莺歌区",711149:"三重区",711150:"新庄区",711151:"泰山区",711152:"林口区",711153:"芦洲区",711154:"五股区",711155:"八里区",711156:"淡水区",711157:"三芝区",711158:"石门区",711200:"宜兰县",711214:"宜兰市",711215:"头城镇",711216:"礁溪乡",711217:"壮围乡",711218:"员山乡",711219:"罗东镇",711220:"三星乡",711221:"大同乡",711222:"五结乡",711223:"冬山乡",711224:"苏澳镇",711225:"南澳乡",711226:"钓鱼台",711300:"新竹县",711314:"竹北市",711315:"湖口乡",711316:"新丰乡",711317:"新埔镇",711318:"关西镇",711319:"芎林乡",711320:"宝山乡",711321:"竹东镇",711322:"五峰乡",711323:"横山乡",711324:"尖石乡",711325:"北埔乡",711326:"峨眉乡",711400:"桃园县",711414:"中坜市",711415:"平镇市",711416:"龙潭乡",711417:"杨梅市",711418:"新屋乡",711419:"观音乡",711420:"桃园市",711421:"龟山乡",711422:"八德市",711423:"大溪镇",711424:"复兴乡",711425:"大园乡",711426:"芦竹乡",711500:"苗栗县",711519:"竹南镇",711520:"头份镇",711521:"三湾乡",711522:"南庄乡",711523:"狮潭乡",711524:"后龙镇",711525:"通霄镇",711526:"苑里镇",711527:"苗栗市",711528:"造桥乡",711529:"头屋乡",711530:"公馆乡",711531:"大湖乡",711532:"泰安乡",711533:"铜锣乡",711534:"三义乡",711535:"西湖乡",711536:"卓兰镇",711700:"彰化县",711727:"彰化市",711728:"芬园乡",711729:"花坛乡",711730:"秀水乡",711731:"鹿港镇",711732:"福兴乡",711733:"线西乡",711734:"和美镇",711735:"伸港乡",711736:"员林镇",711737:"社头乡",711738:"永靖乡",711739:"埔心乡",711740:"溪湖镇",711741:"大村乡",711742:"埔盐乡",711743:"田中镇",711744:"北斗镇",711745:"田尾乡",711746:"埤头乡",711747:"溪州乡",711748:"竹塘乡",711749:"二林镇",711750:"大城乡",711751:"芳苑乡",711752:"二水乡",711900:"嘉义县",711919:"番路乡",711920:"梅山乡",711921:"竹崎乡",711922:"阿里山乡",711923:"中埔乡",711924:"大埔乡",711925:"水上乡",711926:"鹿草乡",711927:"太保市",711928:"朴子市",711929:"东石乡",711930:"六脚乡",711931:"新港乡",711932:"民雄乡",711933:"大林镇",711934:"溪口乡",711935:"义竹乡",711936:"布袋镇",712100:"云林县",712121:"斗南镇",712122:"大埤乡",712123:"虎尾镇",712124:"土库镇",712125:"褒忠乡",712126:"东势乡",712127:"台西乡",712128:"仑背乡",712129:"麦寮乡",712130:"斗六市",712131:"林内乡",712132:"古坑乡",712133:"莿桐乡",712134:"西螺镇",712135:"二仑乡",712136:"北港镇",712137:"水林乡",712138:"口湖乡",712139:"四湖乡",712140:"元长乡",712400:"屏东县",712434:"屏东市",712435:"三地门乡",712436:"雾台乡",712437:"玛家乡",712438:"九如乡",712439:"里港乡",712440:"高树乡",712441:"盐埔乡",712442:"长治乡",712443:"麟洛乡",712444:"竹田乡",712445:"内埔乡",712446:"万丹乡",712447:"潮州镇",712448:"泰武乡",712449:"来义乡",712450:"万峦乡",712451:"崁顶乡",712452:"新埤乡",712453:"南州乡",712454:"林边乡",712455:"东港镇",712456:"琉球乡",712457:"佳冬乡",712458:"新园乡",712459:"枋寮乡",712460:"枋山乡",712461:"春日乡",712462:"狮子乡",712463:"车城乡",712464:"牡丹乡",712465:"恒春镇",712466:"满州乡",712500:"台东县",712517:"台东市",712518:"绿岛乡",712519:"兰屿乡",712520:"延平乡",712521:"卑南乡",712522:"鹿野乡",712523:"关山镇",712524:"海端乡",712525:"池上乡",712526:"东河乡",712527:"成功镇",712528:"长滨乡",712529:"金峰乡",712530:"大武乡",712531:"达仁乡",712532:"太麻里乡",712600:"花莲县",712615:"花莲市",712616:"新城乡",712617:"太鲁阁",712618:"秀林乡",712619:"吉安乡",712620:"寿丰乡",712621:"凤林镇",712622:"光复乡",712623:"丰滨乡",712624:"瑞穗乡",712625:"万荣乡",712626:"玉里镇",712627:"卓溪乡",712628:"富里乡",712700:"澎湖县",712707:"马公市",712708:"西屿乡",712709:"望安乡",712710:"七美乡",712711:"白沙乡",712712:"湖西乡",712800:"连江县",712805:"南竿乡",712806:"北竿乡",712807:"莒光乡",712808:"东引乡",81e4:"香港特别行政区",810100:"香港岛",810101:"中西区",810102:"湾仔",810103:"东区",810104:"南区",810200:"九龙",810201:"九龙城区",810202:"油尖旺区",810203:"深水埗区",810204:"黄大仙区",810205:"观塘区",810300:"新界",810301:"北区",810302:"大埔区",810303:"沙田区",810304:"西贡区",810305:"元朗区",810306:"屯门区",810307:"荃湾区",810308:"葵青区",810309:"离岛区",82e4:"澳门特别行政区",820100:"澳门半岛",820200:"离岛",99e4:"海外",990100:"海外"};function o(l){for(var c={},u=0,d;u<l.length;u++)d=l[u],!(!d||!d.id)&&(c[d.id]=d);for(var f=[],v=0;v<l.length;v++)if(d=l[v],!!d){if(d.pid==null&&d.parentId==null){f.push(d);continue}var g=c[d.pid]||c[d.parentId];g&&(g.children||(g.children=[]),g.children.push(d))}return f}var s=function(){var l=[];for(var c in r){var u=c.slice(2,6)==="0000"?void 0:c.slice(4,6)=="00"?c.slice(0,2)+"0000":c.slice(0,4)+"00";l.push({id:c,pid:u,name:r[c]})}return o(l)}();a.exports=s},function(a,n,r){var o=r(18);a.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var s="abcdefABCDEF1234567890",l=this.string(s,8)+"-"+this.string(s,4)+"-"+this.string(s,4)+"-"+this.string(s,4)+"-"+this.string(s,12);return l},uuid:function(){return this.guid()},id:function(){var s,l=0,c=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],u=["1","0","X","9","8","7","6","5","4","3","2"];s=this.pick(o).id+this.date("yyyyMMdd")+this.string("number",3);for(var d=0;d<s.length;d++)l+=s[d]*c[d];return s+=u[l%11],s},increment:function(){var s=0;return function(l){return s+=+l||1}}(),inc:function(s){return this.increment(s)}}},function(a,n,r){var o=r(21),s=r(22);a.exports={Parser:o,Handler:s}},function(a,n){function r(D){this.type=D,this.offset=r.offset(),this.text=r.text()}function o(D,L){r.call(this,"alternate"),this.left=D,this.right=L}function s(D){r.call(this,"match"),this.body=D.filter(Boolean)}function l(D,L){r.call(this,D),this.body=L}function c(D){l.call(this,"capture-group"),this.index=P[this.offset]||(P[this.offset]=E++),this.body=D}function u(D,L){r.call(this,"quantified"),this.body=D,this.quantifier=L}function d(D,L){r.call(this,"quantifier"),this.min=D,this.max=L,this.greedy=!0}function f(D,L){r.call(this,"charset"),this.invert=D,this.body=L}function v(D,L){r.call(this,"range"),this.start=D,this.end=L}function g(D){r.call(this,"literal"),this.body=D,this.escaped=this.body!=this.text}function y(D){r.call(this,"unicode"),this.code=D.toUpperCase()}function _(D){r.call(this,"hex"),this.code=D.toUpperCase()}function S(D){r.call(this,"octal"),this.code=D.toUpperCase()}function x(D){r.call(this,"back-reference"),this.code=D.toUpperCase()}function T(D){r.call(this,"control-character"),this.code=D.toUpperCase()}var w=function(){function D(O,B){function V(){this.constructor=O}V.prototype=B.prototype,O.prototype=new V}function L(O,B,V,F,U){function G(W,j){function K(ee){function he(pe){return pe.charCodeAt(0).toString(16).toUpperCase()}return ee.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(pe){return"\\x0"+he(pe)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(pe){return"\\x"+he(pe)}).replace(/[\u0180-\u0FFF]/g,function(pe){return"\\u0"+he(pe)}).replace(/[\u1080-\uFFFF]/g,function(pe){return"\\u"+he(pe)})}var q,ie;switch(W.length){case 0:q="end of input";break;case 1:q=W[0];break;default:q=W.slice(0,-1).join(", ")+" or "+W[W.length-1]}return ie=j?'"'+K(j)+'"':"end of input","Expected "+q+" but "+ie+" found."}this.expected=O,this.found=B,this.offset=V,this.line=F,this.column=U,this.name="SyntaxError",this.message=G(O,B)}function $(O){function B(){return O.substring(wt,de)}function V(){return wt}function F(X){function te(We,yt,Nt){var Mn,lr;for(Mn=yt;Nt>Mn;Mn++)lr=O.charAt(Mn),lr===`
`?(We.seenCR||We.line++,We.column=1,We.seenCR=!1):lr==="\r"||lr==="\u2028"||lr==="\u2029"?(We.line++,We.column=1,We.seenCR=!0):(We.column++,We.seenCR=!1)}return Gn!==X&&(Gn>X&&(Gn=0,Fr={line:1,column:1,seenCR:!1}),te(Fr,Gn,X),Gn=X),Fr}function U(X){Wn>de||(de>Wn&&(Wn=de,Yn=[]),Yn.push(X))}function G(X){var te=0;for(X.sort();te<X.length;)X[te-1]===X[te]?X.splice(te,1):te++}function W(){var X,te,We,yt,Nt;return X=de,te=j(),te!==null?(We=de,O.charCodeAt(de)===124?(yt=hn,de++):(yt=null,ht===0&&U(Pn)),yt!==null?(Nt=W(),Nt!==null?(yt=[yt,Nt],We=yt):(de=We,We=it)):(de=We,We=it),We===null&&(We=Jt),We!==null?(wt=X,te=hr(te,We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function j(){var X,te,We,yt,Nt;if(X=de,te=q(),te===null&&(te=Jt),te!==null)if(We=de,ht++,yt=he(),ht--,yt===null?We=Jt:(de=We,We=it),We!==null){for(yt=[],Nt=ee(),Nt===null&&(Nt=K());Nt!==null;)yt.push(Nt),Nt=ee(),Nt===null&&(Nt=K());yt!==null?(Nt=ie(),Nt===null&&(Nt=Jt),Nt!==null?(wt=X,te=vn(te,yt,Nt),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)}else de=X,X=it;else de=X,X=it;return X}function K(){var X;return X=_e(),X===null&&(X=J(),X===null&&(X=ze())),X}function q(){var X,te;return X=de,O.charCodeAt(de)===94?(te=Bn,de++):(te=null,ht===0&&U(Zn)),te!==null&&(wt=X,te=dr()),te===null&&(de=X),X=te,X}function ie(){var X,te;return X=de,O.charCodeAt(de)===36?(te=Rn,de++):(te=null,ht===0&&U(fr)),te!==null&&(wt=X,te=Vn()),te===null&&(de=X),X=te,X}function ee(){var X,te,We;return X=de,te=K(),te!==null?(We=he(),We!==null?(wt=X,te=pr(te,We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function he(){var X,te,We;return ht++,X=de,te=pe(),te!==null?(We=oe(),We===null&&(We=Jt),We!==null?(wt=X,te=Jn(te,We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),ht--,X===null&&(te=null,ht===0&&U(Fn)),X}function pe(){var X;return X=ce(),X===null&&(X=ye(),X===null&&(X=we(),X===null&&(X=ge(),X===null&&(X=Se(),X===null&&(X=$e()))))),X}function ce(){var X,te,We,yt,Nt,Mn;return X=de,O.charCodeAt(de)===123?(te=Dn,de++):(te=null,ht===0&&U(Qn)),te!==null?(We=me(),We!==null?(O.charCodeAt(de)===44?(yt=Cr,de++):(yt=null,ht===0&&U(vr)),yt!==null?(Nt=me(),Nt!==null?(O.charCodeAt(de)===125?(Mn=gr,de++):(Mn=null,ht===0&&U(le)),Mn!==null?(wt=X,te=Pe(We,Nt),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)):(de=X,X=it)):(de=X,X=it)):(de=X,X=it),X}function ye(){var X,te,We,yt;return X=de,O.charCodeAt(de)===123?(te=Dn,de++):(te=null,ht===0&&U(Qn)),te!==null?(We=me(),We!==null?(O.substr(de,2)===Ve?(yt=Ve,de+=2):(yt=null,ht===0&&U(Ue)),yt!==null?(wt=X,te=Re(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)):(de=X,X=it),X}function we(){var X,te,We,yt;return X=de,O.charCodeAt(de)===123?(te=Dn,de++):(te=null,ht===0&&U(Qn)),te!==null?(We=me(),We!==null?(O.charCodeAt(de)===125?(yt=gr,de++):(yt=null,ht===0&&U(le)),yt!==null?(wt=X,te=Qe(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)):(de=X,X=it),X}function ge(){var X,te;return X=de,O.charCodeAt(de)===43?(te=dt,de++):(te=null,ht===0&&U(vt)),te!==null&&(wt=X,te=mt()),te===null&&(de=X),X=te,X}function Se(){var X,te;return X=de,O.charCodeAt(de)===42?(te=Dt,de++):(te=null,ht===0&&U(Rt)),te!==null&&(wt=X,te=_t()),te===null&&(de=X),X=te,X}function $e(){var X,te;return X=de,O.charCodeAt(de)===63?(te=Lt,de++):(te=null,ht===0&&U($t)),te!==null&&(wt=X,te=Yt()),te===null&&(de=X),X=te,X}function oe(){var X;return O.charCodeAt(de)===63?(X=Lt,de++):(X=null,ht===0&&U($t)),X}function me(){var X,te,We;if(X=de,te=[],Wt.test(O.charAt(de))?(We=O.charAt(de),de++):(We=null,ht===0&&U(Ot)),We!==null)for(;We!==null;)te.push(We),Wt.test(O.charAt(de))?(We=O.charAt(de),de++):(We=null,ht===0&&U(Ot));else te=it;return te!==null&&(wt=X,te=xt(te)),te===null&&(de=X),X=te,X}function _e(){var X,te,We,yt;return X=de,O.charCodeAt(de)===40?(te=jt,de++):(te=null,ht===0&&U(kt)),te!==null?(We=Ge(),We===null&&(We=se(),We===null&&(We=Le(),We===null&&(We=Te()))),We!==null?(O.charCodeAt(de)===41?(yt=an,de++):(yt=null,ht===0&&U(dn)),yt!==null?(wt=X,te=Xt(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)):(de=X,X=it),X}function Te(){var X,te;return X=de,te=W(),te!==null&&(wt=X,te=gn(te)),te===null&&(de=X),X=te,X}function Le(){var X,te,We;return X=de,O.substr(de,2)===Ft?(te=Ft,de+=2):(te=null,ht===0&&U(rn)),te!==null?(We=W(),We!==null?(wt=X,te=sn(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function Ge(){var X,te,We;return X=de,O.substr(de,2)===Mt?(te=Mt,de+=2):(te=null,ht===0&&U(Qt)),te!==null?(We=W(),We!==null?(wt=X,te=Sn(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function se(){var X,te,We;return X=de,O.substr(de,2)===ln?(te=ln,de+=2):(te=null,ht===0&&U(mr)),te!==null?(We=W(),We!==null?(wt=X,te=ei(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function J(){var X,te,We,yt,Nt;if(ht++,X=de,O.charCodeAt(de)===91?(te=In,de++):(te=null,ht===0&&U(qi)),te!==null)if(O.charCodeAt(de)===94?(We=Bn,de++):(We=null,ht===0&&U(Zn)),We===null&&(We=Jt),We!==null){for(yt=[],Nt=xe(),Nt===null&&(Nt=De());Nt!==null;)yt.push(Nt),Nt=xe(),Nt===null&&(Nt=De());yt!==null?(O.charCodeAt(de)===93?(Nt=Ki,de++):(Nt=null,ht===0&&U(bn)),Nt!==null?(wt=X,te=Zi(We,yt),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)}else de=X,X=it;else de=X,X=it;return ht--,X===null&&(te=null,ht===0&&U(ji)),X}function xe(){var X,te,We,yt;return ht++,X=de,te=De(),te!==null?(O.charCodeAt(de)===45?(We=ti,de++):(We=null,ht===0&&U(Er)),We!==null?(yt=De(),yt!==null?(wt=X,te=ni(te,yt),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it)):(de=X,X=it),ht--,X===null&&(te=null,ht===0&&U(Mr)),X}function De(){var X;return ht++,X=Ie(),X===null&&(X=Ae()),ht--,X===null&&ht===0&&U(Pr),X}function Ae(){var X,te;return X=de,ri.test(O.charAt(de))?(te=O.charAt(de),de++):(te=null,ht===0&&U(er)),te!==null&&(wt=X,te=yr(te)),te===null&&(de=X),X=te,X}function Ie(){var X;return X=be(),X===null&&(X=bt(),X===null&&(X=Ne(),X===null&&(X=Je(),X===null&&(X=qe(),X===null&&(X=Ze(),X===null&&(X=Pt(),X===null&&(X=je(),X===null&&(X=ct(),X===null&&(X=gt(),X===null&&(X=St(),X===null&&(X=at(),X===null&&(X=Ct(),X===null&&(X=Ce(),X===null&&(X=ot(),X===null&&(X=He(),X===null&&(X=Xe(),X===null&&(X=ut()))))))))))))))))),X}function ze(){var X;return X=Fe(),X===null&&(X=Q(),X===null&&(X=ae())),X}function Fe(){var X,te;return X=de,O.charCodeAt(de)===46?(te=xn,de++):(te=null,ht===0&&U(Rr)),te!==null&&(wt=X,te=_r()),te===null&&(de=X),X=te,X}function ae(){var X,te;return ht++,X=de,Un.test(O.charAt(de))?(te=O.charAt(de),de++):(te=null,ht===0&&U(tr)),te!==null&&(wt=X,te=yr(te)),te===null&&(de=X),X=te,ht--,X===null&&(te=null,ht===0&&U(Dr)),X}function Q(){var X;return X=Ee(),X===null&&(X=ke(),X===null&&(X=bt(),X===null&&(X=Ne(),X===null&&(X=Je(),X===null&&(X=qe(),X===null&&(X=Ze(),X===null&&(X=Pt(),X===null&&(X=je(),X===null&&(X=ct(),X===null&&(X=gt(),X===null&&(X=St(),X===null&&(X=at(),X===null&&(X=Ct(),X===null&&(X=Bt(),X===null&&(X=Ce(),X===null&&(X=ot(),X===null&&(X=He(),X===null&&(X=Xe(),X===null&&(X=ut()))))))))))))))))))),X}function be(){var X,te;return X=de,O.substr(de,2)===Tn?(te=Tn,de+=2):(te=null,ht===0&&U(Ir)),te!==null&&(wt=X,te=ii()),te===null&&(de=X),X=te,X}function Ee(){var X,te;return X=de,O.substr(de,2)===Tn?(te=Tn,de+=2):(te=null,ht===0&&U(Ir)),te!==null&&(wt=X,te=An()),te===null&&(de=X),X=te,X}function ke(){var X,te;return X=de,O.substr(de,2)===ai?(te=ai,de+=2):(te=null,ht===0&&U(Ji)),te!==null&&(wt=X,te=zn()),te===null&&(de=X),X=te,X}function Ne(){var X,te;return X=de,O.substr(de,2)===nr?(te=nr,de+=2):(te=null,ht===0&&U(Ln)),te!==null&&(wt=X,te=Lr()),te===null&&(de=X),X=te,X}function Je(){var X,te;return X=de,O.substr(de,2)===oi?(te=oi,de+=2):(te=null,ht===0&&U($r)),te!==null&&(wt=X,te=si()),te===null&&(de=X),X=te,X}function qe(){var X,te;return X=de,O.substr(de,2)===li?(te=li,de+=2):(te=null,ht===0&&U(Qi)),te!==null&&(wt=X,te=ea()),te===null&&(de=X),X=te,X}function Ze(){var X,te;return X=de,O.substr(de,2)===Nr?(te=Nr,de+=2):(te=null,ht===0&&U(ta)),te!==null&&(wt=X,te=na()),te===null&&(de=X),X=te,X}function Pt(){var X,te;return X=de,O.substr(de,2)===Sr?(te=Sr,de+=2):(te=null,ht===0&&U(ci)),te!==null&&(wt=X,te=ra()),te===null&&(de=X),X=te,X}function je(){var X,te;return X=de,O.substr(de,2)===ui?(te=ui,de+=2):(te=null,ht===0&&U(hi)),te!==null&&(wt=X,te=di()),te===null&&(de=X),X=te,X}function ct(){var X,te;return X=de,O.substr(de,2)===fi?(te=fi,de+=2):(te=null,ht===0&&U(Or)),te!==null&&(wt=X,te=ia()),te===null&&(de=X),X=te,X}function gt(){var X,te;return X=de,O.substr(de,2)===$n?(te=$n,de+=2):(te=null,ht===0&&U(pi)),te!==null&&(wt=X,te=vi()),te===null&&(de=X),X=te,X}function St(){var X,te;return X=de,O.substr(de,2)===gi?(te=gi,de+=2):(te=null,ht===0&&U(aa)),te!==null&&(wt=X,te=mi()),te===null&&(de=X),X=te,X}function at(){var X,te;return X=de,O.substr(de,2)===rr?(te=rr,de+=2):(te=null,ht===0&&U(oa)),te!==null&&(wt=X,te=yi()),te===null&&(de=X),X=te,X}function Ct(){var X,te;return X=de,O.substr(de,2)===ir?(te=ir,de+=2):(te=null,ht===0&&U(_i)),te!==null&&(wt=X,te=Si()),te===null&&(de=X),X=te,X}function bt(){var X,te,We;return X=de,O.substr(de,2)===Nn?(te=Nn,de+=2):(te=null,ht===0&&U(wn)),te!==null?(O.length>de?(We=O.charAt(de),de++):(We=null,ht===0&&U(kr)),We!==null?(wt=X,te=bi(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function Bt(){var X,te,We;return X=de,O.charCodeAt(de)===92?(te=Br,de++):(te=null,ht===0&&U(xi)),te!==null?(Hn.test(O.charAt(de))?(We=O.charAt(de),de++):(We=null,ht===0&&U(sa)),We!==null?(wt=X,te=la(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}function Ce(){var X,te,We,yt;if(X=de,O.substr(de,2)===ar?(te=ar,de+=2):(te=null,ht===0&&U(Ti)),te!==null){if(We=[],or.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(br)),yt!==null)for(;yt!==null;)We.push(yt),or.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(br));else We=it;We!==null?(wt=X,te=Cn(We),te===null&&(de=X),X=te):(de=X,X=it)}else de=X,X=it;return X}function ot(){var X,te,We,yt;if(X=de,O.substr(de,2)===en?(te=en,de+=2):(te=null,ht===0&&U(qt)),te!==null){if(We=[],mn.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(sr)),yt!==null)for(;yt!==null;)We.push(yt),mn.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(sr));else We=it;We!==null?(wt=X,te=yn(We),te===null&&(de=X),X=te):(de=X,X=it)}else de=X,X=it;return X}function He(){var X,te,We,yt;if(X=de,O.substr(de,2)===Ai?(te=Ai,de+=2):(te=null,ht===0&&U(ca)),te!==null){if(We=[],mn.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(sr)),yt!==null)for(;yt!==null;)We.push(yt),mn.test(O.charAt(de))?(yt=O.charAt(de),de++):(yt=null,ht===0&&U(sr));else We=it;We!==null?(wt=X,te=On(We),te===null&&(de=X),X=te):(de=X,X=it)}else de=X,X=it;return X}function Xe(){var X,te;return X=de,O.substr(de,2)===ar?(te=ar,de+=2):(te=null,ht===0&&U(Ti)),te!==null&&(wt=X,te=Vr()),te===null&&(de=X),X=te,X}function ut(){var X,te,We;return X=de,O.charCodeAt(de)===92?(te=Br,de++):(te=null,ht===0&&U(xi)),te!==null?(O.length>de?(We=O.charAt(de),de++):(We=null,ht===0&&U(kr)),We!==null?(wt=X,te=yr(We),te===null&&(de=X),X=te):(de=X,X=it)):(de=X,X=it),X}var st,At=arguments.length>1?arguments[1]:{},Gt={regexp:W},Ut=W,it=null,Jt="",hn="|",Pn='"|"',hr=function(X,te){return te?new o(X,te[1]):X},vn=function(X,te,We){return new s([X].concat(te).concat([We]))},Bn="^",Zn='"^"',dr=function(){return new r("start")},Rn="$",fr='"$"',Vn=function(){return new r("end")},pr=function(X,te){return new u(X,te)},Fn="Quantifier",Jn=function(X,te){return te&&(X.greedy=!1),X},Dn="{",Qn='"{"',Cr=",",vr='","',gr="}",le='"}"',Pe=function(X,te){return new d(X,te)},Ve=",}",Ue='",}"',Re=function(X){return new d(X,1/0)},Qe=function(X){return new d(X,X)},dt="+",vt='"+"',mt=function(){return new d(1,1/0)},Dt="*",Rt='"*"',_t=function(){return new d(0,1/0)},Lt="?",$t='"?"',Yt=function(){return new d(0,1)},Wt=/^[0-9]/,Ot="[0-9]",xt=function(X){return+X.join("")},jt="(",kt='"("',an=")",dn='")"',Xt=function(X){return X},gn=function(X){return new c(X)},Ft="?:",rn='"?:"',sn=function(X){return new l("non-capture-group",X)},Mt="?=",Qt='"?="',Sn=function(X){return new l("positive-lookahead",X)},ln="?!",mr='"?!"',ei=function(X){return new l("negative-lookahead",X)},ji="CharacterSet",In="[",qi='"["',Ki="]",bn='"]"',Zi=function(X,te){return new f(!!X,te)},Mr="CharacterRange",ti="-",Er='"-"',ni=function(X,te){return new v(X,te)},Pr="Character",ri=/^[^\\\]]/,er="[^\\\\\\]]",yr=function(X){return new g(X)},xn=".",Rr='"."',_r=function(){return new r("any-character")},Dr="Literal",Un=/^[^|\\\/.[()?+*$\^]/,tr="[^|\\\\\\/.[()?+*$\\^]",Tn="\\b",Ir='"\\\\b"',ii=function(){return new r("backspace")},An=function(){return new r("word-boundary")},ai="\\B",Ji='"\\\\B"',zn=function(){return new r("non-word-boundary")},nr="\\d",Ln='"\\\\d"',Lr=function(){return new r("digit")},oi="\\D",$r='"\\\\D"',si=function(){return new r("non-digit")},li="\\f",Qi='"\\\\f"',ea=function(){return new r("form-feed")},Nr="\\n",ta='"\\\\n"',na=function(){return new r("line-feed")},Sr="\\r",ci='"\\\\r"',ra=function(){return new r("carriage-return")},ui="\\s",hi='"\\\\s"',di=function(){return new r("white-space")},fi="\\S",Or='"\\\\S"',ia=function(){return new r("non-white-space")},$n="\\t",pi='"\\\\t"',vi=function(){return new r("tab")},gi="\\v",aa='"\\\\v"',mi=function(){return new r("vertical-tab")},rr="\\w",oa='"\\\\w"',yi=function(){return new r("word")},ir="\\W",_i='"\\\\W"',Si=function(){return new r("non-word")},Nn="\\c",wn='"\\\\c"',kr="any character",bi=function(X){return new T(X)},Br="\\",xi='"\\\\"',Hn=/^[1-9]/,sa="[1-9]",la=function(X){return new x(X)},ar="\\0",Ti='"\\\\0"',or=/^[0-7]/,br="[0-7]",Cn=function(X){return new S(X.join(""))},en="\\x",qt='"\\\\x"',mn=/^[0-9a-fA-F]/,sr="[0-9a-fA-F]",yn=function(X){return new _(X.join(""))},Ai="\\u",ca='"\\\\u"',On=function(X){return new y(X.join(""))},Vr=function(){return new r("null-character")},de=0,wt=0,Gn=0,Fr={line:1,column:1,seenCR:!1},Wn=0,Yn=[],ht=0;if("startRule"in At){if(!(At.startRule in Gt))throw new Error(`Can't start parsing from rule "`+At.startRule+'".');Ut=Gt[At.startRule]}if(r.offset=V,r.text=B,st=Ut(),st!==null&&de===O.length)return st;throw G(Yn),wt=Math.max(de,Wn),new L(Yn,wt<O.length?O.charAt(wt):null,wt,F(wt).line,F(wt).column)}return D(L,Error),{SyntaxError:L,parse:$}}(),E=1,P={};a.exports=w},function(a,n,r){var o=r(3),s=r(5),l={extend:o.extend},c=_(97,122),u=_(65,90),d=_(48,57),f=_(32,47)+_(58,64)+_(91,96)+_(123,126),v=_(32,126),g=` \f
\r	\v \u2028\u2029`,y={"\\w":c+u+d+"_","\\W":f.replace("_",""),"\\s":g,"\\S":function(){for(var S=v,x=0;x<g.length;x++)S=S.replace(g[x],"");return S}(),"\\d":d,"\\D":c+u+f};function _(S,x){for(var T="",w=S;w<=x;w++)T+=String.fromCharCode(w);return T}l.gen=function(S,x,T){return T=T||{guid:1},l[S.type]?l[S.type](S,x,T):l.token(S,x,T)},l.extend({token:function(S,x,T){switch(S.type){case"start":case"end":return"";case"any-character":return s.character();case"backspace":return"";case"word-boundary":return"";case"non-word-boundary":break;case"digit":return s.pick(d.split(""));case"non-digit":return s.pick((c+u+f).split(""));case"form-feed":break;case"line-feed":return S.body||S.text;case"carriage-return":break;case"white-space":return s.pick(g.split(""));case"non-white-space":return s.pick((c+u+d).split(""));case"tab":break;case"vertical-tab":break;case"word":return s.pick((c+u+d).split(""));case"non-word":return s.pick(f.replace("_","").split(""))}return S.body||S.text},alternate:function(S,x,T){return this.gen(s.boolean()?S.left:S.right,x,T)},match:function(S,x,T){x="";for(var w=0;w<S.body.length;w++)x+=this.gen(S.body[w],x,T);return x},"capture-group":function(S,x,T){return x=this.gen(S.body,x,T),T[T.guid++]=x,x},"non-capture-group":function(S,x,T){return this.gen(S.body,x,T)},"positive-lookahead":function(S,x,T){return this.gen(S.body,x,T)},"negative-lookahead":function(S,x,T){return""},quantified:function(S,x,T){x="";for(var w=this.quantifier(S.quantifier),E=0;E<w;E++)x+=this.gen(S.body,x,T);return x},quantifier:function(S,x,T){var w=Math.max(S.min,0),E=isFinite(S.max)?S.max:w+s.integer(3,7);return s.integer(w,E)},charset:function(S,x,T){if(S.invert)return this["invert-charset"](S,x,T);var w=s.pick(S.body);return this.gen(w,x,T)},"invert-charset":function(S,x,T){for(var w=v,E=0,P;E<S.body.length;E++)switch(P=S.body[E],P.type){case"literal":w=w.replace(P.body,"");break;case"range":for(var D=this.gen(P.start,x,T).charCodeAt(),L=this.gen(P.end,x,T).charCodeAt(),$=D;$<=L;$++)w=w.replace(String.fromCharCode($),"");default:var O=y[P.text];if(O)for(var B=0;B<=O.length;B++)w=w.replace(O[B],"")}return s.pick(w.split(""))},range:function(S,x,T){var w=this.gen(S.start,x,T).charCodeAt(),E=this.gen(S.end,x,T).charCodeAt();return String.fromCharCode(s.integer(w,E))},literal:function(S,x,T){return S.escaped?S.body:S.text},unicode:function(S,x,T){return String.fromCharCode(parseInt(S.code,16))},hex:function(S,x,T){return String.fromCharCode(parseInt(S.code,16))},octal:function(S,x,T){return String.fromCharCode(parseInt(S.code,8))},"back-reference":function(S,x,T){return T[S.code]||""},CONTROL_CHARACTER_MAP:function(){for(var S="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),x=`\0       \x07 \b 	 
 \v \f \r              \x1B    `.split(" "),T={},w=0;w<S.length;w++)T[S[w]]=x[w];return T}(),"control-character":function(S,x,T){return this.CONTROL_CHARACTER_MAP[S.code]}}),a.exports=l},function(a,n,r){a.exports=r(24)},function(a,n,r){var o=r(2),s=r(3),l=r(4);function c(u,d,f){f=f||[];var v={name:typeof d=="string"?d.replace(o.RE_KEY,"$1"):d,template:u,type:s.type(u),rule:l.parse(d)};switch(v.path=f.slice(0),v.path.push(d===void 0?"ROOT":v.name),v.type){case"array":v.items=[],s.each(u,function(g,y){v.items.push(c(g,y,v.path))});break;case"object":v.properties=[],s.each(u,function(g,y){v.properties.push(c(g,y,v.path))});break}return v}a.exports=c},function(a,n,r){a.exports=r(26)},function(a,n,r){var o=r(2),s=r(3),l=r(23);function c(f,v){for(var g=l(f),y=u.diff(g,v),_=0;_<y.length;_++);return y}var u={diff:function(v,g,y){var _=[];return this.name(v,g,y,_)&&this.type(v,g,y,_)&&(this.value(v,g,y,_),this.properties(v,g,y,_),this.items(v,g,y,_)),_},name:function(f,v,g,y){var _=y.length;return d.equal("name",f.path,g+"",f.name+"",y),y.length===_},type:function(f,v,g,y){var _=y.length;switch(f.type){case"string":if(f.template.match(o.RE_PLACEHOLDER))return!0;break;case"array":if(f.rule.parameters&&(f.rule.min!==void 0&&f.rule.max===void 0&&f.rule.count===1||f.rule.parameters[2]))return!0;break;case"function":return!0}return d.equal("type",f.path,s.type(v),f.type,y),y.length===_},value:function(f,v,g,y){var _=y.length,S=f.rule,x=f.type;if(x==="object"||x==="array"||x==="function")return!0;if(!S.parameters){switch(x){case"regexp":return d.match("value",f.path,v,f.template,y),y.length===_;case"string":if(f.template.match(o.RE_PLACEHOLDER))return y.length===_;break}return d.equal("value",f.path,v,f.template,y),y.length===_}var T;switch(x){case"number":var w=(v+"").split(".");w[0]=+w[0],S.min!==void 0&&S.max!==void 0&&(d.greaterThanOrEqualTo("value",f.path,w[0],Math.min(S.min,S.max),y),d.lessThanOrEqualTo("value",f.path,w[0],Math.max(S.min,S.max),y)),S.min!==void 0&&S.max===void 0&&d.equal("value",f.path,w[0],S.min,y,"[value] "+g),S.decimal&&(S.dmin!==void 0&&S.dmax!==void 0&&(d.greaterThanOrEqualTo("value",f.path,w[1].length,S.dmin,y),d.lessThanOrEqualTo("value",f.path,w[1].length,S.dmax,y)),S.dmin!==void 0&&S.dmax===void 0&&d.equal("value",f.path,w[1].length,S.dmin,y));break;case"boolean":break;case"string":T=v.match(new RegExp(f.template,"g")),T=T?T.length:0,S.min!==void 0&&S.max!==void 0&&(d.greaterThanOrEqualTo("repeat count",f.path,T,S.min,y),d.lessThanOrEqualTo("repeat count",f.path,T,S.max,y)),S.min!==void 0&&S.max===void 0&&d.equal("repeat count",f.path,T,S.min,y);break;case"regexp":T=v.match(new RegExp(f.template.source.replace(/^\^|\$$/g,""),"g")),T=T?T.length:0,S.min!==void 0&&S.max!==void 0&&(d.greaterThanOrEqualTo("repeat count",f.path,T,S.min,y),d.lessThanOrEqualTo("repeat count",f.path,T,S.max,y)),S.min!==void 0&&S.max===void 0&&d.equal("repeat count",f.path,T,S.min,y);break}return y.length===_},properties:function(f,v,g,y){var _=y.length,S=f.rule,x=s.keys(v);if(f.properties){if(f.rule.parameters?(S.min!==void 0&&S.max!==void 0&&(d.greaterThanOrEqualTo("properties length",f.path,x.length,Math.min(S.min,S.max),y),d.lessThanOrEqualTo("properties length",f.path,x.length,Math.max(S.min,S.max),y)),S.min!==void 0&&S.max===void 0&&S.count!==1&&d.equal("properties length",f.path,x.length,S.min,y)):d.equal("properties length",f.path,x.length,f.properties.length,y),y.length!==_)return!1;for(var T=0;T<x.length;T++)y.push.apply(y,this.diff(function(){var w;return s.each(f.properties,function(E){E.name===x[T]&&(w=E)}),w||f.properties[T]}(),v[x[T]],x[T]));return y.length===_}},items:function(f,v,g,y){var _=y.length;if(f.items){var S=f.rule;if(!f.rule.parameters)d.equal("items length",f.path,v.length,f.items.length,y);else{if(S.min!==void 0&&S.max!==void 0&&(d.greaterThanOrEqualTo("items",f.path,v.length,Math.min(S.min,S.max)*f.items.length,y,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),d.lessThanOrEqualTo("items",f.path,v.length,Math.max(S.min,S.max)*f.items.length,y,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),S.min!==void 0&&S.max===void 0){if(S.count===1)return y.length===_;d.equal("items length",f.path,v.length,S.min*f.items.length,y)}if(S.parameters[2])return y.length===_}if(y.length!==_)return!1;for(var x=0;x<v.length;x++)y.push.apply(y,this.diff(f.items[x%f.items.length],v[x],x%f.items.length));return y.length===_}}},d={message:function(f){return(f.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",f.type.toUpperCase()).replace("{ltype}",f.type.toLowerCase()).replace("{path}",s.isArray(f.path)&&f.path.join(".")||f.path).replace("{action}",f.action).replace("{expected}",f.expected).replace("{actual}",f.actual)},equal:function(f,v,g,y,_,S){if(g===y)return!0;switch(f){case"type":if(y==="regexp"&&g==="string")return!0;break}var x={path:v,type:f,actual:g,expected:y,action:"is equal to",message:S};return x.message=d.message(x),_.push(x),!1},match:function(f,v,g,y,_,S){if(y.test(g))return!0;var x={path:v,type:f,actual:g,expected:y,action:"matches",message:S};return x.message=d.message(x),_.push(x),!1},notEqual:function(f,v,g,y,_,S){if(g!==y)return!0;var x={path:v,type:f,actual:g,expected:y,action:"is not equal to",message:S};return x.message=d.message(x),_.push(x),!1},greaterThan:function(f,v,g,y,_,S){if(g>y)return!0;var x={path:v,type:f,actual:g,expected:y,action:"is greater than",message:S};return x.message=d.message(x),_.push(x),!1},lessThan:function(f,v,g,y,_,S){if(g<y)return!0;var x={path:v,type:f,actual:g,expected:y,action:"is less to",message:S};return x.message=d.message(x),_.push(x),!1},greaterThanOrEqualTo:function(f,v,g,y,_,S){if(g>=y)return!0;var x={path:v,type:f,actual:g,expected:y,action:"is greater than or equal to",message:S};return x.message=d.message(x),_.push(x),!1},lessThanOrEqualTo:function(f,v,g,y,_,S){if(g<=y)return!0;var x={path:v,type:f,actual:g,expected:y,action:"is less than or equal to",message:S};return x.message=d.message(x),_.push(x),!1}};c.Diff=u,c.Assert=d,a.exports=c},function(a,n,r){a.exports=r(28)},function(a,n,r){var o=r(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch{window.Event=function(S,x,T,w){var E=document.createEvent("CustomEvent");return E.initCustomEvent(S,x,T,w),E}}var s={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l="readystatechange loadstart progress abort error load timeout loadend".split(" "),c="timeout withCredentials".split(" "),u="readyState responseURL status statusText responseType response responseText responseXML".split(" "),d={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function f(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}f._settings={timeout:"10-100"},f.setup=function(_){return o.extend(f._settings,_),f._settings},o.extend(f,s),o.extend(f.prototype,s),f.prototype.mock=!0,f.prototype.match=!1,o.extend(f.prototype,{open:function(_,S,x,T,w){var E=this;o.extend(this.custom,{method:_,url:S,async:typeof x=="boolean"?x:!0,username:T,password:w,options:{url:S,type:_}}),this.custom.timeout=function(B){if(typeof B=="number")return B;if(typeof B=="string"&&!~B.indexOf("-"))return parseInt(B,10);if(typeof B=="string"&&~B.indexOf("-")){var V=B.split("-"),F=parseInt(V[0],10),U=parseInt(V[1],10);return Math.round(Math.random()*(U-F))+F}}(f._settings.timeout);var P=g(this.custom.options);function D(B){for(var V=0;V<u.length;V++)try{E[u[V]]=L[u[V]]}catch{}E.dispatchEvent(new Event(B.type))}if(!P){var L=v();this.custom.xhr=L;for(var $=0;$<l.length;$++)L.addEventListener(l[$],D);T?L.open(_,S,x,T,w):L.open(_,S,x);for(var O=0;O<c.length;O++)try{L[c[O]]=E[c[O]]}catch{}return}this.match=!0,this.custom.template=P,this.readyState=f.OPENED,this.dispatchEvent(new Event("readystatechange"))},setRequestHeader:function(_,S){if(!this.match){this.custom.xhr.setRequestHeader(_,S);return}var x=this.custom.requestHeaders;x[_]?x[_]+=","+S:x[_]=S},timeout:0,withCredentials:!1,upload:{},send:function(S){var x=this;if(this.custom.options.body=S,!this.match){this.custom.xhr.send(S);return}this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(T,this.custom.timeout):T();function T(){x.readyState=f.HEADERS_RECEIVED,x.dispatchEvent(new Event("readystatechange")),x.readyState=f.LOADING,x.dispatchEvent(new Event("readystatechange")),x.status=200,x.statusText=d[200],x.response=x.responseText=JSON.stringify(y(x.custom.template,x.custom.options),null,4),x.readyState=f.DONE,x.dispatchEvent(new Event("readystatechange")),x.dispatchEvent(new Event("load")),x.dispatchEvent(new Event("loadend"))}},abort:function(){if(!this.match){this.custom.xhr.abort();return}this.readyState=f.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))}}),o.extend(f.prototype,{responseURL:"",status:f.UNSENT,statusText:"",getResponseHeader:function(_){return this.match?this.custom.responseHeaders[_.toLowerCase()]:this.custom.xhr.getResponseHeader(_)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var _=this.custom.responseHeaders,S="";for(var x in _)_.hasOwnProperty(x)&&(S+=x+": "+_[x]+`\r
`);return S},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),o.extend(f.prototype,{addEventListener:function(S,x){var T=this.custom.events;T[S]||(T[S]=[]),T[S].push(x)},removeEventListener:function(S,x){for(var T=this.custom.events[S]||[],w=0;w<T.length;w++)T[w]===x&&T.splice(w--,1)},dispatchEvent:function(S){for(var x=this.custom.events[S.type]||[],T=0;T<x.length;T++)x[T].call(this,S);var w="on"+S.type;this[w]&&this[w](S)}});function v(){var _=function(){var T=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,w=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,E=location.href,P=w.exec(E.toLowerCase())||[];return T.test(P[1])}();return window.ActiveXObject?!_&&S()||x():S();function S(){try{return new window._XMLHttpRequest}catch{}}function x(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch{}}}function g(_){for(var S in f.Mock._mocked){var x=f.Mock._mocked[S];if((!x.rurl||T(x.rurl,_.url))&&(!x.rtype||T(x.rtype,_.type.toLowerCase())))return x}function T(w,E){if(o.type(w)==="string")return w===E;if(o.type(w)==="regexp")return w.test(E)}}function y(_,S){return o.isFunction(_.template)?_.template(S):f.Mock.mock(_.template)}a.exports=f}])})})(mock);var mockExports=mock.exports;const Mock=getDefaultExportFromCjs(mockExports),dataTemplate={time:()=>Math.floor(Date.now()/1e3),channel:()=>Mock.Random.integer(1,10),unit:()=>"m/s^2",sampling:()=>8e3,peak:()=>parseFloat(Mock.Random.float(0,.5,7,7).toFixed(7)),valley:()=>-parseFloat(Mock.Random.float(0,.5,7,7).toFixed(7)),peakpeak:()=>parseFloat(Mock.Random.float(0,1,7,7).toFixed(7)),meaning:()=>0,rms:()=>parseFloat(Mock.Random.float(0,.1,4,4).toFixed(4)),skewness:()=>parseFloat(Mock.Random.float(0,.5,1,1).toFixed(1)),kurtosis:()=>parseFloat(Mock.Random.float(1,4,1,1).toFixed(1)),vibration_intensity:()=>parseFloat(Mock.Random.float(0,1,1,1).toFixed(1)),state:()=>Mock.Random.pick(["safe","warning","danger","damage"]),gap_current:()=>parseFloat((20+Math.random()*12).toFixed(2)),gap_minThreshold:()=>20,gap_maxThreshold:()=>30,gap_position:()=>`环号：${1024+Math.floor(Math.random()*10)}`,gap_state:()=>Mock.Random.pick(["normal","abnormal"])},generateMockData=()=>Mock.mock(dataTemplate),_hoisted_1$d={class:"container"},_hoisted_2$d={class:"state-tags"},_hoisted_3$c={class:"data-tags"},_hoisted_4$b={class:"tag-title"},_hoisted_5$b={class:"tag-value"},_hoisted_6$b={class:"chart-container"},_hoisted_7$a={class:"chart-container"},__default__$4={name:"DpFirstpath"},_sfc_main$d=defineComponent({...__default__$4,setup(a){use([install$R,install$O,install$Q,install$g,install$i,install$9,install$p]);const n=[{value:"safe",label:"安全"},{value:"warning",label:"警告"},{value:"danger",label:"危险"},{value:"damage",label:"毁坏"}],r=reactive({value:""}),o=reactive([{name:"峰值",value:0,unit:"MPa"},{name:"峰峰值",value:0,unit:"MPa"},{name:"均值",value:0,unit:"MPa"},{name:"有效值",value:0,unit:"m/s²"},{name:"歪度",value:0,unit:""},{name:"峭度",value:0,unit:""},{name:"烈度",value:0,unit:"mm/s"}]),s=5,l=(y,_,S)=>{const x=s-y;return[{value:y,name:_,itemStyle:{color:S},label:{show:y>0}},{value:x,name:"",itemStyle:{color:"#eee"},label:{show:!1}}]},c=reactive({tooltip:{trigger:"item",formatter:y=>y.name?`${y.name}: ${y.value}`:""},series:[{type:"pie",radius:["65%","80%"],label:{position:"outside",formatter:()=>`峰值
${o[0].value}`,fontSize:14,fontWeight:"bold",distanceToLabelLine:0,align:"center",color:"#73c0de",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:20,length2:0,smooth:!0},data:[]},{type:"pie",radius:["50%","63%"],label:{position:"outside",formatter:()=>`有效值
${o[3].value}`,fontSize:14,fontWeight:"bold",align:"center",verticalAlign:"middle",color:"#91cc75",fixedPosition:!0},labelLine:{show:!0,length:50,length2:0,smooth:!0},data:[]},{type:"pie",radius:["35%","48%"],label:{position:"outside",formatter:()=>`峭度
${o[5].value}`,fontSize:14,fontWeight:"bold",align:"center",color:"#fac858",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:70,length2:0,smooth:!0},data:[]}]}),u=()=>{c.series[0].data=l(o[0].value,"峰值","#73c0de"),c.series[1].data=l(o[3].value,"有效值","#91cc75"),c.series[2].data=l(o[5].value,"峭度","#fac858")},d=reactive({tooltip:{trigger:"axis",formatter:y=>`采集点: ${y[0].value[0]+1}<br/>${y[0].marker} ${y[0].value[1]} mm/s`},grid:{left:"15%"},xAxis:{type:"value",min:0,max:9,interval:1,axisLabel:{formatter:y=>`${y+1}`}},yAxis:{type:"value",name:"震动烈度 (mm/s)"},series:[{name:"震动烈度",type:"line",showSymbol:!0,symbol:"circle",symbolSize:6,symbolColor:"blue",data:[]}]});let f=0;const v=()=>{const y=generateMockData();o[0].value=y.peak,o[1].value=y.peakpeak,o[2].value=y.meaning,o[3].value=y.rms,o[4].value=y.skewness,o[5].value=y.kurtosis,o[6].value=y.vibration_intensity,r.value=y.state,u(),d.series[0].data.push([f,o[6].value]),d.series[0].data.length>60&&d.series[0].data.shift(),d.series[0].data.length<=10?d.xAxis.max=d.series[0].data.length-1:d.series[0].data.length<=60&&(d.xAxis.min=0,d.xAxis.max=d.series[0].data.length-1),f++};let g=null;return onMounted(()=>{v(),g=setInterval(v,5e3)}),onBeforeUnmount(()=>{g&&clearInterval(g)}),(y,_)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$d,[(openBlock(),createElementBlock(Fragment,null,renderList(n,(S,x)=>createBaseVNode("div",{key:x,class:normalizeClass({"state-tag":!0,active:S.value===r.value,safe:S.value==="safe",warning:S.value==="warning",danger:S.value==="danger",damage:S.value==="damage"})},toDisplayString(S.label),3)),64))]),createBaseVNode("div",_hoisted_3$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o,S=>(openBlock(),createElementBlock("div",{key:S.name,class:"tag-item"},[createBaseVNode("div",_hoisted_4$b,toDisplayString(S.name),1),createBaseVNode("div",_hoisted_5$b,toDisplayString(S.value)+toDisplayString(S.unit),1)]))),128))]),createBaseVNode("div",_hoisted_6$b,[createVNode$1(unref(ECharts),{class:"chart",option:c,autoresize:""},null,8,["option"])]),createBaseVNode("div",_hoisted_7$a,[createVNode$1(unref(ECharts),{class:"chart",option:d,autoresize:""},null,8,["option"])])]))}}),Component1=_export_sfc(_sfc_main$d,[["__scopeId","data-v-6804a15b"]]),_hoisted_1$c={class:"container"},_hoisted_2$c={class:"state-tags"},_hoisted_3$b={class:"data-tags"},_hoisted_4$a={class:"tag-title"},_hoisted_5$a={class:"tag-value"},_hoisted_6$a={class:"chart-container"},_hoisted_7$9={class:"chart-container"},__default__$3={name:"DpSecondpath"},_sfc_main$c=defineComponent({...__default__$3,setup(a){use([install$R,install$O,install$Q,install$g,install$i,install$9,install$p]);const n=5;let r=0;const o=reactive([{name:"峰值",value:0,unit:"MPa"},{name:"峰峰值",value:0,unit:"MPa"},{name:"均值",value:0,unit:"MPa"},{name:"有效值",value:0,unit:"m/s²"},{name:"歪度",value:0,unit:""},{name:"峭度",value:0,unit:""},{name:"烈度",value:0,unit:"mm/s"}]),s=[{value:"safe",label:"安全"},{value:"warning",label:"警告"},{value:"danger",label:"危险"},{value:"damage",label:"毁坏"}],l=reactive({value:""}),c=(y,_,S)=>{const x=n-y;return[{value:y,name:_,itemStyle:{color:S},label:{show:y>0}},{value:x,name:"",itemStyle:{color:"#eee"},label:{show:!1}}]},u=reactive({tooltip:{trigger:"item",formatter:y=>y.name?`${y.name}: ${y.value}`:""},grid:{left:"15%"},series:[{type:"pie",radius:["65%","80%"],label:{position:"outside",formatter:()=>`峰值
${o[0].value}`,fontSize:14,fontWeight:"bold",distanceToLabelLine:0,align:"center",color:"#73c0de",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:20,length2:0,smooth:!0},data:[]},{type:"pie",radius:["50%","63%"],label:{position:"outside",formatter:()=>`有效值
${o[3].value}`,fontSize:14,fontWeight:"bold",align:"center",verticalAlign:"middle",color:"#91cc75",fixedPosition:!0},labelLine:{show:!0,length:50,length2:0,smooth:!0},data:[]},{type:"pie",radius:["35%","48%"],label:{position:"outside",formatter:()=>`峭度
${o[5].value}`,fontSize:14,fontWeight:"bold",align:"center",color:"#fac858",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:70,length2:0,smooth:!0},data:[]}]}),d=reactive({tooltip:{trigger:"axis",formatter:y=>`采集点: ${y[0].value[0]+1}<br/>${y[0].marker} ${y[0].value[1]} mm/s`},xAxis:{type:"value",min:0,max:9,interval:1,axisLabel:{formatter:y=>`${y+1}`}},yAxis:{type:"value",name:"震动烈度 (mm/s)"},series:[{name:"震动烈度",type:"line",showSymbol:!0,symbol:"circle",symbolSize:6,symbolColor:"blue",data:[]}]});let f=null;const v=()=>{u.series[0].data=c(o[0].value,"峰值","#73c0de"),u.series[1].data=c(o[3].value,"有效值","#91cc75"),u.series[2].data=c(o[5].value,"峭度","#fac858")},g=()=>{const y=generateMockData();o[0].value=y.peak,o[1].value=y.peakpeak,o[2].value=y.meaning,o[3].value=y.rms,o[4].value=y.skewness,o[5].value=y.kurtosis,o[6].value=y.vibration_intensity,l.value=y.state,v(),d.series[0].data.push([r,o[6].value]),d.series[0].data.length>60&&d.series[0].data.shift(),d.series[0].data.length<=10?d.xAxis.max=d.series[0].data.length-1:d.series[0].data.length<=60&&(d.xAxis.min=0,d.xAxis.max=d.series[0].data.length-1),r++};return onMounted(()=>{g(),f=setInterval(g,5e3)}),onBeforeUnmount(()=>{f&&clearInterval(f)}),(y,_)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",_hoisted_2$c,[(openBlock(),createElementBlock(Fragment,null,renderList(s,(S,x)=>createBaseVNode("div",{key:x,class:normalizeClass({"state-tag":!0,active:S.value===l.value,safe:S.value==="safe",warning:S.value==="warning",danger:S.value==="danger",damage:S.value==="damage"})},toDisplayString(S.label),3)),64))]),createBaseVNode("div",_hoisted_3$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o,S=>(openBlock(),createElementBlock("div",{key:S.name,class:"tag-item"},[createBaseVNode("div",_hoisted_4$a,toDisplayString(S.name),1),createBaseVNode("div",_hoisted_5$a,toDisplayString(S.value)+toDisplayString(S.unit),1)]))),128))]),createBaseVNode("div",_hoisted_6$a,[createVNode$1(unref(ECharts),{class:"chart",option:u,autoresize:""},null,8,["option"])]),createBaseVNode("div",_hoisted_7$9,[createVNode$1(unref(ECharts),{class:"chart",option:d,autoresize:""},null,8,["option"])])]))}}),Component2=_export_sfc(_sfc_main$c,[["__scopeId","data-v-f71f411c"]]),_hoisted_1$b={class:"container"},_hoisted_2$b={class:"state-tags"},_hoisted_3$a={class:"data-tags"},_hoisted_4$9={class:"tag-title"},_hoisted_5$9={class:"tag-value"},_hoisted_6$9={class:"chart-container"},_hoisted_7$8={class:"chart-container"},__default__$2={name:"DpThirdpath"},_sfc_main$b=defineComponent({...__default__$2,setup(a){use([install$R,install$O,install$Q,install$g,install$i,install$9,install$p]);const n=5;let r=0;const o=reactive([{name:"峰值",value:0,unit:"MPa"},{name:"峰峰值",value:0,unit:"MPa"},{name:"均值",value:0,unit:"MPa"},{name:"有效值",value:0,unit:"m/s²"},{name:"歪度",value:0,unit:""},{name:"峭度",value:0,unit:""},{name:"烈度",value:0,unit:"mm/s"}]),s=[{value:"safe",label:"安全"},{value:"warning",label:"警告"},{value:"danger",label:"危险"},{value:"damage",label:"毁坏"}],l=reactive({value:""}),c=(y,_,S)=>{const x=n-y;return[{value:y,name:_,itemStyle:{color:S},label:{show:y>0}},{value:x,name:"",itemStyle:{color:"#eee"},label:{show:!1}}]},u=reactive({tooltip:{trigger:"item",formatter:y=>y.name?`${y.name}: ${y.value}`:""},grid:{left:"15%"},series:[{type:"pie",radius:["65%","80%"],label:{position:"outside",formatter:()=>`峰值
${o[0].value}`,fontSize:14,fontWeight:"bold",distanceToLabelLine:0,align:"center",color:"#73c0de",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:20,length2:0,smooth:!0},data:[]},{type:"pie",radius:["50%","63%"],label:{position:"outside",formatter:()=>`有效值
${o[3].value}`,fontSize:14,fontWeight:"bold",align:"center",verticalAlign:"middle",color:"#91cc75",fixedPosition:!0},labelLine:{show:!0,length:50,length2:0,smooth:!0},data:[]},{type:"pie",radius:["35%","48%"],label:{position:"outside",formatter:()=>`峭度
${o[5].value}`,fontSize:14,fontWeight:"bold",align:"center",color:"#fac858",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:70,length2:0,smooth:!0},data:[]}]}),d=reactive({tooltip:{trigger:"axis",formatter:y=>`采集点: ${y[0].value[0]+1}<br/>${y[0].marker} ${y[0].value[1]} mm/s`},xAxis:{type:"value",min:0,max:9,interval:1,axisLabel:{formatter:y=>`${y+1}`}},yAxis:{type:"value",name:"震动烈度 (mm/s)"},series:[{name:"震动烈度",type:"line",showSymbol:!0,symbol:"circle",symbolSize:6,symbolColor:"blue",data:[]}]});let f=null;const v=()=>{u.series[0].data=c(o[0].value,"峰值","#73c0de"),u.series[1].data=c(o[3].value,"有效值","#91cc75"),u.series[2].data=c(o[5].value,"峭度","#fac858")},g=()=>{const y=generateMockData();o[0].value=y.peak,o[1].value=y.peakpeak,o[2].value=y.meaning,o[3].value=y.rms,o[4].value=y.skewness,o[5].value=y.kurtosis,o[6].value=y.vibration_intensity,l.value=y.state,v(),d.series[0].data.push([r,o[6].value]),d.series[0].data.length>60&&d.series[0].data.shift(),d.series[0].data.length<=10?d.xAxis.max=d.series[0].data.length-1:d.series[0].data.length<=60&&(d.xAxis.min=0,d.xAxis.max=d.series[0].data.length-1),r++};return onMounted(()=>{g(),f=setInterval(g,5e3)}),onBeforeUnmount(()=>{f&&clearInterval(f)}),(y,_)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$b,[(openBlock(),createElementBlock(Fragment,null,renderList(s,(S,x)=>createBaseVNode("div",{key:x,class:normalizeClass({"state-tag":!0,active:S.value===l.value,safe:S.value==="safe",warning:S.value==="warning",danger:S.value==="danger",damage:S.value==="damage"})},toDisplayString(S.label),3)),64))]),createBaseVNode("div",_hoisted_3$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o,S=>(openBlock(),createElementBlock("div",{key:S.name,class:"tag-item"},[createBaseVNode("div",_hoisted_4$9,toDisplayString(S.name),1),createBaseVNode("div",_hoisted_5$9,toDisplayString(S.value)+toDisplayString(S.unit),1)]))),128))]),createBaseVNode("div",_hoisted_6$9,[createVNode$1(unref(ECharts),{class:"chart",option:u,autoresize:""},null,8,["option"])]),createBaseVNode("div",_hoisted_7$8,[createVNode$1(unref(ECharts),{class:"chart",option:d,autoresize:""},null,8,["option"])])]))}}),Component3=_export_sfc(_sfc_main$b,[["__scopeId","data-v-314f241e"]]),_hoisted_1$a={class:"container"},_hoisted_2$a={class:"state-tags"},_hoisted_3$9={class:"data-tags"},_hoisted_4$8={class:"tag-title"},_hoisted_5$8={class:"tag-value"},_hoisted_6$8={class:"chart-container"},_hoisted_7$7={class:"chart-container"},__default__$1={name:"DpFourthpath"},_sfc_main$a=defineComponent({...__default__$1,setup(a){use([install$R,install$O,install$Q,install$g,install$i,install$9,install$p]);const n=5;let r=0;const o=reactive([{name:"峰值",value:0,unit:"MPa"},{name:"峰峰值",value:0,unit:"MPa"},{name:"均值",value:0,unit:"MPa"},{name:"有效值",value:0,unit:"m/s²"},{name:"歪度",value:0,unit:""},{name:"峭度",value:0,unit:""},{name:"烈度",value:0,unit:"mm/s"}]),s=[{value:"safe",label:"安全"},{value:"warning",label:"警告"},{value:"danger",label:"危险"},{value:"damage",label:"毁坏"}],l=reactive({value:""}),c=(y,_,S)=>{const x=n-y;return[{value:y,name:_,itemStyle:{color:S},label:{show:y>0}},{value:x,name:"",itemStyle:{color:"#eee"},label:{show:!1}}]},u=reactive({tooltip:{trigger:"item",formatter:y=>y.name?`${y.name}: ${y.value}`:""},series:[{type:"pie",radius:["65%","80%"],label:{position:"outside",formatter:()=>`峰值
${o[0].value}`,fontSize:14,fontWeight:"bold",distanceToLabelLine:0,align:"center",color:"#73c0de",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:20,length2:0,smooth:!0},data:[]},{type:"pie",radius:["50%","63%"],label:{position:"outside",formatter:()=>`有效值
${o[3].value}`,fontSize:14,fontWeight:"bold",align:"center",verticalAlign:"middle",color:"#91cc75",fixedPosition:!0},labelLine:{show:!0,length:50,length2:0,smooth:!0},data:[]},{type:"pie",radius:["35%","48%"],label:{position:"outside",formatter:()=>`峭度
${o[5].value}`,fontSize:14,fontWeight:"bold",align:"center",color:"#fac858",verticalAlign:"middle",fixedPosition:!0},labelLine:{show:!0,length:70,length2:0,smooth:!0},data:[]}]}),d=reactive({tooltip:{trigger:"axis",formatter:y=>`采集点: ${y[0].value[0]+1}<br/>${y[0].marker} ${y[0].value[1]} mm/s`},grid:{left:"15%"},xAxis:{type:"value",min:0,max:9,interval:1,axisLabel:{formatter:y=>`${y+1}`}},yAxis:{type:"value",name:"震动烈度 (mm/s)"},series:[{name:"震动烈度",type:"line",showSymbol:!0,symbol:"circle",symbolSize:6,symbolColor:"blue",data:[]}]});let f=null;const v=()=>{u.series[0].data=c(o[0].value,"峰值","#73c0de"),u.series[1].data=c(o[3].value,"有效值","#91cc75"),u.series[2].data=c(o[5].value,"峭度","#fac858")},g=()=>{const y=generateMockData();o[0].value=y.peak,o[1].value=y.peakpeak,o[2].value=y.meaning,o[3].value=y.rms,o[4].value=y.skewness,o[5].value=y.kurtosis,o[6].value=y.vibration_intensity,l.value=y.state,v(),d.series[0].data.push([r,o[6].value]),d.series[0].data.length>60&&d.series[0].data.shift(),d.series[0].data.length<=10?d.xAxis.max=d.series[0].data.length-1:d.series[0].data.length<=60&&(d.xAxis.min=0,d.xAxis.max=d.series[0].data.length-1),r++};return onMounted(()=>{g(),f=setInterval(g,5e3)}),onBeforeUnmount(()=>{f&&clearInterval(f)}),(y,_)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[(openBlock(),createElementBlock(Fragment,null,renderList(s,(S,x)=>createBaseVNode("div",{key:x,class:normalizeClass({"state-tag":!0,active:S.value===l.value,safe:S.value==="safe",warning:S.value==="warning",danger:S.value==="danger",damage:S.value==="damage"})},toDisplayString(S.label),3)),64))]),createBaseVNode("div",_hoisted_3$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o,S=>(openBlock(),createElementBlock("div",{key:S.name,class:"tag-item"},[createBaseVNode("div",_hoisted_4$8,toDisplayString(S.name),1),createBaseVNode("div",_hoisted_5$8,toDisplayString(S.value)+toDisplayString(S.unit),1)]))),128))]),createBaseVNode("div",_hoisted_6$8,[createVNode$1(unref(ECharts),{class:"chart",option:u,autoresize:""},null,8,["option"])]),createBaseVNode("div",_hoisted_7$7,[createVNode$1(unref(ECharts),{class:"chart",option:d,autoresize:""},null,8,["option"])])]))}}),Component4=_export_sfc(_sfc_main$a,[["__scopeId","data-v-75f19e7f"]]),_hoisted_1$9={class:"DpSystem"},_hoisted_2$9={class:"content-container"},_sfc_main$9=defineComponent({__name:"DpSystem",setup(a){const n=()=>{r.back()},r=useRouter(),o=ref(),s={a:Component1,b:Component2,c:Component3,d:Component4},l=[{text:"通道1",value:"a"},{text:"通道2",value:"b"},{text:"通道3",value:"c"},{text:"通道4",value:"d"}],c=shallowRef("a"),u=d=>{c.value=d};return(d,f)=>{const v=resolveComponent("van-dropdown-item"),g=resolveComponent("van-dropdown-menu"),y=resolveComponent("van-nav-bar");return openBlock(),createElementBlock("div",_hoisted_1$9,[createVNode$1(y,{class:"fixed-nav-bar",title:"刀盘系统监测","left-text":"返回","left-arrow":"",onClickLeft:n},{right:withCtx(()=>[createVNode$1(g,{"active-color":"#1989fa"},{default:withCtx(()=>[createVNode$1(v,{ref_key:"dropdownItem",ref:o,modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=_=>c.value=_),options:l,onChange:u},null,8,["modelValue"])]),_:1})]),_:1}),createBaseVNode("div",_hoisted_2$9,[(openBlock(),createBlock(resolveDynamicComponent(s[c.value])))])])}}}),DpSystem=_export_sfc(_sfc_main$9,[["__scopeId","data-v-0297aa1c"]]),_hoisted_1$8={class:"StcPage"},_hoisted_2$8={class:"status-box"},_hoisted_3$8={class:"data-card"},_hoisted_4$7={class:"value"},_hoisted_5$7={class:"threshold"},_hoisted_6$7={class:"data-list"},_sfc_main$8=defineComponent({__name:"StcPage",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=ref();let s=null;const l=reactive({current:0,minThreshold:0,maxThreshold:0,position:""}),c=ref([]),u=reactive({isNormal:!0,lastAbnormalTime:""}),d=computed(()=>{const S=l.maxThreshold-l.minThreshold;return Math.round((l.current-l.minThreshold)/S*100)}),f=computed(()=>u.isNormal?"#07c160":"#ee0a24");function v(){if(!o.value)return;s=init$1(o.value);const S={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",name:"间隙值 (mm)"},series:[{name:"盾尾间隙值",type:"line",smooth:!0,data:[],itemStyle:{color:x=>x.data>l.maxThreshold?"red":"green"}}]};s.setOption(S)}function g(){var P;if(!s)return;const S=s.getOption(),x=Array.isArray(S.xAxis)&&S.xAxis[0],T=x&&"data"in x&&x.data||[];let w;if(T.length>0){const D=T[T.length-1];typeof D=="number"?w=D+1:typeof D=="object"&&D!==null&&"value"in D?w=D.value+1:w=1}else w=1;const E=S.series&&Array.isArray(S.series)&&((P=S.series[0])==null?void 0:P.data)||[];s==null||s.setOption({xAxis:{data:[...T,{value:w}]},series:[{data:[...Array.isArray(E)?E:[],l.current]}]})}let y=null;function _(){y=setInterval(()=>{const S=generateMockData();l.current=S.gap_current,l.minThreshold=S.gap_minThreshold,l.maxThreshold=S.gap_maxThreshold,l.position=S.gap_position;const x={value:l.current,time:new Date().toLocaleTimeString(),position:l.position};c.value.unshift(x),c.value.length>20&&c.value.pop();const T=l.current>=l.minThreshold&&l.current<=l.maxThreshold;!T&&u.isNormal&&(u.lastAbnormalTime=new Date().toLocaleString()),u.isNormal=T,g()},2e3)}return onMounted(()=>{v(),_()}),onBeforeUnmount(()=>{y&&clearInterval(y),s==null||s.dispose()}),(S,x)=>{const T=resolveComponent("van-nav-bar"),w=resolveComponent("van-tag"),E=resolveComponent("van-progress"),P=resolveComponent("van-cell");return openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode$1(T,{class:"fixed-nav-bar",title:"盾尾间隙监测","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$8,[createBaseVNode("div",_hoisted_4$7,toDisplayString(l.current.toFixed(2))+"mm",1),x[0]||(x[0]=createBaseVNode("div",{class:"label"},"当前间隙值",-1)),createVNode$1(w,{type:u.isNormal?"success":"danger",class:"state-tag"},{default:withCtx(()=>[createTextVNode(toDisplayString(u.isNormal?"正常":"异常"),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_5$7,[createBaseVNode("div",null,"安全阈值："+toDisplayString(l.minThreshold)+"mm - "+toDisplayString(l.maxThreshold)+"mm",1),createVNode$1(E,{percentage:d.value,"stroke-width":8,color:f.value},null,8,["percentage","color"])])]),createBaseVNode("div",{ref_key:"chartEl",ref:o,class:"chart-container"},null,512),createVNode$1(P,{title:"实时数据记录",icon:"clock"}),createBaseVNode("div",_hoisted_6$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(D,L)=>(openBlock(),createBlock(P,{key:L,title:`${D.value.toFixed(2)}mm`,value:D.time,label:`位置：${D.position}`},null,8,["title","value","label"]))),128))])])}}}),StcPage=_export_sfc(_sfc_main$8,[["__scopeId","data-v-ac7a0a7a"]]),_hoisted_1$7={class:"progress"},_hoisted_2$7={class:"status-panel"},_hoisted_3$7={class:"segment-info"},_hoisted_4$6={class:"current-segment"},_hoisted_5$6={class:"value"},_hoisted_6$6={class:"total-progress"},_hoisted_7$6={class:"value"},_hoisted_8$6={class:"daily-progress"},_hoisted_9$5={class:"value"},_hoisted_10$5={class:"progress-ring"},_hoisted_11$5={width:"200",height:"200"},_hoisted_12$5=["stroke-dasharray","stroke-dashoffset"],_hoisted_13$5={class:"ring-text"},_hoisted_14$4={class:"percentage"},_hoisted_15$3={class:"param-item"},_hoisted_16$3={class:"value"},_hoisted_17$3={class:"param-item"},_hoisted_18$3={class:"value"},_hoisted_19$2={class:"param-item"},_hoisted_20$2={class:"value"},_hoisted_21$1={class:"param-item"},_hoisted_22$1={class:"value"},_hoisted_23$1={key:0,class:"alarm-status"},_hoisted_24$1={class:"history-list"},_sfc_main$7=defineComponent({__name:"ProgressPage2",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=reactive({currentSegment:1024,totalSegments:1500,dailyCompleted:12,totalCompleted:856}),s=reactive({speed:45,pressure:28.5,torque:3250,tilt:.12}),l=reactive({isActive:!1,message:""}),c=ref([]),u=computed(()=>2*Math.PI*90),d=computed(()=>Math.round(o.totalCompleted/o.totalSegments*100)),f=computed(()=>u.value*(1-o.totalCompleted/o.totalSegments));let v;const g=()=>{o.currentSegment+=1,o.totalCompleted+=1,o.dailyCompleted+=1,s.speed=40+Math.random()*10,s.pressure=25+Math.random()*5,s.torque=3e3+Math.random()*500,s.tilt=Math.random()*.3;const _=new Date;c.value.unshift({segment:o.currentSegment,time:`${_.getHours()}:${_.getMinutes().toString().padStart(2,"0")}`,duration:Math.floor(5+Math.random()*10)}),c.value.length>5&&c.value.pop(),y()},y=()=>{const _=s.pressure>32||s.torque>3500||Math.abs(s.tilt)>.5;l.isActive=_,l.message=_?"参数超标，请注意！":""};return onMounted(()=>{v=setInterval(g,3e3);for(let _=0;_<5;_++)g()}),onBeforeUnmount(()=>{clearInterval(v)}),(_,S)=>{const x=resolveComponent("van-nav-bar"),T=resolveComponent("van-grid-item"),w=resolveComponent("van-grid"),E=resolveComponent("van-icon"),P=resolveComponent("van-tag"),D=resolveComponent("van-cell");return openBlock(),createElementBlock("div",_hoisted_1$7,[createVNode$1(x,{class:"fixed-nav-bar",title:"盾构掘进进度监测","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$7,[createBaseVNode("div",_hoisted_4$6,[S[0]||(S[0]=createBaseVNode("span",{class:"label"},"当前环号",-1)),createBaseVNode("span",_hoisted_5$6,toDisplayString(o.currentSegment),1)]),createBaseVNode("div",_hoisted_6$6,[S[1]||(S[1]=createBaseVNode("span",{class:"label"},"累计推进",-1)),createBaseVNode("span",_hoisted_7$6,toDisplayString(o.totalSegments)+"环",1)]),createBaseVNode("div",_hoisted_8$6,[S[2]||(S[2]=createBaseVNode("span",{class:"label"},"当日完成",-1)),createBaseVNode("span",_hoisted_9$5,toDisplayString(o.dailyCompleted)+"环",1)])]),createBaseVNode("div",_hoisted_10$5,[(openBlock(),createElementBlock("svg",_hoisted_11$5,[S[3]||(S[3]=createBaseVNode("circle",{class:"ring-background",cx:"100",cy:"100",r:"90"},null,-1)),createBaseVNode("circle",{class:"ring-progress",cx:"100",cy:"100",r:"90","stroke-dasharray":u.value,"stroke-dashoffset":f.value},null,8,_hoisted_12$5)])),createBaseVNode("div",_hoisted_13$5,[createBaseVNode("div",_hoisted_14$4,toDisplayString(d.value)+"%",1),S[4]||(S[4]=createBaseVNode("div",{class:"label"},"总体进度",-1))])])]),createVNode$1(w,{"column-num":2,class:"params-grid"},{default:withCtx(()=>[createVNode$1(T,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_15$3,[createBaseVNode("div",_hoisted_16$3,[createTextVNode(toDisplayString(s.speed.toFixed(1)),1),S[5]||(S[5]=createBaseVNode("span",{class:"unit"},"mm/min",-1))]),S[6]||(S[6]=createBaseVNode("div",{class:"label"},"推进速度",-1))])]),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_17$3,[createBaseVNode("div",_hoisted_18$3,[createTextVNode(toDisplayString(s.pressure.toFixed(1)),1),S[7]||(S[7]=createBaseVNode("span",{class:"unit"},"MPa",-1))]),S[8]||(S[8]=createBaseVNode("div",{class:"label"},"主推油压",-1))])]),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_19$2,[createBaseVNode("div",_hoisted_20$2,[createTextVNode(toDisplayString(s.torque.toFixed(1)),1),S[9]||(S[9]=createBaseVNode("span",{class:"unit"},"kN·m",-1))]),S[10]||(S[10]=createBaseVNode("div",{class:"label"},"刀盘扭矩",-1))])]),_:1}),createVNode$1(T,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_21$1,[createBaseVNode("div",_hoisted_22$1,toDisplayString(s.tilt.toFixed(2))+"°",1),S[11]||(S[11]=createBaseVNode("div",{class:"label"},"盾体倾斜度",-1))])]),_:1})]),_:1}),l.isActive?(openBlock(),createElementBlock("div",_hoisted_23$1,[createVNode$1(P,{type:"danger",class:"alarm-tag"},{default:withCtx(()=>[createVNode$1(E,{name:"warning"}),createTextVNode(" "+toDisplayString(l.message),1)]),_:1})])):createCommentVNode("",!0),createVNode$1(D,{title:"最近完成环",icon:"clock"}),createBaseVNode("div",_hoisted_24$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(L,$)=>(openBlock(),createBlock(D,{key:$,title:`第 ${L.segment} 环`,value:L.time,label:`耗时：${L.duration}分钟`},null,8,["title","value","label"]))),128))])])}}}),ProgressPage2=_export_sfc(_sfc_main$7,[["__scopeId","data-v-a3c357bf"]]),_hoisted_1$6={class:"MaterialUse"},_hoisted_2$6={class:"summary"},_hoisted_3$6={class:"summary-info"},_hoisted_4$5={class:"info-item"},_hoisted_5$5={class:"value"},_hoisted_6$5={class:"info-item"},_hoisted_7$5={class:"value"},_hoisted_8$5={class:"chart-container"},_hoisted_9$4={class:"material-list"},_hoisted_10$4={class:"material-header"},_hoisted_11$4={class:"name"},_hoisted_12$4={class:"progress-container"},_hoisted_13$4={class:"progress-info"},_hoisted_14$3={class:"consumption-rate"},_sfc_main$6=defineComponent({__name:"MaterialUsepage",setup(a){const n=useRouter(),r=()=>{n.push("/")};use([install$R,install$Q,install$p,install$i,install$9,install$g]);const o=ref(0),s=ref(0),l=ref(0),c=reactive([{name:"管片",icon:"aim",maxStock:2e3,baseConsumption:30,used:0,stock:2e3,todayUsed:0,unit:"环",percentage:0,status:"normal",statusText:"正常",history:[]},{name:"螺栓",icon:"nut",maxStock:5e3,baseConsumption:150,used:0,stock:5e3,todayUsed:0,unit:"套",percentage:0,status:"normal",statusText:"正常",history:[]},{name:"注浆材料",icon:"water-o",maxStock:800,baseConsumption:40,used:0,stock:800,todayUsed:0,unit:"m³",percentage:0,status:"normal",statusText:"正常",history:[]},{name:"润滑油",icon:"oil",maxStock:300,baseConsumption:20,used:0,stock:300,todayUsed:0,unit:"L",percentage:0,status:"normal",statusText:"正常",history:[]}]),u=ref({title:{text:"近7日消耗趋势",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",formatter:S=>S.map(x=>`
        ${x.marker} 
        ${x.seriesName}<br/>
        ${x.axisValue}: ${x.value}${f(x.seriesName)}
      `).join("")},legend:{bottom:0,data:c.map(S=>S.name)},grid:{containLabel:!0,top:40,left:15,right:15,bottom:30},xAxis:{type:"category",boundaryGap:!1,data:d()},yAxis:{type:"value",axisLabel:{formatter:S=>S.toFixed(0)}},series:c.map(S=>({name:S.name,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2},data:S.history}))});function d(){const S=[];for(let x=6;x>=0;x--){const T=new Date;T.setDate(T.getDate()-x),S.push(`${T.getMonth()+1}/${T.getDate()}`)}return S}const f=S=>{var x;return((x=c.find(T=>T.name===S))==null?void 0:x.unit)||""},v=S=>({normal:"#52c41a",warning:"#faad14",danger:"#f5222d"})[S],g=S=>S>80?"#f5222d":S>60?"#faad14":"#2d8cf0";let y;const _=()=>{c.forEach(S=>{const x=Math.round(S.baseConsumption*(.8+Math.random()*.4));S.stock=Math.max(0,S.stock-x),S.used=S.maxStock-S.stock,S.todayUsed=x,S.percentage=Math.round(S.used/S.maxStock*100),S.history.length>=7&&S.history.shift(),S.history.push(S.todayUsed);const T=Math.round(S.maxStock*.1);S.stock<T?(S.status="danger",S.statusText=`库存不足 (剩${Math.round(S.stock)}${S.unit})`):S.percentage>80?(S.status="warning",S.statusText="消耗过快"):(S.status="normal",S.statusText="正常")}),s.value=c.reduce((S,x)=>S+x.used,0),l.value=c.reduce((S,x)=>S+x.stock,0),o.value=Math.min(o.value+.5,Math.round(s.value/(s.value+l.value)*100)),o.value=Math.min(o.value+.5,Math.round(s.value/(s.value+l.value)*100)),u.value.series=c.map(S=>({name:S.name,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2},data:[...S.history]}))};return onMounted(()=>{c.forEach(S=>{S.history=Array.from({length:7},()=>Math.round(S.baseConsumption*(.8+Math.random()*.4)))}),y=setInterval(_,3e3),_()}),onBeforeUnmount(()=>{clearInterval(y)}),(S,x)=>{const T=resolveComponent("van-tag"),w=resolveComponent("van-nav-bar"),E=resolveComponent("van-circle"),P=resolveComponent("van-icon"),D=resolveComponent("van-progress");return openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode$1(w,{class:"fixed-nav-bar",title:"材料消耗监控","left-text":"返回","left-arrow":"",onClickLeft:r},{right:withCtx(()=>[createVNode$1(T,{plain:"",type:"primary"},{default:withCtx(()=>x[1]||(x[1]=[createTextVNode("今日消耗")])),_:1})]),_:1}),createBaseVNode("div",_hoisted_2$6,[createVNode$1(E,{"current-rate":o.value,"onUpdate:currentRate":x[0]||(x[0]=L=>o.value=L),rate:o.value,speed:100,"stroke-width":60,text:`总消耗
${o.value}%`,color:"#2d8cf0","layer-color":"#ebedf0",size:"220px"},null,8,["current-rate","rate","text"]),createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$5,[x[2]||(x[2]=createBaseVNode("label",null,"已消耗材料",-1)),createBaseVNode("span",_hoisted_5$5,toDisplayString(s.value)+"吨",1)]),createBaseVNode("div",_hoisted_6$5,[x[3]||(x[3]=createBaseVNode("label",null,"剩余库存",-1)),createBaseVNode("span",_hoisted_7$5,toDisplayString(l.value)+"吨",1)])])]),createBaseVNode("div",_hoisted_8$5,[createVNode$1(unref(ECharts),{class:"chart",option:u.value,autoresize:!0},null,8,["option"])]),createBaseVNode("div",_hoisted_9$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c,L=>(openBlock(),createElementBlock("div",{key:L.name,class:"material-item"},[createBaseVNode("div",_hoisted_10$4,[createVNode$1(P,{name:L.icon,size:"18"},null,8,["name"]),createBaseVNode("span",_hoisted_11$4,toDisplayString(L.name),1),createVNode$1(T,{color:v(L.status),plain:""},{default:withCtx(()=>[createTextVNode(toDisplayString(L.statusText),1)]),_:2},1032,["color"])]),createBaseVNode("div",_hoisted_12$4,[createBaseVNode("div",_hoisted_13$4,[createBaseVNode("span",null,"已用 "+toDisplayString(L.used)+toDisplayString(L.unit),1),createBaseVNode("span",null,"库存 "+toDisplayString(L.stock)+toDisplayString(L.unit),1)]),createVNode$1(D,{percentage:L.percentage,"stroke-width":6,color:g(L.percentage)},null,8,["percentage","color"])]),createBaseVNode("div",_hoisted_14$3,[createVNode$1(P,{name:"fire-o"}),createBaseVNode("span",null,"今日消耗："+toDisplayString(L.todayUsed)+toDisplayString(L.unit),1)])]))),128))])])}}}),MaterialUsepage=_export_sfc(_sfc_main$6,[["__scopeId","data-v-ca5d1614"]]);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="175",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(n,r){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[n]===void 0&&(o[n]=[]),o[n].indexOf(r)===-1&&o[n].push(r)}hasEventListener(n,r){const o=this._listeners;return o===void 0?!1:o[n]!==void 0&&o[n].indexOf(r)!==-1}removeEventListener(n,r){const o=this._listeners;if(o===void 0)return;const s=o[n];if(s!==void 0){const l=s.indexOf(r);l!==-1&&s.splice(l,1)}}dispatchEvent(n){const r=this._listeners;if(r===void 0)return;const o=r[n.type];if(o!==void 0){n.target=this;const s=o.slice(0);for(let l=0,c=s.length;l<c;l++)s[l].call(this,n);n.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const a=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(_lut[a&255]+_lut[a>>8&255]+_lut[a>>16&255]+_lut[a>>24&255]+"-"+_lut[n&255]+_lut[n>>8&255]+"-"+_lut[n>>16&15|64]+_lut[n>>24&255]+"-"+_lut[r&63|128]+_lut[r>>8&255]+"-"+_lut[r>>16&255]+_lut[r>>24&255]+_lut[o&255]+_lut[o>>8&255]+_lut[o>>16&255]+_lut[o>>24&255]).toLowerCase()}function clamp(a,n,r){return Math.max(n,Math.min(r,a))}function euclideanModulo(a,n){return(a%n+n)%n}function mapLinear(a,n,r,o,s){return o+(a-n)*(s-o)/(r-n)}function inverseLerp(a,n,r){return a!==n?(r-a)/(n-a):0}function lerp(a,n,r){return(1-r)*a+r*n}function damp(a,n,r,o){return lerp(a,n,1-Math.exp(-r*o))}function pingpong(a,n=1){return n-Math.abs(euclideanModulo(a,n*2)-n)}function smoothstep(a,n,r){return a<=n?0:a>=r?1:(a=(a-n)/(r-n),a*a*(3-2*a))}function smootherstep(a,n,r){return a<=n?0:a>=r?1:(a=(a-n)/(r-n),a*a*a*(a*(a*6-15)+10))}function randInt(a,n){return a+Math.floor(Math.random()*(n-a+1))}function randFloat(a,n){return a+Math.random()*(n-a)}function randFloatSpread(a){return a*(.5-Math.random())}function seededRandom(a){a!==void 0&&(_seed=a);let n=_seed+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}function degToRad(a){return a*DEG2RAD}function radToDeg(a){return a*RAD2DEG}function isPowerOfTwo(a){return(a&a-1)===0&&a!==0}function ceilPowerOfTwo(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function floorPowerOfTwo(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function setQuaternionFromProperEuler(a,n,r,o,s){const l=Math.cos,c=Math.sin,u=l(r/2),d=c(r/2),f=l((n+o)/2),v=c((n+o)/2),g=l((n-o)/2),y=c((n-o)/2),_=l((o-n)/2),S=c((o-n)/2);switch(s){case"XYX":a.set(u*v,d*g,d*y,u*f);break;case"YZY":a.set(d*y,u*v,d*g,u*f);break;case"ZXZ":a.set(d*g,d*y,u*v,u*f);break;case"XZX":a.set(u*v,d*S,d*_,u*f);break;case"YXY":a.set(d*_,u*v,d*S,u*f);break;case"ZYZ":a.set(d*S,d*_,u*v,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function denormalize(a,n){switch(n.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function normalize(a,n){switch(n.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(n=0,r=0){Vector2.prototype.isVector2=!0,this.x=n,this.y=r}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,r){return this.x=n,this.y=r,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,r){switch(n){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,r){return this.x=n.x+r.x,this.y=n.y+r.y,this}addScaledVector(n,r){return this.x+=n.x*r,this.y+=n.y*r,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,r){return this.x=n.x-r.x,this.y=n.y-r.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const r=this.x,o=this.y,s=n.elements;return this.x=s[0]*r+s[3]*o+s[6],this.y=s[1]*r+s[4]*o+s[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,r){return this.x=clamp(this.x,n.x,r.x),this.y=clamp(this.y,n.y,r.y),this}clampScalar(n,r){return this.x=clamp(this.x,n,r),this.y=clamp(this.y,n,r),this}clampLength(n,r){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp(o,n,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const r=Math.sqrt(this.lengthSq()*n.lengthSq());if(r===0)return Math.PI/2;const o=this.dot(n)/r;return Math.acos(clamp(o,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const r=this.x-n.x,o=this.y-n.y;return r*r+o*o}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,r){return this.x+=(n.x-this.x)*r,this.y+=(n.y-this.y)*r,this}lerpVectors(n,r,o){return this.x=n.x+(r.x-n.x)*o,this.y=n.y+(r.y-n.y)*o,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,r=0){return this.x=n[r],this.y=n[r+1],this}toArray(n=[],r=0){return n[r]=this.x,n[r+1]=this.y,n}fromBufferAttribute(n,r){return this.x=n.getX(r),this.y=n.getY(r),this}rotateAround(n,r){const o=Math.cos(r),s=Math.sin(r),l=this.x-n.x,c=this.y-n.y;return this.x=l*o-c*s+n.x,this.y=l*s+c*o+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(n,r,o,s,l,c,u,d,f){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,r,o,s,l,c,u,d,f)}set(n,r,o,s,l,c,u,d,f){const v=this.elements;return v[0]=n,v[1]=s,v[2]=u,v[3]=r,v[4]=l,v[5]=d,v[6]=o,v[7]=c,v[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const r=this.elements,o=n.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this}extractBasis(n,r,o){return n.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const r=n.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,r){const o=n.elements,s=r.elements,l=this.elements,c=o[0],u=o[3],d=o[6],f=o[1],v=o[4],g=o[7],y=o[2],_=o[5],S=o[8],x=s[0],T=s[3],w=s[6],E=s[1],P=s[4],D=s[7],L=s[2],$=s[5],O=s[8];return l[0]=c*x+u*E+d*L,l[3]=c*T+u*P+d*$,l[6]=c*w+u*D+d*O,l[1]=f*x+v*E+g*L,l[4]=f*T+v*P+g*$,l[7]=f*w+v*D+g*O,l[2]=y*x+_*E+S*L,l[5]=y*T+_*P+S*$,l[8]=y*w+_*D+S*O,this}multiplyScalar(n){const r=this.elements;return r[0]*=n,r[3]*=n,r[6]*=n,r[1]*=n,r[4]*=n,r[7]*=n,r[2]*=n,r[5]*=n,r[8]*=n,this}determinant(){const n=this.elements,r=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],d=n[6],f=n[7],v=n[8];return r*c*v-r*u*f-o*l*v+o*u*d+s*l*f-s*c*d}invert(){const n=this.elements,r=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],d=n[6],f=n[7],v=n[8],g=v*c-u*f,y=u*d-v*l,_=f*l-c*d,S=r*g+o*y+s*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/S;return n[0]=g*x,n[1]=(s*f-v*o)*x,n[2]=(u*o-s*c)*x,n[3]=y*x,n[4]=(v*r-s*d)*x,n[5]=(s*l-u*r)*x,n[6]=_*x,n[7]=(o*d-f*r)*x,n[8]=(c*r-o*l)*x,this}transpose(){let n;const r=this.elements;return n=r[1],r[1]=r[3],r[3]=n,n=r[2],r[2]=r[6],r[6]=n,n=r[5],r[5]=r[7],r[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const r=this.elements;return n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8],this}setUvTransform(n,r,o,s,l,c,u){const d=Math.cos(l),f=Math.sin(l);return this.set(o*d,o*f,-o*(d*c+f*u)+c+n,-s*f,s*d,-s*(-f*c+d*u)+u+r,0,0,1),this}scale(n,r){return this.premultiply(_m3.makeScale(n,r)),this}rotate(n){return this.premultiply(_m3.makeRotation(-n)),this}translate(n,r){return this.premultiply(_m3.makeTranslation(n,r)),this}makeTranslation(n,r){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,r,0,0,1),this}makeRotation(n){const r=Math.cos(n),o=Math.sin(n);return this.set(r,-o,0,o,r,0,0,0,1),this}makeScale(n,r){return this.set(n,0,0,0,r,0,0,0,1),this}equals(n){const r=this.elements,o=n.elements;for(let s=0;s<9;s++)if(r[s]!==o[s])return!1;return!0}fromArray(n,r=0){for(let o=0;o<9;o++)this.elements[o]=n[o+r];return this}toArray(n=[],r=0){const o=this.elements;return n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3],n[r+4]=o[4],n[r+5]=o[5],n[r+6]=o[6],n[r+7]=o[7],n[r+8]=o[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(a){for(let n=a.length-1;n>=0;--n)if(a[n]>=65535)return!0;return!1}function createElementNS(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function createCanvasElement(){const a=createElementNS("canvas");return a.style.display="block",a}const _cache={};function warnOnce(a){a in _cache||(_cache[a]=!0,console.warn(a))}function probeAsync(a,n,r){return new Promise(function(o,s){function l(){switch(a.clientWaitSync(n,a.SYNC_FLUSH_COMMANDS_BIT,0)){case a.WAIT_FAILED:s();break;case a.TIMEOUT_EXPIRED:setTimeout(l,r);break;default:o()}}setTimeout(l,r)})}function toNormalizedProjectionMatrix(a){const n=a.elements;n[2]=.5*n[2]+.5*n[3],n[6]=.5*n[6]+.5*n[7],n[10]=.5*n[10]+.5*n[11],n[14]=.5*n[14]+.5*n[15]}function toReversedProjectionMatrix(a){const n=a.elements;n[11]===-1?(n[10]=-n[10]-1,n[14]=-n[14]):(n[10]=-n[10],n[14]=-n[14]+1)}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const a={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(s,l,c){return this.enabled===!1||l===c||!l||!c||(this.spaces[l].transfer===SRGBTransfer&&(s.r=SRGBToLinear(s.r),s.g=SRGBToLinear(s.g),s.b=SRGBToLinear(s.b)),this.spaces[l].primaries!==this.spaces[c].primaries&&(s.applyMatrix3(this.spaces[l].toXYZ),s.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===SRGBTransfer&&(s.r=LinearToSRGB(s.r),s.g=LinearToSRGB(s.g),s.b=LinearToSRGB(s.b))),s},fromWorkingColorSpace:function(s,l){return this.convert(s,this.workingColorSpace,l)},toWorkingColorSpace:function(s,l){return this.convert(s,l,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===NoColorSpace?LinearTransfer:this.spaces[s].transfer},getLuminanceCoefficients:function(s,l=this.workingColorSpace){return s.fromArray(this.spaces[l].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,l,c){return s.copy(this.spaces[l].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},n=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],o=[.3127,.329];return a.define({[LinearSRGBColorSpace]:{primaries:n,whitePoint:o,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:n,whitePoint:o,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),a}const ColorManagement=createColorManagement();function SRGBToLinear(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function LinearToSRGB(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(n,r="image/png"){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let o;if(n instanceof HTMLCanvasElement)o=n;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=n.width,_canvas.height=n.height;const s=_canvas.getContext("2d");n instanceof ImageData?s.putImageData(n,0,0):s.drawImage(n,0,0,n.width,n.height),o=_canvas}return o.toDataURL(r)}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const r=createElementNS("canvas");r.width=n.width,r.height=n.height;const o=r.getContext("2d");o.drawImage(n,0,0,n.width,n.height);const s=o.getImageData(0,0,n.width,n.height),l=s.data;for(let c=0;c<l.length;c++)l[c]=SRGBToLinear(l[c]/255)*255;return o.putImageData(s,0,0),r}else if(n.data){const r=n.data.slice(0);for(let o=0;o<r.length;o++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[o]=Math.floor(SRGBToLinear(r[o]/255)*255):r[o]=SRGBToLinear(r[o]);return{data:r,width:n.width,height:n.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let _sourceId=0;class Source{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=n,this.dataReady=!0,this.version=0}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const r=n===void 0||typeof n=="string";if(!r&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const o={uuid:this.uuid,url:""},s=this.data;if(s!==null){let l;if(Array.isArray(s)){l=[];for(let c=0,u=s.length;c<u;c++)s[c].isDataTexture?l.push(serializeImage(s[c].image)):l.push(serializeImage(s[c]))}else l=serializeImage(s);o.url=l}return r||(n.images[this.uuid]=o),o}}function serializeImage(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?ImageUtils.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(n=Texture.DEFAULT_IMAGE,r=Texture.DEFAULT_MAPPING,o=ClampToEdgeWrapping,s=ClampToEdgeWrapping,l=LinearFilter,c=LinearMipmapLinearFilter,u=RGBAFormat,d=UnsignedByteType,f=Texture.DEFAULT_ANISOTROPY,v=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(n),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=o,this.wrapT=s,this.magFilter=l,this.minFilter=c,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.renderTarget=n.renderTarget,this.isRenderTargetTexture=n.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const r=n===void 0||typeof n=="string";if(!r&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const o={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(o.userData=this.userData),r||(n.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==UVMapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case RepeatWrapping:n.x=n.x-Math.floor(n.x);break;case ClampToEdgeWrapping:n.x=n.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case RepeatWrapping:n.y=n.y-Math.floor(n.y);break;case ClampToEdgeWrapping:n.y=n.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(n=0,r=0,o=0,s=1){Vector4.prototype.isVector4=!0,this.x=n,this.y=r,this.z=o,this.w=s}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,r,o,s){return this.x=n,this.y=r,this.z=o,this.w=s,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,r){switch(n){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,r){return this.x=n.x+r.x,this.y=n.y+r.y,this.z=n.z+r.z,this.w=n.w+r.w,this}addScaledVector(n,r){return this.x+=n.x*r,this.y+=n.y*r,this.z+=n.z*r,this.w+=n.w*r,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,r){return this.x=n.x-r.x,this.y=n.y-r.y,this.z=n.z-r.z,this.w=n.w-r.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const r=this.x,o=this.y,s=this.z,l=this.w,c=n.elements;return this.x=c[0]*r+c[4]*o+c[8]*s+c[12]*l,this.y=c[1]*r+c[5]*o+c[9]*s+c[13]*l,this.z=c[2]*r+c[6]*o+c[10]*s+c[14]*l,this.w=c[3]*r+c[7]*o+c[11]*s+c[15]*l,this}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this.w/=n.w,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const r=Math.sqrt(1-n.w*n.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/r,this.y=n.y/r,this.z=n.z/r),this}setAxisAngleFromRotationMatrix(n){let r,o,s,l;const d=n.elements,f=d[0],v=d[4],g=d[8],y=d[1],_=d[5],S=d[9],x=d[2],T=d[6],w=d[10];if(Math.abs(v-y)<.01&&Math.abs(g-x)<.01&&Math.abs(S-T)<.01){if(Math.abs(v+y)<.1&&Math.abs(g+x)<.1&&Math.abs(S+T)<.1&&Math.abs(f+_+w-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const P=(f+1)/2,D=(_+1)/2,L=(w+1)/2,$=(v+y)/4,O=(g+x)/4,B=(S+T)/4;return P>D&&P>L?P<.01?(o=0,s=.707106781,l=.707106781):(o=Math.sqrt(P),s=$/o,l=O/o):D>L?D<.01?(o=.707106781,s=0,l=.707106781):(s=Math.sqrt(D),o=$/s,l=B/s):L<.01?(o=.707106781,s=.707106781,l=0):(l=Math.sqrt(L),o=O/l,s=B/l),this.set(o,s,l,r),this}let E=Math.sqrt((T-S)*(T-S)+(g-x)*(g-x)+(y-v)*(y-v));return Math.abs(E)<.001&&(E=1),this.x=(T-S)/E,this.y=(g-x)/E,this.z=(y-v)/E,this.w=Math.acos((f+_+w-1)/2),this}setFromMatrixPosition(n){const r=n.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,r){return this.x=clamp(this.x,n.x,r.x),this.y=clamp(this.y,n.y,r.y),this.z=clamp(this.z,n.z,r.z),this.w=clamp(this.w,n.w,r.w),this}clampScalar(n,r){return this.x=clamp(this.x,n,r),this.y=clamp(this.y,n,r),this.z=clamp(this.z,n,r),this.w=clamp(this.w,n,r),this}clampLength(n,r){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp(o,n,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,r){return this.x+=(n.x-this.x)*r,this.y+=(n.y-this.y)*r,this.z+=(n.z-this.z)*r,this.w+=(n.w-this.w)*r,this}lerpVectors(n,r,o){return this.x=n.x+(r.x-n.x)*o,this.y=n.y+(r.y-n.y)*o,this.z=n.z+(r.z-n.z)*o,this.w=n.w+(r.w-n.w)*o,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,r=0){return this.x=n[r],this.y=n[r+1],this.z=n[r+2],this.w=n[r+3],this}toArray(n=[],r=0){return n[r]=this.x,n[r+1]=this.y,n[r+2]=this.z,n[r+3]=this.w,n}fromBufferAttribute(n,r){return this.x=n.getX(r),this.y=n.getY(r),this.z=n.getZ(r),this.w=n.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(n=1,r=1,o={}){super(),this.isRenderTarget=!0,this.width=n,this.height=r,this.depth=1,this.scissor=new Vector4(0,0,n,r),this.scissorTest=!1,this.viewport=new Vector4(0,0,n,r);const s={width:n,height:r,depth:1};o=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},o);const l=new Texture(s,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace);l.flipY=!1,l.generateMipmaps=o.generateMipmaps,l.internalFormat=o.internalFormat,this.textures=[];const c=o.count;for(let u=0;u<c;u++)this.textures[u]=l.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,this.resolveDepthBuffer=o.resolveDepthBuffer,this.resolveStencilBuffer=o.resolveStencilBuffer,this._depthTexture=o.depthTexture,this.samples=o.samples}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}set depthTexture(n){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),n!==null&&(n.renderTarget=this),this._depthTexture=n}get depthTexture(){return this._depthTexture}setSize(n,r,o=1){if(this.width!==n||this.height!==r||this.depth!==o){this.width=n,this.height=r,this.depth=o;for(let s=0,l=this.textures.length;s<l;s++)this.textures[s].image.width=n,this.textures[s].image.height=r,this.textures[s].image.depth=o;this.dispose()}this.viewport.set(0,0,n,r),this.scissor.set(0,0,n,r)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let r=0,o=n.textures.length;r<o;r++){this.textures[r]=n.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const s=Object.assign({},n.textures[r].image);this.textures[r].source=new Source(s)}return this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(n=1,r=1,o={}){super(n,r,o),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(n=null,r=1,o=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:r,height:o,depth:s},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(n=null,r=1,o=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:r,height:o,depth:s},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(n=0,r=0,o=0,s=1){this.isQuaternion=!0,this._x=n,this._y=r,this._z=o,this._w=s}static slerpFlat(n,r,o,s,l,c,u){let d=o[s+0],f=o[s+1],v=o[s+2],g=o[s+3];const y=l[c+0],_=l[c+1],S=l[c+2],x=l[c+3];if(u===0){n[r+0]=d,n[r+1]=f,n[r+2]=v,n[r+3]=g;return}if(u===1){n[r+0]=y,n[r+1]=_,n[r+2]=S,n[r+3]=x;return}if(g!==x||d!==y||f!==_||v!==S){let T=1-u;const w=d*y+f*_+v*S+g*x,E=w>=0?1:-1,P=1-w*w;if(P>Number.EPSILON){const L=Math.sqrt(P),$=Math.atan2(L,w*E);T=Math.sin(T*$)/L,u=Math.sin(u*$)/L}const D=u*E;if(d=d*T+y*D,f=f*T+_*D,v=v*T+S*D,g=g*T+x*D,T===1-u){const L=1/Math.sqrt(d*d+f*f+v*v+g*g);d*=L,f*=L,v*=L,g*=L}}n[r]=d,n[r+1]=f,n[r+2]=v,n[r+3]=g}static multiplyQuaternionsFlat(n,r,o,s,l,c){const u=o[s],d=o[s+1],f=o[s+2],v=o[s+3],g=l[c],y=l[c+1],_=l[c+2],S=l[c+3];return n[r]=u*S+v*g+d*_-f*y,n[r+1]=d*S+v*y+f*g-u*_,n[r+2]=f*S+v*_+u*y-d*g,n[r+3]=v*S-u*g-d*y-f*_,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,r,o,s){return this._x=n,this._y=r,this._z=o,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,r=!0){const o=n._x,s=n._y,l=n._z,c=n._order,u=Math.cos,d=Math.sin,f=u(o/2),v=u(s/2),g=u(l/2),y=d(o/2),_=d(s/2),S=d(l/2);switch(c){case"XYZ":this._x=y*v*g+f*_*S,this._y=f*_*g-y*v*S,this._z=f*v*S+y*_*g,this._w=f*v*g-y*_*S;break;case"YXZ":this._x=y*v*g+f*_*S,this._y=f*_*g-y*v*S,this._z=f*v*S-y*_*g,this._w=f*v*g+y*_*S;break;case"ZXY":this._x=y*v*g-f*_*S,this._y=f*_*g+y*v*S,this._z=f*v*S+y*_*g,this._w=f*v*g-y*_*S;break;case"ZYX":this._x=y*v*g-f*_*S,this._y=f*_*g+y*v*S,this._z=f*v*S-y*_*g,this._w=f*v*g+y*_*S;break;case"YZX":this._x=y*v*g+f*_*S,this._y=f*_*g+y*v*S,this._z=f*v*S-y*_*g,this._w=f*v*g-y*_*S;break;case"XZY":this._x=y*v*g-f*_*S,this._y=f*_*g-y*v*S,this._z=f*v*S+y*_*g,this._w=f*v*g+y*_*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,r){const o=r/2,s=Math.sin(o);return this._x=n.x*s,this._y=n.y*s,this._z=n.z*s,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(n){const r=n.elements,o=r[0],s=r[4],l=r[8],c=r[1],u=r[5],d=r[9],f=r[2],v=r[6],g=r[10],y=o+u+g;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(v-d)*_,this._y=(l-f)*_,this._z=(c-s)*_}else if(o>u&&o>g){const _=2*Math.sqrt(1+o-u-g);this._w=(v-d)/_,this._x=.25*_,this._y=(s+c)/_,this._z=(l+f)/_}else if(u>g){const _=2*Math.sqrt(1+u-o-g);this._w=(l-f)/_,this._x=(s+c)/_,this._y=.25*_,this._z=(d+v)/_}else{const _=2*Math.sqrt(1+g-o-u);this._w=(c-s)/_,this._x=(l+f)/_,this._y=(d+v)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(n,r){let o=n.dot(r)+1;return o<Number.EPSILON?(o=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=o):(this._x=0,this._y=-n.z,this._z=n.y,this._w=o)):(this._x=n.y*r.z-n.z*r.y,this._y=n.z*r.x-n.x*r.z,this._z=n.x*r.y-n.y*r.x,this._w=o),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(clamp(this.dot(n),-1,1)))}rotateTowards(n,r){const o=this.angleTo(n);if(o===0)return this;const s=Math.min(1,r/o);return this.slerp(n,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,r){const o=n._x,s=n._y,l=n._z,c=n._w,u=r._x,d=r._y,f=r._z,v=r._w;return this._x=o*v+c*u+s*f-l*d,this._y=s*v+c*d+l*u-o*f,this._z=l*v+c*f+o*d-s*u,this._w=c*v-o*u-s*d-l*f,this._onChangeCallback(),this}slerp(n,r){if(r===0)return this;if(r===1)return this.copy(n);const o=this._x,s=this._y,l=this._z,c=this._w;let u=c*n._w+o*n._x+s*n._y+l*n._z;if(u<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,u=-u):this.copy(n),u>=1)return this._w=c,this._x=o,this._y=s,this._z=l,this;const d=1-u*u;if(d<=Number.EPSILON){const _=1-r;return this._w=_*c+r*this._w,this._x=_*o+r*this._x,this._y=_*s+r*this._y,this._z=_*l+r*this._z,this.normalize(),this}const f=Math.sqrt(d),v=Math.atan2(f,u),g=Math.sin((1-r)*v)/f,y=Math.sin(r*v)/f;return this._w=c*g+this._w*y,this._x=o*g+this._x*y,this._y=s*g+this._y*y,this._z=l*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(n,r,o){return this.copy(n).slerp(r,o)}random(){const n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),o=Math.random(),s=Math.sqrt(1-o),l=Math.sqrt(o);return this.set(s*Math.sin(n),s*Math.cos(n),l*Math.sin(r),l*Math.cos(r))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,r=0){return this._x=n[r],this._y=n[r+1],this._z=n[r+2],this._w=n[r+3],this._onChangeCallback(),this}toArray(n=[],r=0){return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._w,n}fromBufferAttribute(n,r){return this._x=n.getX(r),this._y=n.getY(r),this._z=n.getZ(r),this._w=n.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(n=0,r=0,o=0){Vector3.prototype.isVector3=!0,this.x=n,this.y=r,this.z=o}set(n,r,o){return o===void 0&&(o=this.z),this.x=n,this.y=r,this.z=o,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,r){switch(n){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,r){return this.x=n.x+r.x,this.y=n.y+r.y,this.z=n.z+r.z,this}addScaledVector(n,r){return this.x+=n.x*r,this.y+=n.y*r,this.z+=n.z*r,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,r){return this.x=n.x-r.x,this.y=n.y-r.y,this.z=n.z-r.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,r){return this.x=n.x*r.x,this.y=n.y*r.y,this.z=n.z*r.z,this}applyEuler(n){return this.applyQuaternion(_quaternion$4.setFromEuler(n))}applyAxisAngle(n,r){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(n,r))}applyMatrix3(n){const r=this.x,o=this.y,s=this.z,l=n.elements;return this.x=l[0]*r+l[3]*o+l[6]*s,this.y=l[1]*r+l[4]*o+l[7]*s,this.z=l[2]*r+l[5]*o+l[8]*s,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const r=this.x,o=this.y,s=this.z,l=n.elements,c=1/(l[3]*r+l[7]*o+l[11]*s+l[15]);return this.x=(l[0]*r+l[4]*o+l[8]*s+l[12])*c,this.y=(l[1]*r+l[5]*o+l[9]*s+l[13])*c,this.z=(l[2]*r+l[6]*o+l[10]*s+l[14])*c,this}applyQuaternion(n){const r=this.x,o=this.y,s=this.z,l=n.x,c=n.y,u=n.z,d=n.w,f=2*(c*s-u*o),v=2*(u*r-l*s),g=2*(l*o-c*r);return this.x=r+d*f+c*g-u*v,this.y=o+d*v+u*f-l*g,this.z=s+d*g+l*v-c*f,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const r=this.x,o=this.y,s=this.z,l=n.elements;return this.x=l[0]*r+l[4]*o+l[8]*s,this.y=l[1]*r+l[5]*o+l[9]*s,this.z=l[2]*r+l[6]*o+l[10]*s,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,r){return this.x=clamp(this.x,n.x,r.x),this.y=clamp(this.y,n.y,r.y),this.z=clamp(this.z,n.z,r.z),this}clampScalar(n,r){return this.x=clamp(this.x,n,r),this.y=clamp(this.y,n,r),this.z=clamp(this.z,n,r),this}clampLength(n,r){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp(o,n,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,r){return this.x+=(n.x-this.x)*r,this.y+=(n.y-this.y)*r,this.z+=(n.z-this.z)*r,this}lerpVectors(n,r,o){return this.x=n.x+(r.x-n.x)*o,this.y=n.y+(r.y-n.y)*o,this.z=n.z+(r.z-n.z)*o,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,r){const o=n.x,s=n.y,l=n.z,c=r.x,u=r.y,d=r.z;return this.x=s*d-l*u,this.y=l*c-o*d,this.z=o*u-s*c,this}projectOnVector(n){const r=n.lengthSq();if(r===0)return this.set(0,0,0);const o=n.dot(this)/r;return this.copy(n).multiplyScalar(o)}projectOnPlane(n){return _vector$c.copy(this).projectOnVector(n),this.sub(_vector$c)}reflect(n){return this.sub(_vector$c.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const r=Math.sqrt(this.lengthSq()*n.lengthSq());if(r===0)return Math.PI/2;const o=this.dot(n)/r;return Math.acos(clamp(o,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const r=this.x-n.x,o=this.y-n.y,s=this.z-n.z;return r*r+o*o+s*s}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,r,o){const s=Math.sin(r)*n;return this.x=s*Math.sin(o),this.y=Math.cos(r)*n,this.z=s*Math.cos(o),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,r,o){return this.x=n*Math.sin(r),this.y=o,this.z=n*Math.cos(r),this}setFromMatrixPosition(n){const r=n.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(n){const r=this.setFromMatrixColumn(n,0).length(),o=this.setFromMatrixColumn(n,1).length(),s=this.setFromMatrixColumn(n,2).length();return this.x=r,this.y=o,this.z=s,this}setFromMatrixColumn(n,r){return this.fromArray(n.elements,r*4)}setFromMatrix3Column(n,r){return this.fromArray(n.elements,r*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,r=0){return this.x=n[r],this.y=n[r+1],this.z=n[r+2],this}toArray(n=[],r=0){return n[r]=this.x,n[r+1]=this.y,n[r+2]=this.z,n}fromBufferAttribute(n,r){return this.x=n.getX(r),this.y=n.getY(r),this.z=n.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,r=Math.random()*2-1,o=Math.sqrt(1-r*r);return this.x=o*Math.cos(n),this.y=r,this.z=o*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(n=new Vector3(1/0,1/0,1/0),r=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=r}set(n,r){return this.min.copy(n),this.max.copy(r),this}setFromArray(n){this.makeEmpty();for(let r=0,o=n.length;r<o;r+=3)this.expandByPoint(_vector$b.fromArray(n,r));return this}setFromBufferAttribute(n){this.makeEmpty();for(let r=0,o=n.count;r<o;r++)this.expandByPoint(_vector$b.fromBufferAttribute(n,r));return this}setFromPoints(n){this.makeEmpty();for(let r=0,o=n.length;r<o;r++)this.expandByPoint(n[r]);return this}setFromCenterAndSize(n,r){const o=_vector$b.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(o),this.max.copy(n).add(o),this}setFromObject(n,r=!1){return this.makeEmpty(),this.expandByObject(n,r)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,r=!1){n.updateWorldMatrix(!1,!1);const o=n.geometry;if(o!==void 0){const l=o.getAttribute("position");if(r===!0&&l!==void 0&&n.isInstancedMesh!==!0)for(let c=0,u=l.count;c<u;c++)n.isMesh===!0?n.getVertexPosition(c,_vector$b):_vector$b.fromBufferAttribute(l,c),_vector$b.applyMatrix4(n.matrixWorld),this.expandByPoint(_vector$b);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),_box$4.copy(n.boundingBox)):(o.boundingBox===null&&o.computeBoundingBox(),_box$4.copy(o.boundingBox)),_box$4.applyMatrix4(n.matrixWorld),this.union(_box$4)}const s=n.children;for(let l=0,c=s.length;l<c;l++)this.expandByObject(s[l],r);return this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y&&n.z>=this.min.z&&n.z<=this.max.z}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,r){return r.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y&&n.max.z>=this.min.z&&n.min.z<=this.max.z}intersectsSphere(n){return this.clampPoint(n.center,_vector$b),_vector$b.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let r,o;return n.normal.x>0?(r=n.normal.x*this.min.x,o=n.normal.x*this.max.x):(r=n.normal.x*this.max.x,o=n.normal.x*this.min.x),n.normal.y>0?(r+=n.normal.y*this.min.y,o+=n.normal.y*this.max.y):(r+=n.normal.y*this.max.y,o+=n.normal.y*this.min.y),n.normal.z>0?(r+=n.normal.z*this.min.z,o+=n.normal.z*this.max.z):(r+=n.normal.z*this.max.z,o+=n.normal.z*this.min.z),r<=-n.constant&&o>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(n.a,_center),_v1$7.subVectors(n.b,_center),_v2$4.subVectors(n.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let r=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(r,_v0$2,_v1$7,_v2$4,_extents)||(r=[1,0,0,0,1,0,0,0,1],!satForAxes(r,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),r=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(r,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(n,r){return r.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,_vector$b).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=this.getSize(_vector$b).length()*.5),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(_points),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(a,n,r,o,s){for(let l=0,c=a.length-3;l<=c;l+=3){_testAxis.fromArray(a,l);const u=s.x*Math.abs(_testAxis.x)+s.y*Math.abs(_testAxis.y)+s.z*Math.abs(_testAxis.z),d=n.dot(_testAxis),f=r.dot(_testAxis),v=o.dot(_testAxis);if(Math.max(-Math.max(d,f,v),Math.min(d,f,v))>u)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(n=new Vector3,r=-1){this.isSphere=!0,this.center=n,this.radius=r}set(n,r){return this.center.copy(n),this.radius=r,this}setFromPoints(n,r){const o=this.center;r!==void 0?o.copy(r):_box$3.setFromPoints(n).getCenter(o);let s=0;for(let l=0,c=n.length;l<c;l++)s=Math.max(s,o.distanceToSquared(n[l]));return this.radius=Math.sqrt(s),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const r=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=r*r}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,r){const o=this.center.distanceToSquared(n);return r.copy(n),o>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;_v1$6.subVectors(n,this.center);const r=_v1$6.lengthSq();if(r>this.radius*this.radius){const o=Math.sqrt(r),s=(o-this.radius)*.5;this.center.addScaledVector(_v1$6,s/o),this.radius+=s}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(_v2$3.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(_v1$6.copy(n.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(n.center).sub(_v2$3))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(n=new Vector3,r=new Vector3(0,0,-1)){this.origin=n,this.direction=r}set(n,r){return this.origin.copy(n),this.direction.copy(r),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,r){return r.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,_vector$a)),this}closestPointToPoint(n,r){r.subVectors(n,this.origin);const o=r.dot(this.direction);return o<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,o)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const r=_vector$a.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(_vector$a.copy(this.origin).addScaledVector(this.direction,r),_vector$a.distanceToSquared(n))}distanceSqToSegment(n,r,o,s){_segCenter.copy(n).add(r).multiplyScalar(.5),_segDir.copy(r).sub(n).normalize(),_diff.copy(this.origin).sub(_segCenter);const l=n.distanceTo(r)*.5,c=-this.direction.dot(_segDir),u=_diff.dot(this.direction),d=-_diff.dot(_segDir),f=_diff.lengthSq(),v=Math.abs(1-c*c);let g,y,_,S;if(v>0)if(g=c*d-u,y=c*u-d,S=l*v,g>=0)if(y>=-S)if(y<=S){const x=1/v;g*=x,y*=x,_=g*(g+c*y+2*u)+y*(c*g+y+2*d)+f}else y=l,g=Math.max(0,-(c*y+u)),_=-g*g+y*(y+2*d)+f;else y=-l,g=Math.max(0,-(c*y+u)),_=-g*g+y*(y+2*d)+f;else y<=-S?(g=Math.max(0,-(-c*l+u)),y=g>0?-l:Math.min(Math.max(-l,-d),l),_=-g*g+y*(y+2*d)+f):y<=S?(g=0,y=Math.min(Math.max(-l,-d),l),_=y*(y+2*d)+f):(g=Math.max(0,-(c*l+u)),y=g>0?l:Math.min(Math.max(-l,-d),l),_=-g*g+y*(y+2*d)+f);else y=c>0?-l:l,g=Math.max(0,-(c*y+u)),_=-g*g+y*(y+2*d)+f;return o&&o.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(_segCenter).addScaledVector(_segDir,y),_}intersectSphere(n,r){_vector$a.subVectors(n.center,this.origin);const o=_vector$a.dot(this.direction),s=_vector$a.dot(_vector$a)-o*o,l=n.radius*n.radius;if(s>l)return null;const c=Math.sqrt(l-s),u=o-c,d=o+c;return d<0?null:u<0?this.at(d,r):this.at(u,r)}intersectsSphere(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const r=n.normal.dot(this.direction);if(r===0)return n.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(n.normal)+n.constant)/r;return o>=0?o:null}intersectPlane(n,r){const o=this.distanceToPlane(n);return o===null?null:this.at(o,r)}intersectsPlane(n){const r=n.distanceToPoint(this.origin);return r===0||n.normal.dot(this.direction)*r<0}intersectBox(n,r){let o,s,l,c,u,d;const f=1/this.direction.x,v=1/this.direction.y,g=1/this.direction.z,y=this.origin;return f>=0?(o=(n.min.x-y.x)*f,s=(n.max.x-y.x)*f):(o=(n.max.x-y.x)*f,s=(n.min.x-y.x)*f),v>=0?(l=(n.min.y-y.y)*v,c=(n.max.y-y.y)*v):(l=(n.max.y-y.y)*v,c=(n.min.y-y.y)*v),o>c||l>s||((l>o||isNaN(o))&&(o=l),(c<s||isNaN(s))&&(s=c),g>=0?(u=(n.min.z-y.z)*g,d=(n.max.z-y.z)*g):(u=(n.max.z-y.z)*g,d=(n.min.z-y.z)*g),o>d||u>s)||((u>o||o!==o)&&(o=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(o>=0?o:s,r)}intersectsBox(n){return this.intersectBox(n,_vector$a)!==null}intersectTriangle(n,r,o,s,l){_edge1.subVectors(r,n),_edge2.subVectors(o,n),_normal$1.crossVectors(_edge1,_edge2);let c=this.direction.dot(_normal$1),u;if(c>0){if(s)return null;u=1}else if(c<0)u=-1,c=-c;else return null;_diff.subVectors(this.origin,n);const d=u*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(d<0)return null;const f=u*this.direction.dot(_edge1.cross(_diff));if(f<0||d+f>c)return null;const v=-u*_diff.dot(_normal$1);return v<0?null:this.at(v/c,l)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(n,r,o,s,l,c,u,d,f,v,g,y,_,S,x,T){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,r,o,s,l,c,u,d,f,v,g,y,_,S,x,T)}set(n,r,o,s,l,c,u,d,f,v,g,y,_,S,x,T){const w=this.elements;return w[0]=n,w[4]=r,w[8]=o,w[12]=s,w[1]=l,w[5]=c,w[9]=u,w[13]=d,w[2]=f,w[6]=v,w[10]=g,w[14]=y,w[3]=_,w[7]=S,w[11]=x,w[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(n){const r=this.elements,o=n.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],this}copyPosition(n){const r=this.elements,o=n.elements;return r[12]=o[12],r[13]=o[13],r[14]=o[14],this}setFromMatrix3(n){const r=n.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(n,r,o){return n.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(n,r,o){return this.set(n.x,r.x,o.x,0,n.y,r.y,o.y,0,n.z,r.z,o.z,0,0,0,0,1),this}extractRotation(n){const r=this.elements,o=n.elements,s=1/_v1$5.setFromMatrixColumn(n,0).length(),l=1/_v1$5.setFromMatrixColumn(n,1).length(),c=1/_v1$5.setFromMatrixColumn(n,2).length();return r[0]=o[0]*s,r[1]=o[1]*s,r[2]=o[2]*s,r[3]=0,r[4]=o[4]*l,r[5]=o[5]*l,r[6]=o[6]*l,r[7]=0,r[8]=o[8]*c,r[9]=o[9]*c,r[10]=o[10]*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(n){const r=this.elements,o=n.x,s=n.y,l=n.z,c=Math.cos(o),u=Math.sin(o),d=Math.cos(s),f=Math.sin(s),v=Math.cos(l),g=Math.sin(l);if(n.order==="XYZ"){const y=c*v,_=c*g,S=u*v,x=u*g;r[0]=d*v,r[4]=-d*g,r[8]=f,r[1]=_+S*f,r[5]=y-x*f,r[9]=-u*d,r[2]=x-y*f,r[6]=S+_*f,r[10]=c*d}else if(n.order==="YXZ"){const y=d*v,_=d*g,S=f*v,x=f*g;r[0]=y+x*u,r[4]=S*u-_,r[8]=c*f,r[1]=c*g,r[5]=c*v,r[9]=-u,r[2]=_*u-S,r[6]=x+y*u,r[10]=c*d}else if(n.order==="ZXY"){const y=d*v,_=d*g,S=f*v,x=f*g;r[0]=y-x*u,r[4]=-c*g,r[8]=S+_*u,r[1]=_+S*u,r[5]=c*v,r[9]=x-y*u,r[2]=-c*f,r[6]=u,r[10]=c*d}else if(n.order==="ZYX"){const y=c*v,_=c*g,S=u*v,x=u*g;r[0]=d*v,r[4]=S*f-_,r[8]=y*f+x,r[1]=d*g,r[5]=x*f+y,r[9]=_*f-S,r[2]=-f,r[6]=u*d,r[10]=c*d}else if(n.order==="YZX"){const y=c*d,_=c*f,S=u*d,x=u*f;r[0]=d*v,r[4]=x-y*g,r[8]=S*g+_,r[1]=g,r[5]=c*v,r[9]=-u*v,r[2]=-f*v,r[6]=_*g+S,r[10]=y-x*g}else if(n.order==="XZY"){const y=c*d,_=c*f,S=u*d,x=u*f;r[0]=d*v,r[4]=-g,r[8]=f*v,r[1]=y*g+x,r[5]=c*v,r[9]=_*g-S,r[2]=S*g-_,r[6]=u*v,r[10]=x*g+y}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(n){return this.compose(_zero,n,_one)}lookAt(n,r,o){const s=this.elements;return _z.subVectors(n,r),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(o,_z),_x.lengthSq()===0&&(Math.abs(o.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(o,_z)),_x.normalize(),_y.crossVectors(_z,_x),s[0]=_x.x,s[4]=_y.x,s[8]=_z.x,s[1]=_x.y,s[5]=_y.y,s[9]=_z.y,s[2]=_x.z,s[6]=_y.z,s[10]=_z.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,r){const o=n.elements,s=r.elements,l=this.elements,c=o[0],u=o[4],d=o[8],f=o[12],v=o[1],g=o[5],y=o[9],_=o[13],S=o[2],x=o[6],T=o[10],w=o[14],E=o[3],P=o[7],D=o[11],L=o[15],$=s[0],O=s[4],B=s[8],V=s[12],F=s[1],U=s[5],G=s[9],W=s[13],j=s[2],K=s[6],q=s[10],ie=s[14],ee=s[3],he=s[7],pe=s[11],ce=s[15];return l[0]=c*$+u*F+d*j+f*ee,l[4]=c*O+u*U+d*K+f*he,l[8]=c*B+u*G+d*q+f*pe,l[12]=c*V+u*W+d*ie+f*ce,l[1]=v*$+g*F+y*j+_*ee,l[5]=v*O+g*U+y*K+_*he,l[9]=v*B+g*G+y*q+_*pe,l[13]=v*V+g*W+y*ie+_*ce,l[2]=S*$+x*F+T*j+w*ee,l[6]=S*O+x*U+T*K+w*he,l[10]=S*B+x*G+T*q+w*pe,l[14]=S*V+x*W+T*ie+w*ce,l[3]=E*$+P*F+D*j+L*ee,l[7]=E*O+P*U+D*K+L*he,l[11]=E*B+P*G+D*q+L*pe,l[15]=E*V+P*W+D*ie+L*ce,this}multiplyScalar(n){const r=this.elements;return r[0]*=n,r[4]*=n,r[8]*=n,r[12]*=n,r[1]*=n,r[5]*=n,r[9]*=n,r[13]*=n,r[2]*=n,r[6]*=n,r[10]*=n,r[14]*=n,r[3]*=n,r[7]*=n,r[11]*=n,r[15]*=n,this}determinant(){const n=this.elements,r=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],f=n[13],v=n[2],g=n[6],y=n[10],_=n[14],S=n[3],x=n[7],T=n[11],w=n[15];return S*(+l*d*g-s*f*g-l*u*y+o*f*y+s*u*_-o*d*_)+x*(+r*d*_-r*f*y+l*c*y-s*c*_+s*f*v-l*d*v)+T*(+r*f*g-r*u*_-l*c*g+o*c*_+l*u*v-o*f*v)+w*(-s*u*v-r*d*g+r*u*y+s*c*g-o*c*y+o*d*v)}transpose(){const n=this.elements;let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,r=n[3],n[3]=n[12],n[12]=r,r=n[7],n[7]=n[13],n[13]=r,r=n[11],n[11]=n[14],n[14]=r,this}setPosition(n,r,o){const s=this.elements;return n.isVector3?(s[12]=n.x,s[13]=n.y,s[14]=n.z):(s[12]=n,s[13]=r,s[14]=o),this}invert(){const n=this.elements,r=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],d=n[6],f=n[7],v=n[8],g=n[9],y=n[10],_=n[11],S=n[12],x=n[13],T=n[14],w=n[15],E=g*T*f-x*y*f+x*d*_-u*T*_-g*d*w+u*y*w,P=S*y*f-v*T*f-S*d*_+c*T*_+v*d*w-c*y*w,D=v*x*f-S*g*f+S*u*_-c*x*_-v*u*w+c*g*w,L=S*g*d-v*x*d-S*u*y+c*x*y+v*u*T-c*g*T,$=r*E+o*P+s*D+l*L;if($===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/$;return n[0]=E*O,n[1]=(x*y*l-g*T*l-x*s*_+o*T*_+g*s*w-o*y*w)*O,n[2]=(u*T*l-x*d*l+x*s*f-o*T*f-u*s*w+o*d*w)*O,n[3]=(g*d*l-u*y*l-g*s*f+o*y*f+u*s*_-o*d*_)*O,n[4]=P*O,n[5]=(v*T*l-S*y*l+S*s*_-r*T*_-v*s*w+r*y*w)*O,n[6]=(S*d*l-c*T*l-S*s*f+r*T*f+c*s*w-r*d*w)*O,n[7]=(c*y*l-v*d*l+v*s*f-r*y*f-c*s*_+r*d*_)*O,n[8]=D*O,n[9]=(S*g*l-v*x*l-S*o*_+r*x*_+v*o*w-r*g*w)*O,n[10]=(c*x*l-S*u*l+S*o*f-r*x*f-c*o*w+r*u*w)*O,n[11]=(v*u*l-c*g*l-v*o*f+r*g*f+c*o*_-r*u*_)*O,n[12]=L*O,n[13]=(v*x*s-S*g*s+S*o*y-r*x*y-v*o*T+r*g*T)*O,n[14]=(S*u*s-c*x*s-S*o*d+r*x*d+c*o*T-r*u*T)*O,n[15]=(c*g*s-v*u*s+v*o*d-r*g*d-c*o*y+r*u*y)*O,this}scale(n){const r=this.elements,o=n.x,s=n.y,l=n.z;return r[0]*=o,r[4]*=s,r[8]*=l,r[1]*=o,r[5]*=s,r[9]*=l,r[2]*=o,r[6]*=s,r[10]*=l,r[3]*=o,r[7]*=s,r[11]*=l,this}getMaxScaleOnAxis(){const n=this.elements,r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],s=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(r,o,s))}makeTranslation(n,r,o){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,r,0,0,1,o,0,0,0,1),this}makeRotationX(n){const r=Math.cos(n),o=Math.sin(n);return this.set(1,0,0,0,0,r,-o,0,0,o,r,0,0,0,0,1),this}makeRotationY(n){const r=Math.cos(n),o=Math.sin(n);return this.set(r,0,o,0,0,1,0,0,-o,0,r,0,0,0,0,1),this}makeRotationZ(n){const r=Math.cos(n),o=Math.sin(n);return this.set(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,r){const o=Math.cos(r),s=Math.sin(r),l=1-o,c=n.x,u=n.y,d=n.z,f=l*c,v=l*u;return this.set(f*c+o,f*u-s*d,f*d+s*u,0,f*u+s*d,v*u+o,v*d-s*c,0,f*d-s*u,v*d+s*c,l*d*d+o,0,0,0,0,1),this}makeScale(n,r,o){return this.set(n,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1),this}makeShear(n,r,o,s,l,c){return this.set(1,o,l,0,n,1,c,0,r,s,1,0,0,0,0,1),this}compose(n,r,o){const s=this.elements,l=r._x,c=r._y,u=r._z,d=r._w,f=l+l,v=c+c,g=u+u,y=l*f,_=l*v,S=l*g,x=c*v,T=c*g,w=u*g,E=d*f,P=d*v,D=d*g,L=o.x,$=o.y,O=o.z;return s[0]=(1-(x+w))*L,s[1]=(_+D)*L,s[2]=(S-P)*L,s[3]=0,s[4]=(_-D)*$,s[5]=(1-(y+w))*$,s[6]=(T+E)*$,s[7]=0,s[8]=(S+P)*O,s[9]=(T-E)*O,s[10]=(1-(y+x))*O,s[11]=0,s[12]=n.x,s[13]=n.y,s[14]=n.z,s[15]=1,this}decompose(n,r,o){const s=this.elements;let l=_v1$5.set(s[0],s[1],s[2]).length();const c=_v1$5.set(s[4],s[5],s[6]).length(),u=_v1$5.set(s[8],s[9],s[10]).length();this.determinant()<0&&(l=-l),n.x=s[12],n.y=s[13],n.z=s[14],_m1$2.copy(this);const f=1/l,v=1/c,g=1/u;return _m1$2.elements[0]*=f,_m1$2.elements[1]*=f,_m1$2.elements[2]*=f,_m1$2.elements[4]*=v,_m1$2.elements[5]*=v,_m1$2.elements[6]*=v,_m1$2.elements[8]*=g,_m1$2.elements[9]*=g,_m1$2.elements[10]*=g,r.setFromRotationMatrix(_m1$2),o.x=l,o.y=c,o.z=u,this}makePerspective(n,r,o,s,l,c,u=WebGLCoordinateSystem){const d=this.elements,f=2*l/(r-n),v=2*l/(o-s),g=(r+n)/(r-n),y=(o+s)/(o-s);let _,S;if(u===WebGLCoordinateSystem)_=-(c+l)/(c-l),S=-2*c*l/(c-l);else if(u===WebGPUCoordinateSystem)_=-c/(c-l),S=-c*l/(c-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=f,d[4]=0,d[8]=g,d[12]=0,d[1]=0,d[5]=v,d[9]=y,d[13]=0,d[2]=0,d[6]=0,d[10]=_,d[14]=S,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(n,r,o,s,l,c,u=WebGLCoordinateSystem){const d=this.elements,f=1/(r-n),v=1/(o-s),g=1/(c-l),y=(r+n)*f,_=(o+s)*v;let S,x;if(u===WebGLCoordinateSystem)S=(c+l)*g,x=-2*g;else if(u===WebGPUCoordinateSystem)S=l*g,x=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-y,d[1]=0,d[5]=2*v,d[9]=0,d[13]=-_,d[2]=0,d[6]=0,d[10]=x,d[14]=-S,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(n){const r=this.elements,o=n.elements;for(let s=0;s<16;s++)if(r[s]!==o[s])return!1;return!0}fromArray(n,r=0){for(let o=0;o<16;o++)this.elements[o]=n[o+r];return this}toArray(n=[],r=0){const o=this.elements;return n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3],n[r+4]=o[4],n[r+5]=o[5],n[r+6]=o[6],n[r+7]=o[7],n[r+8]=o[8],n[r+9]=o[9],n[r+10]=o[10],n[r+11]=o[11],n[r+12]=o[12],n[r+13]=o[13],n[r+14]=o[14],n[r+15]=o[15],n}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(n=0,r=0,o=0,s=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=r,this._z=o,this._order=s}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,r,o,s=this._order){return this._x=n,this._y=r,this._z=o,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,r=this._order,o=!0){const s=n.elements,l=s[0],c=s[4],u=s[8],d=s[1],f=s[5],v=s[9],g=s[2],y=s[6],_=s[10];switch(r){case"XYZ":this._y=Math.asin(clamp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-v,_),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(u,_),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-g,l),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-c,f)):(this._y=0,this._z=Math.atan2(d,l));break;case"ZYX":this._y=Math.asin(-clamp(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(d,l)):(this._x=0,this._z=Math.atan2(-c,f));break;case"YZX":this._z=Math.asin(clamp(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,f),this._y=Math.atan2(-g,l)):(this._x=0,this._y=Math.atan2(u,_));break;case"XZY":this._z=Math.asin(-clamp(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(u,l)):(this._x=Math.atan2(-v,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,o===!0&&this._onChangeCallback(),this}setFromQuaternion(n,r,o){return _matrix$2.makeRotationFromQuaternion(n),this.setFromRotationMatrix(_matrix$2,r,o)}setFromVector3(n,r=this._order){return this.set(n.x,n.y,n.z,r)}reorder(n){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],r=0){return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const n=new Vector3,r=new Euler,o=new Quaternion,s=new Vector3(1,1,1);function l(){o.setFromEuler(r,!1)}function c(){r.setFromQuaternion(o,void 0,!1)}r._onChange(l),o._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,r){this.quaternion.setFromAxisAngle(n,r)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,r){return _q1.setFromAxisAngle(n,r),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(n,r){return _q1.setFromAxisAngle(n,r),this.quaternion.premultiply(_q1),this}rotateX(n){return this.rotateOnAxis(_xAxis,n)}rotateY(n){return this.rotateOnAxis(_yAxis,n)}rotateZ(n){return this.rotateOnAxis(_zAxis,n)}translateOnAxis(n,r){return _v1$4.copy(n).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(r)),this}translateX(n){return this.translateOnAxis(_xAxis,n)}translateY(n){return this.translateOnAxis(_yAxis,n)}translateZ(n){return this.translateOnAxis(_zAxis,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(n,r,o){n.isVector3?_target.copy(n):_target.set(n,r,o);const s=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),s&&(_m1$1$1.extractRotation(s.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}const r=this.children.indexOf(n);return r!==-1&&(n.parent=null,this.children.splice(r,1),n.dispatchEvent(_removedEvent),_childremovedEvent.child=n,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(n.parent.matrixWorld)),n.applyMatrix4(_m1$1$1),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,r){if(this[n]===r)return this;for(let o=0,s=this.children.length;o<s;o++){const c=this.children[o].getObjectByProperty(n,r);if(c!==void 0)return c}}getObjectsByProperty(n,r,o=[]){this[n]===r&&o.push(this);const s=this.children;for(let l=0,c=s.length;l<c;l++)s[l].getObjectsByProperty(n,r,o);return o}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,n,_scale$2),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return n.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(n){n(this);const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].traverseVisible(n)}traverseAncestors(n){const r=this.parent;r!==null&&(n(r),r.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].updateMatrixWorld(n)}updateWorldMatrix(n,r){const o=this.parent;if(n===!0&&o!==null&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const s=this.children;for(let l=0,c=s.length;l<c;l++)s[l].updateWorldMatrix(!1,!0)}}toJSON(n){const r=n===void 0||typeof n=="string",o={};r&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},o.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(n),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(n)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function l(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(n)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=l(n.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let f=0,v=d.length;f<v;f++){const g=d[f];l(n.shapes,g)}else l(n.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(n.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,f=this.material.length;d<f;d++)u.push(l(n.materials,this.material[d]));s.material=u}else s.material=l(n.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(n).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(l(n.animations,d))}}if(r){const u=c(n.geometries),d=c(n.materials),f=c(n.textures),v=c(n.images),g=c(n.shapes),y=c(n.skeletons),_=c(n.animations),S=c(n.nodes);u.length>0&&(o.geometries=u),d.length>0&&(o.materials=d),f.length>0&&(o.textures=f),v.length>0&&(o.images=v),g.length>0&&(o.shapes=g),y.length>0&&(o.skeletons=y),_.length>0&&(o.animations=_),S.length>0&&(o.nodes=S)}return o.object=s,o;function c(u){const d=[];for(const f in u){const v=u[f];delete v.metadata,d.push(v)}return d}}clone(n){return new this.constructor().copy(this,n)}copy(n,r=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),r===!0)for(let o=0;o<n.children.length;o++){const s=n.children[o];this.add(s.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(n=new Vector3,r=new Vector3,o=new Vector3){this.a=n,this.b=r,this.c=o}static getNormal(n,r,o,s){s.subVectors(o,r),_v0$1.subVectors(n,r),s.cross(_v0$1);const l=s.lengthSq();return l>0?s.multiplyScalar(1/Math.sqrt(l)):s.set(0,0,0)}static getBarycoord(n,r,o,s,l){_v0$1.subVectors(s,r),_v1$3.subVectors(o,r),_v2$2.subVectors(n,r);const c=_v0$1.dot(_v0$1),u=_v0$1.dot(_v1$3),d=_v0$1.dot(_v2$2),f=_v1$3.dot(_v1$3),v=_v1$3.dot(_v2$2),g=c*f-u*u;if(g===0)return l.set(0,0,0),null;const y=1/g,_=(f*d-u*v)*y,S=(c*v-u*d)*y;return l.set(1-_-S,S,_)}static containsPoint(n,r,o,s){return this.getBarycoord(n,r,o,s,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(n,r,o,s,l,c,u,d){return this.getBarycoord(n,r,o,s,_v3$2)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(l,_v3$2.x),d.addScaledVector(c,_v3$2.y),d.addScaledVector(u,_v3$2.z),d)}static getInterpolatedAttribute(n,r,o,s,l,c){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(n,r),_v41.fromBufferAttribute(n,o),_v42.fromBufferAttribute(n,s),c.setScalar(0),c.addScaledVector(_v40,l.x),c.addScaledVector(_v41,l.y),c.addScaledVector(_v42,l.z),c}static isFrontFacing(n,r,o,s){return _v0$1.subVectors(o,r),_v1$3.subVectors(n,r),_v0$1.cross(_v1$3).dot(s)<0}set(n,r,o){return this.a.copy(n),this.b.copy(r),this.c.copy(o),this}setFromPointsAndIndices(n,r,o,s){return this.a.copy(n[r]),this.b.copy(n[o]),this.c.copy(n[s]),this}setFromAttributeAndIndices(n,r,o,s){return this.a.fromBufferAttribute(n,r),this.b.fromBufferAttribute(n,o),this.c.fromBufferAttribute(n,s),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(n){return Triangle.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,r){return Triangle.getBarycoord(n,this.a,this.b,this.c,r)}getInterpolation(n,r,o,s,l){return Triangle.getInterpolation(n,this.a,this.b,this.c,r,o,s,l)}containsPoint(n){return Triangle.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return Triangle.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,r){const o=this.a,s=this.b,l=this.c;let c,u;_vab.subVectors(s,o),_vac.subVectors(l,o),_vap.subVectors(n,o);const d=_vab.dot(_vap),f=_vac.dot(_vap);if(d<=0&&f<=0)return r.copy(o);_vbp.subVectors(n,s);const v=_vab.dot(_vbp),g=_vac.dot(_vbp);if(v>=0&&g<=v)return r.copy(s);const y=d*g-v*f;if(y<=0&&d>=0&&v<=0)return c=d/(d-v),r.copy(o).addScaledVector(_vab,c);_vcp.subVectors(n,l);const _=_vab.dot(_vcp),S=_vac.dot(_vcp);if(S>=0&&_<=S)return r.copy(l);const x=_*f-d*S;if(x<=0&&f>=0&&S<=0)return u=f/(f-S),r.copy(o).addScaledVector(_vac,u);const T=v*S-_*g;if(T<=0&&g-v>=0&&_-S>=0)return _vbc.subVectors(l,s),u=(g-v)/(g-v+(_-S)),r.copy(s).addScaledVector(_vbc,u);const w=1/(T+x+y);return c=x*w,u=y*w,r.copy(o).addScaledVector(_vab,c).addScaledVector(_vac,u)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(a,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?a+(n-a)*6*r:r<1/2?n:r<2/3?a+(n-a)*6*(2/3-r):a}class Color{constructor(n,r,o){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,r,o)}set(n,r,o){if(r===void 0&&o===void 0){const s=n;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(n,r,o);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,r=SRGBColorSpace){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,ColorManagement.toWorkingColorSpace(this,r),this}setRGB(n,r,o,s=ColorManagement.workingColorSpace){return this.r=n,this.g=r,this.b=o,ColorManagement.toWorkingColorSpace(this,s),this}setHSL(n,r,o,s=ColorManagement.workingColorSpace){if(n=euclideanModulo(n,1),r=clamp(r,0,1),o=clamp(o,0,1),r===0)this.r=this.g=this.b=o;else{const l=o<=.5?o*(1+r):o+r-o*r,c=2*o-l;this.r=hue2rgb(c,l,n+1/3),this.g=hue2rgb(c,l,n),this.b=hue2rgb(c,l,n-1/3)}return ColorManagement.toWorkingColorSpace(this,s),this}setStyle(n,r=SRGBColorSpace){function o(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(n)){let l;const c=s[1],u=s[2];switch(c){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return o(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,r);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return o(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,r);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return o(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+n)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(n)){const l=s[1],c=l.length;if(c===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,r);if(c===6)return this.setHex(parseInt(l,16),r);console.warn("THREE.Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,r);return this}setColorName(n,r=SRGBColorSpace){const o=_colorKeywords[n.toLowerCase()];return o!==void 0?this.setHex(o,r):console.warn("THREE.Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=SRGBToLinear(n.r),this.g=SRGBToLinear(n.g),this.b=SRGBToLinear(n.b),this}copyLinearToSRGB(n){return this.r=LinearToSRGB(n.r),this.g=LinearToSRGB(n.g),this.b=LinearToSRGB(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),n),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(n=SRGBColorSpace){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,r=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),r);const o=_color.r,s=_color.g,l=_color.b,c=Math.max(o,s,l),u=Math.min(o,s,l);let d,f;const v=(u+c)/2;if(u===c)d=0,f=0;else{const g=c-u;switch(f=v<=.5?g/(c+u):g/(2-c-u),c){case o:d=(s-l)/g+(s<l?6:0);break;case s:d=(l-o)/g+2;break;case l:d=(o-s)/g+4;break}d/=6}return n.h=d,n.s=f,n.l=v,n}getRGB(n,r=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),r),n.r=_color.r,n.g=_color.g,n.b=_color.b,n}getStyle(n=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),n);const r=_color.r,o=_color.g,s=_color.b;return n!==SRGBColorSpace?`color(${n} ${r.toFixed(3)} ${o.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(o*255)},${Math.round(s*255)})`}offsetHSL(n,r,o){return this.getHSL(_hslA),this.setHSL(_hslA.h+n,_hslA.s+r,_hslA.l+o)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,r){return this.r=n.r+r.r,this.g=n.g+r.g,this.b=n.b+r.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,r){return this.r+=(n.r-this.r)*r,this.g+=(n.g-this.g)*r,this.b+=(n.b-this.b)*r,this}lerpColors(n,r,o){return this.r=n.r+(r.r-n.r)*o,this.g=n.g+(r.g-n.g)*o,this.b=n.b+(r.b-n.b)*o,this}lerpHSL(n,r){this.getHSL(_hslA),n.getHSL(_hslB);const o=lerp(_hslA.h,_hslB.h,r),s=lerp(_hslA.s,_hslB.s,r),l=lerp(_hslA.l,_hslB.l,r);return this.setHSL(o,s,l),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const r=this.r,o=this.g,s=this.b,l=n.elements;return this.r=l[0]*r+l[3]*o+l[6]*s,this.g=l[1]*r+l[4]*o+l[7]*s,this.b=l[2]*r+l[5]*o+l[8]*s,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,r=0){return this.r=n[r],this.g=n[r+1],this.b=n[r+2],this}toArray(n=[],r=0){return n[r]=this.r,n[r+1]=this.g,n[r+2]=this.b,n}fromBufferAttribute(n,r){return this.r=n.getX(r),this.g=n.getY(r),this.b=n.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const r in n){const o=n[r];if(o===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const s=this[r];if(s===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(o):s&&s.isVector3&&o&&o.isVector3?s.copy(o):this[r]=o}}toJSON(n){const r=n===void 0||typeof n=="string";r&&(n={textures:{},images:{}});const o={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen!==void 0&&(o.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(o.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(o.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(o.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(o.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(o.dispersion=this.dispersion),this.iridescence!==void 0&&(o.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(o.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(o.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(o.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(o.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(o.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(o.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(n).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(n).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(n).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(n).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(n).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(o.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(o.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(o.combine=this.combine)),this.envMapRotation!==void 0&&(o.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(o.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(o.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(o.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(o.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(o.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(o.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(o.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(o.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(o.blending=this.blending),this.side!==FrontSide&&(o.side=this.side),this.vertexColors===!0&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(o.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(o.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(o.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(o.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(o.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(o.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(o.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(o.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(o.depthFunc=this.depthFunc),this.depthTest===!1&&(o.depthTest=this.depthTest),this.depthWrite===!1&&(o.depthWrite=this.depthWrite),this.colorWrite===!1&&(o.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(o.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(o.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(o.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(o.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(o.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(o.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(o.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(o.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaHash===!0&&(o.alphaHash=!0),this.alphaToCoverage===!0&&(o.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=!0),this.forceSinglePass===!0&&(o.forceSinglePass=!0),this.wireframe===!0&&(o.wireframe=!0),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(o.flatShading=!0),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),this.fog===!1&&(o.fog=!1),Object.keys(this.userData).length>0&&(o.userData=this.userData);function s(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}if(r){const l=s(n.textures),c=s(n.images);l.length>0&&(o.textures=l),c.length>0&&(o.images=c)}return o}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const r=n.clippingPlanes;let o=null;if(r!==null){const s=r.length;o=new Array(s);for(let l=0;l!==s;++l)o[l]=r[l].clone()}return this.clippingPlanes=o,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(n,r,o=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=n,this.itemSize=r,this.count=n!==void 0?n.length/r:0,this.normalized=o,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,r){this.updateRanges.push({start:n,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,r,o){n*=this.itemSize,o*=r.itemSize;for(let s=0,l=this.itemSize;s<l;s++)this.array[n+s]=r.array[o+s];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let r=0,o=this.count;r<o;r++)_vector2$1.fromBufferAttribute(this,r),_vector2$1.applyMatrix3(n),this.setXY(r,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let r=0,o=this.count;r<o;r++)_vector$9.fromBufferAttribute(this,r),_vector$9.applyMatrix3(n),this.setXYZ(r,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(n){for(let r=0,o=this.count;r<o;r++)_vector$9.fromBufferAttribute(this,r),_vector$9.applyMatrix4(n),this.setXYZ(r,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(n){for(let r=0,o=this.count;r<o;r++)_vector$9.fromBufferAttribute(this,r),_vector$9.applyNormalMatrix(n),this.setXYZ(r,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(n){for(let r=0,o=this.count;r<o;r++)_vector$9.fromBufferAttribute(this,r),_vector$9.transformDirection(n),this.setXYZ(r,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(n,r=0){return this.array.set(n,r),this}getComponent(n,r){let o=this.array[n*this.itemSize+r];return this.normalized&&(o=denormalize(o,this.array)),o}setComponent(n,r,o){return this.normalized&&(o=normalize(o,this.array)),this.array[n*this.itemSize+r]=o,this}getX(n){let r=this.array[n*this.itemSize];return this.normalized&&(r=denormalize(r,this.array)),r}setX(n,r){return this.normalized&&(r=normalize(r,this.array)),this.array[n*this.itemSize]=r,this}getY(n){let r=this.array[n*this.itemSize+1];return this.normalized&&(r=denormalize(r,this.array)),r}setY(n,r){return this.normalized&&(r=normalize(r,this.array)),this.array[n*this.itemSize+1]=r,this}getZ(n){let r=this.array[n*this.itemSize+2];return this.normalized&&(r=denormalize(r,this.array)),r}setZ(n,r){return this.normalized&&(r=normalize(r,this.array)),this.array[n*this.itemSize+2]=r,this}getW(n){let r=this.array[n*this.itemSize+3];return this.normalized&&(r=denormalize(r,this.array)),r}setW(n,r){return this.normalized&&(r=normalize(r,this.array)),this.array[n*this.itemSize+3]=r,this}setXY(n,r,o){return n*=this.itemSize,this.normalized&&(r=normalize(r,this.array),o=normalize(o,this.array)),this.array[n+0]=r,this.array[n+1]=o,this}setXYZ(n,r,o,s){return n*=this.itemSize,this.normalized&&(r=normalize(r,this.array),o=normalize(o,this.array),s=normalize(s,this.array)),this.array[n+0]=r,this.array[n+1]=o,this.array[n+2]=s,this}setXYZW(n,r,o,s,l){return n*=this.itemSize,this.normalized&&(r=normalize(r,this.array),o=normalize(o,this.array),s=normalize(s,this.array),l=normalize(l,this.array)),this.array[n+0]=r,this.array[n+1]=o,this.array[n+2]=s,this.array[n+3]=l,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==StaticDrawUsage&&(n.usage=this.usage),n}}class Uint16BufferAttribute extends BufferAttribute{constructor(n,r,o){super(new Uint16Array(n),r,o)}}class Uint32BufferAttribute extends BufferAttribute{constructor(n,r,o){super(new Uint32Array(n),r,o)}}class Float32BufferAttribute extends BufferAttribute{constructor(n,r,o){super(new Float32Array(n),r,o)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(arrayNeedsUint32(n)?Uint32BufferAttribute:Uint16BufferAttribute)(n,1):this.index=n,this}setIndirect(n){return this.indirect=n,this}getIndirect(){return this.indirect}getAttribute(n){return this.attributes[n]}setAttribute(n,r){return this.attributes[n]=r,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,r,o=0){this.groups.push({start:n,count:r,materialIndex:o})}clearGroups(){this.groups=[]}setDrawRange(n,r){this.drawRange.start=n,this.drawRange.count=r}applyMatrix4(n){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(n),r.needsUpdate=!0);const o=this.attributes.normal;if(o!==void 0){const l=new Matrix3().getNormalMatrix(n);o.applyNormalMatrix(l),o.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(n),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return _m1$3.makeRotationFromQuaternion(n),this.applyMatrix4(_m1$3),this}rotateX(n){return _m1$3.makeRotationX(n),this.applyMatrix4(_m1$3),this}rotateY(n){return _m1$3.makeRotationY(n),this.applyMatrix4(_m1$3),this}rotateZ(n){return _m1$3.makeRotationZ(n),this.applyMatrix4(_m1$3),this}translate(n,r,o){return _m1$3.makeTranslation(n,r,o),this.applyMatrix4(_m1$3),this}scale(n,r,o){return _m1$3.makeScale(n,r,o),this.applyMatrix4(_m1$3),this}lookAt(n){return _obj.lookAt(n),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(n){const r=this.getAttribute("position");if(r===void 0){const o=[];for(let s=0,l=n.length;s<l;s++){const c=n[s];o.push(c.x,c.y,c.z||0)}this.setAttribute("position",new Float32BufferAttribute(o,3))}else{const o=Math.min(n.length,r.count);for(let s=0;s<o;s++){const l=n[s];r.setXYZ(s,l.x,l.y,l.z||0)}n.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const n=this.attributes.position,r=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),r)for(let o=0,s=r.length;o<s;o++){const l=r[o];_box$2.setFromBufferAttribute(l),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const n=this.attributes.position,r=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(n){const o=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(n),r)for(let l=0,c=r.length;l<c;l++){const u=r[l];_boxMorphTargets.setFromBufferAttribute(u),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(o);let s=0;for(let l=0,c=n.count;l<c;l++)_vector$8.fromBufferAttribute(n,l),s=Math.max(s,o.distanceToSquared(_vector$8));if(r)for(let l=0,c=r.length;l<c;l++){const u=r[l],d=this.morphTargetsRelative;for(let f=0,v=u.count;f<v;f++)_vector$8.fromBufferAttribute(u,f),d&&(_offset.fromBufferAttribute(n,f),_vector$8.add(_offset)),s=Math.max(s,o.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,r=this.attributes;if(n===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const o=r.position,s=r.normal,l=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*o.count),4));const c=this.getAttribute("tangent"),u=[],d=[];for(let B=0;B<o.count;B++)u[B]=new Vector3,d[B]=new Vector3;const f=new Vector3,v=new Vector3,g=new Vector3,y=new Vector2,_=new Vector2,S=new Vector2,x=new Vector3,T=new Vector3;function w(B,V,F){f.fromBufferAttribute(o,B),v.fromBufferAttribute(o,V),g.fromBufferAttribute(o,F),y.fromBufferAttribute(l,B),_.fromBufferAttribute(l,V),S.fromBufferAttribute(l,F),v.sub(f),g.sub(f),_.sub(y),S.sub(y);const U=1/(_.x*S.y-S.x*_.y);isFinite(U)&&(x.copy(v).multiplyScalar(S.y).addScaledVector(g,-_.y).multiplyScalar(U),T.copy(g).multiplyScalar(_.x).addScaledVector(v,-S.x).multiplyScalar(U),u[B].add(x),u[V].add(x),u[F].add(x),d[B].add(T),d[V].add(T),d[F].add(T))}let E=this.groups;E.length===0&&(E=[{start:0,count:n.count}]);for(let B=0,V=E.length;B<V;++B){const F=E[B],U=F.start,G=F.count;for(let W=U,j=U+G;W<j;W+=3)w(n.getX(W+0),n.getX(W+1),n.getX(W+2))}const P=new Vector3,D=new Vector3,L=new Vector3,$=new Vector3;function O(B){L.fromBufferAttribute(s,B),$.copy(L);const V=u[B];P.copy(V),P.sub(L.multiplyScalar(L.dot(V))).normalize(),D.crossVectors($,V);const U=D.dot(d[B])<0?-1:1;c.setXYZW(B,P.x,P.y,P.z,U)}for(let B=0,V=E.length;B<V;++B){const F=E[B],U=F.start,G=F.count;for(let W=U,j=U+G;W<j;W+=3)O(n.getX(W+0)),O(n.getX(W+1)),O(n.getX(W+2))}}computeVertexNormals(){const n=this.index,r=this.getAttribute("position");if(r!==void 0){let o=this.getAttribute("normal");if(o===void 0)o=new BufferAttribute(new Float32Array(r.count*3),3),this.setAttribute("normal",o);else for(let y=0,_=o.count;y<_;y++)o.setXYZ(y,0,0,0);const s=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3,d=new Vector3,f=new Vector3,v=new Vector3,g=new Vector3;if(n)for(let y=0,_=n.count;y<_;y+=3){const S=n.getX(y+0),x=n.getX(y+1),T=n.getX(y+2);s.fromBufferAttribute(r,S),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,T),v.subVectors(c,l),g.subVectors(s,l),v.cross(g),u.fromBufferAttribute(o,S),d.fromBufferAttribute(o,x),f.fromBufferAttribute(o,T),u.add(v),d.add(v),f.add(v),o.setXYZ(S,u.x,u.y,u.z),o.setXYZ(x,d.x,d.y,d.z),o.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,_=r.count;y<_;y+=3)s.fromBufferAttribute(r,y+0),l.fromBufferAttribute(r,y+1),c.fromBufferAttribute(r,y+2),v.subVectors(c,l),g.subVectors(s,l),v.cross(g),o.setXYZ(y+0,v.x,v.y,v.z),o.setXYZ(y+1,v.x,v.y,v.z),o.setXYZ(y+2,v.x,v.y,v.z);this.normalizeNormals(),o.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let r=0,o=n.count;r<o;r++)_vector$8.fromBufferAttribute(n,r),_vector$8.normalize(),n.setXYZ(r,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function n(u,d){const f=u.array,v=u.itemSize,g=u.normalized,y=new f.constructor(d.length*v);let _=0,S=0;for(let x=0,T=d.length;x<T;x++){u.isInterleavedBufferAttribute?_=d[x]*u.data.stride+u.offset:_=d[x]*v;for(let w=0;w<v;w++)y[S++]=f[_++]}return new BufferAttribute(y,v,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new BufferGeometry,o=this.index.array,s=this.attributes;for(const u in s){const d=s[u],f=n(d,o);r.setAttribute(u,f)}const l=this.morphAttributes;for(const u in l){const d=[],f=l[u];for(let v=0,g=f.length;v<g;v++){const y=f[v],_=n(y,o);d.push(_)}r.morphAttributes[u]=d}r.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let u=0,d=c.length;u<d;u++){const f=c[u];r.addGroup(f.start,f.count,f.materialIndex)}return r}toJSON(){const n={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(n[f]=d[f]);return n}n.data={attributes:{}};const r=this.index;r!==null&&(n.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const o=this.attributes;for(const d in o){const f=o[d];n.data.attributes[d]=f.toJSON(n.data)}const s={};let l=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],v=[];for(let g=0,y=f.length;g<y;g++){const _=f[g];v.push(_.toJSON(n.data))}v.length>0&&(s[d]=v,l=!0)}l&&(n.data.morphAttributes=s,n.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(n.data.groups=JSON.parse(JSON.stringify(c)));const u=this.boundingSphere;return u!==null&&(n.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=n.name;const o=n.index;o!==null&&this.setIndex(o.clone());const s=n.attributes;for(const f in s){const v=s[f];this.setAttribute(f,v.clone(r))}const l=n.morphAttributes;for(const f in l){const v=[],g=l[f];for(let y=0,_=g.length;y<_;y++)v.push(g[y].clone(r));this.morphAttributes[f]=v}this.morphTargetsRelative=n.morphTargetsRelative;const c=n.groups;for(let f=0,v=c.length;f<v;f++){const g=c[f];this.addGroup(g.start,g.count,g.materialIndex)}const u=n.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=n.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(n=new BufferGeometry,r=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,r){return super.copy(n,r),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,o=Object.keys(r);if(o.length>0){const s=r[o[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=s.length;l<c;l++){const u=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=l}}}}getVertexPosition(n,r){const o=this.geometry,s=o.attributes.position,l=o.morphAttributes.position,c=o.morphTargetsRelative;r.fromBufferAttribute(s,n);const u=this.morphTargetInfluences;if(l&&u){_morphA.set(0,0,0);for(let d=0,f=l.length;d<f;d++){const v=u[d],g=l[d];v!==0&&(_tempA.fromBufferAttribute(g,n),c?_morphA.addScaledVector(_tempA,v):_morphA.addScaledVector(_tempA.sub(r),v))}r.add(_morphA)}return r}raycast(n,r){const o=this.geometry,s=this.material,l=this.matrixWorld;s!==void 0&&(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$6.copy(o.boundingSphere),_sphere$6.applyMatrix4(l),_ray$3.copy(n.ray).recast(n.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(n.far-n.near)**2))&&(_inverseMatrix$3.copy(l).invert(),_ray$3.copy(n.ray).applyMatrix4(_inverseMatrix$3),!(o.boundingBox!==null&&_ray$3.intersectsBox(o.boundingBox)===!1)&&this._computeIntersections(n,r,_ray$3)))}_computeIntersections(n,r,o){let s;const l=this.geometry,c=this.material,u=l.index,d=l.attributes.position,f=l.attributes.uv,v=l.attributes.uv1,g=l.attributes.normal,y=l.groups,_=l.drawRange;if(u!==null)if(Array.isArray(c))for(let S=0,x=y.length;S<x;S++){const T=y[S],w=c[T.materialIndex],E=Math.max(T.start,_.start),P=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let D=E,L=P;D<L;D+=3){const $=u.getX(D),O=u.getX(D+1),B=u.getX(D+2);s=checkGeometryIntersection(this,w,n,o,f,v,g,$,O,B),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,r.push(s))}}else{const S=Math.max(0,_.start),x=Math.min(u.count,_.start+_.count);for(let T=S,w=x;T<w;T+=3){const E=u.getX(T),P=u.getX(T+1),D=u.getX(T+2);s=checkGeometryIntersection(this,c,n,o,f,v,g,E,P,D),s&&(s.faceIndex=Math.floor(T/3),r.push(s))}}else if(d!==void 0)if(Array.isArray(c))for(let S=0,x=y.length;S<x;S++){const T=y[S],w=c[T.materialIndex],E=Math.max(T.start,_.start),P=Math.min(d.count,Math.min(T.start+T.count,_.start+_.count));for(let D=E,L=P;D<L;D+=3){const $=D,O=D+1,B=D+2;s=checkGeometryIntersection(this,w,n,o,f,v,g,$,O,B),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,r.push(s))}}else{const S=Math.max(0,_.start),x=Math.min(d.count,_.start+_.count);for(let T=S,w=x;T<w;T+=3){const E=T,P=T+1,D=T+2;s=checkGeometryIntersection(this,c,n,o,f,v,g,E,P,D),s&&(s.faceIndex=Math.floor(T/3),r.push(s))}}}}function checkIntersection$1(a,n,r,o,s,l,c,u){let d;if(n.side===BackSide?d=o.intersectTriangle(c,l,s,!0,u):d=o.intersectTriangle(s,l,c,n.side===FrontSide,u),d===null)return null;_intersectionPointWorld.copy(u),_intersectionPointWorld.applyMatrix4(a.matrixWorld);const f=r.ray.origin.distanceTo(_intersectionPointWorld);return f<r.near||f>r.far?null:{distance:f,point:_intersectionPointWorld.clone(),object:a}}function checkGeometryIntersection(a,n,r,o,s,l,c,u,d,f){a.getVertexPosition(u,_vA$1),a.getVertexPosition(d,_vB$1),a.getVertexPosition(f,_vC$1);const v=checkIntersection$1(a,n,r,o,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(v){const g=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,g),s&&(v.uv=Triangle.getInterpolatedAttribute(s,u,d,f,g,new Vector2)),l&&(v.uv1=Triangle.getInterpolatedAttribute(l,u,d,f,g,new Vector2)),c&&(v.normal=Triangle.getInterpolatedAttribute(c,u,d,f,g,new Vector3),v.normal.dot(o.direction)>0&&v.normal.multiplyScalar(-1));const y={a:u,b:d,c:f,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,y.normal),v.face=y,v.barycoord=g}return v}class BoxGeometry extends BufferGeometry{constructor(n=1,r=1,o=1,s=1,l=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:r,depth:o,widthSegments:s,heightSegments:l,depthSegments:c};const u=this;s=Math.floor(s),l=Math.floor(l),c=Math.floor(c);const d=[],f=[],v=[],g=[];let y=0,_=0;S("z","y","x",-1,-1,o,r,n,c,l,0),S("z","y","x",1,-1,o,r,-n,c,l,1),S("x","z","y",1,1,n,o,r,s,c,2),S("x","z","y",1,-1,n,o,-r,s,c,3),S("x","y","z",1,-1,n,r,o,s,l,4),S("x","y","z",-1,-1,n,r,-o,s,l,5),this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(f,3)),this.setAttribute("normal",new Float32BufferAttribute(v,3)),this.setAttribute("uv",new Float32BufferAttribute(g,2));function S(x,T,w,E,P,D,L,$,O,B,V){const F=D/O,U=L/B,G=D/2,W=L/2,j=$/2,K=O+1,q=B+1;let ie=0,ee=0;const he=new Vector3;for(let pe=0;pe<q;pe++){const ce=pe*U-W;for(let ye=0;ye<K;ye++){const we=ye*F-G;he[x]=we*E,he[T]=ce*P,he[w]=j,f.push(he.x,he.y,he.z),he[x]=0,he[T]=0,he[w]=$>0?1:-1,v.push(he.x,he.y,he.z),g.push(ye/O),g.push(1-pe/B),ie+=1}}for(let pe=0;pe<B;pe++)for(let ce=0;ce<O;ce++){const ye=y+ce+K*pe,we=y+ce+K*(pe+1),ge=y+(ce+1)+K*(pe+1),Se=y+(ce+1)+K*pe;d.push(ye,we,Se),d.push(we,ge,Se),ee+=6}u.addGroup(_,ee,V),_+=ee,y+=ie}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new BoxGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function cloneUniforms(a){const n={};for(const r in a){n[r]={};for(const o in a[r]){const s=a[r][o];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[r][o]=null):n[r][o]=s.clone():Array.isArray(s)?n[r][o]=s.slice():n[r][o]=s}}return n}function mergeUniforms(a){const n={};for(let r=0;r<a.length;r++){const o=cloneUniforms(a[r]);for(const s in o)n[s]=o[s]}return n}function cloneUniformsGroups(a){const n=[];for(let r=0;r<a.length;r++)n.push(a[r].clone());return n}function getUnlitUniformColorSpace(a){const n=a.getRenderTarget();return n===null?a.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=cloneUniforms(n.uniforms),this.uniformsGroups=cloneUniformsGroups(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const r=super.toJSON(n);r.glslVersion=this.glslVersion,r.uniforms={};for(const s in this.uniforms){const c=this.uniforms[s].value;c&&c.isTexture?r.uniforms[s]={type:"t",value:c.toJSON(n).uuid}:c&&c.isColor?r.uniforms[s]={type:"c",value:c.getHex()}:c&&c.isVector2?r.uniforms[s]={type:"v2",value:c.toArray()}:c&&c.isVector3?r.uniforms[s]={type:"v3",value:c.toArray()}:c&&c.isVector4?r.uniforms[s]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?r.uniforms[s]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?r.uniforms[s]={type:"m4",value:c.toArray()}:r.uniforms[s]={value:c}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const o={};for(const s in this.extensions)this.extensions[s]===!0&&(o[s]=!0);return Object.keys(o).length>0&&(r.extensions=o),r}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(n,r){return super.copy(n,r),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,r){super.updateWorldMatrix(n,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(n=50,r=1,o=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=o,this.far=s,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,r){return super.copy(n,r),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const r=.5*this.getFilmHeight()/n;this.fov=RAD2DEG*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,r,o){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),o.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z)}getViewSize(n,r){return this.getViewBounds(n,_minTarget,_maxTarget),r.subVectors(_maxTarget,_minTarget)}setViewOffset(n,r,o,s,l,c){this.aspect=n/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=o,this.view.offsetY=s,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let r=n*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,o=2*r,s=this.aspect*o,l=-.5*s;const c=this.view;if(this.view!==null&&this.view.enabled){const d=c.fullWidth,f=c.fullHeight;l+=c.offsetX*s/d,r-=c.offsetY*o/f,s*=c.width/d,o*=c.height/f}const u=this.filmOffset;u!==0&&(l+=n*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+s,r,r-o,n,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const r=super.toJSON(n);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(n,r,o){super(),this.type="CubeCamera",this.renderTarget=o,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new PerspectiveCamera(fov,aspect,n,r);s.layers=this.layers,this.add(s);const l=new PerspectiveCamera(fov,aspect,n,r);l.layers=this.layers,this.add(l);const c=new PerspectiveCamera(fov,aspect,n,r);c.layers=this.layers,this.add(c);const u=new PerspectiveCamera(fov,aspect,n,r);u.layers=this.layers,this.add(u);const d=new PerspectiveCamera(fov,aspect,n,r);d.layers=this.layers,this.add(d);const f=new PerspectiveCamera(fov,aspect,n,r);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const n=this.coordinateSystem,r=this.children.concat(),[o,s,l,c,u,d]=r;for(const f of r)this.remove(f);if(n===WebGLCoordinateSystem)o.up.set(0,1,0),o.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(n===WebGPUCoordinateSystem)o.up.set(0,-1,0),o.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);for(const f of r)this.add(f),f.updateMatrixWorld()}update(n,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:o,activeMipmapLevel:s}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[l,c,u,d,f,v]=this.children,g=n.getRenderTarget(),y=n.getActiveCubeFace(),_=n.getActiveMipmapLevel(),S=n.xr.enabled;n.xr.enabled=!1;const x=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,n.setRenderTarget(o,0,s),n.render(r,l),n.setRenderTarget(o,1,s),n.render(r,c),n.setRenderTarget(o,2,s),n.render(r,u),n.setRenderTarget(o,3,s),n.render(r,d),n.setRenderTarget(o,4,s),n.render(r,f),o.texture.generateMipmaps=x,n.setRenderTarget(o,5,s),n.render(r,v),n.setRenderTarget(g,y,_),n.xr.enabled=S,o.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(n=[],r=CubeReflectionMapping,o,s,l,c,u,d,f,v){super(n,r,o,s,l,c,u,d,f,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(n=1,r={}){super(n,n,r),this.isWebGLCubeRenderTarget=!0;const o={width:n,height:n,depth:1},s=[o,o,o,o,o,o];this.texture=new CubeTexture(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:LinearFilter}fromEquirectangularTexture(n,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new BoxGeometry(5,5,5),l=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:BackSide,blending:NoBlending});l.uniforms.tEquirect.value=r;const c=new Mesh(s,l),u=r.minFilter;return r.minFilter===LinearMipmapLinearFilter&&(r.minFilter=LinearFilter),new CubeCamera(1,10,this).update(n,c),r.minFilter=u,c.geometry.dispose(),c.material.dispose(),this}clear(n,r=!0,o=!0,s=!0){const l=n.getRenderTarget();for(let c=0;c<6;c++)n.setRenderTarget(this,c),n.clear(r,o,s);n.setRenderTarget(l)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const r=this._hand;if(r)for(const o of n.hand.values())this._getHandJoint(r,o)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,r,o){let s=null,l=null,c=null;const u=this._targetRay,d=this._grip,f=this._hand;if(n&&r.session.visibilityState!=="visible-blurred"){if(f&&n.hand){c=!0;for(const x of n.hand.values()){const T=r.getJointPose(x,o),w=this._getHandJoint(f,x);T!==null&&(w.matrix.fromArray(T.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=T.radius),w.visible=T!==null}const v=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],y=v.position.distanceTo(g.position),_=.02,S=.005;f.inputState.pinching&&y>_+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!f.inputState.pinching&&y<=_-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else d!==null&&n.gripSpace&&(l=r.getPose(n.gripSpace,o),l!==null&&(d.matrix.fromArray(l.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,l.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(l.linearVelocity)):d.hasLinearVelocity=!1,l.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(l.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=r.getPose(n.targetRaySpace,o),s===null&&l!==null&&(s=l),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=l!==null),f!==null&&(f.visible=c!==null),this}_getHandJoint(n,r){if(n.joints[r.jointName]===void 0){const o=new Group;o.matrixAutoUpdate=!1,o.visible=!1,n.joints[r.jointName]=o,n.add(o)}return n.joints[r.jointName]}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,r){return super.copy(n,r),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const r=super.toJSON(n);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(n=new Vector3(1,0,0),r=0){this.isPlane=!0,this.normal=n,this.constant=r}set(n,r){return this.normal.copy(n),this.constant=r,this}setComponents(n,r,o,s){return this.normal.set(n,r,o),this.constant=s,this}setFromNormalAndCoplanarPoint(n,r){return this.normal.copy(n),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(n,r,o){const s=_vector1.subVectors(o,r).cross(_vector2.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,r){return r.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,r){const o=n.delta(_vector1),s=this.normal.dot(o);if(s===0)return this.distanceToPoint(n.start)===0?r.copy(n.start):null;const l=-(n.start.dot(this.normal)+this.constant)/s;return l<0||l>1?null:r.copy(n.start).addScaledVector(o,l)}intersectsLine(n){const r=this.distanceToPoint(n.start),o=this.distanceToPoint(n.end);return r<0&&o>0||o<0&&r>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,r){const o=r||_normalMatrix.getNormalMatrix(n),s=this.coplanarPoint(_vector1).applyMatrix4(n),l=this.normal.applyMatrix3(o).normalize();return this.constant=-s.dot(l),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_vector$6=new Vector3;class Frustum{constructor(n=new Plane,r=new Plane,o=new Plane,s=new Plane,l=new Plane,c=new Plane){this.planes=[n,r,o,s,l,c]}set(n,r,o,s,l,c){const u=this.planes;return u[0].copy(n),u[1].copy(r),u[2].copy(o),u[3].copy(s),u[4].copy(l),u[5].copy(c),this}copy(n){const r=this.planes;for(let o=0;o<6;o++)r[o].copy(n.planes[o]);return this}setFromProjectionMatrix(n,r=WebGLCoordinateSystem){const o=this.planes,s=n.elements,l=s[0],c=s[1],u=s[2],d=s[3],f=s[4],v=s[5],g=s[6],y=s[7],_=s[8],S=s[9],x=s[10],T=s[11],w=s[12],E=s[13],P=s[14],D=s[15];if(o[0].setComponents(d-l,y-f,T-_,D-w).normalize(),o[1].setComponents(d+l,y+f,T+_,D+w).normalize(),o[2].setComponents(d+c,y+v,T+S,D+E).normalize(),o[3].setComponents(d-c,y-v,T-S,D-E).normalize(),o[4].setComponents(d-u,y-g,T-x,D-P).normalize(),r===WebGLCoordinateSystem)o[5].setComponents(d+u,y+g,T+x,D+P).normalize();else if(r===WebGPUCoordinateSystem)o[5].setComponents(u,g,x,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$3.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const r=n.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),_sphere$3.copy(r.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(n){return _sphere$3.center.set(0,0,0),_sphere$3.radius=.7071067811865476,_sphere$3.applyMatrix4(n.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(n){const r=this.planes,o=n.center,s=-n.radius;for(let l=0;l<6;l++)if(r[l].distanceToPoint(o)<s)return!1;return!0}intersectsBox(n){const r=this.planes;for(let o=0;o<6;o++){const s=r[o];if(_vector$6.x=s.normal.x>0?n.max.x:n.min.x,_vector$6.y=s.normal.y>0?n.max.y:n.min.y,_vector$6.z=s.normal.z>0?n.max.z:n.min.z,s.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(n){const r=this.planes;for(let o=0;o<6;o++)if(r[o].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class LineBasicMaterial extends Material{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(n=new BufferGeometry,r=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,r){return super.copy(n,r),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const r=n.attributes.position,o=[0];for(let s=1,l=r.count;s<l;s++)_vStart.fromBufferAttribute(r,s-1),_vEnd.fromBufferAttribute(r,s),o[s]=o[s-1],o[s]+=_vStart.distanceTo(_vEnd);n.setAttribute("lineDistance",new Float32BufferAttribute(o,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,r){const o=this.geometry,s=this.matrixWorld,l=n.params.Line.threshold,c=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$1.copy(o.boundingSphere),_sphere$1.applyMatrix4(s),_sphere$1.radius+=l,n.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(s).invert(),_ray$1.copy(n.ray).applyMatrix4(_inverseMatrix$1);const u=l/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,f=this.isLineSegments?2:1,v=o.index,y=o.attributes.position;if(v!==null){const _=Math.max(0,c.start),S=Math.min(v.count,c.start+c.count);for(let x=_,T=S-1;x<T;x+=f){const w=v.getX(x),E=v.getX(x+1),P=checkIntersection(this,n,_ray$1,d,w,E,x);P&&r.push(P)}if(this.isLineLoop){const x=v.getX(S-1),T=v.getX(_),w=checkIntersection(this,n,_ray$1,d,x,T,S-1);w&&r.push(w)}}else{const _=Math.max(0,c.start),S=Math.min(y.count,c.start+c.count);for(let x=_,T=S-1;x<T;x+=f){const w=checkIntersection(this,n,_ray$1,d,x,x+1,x);w&&r.push(w)}if(this.isLineLoop){const x=checkIntersection(this,n,_ray$1,d,S-1,_,S-1);x&&r.push(x)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,o=Object.keys(r);if(o.length>0){const s=r[o[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=s.length;l<c;l++){const u=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=l}}}}}function checkIntersection(a,n,r,o,s,l,c){const u=a.geometry.attributes.position;if(_vStart.fromBufferAttribute(u,s),_vEnd.fromBufferAttribute(u,l),r.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>o)return;_intersectPointOnRay.applyMatrix4(a.matrixWorld);const f=n.ray.origin.distanceTo(_intersectPointOnRay);if(!(f<n.near||f>n.far))return{distance:f,point:_intersectPointOnSegment.clone().applyMatrix4(a.matrixWorld),index:c,face:null,faceIndex:null,barycoord:null,object:a}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(n,r){super(n,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const r=n.attributes.position,o=[];for(let s=0,l=r.count;s<l;s+=2)_start.fromBufferAttribute(r,s),_end.fromBufferAttribute(r,s+1),o[s]=s===0?0:o[s-1],o[s+1]=o[s]+_start.distanceTo(_end);n.setAttribute("lineDistance",new Float32BufferAttribute(o,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class DepthTexture extends Texture{constructor(n,r,o=UnsignedIntType,s,l,c,u=NearestFilter,d=NearestFilter,f,v=DepthFormat){if(v!==DepthFormat&&v!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,l,c,u,d,v,o,f),this.isDepthTexture=!0,this.image={width:n,height:r},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.source=new Source(Object.assign({},n.image)),this.compareFunction=n.compareFunction,this}toJSON(n){const r=super.toJSON(n);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class CylinderGeometry extends BufferGeometry{constructor(n=1,r=1,o=1,s=32,l=1,c=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:r,height:o,radialSegments:s,heightSegments:l,openEnded:c,thetaStart:u,thetaLength:d};const f=this;s=Math.floor(s),l=Math.floor(l);const v=[],g=[],y=[],_=[];let S=0;const x=[],T=o/2;let w=0;E(),c===!1&&(n>0&&P(!0),r>0&&P(!1)),this.setIndex(v),this.setAttribute("position",new Float32BufferAttribute(g,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(_,2));function E(){const D=new Vector3,L=new Vector3;let $=0;const O=(r-n)/o;for(let B=0;B<=l;B++){const V=[],F=B/l,U=F*(r-n)+n;for(let G=0;G<=s;G++){const W=G/s,j=W*d+u,K=Math.sin(j),q=Math.cos(j);L.x=U*K,L.y=-F*o+T,L.z=U*q,g.push(L.x,L.y,L.z),D.set(K,O,q).normalize(),y.push(D.x,D.y,D.z),_.push(W,1-F),V.push(S++)}x.push(V)}for(let B=0;B<s;B++)for(let V=0;V<l;V++){const F=x[V][B],U=x[V+1][B],G=x[V+1][B+1],W=x[V][B+1];(n>0||V!==0)&&(v.push(F,U,W),$+=3),(r>0||V!==l-1)&&(v.push(U,G,W),$+=3)}f.addGroup(w,$,0),w+=$}function P(D){const L=S,$=new Vector2,O=new Vector3;let B=0;const V=D===!0?n:r,F=D===!0?1:-1;for(let G=1;G<=s;G++)g.push(0,T*F,0),y.push(0,F,0),_.push(.5,.5),S++;const U=S;for(let G=0;G<=s;G++){const j=G/s*d+u,K=Math.cos(j),q=Math.sin(j);O.x=V*q,O.y=T*F,O.z=V*K,g.push(O.x,O.y,O.z),y.push(0,F,0),$.x=K*.5+.5,$.y=q*.5*F+.5,_.push($.x,$.y),S++}for(let G=0;G<s;G++){const W=L+G,j=U+G;D===!0?v.push(j,j+1,W):v.push(j+1,j,W),B+=3}f.addGroup(w,B,D===!0?1:2),w+=B}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class PlaneGeometry extends BufferGeometry{constructor(n=1,r=1,o=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:r,widthSegments:o,heightSegments:s};const l=n/2,c=r/2,u=Math.floor(o),d=Math.floor(s),f=u+1,v=d+1,g=n/u,y=r/d,_=[],S=[],x=[],T=[];for(let w=0;w<v;w++){const E=w*y-c;for(let P=0;P<f;P++){const D=P*g-l;S.push(D,-E,0),x.push(0,0,1),T.push(P/u),T.push(1-w/d)}}for(let w=0;w<d;w++)for(let E=0;E<u;E++){const P=E+f*w,D=E+f*(w+1),L=E+1+f*(w+1),$=E+1+f*w;_.push(P,D,$),_.push(D,L,$)}this.setIndex(_),this.setAttribute("position",new Float32BufferAttribute(S,3)),this.setAttribute("normal",new Float32BufferAttribute(x,3)),this.setAttribute("uv",new Float32BufferAttribute(T,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments)}}class MeshPhongMaterial extends Material{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshDepthMaterial extends Material{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}class Light extends Object3D{constructor(n,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(n),this.intensity=r}dispose(){}copy(n,r){return super.copy(n,r),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const r=super.toJSON(n);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(n){this.camera=n,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const r=this.camera,o=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(n.matrixWorld),r.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(n.target.matrixWorld),r.lookAt(_lookTarget$1),r.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(_projScreenMatrix$1)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.intensity=n.intensity,this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.intensity!==1&&(n.intensity=this.intensity),this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class OrthographicCamera extends Camera{constructor(n=-1,r=1,o=1,s=-1,l=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=r,this.top=o,this.bottom=s,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(n,r){return super.copy(n,r),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,r,o,s,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=o,this.view.offsetY=s,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let l=o-n,c=o+n,u=s+r,d=s-r;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=f*this.view.offsetX,c=l+f*this.view.width,u-=v*this.view.offsetY,d=u-v*this.view.height}this.projectionMatrix.makeOrthographic(l,c,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const r=super.toJSON(n);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(n,r){super(n,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}class AmbientLight extends Light{constructor(n,r){super(n,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class ArrayCamera extends PerspectiveCamera{constructor(n=[]){super(),this.isArrayCamera=!0,this.cameras=n,this.index=0}}class Spherical{constructor(n=1,r=0,o=0){this.radius=n,this.phi=r,this.theta=o}set(n,r,o){return this.radius=n,this.phi=r,this.theta=o,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=clamp(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,r,o){return this.radius=Math.sqrt(n*n+r*r+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,o),this.phi=Math.acos(clamp(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(n=new Vector3(0,0,1),r=new Vector3(0,0,0),o=1,s=16776960,l=o*.2,c=l*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(r),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(o,l,c)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(n.z,0,-n.x).normalize();const r=Math.acos(n.y);this.quaternion.setFromAxisAngle(_axis,r)}}setLength(n,r=n*.2,o=r*.2){this.line.scale.set(1,Math.max(1e-4,n-r),1),this.line.updateMatrix(),this.cone.scale.set(o,r,o),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(n=1){const r=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new BufferGeometry;s.setAttribute("position",new Float32BufferAttribute(r,3)),s.setAttribute("color",new Float32BufferAttribute(o,3));const l=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(s,l),this.type="AxesHelper"}setColors(n,r,o){const s=new Color,l=this.geometry.attributes.color.array;return s.set(n),s.toArray(l,0),s.toArray(l,3),s.set(r),s.toArray(l,6),s.toArray(l,9),s.set(o),s.toArray(l,12),s.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Controls extends EventDispatcher{constructor(n,r=null){super(),this.object=n,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(n){if(n===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=n}disconnect(){}dispose(){}update(){}}function getByteLength(a,n,r,o){const s=getTextureTypeByteLength(o);switch(r){case AlphaFormat:return a*n;case LuminanceFormat:return a*n;case LuminanceAlphaFormat:return a*n*2;case RedFormat:return a*n/s.components*s.byteLength;case RedIntegerFormat:return a*n/s.components*s.byteLength;case RGFormat:return a*n*2/s.components*s.byteLength;case RGIntegerFormat:return a*n*2/s.components*s.byteLength;case RGBFormat:return a*n*3/s.components*s.byteLength;case RGBAFormat:return a*n*4/s.components*s.byteLength;case RGBAIntegerFormat:return a*n*4/s.components*s.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((a+3)/4)*Math.floor((n+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((a+3)/4)*Math.floor((n+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(a,16)*Math.max(n,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(a,8)*Math.max(n,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((a+3)/4)*Math.floor((n+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((a+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((a+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((a+4)/5)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((a+4)/5)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((a+5)/6)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((a+5)/6)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((a+7)/8)*Math.floor((n+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((a+7)/8)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((a+7)/8)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((a+9)/10)*Math.floor((n+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((a+9)/10)*Math.floor((n+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((a+9)/10)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((a+9)/10)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((a+11)/12)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((a+11)/12)*Math.floor((n+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(a/4)*Math.ceil(n/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(a/4)*Math.ceil(n/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(a/4)*Math.ceil(n/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function getTextureTypeByteLength(a){switch(a){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${a}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let a=null,n=!1,r=null,o=null;function s(l,c){r(l,c),o=a.requestAnimationFrame(s)}return{start:function(){n!==!0&&r!==null&&(o=a.requestAnimationFrame(s),n=!0)},stop:function(){a.cancelAnimationFrame(o),n=!1},setAnimationLoop:function(l){r=l},setContext:function(l){a=l}}}function WebGLAttributes(a){const n=new WeakMap;function r(u,d){const f=u.array,v=u.usage,g=f.byteLength,y=a.createBuffer();a.bindBuffer(d,y),a.bufferData(d,f,v),u.onUploadCallback();let _;if(f instanceof Float32Array)_=a.FLOAT;else if(f instanceof Uint16Array)u.isFloat16BufferAttribute?_=a.HALF_FLOAT:_=a.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=a.SHORT;else if(f instanceof Uint32Array)_=a.UNSIGNED_INT;else if(f instanceof Int32Array)_=a.INT;else if(f instanceof Int8Array)_=a.BYTE;else if(f instanceof Uint8Array)_=a.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:g}}function o(u,d,f){const v=d.array,g=d.updateRanges;if(a.bindBuffer(f,u),g.length===0)a.bufferSubData(f,0,v);else{g.sort((_,S)=>_.start-S.start);let y=0;for(let _=1;_<g.length;_++){const S=g[y],x=g[_];x.start<=S.start+S.count+1?S.count=Math.max(S.count,x.start+x.count-S.start):(++y,g[y]=x)}g.length=y+1;for(let _=0,S=g.length;_<S;_++){const x=g[_];a.bufferSubData(f,x.start*v.BYTES_PER_ELEMENT,v,x.start,x.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function l(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=n.get(u);d&&(a.deleteBuffer(d.buffer),n.delete(u))}function c(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const v=n.get(u);(!v||v.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const f=n.get(u);if(f===void 0)n.set(u,r(u,d));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(f.buffer,u,d),f.version=u.version}}return{get:s,remove:l,update:c}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(a,n,r,o,s,l,c){const u=new Color(0);let d=l===!0?0:1,f,v,g=null,y=0,_=null;function S(P){let D=P.isScene===!0?P.background:null;return D&&D.isTexture&&(D=(P.backgroundBlurriness>0?r:n).get(D)),D}function x(P){let D=!1;const L=S(P);L===null?w(u,d):L&&L.isColor&&(w(L,1),D=!0);const $=a.xr.getEnvironmentBlendMode();$==="additive"?o.buffers.color.setClear(0,0,0,1,c):$==="alpha-blend"&&o.buffers.color.setClear(0,0,0,0,c),(a.autoClear||D)&&(o.buffers.depth.setTest(!0),o.buffers.depth.setMask(!0),o.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))}function T(P,D){const L=S(D);L&&(L.isCubeTexture||L.mapping===CubeUVReflectionMapping)?(v===void 0&&(v=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function($,O,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(v)),_e1$1.copy(D.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),v.material.uniforms.envMap.value=L,v.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),v.material.toneMapped=ColorManagement.getTransfer(L.colorSpace)!==SRGBTransfer,(g!==L||y!==L.version||_!==a.toneMapping)&&(v.material.needsUpdate=!0,g=L,y=L.version,_=a.toneMapping),v.layers.enableAll(),P.unshift(v,v.geometry,v.material,0,0,null)):L&&L.isTexture&&(f===void 0&&(f=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=L,f.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,f.material.toneMapped=ColorManagement.getTransfer(L.colorSpace)!==SRGBTransfer,L.matrixAutoUpdate===!0&&L.updateMatrix(),f.material.uniforms.uvTransform.value.copy(L.matrix),(g!==L||y!==L.version||_!==a.toneMapping)&&(f.material.needsUpdate=!0,g=L,y=L.version,_=a.toneMapping),f.layers.enableAll(),P.unshift(f,f.geometry,f.material,0,0,null))}function w(P,D){P.getRGB(_rgb,getUnlitUniformColorSpace(a)),o.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,D,c)}function E(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return u},setClearColor:function(P,D=1){u.set(P),d=D,w(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(P){d=P,w(u,d)},render:x,addToRenderList:T,dispose:E}}function WebGLBindingStates(a,n){const r=a.getParameter(a.MAX_VERTEX_ATTRIBS),o={},s=y(null);let l=s,c=!1;function u(F,U,G,W,j){let K=!1;const q=g(W,G,U);l!==q&&(l=q,f(l.object)),K=_(F,W,G,j),K&&S(F,W,G,j),j!==null&&n.update(j,a.ELEMENT_ARRAY_BUFFER),(K||c)&&(c=!1,D(F,U,G,W),j!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n.get(j).buffer))}function d(){return a.createVertexArray()}function f(F){return a.bindVertexArray(F)}function v(F){return a.deleteVertexArray(F)}function g(F,U,G){const W=G.wireframe===!0;let j=o[F.id];j===void 0&&(j={},o[F.id]=j);let K=j[U.id];K===void 0&&(K={},j[U.id]=K);let q=K[W];return q===void 0&&(q=y(d()),K[W]=q),q}function y(F){const U=[],G=[],W=[];for(let j=0;j<r;j++)U[j]=0,G[j]=0,W[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:G,attributeDivisors:W,object:F,attributes:{},index:null}}function _(F,U,G,W){const j=l.attributes,K=U.attributes;let q=0;const ie=G.getAttributes();for(const ee in ie)if(ie[ee].location>=0){const pe=j[ee];let ce=K[ee];if(ce===void 0&&(ee==="instanceMatrix"&&F.instanceMatrix&&(ce=F.instanceMatrix),ee==="instanceColor"&&F.instanceColor&&(ce=F.instanceColor)),pe===void 0||pe.attribute!==ce||ce&&pe.data!==ce.data)return!0;q++}return l.attributesNum!==q||l.index!==W}function S(F,U,G,W){const j={},K=U.attributes;let q=0;const ie=G.getAttributes();for(const ee in ie)if(ie[ee].location>=0){let pe=K[ee];pe===void 0&&(ee==="instanceMatrix"&&F.instanceMatrix&&(pe=F.instanceMatrix),ee==="instanceColor"&&F.instanceColor&&(pe=F.instanceColor));const ce={};ce.attribute=pe,pe&&pe.data&&(ce.data=pe.data),j[ee]=ce,q++}l.attributes=j,l.attributesNum=q,l.index=W}function x(){const F=l.newAttributes;for(let U=0,G=F.length;U<G;U++)F[U]=0}function T(F){w(F,0)}function w(F,U){const G=l.newAttributes,W=l.enabledAttributes,j=l.attributeDivisors;G[F]=1,W[F]===0&&(a.enableVertexAttribArray(F),W[F]=1),j[F]!==U&&(a.vertexAttribDivisor(F,U),j[F]=U)}function E(){const F=l.newAttributes,U=l.enabledAttributes;for(let G=0,W=U.length;G<W;G++)U[G]!==F[G]&&(a.disableVertexAttribArray(G),U[G]=0)}function P(F,U,G,W,j,K,q){q===!0?a.vertexAttribIPointer(F,U,G,j,K):a.vertexAttribPointer(F,U,G,W,j,K)}function D(F,U,G,W){x();const j=W.attributes,K=G.getAttributes(),q=U.defaultAttributeValues;for(const ie in K){const ee=K[ie];if(ee.location>=0){let he=j[ie];if(he===void 0&&(ie==="instanceMatrix"&&F.instanceMatrix&&(he=F.instanceMatrix),ie==="instanceColor"&&F.instanceColor&&(he=F.instanceColor)),he!==void 0){const pe=he.normalized,ce=he.itemSize,ye=n.get(he);if(ye===void 0)continue;const we=ye.buffer,ge=ye.type,Se=ye.bytesPerElement,$e=ge===a.INT||ge===a.UNSIGNED_INT||he.gpuType===IntType;if(he.isInterleavedBufferAttribute){const oe=he.data,me=oe.stride,_e=he.offset;if(oe.isInstancedInterleavedBuffer){for(let Te=0;Te<ee.locationSize;Te++)w(ee.location+Te,oe.meshPerAttribute);F.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Te=0;Te<ee.locationSize;Te++)T(ee.location+Te);a.bindBuffer(a.ARRAY_BUFFER,we);for(let Te=0;Te<ee.locationSize;Te++)P(ee.location+Te,ce/ee.locationSize,ge,pe,me*Se,(_e+ce/ee.locationSize*Te)*Se,$e)}else{if(he.isInstancedBufferAttribute){for(let oe=0;oe<ee.locationSize;oe++)w(ee.location+oe,he.meshPerAttribute);F.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let oe=0;oe<ee.locationSize;oe++)T(ee.location+oe);a.bindBuffer(a.ARRAY_BUFFER,we);for(let oe=0;oe<ee.locationSize;oe++)P(ee.location+oe,ce/ee.locationSize,ge,pe,ce*Se,ce/ee.locationSize*oe*Se,$e)}}else if(q!==void 0){const pe=q[ie];if(pe!==void 0)switch(pe.length){case 2:a.vertexAttrib2fv(ee.location,pe);break;case 3:a.vertexAttrib3fv(ee.location,pe);break;case 4:a.vertexAttrib4fv(ee.location,pe);break;default:a.vertexAttrib1fv(ee.location,pe)}}}}E()}function L(){B();for(const F in o){const U=o[F];for(const G in U){const W=U[G];for(const j in W)v(W[j].object),delete W[j];delete U[G]}delete o[F]}}function $(F){if(o[F.id]===void 0)return;const U=o[F.id];for(const G in U){const W=U[G];for(const j in W)v(W[j].object),delete W[j];delete U[G]}delete o[F.id]}function O(F){for(const U in o){const G=o[U];if(G[F.id]===void 0)continue;const W=G[F.id];for(const j in W)v(W[j].object),delete W[j];delete G[F.id]}}function B(){V(),c=!0,l!==s&&(l=s,f(l.object))}function V(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:B,resetDefaultState:V,dispose:L,releaseStatesOfGeometry:$,releaseStatesOfProgram:O,initAttributes:x,enableAttribute:T,disableUnusedAttributes:E}}function WebGLBufferRenderer(a,n,r){let o;function s(f){o=f}function l(f,v){a.drawArrays(o,f,v),r.update(v,o,1)}function c(f,v,g){g!==0&&(a.drawArraysInstanced(o,f,v,g),r.update(v,o,g))}function u(f,v,g){if(g===0)return;n.get("WEBGL_multi_draw").multiDrawArraysWEBGL(o,f,0,v,0,g);let _=0;for(let S=0;S<g;S++)_+=v[S];r.update(_,o,1)}function d(f,v,g,y){if(g===0)return;const _=n.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<f.length;S++)c(f[S],v[S],y[S]);else{_.multiDrawArraysInstancedWEBGL(o,f,0,v,0,y,0,g);let S=0;for(let x=0;x<g;x++)S+=v[x]*y[x];r.update(S,o,1)}}this.setMode=s,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function WebGLCapabilities(a,n,r,o){let s;function l(){if(s!==void 0)return s;if(n.has("EXT_texture_filter_anisotropic")===!0){const O=n.get("EXT_texture_filter_anisotropic");s=a.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function c(O){return!(O!==RGBAFormat&&o.convert(O)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(O){const B=O===HalfFloatType&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(O!==UnsignedByteType&&o.convert(O)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==FloatType&&!B)}function d(O){if(O==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=r.precision!==void 0?r.precision:"highp";const v=d(f);v!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",v,"instead."),f=v);const g=r.logarithmicDepthBuffer===!0,y=r.reverseDepthBuffer===!0&&n.has("EXT_clip_control"),_=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),S=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=a.getParameter(a.MAX_TEXTURE_SIZE),T=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),w=a.getParameter(a.MAX_VERTEX_ATTRIBS),E=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),P=a.getParameter(a.MAX_VARYING_VECTORS),D=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),L=S>0,$=a.getParameter(a.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:d,textureFormatReadable:c,textureTypeReadable:u,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:_,maxVertexTextures:S,maxTextureSize:x,maxCubemapSize:T,maxAttributes:w,maxVertexUniforms:E,maxVaryings:P,maxFragmentUniforms:D,vertexTextures:L,maxSamples:$}}function WebGLClipping(a){const n=this;let r=null,o=0,s=!1,l=!1;const c=new Plane,u=new Matrix3,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const _=g.length!==0||y||o!==0||s;return s=y,o=g.length,_},this.beginShadows=function(){l=!0,v(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(g,y){r=v(g,y,0)},this.setState=function(g,y,_){const S=g.clippingPlanes,x=g.clipIntersection,T=g.clipShadows,w=a.get(g);if(!s||S===null||S.length===0||l&&!T)l?v(null):f();else{const E=l?0:o,P=E*4;let D=w.clippingState||null;d.value=D,D=v(S,y,P,_);for(let L=0;L!==P;++L)D[L]=r[L];w.clippingState=D,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=E}};function f(){d.value!==r&&(d.value=r,d.needsUpdate=o>0),n.numPlanes=o,n.numIntersection=0}function v(g,y,_,S){const x=g!==null?g.length:0;let T=null;if(x!==0){if(T=d.value,S!==!0||T===null){const w=_+x*4,E=y.matrixWorldInverse;u.getNormalMatrix(E),(T===null||T.length<w)&&(T=new Float32Array(w));for(let P=0,D=_;P!==x;++P,D+=4)c.copy(g[P]).applyMatrix4(E,u),c.normal.toArray(T,D),T[D+3]=c.constant}d.value=T,d.needsUpdate=!0}return n.numPlanes=x,n.numIntersection=0,T}}function WebGLCubeMaps(a){let n=new WeakMap;function r(c,u){return u===EquirectangularReflectionMapping?c.mapping=CubeReflectionMapping:u===EquirectangularRefractionMapping&&(c.mapping=CubeRefractionMapping),c}function o(c){if(c&&c.isTexture){const u=c.mapping;if(u===EquirectangularReflectionMapping||u===EquirectangularRefractionMapping)if(n.has(c)){const d=n.get(c).texture;return r(d,c.mapping)}else{const d=c.image;if(d&&d.height>0){const f=new WebGLCubeRenderTarget(d.height);return f.fromEquirectangularTexture(a,c),n.set(c,f),c.addEventListener("dispose",s),r(f.texture,c.mapping)}else return null}}return c}function s(c){const u=c.target;u.removeEventListener("dispose",s);const d=n.get(u);d!==void 0&&(n.delete(u),d.dispose())}function l(){n=new WeakMap}return{get:o,dispose:l}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)],_origin=new Vector3;class PMREMGenerator{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(n,r=0,o=.1,s=100,l={}){const{size:c=256,position:u=_origin}=l;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(c);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(n,o,s,d,u),r>0&&this._blur(d,0,0,r),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(n,r=null){return this._fromTexture(n,r)}fromCubemap(n,r=null){return this._fromTexture(n,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodPlanes.length;n++)this._lodPlanes[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,n.scissorTest=!1,_setViewport(n,0,0,n.width,n.height)}_fromTexture(n,r){n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const o=r||this._allocateTargets();return this._textureToCubeUV(n,o),this._applyPMREM(o),this._cleanup(o),o}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,o={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},s=_createRenderTarget(n,r,o);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(n,r,o);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(l)),this._blurMaterial=_getBlurShader(l,n,r)}return s}_compileMaterial(n){const r=new Mesh(this._lodPlanes[0],n);this._renderer.compile(r,_flatCamera)}_sceneToCubeUV(n,r,o,s,l){const d=new PerspectiveCamera(90,1,r,o),f=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor(_clearColor),g.toneMapping=NoToneMapping,g.autoClear=!1;const S=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),x=new Mesh(new BoxGeometry,S);let T=!1;const w=n.background;w?w.isColor&&(S.color.copy(w),n.background=null,T=!0):(S.color.copy(_clearColor),T=!0);for(let E=0;E<6;E++){const P=E%3;P===0?(d.up.set(0,f[E],0),d.position.set(l.x,l.y,l.z),d.lookAt(l.x+v[E],l.y,l.z)):P===1?(d.up.set(0,0,f[E]),d.position.set(l.x,l.y,l.z),d.lookAt(l.x,l.y+v[E],l.z)):(d.up.set(0,f[E],0),d.position.set(l.x,l.y,l.z),d.lookAt(l.x,l.y,l.z+v[E]));const D=this._cubeSize;_setViewport(s,P*D,E>2?D:0,D,D),g.setRenderTarget(s),T&&g.render(x,d),g.render(n,d)}x.geometry.dispose(),x.material.dispose(),g.toneMapping=_,g.autoClear=y,n.background=w}_textureToCubeUV(n,r){const o=this._renderer,s=n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const l=s?this._cubemapMaterial:this._equirectMaterial,c=new Mesh(this._lodPlanes[0],l),u=l.uniforms;u.envMap.value=n;const d=this._cubeSize;_setViewport(r,0,0,3*d,2*d),o.setRenderTarget(r),o.render(c,_flatCamera)}_applyPMREM(n){const r=this._renderer,o=r.autoClear;r.autoClear=!1;const s=this._lodPlanes.length;for(let l=1;l<s;l++){const c=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),u=_axisDirections[(s-l-1)%_axisDirections.length];this._blur(n,l-1,l,c,u)}r.autoClear=o}_blur(n,r,o,s,l){const c=this._pingPongRenderTarget;this._halfBlur(n,c,r,o,s,"latitudinal",l),this._halfBlur(c,n,o,o,s,"longitudinal",l)}_halfBlur(n,r,o,s,l,c,u){const d=this._renderer,f=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,g=new Mesh(this._lodPlanes[s],f),y=f.uniforms,_=this._sizeLods[o]-1,S=isFinite(l)?Math.PI/(2*_):2*Math.PI/(2*MAX_SAMPLES-1),x=l/S,T=isFinite(l)?1+Math.floor(v*x):MAX_SAMPLES;T>MAX_SAMPLES&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${MAX_SAMPLES}`);const w=[];let E=0;for(let O=0;O<MAX_SAMPLES;++O){const B=O/x,V=Math.exp(-B*B/2);w.push(V),O===0?E+=V:O<T&&(E+=2*V)}for(let O=0;O<w.length;O++)w[O]=w[O]/E;y.envMap.value=n.texture,y.samples.value=T,y.weights.value=w,y.latitudinal.value=c==="latitudinal",u&&(y.poleAxis.value=u);const{_lodMax:P}=this;y.dTheta.value=S,y.mipInt.value=P-o;const D=this._sizeLods[s],L=3*D*(s>P-LOD_MIN?s-P+LOD_MIN:0),$=4*(this._cubeSize-D);_setViewport(r,L,$,3*D,2*D),d.setRenderTarget(r),d.render(g,_flatCamera)}}function _createPlanes(a){const n=[],r=[],o=[];let s=a;const l=a-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let c=0;c<l;c++){const u=Math.pow(2,s);r.push(u);let d=1/u;c>a-LOD_MIN?d=EXTRA_LOD_SIGMA[c-a+LOD_MIN-1]:c===0&&(d=0),o.push(d);const f=1/(u-2),v=-f,g=1+f,y=[v,v,g,v,g,g,v,v,g,g,v,g],_=6,S=6,x=3,T=2,w=1,E=new Float32Array(x*S*_),P=new Float32Array(T*S*_),D=new Float32Array(w*S*_);for(let $=0;$<_;$++){const O=$%3*2/3-1,B=$>2?0:-1,V=[O,B,0,O+2/3,B,0,O+2/3,B+1,0,O,B,0,O+2/3,B+1,0,O,B+1,0];E.set(V,x*S*$),P.set(y,T*S*$);const F=[$,$,$,$,$,$];D.set(F,w*S*$)}const L=new BufferGeometry;L.setAttribute("position",new BufferAttribute(E,x)),L.setAttribute("uv",new BufferAttribute(P,T)),L.setAttribute("faceIndex",new BufferAttribute(D,w)),n.push(L),s>LOD_MIN&&s--}return{lodPlanes:n,sizeLods:r,sigmas:o}}function _createRenderTarget(a,n,r){const o=new WebGLRenderTarget(a,n,r);return o.texture.mapping=CubeUVReflectionMapping,o.texture.name="PMREM.cubeUv",o.scissorTest=!0,o}function _setViewport(a,n,r,o,s){a.viewport.set(n,r,o,s),a.scissor.set(n,r,o,s)}function _getBlurShader(a,n,r){const o=new Float32Array(MAX_SAMPLES),s=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(a){let n=new WeakMap,r=null;function o(u){if(u&&u.isTexture){const d=u.mapping,f=d===EquirectangularReflectionMapping||d===EquirectangularRefractionMapping,v=d===CubeReflectionMapping||d===CubeRefractionMapping;if(f||v){let g=n.get(u);const y=g!==void 0?g.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==y)return r===null&&(r=new PMREMGenerator(a)),g=f?r.fromEquirectangular(u,g):r.fromCubemap(u,g),g.texture.pmremVersion=u.pmremVersion,n.set(u,g),g.texture;if(g!==void 0)return g.texture;{const _=u.image;return f&&_&&_.height>0||v&&_&&s(_)?(r===null&&(r=new PMREMGenerator(a)),g=f?r.fromEquirectangular(u):r.fromCubemap(u),g.texture.pmremVersion=u.pmremVersion,n.set(u,g),u.addEventListener("dispose",l),g.texture):null}}}return u}function s(u){let d=0;const f=6;for(let v=0;v<f;v++)u[v]!==void 0&&d++;return d===f}function l(u){const d=u.target;d.removeEventListener("dispose",l);const f=n.get(d);f!==void 0&&(n.delete(d),f.dispose())}function c(){n=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:o,dispose:c}}function WebGLExtensions(a){const n={};function r(o){if(n[o]!==void 0)return n[o];let s;switch(o){case"WEBGL_depth_texture":s=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=a.getExtension(o)}return n[o]=s,s}return{has:function(o){return r(o)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(o){const s=r(o);return s===null&&warnOnce("THREE.WebGLRenderer: "+o+" extension not supported."),s}}}function WebGLGeometries(a,n,r,o){const s={},l=new WeakMap;function c(g){const y=g.target;y.index!==null&&n.remove(y.index);for(const S in y.attributes)n.remove(y.attributes[S]);y.removeEventListener("dispose",c),delete s[y.id];const _=l.get(y);_&&(n.remove(_),l.delete(y)),o.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,r.memory.geometries--}function u(g,y){return s[y.id]===!0||(y.addEventListener("dispose",c),s[y.id]=!0,r.memory.geometries++),y}function d(g){const y=g.attributes;for(const _ in y)n.update(y[_],a.ARRAY_BUFFER)}function f(g){const y=[],_=g.index,S=g.attributes.position;let x=0;if(_!==null){const E=_.array;x=_.version;for(let P=0,D=E.length;P<D;P+=3){const L=E[P+0],$=E[P+1],O=E[P+2];y.push(L,$,$,O,O,L)}}else if(S!==void 0){const E=S.array;x=S.version;for(let P=0,D=E.length/3-1;P<D;P+=3){const L=P+0,$=P+1,O=P+2;y.push(L,$,$,O,O,L)}}else return;const T=new(arrayNeedsUint32(y)?Uint32BufferAttribute:Uint16BufferAttribute)(y,1);T.version=x;const w=l.get(g);w&&n.remove(w),l.set(g,T)}function v(g){const y=l.get(g);if(y){const _=g.index;_!==null&&y.version<_.version&&f(g)}else f(g);return l.get(g)}return{get:u,update:d,getWireframeAttribute:v}}function WebGLIndexedBufferRenderer(a,n,r){let o;function s(y){o=y}let l,c;function u(y){l=y.type,c=y.bytesPerElement}function d(y,_){a.drawElements(o,_,l,y*c),r.update(_,o,1)}function f(y,_,S){S!==0&&(a.drawElementsInstanced(o,_,l,y*c,S),r.update(_,o,S))}function v(y,_,S){if(S===0)return;n.get("WEBGL_multi_draw").multiDrawElementsWEBGL(o,_,0,l,y,0,S);let T=0;for(let w=0;w<S;w++)T+=_[w];r.update(T,o,1)}function g(y,_,S,x){if(S===0)return;const T=n.get("WEBGL_multi_draw");if(T===null)for(let w=0;w<y.length;w++)f(y[w]/c,_[w],x[w]);else{T.multiDrawElementsInstancedWEBGL(o,_,0,l,y,0,x,0,S);let w=0;for(let E=0;E<S;E++)w+=_[E]*x[E];r.update(w,o,1)}}this.setMode=s,this.setIndex=u,this.render=d,this.renderInstances=f,this.renderMultiDraw=v,this.renderMultiDrawInstances=g}function WebGLInfo(a){const n={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function o(l,c,u){switch(r.calls++,c){case a.TRIANGLES:r.triangles+=u*(l/3);break;case a.LINES:r.lines+=u*(l/2);break;case a.LINE_STRIP:r.lines+=u*(l-1);break;case a.LINE_LOOP:r.lines+=u*l;break;case a.POINTS:r.points+=u*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function s(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:n,render:r,programs:null,autoReset:!0,reset:s,update:o}}function WebGLMorphtargets(a,n,r){const o=new WeakMap,s=new Vector4;function l(c,u,d){const f=c.morphTargetInfluences,v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=v!==void 0?v.length:0;let y=o.get(u);if(y===void 0||y.count!==g){let F=function(){B.dispose(),o.delete(u),u.removeEventListener("dispose",F)};var _=F;y!==void 0&&y.texture.dispose();const S=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,T=u.morphAttributes.color!==void 0,w=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let D=0;S===!0&&(D=1),x===!0&&(D=2),T===!0&&(D=3);let L=u.attributes.position.count*D,$=1;L>n.maxTextureSize&&($=Math.ceil(L/n.maxTextureSize),L=n.maxTextureSize);const O=new Float32Array(L*$*4*g),B=new DataArrayTexture(O,L,$,g);B.type=FloatType,B.needsUpdate=!0;const V=D*4;for(let U=0;U<g;U++){const G=w[U],W=E[U],j=P[U],K=L*$*4*U;for(let q=0;q<G.count;q++){const ie=q*V;S===!0&&(s.fromBufferAttribute(G,q),O[K+ie+0]=s.x,O[K+ie+1]=s.y,O[K+ie+2]=s.z,O[K+ie+3]=0),x===!0&&(s.fromBufferAttribute(W,q),O[K+ie+4]=s.x,O[K+ie+5]=s.y,O[K+ie+6]=s.z,O[K+ie+7]=0),T===!0&&(s.fromBufferAttribute(j,q),O[K+ie+8]=s.x,O[K+ie+9]=s.y,O[K+ie+10]=s.z,O[K+ie+11]=j.itemSize===4?s.w:1)}}y={count:g,texture:B,size:new Vector2(L,$)},o.set(u,y),u.addEventListener("dispose",F)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)d.getUniforms().setValue(a,"morphTexture",c.morphTexture,r);else{let S=0;for(let T=0;T<f.length;T++)S+=f[T];const x=u.morphTargetsRelative?1:1-S;d.getUniforms().setValue(a,"morphTargetBaseInfluence",x),d.getUniforms().setValue(a,"morphTargetInfluences",f)}d.getUniforms().setValue(a,"morphTargetsTexture",y.texture,r),d.getUniforms().setValue(a,"morphTargetsTextureSize",y.size)}return{update:l}}function WebGLObjects(a,n,r,o){let s=new WeakMap;function l(d){const f=o.render.frame,v=d.geometry,g=n.get(d,v);if(s.get(g)!==f&&(n.update(g),s.set(g,f)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),s.get(d)!==f&&(r.update(d.instanceMatrix,a.ARRAY_BUFFER),d.instanceColor!==null&&r.update(d.instanceColor,a.ARRAY_BUFFER),s.set(d,f))),d.isSkinnedMesh){const y=d.skeleton;s.get(y)!==f&&(y.update(),s.set(y,f))}return g}function c(){s=new WeakMap}function u(d){const f=d.target;f.removeEventListener("dispose",u),r.remove(f.instanceMatrix),f.instanceColor!==null&&r.remove(f.instanceColor)}return{update:l,dispose:c}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(a,n,r){const o=a[0];if(o<=0||o>0)return a;const s=n*r;let l=arrayCacheF32[s];if(l===void 0&&(l=new Float32Array(s),arrayCacheF32[s]=l),n!==0){o.toArray(l,0);for(let c=1,u=0;c!==n;++c)u+=r,a[c].toArray(l,u)}return l}function arraysEqual(a,n){if(a.length!==n.length)return!1;for(let r=0,o=a.length;r<o;r++)if(a[r]!==n[r])return!1;return!0}function copyArray(a,n){for(let r=0,o=n.length;r<o;r++)a[r]=n[r]}function allocTexUnits(a,n){let r=arrayCacheI32[n];r===void 0&&(r=new Int32Array(n),arrayCacheI32[n]=r);for(let o=0;o!==n;++o)r[o]=a.allocateTextureUnit();return r}function setValueV1f(a,n){const r=this.cache;r[0]!==n&&(a.uniform1f(this.addr,n),r[0]=n)}function setValueV2f(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y)&&(a.uniform2f(this.addr,n.x,n.y),r[0]=n.x,r[1]=n.y);else{if(arraysEqual(r,n))return;a.uniform2fv(this.addr,n),copyArray(r,n)}}function setValueV3f(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z)&&(a.uniform3f(this.addr,n.x,n.y,n.z),r[0]=n.x,r[1]=n.y,r[2]=n.z);else if(n.r!==void 0)(r[0]!==n.r||r[1]!==n.g||r[2]!==n.b)&&(a.uniform3f(this.addr,n.r,n.g,n.b),r[0]=n.r,r[1]=n.g,r[2]=n.b);else{if(arraysEqual(r,n))return;a.uniform3fv(this.addr,n),copyArray(r,n)}}function setValueV4f(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z||r[3]!==n.w)&&(a.uniform4f(this.addr,n.x,n.y,n.z,n.w),r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=n.w);else{if(arraysEqual(r,n))return;a.uniform4fv(this.addr,n),copyArray(r,n)}}function setValueM2(a,n){const r=this.cache,o=n.elements;if(o===void 0){if(arraysEqual(r,n))return;a.uniformMatrix2fv(this.addr,!1,n),copyArray(r,n)}else{if(arraysEqual(r,o))return;mat2array.set(o),a.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(r,o)}}function setValueM3(a,n){const r=this.cache,o=n.elements;if(o===void 0){if(arraysEqual(r,n))return;a.uniformMatrix3fv(this.addr,!1,n),copyArray(r,n)}else{if(arraysEqual(r,o))return;mat3array.set(o),a.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(r,o)}}function setValueM4(a,n){const r=this.cache,o=n.elements;if(o===void 0){if(arraysEqual(r,n))return;a.uniformMatrix4fv(this.addr,!1,n),copyArray(r,n)}else{if(arraysEqual(r,o))return;mat4array.set(o),a.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(r,o)}}function setValueV1i(a,n){const r=this.cache;r[0]!==n&&(a.uniform1i(this.addr,n),r[0]=n)}function setValueV2i(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y)&&(a.uniform2i(this.addr,n.x,n.y),r[0]=n.x,r[1]=n.y);else{if(arraysEqual(r,n))return;a.uniform2iv(this.addr,n),copyArray(r,n)}}function setValueV3i(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z)&&(a.uniform3i(this.addr,n.x,n.y,n.z),r[0]=n.x,r[1]=n.y,r[2]=n.z);else{if(arraysEqual(r,n))return;a.uniform3iv(this.addr,n),copyArray(r,n)}}function setValueV4i(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z||r[3]!==n.w)&&(a.uniform4i(this.addr,n.x,n.y,n.z,n.w),r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=n.w);else{if(arraysEqual(r,n))return;a.uniform4iv(this.addr,n),copyArray(r,n)}}function setValueV1ui(a,n){const r=this.cache;r[0]!==n&&(a.uniform1ui(this.addr,n),r[0]=n)}function setValueV2ui(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y)&&(a.uniform2ui(this.addr,n.x,n.y),r[0]=n.x,r[1]=n.y);else{if(arraysEqual(r,n))return;a.uniform2uiv(this.addr,n),copyArray(r,n)}}function setValueV3ui(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z)&&(a.uniform3ui(this.addr,n.x,n.y,n.z),r[0]=n.x,r[1]=n.y,r[2]=n.z);else{if(arraysEqual(r,n))return;a.uniform3uiv(this.addr,n),copyArray(r,n)}}function setValueV4ui(a,n){const r=this.cache;if(n.x!==void 0)(r[0]!==n.x||r[1]!==n.y||r[2]!==n.z||r[3]!==n.w)&&(a.uniform4ui(this.addr,n.x,n.y,n.z,n.w),r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=n.w);else{if(arraysEqual(r,n))return;a.uniform4uiv(this.addr,n),copyArray(r,n)}}function setValueT1(a,n,r){const o=this.cache,s=r.allocateTextureUnit();o[0]!==s&&(a.uniform1i(this.addr,s),o[0]=s);let l;this.type===a.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,l=emptyShadowTexture):l=emptyTexture,r.setTexture2D(n||l,s)}function setValueT3D1(a,n,r){const o=this.cache,s=r.allocateTextureUnit();o[0]!==s&&(a.uniform1i(this.addr,s),o[0]=s),r.setTexture3D(n||empty3dTexture,s)}function setValueT6(a,n,r){const o=this.cache,s=r.allocateTextureUnit();o[0]!==s&&(a.uniform1i(this.addr,s),o[0]=s),r.setTextureCube(n||emptyCubeTexture,s)}function setValueT2DArray1(a,n,r){const o=this.cache,s=r.allocateTextureUnit();o[0]!==s&&(a.uniform1i(this.addr,s),o[0]=s),r.setTexture2DArray(n||emptyArrayTexture,s)}function getSingularSetter(a){switch(a){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(a,n){a.uniform1fv(this.addr,n)}function setValueV2fArray(a,n){const r=flatten(n,this.size,2);a.uniform2fv(this.addr,r)}function setValueV3fArray(a,n){const r=flatten(n,this.size,3);a.uniform3fv(this.addr,r)}function setValueV4fArray(a,n){const r=flatten(n,this.size,4);a.uniform4fv(this.addr,r)}function setValueM2Array(a,n){const r=flatten(n,this.size,4);a.uniformMatrix2fv(this.addr,!1,r)}function setValueM3Array(a,n){const r=flatten(n,this.size,9);a.uniformMatrix3fv(this.addr,!1,r)}function setValueM4Array(a,n){const r=flatten(n,this.size,16);a.uniformMatrix4fv(this.addr,!1,r)}function setValueV1iArray(a,n){a.uniform1iv(this.addr,n)}function setValueV2iArray(a,n){a.uniform2iv(this.addr,n)}function setValueV3iArray(a,n){a.uniform3iv(this.addr,n)}function setValueV4iArray(a,n){a.uniform4iv(this.addr,n)}function setValueV1uiArray(a,n){a.uniform1uiv(this.addr,n)}function setValueV2uiArray(a,n){a.uniform2uiv(this.addr,n)}function setValueV3uiArray(a,n){a.uniform3uiv(this.addr,n)}function setValueV4uiArray(a,n){a.uniform4uiv(this.addr,n)}function setValueT1Array(a,n,r){const o=this.cache,s=n.length,l=allocTexUnits(r,s);arraysEqual(o,l)||(a.uniform1iv(this.addr,l),copyArray(o,l));for(let c=0;c!==s;++c)r.setTexture2D(n[c]||emptyTexture,l[c])}function setValueT3DArray(a,n,r){const o=this.cache,s=n.length,l=allocTexUnits(r,s);arraysEqual(o,l)||(a.uniform1iv(this.addr,l),copyArray(o,l));for(let c=0;c!==s;++c)r.setTexture3D(n[c]||empty3dTexture,l[c])}function setValueT6Array(a,n,r){const o=this.cache,s=n.length,l=allocTexUnits(r,s);arraysEqual(o,l)||(a.uniform1iv(this.addr,l),copyArray(o,l));for(let c=0;c!==s;++c)r.setTextureCube(n[c]||emptyCubeTexture,l[c])}function setValueT2DArrayArray(a,n,r){const o=this.cache,s=n.length,l=allocTexUnits(r,s);arraysEqual(o,l)||(a.uniform1iv(this.addr,l),copyArray(o,l));for(let c=0;c!==s;++c)r.setTexture2DArray(n[c]||emptyArrayTexture,l[c])}function getPureArraySetter(a){switch(a){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(n,r,o){this.id=n,this.addr=o,this.cache=[],this.type=r.type,this.setValue=getSingularSetter(r.type)}}class PureArrayUniform{constructor(n,r,o){this.id=n,this.addr=o,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=getPureArraySetter(r.type)}}class StructuredUniform{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,r,o){const s=this.seq;for(let l=0,c=s.length;l!==c;++l){const u=s[l];u.setValue(n,r[u.id],o)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(a,n){a.seq.push(n),a.map[n.id]=n}function parseUniform(a,n,r){const o=a.name,s=o.length;for(RePathPart.lastIndex=0;;){const l=RePathPart.exec(o),c=RePathPart.lastIndex;let u=l[1];const d=l[2]==="]",f=l[3];if(d&&(u=u|0),f===void 0||f==="["&&c+2===s){addUniform(r,f===void 0?new SingleUniform(u,a,n):new PureArrayUniform(u,a,n));break}else{let g=r.map[u];g===void 0&&(g=new StructuredUniform(u),addUniform(r,g)),r=g}}}class WebGLUniforms{constructor(n,r){this.seq=[],this.map={};const o=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);for(let s=0;s<o;++s){const l=n.getActiveUniform(r,s),c=n.getUniformLocation(r,l.name);parseUniform(l,c,this)}}setValue(n,r,o,s){const l=this.map[r];l!==void 0&&l.setValue(n,o,s)}setOptional(n,r,o){const s=r[o];s!==void 0&&this.setValue(n,o,s)}static upload(n,r,o,s){for(let l=0,c=r.length;l!==c;++l){const u=r[l],d=o[u.id];d.needsUpdate!==!1&&u.setValue(n,d.value,s)}}static seqWithValue(n,r){const o=[];for(let s=0,l=n.length;s!==l;++s){const c=n[s];c.id in r&&o.push(c)}return o}}function WebGLShader(a,n,r){const o=a.createShader(n);return a.shaderSource(o,r),a.compileShader(o),o}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(a,n){const r=a.split(`
`),o=[],s=Math.max(n-6,0),l=Math.min(n+6,r.length);for(let c=s;c<l;c++){const u=c+1;o.push(`${u===n?">":" "} ${u}: ${r[c]}`)}return o.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(a){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,a);const n=`mat3( ${_m0.elements.map(r=>r.toFixed(4))} )`;switch(ColorManagement.getTransfer(a)){case LinearTransfer:return[n,"LinearTransferOETF"];case SRGBTransfer:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",a),[n,"LinearTransferOETF"]}}function getShaderErrors(a,n,r){const o=a.getShaderParameter(n,a.COMPILE_STATUS),s=a.getShaderInfoLog(n).trim();if(o&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const c=parseInt(l[1]);return r.toUpperCase()+`

`+s+`

`+handleSource(a.getShaderSource(n),c)}else return s}function getTexelEncodingFunction(a,n){const r=getEncodingComponents(n);return[`vec4 ${a}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(a,n){let r;switch(n){case LinearToneMapping:r="Linear";break;case ReinhardToneMapping:r="Reinhard";break;case CineonToneMapping:r="Cineon";break;case ACESFilmicToneMapping:r="ACESFilmic";break;case AgXToneMapping:r="AgX";break;case NeutralToneMapping:r="Neutral";break;case CustomToneMapping:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),r="Linear"}return"vec3 "+a+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const a=_v0.x.toFixed(4),n=_v0.y.toFixed(4),r=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${a}, ${n}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(a){return[a.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",a.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(a){const n=[];for(const r in a){const o=a[r];o!==!1&&n.push("#define "+r+" "+o)}return n.join(`
`)}function fetchAttributeLocations(a,n){const r={},o=a.getProgramParameter(n,a.ACTIVE_ATTRIBUTES);for(let s=0;s<o;s++){const l=a.getActiveAttrib(n,s),c=l.name;let u=1;l.type===a.FLOAT_MAT2&&(u=2),l.type===a.FLOAT_MAT3&&(u=3),l.type===a.FLOAT_MAT4&&(u=4),r[c]={type:l.type,location:a.getAttribLocation(n,c),locationSize:u}}return r}function filterEmptyLine(a){return a!==""}function replaceLightNums(a,n){const r=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function replaceClippingPlaneNums(a,n){return a.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(a){return a.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(a,n){let r=ShaderChunk[n];if(r===void 0){const o=shaderChunkMap.get(n);if(o!==void 0)r=ShaderChunk[o],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,o);else throw new Error("Can not resolve #include <"+n+">")}return resolveIncludes(r)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(a){return a.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(a,n,r,o){let s="";for(let l=parseInt(n);l<parseInt(r);l++)s+=o.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return s}function generatePrecision(a){let n=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return a.precision==="highp"?n+=`
#define HIGH_PRECISION`:a.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function generateShadowMapTypeDefine(a){let n="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===PCFShadowMap?n="SHADOWMAP_TYPE_PCF":a.shadowMapType===PCFSoftShadowMap?n="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===VSMShadowMap&&(n="SHADOWMAP_TYPE_VSM"),n}function generateEnvMapTypeDefine(a){let n="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:n="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:n="ENVMAP_TYPE_CUBE_UV";break}return n}function generateEnvMapModeDefine(a){let n="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case CubeRefractionMapping:n="ENVMAP_MODE_REFRACTION";break}return n}function generateEnvMapBlendingDefine(a){let n="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case MultiplyOperation:n="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:n="ENVMAP_BLENDING_MIX";break;case AddOperation:n="ENVMAP_BLENDING_ADD";break}return n}function generateCubeUVSize(a){const n=a.envMapCubeUVHeight;if(n===null)return null;const r=Math.log2(n)-2,o=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:o,maxMip:r}}function WebGLProgram(a,n,r,o){const s=a.getContext(),l=r.defines;let c=r.vertexShader,u=r.fragmentShader;const d=generateShadowMapTypeDefine(r),f=generateEnvMapTypeDefine(r),v=generateEnvMapModeDefine(r),g=generateEnvMapBlendingDefine(r),y=generateCubeUVSize(r),_=generateVertexExtensions(r),S=generateDefines(l),x=s.createProgram();let T,w,E=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(T=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,S].filter(filterEmptyLine).join(`
`),T.length>0&&(T+=`
`),w=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,S].filter(filterEmptyLine).join(`
`),w.length>0&&(w+=`
`)):(T=[generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,S,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+v:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),w=[generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,S,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.envMap?"#define "+v:"",r.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",r.outputColorSpace),getLuminanceFunction(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),c=resolveIncludes(c),c=replaceLightNums(c,r),c=replaceClippingPlaneNums(c,r),u=resolveIncludes(u),u=replaceLightNums(u,r),u=replaceClippingPlaneNums(u,r),c=unrollLoops(c),u=unrollLoops(u),r.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,w=["#define varying in",r.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const P=E+T+c,D=E+w+u,L=WebGLShader(s,s.VERTEX_SHADER,P),$=WebGLShader(s,s.FRAGMENT_SHADER,D);s.attachShader(x,L),s.attachShader(x,$),r.index0AttributeName!==void 0?s.bindAttribLocation(x,0,r.index0AttributeName):r.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);function O(U){if(a.debug.checkShaderErrors){const G=s.getProgramInfoLog(x).trim(),W=s.getShaderInfoLog(L).trim(),j=s.getShaderInfoLog($).trim();let K=!0,q=!0;if(s.getProgramParameter(x,s.LINK_STATUS)===!1)if(K=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(s,x,L,$);else{const ie=getShaderErrors(s,L,"vertex"),ee=getShaderErrors(s,$,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,s.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+G+`
`+ie+`
`+ee)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(W===""||j==="")&&(q=!1);q&&(U.diagnostics={runnable:K,programLog:G,vertexShader:{log:W,prefix:T},fragmentShader:{log:j,prefix:w}})}s.deleteShader(L),s.deleteShader($),B=new WebGLUniforms(s,x),V=fetchAttributeLocations(s,x)}let B;this.getUniforms=function(){return B===void 0&&O(this),B};let V;this.getAttributes=function(){return V===void 0&&O(this),V};let F=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=s.getProgramParameter(x,COMPLETION_STATUS_KHR)),F},this.destroy=function(){o.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=programIdCount++,this.cacheKey=n,this.usedTimes=1,this.program=x,this.vertexShader=L,this.fragmentShader=$,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const r=n.vertexShader,o=n.fragmentShader,s=this._getShaderStage(r),l=this._getShaderStage(o),c=this._getShaderCacheForMaterial(n);return c.has(s)===!1&&(c.add(s),s.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(n){const r=this.materialCache.get(n);for(const o of r)o.usedTimes--,o.usedTimes===0&&this.shaderCache.delete(o.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const r=this.materialCache;let o=r.get(n);return o===void 0&&(o=new Set,r.set(n,o)),o}_getShaderStage(n){const r=this.shaderCache;let o=r.get(n);return o===void 0&&(o=new WebGLShaderStage(n),r.set(n,o)),o}}class WebGLShaderStage{constructor(n){this.id=_id++,this.code=n,this.usedTimes=0}}function WebGLPrograms(a,n,r,o,s,l,c){const u=new Layers,d=new WebGLShaderCache,f=new Set,v=[],g=s.logarithmicDepthBuffer,y=s.vertexTextures;let _=s.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(V){return f.add(V),V===0?"uv":`uv${V}`}function T(V,F,U,G,W){const j=G.fog,K=W.geometry,q=V.isMeshStandardMaterial?G.environment:null,ie=(V.isMeshStandardMaterial?r:n).get(V.envMap||q),ee=ie&&ie.mapping===CubeUVReflectionMapping?ie.image.height:null,he=S[V.type];V.precision!==null&&(_=s.getMaxPrecision(V.precision),_!==V.precision&&console.warn("THREE.WebGLProgram.getParameters:",V.precision,"not supported, using",_,"instead."));const pe=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ce=pe!==void 0?pe.length:0;let ye=0;K.morphAttributes.position!==void 0&&(ye=1),K.morphAttributes.normal!==void 0&&(ye=2),K.morphAttributes.color!==void 0&&(ye=3);let we,ge,Se,$e;if(he){const it=ShaderLib[he];we=it.vertexShader,ge=it.fragmentShader}else we=V.vertexShader,ge=V.fragmentShader,d.update(V),Se=d.getVertexShaderID(V),$e=d.getFragmentShaderID(V);const oe=a.getRenderTarget(),me=a.state.buffers.depth.getReversed(),_e=W.isInstancedMesh===!0,Te=W.isBatchedMesh===!0,Le=!!V.map,Ge=!!V.matcap,se=!!ie,J=!!V.aoMap,xe=!!V.lightMap,De=!!V.bumpMap,Ae=!!V.normalMap,Ie=!!V.displacementMap,ze=!!V.emissiveMap,Fe=!!V.metalnessMap,ae=!!V.roughnessMap,Q=V.anisotropy>0,be=V.clearcoat>0,Ee=V.dispersion>0,ke=V.iridescence>0,Ne=V.sheen>0,Je=V.transmission>0,qe=Q&&!!V.anisotropyMap,Ze=be&&!!V.clearcoatMap,Pt=be&&!!V.clearcoatNormalMap,je=be&&!!V.clearcoatRoughnessMap,ct=ke&&!!V.iridescenceMap,gt=ke&&!!V.iridescenceThicknessMap,St=Ne&&!!V.sheenColorMap,at=Ne&&!!V.sheenRoughnessMap,Ct=!!V.specularMap,bt=!!V.specularColorMap,Bt=!!V.specularIntensityMap,Ce=Je&&!!V.transmissionMap,ot=Je&&!!V.thicknessMap,He=!!V.gradientMap,Xe=!!V.alphaMap,ut=V.alphaTest>0,st=!!V.alphaHash,At=!!V.extensions;let Gt=NoToneMapping;V.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(Gt=a.toneMapping);const Ut={shaderID:he,shaderType:V.type,shaderName:V.name,vertexShader:we,fragmentShader:ge,defines:V.defines,customVertexShaderID:Se,customFragmentShaderID:$e,isRawShaderMaterial:V.isRawShaderMaterial===!0,glslVersion:V.glslVersion,precision:_,batching:Te,batchingColor:Te&&W._colorsTexture!==null,instancing:_e,instancingColor:_e&&W.instanceColor!==null,instancingMorph:_e&&W.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:oe===null?a.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!V.alphaToCoverage,map:Le,matcap:Ge,envMap:se,envMapMode:se&&ie.mapping,envMapCubeUVHeight:ee,aoMap:J,lightMap:xe,bumpMap:De,normalMap:Ae,displacementMap:y&&Ie,emissiveMap:ze,normalMapObjectSpace:Ae&&V.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Ae&&V.normalMapType===TangentSpaceNormalMap,metalnessMap:Fe,roughnessMap:ae,anisotropy:Q,anisotropyMap:qe,clearcoat:be,clearcoatMap:Ze,clearcoatNormalMap:Pt,clearcoatRoughnessMap:je,dispersion:Ee,iridescence:ke,iridescenceMap:ct,iridescenceThicknessMap:gt,sheen:Ne,sheenColorMap:St,sheenRoughnessMap:at,specularMap:Ct,specularColorMap:bt,specularIntensityMap:Bt,transmission:Je,transmissionMap:Ce,thicknessMap:ot,gradientMap:He,opaque:V.transparent===!1&&V.blending===NormalBlending&&V.alphaToCoverage===!1,alphaMap:Xe,alphaTest:ut,alphaHash:st,combine:V.combine,mapUv:Le&&x(V.map.channel),aoMapUv:J&&x(V.aoMap.channel),lightMapUv:xe&&x(V.lightMap.channel),bumpMapUv:De&&x(V.bumpMap.channel),normalMapUv:Ae&&x(V.normalMap.channel),displacementMapUv:Ie&&x(V.displacementMap.channel),emissiveMapUv:ze&&x(V.emissiveMap.channel),metalnessMapUv:Fe&&x(V.metalnessMap.channel),roughnessMapUv:ae&&x(V.roughnessMap.channel),anisotropyMapUv:qe&&x(V.anisotropyMap.channel),clearcoatMapUv:Ze&&x(V.clearcoatMap.channel),clearcoatNormalMapUv:Pt&&x(V.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&&x(V.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&x(V.iridescenceMap.channel),iridescenceThicknessMapUv:gt&&x(V.iridescenceThicknessMap.channel),sheenColorMapUv:St&&x(V.sheenColorMap.channel),sheenRoughnessMapUv:at&&x(V.sheenRoughnessMap.channel),specularMapUv:Ct&&x(V.specularMap.channel),specularColorMapUv:bt&&x(V.specularColorMap.channel),specularIntensityMapUv:Bt&&x(V.specularIntensityMap.channel),transmissionMapUv:Ce&&x(V.transmissionMap.channel),thicknessMapUv:ot&&x(V.thicknessMap.channel),alphaMapUv:Xe&&x(V.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(Ae||Q),vertexColors:V.vertexColors,vertexAlphas:V.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!K.attributes.uv&&(Le||Xe),fog:!!j,useFog:V.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:V.flatShading===!0,sizeAttenuation:V.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:me,skinning:W.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:ye,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:V.dithering,shadowMapEnabled:a.shadowMap.enabled&&U.length>0,shadowMapType:a.shadowMap.type,toneMapping:Gt,decodeVideoTexture:Le&&V.map.isVideoTexture===!0&&ColorManagement.getTransfer(V.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:ze&&V.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(V.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:V.premultipliedAlpha,doubleSided:V.side===DoubleSide,flipSided:V.side===BackSide,useDepthPacking:V.depthPacking>=0,depthPacking:V.depthPacking||0,index0AttributeName:V.index0AttributeName,extensionClipCullDistance:At&&V.extensions.clipCullDistance===!0&&o.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(At&&V.extensions.multiDraw===!0||Te)&&o.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:o.has("KHR_parallel_shader_compile"),customProgramCacheKey:V.customProgramCacheKey()};return Ut.vertexUv1s=f.has(1),Ut.vertexUv2s=f.has(2),Ut.vertexUv3s=f.has(3),f.clear(),Ut}function w(V){const F=[];if(V.shaderID?F.push(V.shaderID):(F.push(V.customVertexShaderID),F.push(V.customFragmentShaderID)),V.defines!==void 0)for(const U in V.defines)F.push(U),F.push(V.defines[U]);return V.isRawShaderMaterial===!1&&(E(F,V),P(F,V),F.push(a.outputColorSpace)),F.push(V.customProgramCacheKey),F.join()}function E(V,F){V.push(F.precision),V.push(F.outputColorSpace),V.push(F.envMapMode),V.push(F.envMapCubeUVHeight),V.push(F.mapUv),V.push(F.alphaMapUv),V.push(F.lightMapUv),V.push(F.aoMapUv),V.push(F.bumpMapUv),V.push(F.normalMapUv),V.push(F.displacementMapUv),V.push(F.emissiveMapUv),V.push(F.metalnessMapUv),V.push(F.roughnessMapUv),V.push(F.anisotropyMapUv),V.push(F.clearcoatMapUv),V.push(F.clearcoatNormalMapUv),V.push(F.clearcoatRoughnessMapUv),V.push(F.iridescenceMapUv),V.push(F.iridescenceThicknessMapUv),V.push(F.sheenColorMapUv),V.push(F.sheenRoughnessMapUv),V.push(F.specularMapUv),V.push(F.specularColorMapUv),V.push(F.specularIntensityMapUv),V.push(F.transmissionMapUv),V.push(F.thicknessMapUv),V.push(F.combine),V.push(F.fogExp2),V.push(F.sizeAttenuation),V.push(F.morphTargetsCount),V.push(F.morphAttributeCount),V.push(F.numDirLights),V.push(F.numPointLights),V.push(F.numSpotLights),V.push(F.numSpotLightMaps),V.push(F.numHemiLights),V.push(F.numRectAreaLights),V.push(F.numDirLightShadows),V.push(F.numPointLightShadows),V.push(F.numSpotLightShadows),V.push(F.numSpotLightShadowsWithMaps),V.push(F.numLightProbes),V.push(F.shadowMapType),V.push(F.toneMapping),V.push(F.numClippingPlanes),V.push(F.numClipIntersection),V.push(F.depthPacking)}function P(V,F){u.disableAll(),F.supportsVertexTextures&&u.enable(0),F.instancing&&u.enable(1),F.instancingColor&&u.enable(2),F.instancingMorph&&u.enable(3),F.matcap&&u.enable(4),F.envMap&&u.enable(5),F.normalMapObjectSpace&&u.enable(6),F.normalMapTangentSpace&&u.enable(7),F.clearcoat&&u.enable(8),F.iridescence&&u.enable(9),F.alphaTest&&u.enable(10),F.vertexColors&&u.enable(11),F.vertexAlphas&&u.enable(12),F.vertexUv1s&&u.enable(13),F.vertexUv2s&&u.enable(14),F.vertexUv3s&&u.enable(15),F.vertexTangents&&u.enable(16),F.anisotropy&&u.enable(17),F.alphaHash&&u.enable(18),F.batching&&u.enable(19),F.dispersion&&u.enable(20),F.batchingColor&&u.enable(21),V.push(u.mask),u.disableAll(),F.fog&&u.enable(0),F.useFog&&u.enable(1),F.flatShading&&u.enable(2),F.logarithmicDepthBuffer&&u.enable(3),F.reverseDepthBuffer&&u.enable(4),F.skinning&&u.enable(5),F.morphTargets&&u.enable(6),F.morphNormals&&u.enable(7),F.morphColors&&u.enable(8),F.premultipliedAlpha&&u.enable(9),F.shadowMapEnabled&&u.enable(10),F.doubleSided&&u.enable(11),F.flipSided&&u.enable(12),F.useDepthPacking&&u.enable(13),F.dithering&&u.enable(14),F.transmission&&u.enable(15),F.sheen&&u.enable(16),F.opaque&&u.enable(17),F.pointsUvs&&u.enable(18),F.decodeVideoTexture&&u.enable(19),F.decodeVideoTextureEmissive&&u.enable(20),F.alphaToCoverage&&u.enable(21),V.push(u.mask)}function D(V){const F=S[V.type];let U;if(F){const G=ShaderLib[F];U=UniformsUtils.clone(G.uniforms)}else U=V.uniforms;return U}function L(V,F){let U;for(let G=0,W=v.length;G<W;G++){const j=v[G];if(j.cacheKey===F){U=j,++U.usedTimes;break}}return U===void 0&&(U=new WebGLProgram(a,F,V,l),v.push(U)),U}function $(V){if(--V.usedTimes===0){const F=v.indexOf(V);v[F]=v[v.length-1],v.pop(),V.destroy()}}function O(V){d.remove(V)}function B(){d.dispose()}return{getParameters:T,getProgramCacheKey:w,getUniforms:D,acquireProgram:L,releaseProgram:$,releaseShaderCache:O,programs:v,dispose:B}}function WebGLProperties(){let a=new WeakMap;function n(c){return a.has(c)}function r(c){let u=a.get(c);return u===void 0&&(u={},a.set(c,u)),u}function o(c){a.delete(c)}function s(c,u,d){a.get(c)[u]=d}function l(){a=new WeakMap}return{has:n,get:r,remove:o,update:s,dispose:l}}function painterSortStable(a,n){return a.groupOrder!==n.groupOrder?a.groupOrder-n.groupOrder:a.renderOrder!==n.renderOrder?a.renderOrder-n.renderOrder:a.material.id!==n.material.id?a.material.id-n.material.id:a.z!==n.z?a.z-n.z:a.id-n.id}function reversePainterSortStable(a,n){return a.groupOrder!==n.groupOrder?a.groupOrder-n.groupOrder:a.renderOrder!==n.renderOrder?a.renderOrder-n.renderOrder:a.z!==n.z?n.z-a.z:a.id-n.id}function WebGLRenderList(){const a=[];let n=0;const r=[],o=[],s=[];function l(){n=0,r.length=0,o.length=0,s.length=0}function c(g,y,_,S,x,T){let w=a[n];return w===void 0?(w={id:g.id,object:g,geometry:y,material:_,groupOrder:S,renderOrder:g.renderOrder,z:x,group:T},a[n]=w):(w.id=g.id,w.object=g,w.geometry=y,w.material=_,w.groupOrder=S,w.renderOrder=g.renderOrder,w.z=x,w.group=T),n++,w}function u(g,y,_,S,x,T){const w=c(g,y,_,S,x,T);_.transmission>0?o.push(w):_.transparent===!0?s.push(w):r.push(w)}function d(g,y,_,S,x,T){const w=c(g,y,_,S,x,T);_.transmission>0?o.unshift(w):_.transparent===!0?s.unshift(w):r.unshift(w)}function f(g,y){r.length>1&&r.sort(g||painterSortStable),o.length>1&&o.sort(y||reversePainterSortStable),s.length>1&&s.sort(y||reversePainterSortStable)}function v(){for(let g=n,y=a.length;g<y;g++){const _=a[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:r,transmissive:o,transparent:s,init:l,push:u,unshift:d,finish:v,sort:f}}function WebGLRenderLists(){let a=new WeakMap;function n(o,s){const l=a.get(o);let c;return l===void 0?(c=new WebGLRenderList,a.set(o,[c])):s>=l.length?(c=new WebGLRenderList,l.push(c)):c=l[s],c}function r(){a=new WeakMap}return{get:n,dispose:r}}function UniformsCache(){const a={};return{get:function(n){if(a[n.id]!==void 0)return a[n.id];let r;switch(n.type){case"DirectionalLight":r={direction:new Vector3,color:new Color};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":r={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return a[n.id]=r,r}}}function ShadowUniformsCache(){const a={};return{get:function(n){if(a[n.id]!==void 0)return a[n.id];let r;switch(n.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[n.id]=r,r}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(a,n){return(n.castShadow?2:0)-(a.castShadow?2:0)+(n.map?1:0)-(a.map?1:0)}function WebGLLights(a){const n=new UniformsCache,r=ShadowUniformsCache(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)o.probe.push(new Vector3);const s=new Vector3,l=new Matrix4,c=new Matrix4;function u(f){let v=0,g=0,y=0;for(let V=0;V<9;V++)o.probe[V].set(0,0,0);let _=0,S=0,x=0,T=0,w=0,E=0,P=0,D=0,L=0,$=0,O=0;f.sort(shadowCastingAndTexturingLightsFirst);for(let V=0,F=f.length;V<F;V++){const U=f[V],G=U.color,W=U.intensity,j=U.distance,K=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)v+=G.r*W,g+=G.g*W,y+=G.b*W;else if(U.isLightProbe){for(let q=0;q<9;q++)o.probe[q].addScaledVector(U.sh.coefficients[q],W);O++}else if(U.isDirectionalLight){const q=n.get(U);if(q.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const ie=U.shadow,ee=r.get(U);ee.shadowIntensity=ie.intensity,ee.shadowBias=ie.bias,ee.shadowNormalBias=ie.normalBias,ee.shadowRadius=ie.radius,ee.shadowMapSize=ie.mapSize,o.directionalShadow[_]=ee,o.directionalShadowMap[_]=K,o.directionalShadowMatrix[_]=U.shadow.matrix,E++}o.directional[_]=q,_++}else if(U.isSpotLight){const q=n.get(U);q.position.setFromMatrixPosition(U.matrixWorld),q.color.copy(G).multiplyScalar(W),q.distance=j,q.coneCos=Math.cos(U.angle),q.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),q.decay=U.decay,o.spot[x]=q;const ie=U.shadow;if(U.map&&(o.spotLightMap[L]=U.map,L++,ie.updateMatrices(U),U.castShadow&&$++),o.spotLightMatrix[x]=ie.matrix,U.castShadow){const ee=r.get(U);ee.shadowIntensity=ie.intensity,ee.shadowBias=ie.bias,ee.shadowNormalBias=ie.normalBias,ee.shadowRadius=ie.radius,ee.shadowMapSize=ie.mapSize,o.spotShadow[x]=ee,o.spotShadowMap[x]=K,D++}x++}else if(U.isRectAreaLight){const q=n.get(U);q.color.copy(G).multiplyScalar(W),q.halfWidth.set(U.width*.5,0,0),q.halfHeight.set(0,U.height*.5,0),o.rectArea[T]=q,T++}else if(U.isPointLight){const q=n.get(U);if(q.color.copy(U.color).multiplyScalar(U.intensity),q.distance=U.distance,q.decay=U.decay,U.castShadow){const ie=U.shadow,ee=r.get(U);ee.shadowIntensity=ie.intensity,ee.shadowBias=ie.bias,ee.shadowNormalBias=ie.normalBias,ee.shadowRadius=ie.radius,ee.shadowMapSize=ie.mapSize,ee.shadowCameraNear=ie.camera.near,ee.shadowCameraFar=ie.camera.far,o.pointShadow[S]=ee,o.pointShadowMap[S]=K,o.pointShadowMatrix[S]=U.shadow.matrix,P++}o.point[S]=q,S++}else if(U.isHemisphereLight){const q=n.get(U);q.skyColor.copy(U.color).multiplyScalar(W),q.groundColor.copy(U.groundColor).multiplyScalar(W),o.hemi[w]=q,w++}}T>0&&(a.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,o.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(o.rectAreaLTC1=UniformsLib.LTC_HALF_1,o.rectAreaLTC2=UniformsLib.LTC_HALF_2)),o.ambient[0]=v,o.ambient[1]=g,o.ambient[2]=y;const B=o.hash;(B.directionalLength!==_||B.pointLength!==S||B.spotLength!==x||B.rectAreaLength!==T||B.hemiLength!==w||B.numDirectionalShadows!==E||B.numPointShadows!==P||B.numSpotShadows!==D||B.numSpotMaps!==L||B.numLightProbes!==O)&&(o.directional.length=_,o.spot.length=x,o.rectArea.length=T,o.point.length=S,o.hemi.length=w,o.directionalShadow.length=E,o.directionalShadowMap.length=E,o.pointShadow.length=P,o.pointShadowMap.length=P,o.spotShadow.length=D,o.spotShadowMap.length=D,o.directionalShadowMatrix.length=E,o.pointShadowMatrix.length=P,o.spotLightMatrix.length=D+L-$,o.spotLightMap.length=L,o.numSpotLightShadowsWithMaps=$,o.numLightProbes=O,B.directionalLength=_,B.pointLength=S,B.spotLength=x,B.rectAreaLength=T,B.hemiLength=w,B.numDirectionalShadows=E,B.numPointShadows=P,B.numSpotShadows=D,B.numSpotMaps=L,B.numLightProbes=O,o.version=nextVersion++)}function d(f,v){let g=0,y=0,_=0,S=0,x=0;const T=v.matrixWorldInverse;for(let w=0,E=f.length;w<E;w++){const P=f[w];if(P.isDirectionalLight){const D=o.directional[g];D.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),g++}else if(P.isSpotLight){const D=o.spot[_];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),_++}else if(P.isRectAreaLight){const D=o.rectArea[S];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(T),c.identity(),l.copy(P.matrixWorld),l.premultiply(T),c.extractRotation(l),D.halfWidth.set(P.width*.5,0,0),D.halfHeight.set(0,P.height*.5,0),D.halfWidth.applyMatrix4(c),D.halfHeight.applyMatrix4(c),S++}else if(P.isPointLight){const D=o.point[y];D.position.setFromMatrixPosition(P.matrixWorld),D.position.applyMatrix4(T),y++}else if(P.isHemisphereLight){const D=o.hemi[x];D.direction.setFromMatrixPosition(P.matrixWorld),D.direction.transformDirection(T),x++}}}return{setup:u,setupView:d,state:o}}function WebGLRenderState(a){const n=new WebGLLights(a),r=[],o=[];function s(v){f.camera=v,r.length=0,o.length=0}function l(v){r.push(v)}function c(v){o.push(v)}function u(){n.setup(r)}function d(v){n.setupView(r,v)}const f={lightsArray:r,shadowsArray:o,camera:null,lights:n,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:u,setupLightsView:d,pushLight:l,pushShadow:c}}function WebGLRenderStates(a){let n=new WeakMap;function r(s,l=0){const c=n.get(s);let u;return c===void 0?(u=new WebGLRenderState(a),n.set(s,[u])):l>=c.length?(u=new WebGLRenderState(a),c.push(u)):u=c[l],u}function o(){n=new WeakMap}return{get:r,dispose:o}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(a,n,r){let o=new Frustum;const s=new Vector2,l=new Vector2,c=new Vector4,u=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),d=new MeshDistanceMaterial,f={},v=r.maxTextureSize,g={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},y=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const S=new BufferGeometry;S.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Mesh(S,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let w=this.type;this.render=function($,O,B){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||$.length===0)return;const V=a.getRenderTarget(),F=a.getActiveCubeFace(),U=a.getActiveMipmapLevel(),G=a.state;G.setBlending(NoBlending),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const W=w!==VSMShadowMap&&this.type===VSMShadowMap,j=w===VSMShadowMap&&this.type!==VSMShadowMap;for(let K=0,q=$.length;K<q;K++){const ie=$[K],ee=ie.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;s.copy(ee.mapSize);const he=ee.getFrameExtents();if(s.multiply(he),l.copy(ee.mapSize),(s.x>v||s.y>v)&&(s.x>v&&(l.x=Math.floor(v/he.x),s.x=l.x*he.x,ee.mapSize.x=l.x),s.y>v&&(l.y=Math.floor(v/he.y),s.y=l.y*he.y,ee.mapSize.y=l.y)),ee.map===null||W===!0||j===!0){const ce=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};ee.map!==null&&ee.map.dispose(),ee.map=new WebGLRenderTarget(s.x,s.y,ce),ee.map.texture.name=ie.name+".shadowMap",ee.camera.updateProjectionMatrix()}a.setRenderTarget(ee.map),a.clear();const pe=ee.getViewportCount();for(let ce=0;ce<pe;ce++){const ye=ee.getViewport(ce);c.set(l.x*ye.x,l.y*ye.y,l.x*ye.z,l.y*ye.w),G.viewport(c),ee.updateMatrices(ie,ce),o=ee.getFrustum(),D(O,B,ee.camera,ie,this.type)}ee.isPointLightShadow!==!0&&this.type===VSMShadowMap&&E(ee,B),ee.needsUpdate=!1}w=this.type,T.needsUpdate=!1,a.setRenderTarget(V,F,U)};function E($,O){const B=n.update(x);y.defines.VSM_SAMPLES!==$.blurSamples&&(y.defines.VSM_SAMPLES=$.blurSamples,_.defines.VSM_SAMPLES=$.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),$.mapPass===null&&($.mapPass=new WebGLRenderTarget(s.x,s.y)),y.uniforms.shadow_pass.value=$.map.texture,y.uniforms.resolution.value=$.mapSize,y.uniforms.radius.value=$.radius,a.setRenderTarget($.mapPass),a.clear(),a.renderBufferDirect(O,null,B,y,x,null),_.uniforms.shadow_pass.value=$.mapPass.texture,_.uniforms.resolution.value=$.mapSize,_.uniforms.radius.value=$.radius,a.setRenderTarget($.map),a.clear(),a.renderBufferDirect(O,null,B,_,x,null)}function P($,O,B,V){let F=null;const U=B.isPointLight===!0?$.customDistanceMaterial:$.customDepthMaterial;if(U!==void 0)F=U;else if(F=B.isPointLight===!0?d:u,a.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){const G=F.uuid,W=O.uuid;let j=f[G];j===void 0&&(j={},f[G]=j);let K=j[W];K===void 0&&(K=F.clone(),j[W]=K,O.addEventListener("dispose",L)),F=K}if(F.visible=O.visible,F.wireframe=O.wireframe,V===VSMShadowMap?F.side=O.shadowSide!==null?O.shadowSide:O.side:F.side=O.shadowSide!==null?O.shadowSide:g[O.side],F.alphaMap=O.alphaMap,F.alphaTest=O.alphaTest,F.map=O.map,F.clipShadows=O.clipShadows,F.clippingPlanes=O.clippingPlanes,F.clipIntersection=O.clipIntersection,F.displacementMap=O.displacementMap,F.displacementScale=O.displacementScale,F.displacementBias=O.displacementBias,F.wireframeLinewidth=O.wireframeLinewidth,F.linewidth=O.linewidth,B.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const G=a.properties.get(F);G.light=B}return F}function D($,O,B,V,F){if($.visible===!1)return;if($.layers.test(O.layers)&&($.isMesh||$.isLine||$.isPoints)&&($.castShadow||$.receiveShadow&&F===VSMShadowMap)&&(!$.frustumCulled||o.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,$.matrixWorld);const W=n.update($),j=$.material;if(Array.isArray(j)){const K=W.groups;for(let q=0,ie=K.length;q<ie;q++){const ee=K[q],he=j[ee.materialIndex];if(he&&he.visible){const pe=P($,he,V,F);$.onBeforeShadow(a,$,O,B,W,pe,ee),a.renderBufferDirect(B,null,W,pe,$,ee),$.onAfterShadow(a,$,O,B,W,pe,ee)}}}else if(j.visible){const K=P($,j,V,F);$.onBeforeShadow(a,$,O,B,W,K,null),a.renderBufferDirect(B,null,W,K,$,null),$.onAfterShadow(a,$,O,B,W,K,null)}}const G=$.children;for(let W=0,j=G.length;W<j;W++)D(G[W],O,B,V,F)}function L($){$.target.removeEventListener("dispose",L);for(const B in f){const V=f[B],F=$.target.uuid;F in V&&(V[F].dispose(),delete V[F])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(a,n){function r(){let Ce=!1;const ot=new Vector4;let He=null;const Xe=new Vector4(0,0,0,0);return{setMask:function(ut){He!==ut&&!Ce&&(a.colorMask(ut,ut,ut,ut),He=ut)},setLocked:function(ut){Ce=ut},setClear:function(ut,st,At,Gt,Ut){Ut===!0&&(ut*=Gt,st*=Gt,At*=Gt),ot.set(ut,st,At,Gt),Xe.equals(ot)===!1&&(a.clearColor(ut,st,At,Gt),Xe.copy(ot))},reset:function(){Ce=!1,He=null,Xe.set(-1,0,0,0)}}}function o(){let Ce=!1,ot=!1,He=null,Xe=null,ut=null;return{setReversed:function(st){if(ot!==st){const At=n.get("EXT_clip_control");st?At.clipControlEXT(At.LOWER_LEFT_EXT,At.ZERO_TO_ONE_EXT):At.clipControlEXT(At.LOWER_LEFT_EXT,At.NEGATIVE_ONE_TO_ONE_EXT),ot=st;const Gt=ut;ut=null,this.setClear(Gt)}},getReversed:function(){return ot},setTest:function(st){st?oe(a.DEPTH_TEST):me(a.DEPTH_TEST)},setMask:function(st){He!==st&&!Ce&&(a.depthMask(st),He=st)},setFunc:function(st){if(ot&&(st=reversedFuncs[st]),Xe!==st){switch(st){case NeverDepth:a.depthFunc(a.NEVER);break;case AlwaysDepth:a.depthFunc(a.ALWAYS);break;case LessDepth:a.depthFunc(a.LESS);break;case LessEqualDepth:a.depthFunc(a.LEQUAL);break;case EqualDepth:a.depthFunc(a.EQUAL);break;case GreaterEqualDepth:a.depthFunc(a.GEQUAL);break;case GreaterDepth:a.depthFunc(a.GREATER);break;case NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Xe=st}},setLocked:function(st){Ce=st},setClear:function(st){ut!==st&&(ot&&(st=1-st),a.clearDepth(st),ut=st)},reset:function(){Ce=!1,He=null,Xe=null,ut=null,ot=!1}}}function s(){let Ce=!1,ot=null,He=null,Xe=null,ut=null,st=null,At=null,Gt=null,Ut=null;return{setTest:function(it){Ce||(it?oe(a.STENCIL_TEST):me(a.STENCIL_TEST))},setMask:function(it){ot!==it&&!Ce&&(a.stencilMask(it),ot=it)},setFunc:function(it,Jt,hn){(He!==it||Xe!==Jt||ut!==hn)&&(a.stencilFunc(it,Jt,hn),He=it,Xe=Jt,ut=hn)},setOp:function(it,Jt,hn){(st!==it||At!==Jt||Gt!==hn)&&(a.stencilOp(it,Jt,hn),st=it,At=Jt,Gt=hn)},setLocked:function(it){Ce=it},setClear:function(it){Ut!==it&&(a.clearStencil(it),Ut=it)},reset:function(){Ce=!1,ot=null,He=null,Xe=null,ut=null,st=null,At=null,Gt=null,Ut=null}}}const l=new r,c=new o,u=new s,d=new WeakMap,f=new WeakMap;let v={},g={},y=new WeakMap,_=[],S=null,x=!1,T=null,w=null,E=null,P=null,D=null,L=null,$=null,O=new Color(0,0,0),B=0,V=!1,F=null,U=null,G=null,W=null,j=null;const K=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,ie=0;const ee=a.getParameter(a.VERSION);ee.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(ee)[1]),q=ie>=1):ee.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),q=ie>=2);let he=null,pe={};const ce=a.getParameter(a.SCISSOR_BOX),ye=a.getParameter(a.VIEWPORT),we=new Vector4().fromArray(ce),ge=new Vector4().fromArray(ye);function Se(Ce,ot,He,Xe){const ut=new Uint8Array(4),st=a.createTexture();a.bindTexture(Ce,st),a.texParameteri(Ce,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(Ce,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let At=0;At<He;At++)Ce===a.TEXTURE_3D||Ce===a.TEXTURE_2D_ARRAY?a.texImage3D(ot,0,a.RGBA,1,1,Xe,0,a.RGBA,a.UNSIGNED_BYTE,ut):a.texImage2D(ot+At,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,ut);return st}const $e={};$e[a.TEXTURE_2D]=Se(a.TEXTURE_2D,a.TEXTURE_2D,1),$e[a.TEXTURE_CUBE_MAP]=Se(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),$e[a.TEXTURE_2D_ARRAY]=Se(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),$e[a.TEXTURE_3D]=Se(a.TEXTURE_3D,a.TEXTURE_3D,1,1),l.setClear(0,0,0,1),c.setClear(1),u.setClear(0),oe(a.DEPTH_TEST),c.setFunc(LessEqualDepth),De(!1),Ae(CullFaceBack),oe(a.CULL_FACE),J(NoBlending);function oe(Ce){v[Ce]!==!0&&(a.enable(Ce),v[Ce]=!0)}function me(Ce){v[Ce]!==!1&&(a.disable(Ce),v[Ce]=!1)}function _e(Ce,ot){return g[Ce]!==ot?(a.bindFramebuffer(Ce,ot),g[Ce]=ot,Ce===a.DRAW_FRAMEBUFFER&&(g[a.FRAMEBUFFER]=ot),Ce===a.FRAMEBUFFER&&(g[a.DRAW_FRAMEBUFFER]=ot),!0):!1}function Te(Ce,ot){let He=_,Xe=!1;if(Ce){He=y.get(ot),He===void 0&&(He=[],y.set(ot,He));const ut=Ce.textures;if(He.length!==ut.length||He[0]!==a.COLOR_ATTACHMENT0){for(let st=0,At=ut.length;st<At;st++)He[st]=a.COLOR_ATTACHMENT0+st;He.length=ut.length,Xe=!0}}else He[0]!==a.BACK&&(He[0]=a.BACK,Xe=!0);Xe&&a.drawBuffers(He)}function Le(Ce){return S!==Ce?(a.useProgram(Ce),S=Ce,!0):!1}const Ge={[AddEquation]:a.FUNC_ADD,[SubtractEquation]:a.FUNC_SUBTRACT,[ReverseSubtractEquation]:a.FUNC_REVERSE_SUBTRACT};Ge[MinEquation]=a.MIN,Ge[MaxEquation]=a.MAX;const se={[ZeroFactor]:a.ZERO,[OneFactor]:a.ONE,[SrcColorFactor]:a.SRC_COLOR,[SrcAlphaFactor]:a.SRC_ALPHA,[SrcAlphaSaturateFactor]:a.SRC_ALPHA_SATURATE,[DstColorFactor]:a.DST_COLOR,[DstAlphaFactor]:a.DST_ALPHA,[OneMinusSrcColorFactor]:a.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:a.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:a.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:a.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:a.CONSTANT_COLOR,[OneMinusConstantColorFactor]:a.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:a.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:a.ONE_MINUS_CONSTANT_ALPHA};function J(Ce,ot,He,Xe,ut,st,At,Gt,Ut,it){if(Ce===NoBlending){x===!0&&(me(a.BLEND),x=!1);return}if(x===!1&&(oe(a.BLEND),x=!0),Ce!==CustomBlending){if(Ce!==T||it!==V){if((w!==AddEquation||D!==AddEquation)&&(a.blendEquation(a.FUNC_ADD),w=AddEquation,D=AddEquation),it)switch(Ce){case NormalBlending:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:a.blendFunc(a.ONE,a.ONE);break;case SubtractiveBlending:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case MultiplyBlending:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case NormalBlending:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case SubtractiveBlending:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case MultiplyBlending:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}E=null,P=null,L=null,$=null,O.set(0,0,0),B=0,T=Ce,V=it}return}ut=ut||ot,st=st||He,At=At||Xe,(ot!==w||ut!==D)&&(a.blendEquationSeparate(Ge[ot],Ge[ut]),w=ot,D=ut),(He!==E||Xe!==P||st!==L||At!==$)&&(a.blendFuncSeparate(se[He],se[Xe],se[st],se[At]),E=He,P=Xe,L=st,$=At),(Gt.equals(O)===!1||Ut!==B)&&(a.blendColor(Gt.r,Gt.g,Gt.b,Ut),O.copy(Gt),B=Ut),T=Ce,V=!1}function xe(Ce,ot){Ce.side===DoubleSide?me(a.CULL_FACE):oe(a.CULL_FACE);let He=Ce.side===BackSide;ot&&(He=!He),De(He),Ce.blending===NormalBlending&&Ce.transparent===!1?J(NoBlending):J(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),c.setFunc(Ce.depthFunc),c.setTest(Ce.depthTest),c.setMask(Ce.depthWrite),l.setMask(Ce.colorWrite);const Xe=Ce.stencilWrite;u.setTest(Xe),Xe&&(u.setMask(Ce.stencilWriteMask),u.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),u.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),ze(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?oe(a.SAMPLE_ALPHA_TO_COVERAGE):me(a.SAMPLE_ALPHA_TO_COVERAGE)}function De(Ce){F!==Ce&&(Ce?a.frontFace(a.CW):a.frontFace(a.CCW),F=Ce)}function Ae(Ce){Ce!==CullFaceNone?(oe(a.CULL_FACE),Ce!==U&&(Ce===CullFaceBack?a.cullFace(a.BACK):Ce===CullFaceFront?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):me(a.CULL_FACE),U=Ce}function Ie(Ce){Ce!==G&&(q&&a.lineWidth(Ce),G=Ce)}function ze(Ce,ot,He){Ce?(oe(a.POLYGON_OFFSET_FILL),(W!==ot||j!==He)&&(a.polygonOffset(ot,He),W=ot,j=He)):me(a.POLYGON_OFFSET_FILL)}function Fe(Ce){Ce?oe(a.SCISSOR_TEST):me(a.SCISSOR_TEST)}function ae(Ce){Ce===void 0&&(Ce=a.TEXTURE0+K-1),he!==Ce&&(a.activeTexture(Ce),he=Ce)}function Q(Ce,ot,He){He===void 0&&(he===null?He=a.TEXTURE0+K-1:He=he);let Xe=pe[He];Xe===void 0&&(Xe={type:void 0,texture:void 0},pe[He]=Xe),(Xe.type!==Ce||Xe.texture!==ot)&&(he!==He&&(a.activeTexture(He),he=He),a.bindTexture(Ce,ot||$e[Ce]),Xe.type=Ce,Xe.texture=ot)}function be(){const Ce=pe[he];Ce!==void 0&&Ce.type!==void 0&&(a.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Ee(){try{a.compressedTexImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ke(){try{a.compressedTexImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ne(){try{a.texSubImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Je(){try{a.texSubImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function qe(){try{a.compressedTexSubImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ze(){try{a.compressedTexSubImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Pt(){try{a.texStorage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function je(){try{a.texStorage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ct(){try{a.texImage2D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function gt(){try{a.texImage3D(...arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function St(Ce){we.equals(Ce)===!1&&(a.scissor(Ce.x,Ce.y,Ce.z,Ce.w),we.copy(Ce))}function at(Ce){ge.equals(Ce)===!1&&(a.viewport(Ce.x,Ce.y,Ce.z,Ce.w),ge.copy(Ce))}function Ct(Ce,ot){let He=f.get(ot);He===void 0&&(He=new WeakMap,f.set(ot,He));let Xe=He.get(Ce);Xe===void 0&&(Xe=a.getUniformBlockIndex(ot,Ce.name),He.set(Ce,Xe))}function bt(Ce,ot){const Xe=f.get(ot).get(Ce);d.get(ot)!==Xe&&(a.uniformBlockBinding(ot,Xe,Ce.__bindingPointIndex),d.set(ot,Xe))}function Bt(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),c.setReversed(!1),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),v={},he=null,pe={},g={},y=new WeakMap,_=[],S=null,x=!1,T=null,w=null,E=null,P=null,D=null,L=null,$=null,O=new Color(0,0,0),B=0,V=!1,F=null,U=null,G=null,W=null,j=null,we.set(0,0,a.canvas.width,a.canvas.height),ge.set(0,0,a.canvas.width,a.canvas.height),l.reset(),c.reset(),u.reset()}return{buffers:{color:l,depth:c,stencil:u},enable:oe,disable:me,bindFramebuffer:_e,drawBuffers:Te,useProgram:Le,setBlending:J,setMaterial:xe,setFlipSided:De,setCullFace:Ae,setLineWidth:Ie,setPolygonOffset:ze,setScissorTest:Fe,activeTexture:ae,bindTexture:Q,unbindTexture:be,compressedTexImage2D:Ee,compressedTexImage3D:ke,texImage2D:ct,texImage3D:gt,updateUBOMapping:Ct,uniformBlockBinding:bt,texStorage2D:Pt,texStorage3D:je,texSubImage2D:Ne,texSubImage3D:Je,compressedTexSubImage2D:qe,compressedTexSubImage3D:Ze,scissor:St,viewport:at,reset:Bt}}function WebGLTextures(a,n,r,o,s,l,c){const u=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new Vector2,v=new WeakMap;let g;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(ae,Q){return _?new OffscreenCanvas(ae,Q):createElementNS("canvas")}function x(ae,Q,be){let Ee=1;const ke=Fe(ae);if((ke.width>be||ke.height>be)&&(Ee=be/Math.max(ke.width,ke.height)),Ee<1)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap||typeof VideoFrame<"u"&&ae instanceof VideoFrame){const Ne=Math.floor(Ee*ke.width),Je=Math.floor(Ee*ke.height);g===void 0&&(g=S(Ne,Je));const qe=Q?S(Ne,Je):g;return qe.width=Ne,qe.height=Je,qe.getContext("2d").drawImage(ae,0,0,Ne,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ke.width+"x"+ke.height+") to ("+Ne+"x"+Je+")."),qe}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ke.width+"x"+ke.height+")."),ae;return ae}function T(ae){return ae.generateMipmaps}function w(ae){a.generateMipmap(ae)}function E(ae){return ae.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:ae.isWebGL3DRenderTarget?a.TEXTURE_3D:ae.isWebGLArrayRenderTarget||ae.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D}function P(ae,Q,be,Ee,ke=!1){if(ae!==null){if(a[ae]!==void 0)return a[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Ne=Q;if(Q===a.RED&&(be===a.FLOAT&&(Ne=a.R32F),be===a.HALF_FLOAT&&(Ne=a.R16F),be===a.UNSIGNED_BYTE&&(Ne=a.R8)),Q===a.RED_INTEGER&&(be===a.UNSIGNED_BYTE&&(Ne=a.R8UI),be===a.UNSIGNED_SHORT&&(Ne=a.R16UI),be===a.UNSIGNED_INT&&(Ne=a.R32UI),be===a.BYTE&&(Ne=a.R8I),be===a.SHORT&&(Ne=a.R16I),be===a.INT&&(Ne=a.R32I)),Q===a.RG&&(be===a.FLOAT&&(Ne=a.RG32F),be===a.HALF_FLOAT&&(Ne=a.RG16F),be===a.UNSIGNED_BYTE&&(Ne=a.RG8)),Q===a.RG_INTEGER&&(be===a.UNSIGNED_BYTE&&(Ne=a.RG8UI),be===a.UNSIGNED_SHORT&&(Ne=a.RG16UI),be===a.UNSIGNED_INT&&(Ne=a.RG32UI),be===a.BYTE&&(Ne=a.RG8I),be===a.SHORT&&(Ne=a.RG16I),be===a.INT&&(Ne=a.RG32I)),Q===a.RGB_INTEGER&&(be===a.UNSIGNED_BYTE&&(Ne=a.RGB8UI),be===a.UNSIGNED_SHORT&&(Ne=a.RGB16UI),be===a.UNSIGNED_INT&&(Ne=a.RGB32UI),be===a.BYTE&&(Ne=a.RGB8I),be===a.SHORT&&(Ne=a.RGB16I),be===a.INT&&(Ne=a.RGB32I)),Q===a.RGBA_INTEGER&&(be===a.UNSIGNED_BYTE&&(Ne=a.RGBA8UI),be===a.UNSIGNED_SHORT&&(Ne=a.RGBA16UI),be===a.UNSIGNED_INT&&(Ne=a.RGBA32UI),be===a.BYTE&&(Ne=a.RGBA8I),be===a.SHORT&&(Ne=a.RGBA16I),be===a.INT&&(Ne=a.RGBA32I)),Q===a.RGB&&be===a.UNSIGNED_INT_5_9_9_9_REV&&(Ne=a.RGB9_E5),Q===a.RGBA){const Je=ke?LinearTransfer:ColorManagement.getTransfer(Ee);be===a.FLOAT&&(Ne=a.RGBA32F),be===a.HALF_FLOAT&&(Ne=a.RGBA16F),be===a.UNSIGNED_BYTE&&(Ne=Je===SRGBTransfer?a.SRGB8_ALPHA8:a.RGBA8),be===a.UNSIGNED_SHORT_4_4_4_4&&(Ne=a.RGBA4),be===a.UNSIGNED_SHORT_5_5_5_1&&(Ne=a.RGB5_A1)}return(Ne===a.R16F||Ne===a.R32F||Ne===a.RG16F||Ne===a.RG32F||Ne===a.RGBA16F||Ne===a.RGBA32F)&&n.get("EXT_color_buffer_float"),Ne}function D(ae,Q){let be;return ae?Q===null||Q===UnsignedIntType||Q===UnsignedInt248Type?be=a.DEPTH24_STENCIL8:Q===FloatType?be=a.DEPTH32F_STENCIL8:Q===UnsignedShortType&&(be=a.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===UnsignedIntType||Q===UnsignedInt248Type?be=a.DEPTH_COMPONENT24:Q===FloatType?be=a.DEPTH_COMPONENT32F:Q===UnsignedShortType&&(be=a.DEPTH_COMPONENT16),be}function L(ae,Q){return T(ae)===!0||ae.isFramebufferTexture&&ae.minFilter!==NearestFilter&&ae.minFilter!==LinearFilter?Math.log2(Math.max(Q.width,Q.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?Q.mipmaps.length:1}function $(ae){const Q=ae.target;Q.removeEventListener("dispose",$),B(Q),Q.isVideoTexture&&v.delete(Q)}function O(ae){const Q=ae.target;Q.removeEventListener("dispose",O),F(Q)}function B(ae){const Q=o.get(ae);if(Q.__webglInit===void 0)return;const be=ae.source,Ee=y.get(be);if(Ee){const ke=Ee[Q.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&V(ae),Object.keys(Ee).length===0&&y.delete(be)}o.remove(ae)}function V(ae){const Q=o.get(ae);a.deleteTexture(Q.__webglTexture);const be=ae.source,Ee=y.get(be);delete Ee[Q.__cacheKey],c.memory.textures--}function F(ae){const Q=o.get(ae);if(ae.depthTexture&&(ae.depthTexture.dispose(),o.remove(ae.depthTexture)),ae.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(Q.__webglFramebuffer[Ee]))for(let ke=0;ke<Q.__webglFramebuffer[Ee].length;ke++)a.deleteFramebuffer(Q.__webglFramebuffer[Ee][ke]);else a.deleteFramebuffer(Q.__webglFramebuffer[Ee]);Q.__webglDepthbuffer&&a.deleteRenderbuffer(Q.__webglDepthbuffer[Ee])}else{if(Array.isArray(Q.__webglFramebuffer))for(let Ee=0;Ee<Q.__webglFramebuffer.length;Ee++)a.deleteFramebuffer(Q.__webglFramebuffer[Ee]);else a.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&a.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&a.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let Ee=0;Ee<Q.__webglColorRenderbuffer.length;Ee++)Q.__webglColorRenderbuffer[Ee]&&a.deleteRenderbuffer(Q.__webglColorRenderbuffer[Ee]);Q.__webglDepthRenderbuffer&&a.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const be=ae.textures;for(let Ee=0,ke=be.length;Ee<ke;Ee++){const Ne=o.get(be[Ee]);Ne.__webglTexture&&(a.deleteTexture(Ne.__webglTexture),c.memory.textures--),o.remove(be[Ee])}o.remove(ae)}let U=0;function G(){U=0}function W(){const ae=U;return ae>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+s.maxTextures),U+=1,ae}function j(ae){const Q=[];return Q.push(ae.wrapS),Q.push(ae.wrapT),Q.push(ae.wrapR||0),Q.push(ae.magFilter),Q.push(ae.minFilter),Q.push(ae.anisotropy),Q.push(ae.internalFormat),Q.push(ae.format),Q.push(ae.type),Q.push(ae.generateMipmaps),Q.push(ae.premultiplyAlpha),Q.push(ae.flipY),Q.push(ae.unpackAlignment),Q.push(ae.colorSpace),Q.join()}function K(ae,Q){const be=o.get(ae);if(ae.isVideoTexture&&Ie(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&be.__version!==ae.version){const Ee=ae.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(be,ae,Q);return}}r.bindTexture(a.TEXTURE_2D,be.__webglTexture,a.TEXTURE0+Q)}function q(ae,Q){const be=o.get(ae);if(ae.version>0&&be.__version!==ae.version){ge(be,ae,Q);return}r.bindTexture(a.TEXTURE_2D_ARRAY,be.__webglTexture,a.TEXTURE0+Q)}function ie(ae,Q){const be=o.get(ae);if(ae.version>0&&be.__version!==ae.version){ge(be,ae,Q);return}r.bindTexture(a.TEXTURE_3D,be.__webglTexture,a.TEXTURE0+Q)}function ee(ae,Q){const be=o.get(ae);if(ae.version>0&&be.__version!==ae.version){Se(be,ae,Q);return}r.bindTexture(a.TEXTURE_CUBE_MAP,be.__webglTexture,a.TEXTURE0+Q)}const he={[RepeatWrapping]:a.REPEAT,[ClampToEdgeWrapping]:a.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:a.MIRRORED_REPEAT},pe={[NearestFilter]:a.NEAREST,[NearestMipmapNearestFilter]:a.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:a.NEAREST_MIPMAP_LINEAR,[LinearFilter]:a.LINEAR,[LinearMipmapNearestFilter]:a.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:a.LINEAR_MIPMAP_LINEAR},ce={[NeverCompare]:a.NEVER,[AlwaysCompare]:a.ALWAYS,[LessCompare]:a.LESS,[LessEqualCompare]:a.LEQUAL,[EqualCompare]:a.EQUAL,[GreaterEqualCompare]:a.GEQUAL,[GreaterCompare]:a.GREATER,[NotEqualCompare]:a.NOTEQUAL};function ye(ae,Q){if(Q.type===FloatType&&n.has("OES_texture_float_linear")===!1&&(Q.magFilter===LinearFilter||Q.magFilter===LinearMipmapNearestFilter||Q.magFilter===NearestMipmapLinearFilter||Q.magFilter===LinearMipmapLinearFilter||Q.minFilter===LinearFilter||Q.minFilter===LinearMipmapNearestFilter||Q.minFilter===NearestMipmapLinearFilter||Q.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(ae,a.TEXTURE_WRAP_S,he[Q.wrapS]),a.texParameteri(ae,a.TEXTURE_WRAP_T,he[Q.wrapT]),(ae===a.TEXTURE_3D||ae===a.TEXTURE_2D_ARRAY)&&a.texParameteri(ae,a.TEXTURE_WRAP_R,he[Q.wrapR]),a.texParameteri(ae,a.TEXTURE_MAG_FILTER,pe[Q.magFilter]),a.texParameteri(ae,a.TEXTURE_MIN_FILTER,pe[Q.minFilter]),Q.compareFunction&&(a.texParameteri(ae,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(ae,a.TEXTURE_COMPARE_FUNC,ce[Q.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===NearestFilter||Q.minFilter!==NearestMipmapLinearFilter&&Q.minFilter!==LinearMipmapLinearFilter||Q.type===FloatType&&n.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||o.get(Q).__currentAnisotropy){const be=n.get("EXT_texture_filter_anisotropic");a.texParameterf(ae,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,s.getMaxAnisotropy())),o.get(Q).__currentAnisotropy=Q.anisotropy}}}function we(ae,Q){let be=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,Q.addEventListener("dispose",$));const Ee=Q.source;let ke=y.get(Ee);ke===void 0&&(ke={},y.set(Ee,ke));const Ne=j(Q);if(Ne!==ae.__cacheKey){ke[Ne]===void 0&&(ke[Ne]={texture:a.createTexture(),usedTimes:0},c.memory.textures++,be=!0),ke[Ne].usedTimes++;const Je=ke[ae.__cacheKey];Je!==void 0&&(ke[ae.__cacheKey].usedTimes--,Je.usedTimes===0&&V(Q)),ae.__cacheKey=Ne,ae.__webglTexture=ke[Ne].texture}return be}function ge(ae,Q,be){let Ee=a.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(Ee=a.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(Ee=a.TEXTURE_3D);const ke=we(ae,Q),Ne=Q.source;r.bindTexture(Ee,ae.__webglTexture,a.TEXTURE0+be);const Je=o.get(Ne);if(Ne.version!==Je.__version||ke===!0){r.activeTexture(a.TEXTURE0+be);const qe=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Ze=Q.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Q.colorSpace),Pt=Q.colorSpace===NoColorSpace||qe===Ze?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Q.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,Q.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);let je=x(Q.image,!1,s.maxTextureSize);je=ze(Q,je);const ct=l.convert(Q.format,Q.colorSpace),gt=l.convert(Q.type);let St=P(Q.internalFormat,ct,gt,Q.colorSpace,Q.isVideoTexture);ye(Ee,Q);let at;const Ct=Q.mipmaps,bt=Q.isVideoTexture!==!0,Bt=Je.__version===void 0||ke===!0,Ce=Ne.dataReady,ot=L(Q,je);if(Q.isDepthTexture)St=D(Q.format===DepthStencilFormat,Q.type),Bt&&(bt?r.texStorage2D(a.TEXTURE_2D,1,St,je.width,je.height):r.texImage2D(a.TEXTURE_2D,0,St,je.width,je.height,0,ct,gt,null));else if(Q.isDataTexture)if(Ct.length>0){bt&&Bt&&r.texStorage2D(a.TEXTURE_2D,ot,St,Ct[0].width,Ct[0].height);for(let He=0,Xe=Ct.length;He<Xe;He++)at=Ct[He],bt?Ce&&r.texSubImage2D(a.TEXTURE_2D,He,0,0,at.width,at.height,ct,gt,at.data):r.texImage2D(a.TEXTURE_2D,He,St,at.width,at.height,0,ct,gt,at.data);Q.generateMipmaps=!1}else bt?(Bt&&r.texStorage2D(a.TEXTURE_2D,ot,St,je.width,je.height),Ce&&r.texSubImage2D(a.TEXTURE_2D,0,0,0,je.width,je.height,ct,gt,je.data)):r.texImage2D(a.TEXTURE_2D,0,St,je.width,je.height,0,ct,gt,je.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){bt&&Bt&&r.texStorage3D(a.TEXTURE_2D_ARRAY,ot,St,Ct[0].width,Ct[0].height,je.depth);for(let He=0,Xe=Ct.length;He<Xe;He++)if(at=Ct[He],Q.format!==RGBAFormat)if(ct!==null)if(bt){if(Ce)if(Q.layerUpdates.size>0){const ut=getByteLength(at.width,at.height,Q.format,Q.type);for(const st of Q.layerUpdates){const At=at.data.subarray(st*ut/at.data.BYTES_PER_ELEMENT,(st+1)*ut/at.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,He,0,0,st,at.width,at.height,1,ct,At)}Q.clearLayerUpdates()}else r.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,He,0,0,0,at.width,at.height,je.depth,ct,at.data)}else r.compressedTexImage3D(a.TEXTURE_2D_ARRAY,He,St,at.width,at.height,je.depth,0,at.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else bt?Ce&&r.texSubImage3D(a.TEXTURE_2D_ARRAY,He,0,0,0,at.width,at.height,je.depth,ct,gt,at.data):r.texImage3D(a.TEXTURE_2D_ARRAY,He,St,at.width,at.height,je.depth,0,ct,gt,at.data)}else{bt&&Bt&&r.texStorage2D(a.TEXTURE_2D,ot,St,Ct[0].width,Ct[0].height);for(let He=0,Xe=Ct.length;He<Xe;He++)at=Ct[He],Q.format!==RGBAFormat?ct!==null?bt?Ce&&r.compressedTexSubImage2D(a.TEXTURE_2D,He,0,0,at.width,at.height,ct,at.data):r.compressedTexImage2D(a.TEXTURE_2D,He,St,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):bt?Ce&&r.texSubImage2D(a.TEXTURE_2D,He,0,0,at.width,at.height,ct,gt,at.data):r.texImage2D(a.TEXTURE_2D,He,St,at.width,at.height,0,ct,gt,at.data)}else if(Q.isDataArrayTexture)if(bt){if(Bt&&r.texStorage3D(a.TEXTURE_2D_ARRAY,ot,St,je.width,je.height,je.depth),Ce)if(Q.layerUpdates.size>0){const He=getByteLength(je.width,je.height,Q.format,Q.type);for(const Xe of Q.layerUpdates){const ut=je.data.subarray(Xe*He/je.data.BYTES_PER_ELEMENT,(Xe+1)*He/je.data.BYTES_PER_ELEMENT);r.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,Xe,je.width,je.height,1,ct,gt,ut)}Q.clearLayerUpdates()}else r.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,ct,gt,je.data)}else r.texImage3D(a.TEXTURE_2D_ARRAY,0,St,je.width,je.height,je.depth,0,ct,gt,je.data);else if(Q.isData3DTexture)bt?(Bt&&r.texStorage3D(a.TEXTURE_3D,ot,St,je.width,je.height,je.depth),Ce&&r.texSubImage3D(a.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,ct,gt,je.data)):r.texImage3D(a.TEXTURE_3D,0,St,je.width,je.height,je.depth,0,ct,gt,je.data);else if(Q.isFramebufferTexture){if(Bt)if(bt)r.texStorage2D(a.TEXTURE_2D,ot,St,je.width,je.height);else{let He=je.width,Xe=je.height;for(let ut=0;ut<ot;ut++)r.texImage2D(a.TEXTURE_2D,ut,St,He,Xe,0,ct,gt,null),He>>=1,Xe>>=1}}else if(Ct.length>0){if(bt&&Bt){const He=Fe(Ct[0]);r.texStorage2D(a.TEXTURE_2D,ot,St,He.width,He.height)}for(let He=0,Xe=Ct.length;He<Xe;He++)at=Ct[He],bt?Ce&&r.texSubImage2D(a.TEXTURE_2D,He,0,0,ct,gt,at):r.texImage2D(a.TEXTURE_2D,He,St,ct,gt,at);Q.generateMipmaps=!1}else if(bt){if(Bt){const He=Fe(je);r.texStorage2D(a.TEXTURE_2D,ot,St,He.width,He.height)}Ce&&r.texSubImage2D(a.TEXTURE_2D,0,0,0,ct,gt,je)}else r.texImage2D(a.TEXTURE_2D,0,St,ct,gt,je);T(Q)&&w(Ee),Je.__version=Ne.version,Q.onUpdate&&Q.onUpdate(Q)}ae.__version=Q.version}function Se(ae,Q,be){if(Q.image.length!==6)return;const Ee=we(ae,Q),ke=Q.source;r.bindTexture(a.TEXTURE_CUBE_MAP,ae.__webglTexture,a.TEXTURE0+be);const Ne=o.get(ke);if(ke.version!==Ne.__version||Ee===!0){r.activeTexture(a.TEXTURE0+be);const Je=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),qe=Q.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Q.colorSpace),Ze=Q.colorSpace===NoColorSpace||Je===qe?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Q.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,Q.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ze);const Pt=Q.isCompressedTexture||Q.image[0].isCompressedTexture,je=Q.image[0]&&Q.image[0].isDataTexture,ct=[];for(let Xe=0;Xe<6;Xe++)!Pt&&!je?ct[Xe]=x(Q.image[Xe],!0,s.maxCubemapSize):ct[Xe]=je?Q.image[Xe].image:Q.image[Xe],ct[Xe]=ze(Q,ct[Xe]);const gt=ct[0],St=l.convert(Q.format,Q.colorSpace),at=l.convert(Q.type),Ct=P(Q.internalFormat,St,at,Q.colorSpace),bt=Q.isVideoTexture!==!0,Bt=Ne.__version===void 0||Ee===!0,Ce=ke.dataReady;let ot=L(Q,gt);ye(a.TEXTURE_CUBE_MAP,Q);let He;if(Pt){bt&&Bt&&r.texStorage2D(a.TEXTURE_CUBE_MAP,ot,Ct,gt.width,gt.height);for(let Xe=0;Xe<6;Xe++){He=ct[Xe].mipmaps;for(let ut=0;ut<He.length;ut++){const st=He[ut];Q.format!==RGBAFormat?St!==null?bt?Ce&&r.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut,0,0,st.width,st.height,St,st.data):r.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut,Ct,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):bt?Ce&&r.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut,0,0,st.width,st.height,St,at,st.data):r.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut,Ct,st.width,st.height,0,St,at,st.data)}}}else{if(He=Q.mipmaps,bt&&Bt){He.length>0&&ot++;const Xe=Fe(ct[0]);r.texStorage2D(a.TEXTURE_CUBE_MAP,ot,Ct,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(je){bt?Ce&&r.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,ct[Xe].width,ct[Xe].height,St,at,ct[Xe].data):r.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,Ct,ct[Xe].width,ct[Xe].height,0,St,at,ct[Xe].data);for(let ut=0;ut<He.length;ut++){const At=He[ut].image[Xe].image;bt?Ce&&r.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut+1,0,0,At.width,At.height,St,at,At.data):r.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut+1,Ct,At.width,At.height,0,St,at,At.data)}}else{bt?Ce&&r.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,St,at,ct[Xe]):r.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,Ct,St,at,ct[Xe]);for(let ut=0;ut<He.length;ut++){const st=He[ut];bt?Ce&&r.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut+1,0,0,St,at,st.image[Xe]):r.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ut+1,Ct,St,at,st.image[Xe])}}}T(Q)&&w(a.TEXTURE_CUBE_MAP),Ne.__version=ke.version,Q.onUpdate&&Q.onUpdate(Q)}ae.__version=Q.version}function $e(ae,Q,be,Ee,ke,Ne){const Je=l.convert(be.format,be.colorSpace),qe=l.convert(be.type),Ze=P(be.internalFormat,Je,qe,be.colorSpace),Pt=o.get(Q),je=o.get(be);if(je.__renderTarget=Q,!Pt.__hasExternalTextures){const ct=Math.max(1,Q.width>>Ne),gt=Math.max(1,Q.height>>Ne);ke===a.TEXTURE_3D||ke===a.TEXTURE_2D_ARRAY?r.texImage3D(ke,Ne,Ze,ct,gt,Q.depth,0,Je,qe,null):r.texImage2D(ke,Ne,Ze,ct,gt,0,Je,qe,null)}r.bindFramebuffer(a.FRAMEBUFFER,ae),Ae(Q)?u.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,Ee,ke,je.__webglTexture,0,De(Q)):(ke===a.TEXTURE_2D||ke>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&ke<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,Ee,ke,je.__webglTexture,Ne),r.bindFramebuffer(a.FRAMEBUFFER,null)}function oe(ae,Q,be){if(a.bindRenderbuffer(a.RENDERBUFFER,ae),Q.depthBuffer){const Ee=Q.depthTexture,ke=Ee&&Ee.isDepthTexture?Ee.type:null,Ne=D(Q.stencilBuffer,ke),Je=Q.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,qe=De(Q);Ae(Q)?u.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,qe,Ne,Q.width,Q.height):be?a.renderbufferStorageMultisample(a.RENDERBUFFER,qe,Ne,Q.width,Q.height):a.renderbufferStorage(a.RENDERBUFFER,Ne,Q.width,Q.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,Je,a.RENDERBUFFER,ae)}else{const Ee=Q.textures;for(let ke=0;ke<Ee.length;ke++){const Ne=Ee[ke],Je=l.convert(Ne.format,Ne.colorSpace),qe=l.convert(Ne.type),Ze=P(Ne.internalFormat,Je,qe,Ne.colorSpace),Pt=De(Q);be&&Ae(Q)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,Pt,Ze,Q.width,Q.height):Ae(Q)?u.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Pt,Ze,Q.width,Q.height):a.renderbufferStorage(a.RENDERBUFFER,Ze,Q.width,Q.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function me(ae,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(a.FRAMEBUFFER,ae),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ee=o.get(Q.depthTexture);Ee.__renderTarget=Q,(!Ee.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),K(Q.depthTexture,0);const ke=Ee.__webglTexture,Ne=De(Q);if(Q.depthTexture.format===DepthFormat)Ae(Q)?u.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ke,0,Ne):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ke,0);else if(Q.depthTexture.format===DepthStencilFormat)Ae(Q)?u.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ke,0,Ne):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ke,0);else throw new Error("Unknown depthTexture format")}function _e(ae){const Q=o.get(ae),be=ae.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==ae.depthTexture){const Ee=ae.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),Ee){const ke=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,Ee.removeEventListener("dispose",ke)};Ee.addEventListener("dispose",ke),Q.__depthDisposeCallback=ke}Q.__boundDepthTexture=Ee}if(ae.depthTexture&&!Q.__autoAllocateDepthBuffer){if(be)throw new Error("target.depthTexture not supported in Cube render targets");me(Q.__webglFramebuffer,ae)}else if(be){Q.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(r.bindFramebuffer(a.FRAMEBUFFER,Q.__webglFramebuffer[Ee]),Q.__webglDepthbuffer[Ee]===void 0)Q.__webglDepthbuffer[Ee]=a.createRenderbuffer(),oe(Q.__webglDepthbuffer[Ee],ae,!1);else{const ke=ae.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Ne=Q.__webglDepthbuffer[Ee];a.bindRenderbuffer(a.RENDERBUFFER,Ne),a.framebufferRenderbuffer(a.FRAMEBUFFER,ke,a.RENDERBUFFER,Ne)}}else if(r.bindFramebuffer(a.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=a.createRenderbuffer(),oe(Q.__webglDepthbuffer,ae,!1);else{const Ee=ae.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,ke=Q.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,ke),a.framebufferRenderbuffer(a.FRAMEBUFFER,Ee,a.RENDERBUFFER,ke)}r.bindFramebuffer(a.FRAMEBUFFER,null)}function Te(ae,Q,be){const Ee=o.get(ae);Q!==void 0&&$e(Ee.__webglFramebuffer,ae,ae.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),be!==void 0&&_e(ae)}function Le(ae){const Q=ae.texture,be=o.get(ae),Ee=o.get(Q);ae.addEventListener("dispose",O);const ke=ae.textures,Ne=ae.isWebGLCubeRenderTarget===!0,Je=ke.length>1;if(Je||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=a.createTexture()),Ee.__version=Q.version,c.memory.textures++),Ne){be.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(Q.mipmaps&&Q.mipmaps.length>0){be.__webglFramebuffer[qe]=[];for(let Ze=0;Ze<Q.mipmaps.length;Ze++)be.__webglFramebuffer[qe][Ze]=a.createFramebuffer()}else be.__webglFramebuffer[qe]=a.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){be.__webglFramebuffer=[];for(let qe=0;qe<Q.mipmaps.length;qe++)be.__webglFramebuffer[qe]=a.createFramebuffer()}else be.__webglFramebuffer=a.createFramebuffer();if(Je)for(let qe=0,Ze=ke.length;qe<Ze;qe++){const Pt=o.get(ke[qe]);Pt.__webglTexture===void 0&&(Pt.__webglTexture=a.createTexture(),c.memory.textures++)}if(ae.samples>0&&Ae(ae)===!1){be.__webglMultisampledFramebuffer=a.createFramebuffer(),be.__webglColorRenderbuffer=[],r.bindFramebuffer(a.FRAMEBUFFER,be.__webglMultisampledFramebuffer);for(let qe=0;qe<ke.length;qe++){const Ze=ke[qe];be.__webglColorRenderbuffer[qe]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,be.__webglColorRenderbuffer[qe]);const Pt=l.convert(Ze.format,Ze.colorSpace),je=l.convert(Ze.type),ct=P(Ze.internalFormat,Pt,je,Ze.colorSpace,ae.isXRRenderTarget===!0),gt=De(ae);a.renderbufferStorageMultisample(a.RENDERBUFFER,gt,ct,ae.width,ae.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+qe,a.RENDERBUFFER,be.__webglColorRenderbuffer[qe])}a.bindRenderbuffer(a.RENDERBUFFER,null),ae.depthBuffer&&(be.__webglDepthRenderbuffer=a.createRenderbuffer(),oe(be.__webglDepthRenderbuffer,ae,!0)),r.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Ne){r.bindTexture(a.TEXTURE_CUBE_MAP,Ee.__webglTexture),ye(a.TEXTURE_CUBE_MAP,Q);for(let qe=0;qe<6;qe++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let Ze=0;Ze<Q.mipmaps.length;Ze++)$e(be.__webglFramebuffer[qe][Ze],ae,Q,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Ze);else $e(be.__webglFramebuffer[qe],ae,Q,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);T(Q)&&w(a.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Je){for(let qe=0,Ze=ke.length;qe<Ze;qe++){const Pt=ke[qe],je=o.get(Pt);r.bindTexture(a.TEXTURE_2D,je.__webglTexture),ye(a.TEXTURE_2D,Pt),$e(be.__webglFramebuffer,ae,Pt,a.COLOR_ATTACHMENT0+qe,a.TEXTURE_2D,0),T(Pt)&&w(a.TEXTURE_2D)}r.unbindTexture()}else{let qe=a.TEXTURE_2D;if((ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(qe=ae.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),r.bindTexture(qe,Ee.__webglTexture),ye(qe,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let Ze=0;Ze<Q.mipmaps.length;Ze++)$e(be.__webglFramebuffer[Ze],ae,Q,a.COLOR_ATTACHMENT0,qe,Ze);else $e(be.__webglFramebuffer,ae,Q,a.COLOR_ATTACHMENT0,qe,0);T(Q)&&w(qe),r.unbindTexture()}ae.depthBuffer&&_e(ae)}function Ge(ae){const Q=ae.textures;for(let be=0,Ee=Q.length;be<Ee;be++){const ke=Q[be];if(T(ke)){const Ne=E(ae),Je=o.get(ke).__webglTexture;r.bindTexture(Ne,Je),w(Ne),r.unbindTexture()}}}const se=[],J=[];function xe(ae){if(ae.samples>0){if(Ae(ae)===!1){const Q=ae.textures,be=ae.width,Ee=ae.height;let ke=a.COLOR_BUFFER_BIT;const Ne=ae.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Je=o.get(ae),qe=Q.length>1;if(qe)for(let Ze=0;Ze<Q.length;Ze++)r.bindFramebuffer(a.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Ze,a.RENDERBUFFER,null),r.bindFramebuffer(a.FRAMEBUFFER,Je.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Ze,a.TEXTURE_2D,null,0);r.bindFramebuffer(a.READ_FRAMEBUFFER,Je.__webglMultisampledFramebuffer),r.bindFramebuffer(a.DRAW_FRAMEBUFFER,Je.__webglFramebuffer);for(let Ze=0;Ze<Q.length;Ze++){if(ae.resolveDepthBuffer&&(ae.depthBuffer&&(ke|=a.DEPTH_BUFFER_BIT),ae.stencilBuffer&&ae.resolveStencilBuffer&&(ke|=a.STENCIL_BUFFER_BIT)),qe){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Je.__webglColorRenderbuffer[Ze]);const Pt=o.get(Q[Ze]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Pt,0)}a.blitFramebuffer(0,0,be,Ee,0,0,be,Ee,ke,a.NEAREST),d===!0&&(se.length=0,J.length=0,se.push(a.COLOR_ATTACHMENT0+Ze),ae.depthBuffer&&ae.resolveDepthBuffer===!1&&(se.push(Ne),J.push(Ne),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,J)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,se))}if(r.bindFramebuffer(a.READ_FRAMEBUFFER,null),r.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),qe)for(let Ze=0;Ze<Q.length;Ze++){r.bindFramebuffer(a.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Ze,a.RENDERBUFFER,Je.__webglColorRenderbuffer[Ze]);const Pt=o.get(Q[Ze]).__webglTexture;r.bindFramebuffer(a.FRAMEBUFFER,Je.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+Ze,a.TEXTURE_2D,Pt,0)}r.bindFramebuffer(a.DRAW_FRAMEBUFFER,Je.__webglMultisampledFramebuffer)}else if(ae.depthBuffer&&ae.resolveDepthBuffer===!1&&d){const Q=ae.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[Q])}}}function De(ae){return Math.min(s.maxSamples,ae.samples)}function Ae(ae){const Q=o.get(ae);return ae.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function Ie(ae){const Q=c.render.frame;v.get(ae)!==Q&&(v.set(ae,Q),ae.update())}function ze(ae,Q){const be=ae.colorSpace,Ee=ae.format,ke=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||be!==LinearSRGBColorSpace&&be!==NoColorSpace&&(ColorManagement.getTransfer(be)===SRGBTransfer?(Ee!==RGBAFormat||ke!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",be)),Q}function Fe(ae){return typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement?(f.width=ae.naturalWidth||ae.width,f.height=ae.naturalHeight||ae.height):typeof VideoFrame<"u"&&ae instanceof VideoFrame?(f.width=ae.displayWidth,f.height=ae.displayHeight):(f.width=ae.width,f.height=ae.height),f}this.allocateTextureUnit=W,this.resetTextureUnits=G,this.setTexture2D=K,this.setTexture2DArray=q,this.setTexture3D=ie,this.setTextureCube=ee,this.rebindTextures=Te,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=Ge,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=Ae}function WebGLUtils(a,n){function r(o,s=NoColorSpace){let l;const c=ColorManagement.getTransfer(s);if(o===UnsignedByteType)return a.UNSIGNED_BYTE;if(o===UnsignedShort4444Type)return a.UNSIGNED_SHORT_4_4_4_4;if(o===UnsignedShort5551Type)return a.UNSIGNED_SHORT_5_5_5_1;if(o===UnsignedInt5999Type)return a.UNSIGNED_INT_5_9_9_9_REV;if(o===ByteType)return a.BYTE;if(o===ShortType)return a.SHORT;if(o===UnsignedShortType)return a.UNSIGNED_SHORT;if(o===IntType)return a.INT;if(o===UnsignedIntType)return a.UNSIGNED_INT;if(o===FloatType)return a.FLOAT;if(o===HalfFloatType)return a.HALF_FLOAT;if(o===AlphaFormat)return a.ALPHA;if(o===RGBFormat)return a.RGB;if(o===RGBAFormat)return a.RGBA;if(o===LuminanceFormat)return a.LUMINANCE;if(o===LuminanceAlphaFormat)return a.LUMINANCE_ALPHA;if(o===DepthFormat)return a.DEPTH_COMPONENT;if(o===DepthStencilFormat)return a.DEPTH_STENCIL;if(o===RedFormat)return a.RED;if(o===RedIntegerFormat)return a.RED_INTEGER;if(o===RGFormat)return a.RG;if(o===RGIntegerFormat)return a.RG_INTEGER;if(o===RGBAIntegerFormat)return a.RGBA_INTEGER;if(o===RGB_S3TC_DXT1_Format||o===RGBA_S3TC_DXT1_Format||o===RGBA_S3TC_DXT3_Format||o===RGBA_S3TC_DXT5_Format)if(c===SRGBTransfer)if(l=n.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(o===RGB_S3TC_DXT1_Format)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT1_Format)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT3_Format)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===RGBA_S3TC_DXT5_Format)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=n.get("WEBGL_compressed_texture_s3tc"),l!==null){if(o===RGB_S3TC_DXT1_Format)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT1_Format)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT3_Format)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===RGBA_S3TC_DXT5_Format)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===RGB_PVRTC_4BPPV1_Format||o===RGB_PVRTC_2BPPV1_Format||o===RGBA_PVRTC_4BPPV1_Format||o===RGBA_PVRTC_2BPPV1_Format)if(l=n.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(o===RGB_PVRTC_4BPPV1_Format)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===RGB_PVRTC_2BPPV1_Format)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===RGBA_PVRTC_4BPPV1_Format)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===RGBA_PVRTC_2BPPV1_Format)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===RGB_ETC1_Format||o===RGB_ETC2_Format||o===RGBA_ETC2_EAC_Format)if(l=n.get("WEBGL_compressed_texture_etc"),l!==null){if(o===RGB_ETC1_Format||o===RGB_ETC2_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(o===RGBA_ETC2_EAC_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===RGBA_ASTC_4x4_Format||o===RGBA_ASTC_5x4_Format||o===RGBA_ASTC_5x5_Format||o===RGBA_ASTC_6x5_Format||o===RGBA_ASTC_6x6_Format||o===RGBA_ASTC_8x5_Format||o===RGBA_ASTC_8x6_Format||o===RGBA_ASTC_8x8_Format||o===RGBA_ASTC_10x5_Format||o===RGBA_ASTC_10x6_Format||o===RGBA_ASTC_10x8_Format||o===RGBA_ASTC_10x10_Format||o===RGBA_ASTC_12x10_Format||o===RGBA_ASTC_12x12_Format)if(l=n.get("WEBGL_compressed_texture_astc"),l!==null){if(o===RGBA_ASTC_4x4_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===RGBA_ASTC_5x4_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===RGBA_ASTC_5x5_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===RGBA_ASTC_6x5_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===RGBA_ASTC_6x6_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===RGBA_ASTC_8x5_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===RGBA_ASTC_8x6_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===RGBA_ASTC_8x8_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===RGBA_ASTC_10x5_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===RGBA_ASTC_10x6_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===RGBA_ASTC_10x8_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===RGBA_ASTC_10x10_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===RGBA_ASTC_12x10_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===RGBA_ASTC_12x12_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===RGBA_BPTC_Format||o===RGB_BPTC_SIGNED_Format||o===RGB_BPTC_UNSIGNED_Format)if(l=n.get("EXT_texture_compression_bptc"),l!==null){if(o===RGBA_BPTC_Format)return c===SRGBTransfer?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===RGB_BPTC_SIGNED_Format)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===RGB_BPTC_UNSIGNED_Format)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===RED_RGTC1_Format||o===SIGNED_RED_RGTC1_Format||o===RED_GREEN_RGTC2_Format||o===SIGNED_RED_GREEN_RGTC2_Format)if(l=n.get("EXT_texture_compression_rgtc"),l!==null){if(o===RGBA_BPTC_Format)return l.COMPRESSED_RED_RGTC1_EXT;if(o===SIGNED_RED_RGTC1_Format)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===RED_GREEN_RGTC2_Format)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===SIGNED_RED_GREEN_RGTC2_Format)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===UnsignedInt248Type?a.UNSIGNED_INT_24_8:a[o]!==void 0?a[o]:null}return{convert:r}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,r,o){if(this.texture===null){const s=new Texture,l=n.properties.get(s);l.__webglTexture=r.texture,(r.depthNear!==o.depthNear||r.depthFar!==o.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=s}}getMesh(n){if(this.texture!==null&&this.mesh===null){const r=n.cameras[0].viewport,o=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),o)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(n,r){super();const o=this;let s=null,l=1,c=null,u="local-floor",d=1,f=null,v=null,g=null,y=null,_=null,S=null;const x=new WebXRDepthSensing,T=r.getContextAttributes();let w=null,E=null;const P=[],D=[],L=new Vector2;let $=null;const O=new PerspectiveCamera;O.viewport=new Vector4;const B=new PerspectiveCamera;B.viewport=new Vector4;const V=[O,B],F=new ArrayCamera;let U=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Se=P[ge];return Se===void 0&&(Se=new WebXRController,P[ge]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(ge){let Se=P[ge];return Se===void 0&&(Se=new WebXRController,P[ge]=Se),Se.getGripSpace()},this.getHand=function(ge){let Se=P[ge];return Se===void 0&&(Se=new WebXRController,P[ge]=Se),Se.getHandSpace()};function W(ge){const Se=D.indexOf(ge.inputSource);if(Se===-1)return;const $e=P[Se];$e!==void 0&&($e.update(ge.inputSource,ge.frame,f||c),$e.dispatchEvent({type:ge.type,data:ge.inputSource}))}function j(){s.removeEventListener("select",W),s.removeEventListener("selectstart",W),s.removeEventListener("selectend",W),s.removeEventListener("squeeze",W),s.removeEventListener("squeezestart",W),s.removeEventListener("squeezeend",W),s.removeEventListener("end",j),s.removeEventListener("inputsourceschange",K);for(let ge=0;ge<P.length;ge++){const Se=D[ge];Se!==null&&(D[ge]=null,P[ge].disconnect(Se))}U=null,G=null,x.reset(),n.setRenderTarget(w),_=null,y=null,g=null,s=null,E=null,we.stop(),o.isPresenting=!1,n.setPixelRatio($),n.setSize(L.width,L.height,!1),o.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){l=ge,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){u=ge,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||c},this.setReferenceSpace=function(ge){f=ge},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(ge){if(s=ge,s!==null){if(w=n.getRenderTarget(),s.addEventListener("select",W),s.addEventListener("selectstart",W),s.addEventListener("selectend",W),s.addEventListener("squeeze",W),s.addEventListener("squeezestart",W),s.addEventListener("squeezeend",W),s.addEventListener("end",j),s.addEventListener("inputsourceschange",K),T.xrCompatible!==!0&&await r.makeXRCompatible(),$=n.getPixelRatio(),n.getSize(L),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let $e=null,oe=null,me=null;T.depth&&(me=T.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,$e=T.stencil?DepthStencilFormat:DepthFormat,oe=T.stencil?UnsignedInt248Type:UnsignedIntType);const _e={colorFormat:r.RGBA8,depthFormat:me,scaleFactor:l};g=new XRWebGLBinding(s,r),y=g.createProjectionLayer(_e),s.updateRenderState({layers:[y]}),n.setPixelRatio(1),n.setSize(y.textureWidth,y.textureHeight,!1),E=new WebGLRenderTarget(y.textureWidth,y.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(y.textureWidth,y.textureHeight,oe,void 0,void 0,void 0,void 0,void 0,void 0,$e),stencilBuffer:T.stencil,colorSpace:n.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const $e={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:l};_=new XRWebGLLayer(s,r,$e),s.updateRenderState({baseLayer:_}),n.setPixelRatio(1),n.setSize(_.framebufferWidth,_.framebufferHeight,!1),E=new WebGLRenderTarget(_.framebufferWidth,_.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:n.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(d),f=null,c=await s.requestReferenceSpace(u),we.setContext(s),we.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function K(ge){for(let Se=0;Se<ge.removed.length;Se++){const $e=ge.removed[Se],oe=D.indexOf($e);oe>=0&&(D[oe]=null,P[oe].disconnect($e))}for(let Se=0;Se<ge.added.length;Se++){const $e=ge.added[Se];let oe=D.indexOf($e);if(oe===-1){for(let _e=0;_e<P.length;_e++)if(_e>=D.length){D.push($e),oe=_e;break}else if(D[_e]===null){D[_e]=$e,oe=_e;break}if(oe===-1)break}const me=P[oe];me&&me.connect($e)}}const q=new Vector3,ie=new Vector3;function ee(ge,Se,$e){q.setFromMatrixPosition(Se.matrixWorld),ie.setFromMatrixPosition($e.matrixWorld);const oe=q.distanceTo(ie),me=Se.projectionMatrix.elements,_e=$e.projectionMatrix.elements,Te=me[14]/(me[10]-1),Le=me[14]/(me[10]+1),Ge=(me[9]+1)/me[5],se=(me[9]-1)/me[5],J=(me[8]-1)/me[0],xe=(_e[8]+1)/_e[0],De=Te*J,Ae=Te*xe,Ie=oe/(-J+xe),ze=Ie*-J;if(Se.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(ze),ge.translateZ(Ie),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),me[10]===-1)ge.projectionMatrix.copy(Se.projectionMatrix),ge.projectionMatrixInverse.copy(Se.projectionMatrixInverse);else{const Fe=Te+Ie,ae=Le+Ie,Q=De-ze,be=Ae+(oe-ze),Ee=Ge*Le/ae*Fe,ke=se*Le/ae*Fe;ge.projectionMatrix.makePerspective(Q,be,Ee,ke,Fe,ae),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function he(ge,Se){Se===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Se.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(s===null)return;let Se=ge.near,$e=ge.far;x.texture!==null&&(x.depthNear>0&&(Se=x.depthNear),x.depthFar>0&&($e=x.depthFar)),F.near=B.near=O.near=Se,F.far=B.far=O.far=$e,(U!==F.near||G!==F.far)&&(s.updateRenderState({depthNear:F.near,depthFar:F.far}),U=F.near,G=F.far),O.layers.mask=ge.layers.mask|2,B.layers.mask=ge.layers.mask|4,F.layers.mask=O.layers.mask|B.layers.mask;const oe=ge.parent,me=F.cameras;he(F,oe);for(let _e=0;_e<me.length;_e++)he(me[_e],oe);me.length===2?ee(F,O,B):F.projectionMatrix.copy(O.projectionMatrix),pe(ge,F,oe)};function pe(ge,Se,$e){$e===null?ge.matrix.copy(Se.matrixWorld):(ge.matrix.copy($e.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Se.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Se.projectionMatrix),ge.projectionMatrixInverse.copy(Se.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=RAD2DEG*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(y===null&&_===null))return d},this.setFoveation=function(ge){d=ge,y!==null&&(y.fixedFoveation=ge),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ge)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(F)};let ce=null;function ye(ge,Se){if(v=Se.getViewerPose(f||c),S=Se,v!==null){const $e=v.views;_!==null&&(n.setRenderTargetFramebuffer(E,_.framebuffer),n.setRenderTarget(E));let oe=!1;$e.length!==F.cameras.length&&(F.cameras.length=0,oe=!0);for(let Te=0;Te<$e.length;Te++){const Le=$e[Te];let Ge=null;if(_!==null)Ge=_.getViewport(Le);else{const J=g.getViewSubImage(y,Le);Ge=J.viewport,Te===0&&(n.setRenderTargetTextures(E,J.colorTexture,J.depthStencilTexture),n.setRenderTarget(E))}let se=V[Te];se===void 0&&(se=new PerspectiveCamera,se.layers.enable(Te),se.viewport=new Vector4,V[Te]=se),se.matrix.fromArray(Le.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(Le.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),Te===0&&(F.matrix.copy(se.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),oe===!0&&F.cameras.push(se)}const me=s.enabledFeatures;if(me&&me.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const Te=g.getDepthInformation($e[0]);Te&&Te.isValid&&Te.texture&&x.init(n,Te,s.renderState)}}for(let $e=0;$e<P.length;$e++){const oe=D[$e],me=P[$e];oe!==null&&me!==void 0&&me.update(oe,Se,f||c)}ce&&ce(ge,Se),Se.detectedPlanes&&o.dispatchEvent({type:"planesdetected",data:Se}),S=null}const we=new WebGLAnimation;we.setAnimationLoop(ye),this.setAnimationLoop=function(ge){ce=ge},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(a,n){function r(T,w){T.matrixAutoUpdate===!0&&T.updateMatrix(),w.value.copy(T.matrix)}function o(T,w){w.color.getRGB(T.fogColor.value,getUnlitUniformColorSpace(a)),w.isFog?(T.fogNear.value=w.near,T.fogFar.value=w.far):w.isFogExp2&&(T.fogDensity.value=w.density)}function s(T,w,E,P,D){w.isMeshBasicMaterial||w.isMeshLambertMaterial?l(T,w):w.isMeshToonMaterial?(l(T,w),g(T,w)):w.isMeshPhongMaterial?(l(T,w),v(T,w)):w.isMeshStandardMaterial?(l(T,w),y(T,w),w.isMeshPhysicalMaterial&&_(T,w,D)):w.isMeshMatcapMaterial?(l(T,w),S(T,w)):w.isMeshDepthMaterial?l(T,w):w.isMeshDistanceMaterial?(l(T,w),x(T,w)):w.isMeshNormalMaterial?l(T,w):w.isLineBasicMaterial?(c(T,w),w.isLineDashedMaterial&&u(T,w)):w.isPointsMaterial?d(T,w,E,P):w.isSpriteMaterial?f(T,w):w.isShadowMaterial?(T.color.value.copy(w.color),T.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function l(T,w){T.opacity.value=w.opacity,w.color&&T.diffuse.value.copy(w.color),w.emissive&&T.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(T.map.value=w.map,r(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,r(w.alphaMap,T.alphaMapTransform)),w.bumpMap&&(T.bumpMap.value=w.bumpMap,r(w.bumpMap,T.bumpMapTransform),T.bumpScale.value=w.bumpScale,w.side===BackSide&&(T.bumpScale.value*=-1)),w.normalMap&&(T.normalMap.value=w.normalMap,r(w.normalMap,T.normalMapTransform),T.normalScale.value.copy(w.normalScale),w.side===BackSide&&T.normalScale.value.negate()),w.displacementMap&&(T.displacementMap.value=w.displacementMap,r(w.displacementMap,T.displacementMapTransform),T.displacementScale.value=w.displacementScale,T.displacementBias.value=w.displacementBias),w.emissiveMap&&(T.emissiveMap.value=w.emissiveMap,r(w.emissiveMap,T.emissiveMapTransform)),w.specularMap&&(T.specularMap.value=w.specularMap,r(w.specularMap,T.specularMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest);const E=n.get(w),P=E.envMap,D=E.envMapRotation;P&&(T.envMap.value=P,_e1.copy(D),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),T.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),T.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=w.reflectivity,T.ior.value=w.ior,T.refractionRatio.value=w.refractionRatio),w.lightMap&&(T.lightMap.value=w.lightMap,T.lightMapIntensity.value=w.lightMapIntensity,r(w.lightMap,T.lightMapTransform)),w.aoMap&&(T.aoMap.value=w.aoMap,T.aoMapIntensity.value=w.aoMapIntensity,r(w.aoMap,T.aoMapTransform))}function c(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,w.map&&(T.map.value=w.map,r(w.map,T.mapTransform))}function u(T,w){T.dashSize.value=w.dashSize,T.totalSize.value=w.dashSize+w.gapSize,T.scale.value=w.scale}function d(T,w,E,P){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.size.value=w.size*E,T.scale.value=P*.5,w.map&&(T.map.value=w.map,r(w.map,T.uvTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,r(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function f(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.rotation.value=w.rotation,w.map&&(T.map.value=w.map,r(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,r(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function v(T,w){T.specular.value.copy(w.specular),T.shininess.value=Math.max(w.shininess,1e-4)}function g(T,w){w.gradientMap&&(T.gradientMap.value=w.gradientMap)}function y(T,w){T.metalness.value=w.metalness,w.metalnessMap&&(T.metalnessMap.value=w.metalnessMap,r(w.metalnessMap,T.metalnessMapTransform)),T.roughness.value=w.roughness,w.roughnessMap&&(T.roughnessMap.value=w.roughnessMap,r(w.roughnessMap,T.roughnessMapTransform)),w.envMap&&(T.envMapIntensity.value=w.envMapIntensity)}function _(T,w,E){T.ior.value=w.ior,w.sheen>0&&(T.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),T.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(T.sheenColorMap.value=w.sheenColorMap,r(w.sheenColorMap,T.sheenColorMapTransform)),w.sheenRoughnessMap&&(T.sheenRoughnessMap.value=w.sheenRoughnessMap,r(w.sheenRoughnessMap,T.sheenRoughnessMapTransform))),w.clearcoat>0&&(T.clearcoat.value=w.clearcoat,T.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(T.clearcoatMap.value=w.clearcoatMap,r(w.clearcoatMap,T.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,r(w.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(T.clearcoatNormalMap.value=w.clearcoatNormalMap,r(w.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===BackSide&&T.clearcoatNormalScale.value.negate())),w.dispersion>0&&(T.dispersion.value=w.dispersion),w.iridescence>0&&(T.iridescence.value=w.iridescence,T.iridescenceIOR.value=w.iridescenceIOR,T.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(T.iridescenceMap.value=w.iridescenceMap,r(w.iridescenceMap,T.iridescenceMapTransform)),w.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=w.iridescenceThicknessMap,r(w.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),w.transmission>0&&(T.transmission.value=w.transmission,T.transmissionSamplerMap.value=E.texture,T.transmissionSamplerSize.value.set(E.width,E.height),w.transmissionMap&&(T.transmissionMap.value=w.transmissionMap,r(w.transmissionMap,T.transmissionMapTransform)),T.thickness.value=w.thickness,w.thicknessMap&&(T.thicknessMap.value=w.thicknessMap,r(w.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=w.attenuationDistance,T.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(T.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(T.anisotropyMap.value=w.anisotropyMap,r(w.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=w.specularIntensity,T.specularColor.value.copy(w.specularColor),w.specularColorMap&&(T.specularColorMap.value=w.specularColorMap,r(w.specularColorMap,T.specularColorMapTransform)),w.specularIntensityMap&&(T.specularIntensityMap.value=w.specularIntensityMap,r(w.specularIntensityMap,T.specularIntensityMapTransform))}function S(T,w){w.matcap&&(T.matcap.value=w.matcap)}function x(T,w){const E=n.get(w).light;T.referencePosition.value.setFromMatrixPosition(E.matrixWorld),T.nearDistance.value=E.shadow.camera.near,T.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:o,refreshMaterialUniforms:s}}function WebGLUniformsGroups(a,n,r,o){let s={},l={},c=[];const u=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function d(E,P){const D=P.program;o.uniformBlockBinding(E,D)}function f(E,P){let D=s[E.id];D===void 0&&(S(E),D=v(E),s[E.id]=D,E.addEventListener("dispose",T));const L=P.program;o.updateUBOMapping(E,L);const $=n.render.frame;l[E.id]!==$&&(y(E),l[E.id]=$)}function v(E){const P=g();E.__bindingPointIndex=P;const D=a.createBuffer(),L=E.__size,$=E.usage;return a.bindBuffer(a.UNIFORM_BUFFER,D),a.bufferData(a.UNIFORM_BUFFER,L,$),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,P,D),D}function g(){for(let E=0;E<u;E++)if(c.indexOf(E)===-1)return c.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(E){const P=s[E.id],D=E.uniforms,L=E.__cache;a.bindBuffer(a.UNIFORM_BUFFER,P);for(let $=0,O=D.length;$<O;$++){const B=Array.isArray(D[$])?D[$]:[D[$]];for(let V=0,F=B.length;V<F;V++){const U=B[V];if(_(U,$,V,L)===!0){const G=U.__offset,W=Array.isArray(U.value)?U.value:[U.value];let j=0;for(let K=0;K<W.length;K++){const q=W[K],ie=x(q);typeof q=="number"||typeof q=="boolean"?(U.__data[0]=q,a.bufferSubData(a.UNIFORM_BUFFER,G+j,U.__data)):q.isMatrix3?(U.__data[0]=q.elements[0],U.__data[1]=q.elements[1],U.__data[2]=q.elements[2],U.__data[3]=0,U.__data[4]=q.elements[3],U.__data[5]=q.elements[4],U.__data[6]=q.elements[5],U.__data[7]=0,U.__data[8]=q.elements[6],U.__data[9]=q.elements[7],U.__data[10]=q.elements[8],U.__data[11]=0):(q.toArray(U.__data,j),j+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,G,U.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function _(E,P,D,L){const $=E.value,O=P+"_"+D;if(L[O]===void 0)return typeof $=="number"||typeof $=="boolean"?L[O]=$:L[O]=$.clone(),!0;{const B=L[O];if(typeof $=="number"||typeof $=="boolean"){if(B!==$)return L[O]=$,!0}else if(B.equals($)===!1)return B.copy($),!0}return!1}function S(E){const P=E.uniforms;let D=0;const L=16;for(let O=0,B=P.length;O<B;O++){const V=Array.isArray(P[O])?P[O]:[P[O]];for(let F=0,U=V.length;F<U;F++){const G=V[F],W=Array.isArray(G.value)?G.value:[G.value];for(let j=0,K=W.length;j<K;j++){const q=W[j],ie=x(q),ee=D%L,he=ee%ie.boundary,pe=ee+he;D+=he,pe!==0&&L-pe<ie.storage&&(D+=L-pe),G.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=D,D+=ie.storage}}}const $=D%L;return $>0&&(D+=L-$),E.__size=D,E.__cache={},this}function x(E){const P={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(P.boundary=4,P.storage=4):E.isVector2?(P.boundary=8,P.storage=8):E.isVector3||E.isColor?(P.boundary=16,P.storage=12):E.isVector4?(P.boundary=16,P.storage=16):E.isMatrix3?(P.boundary=48,P.storage=48):E.isMatrix4?(P.boundary=64,P.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),P}function T(E){const P=E.target;P.removeEventListener("dispose",T);const D=c.indexOf(P.__bindingPointIndex);c.splice(D,1),a.deleteBuffer(s[P.id]),delete s[P.id],delete l[P.id]}function w(){for(const E in s)a.deleteBuffer(s[E]);c=[],s={},l={}}return{bind:d,update:f,dispose:w}}class WebGLRenderer{constructor(n={}){const{canvas:r=createCanvasElement(),context:o=null,depth:s=!0,stencil:l=!1,alpha:c=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:f=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=n;this.isWebGLRenderer=!0;let _;if(o!==null){if(typeof WebGLRenderingContext<"u"&&o instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=o.getContextAttributes().alpha}else _=c;const S=new Uint32Array(4),x=new Int32Array(4);let T=null,w=null;const E=[],P=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let L=!1;this._outputColorSpace=SRGBColorSpace;let $=0,O=0,B=null,V=-1,F=null;const U=new Vector4,G=new Vector4;let W=null;const j=new Color(0);let K=0,q=r.width,ie=r.height,ee=1,he=null,pe=null;const ce=new Vector4(0,0,q,ie),ye=new Vector4(0,0,q,ie);let we=!1;const ge=new Frustum;let Se=!1,$e=!1;const oe=new Matrix4,me=new Matrix4,_e=new Vector3,Te=new Vector4,Le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ge=!1;function se(){return B===null?ee:1}let J=o;function xe(le,Pe){return r.getContext(le,Pe)}try{const le={alpha:!0,depth:s,stencil:l,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:v,failIfMajorPerformanceCaveat:g};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${REVISION}`),r.addEventListener("webglcontextlost",Xe,!1),r.addEventListener("webglcontextrestored",ut,!1),r.addEventListener("webglcontextcreationerror",st,!1),J===null){const Pe="webgl2";if(J=xe(Pe,le),J===null)throw xe(Pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let De,Ae,Ie,ze,Fe,ae,Q,be,Ee,ke,Ne,Je,qe,Ze,Pt,je,ct,gt,St,at,Ct,bt,Bt,Ce;function ot(){De=new WebGLExtensions(J),De.init(),bt=new WebGLUtils(J,De),Ae=new WebGLCapabilities(J,De,n,bt),Ie=new WebGLState(J,De),Ae.reverseDepthBuffer&&y&&Ie.buffers.depth.setReversed(!0),ze=new WebGLInfo(J),Fe=new WebGLProperties,ae=new WebGLTextures(J,De,Ie,Fe,Ae,bt,ze),Q=new WebGLCubeMaps(D),be=new WebGLCubeUVMaps(D),Ee=new WebGLAttributes(J),Bt=new WebGLBindingStates(J,Ee),ke=new WebGLGeometries(J,Ee,ze,Bt),Ne=new WebGLObjects(J,ke,Ee,ze),St=new WebGLMorphtargets(J,Ae,ae),je=new WebGLClipping(Fe),Je=new WebGLPrograms(D,Q,be,De,Ae,Bt,je),qe=new WebGLMaterials(D,Fe),Ze=new WebGLRenderLists,Pt=new WebGLRenderStates(De),gt=new WebGLBackground(D,Q,be,Ie,Ne,_,d),ct=new WebGLShadowMap(D,Ne,Ae),Ce=new WebGLUniformsGroups(J,ze,Ae,Ie),at=new WebGLBufferRenderer(J,De,ze),Ct=new WebGLIndexedBufferRenderer(J,De,ze),ze.programs=Je.programs,D.capabilities=Ae,D.extensions=De,D.properties=Fe,D.renderLists=Ze,D.shadowMap=ct,D.state=Ie,D.info=ze}ot();const He=new WebXRManager(D,J);this.xr=He,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const le=De.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=De.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(le){le!==void 0&&(ee=le,this.setSize(q,ie,!1))},this.getSize=function(le){return le.set(q,ie)},this.setSize=function(le,Pe,Ve=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=le,ie=Pe,r.width=Math.floor(le*ee),r.height=Math.floor(Pe*ee),Ve===!0&&(r.style.width=le+"px",r.style.height=Pe+"px"),this.setViewport(0,0,le,Pe)},this.getDrawingBufferSize=function(le){return le.set(q*ee,ie*ee).floor()},this.setDrawingBufferSize=function(le,Pe,Ve){q=le,ie=Pe,ee=Ve,r.width=Math.floor(le*Ve),r.height=Math.floor(Pe*Ve),this.setViewport(0,0,le,Pe)},this.getCurrentViewport=function(le){return le.copy(U)},this.getViewport=function(le){return le.copy(ce)},this.setViewport=function(le,Pe,Ve,Ue){le.isVector4?ce.set(le.x,le.y,le.z,le.w):ce.set(le,Pe,Ve,Ue),Ie.viewport(U.copy(ce).multiplyScalar(ee).round())},this.getScissor=function(le){return le.copy(ye)},this.setScissor=function(le,Pe,Ve,Ue){le.isVector4?ye.set(le.x,le.y,le.z,le.w):ye.set(le,Pe,Ve,Ue),Ie.scissor(G.copy(ye).multiplyScalar(ee).round())},this.getScissorTest=function(){return we},this.setScissorTest=function(le){Ie.setScissorTest(we=le)},this.setOpaqueSort=function(le){he=le},this.setTransparentSort=function(le){pe=le},this.getClearColor=function(le){return le.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor(...arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha(...arguments)},this.clear=function(le=!0,Pe=!0,Ve=!0){let Ue=0;if(le){let Re=!1;if(B!==null){const Qe=B.texture.format;Re=Qe===RGBAIntegerFormat||Qe===RGIntegerFormat||Qe===RedIntegerFormat}if(Re){const Qe=B.texture.type,dt=Qe===UnsignedByteType||Qe===UnsignedIntType||Qe===UnsignedShortType||Qe===UnsignedInt248Type||Qe===UnsignedShort4444Type||Qe===UnsignedShort5551Type,vt=gt.getClearColor(),mt=gt.getClearAlpha(),Dt=vt.r,Rt=vt.g,_t=vt.b;dt?(S[0]=Dt,S[1]=Rt,S[2]=_t,S[3]=mt,J.clearBufferuiv(J.COLOR,0,S)):(x[0]=Dt,x[1]=Rt,x[2]=_t,x[3]=mt,J.clearBufferiv(J.COLOR,0,x))}else Ue|=J.COLOR_BUFFER_BIT}Pe&&(Ue|=J.DEPTH_BUFFER_BIT),Ve&&(Ue|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Xe,!1),r.removeEventListener("webglcontextrestored",ut,!1),r.removeEventListener("webglcontextcreationerror",st,!1),gt.dispose(),Ze.dispose(),Pt.dispose(),Fe.dispose(),Q.dispose(),be.dispose(),Ne.dispose(),Bt.dispose(),Ce.dispose(),Je.dispose(),He.dispose(),He.removeEventListener("sessionstart",Pn),He.removeEventListener("sessionend",hr),vn.stop()};function Xe(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ut(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const le=ze.autoReset,Pe=ct.enabled,Ve=ct.autoUpdate,Ue=ct.needsUpdate,Re=ct.type;ot(),ze.autoReset=le,ct.enabled=Pe,ct.autoUpdate=Ve,ct.needsUpdate=Ue,ct.type=Re}function st(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function At(le){const Pe=le.target;Pe.removeEventListener("dispose",At),Gt(Pe)}function Gt(le){Ut(le),Fe.remove(le)}function Ut(le){const Pe=Fe.get(le).programs;Pe!==void 0&&(Pe.forEach(function(Ve){Je.releaseProgram(Ve)}),le.isShaderMaterial&&Je.releaseShaderCache(le))}this.renderBufferDirect=function(le,Pe,Ve,Ue,Re,Qe){Pe===null&&(Pe=Le);const dt=Re.isMesh&&Re.matrixWorld.determinant()<0,vt=Jn(le,Pe,Ve,Ue,Re);Ie.setMaterial(Ue,dt);let mt=Ve.index,Dt=1;if(Ue.wireframe===!0){if(mt=ke.getWireframeAttribute(Ve),mt===void 0)return;Dt=2}const Rt=Ve.drawRange,_t=Ve.attributes.position;let Lt=Rt.start*Dt,$t=(Rt.start+Rt.count)*Dt;Qe!==null&&(Lt=Math.max(Lt,Qe.start*Dt),$t=Math.min($t,(Qe.start+Qe.count)*Dt)),mt!==null?(Lt=Math.max(Lt,0),$t=Math.min($t,mt.count)):_t!=null&&(Lt=Math.max(Lt,0),$t=Math.min($t,_t.count));const Yt=$t-Lt;if(Yt<0||Yt===1/0)return;Bt.setup(Re,Ue,vt,Ve,mt);let Wt,Ot=at;if(mt!==null&&(Wt=Ee.get(mt),Ot=Ct,Ot.setIndex(Wt)),Re.isMesh)Ue.wireframe===!0?(Ie.setLineWidth(Ue.wireframeLinewidth*se()),Ot.setMode(J.LINES)):Ot.setMode(J.TRIANGLES);else if(Re.isLine){let xt=Ue.linewidth;xt===void 0&&(xt=1),Ie.setLineWidth(xt*se()),Re.isLineSegments?Ot.setMode(J.LINES):Re.isLineLoop?Ot.setMode(J.LINE_LOOP):Ot.setMode(J.LINE_STRIP)}else Re.isPoints?Ot.setMode(J.POINTS):Re.isSprite&&Ot.setMode(J.TRIANGLES);if(Re.isBatchedMesh)if(Re._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ot.renderMultiDrawInstances(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount,Re._multiDrawInstances);else if(De.get("WEBGL_multi_draw"))Ot.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else{const xt=Re._multiDrawStarts,jt=Re._multiDrawCounts,kt=Re._multiDrawCount,an=mt?Ee.get(mt).bytesPerElement:1,dn=Fe.get(Ue).currentProgram.getUniforms();for(let Xt=0;Xt<kt;Xt++)dn.setValue(J,"_gl_DrawID",Xt),Ot.render(xt[Xt]/an,jt[Xt])}else if(Re.isInstancedMesh)Ot.renderInstances(Lt,Yt,Re.count);else if(Ve.isInstancedBufferGeometry){const xt=Ve._maxInstanceCount!==void 0?Ve._maxInstanceCount:1/0,jt=Math.min(Ve.instanceCount,xt);Ot.renderInstances(Lt,Yt,jt)}else Ot.render(Lt,Yt)};function it(le,Pe,Ve){le.transparent===!0&&le.side===DoubleSide&&le.forceSinglePass===!1?(le.side=BackSide,le.needsUpdate=!0,Vn(le,Pe,Ve),le.side=FrontSide,le.needsUpdate=!0,Vn(le,Pe,Ve),le.side=DoubleSide):Vn(le,Pe,Ve)}this.compile=function(le,Pe,Ve=null){Ve===null&&(Ve=le),w=Pt.get(Ve),w.init(Pe),P.push(w),Ve.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Pe.layers)&&(w.pushLight(Re),Re.castShadow&&w.pushShadow(Re))}),le!==Ve&&le.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Pe.layers)&&(w.pushLight(Re),Re.castShadow&&w.pushShadow(Re))}),w.setupLights();const Ue=new Set;return le.traverse(function(Re){if(!(Re.isMesh||Re.isPoints||Re.isLine||Re.isSprite))return;const Qe=Re.material;if(Qe)if(Array.isArray(Qe))for(let dt=0;dt<Qe.length;dt++){const vt=Qe[dt];it(vt,Ve,Re),Ue.add(vt)}else it(Qe,Ve,Re),Ue.add(Qe)}),w=P.pop(),Ue},this.compileAsync=function(le,Pe,Ve=null){const Ue=this.compile(le,Pe,Ve);return new Promise(Re=>{function Qe(){if(Ue.forEach(function(dt){Fe.get(dt).currentProgram.isReady()&&Ue.delete(dt)}),Ue.size===0){Re(le);return}setTimeout(Qe,10)}De.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let Jt=null;function hn(le){Jt&&Jt(le)}function Pn(){vn.stop()}function hr(){vn.start()}const vn=new WebGLAnimation;vn.setAnimationLoop(hn),typeof self<"u"&&vn.setContext(self),this.setAnimationLoop=function(le){Jt=le,He.setAnimationLoop(le),le===null?vn.stop():vn.start()},He.addEventListener("sessionstart",Pn),He.addEventListener("sessionend",hr),this.render=function(le,Pe){if(Pe!==void 0&&Pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Pe.parent===null&&Pe.matrixWorldAutoUpdate===!0&&Pe.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(Pe),Pe=He.getCamera()),le.isScene===!0&&le.onBeforeRender(D,le,Pe,B),w=Pt.get(le,P.length),w.init(Pe),P.push(w),me.multiplyMatrices(Pe.projectionMatrix,Pe.matrixWorldInverse),ge.setFromProjectionMatrix(me),$e=this.localClippingEnabled,Se=je.init(this.clippingPlanes,$e),T=Ze.get(le,E.length),T.init(),E.push(T),He.enabled===!0&&He.isPresenting===!0){const Qe=D.xr.getDepthSensingMesh();Qe!==null&&Bn(Qe,Pe,-1/0,D.sortObjects)}Bn(le,Pe,0,D.sortObjects),T.finish(),D.sortObjects===!0&&T.sort(he,pe),Ge=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,Ge&&gt.addToRenderList(T,le),this.info.render.frame++,Se===!0&&je.beginShadows();const Ve=w.state.shadowsArray;ct.render(Ve,le,Pe),Se===!0&&je.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ue=T.opaque,Re=T.transmissive;if(w.setupLights(),Pe.isArrayCamera){const Qe=Pe.cameras;if(Re.length>0)for(let dt=0,vt=Qe.length;dt<vt;dt++){const mt=Qe[dt];dr(Ue,Re,le,mt)}Ge&&gt.render(le);for(let dt=0,vt=Qe.length;dt<vt;dt++){const mt=Qe[dt];Zn(T,le,mt,mt.viewport)}}else Re.length>0&&dr(Ue,Re,le,Pe),Ge&&gt.render(le),Zn(T,le,Pe);B!==null&&O===0&&(ae.updateMultisampleRenderTarget(B),ae.updateRenderTargetMipmap(B)),le.isScene===!0&&le.onAfterRender(D,le,Pe),Bt.resetDefaultState(),V=-1,F=null,P.pop(),P.length>0?(w=P[P.length-1],Se===!0&&je.setGlobalState(D.clippingPlanes,w.state.camera)):w=null,E.pop(),E.length>0?T=E[E.length-1]:T=null};function Bn(le,Pe,Ve,Ue){if(le.visible===!1)return;if(le.layers.test(Pe.layers)){if(le.isGroup)Ve=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Pe);else if(le.isLight)w.pushLight(le),le.castShadow&&w.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||ge.intersectsSprite(le)){Ue&&Te.setFromMatrixPosition(le.matrixWorld).applyMatrix4(me);const dt=Ne.update(le),vt=le.material;vt.visible&&T.push(le,dt,vt,Ve,Te.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(!le.frustumCulled||ge.intersectsObject(le))){const dt=Ne.update(le),vt=le.material;if(Ue&&(le.boundingSphere!==void 0?(le.boundingSphere===null&&le.computeBoundingSphere(),Te.copy(le.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),Te.copy(dt.boundingSphere.center)),Te.applyMatrix4(le.matrixWorld).applyMatrix4(me)),Array.isArray(vt)){const mt=dt.groups;for(let Dt=0,Rt=mt.length;Dt<Rt;Dt++){const _t=mt[Dt],Lt=vt[_t.materialIndex];Lt&&Lt.visible&&T.push(le,dt,Lt,Ve,Te.z,_t)}}else vt.visible&&T.push(le,dt,vt,Ve,Te.z,null)}}const Qe=le.children;for(let dt=0,vt=Qe.length;dt<vt;dt++)Bn(Qe[dt],Pe,Ve,Ue)}function Zn(le,Pe,Ve,Ue){const Re=le.opaque,Qe=le.transmissive,dt=le.transparent;w.setupLightsView(Ve),Se===!0&&je.setGlobalState(D.clippingPlanes,Ve),Ue&&Ie.viewport(U.copy(Ue)),Re.length>0&&Rn(Re,Pe,Ve),Qe.length>0&&Rn(Qe,Pe,Ve),dt.length>0&&Rn(dt,Pe,Ve),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function dr(le,Pe,Ve,Ue){if((Ve.isScene===!0?Ve.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[Ue.id]===void 0&&(w.state.transmissionRenderTarget[Ue.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")||De.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const Qe=w.state.transmissionRenderTarget[Ue.id],dt=Ue.viewport||U;Qe.setSize(dt.z*D.transmissionResolutionScale,dt.w*D.transmissionResolutionScale);const vt=D.getRenderTarget();D.setRenderTarget(Qe),D.getClearColor(j),K=D.getClearAlpha(),K<1&&D.setClearColor(16777215,.5),D.clear(),Ge&&gt.render(Ve);const mt=D.toneMapping;D.toneMapping=NoToneMapping;const Dt=Ue.viewport;if(Ue.viewport!==void 0&&(Ue.viewport=void 0),w.setupLightsView(Ue),Se===!0&&je.setGlobalState(D.clippingPlanes,Ue),Rn(le,Ve,Ue),ae.updateMultisampleRenderTarget(Qe),ae.updateRenderTargetMipmap(Qe),De.has("WEBGL_multisampled_render_to_texture")===!1){let Rt=!1;for(let _t=0,Lt=Pe.length;_t<Lt;_t++){const $t=Pe[_t],Yt=$t.object,Wt=$t.geometry,Ot=$t.material,xt=$t.group;if(Ot.side===DoubleSide&&Yt.layers.test(Ue.layers)){const jt=Ot.side;Ot.side=BackSide,Ot.needsUpdate=!0,fr(Yt,Ve,Ue,Wt,Ot,xt),Ot.side=jt,Ot.needsUpdate=!0,Rt=!0}}Rt===!0&&(ae.updateMultisampleRenderTarget(Qe),ae.updateRenderTargetMipmap(Qe))}D.setRenderTarget(vt),D.setClearColor(j,K),Dt!==void 0&&(Ue.viewport=Dt),D.toneMapping=mt}function Rn(le,Pe,Ve){const Ue=Pe.isScene===!0?Pe.overrideMaterial:null;for(let Re=0,Qe=le.length;Re<Qe;Re++){const dt=le[Re],vt=dt.object,mt=dt.geometry,Dt=dt.group;let Rt=dt.material;Rt.allowOverride===!0&&Ue!==null&&(Rt=Ue),vt.layers.test(Ve.layers)&&fr(vt,Pe,Ve,mt,Rt,Dt)}}function fr(le,Pe,Ve,Ue,Re,Qe){le.onBeforeRender(D,Pe,Ve,Ue,Re,Qe),le.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),Re.onBeforeRender(D,Pe,Ve,Ue,le,Qe),Re.transparent===!0&&Re.side===DoubleSide&&Re.forceSinglePass===!1?(Re.side=BackSide,Re.needsUpdate=!0,D.renderBufferDirect(Ve,Pe,Ue,Re,le,Qe),Re.side=FrontSide,Re.needsUpdate=!0,D.renderBufferDirect(Ve,Pe,Ue,Re,le,Qe),Re.side=DoubleSide):D.renderBufferDirect(Ve,Pe,Ue,Re,le,Qe),le.onAfterRender(D,Pe,Ve,Ue,Re,Qe)}function Vn(le,Pe,Ve){Pe.isScene!==!0&&(Pe=Le);const Ue=Fe.get(le),Re=w.state.lights,Qe=w.state.shadowsArray,dt=Re.state.version,vt=Je.getParameters(le,Re.state,Qe,Pe,Ve),mt=Je.getProgramCacheKey(vt);let Dt=Ue.programs;Ue.environment=le.isMeshStandardMaterial?Pe.environment:null,Ue.fog=Pe.fog,Ue.envMap=(le.isMeshStandardMaterial?be:Q).get(le.envMap||Ue.environment),Ue.envMapRotation=Ue.environment!==null&&le.envMap===null?Pe.environmentRotation:le.envMapRotation,Dt===void 0&&(le.addEventListener("dispose",At),Dt=new Map,Ue.programs=Dt);let Rt=Dt.get(mt);if(Rt!==void 0){if(Ue.currentProgram===Rt&&Ue.lightsStateVersion===dt)return Fn(le,vt),Rt}else vt.uniforms=Je.getUniforms(le),le.onBeforeCompile(vt,D),Rt=Je.acquireProgram(vt,mt),Dt.set(mt,Rt),Ue.uniforms=vt.uniforms;const _t=Ue.uniforms;return(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(_t.clippingPlanes=je.uniform),Fn(le,vt),Ue.needsLights=Qn(le),Ue.lightsStateVersion=dt,Ue.needsLights&&(_t.ambientLightColor.value=Re.state.ambient,_t.lightProbe.value=Re.state.probe,_t.directionalLights.value=Re.state.directional,_t.directionalLightShadows.value=Re.state.directionalShadow,_t.spotLights.value=Re.state.spot,_t.spotLightShadows.value=Re.state.spotShadow,_t.rectAreaLights.value=Re.state.rectArea,_t.ltc_1.value=Re.state.rectAreaLTC1,_t.ltc_2.value=Re.state.rectAreaLTC2,_t.pointLights.value=Re.state.point,_t.pointLightShadows.value=Re.state.pointShadow,_t.hemisphereLights.value=Re.state.hemi,_t.directionalShadowMap.value=Re.state.directionalShadowMap,_t.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,_t.spotShadowMap.value=Re.state.spotShadowMap,_t.spotLightMatrix.value=Re.state.spotLightMatrix,_t.spotLightMap.value=Re.state.spotLightMap,_t.pointShadowMap.value=Re.state.pointShadowMap,_t.pointShadowMatrix.value=Re.state.pointShadowMatrix),Ue.currentProgram=Rt,Ue.uniformsList=null,Rt}function pr(le){if(le.uniformsList===null){const Pe=le.currentProgram.getUniforms();le.uniformsList=WebGLUniforms.seqWithValue(Pe.seq,le.uniforms)}return le.uniformsList}function Fn(le,Pe){const Ve=Fe.get(le);Ve.outputColorSpace=Pe.outputColorSpace,Ve.batching=Pe.batching,Ve.batchingColor=Pe.batchingColor,Ve.instancing=Pe.instancing,Ve.instancingColor=Pe.instancingColor,Ve.instancingMorph=Pe.instancingMorph,Ve.skinning=Pe.skinning,Ve.morphTargets=Pe.morphTargets,Ve.morphNormals=Pe.morphNormals,Ve.morphColors=Pe.morphColors,Ve.morphTargetsCount=Pe.morphTargetsCount,Ve.numClippingPlanes=Pe.numClippingPlanes,Ve.numIntersection=Pe.numClipIntersection,Ve.vertexAlphas=Pe.vertexAlphas,Ve.vertexTangents=Pe.vertexTangents,Ve.toneMapping=Pe.toneMapping}function Jn(le,Pe,Ve,Ue,Re){Pe.isScene!==!0&&(Pe=Le),ae.resetTextureUnits();const Qe=Pe.fog,dt=Ue.isMeshStandardMaterial?Pe.environment:null,vt=B===null?D.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:LinearSRGBColorSpace,mt=(Ue.isMeshStandardMaterial?be:Q).get(Ue.envMap||dt),Dt=Ue.vertexColors===!0&&!!Ve.attributes.color&&Ve.attributes.color.itemSize===4,Rt=!!Ve.attributes.tangent&&(!!Ue.normalMap||Ue.anisotropy>0),_t=!!Ve.morphAttributes.position,Lt=!!Ve.morphAttributes.normal,$t=!!Ve.morphAttributes.color;let Yt=NoToneMapping;Ue.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Yt=D.toneMapping);const Wt=Ve.morphAttributes.position||Ve.morphAttributes.normal||Ve.morphAttributes.color,Ot=Wt!==void 0?Wt.length:0,xt=Fe.get(Ue),jt=w.state.lights;if(Se===!0&&($e===!0||le!==F)){const Mt=le===F&&Ue.id===V;je.setState(Ue,le,Mt)}let kt=!1;Ue.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==jt.state.version||xt.outputColorSpace!==vt||Re.isBatchedMesh&&xt.batching===!1||!Re.isBatchedMesh&&xt.batching===!0||Re.isBatchedMesh&&xt.batchingColor===!0&&Re.colorTexture===null||Re.isBatchedMesh&&xt.batchingColor===!1&&Re.colorTexture!==null||Re.isInstancedMesh&&xt.instancing===!1||!Re.isInstancedMesh&&xt.instancing===!0||Re.isSkinnedMesh&&xt.skinning===!1||!Re.isSkinnedMesh&&xt.skinning===!0||Re.isInstancedMesh&&xt.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&xt.instancingColor===!1&&Re.instanceColor!==null||Re.isInstancedMesh&&xt.instancingMorph===!0&&Re.morphTexture===null||Re.isInstancedMesh&&xt.instancingMorph===!1&&Re.morphTexture!==null||xt.envMap!==mt||Ue.fog===!0&&xt.fog!==Qe||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==je.numPlanes||xt.numIntersection!==je.numIntersection)||xt.vertexAlphas!==Dt||xt.vertexTangents!==Rt||xt.morphTargets!==_t||xt.morphNormals!==Lt||xt.morphColors!==$t||xt.toneMapping!==Yt||xt.morphTargetsCount!==Ot)&&(kt=!0):(kt=!0,xt.__version=Ue.version);let an=xt.currentProgram;kt===!0&&(an=Vn(Ue,Pe,Re));let dn=!1,Xt=!1,gn=!1;const Ft=an.getUniforms(),rn=xt.uniforms;if(Ie.useProgram(an.program)&&(dn=!0,Xt=!0,gn=!0),Ue.id!==V&&(V=Ue.id,Xt=!0),dn||F!==le){Ie.buffers.depth.getReversed()?(oe.copy(le.projectionMatrix),toNormalizedProjectionMatrix(oe),toReversedProjectionMatrix(oe),Ft.setValue(J,"projectionMatrix",oe)):Ft.setValue(J,"projectionMatrix",le.projectionMatrix),Ft.setValue(J,"viewMatrix",le.matrixWorldInverse);const Qt=Ft.map.cameraPosition;Qt!==void 0&&Qt.setValue(J,_e.setFromMatrixPosition(le.matrixWorld)),Ae.logarithmicDepthBuffer&&Ft.setValue(J,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&Ft.setValue(J,"isOrthographic",le.isOrthographicCamera===!0),F!==le&&(F=le,Xt=!0,gn=!0)}if(Re.isSkinnedMesh){Ft.setOptional(J,Re,"bindMatrix"),Ft.setOptional(J,Re,"bindMatrixInverse");const Mt=Re.skeleton;Mt&&(Mt.boneTexture===null&&Mt.computeBoneTexture(),Ft.setValue(J,"boneTexture",Mt.boneTexture,ae))}Re.isBatchedMesh&&(Ft.setOptional(J,Re,"batchingTexture"),Ft.setValue(J,"batchingTexture",Re._matricesTexture,ae),Ft.setOptional(J,Re,"batchingIdTexture"),Ft.setValue(J,"batchingIdTexture",Re._indirectTexture,ae),Ft.setOptional(J,Re,"batchingColorTexture"),Re._colorsTexture!==null&&Ft.setValue(J,"batchingColorTexture",Re._colorsTexture,ae));const sn=Ve.morphAttributes;if((sn.position!==void 0||sn.normal!==void 0||sn.color!==void 0)&&St.update(Re,Ve,an),(Xt||xt.receiveShadow!==Re.receiveShadow)&&(xt.receiveShadow=Re.receiveShadow,Ft.setValue(J,"receiveShadow",Re.receiveShadow)),Ue.isMeshGouraudMaterial&&Ue.envMap!==null&&(rn.envMap.value=mt,rn.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),Ue.isMeshStandardMaterial&&Ue.envMap===null&&Pe.environment!==null&&(rn.envMapIntensity.value=Pe.environmentIntensity),Xt&&(Ft.setValue(J,"toneMappingExposure",D.toneMappingExposure),xt.needsLights&&Dn(rn,gn),Qe&&Ue.fog===!0&&qe.refreshFogUniforms(rn,Qe),qe.refreshMaterialUniforms(rn,Ue,ee,ie,w.state.transmissionRenderTarget[le.id]),WebGLUniforms.upload(J,pr(xt),rn,ae)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(J,pr(xt),rn,ae),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&Ft.setValue(J,"center",Re.center),Ft.setValue(J,"modelViewMatrix",Re.modelViewMatrix),Ft.setValue(J,"normalMatrix",Re.normalMatrix),Ft.setValue(J,"modelMatrix",Re.matrixWorld),Ue.isShaderMaterial||Ue.isRawShaderMaterial){const Mt=Ue.uniformsGroups;for(let Qt=0,Sn=Mt.length;Qt<Sn;Qt++){const ln=Mt[Qt];Ce.update(ln,an),Ce.bind(ln,an)}}return an}function Dn(le,Pe){le.ambientLightColor.needsUpdate=Pe,le.lightProbe.needsUpdate=Pe,le.directionalLights.needsUpdate=Pe,le.directionalLightShadows.needsUpdate=Pe,le.pointLights.needsUpdate=Pe,le.pointLightShadows.needsUpdate=Pe,le.spotLights.needsUpdate=Pe,le.spotLightShadows.needsUpdate=Pe,le.rectAreaLights.needsUpdate=Pe,le.hemisphereLights.needsUpdate=Pe}function Qn(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(le,Pe,Ve){const Ue=Fe.get(le);Ue.__autoAllocateDepthBuffer=le.resolveDepthBuffer===!1,Ue.__autoAllocateDepthBuffer===!1&&(Ue.__useRenderToTexture=!1),Fe.get(le.texture).__webglTexture=Pe,Fe.get(le.depthTexture).__webglTexture=Ue.__autoAllocateDepthBuffer?void 0:Ve,Ue.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(le,Pe){const Ve=Fe.get(le);Ve.__webglFramebuffer=Pe,Ve.__useDefaultFramebuffer=Pe===void 0};const Cr=J.createFramebuffer();this.setRenderTarget=function(le,Pe=0,Ve=0){B=le,$=Pe,O=Ve;let Ue=!0,Re=null,Qe=!1,dt=!1;if(le){const mt=Fe.get(le);if(mt.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(J.FRAMEBUFFER,null),Ue=!1;else if(mt.__webglFramebuffer===void 0)ae.setupRenderTarget(le);else if(mt.__hasExternalTextures)ae.rebindTextures(le,Fe.get(le.texture).__webglTexture,Fe.get(le.depthTexture).__webglTexture);else if(le.depthBuffer){const _t=le.depthTexture;if(mt.__boundDepthTexture!==_t){if(_t!==null&&Fe.has(_t)&&(le.width!==_t.image.width||le.height!==_t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ae.setupDepthRenderbuffer(le)}}const Dt=le.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(dt=!0);const Rt=Fe.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Array.isArray(Rt[Pe])?Re=Rt[Pe][Ve]:Re=Rt[Pe],Qe=!0):le.samples>0&&ae.useMultisampledRTT(le)===!1?Re=Fe.get(le).__webglMultisampledFramebuffer:Array.isArray(Rt)?Re=Rt[Ve]:Re=Rt,U.copy(le.viewport),G.copy(le.scissor),W=le.scissorTest}else U.copy(ce).multiplyScalar(ee).floor(),G.copy(ye).multiplyScalar(ee).floor(),W=we;if(Ve!==0&&(Re=Cr),Ie.bindFramebuffer(J.FRAMEBUFFER,Re)&&Ue&&Ie.drawBuffers(le,Re),Ie.viewport(U),Ie.scissor(G),Ie.setScissorTest(W),Qe){const mt=Fe.get(le.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,mt.__webglTexture,Ve)}else if(dt){const mt=Fe.get(le.texture),Dt=Pe;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,mt.__webglTexture,Ve,Dt)}else if(le!==null&&Ve!==0){const mt=Fe.get(le.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,mt.__webglTexture,Ve)}V=-1},this.readRenderTargetPixels=function(le,Pe,Ve,Ue,Re,Qe,dt){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=Fe.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt){Ie.bindFramebuffer(J.FRAMEBUFFER,vt);try{const mt=le.texture,Dt=mt.format,Rt=mt.type;if(!Ae.textureFormatReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Pe>=0&&Pe<=le.width-Ue&&Ve>=0&&Ve<=le.height-Re&&J.readPixels(Pe,Ve,Ue,Re,bt.convert(Dt),bt.convert(Rt),Qe)}finally{const mt=B!==null?Fe.get(B).__webglFramebuffer:null;Ie.bindFramebuffer(J.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=async function(le,Pe,Ve,Ue,Re,Qe,dt){if(!(le&&le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=Fe.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&dt!==void 0&&(vt=vt[dt]),vt)if(Pe>=0&&Pe<=le.width-Ue&&Ve>=0&&Ve<=le.height-Re){Ie.bindFramebuffer(J.FRAMEBUFFER,vt);const mt=le.texture,Dt=mt.format,Rt=mt.type;if(!Ae.textureFormatReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const _t=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,_t),J.bufferData(J.PIXEL_PACK_BUFFER,Qe.byteLength,J.STREAM_READ),J.readPixels(Pe,Ve,Ue,Re,bt.convert(Dt),bt.convert(Rt),0);const Lt=B!==null?Fe.get(B).__webglFramebuffer:null;Ie.bindFramebuffer(J.FRAMEBUFFER,Lt);const $t=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await probeAsync(J,$t,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,_t),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,Qe),J.deleteBuffer(_t),J.deleteSync($t),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(le,Pe=null,Ve=0){const Ue=Math.pow(2,-Ve),Re=Math.floor(le.image.width*Ue),Qe=Math.floor(le.image.height*Ue),dt=Pe!==null?Pe.x:0,vt=Pe!==null?Pe.y:0;ae.setTexture2D(le,0),J.copyTexSubImage2D(J.TEXTURE_2D,Ve,0,0,dt,vt,Re,Qe),Ie.unbindTexture()};const vr=J.createFramebuffer(),gr=J.createFramebuffer();this.copyTextureToTexture=function(le,Pe,Ve=null,Ue=null,Re=0,Qe=null){Qe===null&&(Re!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Qe=Re,Re=0):Qe=0);let dt,vt,mt,Dt,Rt,_t,Lt,$t,Yt;const Wt=le.isCompressedTexture?le.mipmaps[Qe]:le.image;if(Ve!==null)dt=Ve.max.x-Ve.min.x,vt=Ve.max.y-Ve.min.y,mt=Ve.isBox3?Ve.max.z-Ve.min.z:1,Dt=Ve.min.x,Rt=Ve.min.y,_t=Ve.isBox3?Ve.min.z:0;else{const sn=Math.pow(2,-Re);dt=Math.floor(Wt.width*sn),vt=Math.floor(Wt.height*sn),le.isDataArrayTexture?mt=Wt.depth:le.isData3DTexture?mt=Math.floor(Wt.depth*sn):mt=1,Dt=0,Rt=0,_t=0}Ue!==null?(Lt=Ue.x,$t=Ue.y,Yt=Ue.z):(Lt=0,$t=0,Yt=0);const Ot=bt.convert(Pe.format),xt=bt.convert(Pe.type);let jt;Pe.isData3DTexture?(ae.setTexture3D(Pe,0),jt=J.TEXTURE_3D):Pe.isDataArrayTexture||Pe.isCompressedArrayTexture?(ae.setTexture2DArray(Pe,0),jt=J.TEXTURE_2D_ARRAY):(ae.setTexture2D(Pe,0),jt=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,Pe.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,Pe.unpackAlignment);const kt=J.getParameter(J.UNPACK_ROW_LENGTH),an=J.getParameter(J.UNPACK_IMAGE_HEIGHT),dn=J.getParameter(J.UNPACK_SKIP_PIXELS),Xt=J.getParameter(J.UNPACK_SKIP_ROWS),gn=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,Wt.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Wt.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,Dt),J.pixelStorei(J.UNPACK_SKIP_ROWS,Rt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,_t);const Ft=le.isDataArrayTexture||le.isData3DTexture,rn=Pe.isDataArrayTexture||Pe.isData3DTexture;if(le.isDepthTexture){const sn=Fe.get(le),Mt=Fe.get(Pe),Qt=Fe.get(sn.__renderTarget),Sn=Fe.get(Mt.__renderTarget);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,Qt.__webglFramebuffer),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,Sn.__webglFramebuffer);for(let ln=0;ln<mt;ln++)Ft&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Fe.get(le).__webglTexture,Re,_t+ln),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Fe.get(Pe).__webglTexture,Qe,Yt+ln)),J.blitFramebuffer(Dt,Rt,dt,vt,Lt,$t,dt,vt,J.DEPTH_BUFFER_BIT,J.NEAREST);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(Re!==0||le.isRenderTargetTexture||Fe.has(le)){const sn=Fe.get(le),Mt=Fe.get(Pe);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,vr),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,gr);for(let Qt=0;Qt<mt;Qt++)Ft?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,sn.__webglTexture,Re,_t+Qt):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,sn.__webglTexture,Re),rn?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Mt.__webglTexture,Qe,Yt+Qt):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Mt.__webglTexture,Qe),Re!==0?J.blitFramebuffer(Dt,Rt,dt,vt,Lt,$t,dt,vt,J.COLOR_BUFFER_BIT,J.NEAREST):rn?J.copyTexSubImage3D(jt,Qe,Lt,$t,Yt+Qt,Dt,Rt,dt,vt):J.copyTexSubImage2D(jt,Qe,Lt,$t,Dt,Rt,dt,vt);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else rn?le.isDataTexture||le.isData3DTexture?J.texSubImage3D(jt,Qe,Lt,$t,Yt,dt,vt,mt,Ot,xt,Wt.data):Pe.isCompressedArrayTexture?J.compressedTexSubImage3D(jt,Qe,Lt,$t,Yt,dt,vt,mt,Ot,Wt.data):J.texSubImage3D(jt,Qe,Lt,$t,Yt,dt,vt,mt,Ot,xt,Wt):le.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,Qe,Lt,$t,dt,vt,Ot,xt,Wt.data):le.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,Qe,Lt,$t,Wt.width,Wt.height,Ot,Wt.data):J.texSubImage2D(J.TEXTURE_2D,Qe,Lt,$t,dt,vt,Ot,xt,Wt);J.pixelStorei(J.UNPACK_ROW_LENGTH,kt),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,an),J.pixelStorei(J.UNPACK_SKIP_PIXELS,dn),J.pixelStorei(J.UNPACK_SKIP_ROWS,Xt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,gn),Qe===0&&Pe.generateMipmaps&&J.generateMipmap(jt),Ie.unbindTexture()},this.copyTextureToTexture3D=function(le,Pe,Ve=null,Ue=null,Re=0){return warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(le,Pe,Ve,Ue,Re)},this.initRenderTarget=function(le){Fe.get(le).__webglFramebuffer===void 0&&ae.setupRenderTarget(le)},this.initTexture=function(le){le.isCubeTexture?ae.setTextureCube(le,0):le.isData3DTexture?ae.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?ae.setTexture2DArray(le,0):ae.setTexture2D(le,0),Ie.unbindTexture()},this.resetState=function(){$=0,O=0,B=null,Ie.reset(),Bt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const r=this.getContext();r.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(n),r.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray=new Ray,_plane=new Plane,_TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD),_v=new Vector3,_twoPI=2*Math.PI,_STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},_EPS=1e-6;class OrbitControls extends Controls{constructor(n,r=null){super(n,r),this.state=_STATE.NONE,this.target=new Vector3,this.cursor=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Vector3,this._lastQuaternion=new Quaternion,this._lastTargetPosition=new Vector3,this._quat=new Quaternion().setFromUnitVectors(n.up,new Vector3(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Spherical,this._sphericalDelta=new Spherical,this._scale=1,this._panOffset=new Vector3,this._rotateStart=new Vector2,this._rotateEnd=new Vector2,this._rotateDelta=new Vector2,this._panStart=new Vector2,this._panEnd=new Vector2,this._panDelta=new Vector2,this._dollyStart=new Vector2,this._dollyEnd=new Vector2,this._dollyDelta=new Vector2,this._dollyDirection=new Vector3,this._mouse=new Vector2,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=onPointerMove.bind(this),this._onPointerDown=onPointerDown.bind(this),this._onPointerUp=onPointerUp.bind(this),this._onContextMenu=onContextMenu.bind(this),this._onMouseWheel=onMouseWheel.bind(this),this._onKeyDown=onKeyDown.bind(this),this._onTouchStart=onTouchStart.bind(this),this._onTouchMove=onTouchMove.bind(this),this._onMouseDown=onMouseDown.bind(this),this._onMouseMove=onMouseMove.bind(this),this._interceptControlDown=interceptControlDown.bind(this),this._interceptControlUp=interceptControlUp.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(n){super.connect(n),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(n){n.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=n}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(_changeEvent),this.update(),this.state=_STATE.NONE}update(n=null){const r=this.object.position;_v.copy(r).sub(this.target),_v.applyQuaternion(this._quat),this._spherical.setFromVector3(_v),this.autoRotate&&this.state===_STATE.NONE&&this._rotateLeft(this._getAutoRotationAngle(n)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let o=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(o)&&isFinite(s)&&(o<-Math.PI?o+=_twoPI:o>Math.PI&&(o-=_twoPI),s<-Math.PI?s+=_twoPI:s>Math.PI&&(s-=_twoPI),o<=s?this._spherical.theta=Math.max(o,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(o+s)/2?Math.max(o,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const c=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=c!=this._spherical.radius}if(_v.setFromSpherical(this._spherical),_v.applyQuaternion(this._quatInverse),r.copy(this.target).add(_v),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let c=null;if(this.object.isPerspectiveCamera){const u=_v.length();c=this._clampDistance(u*this._scale);const d=u-c;this.object.position.addScaledVector(this._dollyDirection,d),this.object.updateMatrixWorld(),l=!!d}else if(this.object.isOrthographicCamera){const u=new Vector3(this._mouse.x,this._mouse.y,0);u.unproject(this.object);const d=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=d!==this.object.zoom;const f=new Vector3(this._mouse.x,this._mouse.y,0);f.unproject(this.object),this.object.position.sub(f).add(u),this.object.updateMatrixWorld(),c=_v.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;c!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(c).add(this.object.position):(_ray.origin.copy(this.object.position),_ray.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(_ray.direction))<_TILT_LIMIT?this.object.lookAt(this.target):(_plane.setFromNormalAndCoplanarPoint(this.object.up,this.target),_ray.intersectPlane(_plane,this.target))))}else if(this.object.isOrthographicCamera){const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),c!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>_EPS||8*(1-this._lastQuaternion.dot(this.object.quaternion))>_EPS||this._lastTargetPosition.distanceToSquared(this.target)>_EPS?(this.dispatchEvent(_changeEvent),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(n){return n!==null?_twoPI/60*this.autoRotateSpeed*n:_twoPI/60/60*this.autoRotateSpeed}_getZoomScale(n){const r=Math.abs(n*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(n){this._sphericalDelta.theta-=n}_rotateUp(n){this._sphericalDelta.phi-=n}_panLeft(n,r){_v.setFromMatrixColumn(r,0),_v.multiplyScalar(-n),this._panOffset.add(_v)}_panUp(n,r){this.screenSpacePanning===!0?_v.setFromMatrixColumn(r,1):(_v.setFromMatrixColumn(r,0),_v.crossVectors(this.object.up,_v)),_v.multiplyScalar(n),this._panOffset.add(_v)}_pan(n,r){const o=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;_v.copy(s).sub(this.target);let l=_v.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*n*l/o.clientHeight,this.object.matrix),this._panUp(2*r*l/o.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(n*(this.object.right-this.object.left)/this.object.zoom/o.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/o.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(n){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=n:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(n){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=n:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(n,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const o=this.domElement.getBoundingClientRect(),s=n-o.left,l=r-o.top,c=o.width,u=o.height;this._mouse.x=s/c*2-1,this._mouse.y=-(l/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(n){return Math.max(this.minDistance,Math.min(this.maxDistance,n))}_handleMouseDownRotate(n){this._rotateStart.set(n.clientX,n.clientY)}_handleMouseDownDolly(n){this._updateZoomParameters(n.clientX,n.clientX),this._dollyStart.set(n.clientX,n.clientY)}_handleMouseDownPan(n){this._panStart.set(n.clientX,n.clientY)}_handleMouseMoveRotate(n){this._rotateEnd.set(n.clientX,n.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(_twoPI*this._rotateDelta.x/r.clientHeight),this._rotateUp(_twoPI*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(n){this._dollyEnd.set(n.clientX,n.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(n){this._panEnd.set(n.clientX,n.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(n){this._updateZoomParameters(n.clientX,n.clientY),n.deltaY<0?this._dollyIn(this._getZoomScale(n.deltaY)):n.deltaY>0&&this._dollyOut(this._getZoomScale(n.deltaY)),this.update()}_handleKeyDown(n){let r=!1;switch(n.code){case this.keys.UP:n.ctrlKey||n.metaKey||n.shiftKey?this.enableRotate&&this._rotateUp(_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:n.ctrlKey||n.metaKey||n.shiftKey?this.enableRotate&&this._rotateUp(-_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:n.ctrlKey||n.metaKey||n.shiftKey?this.enableRotate&&this._rotateLeft(_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:n.ctrlKey||n.metaKey||n.shiftKey?this.enableRotate&&this._rotateLeft(-_twoPI*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(n.preventDefault(),this.update())}_handleTouchStartRotate(n){if(this._pointers.length===1)this._rotateStart.set(n.pageX,n.pageY);else{const r=this._getSecondPointerPosition(n),o=.5*(n.pageX+r.x),s=.5*(n.pageY+r.y);this._rotateStart.set(o,s)}}_handleTouchStartPan(n){if(this._pointers.length===1)this._panStart.set(n.pageX,n.pageY);else{const r=this._getSecondPointerPosition(n),o=.5*(n.pageX+r.x),s=.5*(n.pageY+r.y);this._panStart.set(o,s)}}_handleTouchStartDolly(n){const r=this._getSecondPointerPosition(n),o=n.pageX-r.x,s=n.pageY-r.y,l=Math.sqrt(o*o+s*s);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(n){this.enableZoom&&this._handleTouchStartDolly(n),this.enablePan&&this._handleTouchStartPan(n)}_handleTouchStartDollyRotate(n){this.enableZoom&&this._handleTouchStartDolly(n),this.enableRotate&&this._handleTouchStartRotate(n)}_handleTouchMoveRotate(n){if(this._pointers.length==1)this._rotateEnd.set(n.pageX,n.pageY);else{const o=this._getSecondPointerPosition(n),s=.5*(n.pageX+o.x),l=.5*(n.pageY+o.y);this._rotateEnd.set(s,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(_twoPI*this._rotateDelta.x/r.clientHeight),this._rotateUp(_twoPI*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(n){if(this._pointers.length===1)this._panEnd.set(n.pageX,n.pageY);else{const r=this._getSecondPointerPosition(n),o=.5*(n.pageX+r.x),s=.5*(n.pageY+r.y);this._panEnd.set(o,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(n){const r=this._getSecondPointerPosition(n),o=n.pageX-r.x,s=n.pageY-r.y,l=Math.sqrt(o*o+s*s);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const c=(n.pageX+r.x)*.5,u=(n.pageY+r.y)*.5;this._updateZoomParameters(c,u)}_handleTouchMoveDollyPan(n){this.enableZoom&&this._handleTouchMoveDolly(n),this.enablePan&&this._handleTouchMovePan(n)}_handleTouchMoveDollyRotate(n){this.enableZoom&&this._handleTouchMoveDolly(n),this.enableRotate&&this._handleTouchMoveRotate(n)}_addPointer(n){this._pointers.push(n.pointerId)}_removePointer(n){delete this._pointerPositions[n.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==n.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(n){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==n.pointerId)return!0;return!1}_trackPointer(n){let r=this._pointerPositions[n.pointerId];r===void 0&&(r=new Vector2,this._pointerPositions[n.pointerId]=r),r.set(n.pageX,n.pageY)}_getSecondPointerPosition(n){const r=n.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(n){const r=n.deltaMode,o={clientX:n.clientX,clientY:n.clientY,deltaY:n.deltaY};switch(r){case 1:o.deltaY*=16;break;case 2:o.deltaY*=100;break}return n.ctrlKey&&!this._controlActive&&(o.deltaY*=10),o}}function onPointerDown(a){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(a.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(a)&&(this._addPointer(a),a.pointerType==="touch"?this._onTouchStart(a):this._onMouseDown(a)))}function onPointerMove(a){this.enabled!==!1&&(a.pointerType==="touch"?this._onTouchMove(a):this._onMouseMove(a))}function onPointerUp(a){switch(this._removePointer(a),this._pointers.length){case 0:this.domElement.releasePointerCapture(a.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(_endEvent),this.state=_STATE.NONE;break;case 1:const n=this._pointers[0],r=this._pointerPositions[n];this._onTouchStart({pointerId:n,pageX:r.x,pageY:r.y});break}}function onMouseDown(a){let n;switch(a.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=-1}switch(n){case MOUSE.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(a),this.state=_STATE.DOLLY;break;case MOUSE.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(a),this.state=_STATE.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(a),this.state=_STATE.ROTATE}break;case MOUSE.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(a),this.state=_STATE.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(a),this.state=_STATE.PAN}break;default:this.state=_STATE.NONE}this.state!==_STATE.NONE&&this.dispatchEvent(_startEvent)}function onMouseMove(a){switch(this.state){case _STATE.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(a);break;case _STATE.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(a);break;case _STATE.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(a);break}}function onMouseWheel(a){this.enabled===!1||this.enableZoom===!1||this.state!==_STATE.NONE||(a.preventDefault(),this.dispatchEvent(_startEvent),this._handleMouseWheel(this._customWheelEvent(a)),this.dispatchEvent(_endEvent))}function onKeyDown(a){this.enabled!==!1&&this._handleKeyDown(a)}function onTouchStart(a){switch(this._trackPointer(a),this._pointers.length){case 1:switch(this.touches.ONE){case TOUCH.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(a),this.state=_STATE.TOUCH_ROTATE;break;case TOUCH.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(a),this.state=_STATE.TOUCH_PAN;break;default:this.state=_STATE.NONE}break;case 2:switch(this.touches.TWO){case TOUCH.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(a),this.state=_STATE.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(a),this.state=_STATE.TOUCH_DOLLY_ROTATE;break;default:this.state=_STATE.NONE}break;default:this.state=_STATE.NONE}this.state!==_STATE.NONE&&this.dispatchEvent(_startEvent)}function onTouchMove(a){switch(this._trackPointer(a),this.state){case _STATE.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(a),this.update();break;case _STATE.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(a),this.update();break;case _STATE.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(a),this.update();break;case _STATE.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(a),this.update();break;default:this.state=_STATE.NONE}}function onContextMenu(a){this.enabled!==!1&&a.preventDefault()}function interceptControlDown(a){a.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function interceptControlUp(a){a.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const _hoisted_1$5={class:"PcsPage"},_hoisted_2$5={class:"hud-overlay"},_hoisted_3$5={class:"data-item"},_hoisted_4$4={class:"data-label"},_hoisted_5$4={class:"data-value"},_hoisted_6$4={class:"angle-indicators"},_hoisted_7$4={class:"angle-label"},_hoisted_8$4={class:"angle-value"},_sfc_main$5=defineComponent({__name:"PcsPage",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=reactive({horizontalDeviation:0,verticalDeviation:0,pitch:0,roll:0,yaw:0,speed:0,temperature:0}),s=ref();let l,c,u,d,f,v;const g=()=>{if(!s.value)return;l=new Scene,c=new PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),u=new WebGLRenderer({antialias:!0,alpha:!0}),u.setSize(window.innerWidth,window.innerHeight-100),s.value.appendChild(u.domElement);const $=new AmbientLight(16777215,.5);l.add($);const O=new DirectionalLight(16777215,.8);O.position.set(1,1,1),l.add(O);const B=new CylinderGeometry(2,2,6,32),V=new MeshPhongMaterial({color:3832574,specular:1118481,shininess:100});f=new Mesh(B,V),l.add(f),v=new ArrowHelper(new Vector3(0,1,0),new Vector3(0,0,0),3,16729156,.5,.3),l.add(v);const F=new AxesHelper(5);l.add(F),c.position.set(15,8,15),c.lookAt(0,0,0),d=new OrbitControls(c,u.domElement),d.enableDamping=!0,d.dampingFactor=.05},y=()=>{f.rotation.set(MathUtils.degToRad(o.roll),MathUtils.degToRad(o.yaw),MathUtils.degToRad(o.pitch));const $=new Vector3(o.horizontalDeviation/100,o.verticalDeviation/100,0);v.setDirection($.normalize()),v.setLength($.length(),.5,.3)},_=computed(()=>Math.abs(o.horizontalDeviation)>50||Math.abs(o.verticalDeviation)>50?"异常":"正常"),S=computed(()=>({"status-badge":!0,abnormal:_.value==="异常"})),x=computed(()=>[{label:"水平偏差",value:o.horizontalDeviation,unit:"mm"},{label:"垂直偏差",value:o.verticalDeviation,unit:"mm"},{label:"推进速度",value:o.speed,unit:"mm/min"}]),T=[{type:"pitch",label:"俯仰角"},{type:"roll",label:"滚动角"}],w=$=>({transform:`rotate(${o[$]}deg)`}),E=($,O=2)=>typeof $=="number"?$.toFixed(O):"--",P=()=>{requestAnimationFrame(P),d.update(),y(),u.render(l,c)};let D;const L=()=>{const $=(O,B)=>+(Math.random()*(B-O)+O).toFixed(4);o.horizontalDeviation=$(-50,50),o.verticalDeviation=$(-50,50),o.pitch=$(-15,15),o.roll=$(-15,15),o.yaw=$(-15,15),o.speed=$(20,70),o.temperature=$(20,45)};return onMounted(()=>{g(),P(),D=setInterval(L,3e3)}),onBeforeUnmount(()=>{clearInterval(D),u&&u.dispose()}),($,O)=>{const B=resolveComponent("van-nav-bar"),V=resolveComponent("van-grid-item"),F=resolveComponent("van-grid");return openBlock(),createElementBlock("div",_hoisted_1$5,[createVNode$1(B,{class:"fixed-nav-bar",title:"管片姿态监测","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",{ref_key:"threeContainer",ref:s,class:"three-container"},null,512),createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",{class:normalizeClass(["status-badge",S.value])},toDisplayString(_.value),3),createVNode$1(F,{"column-num":3,class:"data-grid"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,(U,G)=>(openBlock(),createBlock(V,{key:G},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$4,toDisplayString(U.label),1),createBaseVNode("div",_hoisted_5$4,toDisplayString(E(U.value))+toDisplayString(U.unit),1)])]),_:2},1024))),128))]),_:1})]),createBaseVNode("div",_hoisted_6$4,[(openBlock(),createElementBlock(Fragment,null,renderList(T,U=>createBaseVNode("div",{class:"angle-item",key:U.type},[createBaseVNode("div",_hoisted_7$4,toDisplayString(U.label),1),createBaseVNode("div",_hoisted_8$4,toDisplayString(E(o[U.type]))+"°",1),createBaseVNode("div",{class:"angle-bar",style:normalizeStyle$1(w(U.type))},null,4)])),64))])])}}}),PcsPage=_export_sfc(_sfc_main$5,[["__scopeId","data-v-51f3fd8d"]]),_hoisted_1$4={class:"CEpage"},_hoisted_2$4={class:"dashboard"},_hoisted_3$4={class:"data-item"},_hoisted_4$3={class:"value"},_hoisted_5$3={class:"data-item"},_hoisted_6$3={class:"value"},_hoisted_7$3={class:"data-item"},_hoisted_8$3={class:"value"},_hoisted_9$3={class:"chart-container"},_hoisted_10$3={class:"action-buttons"},_hoisted_11$3={class:"map-container"},_hoisted_12$3={class:"position-marker"},_hoisted_13$3={key:0,class:"info-box"},_sfc_main$4=defineComponent({__name:"CEPage",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=ref();let s=null,l=null;const c=reactive({lng:116.397428,lat:39.90923,direction:0}),u=()=>{if(!o.value)return;s=new AMap.Map(o.value,{zoom:17,center:[c.lng,c.lat],viewMode:"3D"}),l=new AMap.Marker({position:[c.lng,c.lat],icon:new AMap.Icon({image:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",size:new AMap.Size(24,34)}),offset:new AMap.Pixel(-12,-34)}),s.add(l);const O=new AMap.Icon({image:"https://webapi.amap.com/theme/v1.3/arrow.png",size:new AMap.Size(20,20)}),B=new AMap.Marker({position:[c.lng,c.lat],icon:O,offset:new AMap.Pixel(-10,-10)});s.add(B)},d=()=>{!s||!l||(l.setPosition([c.lng,c.lat]),s.setCenter([c.lng,c.lat]),c.direction=(c.direction+2)%360,s.setRotation(c.direction))},f=()=>{setInterval(()=>{c.lng+=1e-4*Math.random(),c.lat+=1e-4*Math.random(),d()},3e3)};onMounted(()=>{const O="你的高德地图Key",B=document.createElement("script");B.src=`https://webapi.amap.com/maps?v=2.0&key=${O}`,B.onload=()=>{u(),f()},document.head.appendChild(B)}),onBeforeUnmount(()=>{s&&(s.destroy(),s=null)}),use([install$Q,install$p,install$i]);const v=shallowRef();let g=null;const y=ref(!1),_=ref(!1),S=ref(""),x=reactive({propellingSpeed:0,cutterSpeed:0,totalThrust:0,oilPressure:0}),T=reactive({propellingSpeed:40,cutterSpeed:2.5}),w=reactive({time:[],speed:[],thrust:[]});let E;const P=()=>{x.propellingSpeed=Math.floor(Math.random()*20+30),x.cutterSpeed=+(Math.random()*.5+2.5).toFixed(1),x.totalThrust=Math.floor(Math.random()*500+15e3);const O=new Date;w.time.push(`${O.getHours()}:${O.getMinutes()}:${O.getSeconds()}`),w.speed.push(x.propellingSpeed),w.thrust.push(x.totalThrust/1e3),w.time.length>50&&(w.time.shift(),w.speed.shift(),w.thrust.shift()),L()},D=()=>{v.value&&(g=init$1(v.value),g.setOption({tooltip:{trigger:"axis"},grid:{left:"15%"},xAxis:{type:"category",data:w.time},yAxis:[{name:"推进速度 (mm/min)",type:"value"},{name:"总推力 (10³kN)",type:"value"}],series:[{name:"推进速度",type:"line",data:w.speed,yAxisIndex:0},{name:"总推力",type:"line",data:w.thrust,yAxisIndex:1}]}))},L=()=>{g&&g.setOption({xAxis:{data:w.time},series:[{data:w.speed},{data:w.thrust}]})},$=()=>{y.value=!y.value,y.value?E=setInterval(P,1e3):clearInterval(E)};return onMounted(()=>{D()}),onBeforeUnmount(()=>{E&&clearInterval(E),g&&g.dispose()}),(O,B)=>{const V=resolveComponent("van-nav-bar"),F=resolveComponent("van-grid-item"),U=resolveComponent("van-grid"),G=resolveComponent("van-notice-bar"),W=resolveComponent("van-button"),j=resolveComponent("van-field"),K=resolveComponent("van-form"),q=resolveComponent("van-dialog"),ie=resolveComponent("van-icon");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$4,[createVNode$1(V,{class:"fixed-nav-bar",title:"盾构施工工效","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",_hoisted_2$4,[createVNode$1(U,{"column-num":3,border:!1},{default:withCtx(()=>[createVNode$1(F,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$4,[B[4]||(B[4]=createBaseVNode("div",{class:"label"},"推进速度",-1)),createBaseVNode("div",_hoisted_4$3,toDisplayString(x.propellingSpeed)+" mm/min",1)])]),_:1}),createVNode$1(F,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$3,[B[5]||(B[5]=createBaseVNode("div",{class:"label"},"刀盘转速",-1)),createBaseVNode("div",_hoisted_6$3,toDisplayString(x.cutterSpeed)+" rpm",1)])]),_:1}),createVNode$1(F,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$3,[B[6]||(B[6]=createBaseVNode("div",{class:"label"},"总推力",-1)),createBaseVNode("div",_hoisted_8$3,toDisplayString(x.totalThrust)+" kN",1)])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",{ref_key:"chartEl",ref:v,class:"chart"},null,512)]),S.value?(openBlock(),createBlock(G,{key:0,"left-icon":"warning",text:S.value,color:"#f44",background:"#ffe6e6"},null,8,["text"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$3,[createVNode$1(W,{round:"",type:"primary",onClick:$},{default:withCtx(()=>[createTextVNode(toDisplayString(y.value?"暂停掘进":"开始掘进"),1)]),_:1}),createVNode$1(W,{round:"",class:"custom-info-button",onClick:B[0]||(B[0]=ee=>_.value=!0)},{default:withCtx(()=>B[7]||(B[7]=[createTextVNode(" 参数调整 ")])),_:1})]),createVNode$1(q,{show:_.value,"onUpdate:show":B[3]||(B[3]=ee=>_.value=ee),title:"施工参数调整","show-cancel-button":""},{default:withCtx(()=>[createVNode$1(K,{class:"param-form"},{default:withCtx(()=>[createVNode$1(j,{modelValue:T.propellingSpeed,"onUpdate:modelValue":B[1]||(B[1]=ee=>T.propellingSpeed=ee),label:"推进速度",type:"number",suffix:"mm/min"},null,8,["modelValue"]),createVNode$1(j,{modelValue:T.cutterSpeed,"onUpdate:modelValue":B[2]||(B[2]=ee=>T.cutterSpeed=ee),label:"刀盘转速",type:"number",suffix:"rpm"},null,8,["modelValue"])]),_:1})]),_:1},8,["show"])]),createBaseVNode("div",_hoisted_11$3,[createBaseVNode("div",{id:"map-container",ref_key:"mapContainer",ref:o},null,512),createBaseVNode("div",_hoisted_12$3,[createVNode$1(ie,{name:"location",color:"#1989fa",size:"24"}),c?(openBlock(),createElementBlock("div",_hoisted_13$3,[createBaseVNode("div",null,"经度: "+toDisplayString(c.lng.toFixed(6)),1),createBaseVNode("div",null,"纬度: "+toDisplayString(c.lat.toFixed(6)),1),createBaseVNode("div",null,"方向: "+toDisplayString(c.direction)+"°",1)])):createCommentVNode("",!0)])])],64)}}}),CEPage=_export_sfc(_sfc_main$4,[["__scopeId","data-v-dbde51f0"]]),_hoisted_1$3={class:"bottom-nav"},_hoisted_2$3=["onClick"],_hoisted_3$3={class:"nav-text"},__default__={name:"BottomNav"},_sfc_main$3=defineComponent({...__default__,setup(a){const n=useRouter(),r=useRoute(),o=[{text:"首页",icon:"icon-home"},{text:"报警",icon:"icon-alarm"},{text:"历史",icon:"icon-history"}],s=ref(0),l=c=>{s.value=c,c===0?n.push("/efw"):c===1?n.push("/alarm"):c===2&&n.push("/history")};return onMounted(()=>{switch(r.path){case"/efw":s.value=0;break;case"/alarm":s.value=1;break;case"/history":s.value=2;break}}),(c,u)=>(openBlock(),createElementBlock("nav",_hoisted_1$3,[(openBlock(),createElementBlock(Fragment,null,renderList(o,(d,f)=>createBaseVNode("div",{key:f,class:normalizeClass(["nav-item",{active:s.value===f}]),onClick:v=>l(f)},[createBaseVNode("span",{class:normalizeClass(["nav-icon",d.icon])},null,2),createBaseVNode("span",_hoisted_3$3,toDisplayString(d.text),1)],10,_hoisted_2$3)),64))]))}}),BottomNav=_export_sfc(_sfc_main$3,[["__scopeId","data-v-b553a1df"]]),_hoisted_1$2={class:"EFWPage"},_hoisted_2$2={class:"status-cards"},_hoisted_3$2={class:"status-card"},_hoisted_4$2={class:"card-content"},_hoisted_5$2={class:"card-value"},_hoisted_6$2={class:"status-card"},_hoisted_7$2={class:"card-content"},_hoisted_8$2={class:"card-value"},_hoisted_9$2={class:"chart-container"},_hoisted_10$2={class:"alarm-section"},_hoisted_11$2={class:"section-header"},_hoisted_12$2={class:"alarm-count"},_hoisted_13$2={class:"alarm-list"},_hoisted_14$2=["onClick"],_hoisted_15$2={class:"alarm-icon"},_hoisted_16$2={class:"alarm-content"},_hoisted_17$2={class:"alarm-title"},_hoisted_18$2={class:"alarm-info"},_hoisted_19$1={class:"alarm-time"},_hoisted_20$1={class:"alarm-status"},_sfc_main$2=defineComponent({__name:"EFWPage",setup(a){const n=useRouter(),r=()=>{n.push("/")},o=ref();let s=null;const l=reactive({healthScore:88,rotationSpeed:2.6,pressure:2.8,temperature:48}),c=ref([{id:1,deviceName:"盾构机#001",type:"刀盘过热",timestamp:Date.now()-36e5,status:"pending",level:"critical"},{id:2,deviceName:"泥水系统#002",type:"压力异常",timestamp:Date.now()-18e5,status:"processing",level:"warning"},{id:3,deviceName:"推进系统#003",type:"液压波动",timestamp:Date.now()-9e5,status:"resolved",level:"notice"}]),u={tooltip:{trigger:"item",formatter:"{d}%"},legend:{bottom:10,left:"center",data:["正常","警告","故障"]},series:[{name:"设备状态",type:"pie",radius:["40%","65%"],center:["50%","45%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:18,fontWeight:"bold"}},data:[{value:85,name:"正常"},{value:10,name:"警告"},{value:5,name:"故障"}]}]},d={pending:"待处理",processing:"处理中",resolved:"已解决"},f=S=>new Date(S).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),v=()=>{o.value&&(s=init$1(o.value),s.setOption(u))},g=()=>{const S=[{value:l.healthScore,name:"正常"},{value:15-l.healthScore%15,name:"警告"},{value:100-l.healthScore-(15-l.healthScore%15),name:"故障"}];s==null||s.setOption({series:[{data:S}]})},y=()=>{s==null||s.resize()},_=S=>{console.log("查看报警详情:",S)};return onMounted(()=>{v();const S=setInterval(()=>{l.healthScore=Math.max(40,Math.min(98,l.healthScore+(Math.random()-.5)*2)),l.rotationSpeed=+(2.5+Math.random()*.5).toFixed(2),g()},3e3);onBeforeUnmount(()=>{clearInterval(S),s==null||s.dispose()})}),(S,x)=>{const T=resolveComponent("van-nav-bar"),w=resolveDirective("resize");return openBlock(),createElementBlock("div",_hoisted_1$2,[createVNode$1(T,{class:"fixed-nav-bar",title:"盾构设备故障预警","left-text":"返回","left-arrow":"",onClickLeft:r}),createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[x[1]||(x[1]=createBaseVNode("div",{class:"card-icon health"},null,-1)),createBaseVNode("div",_hoisted_4$2,[x[0]||(x[0]=createBaseVNode("div",{class:"card-label"},"健康指数",-1)),createBaseVNode("div",_hoisted_5$2,toDisplayString(l.healthScore.toFixed(2))+"%",1)])]),createBaseVNode("div",_hoisted_6$2,[x[3]||(x[3]=createBaseVNode("div",{class:"card-icon speed"},null,-1)),createBaseVNode("div",_hoisted_7$2,[x[2]||(x[2]=createBaseVNode("div",{class:"card-label"},"刀盘转速",-1)),createBaseVNode("div",_hoisted_8$2,toDisplayString(l.rotationSpeed)+" rpm",1)])])]),createBaseVNode("div",_hoisted_9$2,[withDirectives(createBaseVNode("div",{ref_key:"chartRef",ref:o,class:"chart"},null,512),[[w,y]])]),createBaseVNode("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,[x[4]||(x[4]=createBaseVNode("h2",null,"实时报警",-1)),createBaseVNode("div",_hoisted_12$2,toDisplayString(c.value.length)+" 条未处理",1)]),createBaseVNode("div",_hoisted_13$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,E=>(openBlock(),createElementBlock("div",{key:E.id,class:normalizeClass(["alarm-item",E.level]),onClick:P=>_(E)},[createBaseVNode("div",_hoisted_15$2,[createBaseVNode("span",{class:normalizeClass(["icon",E.level])},null,2)]),createBaseVNode("div",_hoisted_16$2,[createBaseVNode("div",_hoisted_17$2,toDisplayString(E.deviceName)+" - "+toDisplayString(E.type),1),createBaseVNode("div",_hoisted_18$2,[createBaseVNode("span",_hoisted_19$1,toDisplayString(f(E.timestamp)),1),createBaseVNode("span",_hoisted_20$1,toDisplayString(d[E.status]),1)])])],10,_hoisted_14$2))),128))])]),createVNode$1(BottomNav)])}}}),EFWPage=_export_sfc(_sfc_main$2,[["__scopeId","data-v-9472e026"]]),_hoisted_1$1={class:"detail-container"},_hoisted_2$1={class:"detail-header"},_hoisted_3$1={class:"status-badge"},_hoisted_4$1={class:"detail-item"},_hoisted_5$1={class:"value"},_hoisted_6$1={class:"detail-item"},_hoisted_7$1={class:"value"},_hoisted_8$1={class:"detail-item"},_hoisted_9$1={class:"value"},_hoisted_10$1={class:"detail-item"},_hoisted_11$1={class:"detail-item full-width"},_hoisted_12$1={class:"value description"},_hoisted_13$1={key:0,class:"action-buttons"},_hoisted_14$1={class:"timeline-section"},_hoisted_15$1={class:"timeline"},_hoisted_16$1={class:"timeline-content"},_hoisted_17$1={class:"timeline-time"},_hoisted_18$1={class:"timeline-text"},_sfc_main$1=defineComponent({__name:"AlarmDetail",setup(a){const n=useRouter(),r=ref({id:1,deviceName:"盾构机#001",type:"刀盘过热",timestamp:Date.now()-36e5,status:"pending",level:"critical",description:"刀盘温度持续升高，超过安全阈值（120°C），当前温度138°C",history:[{timestamp:Date.now()-36e5,action:"系统检测到异常温度，触发报警"}]}),o={pending:"待处理",processing:"处理中",resolved:"已解决"},s={critical:"紧急",warning:"警告",notice:"提示"},l=u=>new Date(u).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),c=()=>{r.value.status==="pending"?(r.value.status="processing",r.value.history.push({timestamp:Date.now(),action:"操作人员开始处理报警"})):r.value.status==="processing"&&(r.value.status="resolved",r.value.history.push({timestamp:Date.now(),action:"报警问题已解决"}))};return(u,d)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("header",_hoisted_2$1,[createBaseVNode("button",{class:"back-btn",onClick:d[0]||(d[0]=f=>unref(n).back())},d[1]||(d[1]=[createBaseVNode("span",{class:"icon-arrow-left"},null,-1)])),d[2]||(d[2]=createBaseVNode("h2",null,"报警详情",-1))]),createBaseVNode("div",{class:normalizeClass(["detail-card",r.value.level])},[createBaseVNode("div",_hoisted_3$1,toDisplayString(o[r.value.status]),1),createBaseVNode("div",_hoisted_4$1,[d[3]||(d[3]=createBaseVNode("label",null,"设备名称",-1)),createBaseVNode("div",_hoisted_5$1,toDisplayString(r.value.deviceName),1)]),createBaseVNode("div",_hoisted_6$1,[d[4]||(d[4]=createBaseVNode("label",null,"报警类型",-1)),createBaseVNode("div",_hoisted_7$1,toDisplayString(r.value.type),1)]),createBaseVNode("div",_hoisted_8$1,[d[5]||(d[5]=createBaseVNode("label",null,"发生时间",-1)),createBaseVNode("div",_hoisted_9$1,toDisplayString(l(r.value.timestamp)),1)]),createBaseVNode("div",_hoisted_10$1,[d[6]||(d[6]=createBaseVNode("label",null,"报警等级",-1)),createBaseVNode("div",{class:normalizeClass(["value level-tag",r.value.level])},toDisplayString(s[r.value.level]),3)]),createBaseVNode("div",_hoisted_11$1,[d[7]||(d[7]=createBaseVNode("label",null,"详细描述",-1)),createBaseVNode("div",_hoisted_12$1,toDisplayString(r.value.description||"暂无详细描述"),1)]),r.value.status!=="resolved"?(openBlock(),createElementBlock("div",_hoisted_13$1,[r.value.status==="pending"?(openBlock(),createElementBlock("button",{key:0,class:"btn resolve-btn",onClick:c}," 标记为处理中 ")):createCommentVNode("",!0),r.value.status==="processing"?(openBlock(),createElementBlock("button",{key:1,class:"btn resolve-btn",onClick:c}," 标记为已解决 ")):createCommentVNode("",!0)])):createCommentVNode("",!0)],2),createBaseVNode("div",_hoisted_14$1,[d[9]||(d[9]=createBaseVNode("h3",null,"处理记录",-1)),createBaseVNode("div",_hoisted_15$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value.history,(f,v)=>(openBlock(),createElementBlock("div",{key:v,class:"timeline-item"},[d[8]||(d[8]=createBaseVNode("div",{class:"timeline-marker"},null,-1)),createBaseVNode("div",_hoisted_16$1,[createBaseVNode("div",_hoisted_17$1,toDisplayString(l(f.timestamp)),1),createBaseVNode("div",_hoisted_18$1,toDisplayString(f.action),1)])]))),128))])]),createVNode$1(BottomNav)]))}}),AlarmDetail=_export_sfc(_sfc_main$1,[["__scopeId","data-v-e1362c32"]]),_hoisted_1={class:"history-detail"},_hoisted_2={class:"detail-header"},_hoisted_3={class:"info-card"},_hoisted_4={class:"info-row"},_hoisted_5={class:"value"},_hoisted_6={class:"info-row"},_hoisted_7={class:"info-row"},_hoisted_8={class:"value"},_hoisted_9={class:"chart-card"},_hoisted_10={class:"snapshot-card"},_hoisted_11={class:"params-grid"},_hoisted_12={class:"param-item"},_hoisted_13={class:"param-value"},_hoisted_14={class:"param-item"},_hoisted_15={class:"param-value"},_hoisted_16={class:"param-item"},_hoisted_17={class:"param-value"},_hoisted_18={class:"param-item"},_hoisted_19={class:"param-value"},_hoisted_20={class:"timeline-card"},_hoisted_21={class:"timeline"},_hoisted_22={class:"timeline-content"},_hoisted_23={class:"record-header"},_hoisted_24={class:"operator"},_hoisted_25={class:"time"},_hoisted_26={class:"record-detail"},_hoisted_27={key:0,class:"record-comment"},_sfc_main=defineComponent({__name:"HistoryDetial",setup(a){const n=useRouter(),r=ref();let o=null;const s=ref({id:"20230815001",deviceId:"TB-001",type:"alarm",timestamp:1692e9,snapshot:{rotation:2.4,pressure:2.8,temperature:68,speed:35},records:[{timestamp:1692e9,operator:"系统自动",action:"检测到刀盘温度异常"},{timestamp:16920018e5,operator:"张三",action:"现场检查确认",comment:"发现冷却系统异常"},{timestamp:16920036e5,operator:"李四",action:"更换冷却泵"},{timestamp:16920054e5,operator:"系统自动",action:"温度恢复正常"}]}),l={tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:[{name:"温度 (°C)",type:"value"},{name:"压力 (MPa)",type:"value"}],series:[{name:"温度",type:"line",data:[[16919964e5,62],[16919982e5,65],[1692e9,68],[16920018e5,72],[16920036e5,65],[16920054e5,58]],smooth:!0,showSymbol:!1},{name:"压力",type:"line",yAxisIndex:1,data:[[16919964e5,2.6],[16919982e5,2.7],[1692e9,2.8],[16920018e5,2.9],[16920036e5,2.5],[16920054e5,2.4]],smooth:!0,showSymbol:!1}]},c={alarm:"报警记录",maintenance:"维护记录",inspection:"巡检记录"},u=v=>new Date(v).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),d=()=>{r.value&&(o=init$1(r.value),o.setOption(l))},f=()=>{o==null||o.resize()};return onMounted(()=>{d(),window.addEventListener("resize",f)}),onBeforeUnmount(()=>{window.removeEventListener("resize",f),o==null||o.dispose()}),(v,g)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("header",_hoisted_2,[createBaseVNode("button",{class:"back-btn",onClick:g[0]||(g[0]=y=>unref(n).back())},g[1]||(g[1]=[createBaseVNode("span",{class:"icon-arrow-left"},null,-1)])),g[2]||(g[2]=createBaseVNode("h2",null,"历史记录详情",-1))]),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[g[3]||(g[3]=createBaseVNode("span",{class:"label"},"设备编号",-1)),createBaseVNode("span",_hoisted_5,toDisplayString(s.value.deviceId),1)]),createBaseVNode("div",_hoisted_6,[g[4]||(g[4]=createBaseVNode("span",{class:"label"},"记录类型",-1)),createBaseVNode("span",{class:normalizeClass(["value type-tag",s.value.type])},toDisplayString(c[s.value.type]),3)]),createBaseVNode("div",_hoisted_7,[g[5]||(g[5]=createBaseVNode("span",{class:"label"},"记录时间",-1)),createBaseVNode("span",_hoisted_8,toDisplayString(u(s.value.timestamp)),1)])]),createBaseVNode("div",_hoisted_9,[g[6]||(g[6]=createBaseVNode("div",{class:"card-title"},"参数趋势",-1)),createBaseVNode("div",{ref_key:"trendChart",ref:r,class:"trend-chart"},null,512)]),createBaseVNode("div",_hoisted_10,[g[11]||(g[11]=createBaseVNode("div",{class:"card-title"},"参数快照",-1)),createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[g[7]||(g[7]=createBaseVNode("div",{class:"param-label"},"刀盘转速",-1)),createBaseVNode("div",_hoisted_13,toDisplayString(s.value.snapshot.rotation)+" rpm",1)]),createBaseVNode("div",_hoisted_14,[g[8]||(g[8]=createBaseVNode("div",{class:"param-label"},"土压压力",-1)),createBaseVNode("div",_hoisted_15,toDisplayString(s.value.snapshot.pressure)+" MPa",1)]),createBaseVNode("div",_hoisted_16,[g[9]||(g[9]=createBaseVNode("div",{class:"param-label"},"油温",-1)),createBaseVNode("div",_hoisted_17,toDisplayString(s.value.snapshot.temperature)+" °C",1)]),createBaseVNode("div",_hoisted_18,[g[10]||(g[10]=createBaseVNode("div",{class:"param-label"},"推进速度",-1)),createBaseVNode("div",_hoisted_19,toDisplayString(s.value.snapshot.speed)+" mm/min",1)])])]),createBaseVNode("div",_hoisted_20,[g[13]||(g[13]=createBaseVNode("div",{class:"card-title"},"操作记录",-1)),createBaseVNode("div",_hoisted_21,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value.records,(y,_)=>(openBlock(),createElementBlock("div",{key:_,class:"timeline-item"},[g[12]||(g[12]=createBaseVNode("div",{class:"timeline-marker"},null,-1)),createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,[createBaseVNode("span",_hoisted_24,toDisplayString(y.operator),1),createBaseVNode("span",_hoisted_25,toDisplayString(u(y.timestamp)),1)]),createBaseVNode("div",_hoisted_26,toDisplayString(y.action),1),y.comment?(openBlock(),createElementBlock("div",_hoisted_27,' "'+toDisplayString(y.comment)+'" ',1)):createCommentVNode("",!0)])]))),128))])]),createVNode$1(BottomNav)]))}}),HistoryDetial=_export_sfc(_sfc_main,[["__scopeId","data-v-3c52b8d2"]]),router=createRouter({history:createWebHistory("/"),routes:[{path:"/",name:"main",component:MainPage},{path:"/data",name:"data",component:DataShow},{path:"/class",name:"class",component:ClassPage},{path:"/base",name:"base",component:BaseMsg},{path:"/progress",name:"progress",component:ProgressPage},{path:"/dpsystem",name:"dpsystem",component:DpSystem},{path:"/stc",name:"stc",component:StcPage},{path:"/progress2",name:"progress2",component:ProgressPage2},{path:"/material",name:"material",component:MaterialUsepage},{path:"/pcs",name:"pcs",component:PcsPage},{path:"/ce",name:"ce",component:CEPage},{path:"/efw",name:"efw",component:EFWPage},{path:"/alarm",name:"alarm",component:AlarmDetail},{path:"/history",name:"history",component:HistoryDetial}]}),app=createApp(App);app.use(stdin_default);app.use(router);app.mount("#app");
